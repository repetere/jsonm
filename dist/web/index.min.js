var JSONM=(()=>{var ise=Object.create;var pv=Object.defineProperty;var ase=Object.getOwnPropertyDescriptor;var sse=Object.getOwnPropertyNames;var ose=Object.getPrototypeOf,use=Object.prototype.hasOwnProperty;var fse=(t,e,r)=>e in t?pv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ne=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Zf=(t,e)=>{for(var r in e)pv(t,r,{get:e[r],enumerable:!0})},NO=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of sse(e))!use.call(t,a)&&a!==r&&pv(t,a,{get:()=>e[a],enumerable:!(n=ase(e,a))||n.enumerable});return t};var ut=(t,e,r)=>(r=t!=null?ise(ose(t)):{},NO(e||!t||!t.__esModule?pv(r,"default",{value:t,enumerable:!0}):r,t)),lse=t=>NO(pv({},"__esModule",{value:!0}),t);var Ye=(t,e,r)=>(fse(t,typeof e!="symbol"?e+"":e,r),r);var eM=ne(ms=>{ms.fetch=mv(global.fetch)&&mv(global.ReadableStream);ms.writableStream=mv(global.WritableStream);ms.abortController=mv(global.AbortController);var Jf;function X3(){if(Jf!==void 0)return Jf;if(global.XMLHttpRequest){Jf=new global.XMLHttpRequest;try{Jf.open("GET",global.XDomainRequest?"/":"https://example.com")}catch{Jf=null}}else Jf=null;return Jf}function Q3(t){var e=X3();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch{}return!1}ms.arraybuffer=ms.fetch||Q3("arraybuffer");ms.msstream=!ms.fetch&&Q3("ms-stream");ms.mozchunkedarraybuffer=!ms.fetch&&Q3("moz-chunked-arraybuffer");ms.overrideMimeType=ms.fetch||(X3()?mv(X3().overrideMimeType):!1);function mv(t){return typeof t=="function"}Jf=null});var Et=ne((hYe,tM)=>{typeof Object.create=="function"?tM.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:tM.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var vs=ne((dYe,rM)=>{"use strict";var wd=typeof Reflect=="object"?Reflect:null,IO=wd&&typeof wd.apply=="function"?wd.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},ub;wd&&typeof wd.ownKeys=="function"?ub=wd.ownKeys:Object.getOwnPropertySymbols?ub=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ub=function(e){return Object.getOwnPropertyNames(e)};function cse(t){console&&console.warn&&console.warn(t)}var OO=Number.isNaN||function(e){return e!==e};function nn(){nn.init.call(this)}rM.exports=nn;rM.exports.once=mse;nn.EventEmitter=nn;nn.prototype._events=void 0;nn.prototype._eventsCount=0;nn.prototype._maxListeners=void 0;var DO=10;function fb(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(nn,"defaultMaxListeners",{enumerable:!0,get:function(){return DO},set:function(t){if(typeof t!="number"||t<0||OO(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");DO=t}});nn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};nn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||OO(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function RO(t){return t._maxListeners===void 0?nn.defaultMaxListeners:t._maxListeners}nn.prototype.getMaxListeners=function(){return RO(this)};nn.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var a=e==="error",s=this._events;if(s!==void 0)a=a&&s.error===void 0;else if(!a)return!1;if(a){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var u=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw u.context=o,u}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")IO(l,this,r);else for(var h=l.length,p=PO(l,h),n=0;n<h;++n)IO(p[n],this,r);return!0};function CO(t,e,r,n){var a,s,o;if(fb(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),a=RO(t),a>0&&o.length>a&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=o.length,cse(u)}return t}nn.prototype.addListener=function(e,r){return CO(this,e,r,!1)};nn.prototype.on=nn.prototype.addListener;nn.prototype.prependListener=function(e,r){return CO(this,e,r,!0)};function hse(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function FO(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},a=hse.bind(n);return a.listener=r,n.wrapFn=a,a}nn.prototype.once=function(e,r){return fb(r),this.on(e,FO(this,e,r)),this};nn.prototype.prependOnceListener=function(e,r){return fb(r),this.prependListener(e,FO(this,e,r)),this};nn.prototype.removeListener=function(e,r){var n,a,s,o,u;if(fb(r),a=this._events,a===void 0)return this;if(n=a[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){u=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():dse(n,s),n.length===1&&(a[e]=n[0]),a.removeListener!==void 0&&this.emit("removeListener",e,u||r)}return this};nn.prototype.off=nn.prototype.removeListener;nn.prototype.removeAllListeners=function(e){var r,n,a;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(a=0;a<s.length;++a)o=s[a],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(a=r.length-1;a>=0;a--)this.removeListener(e,r[a]);return this};function BO(t,e,r){var n=t._events;if(n===void 0)return[];var a=n[e];return a===void 0?[]:typeof a=="function"?r?[a.listener||a]:[a]:r?pse(a):PO(a,a.length)}nn.prototype.listeners=function(e){return BO(this,e,!0)};nn.prototype.rawListeners=function(e){return BO(this,e,!1)};nn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):LO.call(t,e)};nn.prototype.listenerCount=LO;function LO(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}nn.prototype.eventNames=function(){return this._eventsCount>0?ub(this._events):[]};function PO(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function dse(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function pse(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function mse(t,e){return new Promise(function(r,n){function a(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",a),r([].slice.call(arguments))}qO(t,e,s,{once:!0}),e!=="error"&&vse(t,a,{once:!0})})}function vse(t,e,r){typeof t.on=="function"&&qO(t,"error",e,r)}function qO(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function a(s){n.once&&t.removeEventListener(e,a),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var nM=ne((pYe,$O)=>{$O.exports=vs().EventEmitter});var UO=ne(lb=>{"use strict";lb.byteLength=yse;lb.toByteArray=wse;lb.fromByteArray=Sse;var su=[],gs=[],gse=typeof Uint8Array!="undefined"?Uint8Array:Array,iM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(oc=0,zO=iM.length;oc<zO;++oc)su[oc]=iM[oc],gs[iM.charCodeAt(oc)]=oc;var oc,zO;gs["-".charCodeAt(0)]=62;gs["_".charCodeAt(0)]=63;function jO(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function yse(t){var e=jO(t),r=e[0],n=e[1];return(r+n)*3/4-n}function bse(t,e,r){return(e+r)*3/4-r}function wse(t){var e,r=jO(t),n=r[0],a=r[1],s=new gse(bse(t,n,a)),o=0,u=a>0?n-4:n,l;for(l=0;l<u;l+=4)e=gs[t.charCodeAt(l)]<<18|gs[t.charCodeAt(l+1)]<<12|gs[t.charCodeAt(l+2)]<<6|gs[t.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return a===2&&(e=gs[t.charCodeAt(l)]<<2|gs[t.charCodeAt(l+1)]>>4,s[o++]=e&255),a===1&&(e=gs[t.charCodeAt(l)]<<10|gs[t.charCodeAt(l+1)]<<4|gs[t.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function _se(t){return su[t>>18&63]+su[t>>12&63]+su[t>>6&63]+su[t&63]}function xse(t,e,r){for(var n,a=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),a.push(_se(n));return a.join("")}function Sse(t){for(var e,r=t.length,n=r%3,a=[],s=16383,o=0,u=r-n;o<u;o+=s)a.push(xse(t,o,o+s>u?u:o+s));return n===1?(e=t[r-1],a.push(su[e>>2]+su[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],a.push(su[e>>10]+su[e>>4&63]+su[e<<2&63]+"=")),a.join("")}});var VO=ne(aM=>{aM.read=function(t,e,r,n,a){var s,o,u=a*8-n-1,l=(1<<u)-1,h=l>>1,p=-7,v=r?a-1:0,y=r?-1:1,S=t[e+v];for(v+=y,s=S&(1<<-p)-1,S>>=-p,p+=u;p>0;s=s*256+t[e+v],v+=y,p-=8);for(o=s&(1<<-p)-1,s>>=-p,p+=n;p>0;o=o*256+t[e+v],v+=y,p-=8);if(s===0)s=1-h;else{if(s===l)return o?NaN:(S?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-h}return(S?-1:1)*o*Math.pow(2,s-n)};aM.write=function(t,e,r,n,a,s){var o,u,l,h=s*8-a-1,p=(1<<h)-1,v=p>>1,y=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=n?0:s-1,A=n?1:-1,T=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,o=p):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+v>=1?e+=y/l:e+=y*Math.pow(2,1-v),e*l>=2&&(o++,l/=2),o+v>=p?(u=0,o=p):o+v>=1?(u=(e*l-1)*Math.pow(2,a),o=o+v):(u=e*Math.pow(2,v-1)*Math.pow(2,a),o=0));a>=8;t[r+S]=u&255,S+=A,u/=256,a-=8);for(o=o<<a|u,h+=a;h>0;t[r+S]=o&255,S+=A,o/=256,h-=8);t[r+S-A]|=T*128}});var mn=ne(Ed=>{"use strict";var sM=UO(),xd=VO(),WO=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ed.Buffer=Xe;Ed.SlowBuffer=Nse;Ed.INSPECT_MAX_BYTES=50;var cb=2147483647;Ed.kMaxLength=cb;Xe.TYPED_ARRAY_SUPPORT=Ese();!Xe.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Ese(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(Xe.prototype,"parent",{enumerable:!0,get:function(){if(!!Xe.isBuffer(this))return this.buffer}});Object.defineProperty(Xe.prototype,"offset",{enumerable:!0,get:function(){if(!!Xe.isBuffer(this))return this.byteOffset}});function Gu(t){if(t>cb)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,Xe.prototype),e}function Xe(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return lM(t)}return ZO(t,e,r)}Xe.poolSize=8192;function ZO(t,e,r){if(typeof t=="string")return Ase(t,e);if(ArrayBuffer.isView(t))return kse(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(ou(t,ArrayBuffer)||t&&ou(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(ou(t,SharedArrayBuffer)||t&&ou(t.buffer,SharedArrayBuffer)))return uM(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return Xe.from(n,e,r);let a=Tse(t);if(a)return a;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return Xe.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}Xe.from=function(t,e,r){return ZO(t,e,r)};Object.setPrototypeOf(Xe.prototype,Uint8Array.prototype);Object.setPrototypeOf(Xe,Uint8Array);function JO(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function Mse(t,e,r){return JO(t),t<=0?Gu(t):e!==void 0?typeof r=="string"?Gu(t).fill(e,r):Gu(t).fill(e):Gu(t)}Xe.alloc=function(t,e,r){return Mse(t,e,r)};function lM(t){return JO(t),Gu(t<0?0:cM(t)|0)}Xe.allocUnsafe=function(t){return lM(t)};Xe.allocUnsafeSlow=function(t){return lM(t)};function Ase(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Xe.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=YO(t,e)|0,n=Gu(r),a=n.write(t,e);return a!==r&&(n=n.slice(0,a)),n}function oM(t){let e=t.length<0?0:cM(t.length)|0,r=Gu(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function kse(t){if(ou(t,Uint8Array)){let e=new Uint8Array(t);return uM(e.buffer,e.byteOffset,e.byteLength)}return oM(t)}function uM(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,Xe.prototype),n}function Tse(t){if(Xe.isBuffer(t)){let e=cM(t.length)|0,r=Gu(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||dM(t.length)?Gu(0):oM(t);if(t.type==="Buffer"&&Array.isArray(t.data))return oM(t.data)}function cM(t){if(t>=cb)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+cb.toString(16)+" bytes");return t|0}function Nse(t){return+t!=t&&(t=0),Xe.alloc(+t)}Xe.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==Xe.prototype};Xe.compare=function(e,r){if(ou(e,Uint8Array)&&(e=Xe.from(e,e.offset,e.byteLength)),ou(r,Uint8Array)&&(r=Xe.from(r,r.offset,r.byteLength)),!Xe.isBuffer(e)||!Xe.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,a=r.length;for(let s=0,o=Math.min(n,a);s<o;++s)if(e[s]!==r[s]){n=e[s],a=r[s];break}return n<a?-1:a<n?1:0};Xe.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Xe.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Xe.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let a=Xe.allocUnsafe(r),s=0;for(n=0;n<e.length;++n){let o=e[n];if(ou(o,Uint8Array))s+o.length>a.length?(Xe.isBuffer(o)||(o=Xe.from(o)),o.copy(a,s)):Uint8Array.prototype.set.call(a,o,s);else if(Xe.isBuffer(o))o.copy(a,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=o.length}return a};function YO(t,e){if(Xe.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||ou(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let a=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return fM(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return s5(t).length;default:if(a)return n?-1:fM(t).length;e=(""+e).toLowerCase(),a=!0}}Xe.byteLength=YO;function Ise(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return $se(this,e,r);case"utf8":case"utf-8":return QO(this,e,r);case"ascii":return Pse(this,e,r);case"latin1":case"binary":return qse(this,e,r);case"base64":return Bse(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return zse(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}Xe.prototype._isBuffer=!0;function uc(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}Xe.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)uc(this,r,r+1);return this};Xe.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)uc(this,r,r+3),uc(this,r+1,r+2);return this};Xe.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)uc(this,r,r+7),uc(this,r+1,r+6),uc(this,r+2,r+5),uc(this,r+3,r+4);return this};Xe.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?QO(this,0,e):Ise.apply(this,arguments)};Xe.prototype.toLocaleString=Xe.prototype.toString;Xe.prototype.equals=function(e){if(!Xe.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:Xe.compare(this,e)===0};Xe.prototype.inspect=function(){let e="",r=Ed.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};WO&&(Xe.prototype[WO]=Xe.prototype.inspect);Xe.prototype.compare=function(e,r,n,a,s){if(ou(e,Uint8Array)&&(e=Xe.from(e,e.offset,e.byteLength)),!Xe.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),a===void 0&&(a=0),s===void 0&&(s=this.length),r<0||n>e.length||a<0||s>this.length)throw new RangeError("out of range index");if(a>=s&&r>=n)return 0;if(a>=s)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,a>>>=0,s>>>=0,this===e)return 0;let o=s-a,u=n-r,l=Math.min(o,u),h=this.slice(a,s),p=e.slice(r,n);for(let v=0;v<l;++v)if(h[v]!==p[v]){o=h[v],u=p[v];break}return o<u?-1:u<o?1:0};function XO(t,e,r,n,a){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,dM(r)&&(r=a?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(a)return-1;r=t.length-1}else if(r<0)if(a)r=0;else return-1;if(typeof e=="string"&&(e=Xe.from(e,n)),Xe.isBuffer(e))return e.length===0?-1:GO(t,e,r,n,a);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?a?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):GO(t,[e],r,n,a);throw new TypeError("val must be string, number or Buffer")}function GO(t,e,r,n,a){let s=1,o=t.length,u=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,o/=2,u/=2,r/=2}function l(p,v){return s===1?p[v]:p.readUInt16BE(v*s)}let h;if(a){let p=-1;for(h=r;h<o;h++)if(l(t,h)===l(e,p===-1?0:h-p)){if(p===-1&&(p=h),h-p+1===u)return p*s}else p!==-1&&(h-=h-p),p=-1}else for(r+u>o&&(r=o-u),h=r;h>=0;h--){let p=!0;for(let v=0;v<u;v++)if(l(t,h+v)!==l(e,v)){p=!1;break}if(p)return h}return-1}Xe.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};Xe.prototype.indexOf=function(e,r,n){return XO(this,e,r,n,!0)};Xe.prototype.lastIndexOf=function(e,r,n){return XO(this,e,r,n,!1)};function Dse(t,e,r,n){r=Number(r)||0;let a=t.length-r;n?(n=Number(n),n>a&&(n=a)):n=a;let s=e.length;n>s/2&&(n=s/2);let o;for(o=0;o<n;++o){let u=parseInt(e.substr(o*2,2),16);if(dM(u))return o;t[r+o]=u}return o}function Ose(t,e,r,n){return hb(fM(e,t.length-r),t,r,n)}function Rse(t,e,r,n){return hb(Wse(e),t,r,n)}function Cse(t,e,r,n){return hb(s5(e),t,r,n)}function Fse(t,e,r,n){return hb(Gse(e,t.length-r),t,r,n)}Xe.prototype.write=function(e,r,n,a){if(r===void 0)a="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")a=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,a===void 0&&(a="utf8")):(a=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-r;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");let o=!1;for(;;)switch(a){case"hex":return Dse(this,e,r,n);case"utf8":case"utf-8":return Ose(this,e,r,n);case"ascii":case"latin1":case"binary":return Rse(this,e,r,n);case"base64":return Cse(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fse(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),o=!0}};Xe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Bse(t,e,r){return e===0&&r===t.length?sM.fromByteArray(t):sM.fromByteArray(t.slice(e,r))}function QO(t,e,r){r=Math.min(t.length,r);let n=[],a=e;for(;a<r;){let s=t[a],o=null,u=s>239?4:s>223?3:s>191?2:1;if(a+u<=r){let l,h,p,v;switch(u){case 1:s<128&&(o=s);break;case 2:l=t[a+1],(l&192)===128&&(v=(s&31)<<6|l&63,v>127&&(o=v));break;case 3:l=t[a+1],h=t[a+2],(l&192)===128&&(h&192)===128&&(v=(s&15)<<12|(l&63)<<6|h&63,v>2047&&(v<55296||v>57343)&&(o=v));break;case 4:l=t[a+1],h=t[a+2],p=t[a+3],(l&192)===128&&(h&192)===128&&(p&192)===128&&(v=(s&15)<<18|(l&63)<<12|(h&63)<<6|p&63,v>65535&&v<1114112&&(o=v))}}o===null?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),a+=u}return Lse(n)}var HO=4096;function Lse(t){let e=t.length;if(e<=HO)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=HO));return r}function Pse(t,e,r){let n="";r=Math.min(t.length,r);for(let a=e;a<r;++a)n+=String.fromCharCode(t[a]&127);return n}function qse(t,e,r){let n="";r=Math.min(t.length,r);for(let a=e;a<r;++a)n+=String.fromCharCode(t[a]);return n}function $se(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let a="";for(let s=e;s<r;++s)a+=Hse[t[s]];return a}function zse(t,e,r){let n=t.slice(e,r),a="";for(let s=0;s<n.length-1;s+=2)a+=String.fromCharCode(n[s]+n[s+1]*256);return a}Xe.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let a=this.subarray(e,r);return Object.setPrototypeOf(a,Xe.prototype),a};function Ni(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}Xe.prototype.readUintLE=Xe.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Ni(e,r,this.length);let a=this[e],s=1,o=0;for(;++o<r&&(s*=256);)a+=this[e+o]*s;return a};Xe.prototype.readUintBE=Xe.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Ni(e,r,this.length);let a=this[e+--r],s=1;for(;r>0&&(s*=256);)a+=this[e+--r]*s;return a};Xe.prototype.readUint8=Xe.prototype.readUInt8=function(e,r){return e=e>>>0,r||Ni(e,1,this.length),this[e]};Xe.prototype.readUint16LE=Xe.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||Ni(e,2,this.length),this[e]|this[e+1]<<8};Xe.prototype.readUint16BE=Xe.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||Ni(e,2,this.length),this[e]<<8|this[e+1]};Xe.prototype.readUint32LE=Xe.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||Ni(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Xe.prototype.readUint32BE=Xe.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||Ni(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Xe.prototype.readBigUInt64LE=Yf(function(e){e=e>>>0,Sd(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&vv(e,this.length-8);let a=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(a)+(BigInt(s)<<BigInt(32))});Xe.prototype.readBigUInt64BE=Yf(function(e){e=e>>>0,Sd(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&vv(e,this.length-8);let a=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(a)<<BigInt(32))+BigInt(s)});Xe.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Ni(e,r,this.length);let a=this[e],s=1,o=0;for(;++o<r&&(s*=256);)a+=this[e+o]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*r)),a};Xe.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Ni(e,r,this.length);let a=r,s=1,o=this[e+--a];for(;a>0&&(s*=256);)o+=this[e+--a]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*r)),o};Xe.prototype.readInt8=function(e,r){return e=e>>>0,r||Ni(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};Xe.prototype.readInt16LE=function(e,r){e=e>>>0,r||Ni(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};Xe.prototype.readInt16BE=function(e,r){e=e>>>0,r||Ni(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};Xe.prototype.readInt32LE=function(e,r){return e=e>>>0,r||Ni(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Xe.prototype.readInt32BE=function(e,r){return e=e>>>0,r||Ni(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Xe.prototype.readBigInt64LE=Yf(function(e){e=e>>>0,Sd(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&vv(e,this.length-8);let a=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(a)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});Xe.prototype.readBigInt64BE=Yf(function(e){e=e>>>0,Sd(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&vv(e,this.length-8);let a=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(a)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});Xe.prototype.readFloatLE=function(e,r){return e=e>>>0,r||Ni(e,4,this.length),xd.read(this,e,!0,23,4)};Xe.prototype.readFloatBE=function(e,r){return e=e>>>0,r||Ni(e,4,this.length),xd.read(this,e,!1,23,4)};Xe.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||Ni(e,8,this.length),xd.read(this,e,!0,52,8)};Xe.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||Ni(e,8,this.length),xd.read(this,e,!1,52,8)};function Ca(t,e,r,n,a,s){if(!Xe.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>a||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}Xe.prototype.writeUintLE=Xe.prototype.writeUIntLE=function(e,r,n,a){if(e=+e,r=r>>>0,n=n>>>0,!a){let u=Math.pow(2,8*n)-1;Ca(this,e,r,n,u,0)}let s=1,o=0;for(this[r]=e&255;++o<n&&(s*=256);)this[r+o]=e/s&255;return r+n};Xe.prototype.writeUintBE=Xe.prototype.writeUIntBE=function(e,r,n,a){if(e=+e,r=r>>>0,n=n>>>0,!a){let u=Math.pow(2,8*n)-1;Ca(this,e,r,n,u,0)}let s=n-1,o=1;for(this[r+s]=e&255;--s>=0&&(o*=256);)this[r+s]=e/o&255;return r+n};Xe.prototype.writeUint8=Xe.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||Ca(this,e,r,1,255,0),this[r]=e&255,r+1};Xe.prototype.writeUint16LE=Xe.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Ca(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};Xe.prototype.writeUint16BE=Xe.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Ca(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};Xe.prototype.writeUint32LE=Xe.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Ca(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};Xe.prototype.writeUint32BE=Xe.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Ca(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function e5(t,e,r,n,a){a5(e,n,a,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,r}function t5(t,e,r,n,a){a5(e,n,a,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s=s>>8,t[r+6]=s,s=s>>8,t[r+5]=s,s=s>>8,t[r+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o=o>>8,t[r+2]=o,o=o>>8,t[r+1]=o,o=o>>8,t[r]=o,r+8}Xe.prototype.writeBigUInt64LE=Yf(function(e,r=0){return e5(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});Xe.prototype.writeBigUInt64BE=Yf(function(e,r=0){return t5(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});Xe.prototype.writeIntLE=function(e,r,n,a){if(e=+e,r=r>>>0,!a){let l=Math.pow(2,8*n-1);Ca(this,e,r,n,l-1,-l)}let s=0,o=1,u=0;for(this[r]=e&255;++s<n&&(o*=256);)e<0&&u===0&&this[r+s-1]!==0&&(u=1),this[r+s]=(e/o>>0)-u&255;return r+n};Xe.prototype.writeIntBE=function(e,r,n,a){if(e=+e,r=r>>>0,!a){let l=Math.pow(2,8*n-1);Ca(this,e,r,n,l-1,-l)}let s=n-1,o=1,u=0;for(this[r+s]=e&255;--s>=0&&(o*=256);)e<0&&u===0&&this[r+s+1]!==0&&(u=1),this[r+s]=(e/o>>0)-u&255;return r+n};Xe.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||Ca(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};Xe.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Ca(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};Xe.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Ca(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};Xe.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Ca(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};Xe.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Ca(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};Xe.prototype.writeBigInt64LE=Yf(function(e,r=0){return e5(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});Xe.prototype.writeBigInt64BE=Yf(function(e,r=0){return t5(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function r5(t,e,r,n,a,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function n5(t,e,r,n,a){return e=+e,r=r>>>0,a||r5(t,e,r,4,34028234663852886e22,-34028234663852886e22),xd.write(t,e,r,n,23,4),r+4}Xe.prototype.writeFloatLE=function(e,r,n){return n5(this,e,r,!0,n)};Xe.prototype.writeFloatBE=function(e,r,n){return n5(this,e,r,!1,n)};function i5(t,e,r,n,a){return e=+e,r=r>>>0,a||r5(t,e,r,8,17976931348623157e292,-17976931348623157e292),xd.write(t,e,r,n,52,8),r+8}Xe.prototype.writeDoubleLE=function(e,r,n){return i5(this,e,r,!0,n)};Xe.prototype.writeDoubleBE=function(e,r,n){return i5(this,e,r,!1,n)};Xe.prototype.copy=function(e,r,n,a){if(!Xe.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!a&&a!==0&&(a=this.length),r>=e.length&&(r=e.length),r||(r=0),a>0&&a<n&&(a=n),a===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-r<a-n&&(a=e.length-r+n);let s=a-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,a):Uint8Array.prototype.set.call(e,this.subarray(n,a),r),s};Xe.prototype.fill=function(e,r,n,a){if(typeof e=="string"){if(typeof r=="string"?(a=r,r=0,n=this.length):typeof n=="string"&&(a=n,n=this.length),a!==void 0&&typeof a!="string")throw new TypeError("encoding must be a string");if(typeof a=="string"&&!Xe.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(e.length===1){let o=e.charCodeAt(0);(a==="utf8"&&o<128||a==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let s;if(typeof e=="number")for(s=r;s<n;++s)this[s]=e;else{let o=Xe.isBuffer(e)?e:Xe.from(e,a),u=o.length;if(u===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-r;++s)this[s+r]=o[s%u]}return this};var _d={};function hM(t,e,r){_d[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(a){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:a,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}hM("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);hM("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);hM("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,a=r;return Number.isInteger(r)&&Math.abs(r)>2**32?a=KO(String(r)):typeof r=="bigint"&&(a=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(a=KO(a)),a+="n"),n+=` It must be ${e}. Received ${a}`,n},RangeError);function KO(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function jse(t,e,r){Sd(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&vv(e,t.length-(r+1))}function a5(t,e,r,n,a,s){if(t>r||t<e){let o=typeof e=="bigint"?"n":"",u;throw s>3?e===0||e===BigInt(0)?u=`>= 0${o} and < 2${o} ** ${(s+1)*8}${o}`:u=`>= -(2${o} ** ${(s+1)*8-1}${o}) and < 2 ** ${(s+1)*8-1}${o}`:u=`>= ${e}${o} and <= ${r}${o}`,new _d.ERR_OUT_OF_RANGE("value",u,t)}jse(n,a,s)}function Sd(t,e){if(typeof t!="number")throw new _d.ERR_INVALID_ARG_TYPE(e,"number",t)}function vv(t,e,r){throw Math.floor(t)!==t?(Sd(t,r),new _d.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new _d.ERR_BUFFER_OUT_OF_BOUNDS:new _d.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var Use=/[^+/0-9A-Za-z-_]/g;function Vse(t){if(t=t.split("=")[0],t=t.trim().replace(Use,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function fM(t,e){e=e||1/0;let r,n=t.length,a=null,s=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!a){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}a=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),a=r;continue}r=(a-55296<<10|r-56320)+65536}else a&&(e-=3)>-1&&s.push(239,191,189);if(a=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function Wse(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function Gse(t,e){let r,n,a,s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,a=r%256,s.push(a),s.push(n);return s}function s5(t){return sM.toByteArray(Vse(t))}function hb(t,e,r,n){let a;for(a=0;a<n&&!(a+r>=e.length||a>=t.length);++a)e[a+r]=t[a];return a}function ou(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function dM(t){return t!==t}var Hse=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let a=0;a<16;++a)e[n+a]=t[r]+t[a]}return e}();function Yf(t){return typeof BigInt=="undefined"?Kse:t}function Kse(){throw new Error("BigInt not supported")}});var pM=ne((bYe,o5)=>{"use strict";o5.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var a=42;e[r]=a;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==a||o.enumerable!==!0)return!1}return!0}});var gv=ne((wYe,u5)=>{"use strict";var Zse=pM();u5.exports=function(){return Zse()&&!!Symbol.toStringTag}});var c5=ne((_Ye,l5)=>{"use strict";var f5=typeof Symbol!="undefined"&&Symbol,Jse=pM();l5.exports=function(){return typeof f5!="function"||typeof Symbol!="function"||typeof f5("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Jse()}});var d5=ne((xYe,h5)=>{"use strict";var Yse="Function.prototype.bind called on incompatible ",mM=Array.prototype.slice,Xse=Object.prototype.toString,Qse="[object Function]";h5.exports=function(e){var r=this;if(typeof r!="function"||Xse.call(r)!==Qse)throw new TypeError(Yse+r);for(var n=mM.call(arguments,1),a,s=function(){if(this instanceof a){var p=r.apply(this,n.concat(mM.call(arguments)));return Object(p)===p?p:this}else return r.apply(e,n.concat(mM.call(arguments)))},o=Math.max(0,r.length-n.length),u=[],l=0;l<o;l++)u.push("$"+l);if(a=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var h=function(){};h.prototype=r.prototype,a.prototype=new h,h.prototype=null}return a}});var db=ne((SYe,p5)=>{"use strict";var eoe=d5();p5.exports=Function.prototype.bind||eoe});var v5=ne((EYe,m5)=>{"use strict";var toe=db();m5.exports=toe.call(Function.call,Object.prototype.hasOwnProperty)});var vb=ne((MYe,w5)=>{"use strict";var dr,Nd=SyntaxError,b5=Function,kd=TypeError,vM=function(t){try{return b5('"use strict"; return ('+t+").constructor;")()}catch{}},fc=Object.getOwnPropertyDescriptor;if(fc)try{fc({},"")}catch{fc=null}var gM=function(){throw new kd},roe=fc?function(){try{return arguments.callee,gM}catch{try{return fc(arguments,"callee").get}catch{return gM}}}():gM,Md=c5()(),Xf=Object.getPrototypeOf||function(t){return t.__proto__},Ad={},noe=typeof Uint8Array=="undefined"?dr:Xf(Uint8Array),Td={"%AggregateError%":typeof AggregateError=="undefined"?dr:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?dr:ArrayBuffer,"%ArrayIteratorPrototype%":Md?Xf([][Symbol.iterator]()):dr,"%AsyncFromSyncIteratorPrototype%":dr,"%AsyncFunction%":Ad,"%AsyncGenerator%":Ad,"%AsyncGeneratorFunction%":Ad,"%AsyncIteratorPrototype%":Ad,"%Atomics%":typeof Atomics=="undefined"?dr:Atomics,"%BigInt%":typeof BigInt=="undefined"?dr:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?dr:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?dr:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?dr:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?dr:FinalizationRegistry,"%Function%":b5,"%GeneratorFunction%":Ad,"%Int8Array%":typeof Int8Array=="undefined"?dr:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?dr:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?dr:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Md?Xf(Xf([][Symbol.iterator]())):dr,"%JSON%":typeof JSON=="object"?JSON:dr,"%Map%":typeof Map=="undefined"?dr:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!Md?dr:Xf(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?dr:Promise,"%Proxy%":typeof Proxy=="undefined"?dr:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?dr:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?dr:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!Md?dr:Xf(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?dr:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Md?Xf(""[Symbol.iterator]()):dr,"%Symbol%":Md?Symbol:dr,"%SyntaxError%":Nd,"%ThrowTypeError%":roe,"%TypedArray%":noe,"%TypeError%":kd,"%Uint8Array%":typeof Uint8Array=="undefined"?dr:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?dr:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?dr:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?dr:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?dr:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?dr:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?dr:WeakSet},ioe=function t(e){var r;if(e==="%AsyncFunction%")r=vM("async function () {}");else if(e==="%GeneratorFunction%")r=vM("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=vM("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var a=t("%AsyncGenerator%");a&&(r=Xf(a.prototype))}return Td[e]=r,r},g5={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},yv=db(),pb=v5(),aoe=yv.call(Function.call,Array.prototype.concat),soe=yv.call(Function.apply,Array.prototype.splice),y5=yv.call(Function.call,String.prototype.replace),mb=yv.call(Function.call,String.prototype.slice),ooe=yv.call(Function.call,RegExp.prototype.exec),uoe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,foe=/\\(\\)?/g,loe=function(e){var r=mb(e,0,1),n=mb(e,-1);if(r==="%"&&n!=="%")throw new Nd("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Nd("invalid intrinsic syntax, expected opening `%`");var a=[];return y5(e,uoe,function(s,o,u,l){a[a.length]=u?y5(l,foe,"$1"):o||s}),a},coe=function(e,r){var n=e,a;if(pb(g5,n)&&(a=g5[n],n="%"+a[0]+"%"),pb(Td,n)){var s=Td[n];if(s===Ad&&(s=ioe(n)),typeof s=="undefined"&&!r)throw new kd("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:a,name:n,value:s}}throw new Nd("intrinsic "+e+" does not exist!")};w5.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new kd("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new kd('"allowMissing" argument must be a boolean');if(ooe(/^%?[^%]*%?$/g,e)===null)throw new Nd("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=loe(e),a=n.length>0?n[0]:"",s=coe("%"+a+"%",r),o=s.name,u=s.value,l=!1,h=s.alias;h&&(a=h[0],soe(n,aoe([0,1],h)));for(var p=1,v=!0;p<n.length;p+=1){var y=n[p],S=mb(y,0,1),A=mb(y,-1);if((S==='"'||S==="'"||S==="`"||A==='"'||A==="'"||A==="`")&&S!==A)throw new Nd("property names with quotes must have matching quotes");if((y==="constructor"||!v)&&(l=!0),a+="."+y,o="%"+a+"%",pb(Td,o))u=Td[o];else if(u!=null){if(!(y in u)){if(!r)throw new kd("base intrinsic for "+e+" exists, but the property is not available.");return}if(fc&&p+1>=n.length){var T=fc(u,y);v=!!T,v&&"get"in T&&!("originalValue"in T.get)?u=T.get:u=u[y]}else v=pb(u,y),u=u[y];v&&!l&&(Td[o]=u)}}return u}});var A5=ne((AYe,gb)=>{"use strict";var yM=db(),Id=vb(),S5=Id("%Function.prototype.apply%"),E5=Id("%Function.prototype.call%"),M5=Id("%Reflect.apply%",!0)||yM.call(E5,S5),_5=Id("%Object.getOwnPropertyDescriptor%",!0),lc=Id("%Object.defineProperty%",!0),hoe=Id("%Math.max%");if(lc)try{lc({},"a",{value:1})}catch{lc=null}gb.exports=function(e){var r=M5(yM,E5,arguments);if(_5&&lc){var n=_5(r,"length");n.configurable&&lc(r,"length",{value:1+hoe(0,e.length-(arguments.length-1))})}return r};var x5=function(){return M5(yM,S5,arguments)};lc?lc(gb.exports,"apply",{value:x5}):gb.exports.apply=x5});var yb=ne((kYe,N5)=>{"use strict";var k5=vb(),T5=A5(),doe=T5(k5("String.prototype.indexOf"));N5.exports=function(e,r){var n=k5(e,!!r);return typeof n=="function"&&doe(e,".prototype.")>-1?T5(n):n}});var O5=ne((TYe,D5)=>{"use strict";var poe=gv()(),moe=yb(),bM=moe("Object.prototype.toString"),bb=function(e){return poe&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:bM(e)==="[object Arguments]"},I5=function(e){return bb(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&bM(e)!=="[object Array]"&&bM(e.callee)==="[object Function]"},voe=function(){return bb(arguments)}();bb.isLegacyArguments=I5;D5.exports=voe?bb:I5});var F5=ne((NYe,C5)=>{"use strict";var goe=Object.prototype.toString,yoe=Function.prototype.toString,boe=/^\s*(?:function)?\*/,R5=gv()(),wM=Object.getPrototypeOf,woe=function(){if(!R5)return!1;try{return Function("return function*() {}")()}catch{}},_M;C5.exports=function(e){if(typeof e!="function")return!1;if(boe.test(yoe.call(e)))return!0;if(!R5){var r=goe.call(e);return r==="[object GeneratorFunction]"}if(!wM)return!1;if(typeof _M=="undefined"){var n=woe();_M=n?wM(n):!1}return wM(e)===_M}});var q5=ne((IYe,P5)=>{"use strict";var L5=Function.prototype.toString,Dd=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,xM,wb;if(typeof Dd=="function"&&typeof Object.defineProperty=="function")try{xM=Object.defineProperty({},"length",{get:function(){throw wb}}),wb={},Dd(function(){throw 42},null,xM)}catch(t){t!==wb&&(Dd=null)}else Dd=null;var _oe=/^\s*class\b/,SM=function(e){try{var r=L5.call(e);return _oe.test(r)}catch{return!1}},xoe=function(e){try{return SM(e)?!1:(L5.call(e),!0)}catch{return!1}},Soe=Object.prototype.toString,Eoe="[object Function]",Moe="[object GeneratorFunction]",Aoe=typeof Symbol=="function"&&!!Symbol.toStringTag,B5=typeof document=="object"&&typeof document.all=="undefined"&&document.all!==void 0?document.all:{};P5.exports=Dd?function(e){if(e===B5)return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(typeof e=="function"&&!e.prototype)return!0;try{Dd(e,null,xM)}catch(r){if(r!==wb)return!1}return!SM(e)}:function(e){if(e===B5)return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(typeof e=="function"&&!e.prototype)return!0;if(Aoe)return xoe(e);if(SM(e))return!1;var r=Soe.call(e);return r===Eoe||r===Moe}});var EM=ne((DYe,z5)=>{"use strict";var koe=q5(),Toe=Object.prototype.toString,$5=Object.prototype.hasOwnProperty,Noe=function(e,r,n){for(var a=0,s=e.length;a<s;a++)$5.call(e,a)&&(n==null?r(e[a],a,e):r.call(n,e[a],a,e))},Ioe=function(e,r,n){for(var a=0,s=e.length;a<s;a++)n==null?r(e.charAt(a),a,e):r.call(n,e.charAt(a),a,e)},Doe=function(e,r,n){for(var a in e)$5.call(e,a)&&(n==null?r(e[a],a,e):r.call(n,e[a],a,e))},Ooe=function(e,r,n){if(!koe(r))throw new TypeError("iterator must be a function");var a;arguments.length>=3&&(a=n),Toe.call(e)==="[object Array]"?Noe(e,r,a):typeof e=="string"?Ioe(e,r,a):Doe(e,r,a)};z5.exports=Ooe});var AM=ne((OYe,j5)=>{"use strict";var MM=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],Roe=typeof globalThis=="undefined"?global:globalThis;j5.exports=function(){for(var e=[],r=0;r<MM.length;r++)typeof Roe[MM[r]]=="function"&&(e[e.length]=MM[r]);return e}});var kM=ne((RYe,U5)=>{"use strict";var Coe=vb(),_b=Coe("%Object.getOwnPropertyDescriptor%",!0);if(_b)try{_b([],"length")}catch{_b=null}U5.exports=_b});var IM=ne((CYe,K5)=>{"use strict";var V5=EM(),Foe=AM(),NM=yb(),Boe=NM("Object.prototype.toString"),W5=gv()(),Loe=typeof globalThis=="undefined"?global:globalThis,G5=Foe(),Poe=NM("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},qoe=NM("String.prototype.slice"),H5={},xb=kM(),TM=Object.getPrototypeOf;W5&&xb&&TM&&V5(G5,function(t){var e=new Loe[t];if(Symbol.toStringTag in e){var r=TM(e),n=xb(r,Symbol.toStringTag);if(!n){var a=TM(r);n=xb(a,Symbol.toStringTag)}H5[t]=n.get}});var $oe=function(e){var r=!1;return V5(H5,function(n,a){if(!r)try{r=n.call(e)===a}catch{}}),r};K5.exports=function(e){if(!e||typeof e!="object")return!1;if(!W5||!(Symbol.toStringTag in e)){var r=qoe(Boe(e),8,-1);return Poe(G5,r)>-1}return xb?$oe(e):!1}});var tR=ne((FYe,eR)=>{"use strict";var J5=EM(),zoe=AM(),Y5=yb(),joe=Y5("Object.prototype.toString"),X5=gv()(),Z5=typeof globalThis=="undefined"?global:globalThis,Uoe=zoe(),Voe=Y5("String.prototype.slice"),Q5={},DM=kM(),OM=Object.getPrototypeOf;X5&&DM&&OM&&J5(Uoe,function(t){if(typeof Z5[t]=="function"){var e=new Z5[t];if(Symbol.toStringTag in e){var r=OM(e),n=DM(r,Symbol.toStringTag);if(!n){var a=OM(r);n=DM(a,Symbol.toStringTag)}Q5[t]=n.get}}});var Woe=function(e){var r=!1;return J5(Q5,function(n,a){if(!r)try{var s=n.call(e);s===a&&(r=s)}catch{}}),r},Goe=IM();eR.exports=function(e){return Goe(e)?!X5||!(Symbol.toStringTag in e)?Voe(joe(e),8,-1):Woe(e):!1}});var mR=ne(ir=>{"use strict";var Hoe=O5(),Koe=F5(),Eo=tR(),rR=IM();function Od(t){return t.call.bind(t)}var nR=typeof BigInt!="undefined",iR=typeof Symbol!="undefined",ys=Od(Object.prototype.toString),Zoe=Od(Number.prototype.valueOf),Joe=Od(String.prototype.valueOf),Yoe=Od(Boolean.prototype.valueOf);nR&&(aR=Od(BigInt.prototype.valueOf));var aR;iR&&(sR=Od(Symbol.prototype.valueOf));var sR;function wv(t,e){if(typeof t!="object")return!1;try{return e(t),!0}catch{return!1}}ir.isArgumentsObject=Hoe;ir.isGeneratorFunction=Koe;ir.isTypedArray=rR;function Xoe(t){return typeof Promise!="undefined"&&t instanceof Promise||t!==null&&typeof t=="object"&&typeof t.then=="function"&&typeof t.catch=="function"}ir.isPromise=Xoe;function Qoe(t){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ArrayBuffer.isView(t):rR(t)||uR(t)}ir.isArrayBufferView=Qoe;function eue(t){return Eo(t)==="Uint8Array"}ir.isUint8Array=eue;function tue(t){return Eo(t)==="Uint8ClampedArray"}ir.isUint8ClampedArray=tue;function rue(t){return Eo(t)==="Uint16Array"}ir.isUint16Array=rue;function nue(t){return Eo(t)==="Uint32Array"}ir.isUint32Array=nue;function iue(t){return Eo(t)==="Int8Array"}ir.isInt8Array=iue;function aue(t){return Eo(t)==="Int16Array"}ir.isInt16Array=aue;function sue(t){return Eo(t)==="Int32Array"}ir.isInt32Array=sue;function oue(t){return Eo(t)==="Float32Array"}ir.isFloat32Array=oue;function uue(t){return Eo(t)==="Float64Array"}ir.isFloat64Array=uue;function fue(t){return Eo(t)==="BigInt64Array"}ir.isBigInt64Array=fue;function lue(t){return Eo(t)==="BigUint64Array"}ir.isBigUint64Array=lue;function Sb(t){return ys(t)==="[object Map]"}Sb.working=typeof Map!="undefined"&&Sb(new Map);function cue(t){return typeof Map=="undefined"?!1:Sb.working?Sb(t):t instanceof Map}ir.isMap=cue;function Eb(t){return ys(t)==="[object Set]"}Eb.working=typeof Set!="undefined"&&Eb(new Set);function hue(t){return typeof Set=="undefined"?!1:Eb.working?Eb(t):t instanceof Set}ir.isSet=hue;function Mb(t){return ys(t)==="[object WeakMap]"}Mb.working=typeof WeakMap!="undefined"&&Mb(new WeakMap);function due(t){return typeof WeakMap=="undefined"?!1:Mb.working?Mb(t):t instanceof WeakMap}ir.isWeakMap=due;function CM(t){return ys(t)==="[object WeakSet]"}CM.working=typeof WeakSet!="undefined"&&CM(new WeakSet);function pue(t){return CM(t)}ir.isWeakSet=pue;function Ab(t){return ys(t)==="[object ArrayBuffer]"}Ab.working=typeof ArrayBuffer!="undefined"&&Ab(new ArrayBuffer);function oR(t){return typeof ArrayBuffer=="undefined"?!1:Ab.working?Ab(t):t instanceof ArrayBuffer}ir.isArrayBuffer=oR;function kb(t){return ys(t)==="[object DataView]"}kb.working=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"&&kb(new DataView(new ArrayBuffer(1),0,1));function uR(t){return typeof DataView=="undefined"?!1:kb.working?kb(t):t instanceof DataView}ir.isDataView=uR;var RM=typeof SharedArrayBuffer!="undefined"?SharedArrayBuffer:void 0;function bv(t){return ys(t)==="[object SharedArrayBuffer]"}function fR(t){return typeof RM=="undefined"?!1:(typeof bv.working=="undefined"&&(bv.working=bv(new RM)),bv.working?bv(t):t instanceof RM)}ir.isSharedArrayBuffer=fR;function mue(t){return ys(t)==="[object AsyncFunction]"}ir.isAsyncFunction=mue;function vue(t){return ys(t)==="[object Map Iterator]"}ir.isMapIterator=vue;function gue(t){return ys(t)==="[object Set Iterator]"}ir.isSetIterator=gue;function yue(t){return ys(t)==="[object Generator]"}ir.isGeneratorObject=yue;function bue(t){return ys(t)==="[object WebAssembly.Module]"}ir.isWebAssemblyCompiledModule=bue;function lR(t){return wv(t,Zoe)}ir.isNumberObject=lR;function cR(t){return wv(t,Joe)}ir.isStringObject=cR;function hR(t){return wv(t,Yoe)}ir.isBooleanObject=hR;function dR(t){return nR&&wv(t,aR)}ir.isBigIntObject=dR;function pR(t){return iR&&wv(t,sR)}ir.isSymbolObject=pR;function wue(t){return lR(t)||cR(t)||hR(t)||dR(t)||pR(t)}ir.isBoxedPrimitive=wue;function _ue(t){return typeof Uint8Array!="undefined"&&(oR(t)||fR(t))}ir.isAnyArrayBuffer=_ue;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(t){Object.defineProperty(ir,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})})});var gR=ne((LYe,vR)=>{vR.exports=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}});var uu=ne(ar=>{var yR=Object.getOwnPropertyDescriptors||function(e){for(var r=Object.keys(e),n={},a=0;a<r.length;a++)n[r[a]]=Object.getOwnPropertyDescriptor(e,r[a]);return n},xue=/%[sdj%]/g;ar.format=function(t){if(!Cb(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(Qf(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,a=n.length,s=String(t).replace(xue,function(u){if(u==="%%")return"%";if(r>=a)return u;switch(u){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch{return"[Circular]"}default:return u}}),o=n[r];r<a;o=n[++r])Rb(o)||!Rd(o)?s+=" "+o:s+=" "+Qf(o);return s};ar.deprecate=function(t,e){if(typeof process!="undefined"&&process.noDeprecation===!0)return t;if(typeof process=="undefined")return function(){return ar.deprecate(t,e).apply(this,arguments)};var r=!1;function n(){if(!r){if(process.throwDeprecation)throw new Error(e);process.traceDeprecation?console.trace(e):console.error(e),r=!0}return t.apply(this,arguments)}return n};var Tb={},bR=/^$/;process.env.NODE_DEBUG&&(Nb=process.env.NODE_DEBUG,Nb=Nb.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),bR=new RegExp("^"+Nb+"$","i"));var Nb;ar.debuglog=function(t){if(t=t.toUpperCase(),!Tb[t])if(bR.test(t)){var e=process.pid;Tb[t]=function(){var r=ar.format.apply(ar,arguments);console.error("%s %d: %s",t,e,r)}}else Tb[t]=function(){};return Tb[t]};function Qf(t,e){var r={seen:[],stylize:Eue};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),PM(e)?r.showHidden=e:e&&ar._extend(r,e),hc(r.showHidden)&&(r.showHidden=!1),hc(r.depth)&&(r.depth=2),hc(r.colors)&&(r.colors=!1),hc(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Sue),Db(r,t,r.depth)}ar.inspect=Qf;Qf.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Qf.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Sue(t,e){var r=Qf.styles[e];return r?"\x1B["+Qf.colors[r][0]+"m"+t+"\x1B["+Qf.colors[r][1]+"m":t}function Eue(t,e){return t}function Mue(t){var e={};return t.forEach(function(r,n){e[r]=!0}),e}function Db(t,e,r){if(t.customInspect&&e&&Ib(e.inspect)&&e.inspect!==ar.inspect&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(r,t);return Cb(n)||(n=Db(t,n,r)),n}var a=Aue(t,e);if(a)return a;var s=Object.keys(e),o=Mue(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),xv(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return FM(e);if(s.length===0){if(Ib(e)){var u=e.name?": "+e.name:"";return t.stylize("[Function"+u+"]","special")}if(_v(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(Ob(e))return t.stylize(Date.prototype.toString.call(e),"date");if(xv(e))return FM(e)}var l="",h=!1,p=["{","}"];if(wR(e)&&(h=!0,p=["[","]"]),Ib(e)){var v=e.name?": "+e.name:"";l=" [Function"+v+"]"}if(_v(e)&&(l=" "+RegExp.prototype.toString.call(e)),Ob(e)&&(l=" "+Date.prototype.toUTCString.call(e)),xv(e)&&(l=" "+FM(e)),s.length===0&&(!h||e.length==0))return p[0]+l+p[1];if(r<0)return _v(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var y;return h?y=kue(t,e,r,o,s):y=s.map(function(S){return LM(t,e,r,o,S,h)}),t.seen.pop(),Tue(y,l,p)}function Aue(t,e){if(hc(e))return t.stylize("undefined","undefined");if(Cb(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(_R(e))return t.stylize(""+e,"number");if(PM(e))return t.stylize(""+e,"boolean");if(Rb(e))return t.stylize("null","null")}function FM(t){return"["+Error.prototype.toString.call(t)+"]"}function kue(t,e,r,n,a){for(var s=[],o=0,u=e.length;o<u;++o)xR(e,String(o))?s.push(LM(t,e,r,n,String(o),!0)):s.push("");return a.forEach(function(l){l.match(/^\d+$/)||s.push(LM(t,e,r,n,l,!0))}),s}function LM(t,e,r,n,a,s){var o,u,l;if(l=Object.getOwnPropertyDescriptor(e,a)||{value:e[a]},l.get?l.set?u=t.stylize("[Getter/Setter]","special"):u=t.stylize("[Getter]","special"):l.set&&(u=t.stylize("[Setter]","special")),xR(n,a)||(o="["+a+"]"),u||(t.seen.indexOf(l.value)<0?(Rb(r)?u=Db(t,l.value,null):u=Db(t,l.value,r-1),u.indexOf(`
`)>-1&&(s?u=u.split(`
`).map(function(h){return"  "+h}).join(`
`).substr(2):u=`
`+u.split(`
`).map(function(h){return"   "+h}).join(`
`))):u=t.stylize("[Circular]","special")),hc(o)){if(s&&a.match(/^\d+$/))return u;o=JSON.stringify(""+a),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+u}function Tue(t,e,r){var n=0,a=t.reduce(function(s,o){return n++,o.indexOf(`
`)>=0&&n++,s+o.replace(/\u001b\[\d\d?m/g,"").length+1},0);return a>60?r[0]+(e===""?"":e+`
 `)+" "+t.join(`,
  `)+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}ar.types=mR();function wR(t){return Array.isArray(t)}ar.isArray=wR;function PM(t){return typeof t=="boolean"}ar.isBoolean=PM;function Rb(t){return t===null}ar.isNull=Rb;function Nue(t){return t==null}ar.isNullOrUndefined=Nue;function _R(t){return typeof t=="number"}ar.isNumber=_R;function Cb(t){return typeof t=="string"}ar.isString=Cb;function Iue(t){return typeof t=="symbol"}ar.isSymbol=Iue;function hc(t){return t===void 0}ar.isUndefined=hc;function _v(t){return Rd(t)&&qM(t)==="[object RegExp]"}ar.isRegExp=_v;ar.types.isRegExp=_v;function Rd(t){return typeof t=="object"&&t!==null}ar.isObject=Rd;function Ob(t){return Rd(t)&&qM(t)==="[object Date]"}ar.isDate=Ob;ar.types.isDate=Ob;function xv(t){return Rd(t)&&(qM(t)==="[object Error]"||t instanceof Error)}ar.isError=xv;ar.types.isNativeError=xv;function Ib(t){return typeof t=="function"}ar.isFunction=Ib;function Due(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t=="undefined"}ar.isPrimitive=Due;ar.isBuffer=gR();function qM(t){return Object.prototype.toString.call(t)}function BM(t){return t<10?"0"+t.toString(10):t.toString(10)}var Oue=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Rue(){var t=new Date,e=[BM(t.getHours()),BM(t.getMinutes()),BM(t.getSeconds())].join(":");return[t.getDate(),Oue[t.getMonth()],e].join(" ")}ar.log=function(){console.log("%s - %s",Rue(),ar.format.apply(ar,arguments))};ar.inherits=Et();ar._extend=function(t,e){if(!e||!Rd(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};function xR(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var cc=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;ar.promisify=function(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');if(cc&&e[cc]){var r=e[cc];if(typeof r!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,cc,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var n,a,s=new Promise(function(l,h){n=l,a=h}),o=[],u=0;u<arguments.length;u++)o.push(arguments[u]);o.push(function(l,h){l?a(l):n(h)});try{e.apply(this,o)}catch(l){a(l)}return s}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),cc&&Object.defineProperty(r,cc,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,yR(e))};ar.promisify.custom=cc;function Cue(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}function Fue(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var a=r.pop();if(typeof a!="function")throw new TypeError("The last argument must be of type Function");var s=this,o=function(){return a.apply(s,arguments)};t.apply(this,r).then(function(u){process.nextTick(o.bind(null,null,u))},function(u){process.nextTick(Cue.bind(null,u,o))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,yR(t)),e}ar.callbackify=Fue});var AR=ne((qYe,MR)=>{"use strict";function SR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Bue(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SR(Object(r),!0).forEach(function(n){Lue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lue(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ER(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function que(t,e,r){return e&&ER(t.prototype,e),r&&ER(t,r),t}var $ue=mn(),Fb=$ue.Buffer,zue=uu(),$M=zue.inspect,jue=$M&&$M.custom||"inspect";function Uue(t,e,r){Fb.prototype.copy.call(t,e,r)}MR.exports=function(){function t(){Pue(this,t),this.head=null,this.tail=null,this.length=0}return que(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,a=""+n.data;n=n.next;)a+=r+n.data;return a}},{key:"concat",value:function(r){if(this.length===0)return Fb.alloc(0);for(var n=Fb.allocUnsafe(r>>>0),a=this.head,s=0;a;)Uue(a.data,n,s),s+=a.data.length,a=a.next;return n}},{key:"consume",value:function(r,n){var a;return r<this.head.data.length?(a=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?a=this.shift():a=n?this._getString(r):this._getBuffer(r),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,a=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,u=r>o.length?o.length:r;if(u===o.length?s+=o:s+=o.slice(0,r),r-=u,r===0){u===o.length?(++a,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(u));break}++a}return this.length-=a,s}},{key:"_getBuffer",value:function(r){var n=Fb.allocUnsafe(r),a=this.head,s=1;for(a.data.copy(n),r-=a.data.length;a=a.next;){var o=a.data,u=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,u),r-=u,r===0){u===o.length?(++s,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=o.slice(u));break}++s}return this.length-=s,n}},{key:jue,value:function(r,n){return $M(this,Bue({},n,{depth:0,customInspect:!1}))}}]),t}()});var jM=ne(($Ye,TR)=>{"use strict";function Vue(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return n||a?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(zM,this,t)):process.nextTick(zM,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(Bb,r):(r._writableState.errorEmitted=!0,process.nextTick(kR,r,s)):process.nextTick(kR,r,s):e?(process.nextTick(Bb,r),e(s)):process.nextTick(Bb,r)}),this)}function kR(t,e){zM(t,e),Bb(t)}function Bb(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function Wue(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function zM(t,e){t.emit("error",e)}function Gue(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}TR.exports={destroy:Vue,undestroy:Wue,errorOrDestroy:Gue}});var dc=ne((zYe,DR)=>{"use strict";function Hue(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var IR={};function bs(t,e,r){r||(r=Error);function n(s,o,u){return typeof e=="string"?e:e(s,o,u)}var a=function(s){Hue(o,s);function o(u,l,h){return s.call(this,n(u,l,h))||this}return o}(r);a.prototype.name=r.name,a.prototype.code=t,IR[t]=a}function NR(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function Kue(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function Zue(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function Jue(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}bs("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);bs("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&Kue(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var a;if(Zue(t," argument"))a="The ".concat(t," ").concat(n," ").concat(NR(e,"type"));else{var s=Jue(t,".")?"property":"argument";a='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat(NR(e,"type"))}return a+=". Received type ".concat(typeof r),a},TypeError);bs("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");bs("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});bs("ERR_STREAM_PREMATURE_CLOSE","Premature close");bs("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});bs("ERR_MULTIPLE_CALLBACK","Callback called multiple times");bs("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");bs("ERR_STREAM_WRITE_AFTER_END","write after end");bs("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);bs("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);bs("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");DR.exports.codes=IR});var UM=ne((jYe,OR)=>{"use strict";var Yue=dc().codes.ERR_INVALID_OPT_VALUE;function Xue(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Que(t,e,r,n){var a=Xue(e,n,r);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var s=n?r:"highWaterMark";throw new Yue(s,a)}return Math.floor(a)}return t.objectMode?16:16*1024}OR.exports={getHighWaterMark:Que}});var Sv=ne((UYe,RR)=>{RR.exports=efe;function efe(t,e){if(VM("noDeprecation"))return t;var r=!1;function n(){if(!r){if(VM("throwDeprecation"))throw new Error(e);VM("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function VM(t){try{if(!global.localStorage)return!1}catch{return!1}var e=global.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}});var HM=ne((VYe,qR)=>{"use strict";qR.exports=ti;function FR(t){var e=this;this.next=null,this.entry=null,this.finish=function(){kfe(e,t)}}var Cd;ti.WritableState=Mv;var tfe={deprecate:Sv()},BR=nM(),Pb=mn().Buffer,rfe=global.Uint8Array||function(){};function nfe(t){return Pb.from(t)}function ife(t){return Pb.isBuffer(t)||t instanceof rfe}var GM=jM(),afe=UM(),sfe=afe.getHighWaterMark,el=dc().codes,ofe=el.ERR_INVALID_ARG_TYPE,ufe=el.ERR_METHOD_NOT_IMPLEMENTED,ffe=el.ERR_MULTIPLE_CALLBACK,lfe=el.ERR_STREAM_CANNOT_PIPE,cfe=el.ERR_STREAM_DESTROYED,hfe=el.ERR_STREAM_NULL_VALUES,dfe=el.ERR_STREAM_WRITE_AFTER_END,pfe=el.ERR_UNKNOWN_ENCODING,Fd=GM.errorOrDestroy;Et()(ti,BR);function mfe(){}function Mv(t,e,r){Cd=Cd||pc(),t=t||{},typeof r!="boolean"&&(r=e instanceof Cd),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=sfe(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){xfe(e,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new FR(this)}Mv.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(Mv.prototype,"buffer",{get:tfe.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Lb;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Lb=Function.prototype[Symbol.hasInstance],Object.defineProperty(ti,Symbol.hasInstance,{value:function(e){return Lb.call(this,e)?!0:this!==ti?!1:e&&e._writableState instanceof Mv}})):Lb=function(e){return e instanceof this};function ti(t){Cd=Cd||pc();var e=this instanceof Cd;if(!e&&!Lb.call(ti,this))return new ti(t);this._writableState=new Mv(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),BR.call(this)}ti.prototype.pipe=function(){Fd(this,new lfe)};function vfe(t,e){var r=new dfe;Fd(t,r),process.nextTick(e,r)}function gfe(t,e,r,n){var a;return r===null?a=new hfe:typeof r!="string"&&!e.objectMode&&(a=new ofe("chunk",["string","Buffer"],r)),a?(Fd(t,a),process.nextTick(n,a),!1):!0}ti.prototype.write=function(t,e,r){var n=this._writableState,a=!1,s=!n.objectMode&&ife(t);return s&&!Pb.isBuffer(t)&&(t=nfe(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=mfe),n.ending?vfe(this,r):(s||gfe(this,n,t,r))&&(n.pendingcb++,a=bfe(this,n,s,t,e,r)),a};ti.prototype.cork=function(){this._writableState.corked++};ti.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&LR(this,t))};ti.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new pfe(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(ti.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function yfe(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Pb.from(e,r)),e}Object.defineProperty(ti.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function bfe(t,e,r,n,a,s){if(!r){var o=yfe(e,n,a);n!==o&&(r=!0,a="buffer",n=o)}var u=e.objectMode?1:n.length;e.length+=u;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:a,isBuf:r,callback:s,next:null},h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else WM(t,e,!1,u,n,a,s);return l}function WM(t,e,r,n,a,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new cfe("write")):r?t._writev(a,e.onwrite):t._write(a,s,e.onwrite),e.sync=!1}function wfe(t,e,r,n,a){--e.pendingcb,r?(process.nextTick(a,n),process.nextTick(Ev,t,e),t._writableState.errorEmitted=!0,Fd(t,n)):(a(n),t._writableState.errorEmitted=!0,Fd(t,n),Ev(t,e))}function _fe(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function xfe(t,e){var r=t._writableState,n=r.sync,a=r.writecb;if(typeof a!="function")throw new ffe;if(_fe(r),e)wfe(t,r,n,e,a);else{var s=PR(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&LR(t,r),n?process.nextTick(CR,t,r,s,a):CR(t,r,s,a)}}function CR(t,e,r,n){r||Sfe(t,e),e.pendingcb--,n(),Ev(t,e)}function Sfe(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function LR(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,a=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,u=!0;r;)a[o]=r,r.isBuf||(u=!1),r=r.next,o+=1;a.allBuffers=u,WM(t,e,!0,e.length,a,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new FR(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,h=r.encoding,p=r.callback,v=e.objectMode?1:l.length;if(WM(t,e,!1,v,l,h,p),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}ti.prototype._write=function(t,e,r){r(new ufe("_write()"))};ti.prototype._writev=null;ti.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||Afe(this,n,r),this};Object.defineProperty(ti.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function PR(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Efe(t,e){t._final(function(r){e.pendingcb--,r&&Fd(t,r),e.prefinished=!0,t.emit("prefinish"),Ev(t,e)})}function Mfe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(Efe,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Ev(t,e){var r=PR(e);if(r&&(Mfe(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function Afe(t,e,r){e.ending=!0,Ev(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function kfe(t,e,r){var n=t.entry;for(t.entry=null;n;){var a=n.callback;e.pendingcb--,a(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(ti.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});ti.prototype.destroy=GM.destroy;ti.prototype._undestroy=GM.undestroy;ti.prototype._destroy=function(t,e){e(t)}});var pc=ne((WYe,zR)=>{"use strict";var Tfe=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};zR.exports=fu;var $R=JM(),ZM=HM();Et()(fu,$R);for(KM=Tfe(ZM.prototype),qb=0;qb<KM.length;qb++)$b=KM[qb],fu.prototype[$b]||(fu.prototype[$b]=ZM.prototype[$b]);var KM,$b,qb;function fu(t){if(!(this instanceof fu))return new fu(t);$R.call(this,t),ZM.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",Nfe)))}Object.defineProperty(fu.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(fu.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(fu.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Nfe(){this._writableState.ended||process.nextTick(Ife,this)}function Ife(t){t.end()}Object.defineProperty(fu.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var VR=ne((YM,UR)=>{var zb=mn(),lu=zb.Buffer;function jR(t,e){for(var r in t)e[r]=t[r]}lu.from&&lu.alloc&&lu.allocUnsafe&&lu.allocUnsafeSlow?UR.exports=zb:(jR(zb,YM),YM.Buffer=mc);function mc(t,e,r){return lu(t,e,r)}mc.prototype=Object.create(lu.prototype);jR(lu,mc);mc.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return lu(t,e,r)};mc.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=lu(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};mc.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return lu(t)};mc.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return zb.SlowBuffer(t)}});var cu=ne(GR=>{"use strict";var QM=VR().Buffer,WR=QM.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Dfe(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Ofe(t){var e=Dfe(t);if(typeof e!="string"&&(QM.isEncoding===WR||!WR(t)))throw new Error("Unknown encoding: "+t);return e||t}GR.StringDecoder=Av;function Av(t){this.encoding=Ofe(t);var e;switch(this.encoding){case"utf16le":this.text=Pfe,this.end=qfe,e=4;break;case"utf8":this.fillLast=Ffe,e=4;break;case"base64":this.text=$fe,this.end=zfe,e=3;break;default:this.write=jfe,this.end=Ufe;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=QM.allocUnsafe(e)}Av.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Av.prototype.end=Lfe;Av.prototype.text=Bfe;Av.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function XM(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Rfe(t,e,r){var n=e.length-1;if(n<r)return 0;var a=XM(e[n]);return a>=0?(a>0&&(t.lastNeed=a-1),a):--n<r||a===-2?0:(a=XM(e[n]),a>=0?(a>0&&(t.lastNeed=a-2),a):--n<r||a===-2?0:(a=XM(e[n]),a>=0?(a>0&&(a===2?a=0:t.lastNeed=a-3),a):0))}function Cfe(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function Ffe(t){var e=this.lastTotal-this.lastNeed,r=Cfe(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Bfe(t,e){var r=Rfe(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function Lfe(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Pfe(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function qfe(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function $fe(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function zfe(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function jfe(t){return t.toString(this.encoding)}function Ufe(t){return t&&t.length?this.write(t):""}});var jb=ne((HYe,ZR)=>{"use strict";var HR=dc().codes.ERR_STREAM_PREMATURE_CLOSE;function Vfe(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];t.apply(this,n)}}}function Wfe(){}function Gfe(t){return t.setHeader&&typeof t.abort=="function"}function KR(t,e,r){if(typeof e=="function")return KR(t,null,e);e||(e={}),r=Vfe(r||Wfe);var n=e.readable||e.readable!==!1&&t.readable,a=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||u()},o=t._writableState&&t._writableState.finished,u=function(){a=!1,o=!0,n||r.call(t)},l=t._readableState&&t._readableState.endEmitted,h=function(){n=!1,l=!0,a||r.call(t)},p=function(A){r.call(t,A)},v=function(){var A;if(n&&!l)return(!t._readableState||!t._readableState.ended)&&(A=new HR),r.call(t,A);if(a&&!o)return(!t._writableState||!t._writableState.ended)&&(A=new HR),r.call(t,A)},y=function(){t.req.on("finish",u)};return Gfe(t)?(t.on("complete",u),t.on("abort",v),t.req?y():t.on("request",y)):a&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",h),t.on("finish",u),e.error!==!1&&t.on("error",p),t.on("close",v),function(){t.removeListener("complete",u),t.removeListener("abort",v),t.removeListener("request",y),t.req&&t.req.removeListener("finish",u),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",u),t.removeListener("end",h),t.removeListener("error",p),t.removeListener("close",v)}}ZR.exports=KR});var YR=ne((KYe,JR)=>{"use strict";var Ub;function tl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Hfe=jb(),rl=Symbol("lastResolve"),vc=Symbol("lastReject"),kv=Symbol("error"),Vb=Symbol("ended"),gc=Symbol("lastPromise"),eA=Symbol("handlePromise"),yc=Symbol("stream");function nl(t,e){return{value:t,done:e}}function Kfe(t){var e=t[rl];if(e!==null){var r=t[yc].read();r!==null&&(t[gc]=null,t[rl]=null,t[vc]=null,e(nl(r,!1)))}}function Zfe(t){process.nextTick(Kfe,t)}function Jfe(t,e){return function(r,n){t.then(function(){if(e[Vb]){r(nl(void 0,!0));return}e[eA](r,n)},n)}}var Yfe=Object.getPrototypeOf(function(){}),Xfe=Object.setPrototypeOf((Ub={get stream(){return this[yc]},next:function(){var e=this,r=this[kv];if(r!==null)return Promise.reject(r);if(this[Vb])return Promise.resolve(nl(void 0,!0));if(this[yc].destroyed)return new Promise(function(o,u){process.nextTick(function(){e[kv]?u(e[kv]):o(nl(void 0,!0))})});var n=this[gc],a;if(n)a=new Promise(Jfe(n,this));else{var s=this[yc].read();if(s!==null)return Promise.resolve(nl(s,!1));a=new Promise(this[eA])}return this[gc]=a,a}},tl(Ub,Symbol.asyncIterator,function(){return this}),tl(Ub,"return",function(){var e=this;return new Promise(function(r,n){e[yc].destroy(null,function(a){if(a){n(a);return}r(nl(void 0,!0))})})}),Ub),Yfe),Qfe=function(e){var r,n=Object.create(Xfe,(r={},tl(r,yc,{value:e,writable:!0}),tl(r,rl,{value:null,writable:!0}),tl(r,vc,{value:null,writable:!0}),tl(r,kv,{value:null,writable:!0}),tl(r,Vb,{value:e._readableState.endEmitted,writable:!0}),tl(r,eA,{value:function(s,o){var u=n[yc].read();u?(n[gc]=null,n[rl]=null,n[vc]=null,s(nl(u,!1))):(n[rl]=s,n[vc]=o)},writable:!0}),r));return n[gc]=null,Hfe(e,function(a){if(a&&a.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[vc];s!==null&&(n[gc]=null,n[rl]=null,n[vc]=null,s(a)),n[kv]=a;return}var o=n[rl];o!==null&&(n[gc]=null,n[rl]=null,n[vc]=null,o(nl(void 0,!0))),n[Vb]=!0}),e.on("readable",Zfe.bind(null,n)),n};JR.exports=Qfe});var QR=ne((ZYe,XR)=>{XR.exports=function(){throw new Error("Readable.from is not available in the browser")}});var JM=ne((YYe,fC)=>{"use strict";fC.exports=vr;var Bd;vr.ReadableState=nC;var JYe=vs().EventEmitter,rC=function(e,r){return e.listeners(r).length},Nv=nM(),Wb=mn().Buffer,ele=global.Uint8Array||function(){};function tle(t){return Wb.from(t)}function rle(t){return Wb.isBuffer(t)||t instanceof ele}var tA=uu(),Qt;tA&&tA.debuglog?Qt=tA.debuglog("stream"):Qt=function(){};var nle=AR(),uA=jM(),ile=UM(),ale=ile.getHighWaterMark,Gb=dc().codes,sle=Gb.ERR_INVALID_ARG_TYPE,ole=Gb.ERR_STREAM_PUSH_AFTER_EOF,ule=Gb.ERR_METHOD_NOT_IMPLEMENTED,fle=Gb.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Ld,rA,nA;Et()(vr,Nv);var Tv=uA.errorOrDestroy,iA=["error","close","destroy","pause","resume"];function lle(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function nC(t,e,r){Bd=Bd||pc(),t=t||{},typeof r!="boolean"&&(r=e instanceof Bd),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=ale(this,t,"readableHighWaterMark",r),this.buffer=new nle,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Ld||(Ld=cu().StringDecoder),this.decoder=new Ld(t.encoding),this.encoding=t.encoding)}function vr(t){if(Bd=Bd||pc(),!(this instanceof vr))return new vr(t);var e=this instanceof Bd;this._readableState=new nC(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),Nv.call(this)}Object.defineProperty(vr.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});vr.prototype.destroy=uA.destroy;vr.prototype._undestroy=uA.undestroy;vr.prototype._destroy=function(t,e){e(t)};vr.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Wb.from(t,e),e=""),n=!0),iC(this,t,e,!1,n)};vr.prototype.unshift=function(t){return iC(this,t,null,!0,!1)};function iC(t,e,r,n,a){Qt("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,dle(t,s);else{var o;if(a||(o=cle(s,e)),o)Tv(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==Wb.prototype&&(e=tle(e)),n)s.endEmitted?Tv(t,new fle):aA(t,s,e,!0);else if(s.ended)Tv(t,new ole);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?aA(t,s,e,!1):oA(t,s)):aA(t,s,e,!1)}else n||(s.reading=!1,oA(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function aA(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Hb(t)),oA(t,e)}function cle(t,e){var r;return!rle(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new sle("chunk",["string","Buffer","Uint8Array"],e)),r}vr.prototype.isPaused=function(){return this._readableState.flowing===!1};vr.prototype.setEncoding=function(t){Ld||(Ld=cu().StringDecoder);var e=new Ld(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var eC=1073741824;function hle(t){return t>=eC?t=eC:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function tC(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=hle(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}vr.prototype.read=function(t){Qt("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Qt("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?sA(this):Hb(this),null;if(t=tC(t,e),t===0&&e.ended)return e.length===0&&sA(this),null;var n=e.needReadable;Qt("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Qt("length less than watermark",n)),e.ended||e.reading?(n=!1,Qt("reading or ended",n)):n&&(Qt("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=tC(r,e)));var a;return t>0?a=oC(t,e):a=null,a===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&sA(this)),a!==null&&this.emit("data",a),a};function dle(t,e){if(Qt("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Hb(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,aC(t)))}}function Hb(t){var e=t._readableState;Qt("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Qt("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(aC,t))}function aC(t){var e=t._readableState;Qt("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,fA(t)}function oA(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(ple,t,e))}function ple(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(Qt("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}vr.prototype._read=function(t){Tv(this,new ule("_read()"))};vr.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,Qt("pipe count=%d opts=%j",n.pipesCount,e);var a=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=a?u:T;n.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(I,N){Qt("onunpipe"),I===r&&N&&N.hasUnpiped===!1&&(N.hasUnpiped=!0,p())}function u(){Qt("onend"),t.end()}var l=mle(r);t.on("drain",l);var h=!1;function p(){Qt("cleanup"),t.removeListener("close",S),t.removeListener("finish",A),t.removeListener("drain",l),t.removeListener("error",y),t.removeListener("unpipe",o),r.removeListener("end",u),r.removeListener("end",T),r.removeListener("data",v),h=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l()}r.on("data",v);function v(I){Qt("ondata");var N=t.write(I);Qt("dest.write",N),N===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&uC(n.pipes,t)!==-1)&&!h&&(Qt("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function y(I){Qt("onerror",I),T(),t.removeListener("error",y),rC(t,"error")===0&&Tv(t,I)}lle(t,"error",y);function S(){t.removeListener("finish",A),T()}t.once("close",S);function A(){Qt("onfinish"),t.removeListener("close",S),T()}t.once("finish",A);function T(){Qt("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(Qt("pipe resume"),r.resume()),t};function mle(t){return function(){var r=t._readableState;Qt("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&rC(t,"data")&&(r.flowing=!0,fA(t))}}vr.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,a=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<a;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=uC(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};vr.prototype.on=function(t,e){var r=Nv.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Qt("on readable",n.length,n.reading),n.length?Hb(this):n.reading||process.nextTick(vle,this)),r};vr.prototype.addListener=vr.prototype.on;vr.prototype.removeListener=function(t,e){var r=Nv.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(sC,this),r};vr.prototype.removeAllListeners=function(t){var e=Nv.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(sC,this),e};function sC(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function vle(t){Qt("readable nexttick read 0"),t.read(0)}vr.prototype.resume=function(){var t=this._readableState;return t.flowing||(Qt("resume"),t.flowing=!t.readableListening,gle(this,t)),t.paused=!1,this};function gle(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(yle,t,e))}function yle(t,e){Qt("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),fA(t),e.flowing&&!e.reading&&t.read(0)}vr.prototype.pause=function(){return Qt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Qt("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function fA(t){var e=t._readableState;for(Qt("flow",e.flowing);e.flowing&&t.read()!==null;);}vr.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(Qt("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(Qt("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var u=e.push(o);u||(n=!0,t.pause())}});for(var a in t)this[a]===void 0&&typeof t[a]=="function"&&(this[a]=function(u){return function(){return t[u].apply(t,arguments)}}(a));for(var s=0;s<iA.length;s++)t.on(iA[s],this.emit.bind(this,iA[s]));return this._read=function(o){Qt("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(vr.prototype[Symbol.asyncIterator]=function(){return rA===void 0&&(rA=YR()),rA(this)});Object.defineProperty(vr.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(vr.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(vr.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});vr._fromList=oC;Object.defineProperty(vr.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function oC(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function sA(t){var e=t._readableState;Qt("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(ble,e,t))}function ble(t,e){if(Qt("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(vr.from=function(t,e){return nA===void 0&&(nA=QR()),nA(vr,t,e)});function uC(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var lA=ne((XYe,cC)=>{"use strict";cC.exports=Hu;var Kb=dc().codes,wle=Kb.ERR_METHOD_NOT_IMPLEMENTED,_le=Kb.ERR_MULTIPLE_CALLBACK,xle=Kb.ERR_TRANSFORM_ALREADY_TRANSFORMING,Sle=Kb.ERR_TRANSFORM_WITH_LENGTH_0,Zb=pc();Et()(Hu,Zb);function Ele(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new _le);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function Hu(t){if(!(this instanceof Hu))return new Hu(t);Zb.call(this,t),this._transformState={afterTransform:Ele.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Mle)}function Mle(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){lC(t,e,r)}):lC(this,null,null)}Hu.prototype.push=function(t,e){return this._transformState.needTransform=!1,Zb.prototype.push.call(this,t,e)};Hu.prototype._transform=function(t,e,r){r(new wle("_transform()"))};Hu.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var a=this._readableState;(n.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}};Hu.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Hu.prototype._destroy=function(t,e){Zb.prototype._destroy.call(this,t,function(r){e(r)})};function lC(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Sle;if(t._transformState.transforming)throw new xle;return t.push(null)}});var pC=ne((QYe,dC)=>{"use strict";dC.exports=Iv;var hC=lA();Et()(Iv,hC);function Iv(t){if(!(this instanceof Iv))return new Iv(t);hC.call(this,t)}Iv.prototype._transform=function(t,e,r){r(null,t)}});var bC=ne((eXe,yC)=>{"use strict";var cA;function Ale(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var gC=dc().codes,kle=gC.ERR_MISSING_ARGS,Tle=gC.ERR_STREAM_DESTROYED;function mC(t){if(t)throw t}function Nle(t){return t.setHeader&&typeof t.abort=="function"}function Ile(t,e,r,n){n=Ale(n);var a=!1;t.on("close",function(){a=!0}),cA===void 0&&(cA=jb()),cA(t,{readable:e,writable:r},function(o){if(o)return n(o);a=!0,n()});var s=!1;return function(o){if(!a&&!s){if(s=!0,Nle(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new Tle("pipe"))}}}function vC(t){t()}function Dle(t,e){return t.pipe(e)}function Ole(t){return!t.length||typeof t[t.length-1]!="function"?mC:t.pop()}function Rle(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=Ole(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new kle("streams");var a,s=e.map(function(o,u){var l=u<e.length-1,h=u>0;return Ile(o,l,h,function(p){a||(a=p),p&&s.forEach(vC),!l&&(s.forEach(vC),n(a))})});return e.reduce(Dle)}yC.exports=Rle});var hA=ne((ws,wC)=>{ws=wC.exports=JM();ws.Stream=ws;ws.Readable=ws;ws.Writable=HM();ws.Duplex=pc();ws.Transform=lA();ws.PassThrough=pC();ws.finished=jb();ws.pipeline=bC()});var mA=ne(pA=>{var _C=eM(),Cle=Et(),xC=hA(),Jb=pA.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},dA=pA.IncomingMessage=function(t,e,r,n){var a=this;if(xC.Readable.call(a),a._mode=r,a.headers={},a.rawHeaders=[],a.trailers={},a.rawTrailers=[],a.on("end",function(){process.nextTick(function(){a.emit("close")})}),r==="fetch"){let v=function(){o.read().then(function(y){if(!a._destroyed){if(n(y.done),y.done){a.push(null);return}a.push(Buffer.from(y.value)),v()}}).catch(function(y){n(!0),a._destroyed||a.emit("error",y)})};var p=v;if(a._fetchResponse=e,a.url=e.url,a.statusCode=e.status,a.statusMessage=e.statusText,e.headers.forEach(function(y,S){a.headers[S.toLowerCase()]=y,a.rawHeaders.push(S,y)}),_C.writableStream){var s=new WritableStream({write:function(y){return n(!1),new Promise(function(S,A){a._destroyed?A():a.push(Buffer.from(y))?S():a._resumeFetch=S})},close:function(){n(!0),a._destroyed||a.push(null)},abort:function(y){n(!0),a._destroyed||a.emit("error",y)}});try{e.body.pipeTo(s).catch(function(y){n(!0),a._destroyed||a.emit("error",y)});return}catch{}}var o=e.body.getReader();v()}else{a._xhr=t,a._pos=0,a.url=t.responseURL,a.statusCode=t.status,a.statusMessage=t.statusText;var u=t.getAllResponseHeaders().split(/\r?\n/);if(u.forEach(function(v){var y=v.match(/^([^:]+):\s*(.*)/);if(y){var S=y[1].toLowerCase();S==="set-cookie"?(a.headers[S]===void 0&&(a.headers[S]=[]),a.headers[S].push(y[2])):a.headers[S]!==void 0?a.headers[S]+=", "+y[2]:a.headers[S]=y[2],a.rawHeaders.push(y[1],y[2])}}),a._charset="x-user-defined",!_C.overrideMimeType){var l=a.rawHeaders["mime-type"];if(l){var h=l.match(/;\s*charset=([^;])(;|$)/);h&&(a._charset=h[1].toLowerCase())}a._charset||(a._charset="utf-8")}}};Cle(dA,xC.Readable);dA.prototype._read=function(){var t=this,e=t._resumeFetch;e&&(t._resumeFetch=null,e())};dA.prototype._onXHRProgress=function(t){var e=this,r=e._xhr,n=null;switch(e._mode){case"text":if(n=r.responseText,n.length>e._pos){var a=n.substr(e._pos);if(e._charset==="x-user-defined"){for(var s=Buffer.alloc(a.length),o=0;o<a.length;o++)s[o]=a.charCodeAt(o)&255;e.push(s)}else e.push(a,e._charset);e._pos=n.length}break;case"arraybuffer":if(r.readyState!==Jb.DONE||!r.response)break;n=r.response,e.push(Buffer.from(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=r.response,r.readyState!==Jb.LOADING||!n)break;e.push(Buffer.from(new Uint8Array(n)));break;case"ms-stream":if(n=r.response,r.readyState!==Jb.LOADING)break;var u=new global.MSStreamReader;u.onprogress=function(){u.result.byteLength>e._pos&&(e.push(Buffer.from(new Uint8Array(u.result.slice(e._pos)))),e._pos=u.result.byteLength)},u.onload=function(){t(!0),e.push(null)},u.readAsArrayBuffer(n);break}e._xhr.readyState===Jb.DONE&&e._mode!=="ms-stream"&&(t(!0),e.push(null))}});var AC=ne((rXe,MC)=>{var bc=eM(),Fle=Et(),EC=mA(),vA=hA(),Ble=EC.IncomingMessage,SC=EC.readyStates;function Lle(t,e){return bc.fetch&&e?"fetch":bc.mozchunkedarraybuffer?"moz-chunked-arraybuffer":bc.msstream?"ms-stream":bc.arraybuffer&&t?"arraybuffer":"text"}var ra=MC.exports=function(t){var e=this;vA.Writable.call(e),e._opts=t,e._body=[],e._headers={},t.auth&&e.setHeader("Authorization","Basic "+Buffer.from(t.auth).toString("base64")),Object.keys(t.headers).forEach(function(a){e.setHeader(a,t.headers[a])});var r,n=!0;if(t.mode==="disable-fetch"||"requestTimeout"in t&&!bc.abortController)n=!1,r=!0;else if(t.mode==="prefer-streaming")r=!1;else if(t.mode==="allow-wrong-content-type")r=!bc.overrideMimeType;else if(!t.mode||t.mode==="default"||t.mode==="prefer-fast")r=!0;else throw new Error("Invalid value for opts.mode");e._mode=Lle(r,n),e._fetchTimer=null,e._socketTimeout=null,e._socketTimer=null,e.on("finish",function(){e._onFinish()})};Fle(ra,vA.Writable);ra.prototype.setHeader=function(t,e){var r=this,n=t.toLowerCase();qle.indexOf(n)===-1&&(r._headers[n]={name:t,value:e})};ra.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null};ra.prototype.removeHeader=function(t){var e=this;delete e._headers[t.toLowerCase()]};ra.prototype._onFinish=function(){var t=this;if(!t._destroyed){var e=t._opts;"timeout"in e&&e.timeout!==0&&t.setTimeout(e.timeout);var r=t._headers,n=null;e.method!=="GET"&&e.method!=="HEAD"&&(n=new Blob(t._body,{type:(r["content-type"]||{}).value||""}));var a=[];if(Object.keys(r).forEach(function(l){var h=r[l].name,p=r[l].value;Array.isArray(p)?p.forEach(function(v){a.push([h,v])}):a.push([h,p])}),t._mode==="fetch"){var s=null;if(bc.abortController){var o=new AbortController;s=o.signal,t._fetchAbortController=o,"requestTimeout"in e&&e.requestTimeout!==0&&(t._fetchTimer=global.setTimeout(function(){t.emit("requestTimeout"),t._fetchAbortController&&t._fetchAbortController.abort()},e.requestTimeout))}global.fetch(t._opts.url,{method:t._opts.method,headers:a,body:n||void 0,mode:"cors",credentials:e.withCredentials?"include":"same-origin",signal:s}).then(function(l){t._fetchResponse=l,t._resetTimers(!1),t._connect()},function(l){t._resetTimers(!0),t._destroyed||t.emit("error",l)})}else{var u=t._xhr=new global.XMLHttpRequest;try{u.open(t._opts.method,t._opts.url,!0)}catch(l){process.nextTick(function(){t.emit("error",l)});return}"responseType"in u&&(u.responseType=t._mode),"withCredentials"in u&&(u.withCredentials=!!e.withCredentials),t._mode==="text"&&"overrideMimeType"in u&&u.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in e&&(u.timeout=e.requestTimeout,u.ontimeout=function(){t.emit("requestTimeout")}),a.forEach(function(l){u.setRequestHeader(l[0],l[1])}),t._response=null,u.onreadystatechange=function(){switch(u.readyState){case SC.LOADING:case SC.DONE:t._onXHRProgress();break}},t._mode==="moz-chunked-arraybuffer"&&(u.onprogress=function(){t._onXHRProgress()}),u.onerror=function(){t._destroyed||(t._resetTimers(!0),t.emit("error",new Error("XHR error")))};try{u.send(n)}catch(l){process.nextTick(function(){t.emit("error",l)});return}}}};function Ple(t){try{var e=t.status;return e!==null&&e!==0}catch{return!1}}ra.prototype._onXHRProgress=function(){var t=this;t._resetTimers(!1),!(!Ple(t._xhr)||t._destroyed)&&(t._response||t._connect(),t._response._onXHRProgress(t._resetTimers.bind(t)))};ra.prototype._connect=function(){var t=this;t._destroyed||(t._response=new Ble(t._xhr,t._fetchResponse,t._mode,t._resetTimers.bind(t)),t._response.on("error",function(e){t.emit("error",e)}),t.emit("response",t._response))};ra.prototype._write=function(t,e,r){var n=this;n._body.push(t),r()};ra.prototype._resetTimers=function(t){var e=this;global.clearTimeout(e._socketTimer),e._socketTimer=null,t?(global.clearTimeout(e._fetchTimer),e._fetchTimer=null):e._socketTimeout&&(e._socketTimer=global.setTimeout(function(){e.emit("timeout")},e._socketTimeout))};ra.prototype.abort=ra.prototype.destroy=function(t){var e=this;e._destroyed=!0,e._resetTimers(!0),e._response&&(e._response._destroyed=!0),e._xhr?e._xhr.abort():e._fetchAbortController&&e._fetchAbortController.abort(),t&&e.emit("error",t)};ra.prototype.end=function(t,e,r){var n=this;typeof t=="function"&&(r=t,t=void 0),vA.Writable.prototype.end.call(n,t,e,r)};ra.prototype.setTimeout=function(t,e){var r=this;e&&r.once("timeout",e),r._socketTimeout=t,r._resetTimers(!1)};ra.prototype.flushHeaders=function(){};ra.prototype.setNoDelay=function(){};ra.prototype.setSocketKeepAlive=function(){};var qle=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]});var TC=ne((nXe,kC)=>{kC.exports=zle;var $le=Object.prototype.hasOwnProperty;function zle(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)$le.call(r,n)&&(t[n]=r[n])}return t}});var IC=ne((iXe,NC)=>{NC.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}});var qC=ne((aXe,PC)=>{"use strict";var OC="-",jle=/^xn--/,Ule=/[^\0-\x7E]/,Vle=/[\x2E\u3002\uFF0E\uFF61]/g,Wle={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},gA=36-1,hu=Math.floor,yA=String.fromCharCode;function wc(t){throw new RangeError(Wle[t])}function Gle(t,e){let r=[],n=t.length;for(;n--;)r[n]=e(t[n]);return r}function RC(t,e){let r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(Vle,".");let a=t.split("."),s=Gle(a,e).join(".");return n+s}function CC(t){let e=[],r=0,n=t.length;for(;r<n;){let a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){let s=t.charCodeAt(r++);(s&64512)==56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e}var Hle=t=>String.fromCodePoint(...t),Kle=function(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36},DC=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},FC=function(t,e,r){let n=0;for(t=r?hu(t/700):t>>1,t+=hu(t/e);t>gA*26>>1;n+=36)t=hu(t/gA);return hu(n+(gA+1)*t/(t+38))},BC=function(t){let e=[],r=t.length,n=0,a=128,s=72,o=t.lastIndexOf(OC);o<0&&(o=0);for(let u=0;u<o;++u)t.charCodeAt(u)>=128&&wc("not-basic"),e.push(t.charCodeAt(u));for(let u=o>0?o+1:0;u<r;){let l=n;for(let p=1,v=36;;v+=36){u>=r&&wc("invalid-input");let y=Kle(t.charCodeAt(u++));(y>=36||y>hu((2147483647-n)/p))&&wc("overflow"),n+=y*p;let S=v<=s?1:v>=s+26?26:v-s;if(y<S)break;let A=36-S;p>hu(2147483647/A)&&wc("overflow"),p*=A}let h=e.length+1;s=FC(n-l,h,l==0),hu(n/h)>2147483647-a&&wc("overflow"),a+=hu(n/h),n%=h,e.splice(n++,0,a)}return String.fromCodePoint(...e)},LC=function(t){let e=[];t=CC(t);let r=t.length,n=128,a=0,s=72;for(let l of t)l<128&&e.push(yA(l));let o=e.length,u=o;for(o&&e.push(OC);u<r;){let l=2147483647;for(let p of t)p>=n&&p<l&&(l=p);let h=u+1;l-n>hu((2147483647-a)/h)&&wc("overflow"),a+=(l-n)*h,n=l;for(let p of t)if(p<n&&++a>2147483647&&wc("overflow"),p==n){let v=a;for(let y=36;;y+=36){let S=y<=s?1:y>=s+26?26:y-s;if(v<S)break;let A=v-S,T=36-S;e.push(yA(DC(S+A%T,0))),v=hu(A/T)}e.push(yA(DC(v,0))),s=FC(a,h,u==o),a=0,++u}++a,++n}return e.join("")},Zle=function(t){return RC(t,function(e){return jle.test(e)?BC(e.slice(4).toLowerCase()):e})},Jle=function(t){return RC(t,function(e){return Ule.test(e)?"xn--"+LC(e):e})},Yle={version:"2.1.0",ucs2:{decode:CC,encode:Hle},decode:BC,encode:LC,toASCII:Jle,toUnicode:Zle};PC.exports=Yle});var zC=ne((sXe,$C)=>{"use strict";$C.exports={isString:function(t){return typeof t=="string"},isObject:function(t){return typeof t=="object"&&t!==null},isNull:function(t){return t===null},isNullOrUndefined:function(t){return t==null}}});var UC=ne((oXe,jC)=>{"use strict";function Xle(t,e){return Object.prototype.hasOwnProperty.call(t,e)}jC.exports=function(t,e,r,n){e=e||"&",r=r||"=";var a={};if(typeof t!="string"||t.length===0)return a;var s=/\+/g;t=t.split(e);var o=1e3;n&&typeof n.maxKeys=="number"&&(o=n.maxKeys);var u=t.length;o>0&&u>o&&(u=o);for(var l=0;l<u;++l){var h=t[l].replace(s,"%20"),p=h.indexOf(r),v,y,S,A;p>=0?(v=h.substr(0,p),y=h.substr(p+1)):(v=h,y=""),S=decodeURIComponent(v),A=decodeURIComponent(y),Xle(a,S)?Qle(a[S])?a[S].push(A):a[S]=[a[S],A]:a[S]=A}return a};var Qle=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"}});var GC=ne((uXe,WC)=>{"use strict";var Dv=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};WC.exports=function(t,e,r,n){return e=e||"&",r=r||"=",t===null&&(t=void 0),typeof t=="object"?VC(tce(t),function(a){var s=encodeURIComponent(Dv(a))+r;return ece(t[a])?VC(t[a],function(o){return s+encodeURIComponent(Dv(o))}).join(e):s+encodeURIComponent(Dv(t[a]))}).join(e):n?encodeURIComponent(Dv(n))+r+encodeURIComponent(Dv(t)):""};var ece=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function VC(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var tce=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}});var HC=ne(Ov=>{"use strict";Ov.decode=Ov.parse=UC();Ov.encode=Ov.stringify=GC()});var xA=ne(qd=>{"use strict";var rce=qC(),du=zC();qd.parse=Rv;qd.resolve=hce;qd.resolveObject=dce;qd.format=cce;qd.Url=_s;function _s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var nce=/^([a-z0-9.+-]+:)/i,ice=/:[0-9]*$/,ace=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,sce=["<",">",'"',"`"," ","\r",`
`,"	"],oce=["{","}","|","\\","^","`"].concat(sce),bA=["'"].concat(oce),KC=["%","/","?",";","#"].concat(bA),ZC=["/","?","#"],uce=255,JC=/^[+a-z0-9A-Z_-]{0,63}$/,fce=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,lce={javascript:!0,"javascript:":!0},wA={javascript:!0,"javascript:":!0},Pd={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_A=HC();function Rv(t,e,r){if(t&&du.isObject(t)&&t instanceof _s)return t;var n=new _s;return n.parse(t,e,r),n}_s.prototype.parse=function(t,e,r){if(!du.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),a=n!==-1&&n<t.indexOf("#")?"?":"#",s=t.split(a),o=/\\/g;s[0]=s[0].replace(o,"/"),t=s.join(a);var u=t;if(u=u.trim(),!r&&t.split("#").length===1){var l=ace.exec(u);if(l)return this.path=u,this.href=u,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=_A.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var h=nce.exec(u);if(h){h=h[0];var p=h.toLowerCase();this.protocol=p,u=u.substr(h.length)}if(r||h||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var v=u.substr(0,2)==="//";v&&!(h&&wA[h])&&(u=u.substr(2),this.slashes=!0)}if(!wA[h]&&(v||h&&!Pd[h])){for(var y=-1,S=0;S<ZC.length;S++){var A=u.indexOf(ZC[S]);A!==-1&&(y===-1||A<y)&&(y=A)}var T,I;y===-1?I=u.lastIndexOf("@"):I=u.lastIndexOf("@",y),I!==-1&&(T=u.slice(0,I),u=u.slice(I+1),this.auth=decodeURIComponent(T)),y=-1;for(var S=0;S<KC.length;S++){var A=u.indexOf(KC[S]);A!==-1&&(y===-1||A<y)&&(y=A)}y===-1&&(y=u.length),this.host=u.slice(0,y),u=u.slice(y),this.parseHost(),this.hostname=this.hostname||"";var N=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!N)for(var D=this.hostname.split(/\./),S=0,C=D.length;S<C;S++){var L=D[S];if(!!L&&!L.match(JC)){for(var z="",$=0,G=L.length;$<G;$++)L.charCodeAt($)>127?z+="x":z+=L[$];if(!z.match(JC)){var j=D.slice(0,S),K=D.slice(S+1),M=L.match(fce);M&&(j.push(M[1]),K.unshift(M[2])),K.length&&(u="/"+K.join(".")+u),this.hostname=j.join(".");break}}}this.hostname.length>uce?this.hostname="":this.hostname=this.hostname.toLowerCase(),N||(this.hostname=rce.toASCII(this.hostname));var f=this.port?":"+this.port:"",d=this.hostname||"";this.host=d+f,this.href+=this.host,N&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),u[0]!=="/"&&(u="/"+u))}if(!lce[p])for(var S=0,C=bA.length;S<C;S++){var g=bA[S];if(u.indexOf(g)!==-1){var m=encodeURIComponent(g);m===g&&(m=escape(g)),u=u.split(g).join(m)}}var b=u.indexOf("#");b!==-1&&(this.hash=u.substr(b),u=u.slice(0,b));var E=u.indexOf("?");if(E!==-1?(this.search=u.substr(E),this.query=u.substr(E+1),e&&(this.query=_A.parse(this.query)),u=u.slice(0,E)):e&&(this.search="",this.query={}),u&&(this.pathname=u),Pd[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var f=this.pathname||"",k=this.search||"";this.path=f+k}return this.href=this.format(),this};function cce(t){return du.isString(t)&&(t=Rv(t)),t instanceof _s?t.format():_s.prototype.format.call(t)}_s.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",a=!1,s="";this.host?a=t+this.host:this.hostname&&(a=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&du.isObject(this.query)&&Object.keys(this.query).length&&(s=_A.stringify(this.query));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Pd[e])&&a!==!1?(a="//"+(a||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):a||(a=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(u){return encodeURIComponent(u)}),o=o.replace("#","%23"),e+a+r+o+n};function hce(t,e){return Rv(t,!1,!0).resolve(e)}_s.prototype.resolve=function(t){return this.resolveObject(Rv(t,!1,!0)).format()};function dce(t,e){return t?Rv(t,!1,!0).resolveObject(e):e}_s.prototype.resolveObject=function(t){if(du.isString(t)){var e=new _s;e.parse(t,!1,!0),t=e}for(var r=new _s,n=Object.keys(this),a=0;a<n.length;a++){var s=n[a];r[s]=this[s]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),u=0;u<o.length;u++){var l=o[u];l!=="protocol"&&(r[l]=t[l])}return Pd[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!Pd[t.protocol]){for(var h=Object.keys(t),p=0;p<h.length;p++){var v=h[p];r[v]=t[v]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!wA[t.protocol]){for(var C=(t.pathname||"").split("/");C.length&&!(t.host=C.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),C[0]!==""&&C.unshift(""),C.length<2&&C.unshift(""),r.pathname=C.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var y=r.pathname||"",S=r.search||"";r.path=y+S}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var A=r.pathname&&r.pathname.charAt(0)==="/",T=t.host||t.pathname&&t.pathname.charAt(0)==="/",I=T||A||r.host&&t.pathname,N=I,D=r.pathname&&r.pathname.split("/")||[],C=t.pathname&&t.pathname.split("/")||[],L=r.protocol&&!Pd[r.protocol];if(L&&(r.hostname="",r.port=null,r.host&&(D[0]===""?D[0]=r.host:D.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(C[0]===""?C[0]=t.host:C.unshift(t.host)),t.host=null),I=I&&(C[0]===""||D[0]==="")),T)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,D=C;else if(C.length)D||(D=[]),D.pop(),D=D.concat(C),r.search=t.search,r.query=t.query;else if(!du.isNullOrUndefined(t.search)){if(L){r.hostname=r.host=D.shift();var z=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;z&&(r.auth=z.shift(),r.host=r.hostname=z.shift())}return r.search=t.search,r.query=t.query,(!du.isNull(r.pathname)||!du.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!D.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var $=D.slice(-1)[0],G=(r.host||t.host||D.length>1)&&($==="."||$==="..")||$==="",j=0,K=D.length;K>=0;K--)$=D[K],$==="."?D.splice(K,1):$===".."?(D.splice(K,1),j++):j&&(D.splice(K,1),j--);if(!I&&!N)for(;j--;j)D.unshift("..");I&&D[0]!==""&&(!D[0]||D[0].charAt(0)!=="/")&&D.unshift(""),G&&D.join("/").substr(-1)!=="/"&&D.push("");var M=D[0]===""||D[0]&&D[0].charAt(0)==="/";if(L){r.hostname=r.host=M?"":D.length?D.shift():"";var z=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;z&&(r.auth=z.shift(),r.host=r.hostname=z.shift())}return I=I||r.host&&D.length,I&&!M&&D.unshift(""),D.length?r.pathname=D.join("/"):(r.pathname=null,r.path=null),(!du.isNull(r.pathname)||!du.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r};_s.prototype.parseHost=function(){var t=this.host,e=ice.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}});var Yb=ne(XC=>{var YC=AC(),pce=mA(),mce=TC(),vce=IC(),gce=xA(),Mo=XC;Mo.request=function(t,e){typeof t=="string"?t=gce.parse(t):t=mce(t);var r=global.location.protocol.search(/^https?:$/)===-1?"http:":"",n=t.protocol||r,a=t.hostname||t.host,s=t.port,o=t.path||"/";a&&a.indexOf(":")!==-1&&(a="["+a+"]"),t.url=(a?n+"//"+a:"")+(s?":"+s:"")+o,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var u=new YC(t);return e&&u.on("response",e),u};Mo.get=function(e,r){var n=Mo.request(e,r);return n.end(),n};Mo.ClientRequest=YC;Mo.IncomingMessage=pce.IncomingMessage;Mo.Agent=function(){};Mo.Agent.defaultMaxSockets=4;Mo.globalAgent=new Mo.Agent;Mo.STATUS_CODES=vce;Mo.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]});var EA=ne((hXe,eF)=>{var Cv=Yb(),yce=xA(),SA=eF.exports;for(Xb in Cv)Cv.hasOwnProperty(Xb)&&(SA[Xb]=Cv[Xb]);var Xb;SA.request=function(t,e){return t=QC(t),Cv.request.call(this,t,e)};SA.get=function(t,e){return t=QC(t),Cv.get.call(this,t,e)};function QC(t){if(typeof t=="string"&&(t=yce.parse(t)),t.protocol||(t.protocol="https:"),t.protocol!=="https:")throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}});var MA=ne((dXe,tF)=>{(function(t){"use strict";t.exports.is_uri=r,t.exports.is_http_uri=n,t.exports.is_https_uri=a,t.exports.is_web_uri=s,t.exports.isUri=r,t.exports.isHttpUri=n,t.exports.isHttpsUri=a,t.exports.isWebUri=s;var e=function(o){var u=o.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return u};function r(o){if(!!o&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(o)&&!/%[^0-9a-f]/i.test(o)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(o)){var u=[],l="",h="",p="",v="",y="",S="";if(u=e(o),l=u[1],h=u[2],p=u[3],v=u[4],y=u[5],!!(l&&l.length&&p.length>=0)){if(h&&h.length){if(!(p.length===0||/^\//.test(p)))return}else if(/^\/\//.test(p))return;if(!!/^[a-z][a-z0-9\+\-\.]*$/.test(l.toLowerCase()))return S+=l+":",h&&h.length&&(S+="//"+h),S+=p,v&&v.length&&(S+="?"+v),y&&y.length&&(S+="#"+y),S}}}function n(o,u){if(!!r(o)){var l=[],h="",p="",v="",y="",S="",A="",T="";if(l=e(o),h=l[1],p=l[2],v=l[3],S=l[4],A=l[5],!!h){if(u){if(h.toLowerCase()!="https")return}else if(h.toLowerCase()!="http")return;if(!!p)return/:(\d+)$/.test(p)&&(y=p.match(/:(\d+)$/)[0],p=p.replace(/:\d+$/,"")),T+=h+":",T+="//"+p,y&&(T+=y),T+=v,S&&S.length&&(T+="?"+S),A&&A.length&&(T+="#"+A),T}}}function a(o){return n(o,!0)}function s(o){return n(o)||a(o)}})(tF)});var AA=ne((pXe,rF)=>{rF.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(n,a,s){r.o(n,a)||Object.defineProperty(n,a,{enumerable:!0,get:s})},r.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,a){if(1&a&&(n=r(n)),8&a||4&a&&typeof n=="object"&&n&&n.__esModule)return n;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:n}),2&a&&typeof n!="string")for(var o in n)r.d(s,o,function(u){return n[u]}.bind(null,o));return s},r.n=function(n){var a=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(a,"a",a),a},r.o=function(n,a){return Object.prototype.hasOwnProperty.call(n,a)},r.p="",r(r.s=32)}([function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(r=window)}t.exports=r},function(t,e,r){"use strict";var n=r(6),a=Object.keys||function(A){var T=[];for(var I in A)T.push(I);return T};t.exports=v;var s=r(5);s.inherits=r(2);var o=r(23),u=r(14);s.inherits(v,o);for(var l=a(u.prototype),h=0;h<l.length;h++){var p=l[h];v.prototype[p]||(v.prototype[p]=u.prototype[p])}function v(A){if(!(this instanceof v))return new v(A);o.call(this,A),u.call(this,A),A&&A.readable===!1&&(this.readable=!1),A&&A.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,A&&A.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",y)}function y(){this.allowHalfOpen||this._writableState.ended||n.nextTick(S,this)}function S(A){A.end()}Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(v.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(A){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=A,this._writableState.destroyed=A)}}),v.prototype._destroy=function(A,T){this.push(null),this.end(),n.nextTick(T,A)}},function(t,e){typeof Object.create=="function"?t.exports=function(r,n){r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(r,n){r.super_=n;var a=function(){};a.prototype=n.prototype,r.prototype=new a,r.prototype.constructor=r}},function(t,e,r){"use strict";(function(n){var a=r(38),s=r(39),o=r(40);function u(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function l(B,q){if(u()<q)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(B=new Uint8Array(q)).__proto__=h.prototype:(B===null&&(B=new h(q)),B.length=q),B}function h(B,q,Y){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(B,q,Y);if(typeof B=="number"){if(typeof q=="string")throw new Error("If encoding is specified then the first argument must be a string");return y(this,B)}return p(this,B,q,Y)}function p(B,q,Y,X){if(typeof q=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&q instanceof ArrayBuffer?function(Q,be,ue,me){if(be.byteLength,ue<0||be.byteLength<ue)throw new RangeError("'offset' is out of bounds");if(be.byteLength<ue+(me||0))throw new RangeError("'length' is out of bounds");return be=ue===void 0&&me===void 0?new Uint8Array(be):me===void 0?new Uint8Array(be,ue):new Uint8Array(be,ue,me),h.TYPED_ARRAY_SUPPORT?(Q=be).__proto__=h.prototype:Q=S(Q,be),Q}(B,q,Y,X):typeof q=="string"?function(Q,be,ue){if(typeof ue=="string"&&ue!==""||(ue="utf8"),!h.isEncoding(ue))throw new TypeError('"encoding" must be a valid string encoding');var me=0|T(be,ue),vt=(Q=l(Q,me)).write(be,ue);return vt!==me&&(Q=Q.slice(0,vt)),Q}(B,q,Y):function(Q,be){if(h.isBuffer(be)){var ue=0|A(be.length);return(Q=l(Q,ue)).length===0||be.copy(Q,0,0,ue),Q}if(be){if(typeof ArrayBuffer!="undefined"&&be.buffer instanceof ArrayBuffer||"length"in be)return typeof be.length!="number"||function(me){return me!=me}(be.length)?l(Q,0):S(Q,be);if(be.type==="Buffer"&&o(be.data))return S(Q,be.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(B,q)}function v(B){if(typeof B!="number")throw new TypeError('"size" argument must be a number');if(B<0)throw new RangeError('"size" argument must not be negative')}function y(B,q){if(v(q),B=l(B,q<0?0:0|A(q)),!h.TYPED_ARRAY_SUPPORT)for(var Y=0;Y<q;++Y)B[Y]=0;return B}function S(B,q){var Y=q.length<0?0:0|A(q.length);B=l(B,Y);for(var X=0;X<Y;X+=1)B[X]=255&q[X];return B}function A(B){if(B>=u())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u().toString(16)+" bytes");return 0|B}function T(B,q){if(h.isBuffer(B))return B.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(B)||B instanceof ArrayBuffer))return B.byteLength;typeof B!="string"&&(B=""+B);var Y=B.length;if(Y===0)return 0;for(var X=!1;;)switch(q){case"ascii":case"latin1":case"binary":return Y;case"utf8":case"utf-8":case void 0:return H(B).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Y;case"hex":return Y>>>1;case"base64":return J(B).length;default:if(X)return H(B).length;q=(""+q).toLowerCase(),X=!0}}function I(B,q,Y){var X=B[q];B[q]=B[Y],B[Y]=X}function N(B,q,Y,X,Q){if(B.length===0)return-1;if(typeof Y=="string"?(X=Y,Y=0):Y>2147483647?Y=2147483647:Y<-2147483648&&(Y=-2147483648),Y=+Y,isNaN(Y)&&(Y=Q?0:B.length-1),Y<0&&(Y=B.length+Y),Y>=B.length){if(Q)return-1;Y=B.length-1}else if(Y<0){if(!Q)return-1;Y=0}if(typeof q=="string"&&(q=h.from(q,X)),h.isBuffer(q))return q.length===0?-1:D(B,q,Y,X,Q);if(typeof q=="number")return q&=255,h.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?Q?Uint8Array.prototype.indexOf.call(B,q,Y):Uint8Array.prototype.lastIndexOf.call(B,q,Y):D(B,[q],Y,X,Q);throw new TypeError("val must be string, number or Buffer")}function D(B,q,Y,X,Q){var be,ue=1,me=B.length,vt=q.length;if(X!==void 0&&((X=String(X).toLowerCase())==="ucs2"||X==="ucs-2"||X==="utf16le"||X==="utf-16le")){if(B.length<2||q.length<2)return-1;ue=2,me/=2,vt/=2,Y/=2}function xe(Te,at){return ue===1?Te[at]:Te.readUInt16BE(at*ue)}if(Q){var le=-1;for(be=Y;be<me;be++)if(xe(B,be)===xe(q,le===-1?0:be-le)){if(le===-1&&(le=be),be-le+1===vt)return le*ue}else le!==-1&&(be-=be-le),le=-1}else for(Y+vt>me&&(Y=me-vt),be=Y;be>=0;be--){for(var qt=!0,we=0;we<vt;we++)if(xe(B,be+we)!==xe(q,we)){qt=!1;break}if(qt)return be}return-1}function C(B,q,Y,X){Y=Number(Y)||0;var Q=B.length-Y;X?(X=Number(X))>Q&&(X=Q):X=Q;var be=q.length;if(be%2!=0)throw new TypeError("Invalid hex string");X>be/2&&(X=be/2);for(var ue=0;ue<X;++ue){var me=parseInt(q.substr(2*ue,2),16);if(isNaN(me))return ue;B[Y+ue]=me}return ue}function L(B,q,Y,X){return fe(H(q,B.length-Y),B,Y,X)}function z(B,q,Y,X){return fe(function(Q){for(var be=[],ue=0;ue<Q.length;++ue)be.push(255&Q.charCodeAt(ue));return be}(q),B,Y,X)}function $(B,q,Y,X){return z(B,q,Y,X)}function G(B,q,Y,X){return fe(J(q),B,Y,X)}function j(B,q,Y,X){return fe(function(Q,be){for(var ue,me,vt,xe=[],le=0;le<Q.length&&!((be-=2)<0);++le)me=(ue=Q.charCodeAt(le))>>8,vt=ue%256,xe.push(vt),xe.push(me);return xe}(q,B.length-Y),B,Y,X)}function K(B,q,Y){return q===0&&Y===B.length?a.fromByteArray(B):a.fromByteArray(B.slice(q,Y))}function M(B,q,Y){Y=Math.min(B.length,Y);for(var X=[],Q=q;Q<Y;){var be,ue,me,vt,xe=B[Q],le=null,qt=xe>239?4:xe>223?3:xe>191?2:1;if(Q+qt<=Y)switch(qt){case 1:xe<128&&(le=xe);break;case 2:(192&(be=B[Q+1]))==128&&(vt=(31&xe)<<6|63&be)>127&&(le=vt);break;case 3:be=B[Q+1],ue=B[Q+2],(192&be)==128&&(192&ue)==128&&(vt=(15&xe)<<12|(63&be)<<6|63&ue)>2047&&(vt<55296||vt>57343)&&(le=vt);break;case 4:be=B[Q+1],ue=B[Q+2],me=B[Q+3],(192&be)==128&&(192&ue)==128&&(192&me)==128&&(vt=(15&xe)<<18|(63&be)<<12|(63&ue)<<6|63&me)>65535&&vt<1114112&&(le=vt)}le===null?(le=65533,qt=1):le>65535&&(le-=65536,X.push(le>>>10&1023|55296),le=56320|1023&le),X.push(le),Q+=qt}return function(we){var Te=we.length;if(Te<=f)return String.fromCharCode.apply(String,we);for(var at="",ee=0;ee<Te;)at+=String.fromCharCode.apply(String,we.slice(ee,ee+=f));return at}(X)}e.Buffer=h,e.SlowBuffer=function(B){return+B!=B&&(B=0),h.alloc(+B)},e.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=n.TYPED_ARRAY_SUPPORT!==void 0?n.TYPED_ARRAY_SUPPORT:function(){try{var B=new Uint8Array(1);return B.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},B.foo()===42&&typeof B.subarray=="function"&&B.subarray(1,1).byteLength===0}catch{return!1}}(),e.kMaxLength=u(),h.poolSize=8192,h._augment=function(B){return B.__proto__=h.prototype,B},h.from=function(B,q,Y){return p(null,B,q,Y)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0})),h.alloc=function(B,q,Y){return function(X,Q,be,ue){return v(Q),Q<=0?l(X,Q):be!==void 0?typeof ue=="string"?l(X,Q).fill(be,ue):l(X,Q).fill(be):l(X,Q)}(null,B,q,Y)},h.allocUnsafe=function(B){return y(null,B)},h.allocUnsafeSlow=function(B){return y(null,B)},h.isBuffer=function(B){return!(B==null||!B._isBuffer)},h.compare=function(B,q){if(!h.isBuffer(B)||!h.isBuffer(q))throw new TypeError("Arguments must be Buffers");if(B===q)return 0;for(var Y=B.length,X=q.length,Q=0,be=Math.min(Y,X);Q<be;++Q)if(B[Q]!==q[Q]){Y=B[Q],X=q[Q];break}return Y<X?-1:X<Y?1:0},h.isEncoding=function(B){switch(String(B).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(B,q){if(!o(B))throw new TypeError('"list" argument must be an Array of Buffers');if(B.length===0)return h.alloc(0);var Y;if(q===void 0)for(q=0,Y=0;Y<B.length;++Y)q+=B[Y].length;var X=h.allocUnsafe(q),Q=0;for(Y=0;Y<B.length;++Y){var be=B[Y];if(!h.isBuffer(be))throw new TypeError('"list" argument must be an Array of Buffers');be.copy(X,Q),Q+=be.length}return X},h.byteLength=T,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var B=this.length;if(B%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var q=0;q<B;q+=2)I(this,q,q+1);return this},h.prototype.swap32=function(){var B=this.length;if(B%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var q=0;q<B;q+=4)I(this,q,q+3),I(this,q+1,q+2);return this},h.prototype.swap64=function(){var B=this.length;if(B%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var q=0;q<B;q+=8)I(this,q,q+7),I(this,q+1,q+6),I(this,q+2,q+5),I(this,q+3,q+4);return this},h.prototype.toString=function(){var B=0|this.length;return B===0?"":arguments.length===0?M(this,0,B):function(q,Y,X){var Q=!1;if((Y===void 0||Y<0)&&(Y=0),Y>this.length||((X===void 0||X>this.length)&&(X=this.length),X<=0)||(X>>>=0)<=(Y>>>=0))return"";for(q||(q="utf8");;)switch(q){case"hex":return m(this,Y,X);case"utf8":case"utf-8":return M(this,Y,X);case"ascii":return d(this,Y,X);case"latin1":case"binary":return g(this,Y,X);case"base64":return K(this,Y,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,Y,X);default:if(Q)throw new TypeError("Unknown encoding: "+q);q=(q+"").toLowerCase(),Q=!0}}.apply(this,arguments)},h.prototype.equals=function(B){if(!h.isBuffer(B))throw new TypeError("Argument must be a Buffer");return this===B||h.compare(this,B)===0},h.prototype.inspect=function(){var B="",q=e.INSPECT_MAX_BYTES;return this.length>0&&(B=this.toString("hex",0,q).match(/.{2}/g).join(" "),this.length>q&&(B+=" ... ")),"<Buffer "+B+">"},h.prototype.compare=function(B,q,Y,X,Q){if(!h.isBuffer(B))throw new TypeError("Argument must be a Buffer");if(q===void 0&&(q=0),Y===void 0&&(Y=B?B.length:0),X===void 0&&(X=0),Q===void 0&&(Q=this.length),q<0||Y>B.length||X<0||Q>this.length)throw new RangeError("out of range index");if(X>=Q&&q>=Y)return 0;if(X>=Q)return-1;if(q>=Y)return 1;if(q>>>=0,Y>>>=0,X>>>=0,Q>>>=0,this===B)return 0;for(var be=Q-X,ue=Y-q,me=Math.min(be,ue),vt=this.slice(X,Q),xe=B.slice(q,Y),le=0;le<me;++le)if(vt[le]!==xe[le]){be=vt[le],ue=xe[le];break}return be<ue?-1:ue<be?1:0},h.prototype.includes=function(B,q,Y){return this.indexOf(B,q,Y)!==-1},h.prototype.indexOf=function(B,q,Y){return N(this,B,q,Y,!0)},h.prototype.lastIndexOf=function(B,q,Y){return N(this,B,q,Y,!1)},h.prototype.write=function(B,q,Y,X){if(q===void 0)X="utf8",Y=this.length,q=0;else if(Y===void 0&&typeof q=="string")X=q,Y=this.length,q=0;else{if(!isFinite(q))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");q|=0,isFinite(Y)?(Y|=0,X===void 0&&(X="utf8")):(X=Y,Y=void 0)}var Q=this.length-q;if((Y===void 0||Y>Q)&&(Y=Q),B.length>0&&(Y<0||q<0)||q>this.length)throw new RangeError("Attempt to write outside buffer bounds");X||(X="utf8");for(var be=!1;;)switch(X){case"hex":return C(this,B,q,Y);case"utf8":case"utf-8":return L(this,B,q,Y);case"ascii":return z(this,B,q,Y);case"latin1":case"binary":return $(this,B,q,Y);case"base64":return G(this,B,q,Y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,B,q,Y);default:if(be)throw new TypeError("Unknown encoding: "+X);X=(""+X).toLowerCase(),be=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var f=4096;function d(B,q,Y){var X="";Y=Math.min(B.length,Y);for(var Q=q;Q<Y;++Q)X+=String.fromCharCode(127&B[Q]);return X}function g(B,q,Y){var X="";Y=Math.min(B.length,Y);for(var Q=q;Q<Y;++Q)X+=String.fromCharCode(B[Q]);return X}function m(B,q,Y){var X=B.length;(!q||q<0)&&(q=0),(!Y||Y<0||Y>X)&&(Y=X);for(var Q="",be=q;be<Y;++be)Q+=U(B[be]);return Q}function b(B,q,Y){for(var X=B.slice(q,Y),Q="",be=0;be<X.length;be+=2)Q+=String.fromCharCode(X[be]+256*X[be+1]);return Q}function E(B,q,Y){if(B%1!=0||B<0)throw new RangeError("offset is not uint");if(B+q>Y)throw new RangeError("Trying to access beyond buffer length")}function k(B,q,Y,X,Q,be){if(!h.isBuffer(B))throw new TypeError('"buffer" argument must be a Buffer instance');if(q>Q||q<be)throw new RangeError('"value" argument is out of bounds');if(Y+X>B.length)throw new RangeError("Index out of range")}function w(B,q,Y,X){q<0&&(q=65535+q+1);for(var Q=0,be=Math.min(B.length-Y,2);Q<be;++Q)B[Y+Q]=(q&255<<8*(X?Q:1-Q))>>>8*(X?Q:1-Q)}function c(B,q,Y,X){q<0&&(q=4294967295+q+1);for(var Q=0,be=Math.min(B.length-Y,4);Q<be;++Q)B[Y+Q]=q>>>8*(X?Q:3-Q)&255}function _(B,q,Y,X,Q,be){if(Y+X>B.length)throw new RangeError("Index out of range");if(Y<0)throw new RangeError("Index out of range")}function R(B,q,Y,X,Q){return Q||_(B,0,Y,4),s.write(B,q,Y,X,23,4),Y+4}function O(B,q,Y,X,Q){return Q||_(B,0,Y,8),s.write(B,q,Y,X,52,8),Y+8}h.prototype.slice=function(B,q){var Y,X=this.length;if(B=~~B,q=q===void 0?X:~~q,B<0?(B+=X)<0&&(B=0):B>X&&(B=X),q<0?(q+=X)<0&&(q=0):q>X&&(q=X),q<B&&(q=B),h.TYPED_ARRAY_SUPPORT)(Y=this.subarray(B,q)).__proto__=h.prototype;else{var Q=q-B;Y=new h(Q,void 0);for(var be=0;be<Q;++be)Y[be]=this[be+B]}return Y},h.prototype.readUIntLE=function(B,q,Y){B|=0,q|=0,Y||E(B,q,this.length);for(var X=this[B],Q=1,be=0;++be<q&&(Q*=256);)X+=this[B+be]*Q;return X},h.prototype.readUIntBE=function(B,q,Y){B|=0,q|=0,Y||E(B,q,this.length);for(var X=this[B+--q],Q=1;q>0&&(Q*=256);)X+=this[B+--q]*Q;return X},h.prototype.readUInt8=function(B,q){return q||E(B,1,this.length),this[B]},h.prototype.readUInt16LE=function(B,q){return q||E(B,2,this.length),this[B]|this[B+1]<<8},h.prototype.readUInt16BE=function(B,q){return q||E(B,2,this.length),this[B]<<8|this[B+1]},h.prototype.readUInt32LE=function(B,q){return q||E(B,4,this.length),(this[B]|this[B+1]<<8|this[B+2]<<16)+16777216*this[B+3]},h.prototype.readUInt32BE=function(B,q){return q||E(B,4,this.length),16777216*this[B]+(this[B+1]<<16|this[B+2]<<8|this[B+3])},h.prototype.readIntLE=function(B,q,Y){B|=0,q|=0,Y||E(B,q,this.length);for(var X=this[B],Q=1,be=0;++be<q&&(Q*=256);)X+=this[B+be]*Q;return X>=(Q*=128)&&(X-=Math.pow(2,8*q)),X},h.prototype.readIntBE=function(B,q,Y){B|=0,q|=0,Y||E(B,q,this.length);for(var X=q,Q=1,be=this[B+--X];X>0&&(Q*=256);)be+=this[B+--X]*Q;return be>=(Q*=128)&&(be-=Math.pow(2,8*q)),be},h.prototype.readInt8=function(B,q){return q||E(B,1,this.length),128&this[B]?-1*(255-this[B]+1):this[B]},h.prototype.readInt16LE=function(B,q){q||E(B,2,this.length);var Y=this[B]|this[B+1]<<8;return 32768&Y?4294901760|Y:Y},h.prototype.readInt16BE=function(B,q){q||E(B,2,this.length);var Y=this[B+1]|this[B]<<8;return 32768&Y?4294901760|Y:Y},h.prototype.readInt32LE=function(B,q){return q||E(B,4,this.length),this[B]|this[B+1]<<8|this[B+2]<<16|this[B+3]<<24},h.prototype.readInt32BE=function(B,q){return q||E(B,4,this.length),this[B]<<24|this[B+1]<<16|this[B+2]<<8|this[B+3]},h.prototype.readFloatLE=function(B,q){return q||E(B,4,this.length),s.read(this,B,!0,23,4)},h.prototype.readFloatBE=function(B,q){return q||E(B,4,this.length),s.read(this,B,!1,23,4)},h.prototype.readDoubleLE=function(B,q){return q||E(B,8,this.length),s.read(this,B,!0,52,8)},h.prototype.readDoubleBE=function(B,q){return q||E(B,8,this.length),s.read(this,B,!1,52,8)},h.prototype.writeUIntLE=function(B,q,Y,X){B=+B,q|=0,Y|=0,X||k(this,B,q,Y,Math.pow(2,8*Y)-1,0);var Q=1,be=0;for(this[q]=255&B;++be<Y&&(Q*=256);)this[q+be]=B/Q&255;return q+Y},h.prototype.writeUIntBE=function(B,q,Y,X){B=+B,q|=0,Y|=0,X||k(this,B,q,Y,Math.pow(2,8*Y)-1,0);var Q=Y-1,be=1;for(this[q+Q]=255&B;--Q>=0&&(be*=256);)this[q+Q]=B/be&255;return q+Y},h.prototype.writeUInt8=function(B,q,Y){return B=+B,q|=0,Y||k(this,B,q,1,255,0),h.TYPED_ARRAY_SUPPORT||(B=Math.floor(B)),this[q]=255&B,q+1},h.prototype.writeUInt16LE=function(B,q,Y){return B=+B,q|=0,Y||k(this,B,q,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[q]=255&B,this[q+1]=B>>>8):w(this,B,q,!0),q+2},h.prototype.writeUInt16BE=function(B,q,Y){return B=+B,q|=0,Y||k(this,B,q,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[q]=B>>>8,this[q+1]=255&B):w(this,B,q,!1),q+2},h.prototype.writeUInt32LE=function(B,q,Y){return B=+B,q|=0,Y||k(this,B,q,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[q+3]=B>>>24,this[q+2]=B>>>16,this[q+1]=B>>>8,this[q]=255&B):c(this,B,q,!0),q+4},h.prototype.writeUInt32BE=function(B,q,Y){return B=+B,q|=0,Y||k(this,B,q,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[q]=B>>>24,this[q+1]=B>>>16,this[q+2]=B>>>8,this[q+3]=255&B):c(this,B,q,!1),q+4},h.prototype.writeIntLE=function(B,q,Y,X){if(B=+B,q|=0,!X){var Q=Math.pow(2,8*Y-1);k(this,B,q,Y,Q-1,-Q)}var be=0,ue=1,me=0;for(this[q]=255&B;++be<Y&&(ue*=256);)B<0&&me===0&&this[q+be-1]!==0&&(me=1),this[q+be]=(B/ue>>0)-me&255;return q+Y},h.prototype.writeIntBE=function(B,q,Y,X){if(B=+B,q|=0,!X){var Q=Math.pow(2,8*Y-1);k(this,B,q,Y,Q-1,-Q)}var be=Y-1,ue=1,me=0;for(this[q+be]=255&B;--be>=0&&(ue*=256);)B<0&&me===0&&this[q+be+1]!==0&&(me=1),this[q+be]=(B/ue>>0)-me&255;return q+Y},h.prototype.writeInt8=function(B,q,Y){return B=+B,q|=0,Y||k(this,B,q,1,127,-128),h.TYPED_ARRAY_SUPPORT||(B=Math.floor(B)),B<0&&(B=255+B+1),this[q]=255&B,q+1},h.prototype.writeInt16LE=function(B,q,Y){return B=+B,q|=0,Y||k(this,B,q,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[q]=255&B,this[q+1]=B>>>8):w(this,B,q,!0),q+2},h.prototype.writeInt16BE=function(B,q,Y){return B=+B,q|=0,Y||k(this,B,q,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[q]=B>>>8,this[q+1]=255&B):w(this,B,q,!1),q+2},h.prototype.writeInt32LE=function(B,q,Y){return B=+B,q|=0,Y||k(this,B,q,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[q]=255&B,this[q+1]=B>>>8,this[q+2]=B>>>16,this[q+3]=B>>>24):c(this,B,q,!0),q+4},h.prototype.writeInt32BE=function(B,q,Y){return B=+B,q|=0,Y||k(this,B,q,4,2147483647,-2147483648),B<0&&(B=4294967295+B+1),h.TYPED_ARRAY_SUPPORT?(this[q]=B>>>24,this[q+1]=B>>>16,this[q+2]=B>>>8,this[q+3]=255&B):c(this,B,q,!1),q+4},h.prototype.writeFloatLE=function(B,q,Y){return R(this,B,q,!0,Y)},h.prototype.writeFloatBE=function(B,q,Y){return R(this,B,q,!1,Y)},h.prototype.writeDoubleLE=function(B,q,Y){return O(this,B,q,!0,Y)},h.prototype.writeDoubleBE=function(B,q,Y){return O(this,B,q,!1,Y)},h.prototype.copy=function(B,q,Y,X){if(Y||(Y=0),X||X===0||(X=this.length),q>=B.length&&(q=B.length),q||(q=0),X>0&&X<Y&&(X=Y),X===Y||B.length===0||this.length===0)return 0;if(q<0)throw new RangeError("targetStart out of bounds");if(Y<0||Y>=this.length)throw new RangeError("sourceStart out of bounds");if(X<0)throw new RangeError("sourceEnd out of bounds");X>this.length&&(X=this.length),B.length-q<X-Y&&(X=B.length-q+Y);var Q,be=X-Y;if(this===B&&Y<q&&q<X)for(Q=be-1;Q>=0;--Q)B[Q+q]=this[Q+Y];else if(be<1e3||!h.TYPED_ARRAY_SUPPORT)for(Q=0;Q<be;++Q)B[Q+q]=this[Q+Y];else Uint8Array.prototype.set.call(B,this.subarray(Y,Y+be),q);return be},h.prototype.fill=function(B,q,Y,X){if(typeof B=="string"){if(typeof q=="string"?(X=q,q=0,Y=this.length):typeof Y=="string"&&(X=Y,Y=this.length),B.length===1){var Q=B.charCodeAt(0);Q<256&&(B=Q)}if(X!==void 0&&typeof X!="string")throw new TypeError("encoding must be a string");if(typeof X=="string"&&!h.isEncoding(X))throw new TypeError("Unknown encoding: "+X)}else typeof B=="number"&&(B&=255);if(q<0||this.length<q||this.length<Y)throw new RangeError("Out of range index");if(Y<=q)return this;var be;if(q>>>=0,Y=Y===void 0?this.length:Y>>>0,B||(B=0),typeof B=="number")for(be=q;be<Y;++be)this[be]=B;else{var ue=h.isBuffer(B)?B:H(new h(B,X).toString()),me=ue.length;for(be=0;be<Y-q;++be)this[be+q]=ue[be%me]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function U(B){return B<16?"0"+B.toString(16):B.toString(16)}function H(B,q){var Y;q=q||1/0;for(var X=B.length,Q=null,be=[],ue=0;ue<X;++ue){if((Y=B.charCodeAt(ue))>55295&&Y<57344){if(!Q){if(Y>56319){(q-=3)>-1&&be.push(239,191,189);continue}if(ue+1===X){(q-=3)>-1&&be.push(239,191,189);continue}Q=Y;continue}if(Y<56320){(q-=3)>-1&&be.push(239,191,189),Q=Y;continue}Y=65536+(Q-55296<<10|Y-56320)}else Q&&(q-=3)>-1&&be.push(239,191,189);if(Q=null,Y<128){if((q-=1)<0)break;be.push(Y)}else if(Y<2048){if((q-=2)<0)break;be.push(Y>>6|192,63&Y|128)}else if(Y<65536){if((q-=3)<0)break;be.push(Y>>12|224,Y>>6&63|128,63&Y|128)}else{if(!(Y<1114112))throw new Error("Invalid code point");if((q-=4)<0)break;be.push(Y>>18|240,Y>>12&63|128,Y>>6&63|128,63&Y|128)}}return be}function J(B){return a.toByteArray(function(q){if((q=function(Y){return Y.trim?Y.trim():Y.replace(/^\s+|\s+$/g,"")}(q).replace(F,"")).length<2)return"";for(;q.length%4!=0;)q+="=";return q}(B))}function fe(B,q,Y,X){for(var Q=0;Q<X&&!(Q+Y>=q.length||Q>=B.length);++Q)q[Q+Y]=B[Q];return Q}}).call(this,r(0))},function(t,e){var r,n,a=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(I){if(r===setTimeout)return setTimeout(I,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(I,0);try{return r(I,0)}catch{try{return r.call(null,I,0)}catch{return r.call(this,I,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:s}catch{r=s}try{n=typeof clearTimeout=="function"?clearTimeout:o}catch{n=o}})();var l,h=[],p=!1,v=-1;function y(){p&&l&&(p=!1,l.length?h=l.concat(h):v=-1,h.length&&S())}function S(){if(!p){var I=u(y);p=!0;for(var N=h.length;N;){for(l=h,h=[];++v<N;)l&&l[v].run();v=-1,N=h.length}l=null,p=!1,function(D){if(n===clearTimeout)return clearTimeout(D);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(D);try{n(D)}catch{try{return n.call(null,D)}catch{return n.call(this,D)}}}(I)}}function A(I,N){this.fun=I,this.array=N}function T(){}a.nextTick=function(I){var N=new Array(arguments.length-1);if(arguments.length>1)for(var D=1;D<arguments.length;D++)N[D-1]=arguments[D];h.push(new A(I,N)),h.length!==1||p||u(S)},A.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=T,a.addListener=T,a.once=T,a.off=T,a.removeListener=T,a.removeAllListeners=T,a.emit=T,a.prependListener=T,a.prependOnceListener=T,a.listeners=function(I){return[]},a.binding=function(I){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(I){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e,r){(function(n){function a(s){return Object.prototype.toString.call(s)}e.isArray=function(s){return Array.isArray?Array.isArray(s):a(s)==="[object Array]"},e.isBoolean=function(s){return typeof s=="boolean"},e.isNull=function(s){return s===null},e.isNullOrUndefined=function(s){return s==null},e.isNumber=function(s){return typeof s=="number"},e.isString=function(s){return typeof s=="string"},e.isSymbol=function(s){return typeof s=="symbol"},e.isUndefined=function(s){return s===void 0},e.isRegExp=function(s){return a(s)==="[object RegExp]"},e.isObject=function(s){return typeof s=="object"&&s!==null},e.isDate=function(s){return a(s)==="[object Date]"},e.isError=function(s){return a(s)==="[object Error]"||s instanceof Error},e.isFunction=function(s){return typeof s=="function"},e.isPrimitive=function(s){return s===null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||typeof s=="symbol"||s===void 0},e.isBuffer=n.isBuffer}).call(this,r(3).Buffer)},function(t,e,r){"use strict";(function(n){!n.version||n.version.indexOf("v0.")===0||n.version.indexOf("v1.")===0&&n.version.indexOf("v1.8.")!==0?t.exports={nextTick:function(a,s,o,u){if(typeof a!="function")throw new TypeError('"callback" argument must be a function');var l,h,p=arguments.length;switch(p){case 0:case 1:return n.nextTick(a);case 2:return n.nextTick(function(){a.call(null,s)});case 3:return n.nextTick(function(){a.call(null,s,o)});case 4:return n.nextTick(function(){a.call(null,s,o,u)});default:for(l=new Array(p-1),h=0;h<l.length;)l[h++]=arguments[h];return n.nextTick(function(){a.apply(null,l)})}}}:t.exports=n}).call(this,r(4))},function(t,e,r){var n=r(3),a=n.Buffer;function s(u,l){for(var h in u)l[h]=u[h]}function o(u,l,h){return a(u,l,h)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=n:(s(n,e),e.Buffer=o),s(a,o),o.from=function(u,l,h){if(typeof u=="number")throw new TypeError("Argument must not be a number");return a(u,l,h)},o.alloc=function(u,l,h){if(typeof u!="number")throw new TypeError("Argument must be a number");var p=a(u);return l!==void 0?typeof h=="string"?p.fill(l,h):p.fill(l):p.fill(0),p},o.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return a(u)},o.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(u)}},function(t,e,r){var n=r(17)(Object,"create");t.exports=n},function(t,e,r){var n=r(31);t.exports=function(a,s){for(var o=a.length;o--;)if(n(a[o][0],s))return o;return-1}},function(t,e,r){var n=r(96);t.exports=function(a,s){var o=a.__data__;return n(s)?o[typeof s=="string"?"string":"hash"]:o.map}},function(t,e,r){(function(n){var a=n!==void 0&&n||typeof self!="undefined"&&self||window,s=Function.prototype.apply;function o(u,l){this._id=u,this._clearFn=l}e.setTimeout=function(){return new o(s.call(setTimeout,a,arguments),clearTimeout)},e.setInterval=function(){return new o(s.call(setInterval,a,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(u){u&&u.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(a,this._id)},e.enroll=function(u,l){clearTimeout(u._idleTimeoutId),u._idleTimeout=l},e.unenroll=function(u){clearTimeout(u._idleTimeoutId),u._idleTimeout=-1},e._unrefActive=e.active=function(u){clearTimeout(u._idleTimeoutId);var l=u._idleTimeout;l>=0&&(u._idleTimeoutId=setTimeout(function(){u._onTimeout&&u._onTimeout()},l))},r(35),e.setImmediate=typeof self!="undefined"&&self.setImmediate||n!==void 0&&n.setImmediate||this&&this.setImmediate,e.clearImmediate=typeof self!="undefined"&&self.clearImmediate||n!==void 0&&n.clearImmediate||this&&this.clearImmediate}).call(this,r(0))},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(o){return typeof o=="function"}function a(o){return typeof o=="object"&&o!==null}function s(o){return o===void 0}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(o){if(!function(u){return typeof u=="number"}(o)||o<0||isNaN(o))throw TypeError("n must be a positive number");return this._maxListeners=o,this},r.prototype.emit=function(o){var u,l,h,p,v,y;if(this._events||(this._events={}),o==="error"&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((u=arguments[1])instanceof Error)throw u;var S=new Error('Uncaught, unspecified "error" event. ('+u+")");throw S.context=u,S}if(s(l=this._events[o]))return!1;if(n(l))switch(arguments.length){case 1:l.call(this);break;case 2:l.call(this,arguments[1]);break;case 3:l.call(this,arguments[1],arguments[2]);break;default:p=Array.prototype.slice.call(arguments,1),l.apply(this,p)}else if(a(l))for(p=Array.prototype.slice.call(arguments,1),h=(y=l.slice()).length,v=0;v<h;v++)y[v].apply(this,p);return!0},r.prototype.addListener=function(o,u){var l;if(!n(u))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",o,n(u.listener)?u.listener:u),this._events[o]?a(this._events[o])?this._events[o].push(u):this._events[o]=[this._events[o],u]:this._events[o]=u,a(this._events[o])&&!this._events[o].warned&&(l=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&l>0&&this._events[o].length>l&&(this._events[o].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[o].length),typeof console.trace=="function"&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(o,u){if(!n(u))throw TypeError("listener must be a function");var l=!1;function h(){this.removeListener(o,h),l||(l=!0,u.apply(this,arguments))}return h.listener=u,this.on(o,h),this},r.prototype.removeListener=function(o,u){var l,h,p,v;if(!n(u))throw TypeError("listener must be a function");if(!this._events||!this._events[o])return this;if(p=(l=this._events[o]).length,h=-1,l===u||n(l.listener)&&l.listener===u)delete this._events[o],this._events.removeListener&&this.emit("removeListener",o,u);else if(a(l)){for(v=p;v-- >0;)if(l[v]===u||l[v].listener&&l[v].listener===u){h=v;break}if(h<0)return this;l.length===1?(l.length=0,delete this._events[o]):l.splice(h,1),this._events.removeListener&&this.emit("removeListener",o,u)}return this},r.prototype.removeAllListeners=function(o){var u,l;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[o]&&delete this._events[o],this;if(arguments.length===0){for(u in this._events)u!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events={},this}if(n(l=this._events[o]))this.removeListener(o,l);else if(l)for(;l.length;)this.removeListener(o,l[l.length-1]);return delete this._events[o],this},r.prototype.listeners=function(o){return this._events&&this._events[o]?n(this._events[o])?[this._events[o]]:this._events[o].slice():[]},r.prototype.listenerCount=function(o){if(this._events){var u=this._events[o];if(n(u))return 1;if(u)return u.length}return 0},r.listenerCount=function(o,u){return o.listenerCount(u)}},function(t,e,r){(e=t.exports=r(23)).Stream=e,e.Readable=e,e.Writable=r(14),e.Duplex=r(1),e.Transform=r(27),e.PassThrough=r(45)},function(t,e,r){"use strict";(function(n,a,s){var o=r(6);function u(M){var f=this;this.next=null,this.entry=null,this.finish=function(){(function(d,g,m){var b=d.entry;for(d.entry=null;b;){var E=b.callback;g.pendingcb--,E(void 0),b=b.next}g.corkedRequestsFree?g.corkedRequestsFree.next=d:g.corkedRequestsFree=d})(f,M)}}t.exports=C;var l,h=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?a:o.nextTick;C.WritableState=D;var p=r(5);p.inherits=r(2);var v,y={deprecate:r(44)},S=r(24),A=r(7).Buffer,T=s.Uint8Array||function(){},I=r(25);function N(){}function D(M,f){l=l||r(1),M=M||{};var d=f instanceof l;this.objectMode=!!M.objectMode,d&&(this.objectMode=this.objectMode||!!M.writableObjectMode);var g=M.highWaterMark,m=M.writableHighWaterMark,b=this.objectMode?16:16384;this.highWaterMark=g||g===0?g:d&&(m||m===0)?m:b,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var E=M.decodeStrings===!1;this.decodeStrings=!E,this.defaultEncoding=M.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(k){(function(w,c){var _=w._writableState,R=_.sync,O=_.writecb;if(function(U){U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0}(_),c)(function(U,H,J,fe,B){--H.pendingcb,J?(o.nextTick(B,fe),o.nextTick(K,U,H),U._writableState.errorEmitted=!0,U.emit("error",fe)):(B(fe),U._writableState.errorEmitted=!0,U.emit("error",fe),K(U,H))})(w,_,R,c,O);else{var F=G(_);F||_.corked||_.bufferProcessing||!_.bufferedRequest||$(w,_),R?h(z,w,_,F,O):z(w,_,F,O)}})(f,k)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new u(this)}function C(M){if(l=l||r(1),!(v.call(C,this)||this instanceof l))return new C(M);this._writableState=new D(M,this),this.writable=!0,M&&(typeof M.write=="function"&&(this._write=M.write),typeof M.writev=="function"&&(this._writev=M.writev),typeof M.destroy=="function"&&(this._destroy=M.destroy),typeof M.final=="function"&&(this._final=M.final)),S.call(this)}function L(M,f,d,g,m,b,E){f.writelen=g,f.writecb=E,f.writing=!0,f.sync=!0,d?M._writev(m,f.onwrite):M._write(m,b,f.onwrite),f.sync=!1}function z(M,f,d,g){d||function(m,b){b.length===0&&b.needDrain&&(b.needDrain=!1,m.emit("drain"))}(M,f),f.pendingcb--,g(),K(M,f)}function $(M,f){f.bufferProcessing=!0;var d=f.bufferedRequest;if(M._writev&&d&&d.next){var g=f.bufferedRequestCount,m=new Array(g),b=f.corkedRequestsFree;b.entry=d;for(var E=0,k=!0;d;)m[E]=d,d.isBuf||(k=!1),d=d.next,E+=1;m.allBuffers=k,L(M,f,!0,f.length,m,"",b.finish),f.pendingcb++,f.lastBufferedRequest=null,b.next?(f.corkedRequestsFree=b.next,b.next=null):f.corkedRequestsFree=new u(f),f.bufferedRequestCount=0}else{for(;d;){var w=d.chunk,c=d.encoding,_=d.callback;if(L(M,f,!1,f.objectMode?1:w.length,w,c,_),d=d.next,f.bufferedRequestCount--,f.writing)break}d===null&&(f.lastBufferedRequest=null)}f.bufferedRequest=d,f.bufferProcessing=!1}function G(M){return M.ending&&M.length===0&&M.bufferedRequest===null&&!M.finished&&!M.writing}function j(M,f){M._final(function(d){f.pendingcb--,d&&M.emit("error",d),f.prefinished=!0,M.emit("prefinish"),K(M,f)})}function K(M,f){var d=G(f);return d&&(function(g,m){m.prefinished||m.finalCalled||(typeof g._final=="function"?(m.pendingcb++,m.finalCalled=!0,o.nextTick(j,g,m)):(m.prefinished=!0,g.emit("prefinish")))}(M,f),f.pendingcb===0&&(f.finished=!0,M.emit("finish"))),d}p.inherits(C,S),D.prototype.getBuffer=function(){for(var M=this.bufferedRequest,f=[];M;)f.push(M),M=M.next;return f},function(){try{Object.defineProperty(D.prototype,"buffer",{get:y.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(v=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(M){return!!v.call(this,M)||this===C&&M&&M._writableState instanceof D}})):v=function(M){return M instanceof this},C.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},C.prototype.write=function(M,f,d){var g=this._writableState,m=!1,b=!g.objectMode&&function(E){return A.isBuffer(E)||E instanceof T}(M);return b&&!A.isBuffer(M)&&(M=function(E){return A.from(E)}(M)),typeof f=="function"&&(d=f,f=null),b?f="buffer":f||(f=g.defaultEncoding),typeof d!="function"&&(d=N),g.ended?function(E,k){var w=new Error("write after end");E.emit("error",w),o.nextTick(k,w)}(this,d):(b||function(E,k,w,c){var _=!0,R=!1;return w===null?R=new TypeError("May not write null values to stream"):typeof w=="string"||w===void 0||k.objectMode||(R=new TypeError("Invalid non-string/buffer chunk")),R&&(E.emit("error",R),o.nextTick(c,R),_=!1),_}(this,g,M,d))&&(g.pendingcb++,m=function(E,k,w,c,_,R){if(!w){var O=function(J,fe,B){return J.objectMode||J.decodeStrings===!1||typeof fe!="string"||(fe=A.from(fe,B)),fe}(k,c,_);c!==O&&(w=!0,_="buffer",c=O)}var F=k.objectMode?1:c.length;k.length+=F;var U=k.length<k.highWaterMark;if(U||(k.needDrain=!0),k.writing||k.corked){var H=k.lastBufferedRequest;k.lastBufferedRequest={chunk:c,encoding:_,isBuf:w,callback:R,next:null},H?H.next=k.lastBufferedRequest:k.bufferedRequest=k.lastBufferedRequest,k.bufferedRequestCount+=1}else L(E,k,!1,F,c,_,R);return U}(this,g,b,M,f,d)),m},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var M=this._writableState;M.corked&&(M.corked--,M.writing||M.corked||M.finished||M.bufferProcessing||!M.bufferedRequest||$(this,M))},C.prototype.setDefaultEncoding=function(M){if(typeof M=="string"&&(M=M.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((M+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+M);return this._writableState.defaultEncoding=M,this},Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(M,f,d){d(new Error("_write() is not implemented"))},C.prototype._writev=null,C.prototype.end=function(M,f,d){var g=this._writableState;typeof M=="function"?(d=M,M=null,f=null):typeof f=="function"&&(d=f,f=null),M!=null&&this.write(M,f),g.corked&&(g.corked=1,this.uncork()),g.ending||g.finished||function(m,b,E){b.ending=!0,K(m,b),E&&(b.finished?o.nextTick(E):m.once("finish",E)),b.ended=!0,m.writable=!1}(this,g,d)},Object.defineProperty(C.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(M){this._writableState&&(this._writableState.destroyed=M)}}),C.prototype.destroy=I.destroy,C.prototype._undestroy=I.undestroy,C.prototype._destroy=function(M,f){this.end(),f(M)}}).call(this,r(4),r(11).setImmediate,r(0))},function(t,e,r){(function(n,a,s){t.exports=function o(u,l,h){function p(S,A){if(!l[S]){if(!u[S]){var T=typeof _dereq_=="function"&&_dereq_;if(!A&&T)return T(S,!0);if(v)return v(S,!0);var I=new Error("Cannot find module '"+S+"'");throw I.code="MODULE_NOT_FOUND",I}var N=l[S]={exports:{}};u[S][0].call(N.exports,function(D){return p(u[S][1][D]||D)},N,N.exports,o,u,l,h)}return l[S].exports}for(var v=typeof _dereq_=="function"&&_dereq_,y=0;y<h.length;y++)p(h[y]);return p}({1:[function(o,u,l){"use strict";u.exports=function(h){var p=h._SomePromiseArray;function v(y){var S=new p(y),A=S.promise();return S.setHowMany(1),S.setUnwrap(),S.init(),A}h.any=function(y){return v(y)},h.prototype.any=function(){return v(this)}}},{}],2:[function(o,u,l){"use strict";var h;try{throw new Error}catch(N){h=N}var p=o("./schedule"),v=o("./queue"),y=o("./util");function S(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new v(16),this._normalQueue=new v(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var N=this;this.drainQueues=function(){N._drainQueues()},this._schedule=p}function A(N,D,C){this._lateQueue.push(N,D,C),this._queueTick()}function T(N,D,C){this._normalQueue.push(N,D,C),this._queueTick()}function I(N){this._normalQueue._pushOne(N),this._queueTick()}S.prototype.setScheduler=function(N){var D=this._schedule;return this._schedule=N,this._customScheduler=!0,D},S.prototype.hasCustomScheduler=function(){return this._customScheduler},S.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},S.prototype.disableTrampolineIfNecessary=function(){y.hasDevTools&&(this._trampolineEnabled=!1)},S.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},S.prototype.fatalError=function(N,D){D?(n.stderr.write("Fatal "+(N instanceof Error?N.stack:N)+`
`),n.exit(2)):this.throwLater(N)},S.prototype.throwLater=function(N,D){if(arguments.length===1&&(D=N,N=function(){throw D}),typeof setTimeout!="undefined")setTimeout(function(){N(D)},0);else try{this._schedule(function(){N(D)})}catch{throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)}},y.hasDevTools?(S.prototype.invokeLater=function(N,D,C){this._trampolineEnabled?A.call(this,N,D,C):this._schedule(function(){setTimeout(function(){N.call(D,C)},100)})},S.prototype.invoke=function(N,D,C){this._trampolineEnabled?T.call(this,N,D,C):this._schedule(function(){N.call(D,C)})},S.prototype.settlePromises=function(N){this._trampolineEnabled?I.call(this,N):this._schedule(function(){N._settlePromises()})}):(S.prototype.invokeLater=A,S.prototype.invoke=T,S.prototype.settlePromises=I),S.prototype._drainQueue=function(N){for(;N.length()>0;){var D=N.shift();if(typeof D=="function"){var C=N.shift(),L=N.shift();D.call(C,L)}else D._settlePromises()}},S.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},S.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},S.prototype._reset=function(){this._isTickUsed=!1},u.exports=S,u.exports.firstLineError=h},{"./queue":26,"./schedule":29,"./util":36}],3:[function(o,u,l){"use strict";u.exports=function(h,p,v,y){var S=!1,A=function(D,C){this._reject(C)},T=function(D,C){C.promiseRejectionQueued=!0,C.bindingPromise._then(A,A,null,this,D)},I=function(D,C){(50397184&this._bitField)==0&&this._resolveCallback(C.target)},N=function(D,C){C.promiseRejectionQueued||this._reject(D)};h.prototype.bind=function(D){S||(S=!0,h.prototype._propagateFrom=y.propagateFromFunction(),h.prototype._boundValue=y.boundValueFunction());var C=v(D),L=new h(p);L._propagateFrom(this,1);var z=this._target();if(L._setBoundTo(C),C instanceof h){var $={promiseRejectionQueued:!1,promise:L,target:z,bindingPromise:C};z._then(p,T,void 0,L,$),C._then(I,N,void 0,L,$),L._setOnCancel(C)}else L._resolveCallback(z);return L},h.prototype._setBoundTo=function(D){D!==void 0?(this._bitField=2097152|this._bitField,this._boundTo=D):this._bitField=-2097153&this._bitField},h.prototype._isBound=function(){return(2097152&this._bitField)==2097152},h.bind=function(D,C){return h.resolve(C).bind(D)}}},{}],4:[function(o,u,l){"use strict";var h;typeof Promise!="undefined"&&(h=Promise);var p=o("./promise")();p.noConflict=function(){try{Promise===p&&(Promise=h)}catch{}return p},u.exports=p},{"./promise":22}],5:[function(o,u,l){"use strict";var h=Object.create;if(h){var p=h(null),v=h(null);p[" size"]=v[" size"]=0}u.exports=function(y){var S=o("./util"),A=S.canEvaluate;function T(D){return function(C,L){var z;if(C!=null&&(z=C[L]),typeof z!="function"){var $="Object "+S.classString(C)+" has no method '"+S.toString(L)+"'";throw new y.TypeError($)}return z}(D,this.pop()).apply(D,this)}function I(D){return D[this]}function N(D){var C=+this;return C<0&&(C=Math.max(0,C+D.length)),D[C]}S.isIdentifier,y.prototype.call=function(D){var C=[].slice.call(arguments,1);return C.push(D),this._then(T,void 0,void 0,C,void 0)},y.prototype.get=function(D){var C;if(typeof D=="number")C=N;else if(A){var L=(void 0)(D);C=L!==null?L:I}else C=I;return this._then(C,void 0,void 0,D,void 0)}}},{"./util":36}],6:[function(o,u,l){"use strict";u.exports=function(h,p,v,y){var S=o("./util"),A=S.tryCatch,T=S.errorObj,I=h._async;h.prototype.break=h.prototype.cancel=function(){if(!y.cancellation())return this._warn("cancellation is disabled");for(var N=this,D=N;N._isCancellable();){if(!N._cancelBy(D)){D._isFollowing()?D._followee().cancel():D._cancelBranched();break}var C=N._cancellationParent;if(C==null||!C._isCancellable()){N._isFollowing()?N._followee().cancel():N._cancelBranched();break}N._isFollowing()&&N._followee().cancel(),N._setWillBeCancelled(),D=N,N=C}},h.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},h.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===void 0||this._branchesRemainingToCancel<=0},h.prototype._cancelBy=function(N){return N===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},h.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},h.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),I.invoke(this._cancelPromises,this,void 0))},h.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},h.prototype._unsetOnCancel=function(){this._onCancelField=void 0},h.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},h.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},h.prototype._doInvokeOnCancel=function(N,D){if(S.isArray(N))for(var C=0;C<N.length;++C)this._doInvokeOnCancel(N[C],D);else if(N!==void 0)if(typeof N=="function"){if(!D){var L=A(N).call(this._boundValue());L===T&&(this._attachExtraTrace(L.e),I.throwLater(L.e))}}else N._resultCancelled(this)},h.prototype._invokeOnCancel=function(){var N=this._onCancel();this._unsetOnCancel(),I.invoke(this._doInvokeOnCancel,this,N)},h.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},h.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(o,u,l){"use strict";u.exports=function(h){var p=o("./util"),v=o("./es5").keys,y=p.tryCatch,S=p.errorObj;return function(A,T,I){return function(N){var D=I._boundValue();e:for(var C=0;C<A.length;++C){var L=A[C];if(L===Error||L!=null&&L.prototype instanceof Error){if(N instanceof L)return y(T).call(D,N)}else if(typeof L=="function"){var z=y(L).call(D,N);if(z===S)return z;if(z)return y(T).call(D,N)}else if(p.isObject(N)){for(var $=v(L),G=0;G<$.length;++G){var j=$[G];if(L[j]!=N[j])continue e}return y(T).call(D,N)}}return h}}}},{"./es5":13,"./util":36}],8:[function(o,u,l){"use strict";u.exports=function(h){var p=!1,v=[];function y(){this._trace=new y.CapturedTrace(S())}function S(){var A=v.length-1;if(A>=0)return v[A]}return h.prototype._promiseCreated=function(){},h.prototype._pushContext=function(){},h.prototype._popContext=function(){return null},h._peekContext=h.prototype._peekContext=function(){},y.prototype._pushContext=function(){this._trace!==void 0&&(this._trace._promiseCreated=null,v.push(this._trace))},y.prototype._popContext=function(){if(this._trace!==void 0){var A=v.pop(),T=A._promiseCreated;return A._promiseCreated=null,T}return null},y.CapturedTrace=null,y.create=function(){if(p)return new y},y.deactivateLongStackTraces=function(){},y.activateLongStackTraces=function(){var A=h.prototype._pushContext,T=h.prototype._popContext,I=h._peekContext,N=h.prototype._peekContext,D=h.prototype._promiseCreated;y.deactivateLongStackTraces=function(){h.prototype._pushContext=A,h.prototype._popContext=T,h._peekContext=I,h.prototype._peekContext=N,h.prototype._promiseCreated=D,p=!1},p=!0,h.prototype._pushContext=y.prototype._pushContext,h.prototype._popContext=y.prototype._popContext,h._peekContext=h.prototype._peekContext=S,h.prototype._promiseCreated=function(){var C=this._peekContext();C&&C._promiseCreated==null&&(C._promiseCreated=this)}},y}},{}],9:[function(o,u,l){"use strict";u.exports=function(h,p){var v,y,S,A=h._getDomain,T=h._async,I=o("./errors").Warning,N=o("./util"),D=N.canAttachTrace,C=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,L=/\((?:timers\.js):\d+:\d+\)/,z=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,$=null,G=null,j=!1,K=N.env("BLUEBIRD_DEBUG")!=0,M=!(N.env("BLUEBIRD_WARNINGS")==0||!K&&!N.env("BLUEBIRD_WARNINGS")),f=!(N.env("BLUEBIRD_LONG_STACK_TRACES")==0||!K&&!N.env("BLUEBIRD_LONG_STACK_TRACES")),d=N.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(M||!!N.env("BLUEBIRD_W_FORGOTTEN_RETURN"));h.prototype.suppressUnhandledRejections=function(){var ee=this._target();ee._bitField=-1048577&ee._bitField|524288},h.prototype._ensurePossibleRejectionHandled=function(){if((524288&this._bitField)==0){this._setRejectionIsUnhandled();var ee=this;setTimeout(function(){ee._notifyUnhandledRejection()},1)}},h.prototype._notifyUnhandledRejectionIsHandled=function(){ue("rejectionHandled",v,void 0,this)},h.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},h.prototype._returnedNonUndefined=function(){return(268435456&this._bitField)!=0},h.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var ee=this._settledValue();this._setUnhandledRejectionIsNotified(),ue("unhandledRejection",y,ee,this)}},h.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},h.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},h.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},h.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},h.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},h.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},h.prototype._warn=function(ee,ie,tt){return Y(ee,ie,tt||this)},h.onPossiblyUnhandledRejection=function(ee){var ie=A();y=typeof ee=="function"?ie===null?ee:N.domainBind(ie,ee):void 0},h.onUnhandledRejectionHandled=function(ee){var ie=A();v=typeof ee=="function"?ie===null?ee:N.domainBind(ie,ee):void 0};var g=function(){};h.longStackTraces=function(){if(T.haveItemsQueued()&&!at.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);if(!at.longStackTraces&&vt()){var ee=h.prototype._captureStackTrace,ie=h.prototype._attachExtraTrace;at.longStackTraces=!0,g=function(){if(T.haveItemsQueued()&&!at.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);h.prototype._captureStackTrace=ee,h.prototype._attachExtraTrace=ie,p.deactivateLongStackTraces(),T.enableTrampoline(),at.longStackTraces=!1},h.prototype._captureStackTrace=B,h.prototype._attachExtraTrace=q,p.activateLongStackTraces(),T.disableTrampolineIfNecessary()}},h.hasLongStackTraces=function(){return at.longStackTraces&&vt()};var m=function(){try{if(typeof CustomEvent=="function"){var ee=new CustomEvent("CustomEvent");return N.global.dispatchEvent(ee),function(ie,tt){var ae=new CustomEvent(ie.toLowerCase(),{detail:tt,cancelable:!0});return!N.global.dispatchEvent(ae)}}return typeof Event=="function"?(ee=new Event("CustomEvent"),N.global.dispatchEvent(ee),function(ie,tt){var ae=new Event(ie.toLowerCase(),{cancelable:!0});return ae.detail=tt,!N.global.dispatchEvent(ae)}):((ee=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),N.global.dispatchEvent(ee),function(ie,tt){var ae=document.createEvent("CustomEvent");return ae.initCustomEvent(ie.toLowerCase(),!1,!0,tt),!N.global.dispatchEvent(ae)})}catch{}return function(){return!1}}(),b=N.isNode?function(){return n.emit.apply(n,arguments)}:N.global?function(ee){var ie="on"+ee.toLowerCase(),tt=N.global[ie];return!!tt&&(tt.apply(N.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function E(ee,ie){return{promise:ie}}var k={promiseCreated:E,promiseFulfilled:E,promiseRejected:E,promiseResolved:E,promiseCancelled:E,promiseChained:function(ee,ie,tt){return{promise:ie,child:tt}},warning:function(ee,ie){return{warning:ie}},unhandledRejection:function(ee,ie,tt){return{reason:ie,promise:tt}},rejectionHandled:E},w=function(ee){var ie=!1;try{ie=b.apply(null,arguments)}catch(ae){T.throwLater(ae),ie=!0}var tt=!1;try{tt=m(ee,k[ee].apply(null,arguments))}catch(ae){T.throwLater(ae),tt=!0}return tt||ie};function c(){return!1}function _(ee,ie,tt){var ae=this;try{ee(ie,tt,function(de){if(typeof de!="function")throw new TypeError("onCancel must be a function, got: "+N.toString(de));ae._attachCancellationCallback(de)})}catch(de){return de}}function R(ee){if(!this._isCancellable())return this;var ie=this._onCancel();ie!==void 0?N.isArray(ie)?ie.push(ee):this._setOnCancel([ie,ee]):this._setOnCancel(ee)}function O(){return this._onCancelField}function F(ee){this._onCancelField=ee}function U(){this._cancellationParent=void 0,this._onCancelField=void 0}function H(ee,ie){if((1&ie)!=0){this._cancellationParent=ee;var tt=ee._branchesRemainingToCancel;tt===void 0&&(tt=0),ee._branchesRemainingToCancel=tt+1}(2&ie)!=0&&ee._isBound()&&this._setBoundTo(ee._boundTo)}h.config=function(ee){if("longStackTraces"in(ee=Object(ee))&&(ee.longStackTraces?h.longStackTraces():!ee.longStackTraces&&h.hasLongStackTraces()&&g()),"warnings"in ee){var ie=ee.warnings;at.warnings=!!ie,d=at.warnings,N.isObject(ie)&&"wForgottenReturn"in ie&&(d=!!ie.wForgottenReturn)}if("cancellation"in ee&&ee.cancellation&&!at.cancellation){if(T.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");h.prototype._clearCancellationData=U,h.prototype._propagateFrom=H,h.prototype._onCancel=O,h.prototype._setOnCancel=F,h.prototype._attachCancellationCallback=R,h.prototype._execute=_,J=H,at.cancellation=!0}return"monitoring"in ee&&(ee.monitoring&&!at.monitoring?(at.monitoring=!0,h.prototype._fireEvent=w):!ee.monitoring&&at.monitoring&&(at.monitoring=!1,h.prototype._fireEvent=c)),h},h.prototype._fireEvent=c,h.prototype._execute=function(ee,ie,tt){try{ee(ie,tt)}catch(ae){return ae}},h.prototype._onCancel=function(){},h.prototype._setOnCancel=function(ee){},h.prototype._attachCancellationCallback=function(ee){},h.prototype._captureStackTrace=function(){},h.prototype._attachExtraTrace=function(){},h.prototype._clearCancellationData=function(){},h.prototype._propagateFrom=function(ee,ie){};var J=function(ee,ie){(2&ie)!=0&&ee._isBound()&&this._setBoundTo(ee._boundTo)};function fe(){var ee=this._boundTo;return ee!==void 0&&ee instanceof h?ee.isFulfilled()?ee.value():void 0:ee}function B(){this._trace=new we(this._peekContext())}function q(ee,ie){if(D(ee)){var tt=this._trace;if(tt!==void 0&&ie&&(tt=tt._parent),tt!==void 0)tt.attachExtraTrace(ee);else if(!ee.__stackCleaned__){var ae=Q(ee);N.notEnumerableProp(ee,"stack",ae.message+`
`+ae.stack.join(`
`)),N.notEnumerableProp(ee,"__stackCleaned__",!0)}}}function Y(ee,ie,tt){if(at.warnings){var ae,de=new I(ee);if(ie)tt._attachExtraTrace(de);else if(at.longStackTraces&&(ae=h._peekContext()))ae.attachExtraTrace(de);else{var Ze=Q(de);de.stack=Ze.message+`
`+Ze.stack.join(`
`)}w("warning",de)||be(de,"",!0)}}function X(ee){for(var ie=[],tt=0;tt<ee.length;++tt){var ae=ee[tt],de=ae==="    (No stack trace)"||$.test(ae),Ze=de&&xe(ae);de&&!Ze&&(j&&ae.charAt(0)!==" "&&(ae="    "+ae),ie.push(ae))}return ie}function Q(ee){var ie=ee.stack,tt=ee.toString();return ie=typeof ie=="string"&&ie.length>0?function(ae){for(var de=ae.stack.replace(/\s+$/g,"").split(`
`),Ze=0;Ze<de.length;++Ze){var he=de[Ze];if(he==="    (No stack trace)"||$.test(he))break}return Ze>0&&ae.name!="SyntaxError"&&(de=de.slice(Ze)),de}(ee):["    (No stack trace)"],{message:tt,stack:ee.name=="SyntaxError"?ie:X(ie)}}function be(ee,ie,tt){if(typeof console!="undefined"){var ae;if(N.isObject(ee)){var de=ee.stack;ae=ie+G(de,ee)}else ae=ie+String(ee);typeof S=="function"?S(ae,tt):typeof console.log!="function"&&typeof console.log!="object"||console.log(ae)}}function ue(ee,ie,tt,ae){var de=!1;try{typeof ie=="function"&&(de=!0,ee==="rejectionHandled"?ie(ae):ie(tt,ae))}catch(Ze){T.throwLater(Ze)}ee==="unhandledRejection"?w(ee,tt,ae)||de||be(tt,"Unhandled rejection "):w(ee,ae)}function me(ee){var ie;if(typeof ee=="function")ie="[function "+(ee.name||"anonymous")+"]";else{if(ie=ee&&typeof ee.toString=="function"?ee.toString():N.toString(ee),/\[object [a-zA-Z0-9$_]+\]/.test(ie))try{ie=JSON.stringify(ee)}catch{}ie.length===0&&(ie="(empty array)")}return"(<"+function(tt){return tt.length<41?tt:tt.substr(0,38)+"..."}(ie)+">, no stack trace)"}function vt(){return typeof Te=="function"}var xe=function(){return!1},le=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function qt(ee){var ie=ee.match(le);if(ie)return{fileName:ie[1],line:parseInt(ie[2],10)}}function we(ee){this._parent=ee,this._promisesCreated=0;var ie=this._length=1+(ee===void 0?0:ee._length);Te(this,we),ie>32&&this.uncycle()}N.inherits(we,Error),p.CapturedTrace=we,we.prototype.uncycle=function(){var ee=this._length;if(!(ee<2)){for(var ie=[],tt={},ae=0,de=this;de!==void 0;++ae)ie.push(de),de=de._parent;for(ae=(ee=this._length=ae)-1;ae>=0;--ae){var Ze=ie[ae].stack;tt[Ze]===void 0&&(tt[Ze]=ae)}for(ae=0;ae<ee;++ae){var he=tt[ie[ae].stack];if(he!==void 0&&he!==ae){he>0&&(ie[he-1]._parent=void 0,ie[he-1]._length=1),ie[ae]._parent=void 0,ie[ae]._length=1;var Se=ae>0?ie[ae-1]:this;he<ee-1?(Se._parent=ie[he+1],Se._parent.uncycle(),Se._length=Se._parent._length+1):(Se._parent=void 0,Se._length=1);for(var At=Se._length+1,_e=ae-2;_e>=0;--_e)ie[_e]._length=At,At++;return}}}},we.prototype.attachExtraTrace=function(ee){if(!ee.__stackCleaned__){this.uncycle();for(var ie=Q(ee),tt=ie.message,ae=[ie.stack],de=this;de!==void 0;)ae.push(X(de.stack.split(`
`))),de=de._parent;(function(Ze){for(var he=Ze[0],Se=1;Se<Ze.length;++Se){for(var At=Ze[Se],_e=he.length-1,Ie=he[_e],nr=-1,Ne=At.length-1;Ne>=0;--Ne)if(At[Ne]===Ie){nr=Ne;break}for(Ne=nr;Ne>=0;--Ne){var Re=At[Ne];if(he[_e]!==Re)break;he.pop(),_e--}he=At}})(ae),function(Ze){for(var he=0;he<Ze.length;++he)(Ze[he].length===0||he+1<Ze.length&&Ze[he][0]===Ze[he+1][0])&&(Ze.splice(he,1),he--)}(ae),N.notEnumerableProp(ee,"stack",function(Ze,he){for(var Se=0;Se<he.length-1;++Se)he[Se].push("From previous event:"),he[Se]=he[Se].join(`
`);return Se<he.length&&(he[Se]=he[Se].join(`
`)),Ze+`
`+he.join(`
`)}(tt,ae)),N.notEnumerableProp(ee,"__stackCleaned__",!0)}};var Te=function(){var ee=/^\s*at\s*/,ie=function(Ze,he){return typeof Ze=="string"?Ze:he.name!==void 0&&he.message!==void 0?he.toString():me(he)};if(typeof Error.stackTraceLimit=="number"&&typeof Error.captureStackTrace=="function"){Error.stackTraceLimit+=6,$=ee,G=ie;var tt=Error.captureStackTrace;return xe=function(Ze){return C.test(Ze)},function(Ze,he){Error.stackTraceLimit+=6,tt(Ze,he),Error.stackTraceLimit-=6}}var ae,de=new Error;if(typeof de.stack=="string"&&de.stack.split(`
`)[0].indexOf("stackDetection@")>=0)return $=/@/,G=ie,j=!0,function(Ze){Ze.stack=new Error().stack};try{throw new Error}catch(Ze){ae="stack"in Ze}return"stack"in de||!ae||typeof Error.stackTraceLimit!="number"?(G=function(Ze,he){return typeof Ze=="string"?Ze:typeof he!="object"&&typeof he!="function"||he.name===void 0||he.message===void 0?me(he):he.toString()},null):($=ee,G=ie,function(Ze){Error.stackTraceLimit+=6;try{throw new Error}catch(he){Ze.stack=he.stack}Error.stackTraceLimit-=6})}();typeof console!="undefined"&&console.warn!==void 0&&(S=function(ee){console.warn(ee)},N.isNode&&n.stderr.isTTY?S=function(ee,ie){var tt=ie?"\x1B[33m":"\x1B[31m";console.warn(tt+ee+`\x1B[0m
`)}:N.isNode||typeof new Error().stack!="string"||(S=function(ee,ie){console.warn("%c"+ee,ie?"color: darkorange":"color: red")}));var at={warnings:M,longStackTraces:!1,cancellation:!1,monitoring:!1};return f&&h.longStackTraces(),{longStackTraces:function(){return at.longStackTraces},warnings:function(){return at.warnings},cancellation:function(){return at.cancellation},monitoring:function(){return at.monitoring},propagateFromFunction:function(){return J},boundValueFunction:function(){return fe},checkForgottenReturns:function(ee,ie,tt,ae,de){if(ee===void 0&&ie!==null&&d){if(de!==void 0&&de._returnedNonUndefined()||(65535&ae._bitField)==0)return;tt&&(tt+=" ");var Ze="",he="";if(ie._trace){for(var Se=ie._trace.stack.split(`
`),At=X(Se),_e=At.length-1;_e>=0;--_e){var Ie=At[_e];if(!L.test(Ie)){var nr=Ie.match(z);nr&&(Ze="at "+nr[1]+":"+nr[2]+":"+nr[3]+" ");break}}if(At.length>0){var Ne=At[0];for(_e=0;_e<Se.length;++_e)if(Se[_e]===Ne){_e>0&&(he=`
`+Se[_e-1]);break}}}var Re="a promise was created in a "+tt+"handler "+Ze+"but was not returned from it, see http://goo.gl/rRqMUw"+he;ae._warn(Re,!0,ie)}},setBounds:function(ee,ie){if(vt()){for(var tt,ae,de=ee.stack.split(`
`),Ze=ie.stack.split(`
`),he=-1,Se=-1,At=0;At<de.length;++At)if(_e=qt(de[At])){tt=_e.fileName,he=_e.line;break}for(At=0;At<Ze.length;++At){var _e;if(_e=qt(Ze[At])){ae=_e.fileName,Se=_e.line;break}}he<0||Se<0||!tt||!ae||tt!==ae||he>=Se||(xe=function(Ie){if(C.test(Ie))return!0;var nr=qt(Ie);return!!(nr&&nr.fileName===tt&&he<=nr.line&&nr.line<=Se)})}},warn:Y,deprecated:function(ee,ie){var tt=ee+" is deprecated and will be removed in a future version.";return ie&&(tt+=" Use "+ie+" instead."),Y(tt)},CapturedTrace:we,fireDomEvent:m,fireGlobalEvent:b}}},{"./errors":12,"./util":36}],10:[function(o,u,l){"use strict";u.exports=function(h){function p(){return this.value}function v(){throw this.reason}h.prototype.return=h.prototype.thenReturn=function(y){return y instanceof h&&y.suppressUnhandledRejections(),this._then(p,void 0,void 0,{value:y},void 0)},h.prototype.throw=h.prototype.thenThrow=function(y){return this._then(v,void 0,void 0,{reason:y},void 0)},h.prototype.catchThrow=function(y){if(arguments.length<=1)return this._then(void 0,v,void 0,{reason:y},void 0);var S=arguments[1];return this.caught(y,function(){throw S})},h.prototype.catchReturn=function(y){if(arguments.length<=1)return y instanceof h&&y.suppressUnhandledRejections(),this._then(void 0,p,void 0,{value:y},void 0);var S=arguments[1];return S instanceof h&&S.suppressUnhandledRejections(),this.caught(y,function(){return S})}}},{}],11:[function(o,u,l){"use strict";u.exports=function(h,p){var v=h.reduce,y=h.all;function S(){return y(this)}h.prototype.each=function(A){return v(this,A,p,0)._then(S,void 0,void 0,this,void 0)},h.prototype.mapSeries=function(A){return v(this,A,p,p)},h.each=function(A,T){return v(A,T,p,0)._then(S,void 0,void 0,A,void 0)},h.mapSeries=function(A,T){return v(A,T,p,p)}}},{}],12:[function(o,u,l){"use strict";var h,p,v=o("./es5"),y=v.freeze,S=o("./util"),A=S.inherits,T=S.notEnumerableProp;function I(M,f){function d(g){if(!(this instanceof d))return new d(g);T(this,"message",typeof g=="string"?g:f),T(this,"name",M),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return A(d,Error),d}var N=I("Warning","warning"),D=I("CancellationError","cancellation error"),C=I("TimeoutError","timeout error"),L=I("AggregateError","aggregate error");try{h=TypeError,p=RangeError}catch{h=I("TypeError","type error"),p=I("RangeError","range error")}for(var z="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),$=0;$<z.length;++$)typeof Array.prototype[z[$]]=="function"&&(L.prototype[z[$]]=Array.prototype[z[$]]);v.defineProperty(L.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),L.prototype.isOperational=!0;var G=0;function j(M){if(!(this instanceof j))return new j(M);T(this,"name","OperationalError"),T(this,"message",M),this.cause=M,this.isOperational=!0,M instanceof Error?(T(this,"message",M.message),T(this,"stack",M.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}L.prototype.toString=function(){var M=Array(4*G+1).join(" "),f=`
`+M+`AggregateError of:
`;G++,M=Array(4*G+1).join(" ");for(var d=0;d<this.length;++d){for(var g=this[d]===this?"[Circular AggregateError]":this[d]+"",m=g.split(`
`),b=0;b<m.length;++b)m[b]=M+m[b];f+=(g=m.join(`
`))+`
`}return G--,f},A(j,Error);var K=Error.__BluebirdErrorTypes__;K||(K=y({CancellationError:D,TimeoutError:C,OperationalError:j,RejectionError:j,AggregateError:L}),v.defineProperty(Error,"__BluebirdErrorTypes__",{value:K,writable:!1,enumerable:!1,configurable:!1})),u.exports={Error,TypeError:h,RangeError:p,CancellationError:K.CancellationError,OperationalError:K.OperationalError,TimeoutError:K.TimeoutError,AggregateError:K.AggregateError,Warning:N}},{"./es5":13,"./util":36}],13:[function(o,u,l){var h=function(){"use strict";return this===void 0}();if(h)u.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:h,propertyIsWritable:function(A,T){var I=Object.getOwnPropertyDescriptor(A,T);return!(I&&!I.writable&&!I.set)}};else{var p={}.hasOwnProperty,v={}.toString,y={}.constructor.prototype,S=function(A){var T=[];for(var I in A)p.call(A,I)&&T.push(I);return T};u.exports={isArray:function(A){try{return v.call(A)==="[object Array]"}catch{return!1}},keys:S,names:S,defineProperty:function(A,T,I){return A[T]=I.value,A},getDescriptor:function(A,T){return{value:A[T]}},freeze:function(A){return A},getPrototypeOf:function(A){try{return Object(A).constructor.prototype}catch{return y}},isES5:h,propertyIsWritable:function(){return!0}}}},{}],14:[function(o,u,l){"use strict";u.exports=function(h,p){var v=h.map;h.prototype.filter=function(y,S){return v(this,y,S,p)},h.filter=function(y,S,A){return v(y,S,A,p)}}},{}],15:[function(o,u,l){"use strict";u.exports=function(h,p,v){var y=o("./util"),S=h.CancellationError,A=y.errorObj,T=o("./catch_filter")(v);function I($,G,j){this.promise=$,this.type=G,this.handler=j,this.called=!1,this.cancelPromise=null}function N($){this.finallyHandler=$}function D($,G){return $.cancelPromise!=null&&(arguments.length>1?$.cancelPromise._reject(G):$.cancelPromise._cancel(),$.cancelPromise=null,!0)}function C(){return z.call(this,this.promise._target()._settledValue())}function L($){if(!D(this,$))return A.e=$,A}function z($){var G=this.promise,j=this.handler;if(!this.called){this.called=!0;var K=this.isFinallyHandler()?j.call(G._boundValue()):j.call(G._boundValue(),$);if(K===v)return K;if(K!==void 0){G._setReturnedNonUndefined();var M=p(K,G);if(M instanceof h){if(this.cancelPromise!=null){if(M._isCancelled()){var f=new S("late cancellation observer");return G._attachExtraTrace(f),A.e=f,A}M.isPending()&&M._attachCancellationCallback(new N(this))}return M._then(C,L,void 0,this,void 0)}}}return G.isRejected()?(D(this),A.e=$,A):(D(this),$)}return I.prototype.isFinallyHandler=function(){return this.type===0},N.prototype._resultCancelled=function(){D(this.finallyHandler)},h.prototype._passThrough=function($,G,j,K){return typeof $!="function"?this.then():this._then(j,K,void 0,new I(this,G,$),void 0)},h.prototype.lastly=h.prototype.finally=function($){return this._passThrough($,0,z,z)},h.prototype.tap=function($){return this._passThrough($,1,z)},h.prototype.tapCatch=function($){var G=arguments.length;if(G===1)return this._passThrough($,1,void 0,z);var j,K=new Array(G-1),M=0;for(j=0;j<G-1;++j){var f=arguments[j];if(!y.isObject(f))return h.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+y.classString(f)));K[M++]=f}K.length=M;var d=arguments[j];return this._passThrough(T(K,d,this),1,void 0,z)},I}},{"./catch_filter":7,"./util":36}],16:[function(o,u,l){"use strict";u.exports=function(h,p,v,y,S,A){var T=o("./errors").TypeError,I=o("./util"),N=I.errorObj,D=I.tryCatch,C=[];function L(z,$,G,j){if(A.cancellation()){var K=new h(v),M=this._finallyPromise=new h(v);this._promise=K.lastly(function(){return M}),K._captureStackTrace(),K._setOnCancel(this)}else(this._promise=new h(v))._captureStackTrace();this._stack=j,this._generatorFunction=z,this._receiver=$,this._generator=void 0,this._yieldHandlers=typeof G=="function"?[G].concat(C):C,this._yieldedPromise=null,this._cancellationPhase=!1}I.inherits(L,S),L.prototype._isResolved=function(){return this._promise===null},L.prototype._cleanup=function(){this._promise=this._generator=null,A.cancellation()&&this._finallyPromise!==null&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},L.prototype._promiseCancelled=function(){if(!this._isResolved()){var z;if(this._generator.return!==void 0)this._promise._pushContext(),z=D(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var $=new h.CancellationError("generator .return() sentinel");h.coroutine.returnSentinel=$,this._promise._attachExtraTrace($),this._promise._pushContext(),z=D(this._generator.throw).call(this._generator,$),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(z)}},L.prototype._promiseFulfilled=function(z){this._yieldedPromise=null,this._promise._pushContext();var $=D(this._generator.next).call(this._generator,z);this._promise._popContext(),this._continue($)},L.prototype._promiseRejected=function(z){this._yieldedPromise=null,this._promise._attachExtraTrace(z),this._promise._pushContext();var $=D(this._generator.throw).call(this._generator,z);this._promise._popContext(),this._continue($)},L.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof h){var z=this._yieldedPromise;this._yieldedPromise=null,z.cancel()}},L.prototype.promise=function(){return this._promise},L.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},L.prototype._continue=function(z){var $=this._promise;if(z===N)return this._cleanup(),this._cancellationPhase?$.cancel():$._rejectCallback(z.e,!1);var G=z.value;if(z.done===!0)return this._cleanup(),this._cancellationPhase?$.cancel():$._resolveCallback(G);var j=y(G,this._promise);if(j instanceof h||(j=function(M,f,d){for(var g=0;g<f.length;++g){d._pushContext();var m=D(f[g])(M);if(d._popContext(),m===N){d._pushContext();var b=h.reject(N.e);return d._popContext(),b}var E=y(m,d);if(E instanceof h)return E}return null}(j,this._yieldHandlers,this._promise))!==null){var K=(j=j._target())._bitField;(50397184&K)==0?(this._yieldedPromise=j,j._proxy(this,null)):(33554432&K)!=0?h._async.invoke(this._promiseFulfilled,this,j._value()):(16777216&K)!=0?h._async.invoke(this._promiseRejected,this,j._reason()):this._promiseCancelled()}else this._promiseRejected(new T(`A value %s was yielded that could not be treated as a promise

    See http://goo.gl/MqrFmX

`.replace("%s",String(G))+`From coroutine:
`+this._stack.split(`
`).slice(1,-7).join(`
`)))},h.coroutine=function(z,$){if(typeof z!="function")throw new T(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var G=Object($).yieldHandler,j=L,K=new Error().stack;return function(){var M=z.apply(this,arguments),f=new j(void 0,void 0,G,K),d=f.promise();return f._generator=M,f._promiseFulfilled(void 0),d}},h.coroutine.addYieldHandler=function(z){if(typeof z!="function")throw new T("expecting a function but got "+I.classString(z));C.push(z)},h.spawn=function(z){if(A.deprecated("Promise.spawn()","Promise.coroutine()"),typeof z!="function")return p(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var $=new L(z,this),G=$.promise();return $._run(h.spawn),G}}},{"./errors":12,"./util":36}],17:[function(o,u,l){"use strict";u.exports=function(h,p,v,y,S,A){var T=o("./util");T.canEvaluate,T.tryCatch,T.errorObj,h.join=function(){var I,N=arguments.length-1;N>0&&typeof arguments[N]=="function"&&(I=arguments[N]);var D=[].slice.call(arguments);I&&D.pop();var C=new p(D).promise();return I!==void 0?C.spread(I):C}}},{"./util":36}],18:[function(o,u,l){"use strict";u.exports=function(h,p,v,y,S,A){var T=h._getDomain,I=o("./util"),N=I.tryCatch,D=I.errorObj,C=h._async;function L($,G,j,K){this.constructor$($),this._promise._captureStackTrace();var M=T();this._callback=M===null?G:I.domainBind(M,G),this._preservedValues=K===S?new Array(this.length()):null,this._limit=j,this._inFlight=0,this._queue=[],C.invoke(this._asyncInit,this,void 0)}function z($,G,j,K){if(typeof G!="function")return v("expecting a function but got "+I.classString(G));var M=0;if(j!==void 0){if(typeof j!="object"||j===null)return h.reject(new TypeError("options argument must be an object but it is "+I.classString(j)));if(typeof j.concurrency!="number")return h.reject(new TypeError("'concurrency' must be a number but it is "+I.classString(j.concurrency)));M=j.concurrency}return new L($,G,M=typeof M=="number"&&isFinite(M)&&M>=1?M:0,K).promise()}I.inherits(L,p),L.prototype._asyncInit=function(){this._init$(void 0,-2)},L.prototype._init=function(){},L.prototype._promiseFulfilled=function($,G){var j=this._values,K=this.length(),M=this._preservedValues,f=this._limit;if(G<0){if(j[G=-1*G-1]=$,f>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(f>=1&&this._inFlight>=f)return j[G]=$,this._queue.push(G),!1;M!==null&&(M[G]=$);var d=this._promise,g=this._callback,m=d._boundValue();d._pushContext();var b=N(g).call(m,$,G,K),E=d._popContext();if(A.checkForgottenReturns(b,E,M!==null?"Promise.filter":"Promise.map",d),b===D)return this._reject(b.e),!0;var k=y(b,this._promise);if(k instanceof h){var w=(k=k._target())._bitField;if((50397184&w)==0)return f>=1&&this._inFlight++,j[G]=k,k._proxy(this,-1*(G+1)),!1;if((33554432&w)==0)return(16777216&w)!=0?(this._reject(k._reason()),!0):(this._cancel(),!0);b=k._value()}j[G]=b}return++this._totalResolved>=K&&(M!==null?this._filter(j,M):this._resolve(j),!0)},L.prototype._drainQueue=function(){for(var $=this._queue,G=this._limit,j=this._values;$.length>0&&this._inFlight<G;){if(this._isResolved())return;var K=$.pop();this._promiseFulfilled(j[K],K)}},L.prototype._filter=function($,G){for(var j=G.length,K=new Array(j),M=0,f=0;f<j;++f)$[f]&&(K[M++]=G[f]);K.length=M,this._resolve(K)},L.prototype.preservedValues=function(){return this._preservedValues},h.prototype.map=function($,G){return z(this,$,G,null)},h.map=function($,G,j,K){return z($,G,j,K)}}},{"./util":36}],19:[function(o,u,l){"use strict";u.exports=function(h,p,v,y,S){var A=o("./util"),T=A.tryCatch;h.method=function(I){if(typeof I!="function")throw new h.TypeError("expecting a function but got "+A.classString(I));return function(){var N=new h(p);N._captureStackTrace(),N._pushContext();var D=T(I).apply(this,arguments),C=N._popContext();return S.checkForgottenReturns(D,C,"Promise.method",N),N._resolveFromSyncValue(D),N}},h.attempt=h.try=function(I){if(typeof I!="function")return y("expecting a function but got "+A.classString(I));var N,D=new h(p);if(D._captureStackTrace(),D._pushContext(),arguments.length>1){S.deprecated("calling Promise.try with more than 1 argument");var C=arguments[1],L=arguments[2];N=A.isArray(C)?T(I).apply(L,C):T(I).call(L,C)}else N=T(I)();var z=D._popContext();return S.checkForgottenReturns(N,z,"Promise.try",D),D._resolveFromSyncValue(N),D},h.prototype._resolveFromSyncValue=function(I){I===A.errorObj?this._rejectCallback(I.e,!1):this._resolveCallback(I,!0)}}},{"./util":36}],20:[function(o,u,l){"use strict";var h=o("./util"),p=h.maybeWrapAsError,v=o("./errors").OperationalError,y=o("./es5"),S=/^(?:name|message|stack|cause)$/;function A(T){var I;if(function(L){return L instanceof Error&&y.getPrototypeOf(L)===Error.prototype}(T)){(I=new v(T)).name=T.name,I.message=T.message,I.stack=T.stack;for(var N=y.keys(T),D=0;D<N.length;++D){var C=N[D];S.test(C)||(I[C]=T[C])}return I}return h.markAsOriginatingFromRejection(T),T}u.exports=function(T,I){return function(N,D){if(T!==null){if(N){var C=A(p(N));T._attachExtraTrace(C),T._reject(C)}else if(I){var L=[].slice.call(arguments,1);T._fulfill(L)}else T._fulfill(D);T=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(o,u,l){"use strict";u.exports=function(h){var p=o("./util"),v=h._async,y=p.tryCatch,S=p.errorObj;function A(N,D){if(!p.isArray(N))return T.call(this,N,D);var C=y(D).apply(this._boundValue(),[null].concat(N));C===S&&v.throwLater(C.e)}function T(N,D){var C=this._boundValue(),L=N===void 0?y(D).call(C,null):y(D).call(C,null,N);L===S&&v.throwLater(L.e)}function I(N,D){if(!N){var C=new Error(N+"");C.cause=N,N=C}var L=y(D).call(this._boundValue(),N);L===S&&v.throwLater(L.e)}h.prototype.asCallback=h.prototype.nodeify=function(N,D){if(typeof N=="function"){var C=T;D!==void 0&&Object(D).spread&&(C=A),this._then(C,I,void 0,this,N)}return this}}},{"./util":36}],22:[function(o,u,l){"use strict";u.exports=function(){var h=function(){return new L(`circular promise resolution chain

    See http://goo.gl/MqrFmX
`)},p=function(){return new c.PromiseInspection(this._target())},v=function(F){return c.reject(new L(F))};function y(){}var S,A={},T=o("./util");S=T.isNode?function(){var F=n.domain;return F===void 0&&(F=null),F}:function(){return null},T.notEnumerableProp(c,"_getDomain",S);var I=o("./es5"),N=o("./async"),D=new N;I.defineProperty(c,"_async",{value:D});var C=o("./errors"),L=c.TypeError=C.TypeError;c.RangeError=C.RangeError;var z=c.CancellationError=C.CancellationError;c.TimeoutError=C.TimeoutError,c.OperationalError=C.OperationalError,c.RejectionError=C.OperationalError,c.AggregateError=C.AggregateError;var $=function(){},G={},j={},K=o("./thenables")(c,$),M=o("./promise_array")(c,$,K,v,y),f=o("./context")(c),d=f.create,g=o("./debuggability")(c,f),m=(g.CapturedTrace,o("./finally")(c,K,j)),b=o("./catch_filter")(j),E=o("./nodeback"),k=T.errorObj,w=T.tryCatch;function c(F){F!==$&&function(U,H){if(U==null||U.constructor!==c)throw new L(`the promise constructor cannot be invoked directly

    See http://goo.gl/MqrFmX
`);if(typeof H!="function")throw new L("expecting a function but got "+T.classString(H))}(this,F),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(F),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function _(F){this.promise._resolveCallback(F)}function R(F){this.promise._rejectCallback(F,!1)}function O(F){var U=new c($);U._fulfillmentHandler0=F,U._rejectionHandler0=F,U._promise0=F,U._receiver0=F}return c.prototype.toString=function(){return"[object Promise]"},c.prototype.caught=c.prototype.catch=function(F){var U=arguments.length;if(U>1){var H,J=new Array(U-1),fe=0;for(H=0;H<U-1;++H){var B=arguments[H];if(!T.isObject(B))return v("Catch statement predicate: expecting an object but got "+T.classString(B));J[fe++]=B}return J.length=fe,F=arguments[H],this.then(void 0,b(J,F,this))}return this.then(void 0,F)},c.prototype.reflect=function(){return this._then(p,p,void 0,this,void 0)},c.prototype.then=function(F,U){if(g.warnings()&&arguments.length>0&&typeof F!="function"&&typeof U!="function"){var H=".then() only accepts functions but was passed: "+T.classString(F);arguments.length>1&&(H+=", "+T.classString(U)),this._warn(H)}return this._then(F,U,void 0,void 0,void 0)},c.prototype.done=function(F,U){this._then(F,U,void 0,void 0,void 0)._setIsFinal()},c.prototype.spread=function(F){return typeof F!="function"?v("expecting a function but got "+T.classString(F)):this.all()._then(F,void 0,void 0,G,void 0)},c.prototype.toJSON=function(){var F={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(F.fulfillmentValue=this.value(),F.isFulfilled=!0):this.isRejected()&&(F.rejectionReason=this.reason(),F.isRejected=!0),F},c.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new M(this).promise()},c.prototype.error=function(F){return this.caught(T.originatesFromRejection,F)},c.getNewLibraryCopy=u.exports,c.is=function(F){return F instanceof c},c.fromNode=c.fromCallback=function(F){var U=new c($);U._captureStackTrace();var H=arguments.length>1&&!!Object(arguments[1]).multiArgs,J=w(F)(E(U,H));return J===k&&U._rejectCallback(J.e,!0),U._isFateSealed()||U._setAsyncGuaranteed(),U},c.all=function(F){return new M(F).promise()},c.cast=function(F){var U=K(F);return U instanceof c||((U=new c($))._captureStackTrace(),U._setFulfilled(),U._rejectionHandler0=F),U},c.resolve=c.fulfilled=c.cast,c.reject=c.rejected=function(F){var U=new c($);return U._captureStackTrace(),U._rejectCallback(F,!0),U},c.setScheduler=function(F){if(typeof F!="function")throw new L("expecting a function but got "+T.classString(F));return D.setScheduler(F)},c.prototype._then=function(F,U,H,J,fe){var B=fe!==void 0,q=B?fe:new c($),Y=this._target(),X=Y._bitField;B||(q._propagateFrom(this,3),q._captureStackTrace(),J===void 0&&(2097152&this._bitField)!=0&&(J=(50397184&X)!=0?this._boundValue():Y===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,q));var Q=S();if((50397184&X)!=0){var be,ue,me=Y._settlePromiseCtx;(33554432&X)!=0?(ue=Y._rejectionHandler0,be=F):(16777216&X)!=0?(ue=Y._fulfillmentHandler0,be=U,Y._unsetRejectionIsUnhandled()):(me=Y._settlePromiseLateCancellationObserver,ue=new z("late cancellation observer"),Y._attachExtraTrace(ue),be=U),D.invoke(me,Y,{handler:Q===null?be:typeof be=="function"&&T.domainBind(Q,be),promise:q,receiver:J,value:ue})}else Y._addCallbacks(F,U,q,J,Q);return q},c.prototype._length=function(){return 65535&this._bitField},c.prototype._isFateSealed=function(){return(117506048&this._bitField)!=0},c.prototype._isFollowing=function(){return(67108864&this._bitField)==67108864},c.prototype._setLength=function(F){this._bitField=-65536&this._bitField|65535&F},c.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},c.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},c.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},c.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},c.prototype._isFinal=function(){return(4194304&this._bitField)>0},c.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},c.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},c.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},c.prototype._setAsyncGuaranteed=function(){D.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},c.prototype._receiverAt=function(F){var U=F===0?this._receiver0:this[4*F-4+3];if(U!==A)return U===void 0&&this._isBound()?this._boundValue():U},c.prototype._promiseAt=function(F){return this[4*F-4+2]},c.prototype._fulfillmentHandlerAt=function(F){return this[4*F-4+0]},c.prototype._rejectionHandlerAt=function(F){return this[4*F-4+1]},c.prototype._boundValue=function(){},c.prototype._migrateCallback0=function(F){F._bitField;var U=F._fulfillmentHandler0,H=F._rejectionHandler0,J=F._promise0,fe=F._receiverAt(0);fe===void 0&&(fe=A),this._addCallbacks(U,H,J,fe,null)},c.prototype._migrateCallbackAt=function(F,U){var H=F._fulfillmentHandlerAt(U),J=F._rejectionHandlerAt(U),fe=F._promiseAt(U),B=F._receiverAt(U);B===void 0&&(B=A),this._addCallbacks(H,J,fe,B,null)},c.prototype._addCallbacks=function(F,U,H,J,fe){var B=this._length();if(B>=65531&&(B=0,this._setLength(0)),B===0)this._promise0=H,this._receiver0=J,typeof F=="function"&&(this._fulfillmentHandler0=fe===null?F:T.domainBind(fe,F)),typeof U=="function"&&(this._rejectionHandler0=fe===null?U:T.domainBind(fe,U));else{var q=4*B-4;this[q+2]=H,this[q+3]=J,typeof F=="function"&&(this[q+0]=fe===null?F:T.domainBind(fe,F)),typeof U=="function"&&(this[q+1]=fe===null?U:T.domainBind(fe,U))}return this._setLength(B+1),B},c.prototype._proxy=function(F,U){this._addCallbacks(void 0,void 0,U,F,null)},c.prototype._resolveCallback=function(F,U){if((117506048&this._bitField)==0){if(F===this)return this._rejectCallback(h(),!1);var H=K(F,this);if(!(H instanceof c))return this._fulfill(F);U&&this._propagateFrom(H,2);var J=H._target();if(J!==this){var fe=J._bitField;if((50397184&fe)==0){var B=this._length();B>0&&J._migrateCallback0(this);for(var q=1;q<B;++q)J._migrateCallbackAt(this,q);this._setFollowing(),this._setLength(0),this._setFollowee(J)}else if((33554432&fe)!=0)this._fulfill(J._value());else if((16777216&fe)!=0)this._reject(J._reason());else{var Y=new z("late cancellation observer");J._attachExtraTrace(Y),this._reject(Y)}}else this._reject(h())}},c.prototype._rejectCallback=function(F,U,H){var J=T.ensureErrorObject(F),fe=J===F;if(!fe&&!H&&g.warnings()){var B="a promise was rejected with a non-error: "+T.classString(F);this._warn(B,!0)}this._attachExtraTrace(J,!!U&&fe),this._reject(F)},c.prototype._resolveFromExecutor=function(F){if(F!==$){var U=this;this._captureStackTrace(),this._pushContext();var H=!0,J=this._execute(F,function(fe){U._resolveCallback(fe)},function(fe){U._rejectCallback(fe,H)});H=!1,this._popContext(),J!==void 0&&U._rejectCallback(J,!0)}},c.prototype._settlePromiseFromHandler=function(F,U,H,J){var fe=J._bitField;if((65536&fe)==0){var B;J._pushContext(),U===G?H&&typeof H.length=="number"?B=w(F).apply(this._boundValue(),H):(B=k).e=new L("cannot .spread() a non-array: "+T.classString(H)):B=w(F).call(U,H);var q=J._popContext();(65536&(fe=J._bitField))==0&&(B===j?J._reject(H):B===k?J._rejectCallback(B.e,!1):(g.checkForgottenReturns(B,q,"",J,this),J._resolveCallback(B)))}},c.prototype._target=function(){for(var F=this;F._isFollowing();)F=F._followee();return F},c.prototype._followee=function(){return this._rejectionHandler0},c.prototype._setFollowee=function(F){this._rejectionHandler0=F},c.prototype._settlePromise=function(F,U,H,J){var fe=F instanceof c,B=this._bitField,q=(134217728&B)!=0;(65536&B)!=0?(fe&&F._invokeInternalOnCancel(),H instanceof m&&H.isFinallyHandler()?(H.cancelPromise=F,w(U).call(H,J)===k&&F._reject(k.e)):U===p?F._fulfill(p.call(H)):H instanceof y?H._promiseCancelled(F):fe||F instanceof M?F._cancel():H.cancel()):typeof U=="function"?fe?(q&&F._setAsyncGuaranteed(),this._settlePromiseFromHandler(U,H,J,F)):U.call(H,J,F):H instanceof y?H._isResolved()||((33554432&B)!=0?H._promiseFulfilled(J,F):H._promiseRejected(J,F)):fe&&(q&&F._setAsyncGuaranteed(),(33554432&B)!=0?F._fulfill(J):F._reject(J))},c.prototype._settlePromiseLateCancellationObserver=function(F){var U=F.handler,H=F.promise,J=F.receiver,fe=F.value;typeof U=="function"?H instanceof c?this._settlePromiseFromHandler(U,J,fe,H):U.call(J,fe,H):H instanceof c&&H._reject(fe)},c.prototype._settlePromiseCtx=function(F){this._settlePromise(F.promise,F.handler,F.receiver,F.value)},c.prototype._settlePromise0=function(F,U,H){var J=this._promise0,fe=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(J,F,fe,U)},c.prototype._clearCallbackDataAtIndex=function(F){var U=4*F-4;this[U+2]=this[U+3]=this[U+0]=this[U+1]=void 0},c.prototype._fulfill=function(F){var U=this._bitField;if(!((117506048&U)>>>16)){if(F===this){var H=h();return this._attachExtraTrace(H),this._reject(H)}this._setFulfilled(),this._rejectionHandler0=F,(65535&U)>0&&((134217728&U)!=0?this._settlePromises():D.settlePromises(this))}},c.prototype._reject=function(F){var U=this._bitField;if(!((117506048&U)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=F,this._isFinal())return D.fatalError(F,T.isNode);(65535&U)>0?D.settlePromises(this):this._ensurePossibleRejectionHandled()}},c.prototype._fulfillPromises=function(F,U){for(var H=1;H<F;H++){var J=this._fulfillmentHandlerAt(H),fe=this._promiseAt(H),B=this._receiverAt(H);this._clearCallbackDataAtIndex(H),this._settlePromise(fe,J,B,U)}},c.prototype._rejectPromises=function(F,U){for(var H=1;H<F;H++){var J=this._rejectionHandlerAt(H),fe=this._promiseAt(H),B=this._receiverAt(H);this._clearCallbackDataAtIndex(H),this._settlePromise(fe,J,B,U)}},c.prototype._settlePromises=function(){var F=this._bitField,U=65535&F;if(U>0){if((16842752&F)!=0){var H=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,H,F),this._rejectPromises(U,H)}else{var J=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,J,F),this._fulfillPromises(U,J)}this._setLength(0)}this._clearCancellationData()},c.prototype._settledValue=function(){var F=this._bitField;return(33554432&F)!=0?this._rejectionHandler0:(16777216&F)!=0?this._fulfillmentHandler0:void 0},c.defer=c.pending=function(){return g.deprecated("Promise.defer","new Promise"),{promise:new c($),resolve:_,reject:R}},T.notEnumerableProp(c,"_makeSelfResolutionError",h),o("./method")(c,$,K,v,g),o("./bind")(c,$,K,g),o("./cancel")(c,M,v,g),o("./direct_resolve")(c),o("./synchronous_inspection")(c),o("./join")(c,M,K,$,D,S),c.Promise=c,c.version="3.5.1",o("./map.js")(c,M,v,K,$,g),o("./call_get.js")(c),o("./using.js")(c,v,K,d,$,g),o("./timers.js")(c,$,g),o("./generators.js")(c,v,$,K,y,g),o("./nodeify.js")(c),o("./promisify.js")(c,$),o("./props.js")(c,M,K,v),o("./race.js")(c,$,K,v),o("./reduce.js")(c,M,v,K,$,g),o("./settle.js")(c,M,g),o("./some.js")(c,M,v),o("./filter.js")(c,$),o("./each.js")(c,$),o("./any.js")(c),T.toFastProperties(c),T.toFastProperties(c.prototype),O({a:1}),O({b:2}),O({c:3}),O(1),O(function(){}),O(void 0),O(!1),O(new c($)),g.setBounds(N.firstLineError,T.lastLineError),c}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(o,u,l){"use strict";u.exports=function(h,p,v,y,S){var A=o("./util");function T(I){var N=this._promise=new h(p);I instanceof h&&N._propagateFrom(I,3),N._setOnCancel(this),this._values=I,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return A.isArray,A.inherits(T,S),T.prototype.length=function(){return this._length},T.prototype.promise=function(){return this._promise},T.prototype._init=function I(N,D){var C=v(this._values,this._promise);if(C instanceof h){var L=(C=C._target())._bitField;if(this._values=C,(50397184&L)==0)return this._promise._setAsyncGuaranteed(),C._then(I,this._reject,void 0,this,D);if((33554432&L)==0)return(16777216&L)!=0?this._reject(C._reason()):this._cancel();C=C._value()}if((C=A.asArray(C))!==null)C.length!==0?this._iterate(C):D===-5?this._resolveEmptyArray():this._resolve(function($){switch(D){case-2:return[];case-3:return{};case-6:return new Map}}());else{var z=y("expecting an array or an iterable object but got "+A.classString(C)).reason();this._promise._rejectCallback(z,!1)}},T.prototype._iterate=function(I){var N=this.getActualLength(I.length);this._length=N,this._values=this.shouldCopyValues()?new Array(N):this._values;for(var D=this._promise,C=!1,L=null,z=0;z<N;++z){var $=v(I[z],D);L=$ instanceof h?($=$._target())._bitField:null,C?L!==null&&$.suppressUnhandledRejections():L!==null?(50397184&L)==0?($._proxy(this,z),this._values[z]=$):C=(33554432&L)!=0?this._promiseFulfilled($._value(),z):(16777216&L)!=0?this._promiseRejected($._reason(),z):this._promiseCancelled(z):C=this._promiseFulfilled($,z)}C||D._setAsyncGuaranteed()},T.prototype._isResolved=function(){return this._values===null},T.prototype._resolve=function(I){this._values=null,this._promise._fulfill(I)},T.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},T.prototype._reject=function(I){this._values=null,this._promise._rejectCallback(I,!1)},T.prototype._promiseFulfilled=function(I,N){return this._values[N]=I,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},T.prototype._promiseCancelled=function(){return this._cancel(),!0},T.prototype._promiseRejected=function(I){return this._totalResolved++,this._reject(I),!0},T.prototype._resultCancelled=function(){if(!this._isResolved()){var I=this._values;if(this._cancel(),I instanceof h)I.cancel();else for(var N=0;N<I.length;++N)I[N]instanceof h&&I[N].cancel()}},T.prototype.shouldCopyValues=function(){return!0},T.prototype.getActualLength=function(I){return I},T}},{"./util":36}],24:[function(o,u,l){"use strict";u.exports=function(h,p){var v={},y=o("./util"),S=o("./nodeback"),A=y.withAppended,T=y.maybeWrapAsError,I=y.canEvaluate,N=o("./errors").TypeError,D={__isPromisified__:!0},C=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),L=function(d){return y.isIdentifier(d)&&d.charAt(0)!=="_"&&d!=="constructor"};function z(d){return!C.test(d)}function $(d){try{return d.__isPromisified__===!0}catch{return!1}}function G(d,g,m){var b=y.getDataPropertyOrDefault(d,g+m,D);return!!b&&$(b)}function j(d,g,m,b){for(var E=y.inheritedDataKeys(d),k=[],w=0;w<E.length;++w){var c=E[w],_=d[c],R=b===L||L(c,_,d);typeof _!="function"||$(_)||G(d,c,g)||!b(c,_,d,R)||k.push(c,_)}return function(O,F,U){for(var H=0;H<O.length;H+=2){var J=O[H];if(U.test(J)){for(var fe=J.replace(U,""),B=0;B<O.length;B+=2)if(O[B]===fe)throw new N(`Cannot promisify an API that has normal methods with '%s'-suffix

    See http://goo.gl/MqrFmX
`.replace("%s",F))}}}(k,g,m),k}var K=function(d){return d.replace(/([$])/,"\\$")},M=I?void 0:function(d,g,m,b,E,k){var w=function(){return this}(),c=d;function _(){var R=g;g===v&&(R=this);var O=new h(p);O._captureStackTrace();var F=typeof c=="string"&&this!==w?this[c]:d,U=S(O,k);try{F.apply(R,A(arguments,U))}catch(H){O._rejectCallback(T(H),!0,!0)}return O._isFateSealed()||O._setAsyncGuaranteed(),O}return typeof c=="string"&&(d=b),y.notEnumerableProp(_,"__isPromisified__",!0),_};function f(d,g,m,b,E){for(var k=new RegExp(K(g)+"$"),w=j(d,g,k,m),c=0,_=w.length;c<_;c+=2){var R=w[c],O=w[c+1],F=R+g;if(b===M)d[F]=M(R,v,R,O,g,E);else{var U=b(O,function(){return M(R,v,R,O,g,E)});y.notEnumerableProp(U,"__isPromisified__",!0),d[F]=U}}return y.toFastProperties(d),d}h.promisify=function(d,g){if(typeof d!="function")throw new N("expecting a function but got "+y.classString(d));if($(d))return d;var m=(g=Object(g)).context===void 0?v:g.context,b=!!g.multiArgs,E=function(k,w,c){return M(k,w,void 0,k,null,b)}(d,m);return y.copyDescriptors(d,E,z),E},h.promisifyAll=function(d,g){if(typeof d!="function"&&typeof d!="object")throw new N(`the target of promisifyAll must be an object or a function

    See http://goo.gl/MqrFmX
`);var m=!!(g=Object(g)).multiArgs,b=g.suffix;typeof b!="string"&&(b="Async");var E=g.filter;typeof E!="function"&&(E=L);var k=g.promisifier;if(typeof k!="function"&&(k=M),!y.isIdentifier(b))throw new RangeError(`suffix must be a valid identifier

    See http://goo.gl/MqrFmX
`);for(var w=y.inheritedDataKeys(d),c=0;c<w.length;++c){var _=d[w[c]];w[c]!=="constructor"&&y.isClass(_)&&(f(_.prototype,b,E,k,m),f(_,b,E,k,m))}return f(d,b,E,k,m)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(o,u,l){"use strict";u.exports=function(h,p,v,y){var S,A=o("./util"),T=A.isObject,I=o("./es5");typeof Map=="function"&&(S=Map);var N=function(){var L=0,z=0;function $(G,j){this[L]=G,this[L+z]=j,L++}return function(G){z=G.size,L=0;var j=new Array(2*G.size);return G.forEach($,j),j}}();function D(L){var z,$=!1;if(S!==void 0&&L instanceof S)z=N(L),$=!0;else{var G=I.keys(L),j=G.length;z=new Array(2*j);for(var K=0;K<j;++K){var M=G[K];z[K]=L[M],z[K+j]=M}}this.constructor$(z),this._isMap=$,this._init$(void 0,$?-6:-3)}function C(L){var z,$=v(L);return T($)?(z=$ instanceof h?$._then(h.props,void 0,void 0,void 0,void 0):new D($).promise(),$ instanceof h&&z._propagateFrom($,2),z):y(`cannot await properties of a non-object

    See http://goo.gl/MqrFmX
`)}A.inherits(D,p),D.prototype._init=function(){},D.prototype._promiseFulfilled=function(L,z){if(this._values[z]=L,++this._totalResolved>=this._length){var $;if(this._isMap)$=function(M){for(var f=new S,d=M.length/2|0,g=0;g<d;++g){var m=M[d+g],b=M[g];f.set(m,b)}return f}(this._values);else{$={};for(var G=this.length(),j=0,K=this.length();j<K;++j)$[this._values[j+G]]=this._values[j]}return this._resolve($),!0}return!1},D.prototype.shouldCopyValues=function(){return!1},D.prototype.getActualLength=function(L){return L>>1},h.prototype.props=function(){return C(this)},h.props=function(L){return C(L)}}},{"./es5":13,"./util":36}],26:[function(o,u,l){"use strict";function h(p){this._capacity=p,this._length=0,this._front=0}h.prototype._willBeOverCapacity=function(p){return this._capacity<p},h.prototype._pushOne=function(p){var v=this.length();this._checkCapacity(v+1),this[this._front+v&this._capacity-1]=p,this._length=v+1},h.prototype.push=function(p,v,y){var S=this.length()+3;if(this._willBeOverCapacity(S))return this._pushOne(p),this._pushOne(v),void this._pushOne(y);var A=this._front+S-3;this._checkCapacity(S);var T=this._capacity-1;this[A+0&T]=p,this[A+1&T]=v,this[A+2&T]=y,this._length=S},h.prototype.shift=function(){var p=this._front,v=this[p];return this[p]=void 0,this._front=p+1&this._capacity-1,this._length--,v},h.prototype.length=function(){return this._length},h.prototype._checkCapacity=function(p){this._capacity<p&&this._resizeTo(this._capacity<<1)},h.prototype._resizeTo=function(p){var v=this._capacity;this._capacity=p,function(y,S,A,T,I){for(var N=0;N<I;++N)A[N+T]=y[N+0],y[N+0]=void 0}(this,0,this,v,this._front+this._length&v-1)},u.exports=h},{}],27:[function(o,u,l){"use strict";u.exports=function(h,p,v,y){var S=o("./util"),A=function(I){return I.then(function(N){return T(N,I)})};function T(I,N){var D=v(I);if(D instanceof h)return A(D);if((I=S.asArray(I))===null)return y("expecting an array or an iterable object but got "+S.classString(I));var C=new h(p);N!==void 0&&C._propagateFrom(N,3);for(var L=C._fulfill,z=C._reject,$=0,G=I.length;$<G;++$){var j=I[$];(j!==void 0||$ in I)&&h.cast(j)._then(L,z,void 0,C,null)}return C}h.race=function(I){return T(I,void 0)},h.prototype.race=function(){return T(this,void 0)}}},{"./util":36}],28:[function(o,u,l){"use strict";u.exports=function(h,p,v,y,S,A){var T=h._getDomain,I=o("./util"),N=I.tryCatch;function D(G,j,K,M){this.constructor$(G);var f=T();this._fn=f===null?j:I.domainBind(f,j),K!==void 0&&(K=h.resolve(K))._attachCancellationCallback(this),this._initialValue=K,this._currentCancellable=null,this._eachValues=M===S?Array(this._length):M===0?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function C(G,j){this.isFulfilled()?j._resolve(G):j._reject(G)}function L(G,j,K,M){return typeof j!="function"?v("expecting a function but got "+I.classString(j)):new D(G,j,K,M).promise()}function z(G){this.accum=G,this.array._gotAccum(G);var j=y(this.value,this.array._promise);return j instanceof h?(this.array._currentCancellable=j,j._then($,void 0,void 0,this,void 0)):$.call(this,j)}function $(G){var j,K=this.array,M=K._promise,f=N(K._fn);M._pushContext(),(j=K._eachValues!==void 0?f.call(M._boundValue(),G,this.index,this.length):f.call(M._boundValue(),this.accum,G,this.index,this.length))instanceof h&&(K._currentCancellable=j);var d=M._popContext();return A.checkForgottenReturns(j,d,K._eachValues!==void 0?"Promise.each":"Promise.reduce",M),j}I.inherits(D,p),D.prototype._gotAccum=function(G){this._eachValues!==void 0&&this._eachValues!==null&&G!==S&&this._eachValues.push(G)},D.prototype._eachComplete=function(G){return this._eachValues!==null&&this._eachValues.push(G),this._eachValues},D.prototype._init=function(){},D.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==void 0?this._eachValues:this._initialValue)},D.prototype.shouldCopyValues=function(){return!1},D.prototype._resolve=function(G){this._promise._resolveCallback(G),this._values=null},D.prototype._resultCancelled=function(G){if(G===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof h&&this._currentCancellable.cancel(),this._initialValue instanceof h&&this._initialValue.cancel())},D.prototype._iterate=function(G){var j,K;this._values=G;var M=G.length;if(this._initialValue!==void 0?(j=this._initialValue,K=0):(j=h.resolve(G[0]),K=1),this._currentCancellable=j,!j.isRejected())for(;K<M;++K){var f={accum:null,value:G[K],index:K,length:M,array:this};j=j._then(z,void 0,void 0,f,void 0)}this._eachValues!==void 0&&(j=j._then(this._eachComplete,void 0,void 0,this,void 0)),j._then(C,C,void 0,j,this)},h.prototype.reduce=function(G,j){return L(this,G,j,null)},h.reduce=function(G,j,K,M){return L(G,j,K,M)}}},{"./util":36}],29:[function(o,u,l){"use strict";var h,p=o("./util"),v=p.getNativePromise();if(p.isNode&&typeof MutationObserver=="undefined"){var y=a.setImmediate,S=n.nextTick;h=p.isRecentNode?function(T){y.call(a,T)}:function(T){S.call(n,T)}}else if(typeof v=="function"&&typeof v.resolve=="function"){var A=v.resolve();h=function(T){A.then(T)}}else h=typeof MutationObserver=="undefined"||typeof window!="undefined"&&window.navigator&&(window.navigator.standalone||window.cordova)?s!==void 0?function(T){s(T)}:typeof setTimeout!="undefined"?function(T){setTimeout(T,0)}:function(){throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)}:function(){var T=document.createElement("div"),I={attributes:!0},N=!1,D=document.createElement("div");return new MutationObserver(function(){T.classList.toggle("foo"),N=!1}).observe(D,I),function(C){var L=new MutationObserver(function(){L.disconnect(),C()});L.observe(T,I),N||(N=!0,D.classList.toggle("foo"))}}();u.exports=h},{"./util":36}],30:[function(o,u,l){"use strict";u.exports=function(h,p,v){var y=h.PromiseInspection;function S(A){this.constructor$(A)}o("./util").inherits(S,p),S.prototype._promiseResolved=function(A,T){return this._values[A]=T,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},S.prototype._promiseFulfilled=function(A,T){var I=new y;return I._bitField=33554432,I._settledValueField=A,this._promiseResolved(T,I)},S.prototype._promiseRejected=function(A,T){var I=new y;return I._bitField=16777216,I._settledValueField=A,this._promiseResolved(T,I)},h.settle=function(A){return v.deprecated(".settle()",".reflect()"),new S(A).promise()},h.prototype.settle=function(){return h.settle(this)}}},{"./util":36}],31:[function(o,u,l){"use strict";u.exports=function(h,p,v){var y=o("./util"),S=o("./errors").RangeError,A=o("./errors").AggregateError,T=y.isArray,I={};function N(C){this.constructor$(C),this._howMany=0,this._unwrap=!1,this._initialized=!1}function D(C,L){if((0|L)!==L||L<0)return v(`expecting a positive integer

    See http://goo.gl/MqrFmX
`);var z=new N(C),$=z.promise();return z.setHowMany(L),z.init(),$}y.inherits(N,p),N.prototype._init=function(){if(this._initialized)if(this._howMany!==0){this._init$(void 0,-5);var C=T(this._values);!this._isResolved()&&C&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},N.prototype.init=function(){this._initialized=!0,this._init()},N.prototype.setUnwrap=function(){this._unwrap=!0},N.prototype.howMany=function(){return this._howMany},N.prototype.setHowMany=function(C){this._howMany=C},N.prototype._promiseFulfilled=function(C){return this._addFulfilled(C),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),this.howMany()===1&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},N.prototype._promiseRejected=function(C){return this._addRejected(C),this._checkOutcome()},N.prototype._promiseCancelled=function(){return this._values instanceof h||this._values==null?this._cancel():(this._addRejected(I),this._checkOutcome())},N.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var C=new A,L=this.length();L<this._values.length;++L)this._values[L]!==I&&C.push(this._values[L]);return C.length>0?this._reject(C):this._cancel(),!0}return!1},N.prototype._fulfilled=function(){return this._totalResolved},N.prototype._rejected=function(){return this._values.length-this.length()},N.prototype._addRejected=function(C){this._values.push(C)},N.prototype._addFulfilled=function(C){this._values[this._totalResolved++]=C},N.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},N.prototype._getRangeError=function(C){var L="Input array must contain at least "+this._howMany+" items but contains only "+C+" items";return new S(L)},N.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},h.some=function(C,L){return D(C,L)},h.prototype.some=function(C){return D(this,C)},h._SomePromiseArray=N}},{"./errors":12,"./util":36}],32:[function(o,u,l){"use strict";u.exports=function(h){function p(N){N!==void 0?(N=N._target(),this._bitField=N._bitField,this._settledValueField=N._isFateSealed()?N._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}p.prototype._settledValue=function(){return this._settledValueField};var v=p.prototype.value=function(){if(!this.isFulfilled())throw new TypeError(`cannot get fulfillment value of a non-fulfilled promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},y=p.prototype.error=p.prototype.reason=function(){if(!this.isRejected())throw new TypeError(`cannot get rejection reason of a non-rejected promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},S=p.prototype.isFulfilled=function(){return(33554432&this._bitField)!=0},A=p.prototype.isRejected=function(){return(16777216&this._bitField)!=0},T=p.prototype.isPending=function(){return(50397184&this._bitField)==0},I=p.prototype.isResolved=function(){return(50331648&this._bitField)!=0};p.prototype.isCancelled=function(){return(8454144&this._bitField)!=0},h.prototype.__isCancelled=function(){return(65536&this._bitField)==65536},h.prototype._isCancelled=function(){return this._target().__isCancelled()},h.prototype.isCancelled=function(){return(8454144&this._target()._bitField)!=0},h.prototype.isPending=function(){return T.call(this._target())},h.prototype.isRejected=function(){return A.call(this._target())},h.prototype.isFulfilled=function(){return S.call(this._target())},h.prototype.isResolved=function(){return I.call(this._target())},h.prototype.value=function(){return v.call(this._target())},h.prototype.reason=function(){var N=this._target();return N._unsetRejectionIsUnhandled(),y.call(N)},h.prototype._value=function(){return this._settledValue()},h.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},h.PromiseInspection=p}},{}],33:[function(o,u,l){"use strict";u.exports=function(h,p){var v=o("./util"),y=v.errorObj,S=v.isObject,A={}.hasOwnProperty;return function(T,I){if(S(T)){if(T instanceof h)return T;var N=function(C){try{return function(L){return L.then}(C)}catch(L){return y.e=L,y}}(T);if(N===y){I&&I._pushContext();var D=h.reject(N.e);return I&&I._popContext(),D}if(typeof N=="function")return function(C){try{return A.call(C,"_promise0")}catch{return!1}}(T)?(D=new h(p),T._then(D._fulfill,D._reject,void 0,D,null),D):function(C,L,z){var $=new h(p),G=$;z&&z._pushContext(),$._captureStackTrace(),z&&z._popContext();var j=!0,K=v.tryCatch(L).call(C,function(M){$&&($._resolveCallback(M),$=null)},function(M){$&&($._rejectCallback(M,j,!0),$=null)});return j=!1,$&&K===y&&($._rejectCallback(K.e,!0,!0),$=null),G}(T,N,I)}return T}}},{"./util":36}],34:[function(o,u,l){"use strict";u.exports=function(h,p,v){var y=o("./util"),S=h.TimeoutError;function A(C){this.handle=C}A.prototype._resultCancelled=function(){clearTimeout(this.handle)};var T=function(C){return I(+this).thenReturn(C)},I=h.delay=function(C,L){var z,$;return L!==void 0?(z=h.resolve(L)._then(T,null,null,C,void 0),v.cancellation()&&L instanceof h&&z._setOnCancel(L)):(z=new h(p),$=setTimeout(function(){z._fulfill()},+C),v.cancellation()&&z._setOnCancel(new A($)),z._captureStackTrace()),z._setAsyncGuaranteed(),z};function N(C){return clearTimeout(this.handle),C}function D(C){throw clearTimeout(this.handle),C}h.prototype.delay=function(C){return I(C,this)},h.prototype.timeout=function(C,L){var z,$;C=+C;var G=new A(setTimeout(function(){z.isPending()&&function(j,K,M){var f;f=typeof K!="string"?K instanceof Error?K:new S("operation timed out"):new S(K),y.markAsOriginatingFromRejection(f),j._attachExtraTrace(f),j._reject(f),M!=null&&M.cancel()}(z,L,$)},C));return v.cancellation()?($=this.then(),(z=$._then(N,D,void 0,G,void 0))._setOnCancel(G)):z=this._then(N,D,void 0,G,void 0),z}}},{"./util":36}],35:[function(o,u,l){"use strict";u.exports=function(h,p,v,y,S,A){var T=o("./util"),I=o("./errors").TypeError,N=o("./util").inherits,D=T.errorObj,C=T.tryCatch,L={};function z(f){setTimeout(function(){throw f},0)}function $(f,d){var g=0,m=f.length,b=new h(S);return function E(){if(g>=m)return b._fulfill();var k=function(w){var c=v(w);return c!==w&&typeof w._isDisposable=="function"&&typeof w._getDisposer=="function"&&w._isDisposable()&&c._setDisposable(w._getDisposer()),c}(f[g++]);if(k instanceof h&&k._isDisposable()){try{k=v(k._getDisposer().tryDispose(d),f.promise)}catch(w){return z(w)}if(k instanceof h)return k._then(E,z,null,null,null)}E()}(),b}function G(f,d,g){this._data=f,this._promise=d,this._context=g}function j(f,d,g){this.constructor$(f,d,g)}function K(f){return G.isDisposer(f)?(this.resources[this.index]._setDisposable(f),f.promise()):f}function M(f){this.length=f,this.promise=null,this[f-1]=null}G.prototype.data=function(){return this._data},G.prototype.promise=function(){return this._promise},G.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():L},G.prototype.tryDispose=function(f){var d=this.resource(),g=this._context;g!==void 0&&g._pushContext();var m=d!==L?this.doDispose(d,f):null;return g!==void 0&&g._popContext(),this._promise._unsetDisposable(),this._data=null,m},G.isDisposer=function(f){return f!=null&&typeof f.resource=="function"&&typeof f.tryDispose=="function"},N(j,G),j.prototype.doDispose=function(f,d){return this.data().call(f,f,d)},M.prototype._resultCancelled=function(){for(var f=this.length,d=0;d<f;++d){var g=this[d];g instanceof h&&g.cancel()}},h.using=function(){var f=arguments.length;if(f<2)return p("you must pass at least 2 arguments to Promise.using");var d,g=arguments[f-1];if(typeof g!="function")return p("expecting a function but got "+T.classString(g));var m=!0;f===2&&Array.isArray(arguments[0])?(f=(d=arguments[0]).length,m=!1):(d=arguments,f--);for(var b=new M(f),E=0;E<f;++E){var k=d[E];if(G.isDisposer(k)){var w=k;(k=k.promise())._setDisposable(w)}else{var c=v(k);c instanceof h&&(k=c._then(K,null,null,{resources:b,index:E},void 0))}b[E]=k}var _=new Array(b.length);for(E=0;E<_.length;++E)_[E]=h.resolve(b[E]).reflect();var R=h.all(_).then(function(F){for(var U=0;U<F.length;++U){var H=F[U];if(H.isRejected())return D.e=H.error(),D;if(!H.isFulfilled())return void R.cancel();F[U]=H.value()}O._pushContext(),g=C(g);var J=m?g.apply(void 0,F):g(F),fe=O._popContext();return A.checkForgottenReturns(J,fe,"Promise.using",O),J}),O=R.lastly(function(){var F=new h.PromiseInspection(R);return $(b,F)});return b.promise=O,O._setOnCancel(b),O},h.prototype._setDisposable=function(f){this._bitField=131072|this._bitField,this._disposer=f},h.prototype._isDisposable=function(){return(131072&this._bitField)>0},h.prototype._getDisposer=function(){return this._disposer},h.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},h.prototype.disposer=function(f){if(typeof f=="function")return new j(f,this,y());throw new I}}},{"./errors":12,"./util":36}],36:[function(o,u,l){"use strict";var h,p=o("./es5"),v=typeof navigator=="undefined",y={e:{}},S=typeof self!="undefined"?self:typeof window!="undefined"?window:a!==void 0?a:this!==void 0?this:null;function A(){try{var m=h;return h=null,m.apply(this,arguments)}catch(b){return y.e=b,y}}function T(m){return m==null||m===!0||m===!1||typeof m=="string"||typeof m=="number"}function I(m,b,E){if(T(m))return m;var k={value:E,configurable:!0,enumerable:!1,writable:!0};return p.defineProperty(m,b,k),m}var N=function(){var m=[Array.prototype,Object.prototype,Function.prototype],b=function(w){for(var c=0;c<m.length;++c)if(m[c]===w)return!0;return!1};if(p.isES5){var E=Object.getOwnPropertyNames;return function(w){for(var c=[],_=Object.create(null);w!=null&&!b(w);){var R;try{R=E(w)}catch{return c}for(var O=0;O<R.length;++O){var F=R[O];if(!_[F]){_[F]=!0;var U=Object.getOwnPropertyDescriptor(w,F);U!=null&&U.get==null&&U.set==null&&c.push(F)}}w=p.getPrototypeOf(w)}return c}}var k={}.hasOwnProperty;return function(w){if(b(w))return[];var c=[];e:for(var _ in w)if(k.call(w,_))c.push(_);else{for(var R=0;R<m.length;++R)if(k.call(m[R],_))continue e;c.push(_)}return c}}(),D=/this\s*\.\s*\S+\s*=/,C=/^[a-z$_][a-z$_0-9]*$/i;function L(m){try{return m+""}catch{return"[no string representation]"}}function z(m){return m instanceof Error||m!==null&&typeof m=="object"&&typeof m.message=="string"&&typeof m.name=="string"}function $(m){return z(m)&&p.propertyIsWritable(m,"stack")}var G="stack"in new Error?function(m){return $(m)?m:new Error(L(m))}:function(m){if($(m))return m;try{throw new Error(L(m))}catch(b){return b}};function j(m){return{}.toString.call(m)}var K=function(m){return p.isArray(m)?m:null};if(typeof Symbol!="undefined"&&Symbol.iterator){var M=typeof Array.from=="function"?function(m){return Array.from(m)}:function(m){for(var b,E=[],k=m[Symbol.iterator]();!(b=k.next()).done;)E.push(b.value);return E};K=function(m){return p.isArray(m)?m:m!=null&&typeof m[Symbol.iterator]=="function"?M(m):null}}var f=n!==void 0&&j(n).toLowerCase()==="[object process]",d=n!==void 0&&n.env!==void 0,g={isClass:function(m){try{if(typeof m=="function"){var b=p.names(m.prototype),E=p.isES5&&b.length>1,k=b.length>0&&!(b.length===1&&b[0]==="constructor"),w=D.test(m+"")&&p.names(m).length>0;if(E||k||w)return!0}return!1}catch{return!1}},isIdentifier:function(m){return C.test(m)},inheritedDataKeys:N,getDataPropertyOrDefault:function(m,b,E){if(!p.isES5)return{}.hasOwnProperty.call(m,b)?m[b]:void 0;var k=Object.getOwnPropertyDescriptor(m,b);return k!=null?k.get==null&&k.set==null?k.value:E:void 0},thrower:function(m){throw m},isArray:p.isArray,asArray:K,notEnumerableProp:I,isPrimitive:T,isObject:function(m){return typeof m=="function"||typeof m=="object"&&m!==null},isError:z,canEvaluate:v,errorObj:y,tryCatch:function(m){return h=m,A},inherits:function(m,b){var E={}.hasOwnProperty;function k(){for(var w in this.constructor=m,this.constructor$=b,b.prototype)E.call(b.prototype,w)&&w.charAt(w.length-1)!=="$"&&(this[w+"$"]=b.prototype[w])}return k.prototype=b.prototype,m.prototype=new k,m.prototype},withAppended:function(m,b){var E,k=m.length,w=new Array(k+1);for(E=0;E<k;++E)w[E]=m[E];return w[E]=b,w},maybeWrapAsError:function(m){return T(m)?new Error(L(m)):m},toFastProperties:function(m){function b(){}b.prototype=m;for(var E=8;E--;)new b;return m},filledRange:function(m,b,E){for(var k=new Array(m),w=0;w<m;++w)k[w]=b+w+E;return k},toString:L,canAttachTrace:$,ensureErrorObject:G,originatesFromRejection:function(m){return m!=null&&(m instanceof Error.__BluebirdErrorTypes__.OperationalError||m.isOperational===!0)},markAsOriginatingFromRejection:function(m){try{I(m,"isOperational",!0)}catch{}},classString:j,copyDescriptors:function(m,b,E){for(var k=p.names(m),w=0;w<k.length;++w){var c=k[w];if(E(c))try{p.defineProperty(b,c,p.getDescriptor(m,c))}catch{}}},hasDevTools:typeof chrome!="undefined"&&chrome&&typeof chrome.loadTimes=="function",isNode:f,hasEnvVariables:d,env:function(m){return d?n.env[m]:void 0},global:S,getNativePromise:function(){if(typeof Promise=="function")try{var m=new Promise(function(){});if({}.toString.call(m)==="[object Promise]")return Promise}catch{}},domainBind:function(m,b){return m.bind(b)}};g.isRecentNode=g.isNode&&function(){var m=n.versions.node.split(".").map(Number);return m[0]===0&&m[1]>10||m[0]>0}(),g.isNode&&g.toFastProperties(n);try{throw new Error}catch(m){g.lastLineError=m}u.exports=g},{"./es5":13}]},{},[4])(4),typeof window!="undefined"&&window!==null?window.P=window.Promise:typeof self!="undefined"&&self!==null&&(self.P=self.Promise)}).call(this,r(4),r(0),r(11).setImmediate)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n,a){if(!a.eol&&n){for(var s=0,o=n.length;s<o;s++)if(n[s]==="\r"){if(n[s+1]===`
`){a.eol=`\r
`;break}if(n[s+1]){a.eol="\r";break}}else if(n[s]===`
`){a.eol=`
`;break}}return a.eol||`
`}},function(t,e,r){var n=r(65),a=r(73);t.exports=function(s,o){var u=a(s,o);return n(u)?u:void 0}},function(t,e,r){var n=r(19).Symbol;t.exports=n},function(t,e,r){var n=r(67),a=typeof self=="object"&&self&&self.Object===Object&&self,s=n||a||Function("return this")();t.exports=s},function(t,e){t.exports=function(r){var n=typeof r;return r!=null&&(n=="object"||n=="function")}},function(t,e){var r=Array.isArray;t.exports=r},function(t,e,r){var n=r(30),a=r(76);t.exports=function(s){return typeof s=="symbol"||a(s)&&n(s)=="[object Symbol]"}},function(t,e,r){"use strict";(function(n,a){var s=r(6);t.exports=L;var o,u=r(37);L.ReadableState=C,r(12).EventEmitter;var l=function(_,R){return _.listeners(R).length},h=r(24),p=r(7).Buffer,v=n.Uint8Array||function(){},y=r(5);y.inherits=r(2);var S=r(41),A=void 0;A=S&&S.debuglog?S.debuglog("stream"):function(){};var T,I=r(42),N=r(25);y.inherits(L,h);var D=["error","close","destroy","pause","resume"];function C(_,R){o=o||r(1),_=_||{};var O=R instanceof o;this.objectMode=!!_.objectMode,O&&(this.objectMode=this.objectMode||!!_.readableObjectMode);var F=_.highWaterMark,U=_.readableHighWaterMark,H=this.objectMode?16:16384;this.highWaterMark=F||F===0?F:O&&(U||U===0)?U:H,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new I,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=_.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,_.encoding&&(T||(T=r(26).StringDecoder),this.decoder=new T(_.encoding),this.encoding=_.encoding)}function L(_){if(o=o||r(1),!(this instanceof L))return new L(_);this._readableState=new C(_,this),this.readable=!0,_&&(typeof _.read=="function"&&(this._read=_.read),typeof _.destroy=="function"&&(this._destroy=_.destroy)),h.call(this)}function z(_,R,O,F,U){var H,J=_._readableState;return R===null?(J.reading=!1,function(fe,B){if(!B.ended){if(B.decoder){var q=B.decoder.end();q&&q.length&&(B.buffer.push(q),B.length+=B.objectMode?1:q.length)}B.ended=!0,K(fe)}}(_,J)):(U||(H=function(fe,B){var q;return function(Y){return p.isBuffer(Y)||Y instanceof v}(B)||typeof B=="string"||B===void 0||fe.objectMode||(q=new TypeError("Invalid non-string/buffer chunk")),q}(J,R)),H?_.emit("error",H):J.objectMode||R&&R.length>0?(typeof R=="string"||J.objectMode||Object.getPrototypeOf(R)===p.prototype||(R=function(fe){return p.from(fe)}(R)),F?J.endEmitted?_.emit("error",new Error("stream.unshift() after end event")):$(_,J,R,!0):J.ended?_.emit("error",new Error("stream.push() after EOF")):(J.reading=!1,J.decoder&&!O?(R=J.decoder.write(R),J.objectMode||R.length!==0?$(_,J,R,!1):f(_,J)):$(_,J,R,!1))):F||(J.reading=!1)),function(fe){return!fe.ended&&(fe.needReadable||fe.length<fe.highWaterMark||fe.length===0)}(J)}function $(_,R,O,F){R.flowing&&R.length===0&&!R.sync?(_.emit("data",O),_.read(0)):(R.length+=R.objectMode?1:O.length,F?R.buffer.unshift(O):R.buffer.push(O),R.needReadable&&K(_)),f(_,R)}Object.defineProperty(L.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(_){this._readableState&&(this._readableState.destroyed=_)}}),L.prototype.destroy=N.destroy,L.prototype._undestroy=N.undestroy,L.prototype._destroy=function(_,R){this.push(null),R(_)},L.prototype.push=function(_,R){var O,F=this._readableState;return F.objectMode?O=!0:typeof _=="string"&&((R=R||F.defaultEncoding)!==F.encoding&&(_=p.from(_,R),R=""),O=!0),z(this,_,R,!1,O)},L.prototype.unshift=function(_){return z(this,_,null,!0,!1)},L.prototype.isPaused=function(){return this._readableState.flowing===!1},L.prototype.setEncoding=function(_){return T||(T=r(26).StringDecoder),this._readableState.decoder=new T(_),this._readableState.encoding=_,this};var G=8388608;function j(_,R){return _<=0||R.length===0&&R.ended?0:R.objectMode?1:_!=_?R.flowing&&R.length?R.buffer.head.data.length:R.length:(_>R.highWaterMark&&(R.highWaterMark=function(O){return O>=G?O=G:(O--,O|=O>>>1,O|=O>>>2,O|=O>>>4,O|=O>>>8,O|=O>>>16,O++),O}(_)),_<=R.length?_:R.ended?R.length:(R.needReadable=!0,0))}function K(_){var R=_._readableState;R.needReadable=!1,R.emittedReadable||(A("emitReadable",R.flowing),R.emittedReadable=!0,R.sync?s.nextTick(M,_):M(_))}function M(_){A("emit readable"),_.emit("readable"),b(_)}function f(_,R){R.readingMore||(R.readingMore=!0,s.nextTick(d,_,R))}function d(_,R){for(var O=R.length;!R.reading&&!R.flowing&&!R.ended&&R.length<R.highWaterMark&&(A("maybeReadMore read 0"),_.read(0),O!==R.length);)O=R.length;R.readingMore=!1}function g(_){A("readable nexttick read 0"),_.read(0)}function m(_,R){R.reading||(A("resume read 0"),_.read(0)),R.resumeScheduled=!1,R.awaitDrain=0,_.emit("resume"),b(_),R.flowing&&!R.reading&&_.read(0)}function b(_){var R=_._readableState;for(A("flow",R.flowing);R.flowing&&_.read()!==null;);}function E(_,R){return R.length===0?null:(R.objectMode?O=R.buffer.shift():!_||_>=R.length?(O=R.decoder?R.buffer.join(""):R.buffer.length===1?R.buffer.head.data:R.buffer.concat(R.length),R.buffer.clear()):O=function(F,U,H){var J;return F<U.head.data.length?(J=U.head.data.slice(0,F),U.head.data=U.head.data.slice(F)):J=F===U.head.data.length?U.shift():H?function(fe,B){var q=B.head,Y=1,X=q.data;for(fe-=X.length;q=q.next;){var Q=q.data,be=fe>Q.length?Q.length:fe;if(be===Q.length?X+=Q:X+=Q.slice(0,fe),(fe-=be)==0){be===Q.length?(++Y,q.next?B.head=q.next:B.head=B.tail=null):(B.head=q,q.data=Q.slice(be));break}++Y}return B.length-=Y,X}(F,U):function(fe,B){var q=p.allocUnsafe(fe),Y=B.head,X=1;for(Y.data.copy(q),fe-=Y.data.length;Y=Y.next;){var Q=Y.data,be=fe>Q.length?Q.length:fe;if(Q.copy(q,q.length-fe,0,be),(fe-=be)==0){be===Q.length?(++X,Y.next?B.head=Y.next:B.head=B.tail=null):(B.head=Y,Y.data=Q.slice(be));break}++X}return B.length-=X,q}(F,U),J}(_,R.buffer,R.decoder),O);var O}function k(_){var R=_._readableState;if(R.length>0)throw new Error('"endReadable()" called on non-empty stream');R.endEmitted||(R.ended=!0,s.nextTick(w,R,_))}function w(_,R){_.endEmitted||_.length!==0||(_.endEmitted=!0,R.readable=!1,R.emit("end"))}function c(_,R){for(var O=0,F=_.length;O<F;O++)if(_[O]===R)return O;return-1}L.prototype.read=function(_){A("read",_),_=parseInt(_,10);var R=this._readableState,O=_;if(_!==0&&(R.emittedReadable=!1),_===0&&R.needReadable&&(R.length>=R.highWaterMark||R.ended))return A("read: emitReadable",R.length,R.ended),R.length===0&&R.ended?k(this):K(this),null;if((_=j(_,R))===0&&R.ended)return R.length===0&&k(this),null;var F,U=R.needReadable;return A("need readable",U),(R.length===0||R.length-_<R.highWaterMark)&&A("length less than watermark",U=!0),R.ended||R.reading?A("reading or ended",U=!1):U&&(A("do read"),R.reading=!0,R.sync=!0,R.length===0&&(R.needReadable=!0),this._read(R.highWaterMark),R.sync=!1,R.reading||(_=j(O,R))),(F=_>0?E(_,R):null)===null?(R.needReadable=!0,_=0):R.length-=_,R.length===0&&(R.ended||(R.needReadable=!0),O!==_&&R.ended&&k(this)),F!==null&&this.emit("data",F),F},L.prototype._read=function(_){this.emit("error",new Error("_read() is not implemented"))},L.prototype.pipe=function(_,R){var O=this,F=this._readableState;switch(F.pipesCount){case 0:F.pipes=_;break;case 1:F.pipes=[F.pipes,_];break;default:F.pipes.push(_)}F.pipesCount+=1,A("pipe count=%d opts=%j",F.pipesCount,R);var U=R&&R.end===!1||_===a.stdout||_===a.stderr?be:H;function H(){A("onend"),_.end()}F.endEmitted?s.nextTick(U):O.once("end",U),_.on("unpipe",function ue(me,vt){A("onunpipe"),me===O&&vt&&vt.hasUnpiped===!1&&(vt.hasUnpiped=!0,A("cleanup"),_.removeListener("close",X),_.removeListener("finish",Q),_.removeListener("drain",J),_.removeListener("error",Y),_.removeListener("unpipe",ue),O.removeListener("end",H),O.removeListener("end",be),O.removeListener("data",q),fe=!0,!F.awaitDrain||_._writableState&&!_._writableState.needDrain||J())});var J=function(ue){return function(){var me=ue._readableState;A("pipeOnDrain",me.awaitDrain),me.awaitDrain&&me.awaitDrain--,me.awaitDrain===0&&l(ue,"data")&&(me.flowing=!0,b(ue))}}(O);_.on("drain",J);var fe=!1,B=!1;function q(ue){A("ondata"),B=!1,_.write(ue)!==!1||B||((F.pipesCount===1&&F.pipes===_||F.pipesCount>1&&c(F.pipes,_)!==-1)&&!fe&&(A("false write response, pause",O._readableState.awaitDrain),O._readableState.awaitDrain++,B=!0),O.pause())}function Y(ue){A("onerror",ue),be(),_.removeListener("error",Y),l(_,"error")===0&&_.emit("error",ue)}function X(){_.removeListener("finish",Q),be()}function Q(){A("onfinish"),_.removeListener("close",X),be()}function be(){A("unpipe"),O.unpipe(_)}return O.on("data",q),function(ue,me,vt){if(typeof ue.prependListener=="function")return ue.prependListener(me,vt);ue._events&&ue._events[me]?u(ue._events[me])?ue._events[me].unshift(vt):ue._events[me]=[vt,ue._events[me]]:ue.on(me,vt)}(_,"error",Y),_.once("close",X),_.once("finish",Q),_.emit("pipe",O),F.flowing||(A("pipe resume"),O.resume()),_},L.prototype.unpipe=function(_){var R=this._readableState,O={hasUnpiped:!1};if(R.pipesCount===0)return this;if(R.pipesCount===1)return _&&_!==R.pipes?this:(_||(_=R.pipes),R.pipes=null,R.pipesCount=0,R.flowing=!1,_&&_.emit("unpipe",this,O),this);if(!_){var F=R.pipes,U=R.pipesCount;R.pipes=null,R.pipesCount=0,R.flowing=!1;for(var H=0;H<U;H++)F[H].emit("unpipe",this,O);return this}var J=c(R.pipes,_);return J===-1?this:(R.pipes.splice(J,1),R.pipesCount-=1,R.pipesCount===1&&(R.pipes=R.pipes[0]),_.emit("unpipe",this,O),this)},L.prototype.on=function(_,R){var O=h.prototype.on.call(this,_,R);if(_==="data")this._readableState.flowing!==!1&&this.resume();else if(_==="readable"){var F=this._readableState;F.endEmitted||F.readableListening||(F.readableListening=F.needReadable=!0,F.emittedReadable=!1,F.reading?F.length&&K(this):s.nextTick(g,this))}return O},L.prototype.addListener=L.prototype.on,L.prototype.resume=function(){var _=this._readableState;return _.flowing||(A("resume"),_.flowing=!0,function(R,O){O.resumeScheduled||(O.resumeScheduled=!0,s.nextTick(m,R,O))}(this,_)),this},L.prototype.pause=function(){return A("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(A("pause"),this._readableState.flowing=!1,this.emit("pause")),this},L.prototype.wrap=function(_){var R=this,O=this._readableState,F=!1;for(var U in _.on("end",function(){if(A("wrapped end"),O.decoder&&!O.ended){var J=O.decoder.end();J&&J.length&&R.push(J)}R.push(null)}),_.on("data",function(J){A("wrapped data"),O.decoder&&(J=O.decoder.write(J)),(!O.objectMode||J!=null)&&(O.objectMode||J&&J.length)&&(R.push(J)||(F=!0,_.pause()))}),_)this[U]===void 0&&typeof _[U]=="function"&&(this[U]=function(J){return function(){return _[J].apply(_,arguments)}}(U));for(var H=0;H<D.length;H++)_.on(D[H],this.emit.bind(this,D[H]));return this._read=function(J){A("wrapped _read",J),F&&(F=!1,_.resume())},this},Object.defineProperty(L.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),L._fromList=E}).call(this,r(0),r(4))},function(t,e,r){t.exports=r(12).EventEmitter},function(t,e,r){"use strict";var n=r(6);function a(s,o){s.emit("error",o)}t.exports={destroy:function(s,o){var u=this,l=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return l||h?(o?o(s):!s||this._writableState&&this._writableState.errorEmitted||n.nextTick(a,this,s),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(s||null,function(p){!o&&p?(n.nextTick(a,u,p),u._writableState&&(u._writableState.errorEmitted=!0)):o&&o(p)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,r){"use strict";var n=r(7).Buffer,a=n.isEncoding||function(A){switch((A=""+A)&&A.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(A){var T;switch(this.encoding=function(I){var N=function(D){if(!D)return"utf8";for(var C;;)switch(D){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return D;default:if(C)return;D=(""+D).toLowerCase(),C=!0}}(I);if(typeof N!="string"&&(n.isEncoding===a||!a(I)))throw new Error("Unknown encoding: "+I);return N||I}(A),this.encoding){case"utf16le":this.text=l,this.end=h,T=4;break;case"utf8":this.fillLast=u,T=4;break;case"base64":this.text=p,this.end=v,T=3;break;default:return this.write=y,void(this.end=S)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(T)}function o(A){return A<=127?0:A>>5==6?2:A>>4==14?3:A>>3==30?4:A>>6==2?-1:-2}function u(A){var T=this.lastTotal-this.lastNeed,I=function(N,D,C){if((192&D[0])!=128)return N.lastNeed=0,"\uFFFD";if(N.lastNeed>1&&D.length>1){if((192&D[1])!=128)return N.lastNeed=1,"\uFFFD";if(N.lastNeed>2&&D.length>2&&(192&D[2])!=128)return N.lastNeed=2,"\uFFFD"}}(this,A);return I!==void 0?I:this.lastNeed<=A.length?(A.copy(this.lastChar,T,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(A.copy(this.lastChar,T,0,A.length),void(this.lastNeed-=A.length))}function l(A,T){if((A.length-T)%2==0){var I=A.toString("utf16le",T);if(I){var N=I.charCodeAt(I.length-1);if(N>=55296&&N<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=A[A.length-2],this.lastChar[1]=A[A.length-1],I.slice(0,-1)}return I}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=A[A.length-1],A.toString("utf16le",T,A.length-1)}function h(A){var T=A&&A.length?this.write(A):"";if(this.lastNeed){var I=this.lastTotal-this.lastNeed;return T+this.lastChar.toString("utf16le",0,I)}return T}function p(A,T){var I=(A.length-T)%3;return I===0?A.toString("base64",T):(this.lastNeed=3-I,this.lastTotal=3,I===1?this.lastChar[0]=A[A.length-1]:(this.lastChar[0]=A[A.length-2],this.lastChar[1]=A[A.length-1]),A.toString("base64",T,A.length-I))}function v(A){var T=A&&A.length?this.write(A):"";return this.lastNeed?T+this.lastChar.toString("base64",0,3-this.lastNeed):T}function y(A){return A.toString(this.encoding)}function S(A){return A&&A.length?this.write(A):""}e.StringDecoder=s,s.prototype.write=function(A){if(A.length===0)return"";var T,I;if(this.lastNeed){if((T=this.fillLast(A))===void 0)return"";I=this.lastNeed,this.lastNeed=0}else I=0;return I<A.length?T?T+this.text(A,I):this.text(A,I):T||""},s.prototype.end=function(A){var T=A&&A.length?this.write(A):"";return this.lastNeed?T+"\uFFFD":T},s.prototype.text=function(A,T){var I=function(D,C,L){var z=C.length-1;if(z<L)return 0;var $=o(C[z]);return $>=0?($>0&&(D.lastNeed=$-1),$):--z<L||$===-2?0:($=o(C[z]))>=0?($>0&&(D.lastNeed=$-2),$):--z<L||$===-2?0:($=o(C[z]))>=0?($>0&&($===2?$=0:D.lastNeed=$-3),$):0}(this,A,T);if(!this.lastNeed)return A.toString("utf8",T);this.lastTotal=I;var N=A.length-(I-this.lastNeed);return A.copy(this.lastChar,0,N),A.toString("utf8",T,N)},s.prototype.fillLast=function(A){if(this.lastNeed<=A.length)return A.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);A.copy(this.lastChar,this.lastTotal-this.lastNeed,0,A.length),this.lastNeed-=A.length}},function(t,e,r){"use strict";t.exports=s;var n=r(1),a=r(5);function s(l){if(!(this instanceof s))return new s(l);n.call(this,l),this._transformState={afterTransform:function(h,p){var v=this._transformState;v.transforming=!1;var y=v.writecb;if(!y)return this.emit("error",new Error("write callback called multiple times"));v.writechunk=null,v.writecb=null,p!=null&&this.push(p),y(h);var S=this._readableState;S.reading=!1,(S.needReadable||S.length<S.highWaterMark)&&this._read(S.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,l&&(typeof l.transform=="function"&&(this._transform=l.transform),typeof l.flush=="function"&&(this._flush=l.flush)),this.on("prefinish",o)}function o(){var l=this;typeof this._flush=="function"?this._flush(function(h,p){u(l,h,p)}):u(this,null,null)}function u(l,h,p){if(h)return l.emit("error",h);if(p!=null&&l.push(p),l._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(l._transformState.transforming)throw new Error("Calling transform done when still transforming");return l.push(null)}a.inherits=r(2),a.inherits(s,n),s.prototype.push=function(l,h){return this._transformState.needTransform=!1,n.prototype.push.call(this,l,h)},s.prototype._transform=function(l,h,p){throw new Error("_transform() is not implemented")},s.prototype._write=function(l,h,p){var v=this._transformState;if(v.writecb=p,v.writechunk=l,v.writeencoding=h,!v.transforming){var y=this._readableState;(v.needTransform||y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}},s.prototype._read=function(l){var h=this._transformState;h.writechunk!==null&&h.writecb&&!h.transforming?(h.transforming=!0,this._transform(h.writechunk,h.writeencoding,h.afterTransform)):h.needTransform=!0},s.prototype._destroy=function(l,h){var p=this;n.prototype._destroy.call(this,l,function(v){h(v),p.emit("close")})}},function(t,e,r){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.bufFromString=function(a){var s=n.byteLength(a),o=n.allocUnsafe?n.allocUnsafe(s):new n(s);return o.write(a),o},e.emptyBuffer=function(){return n.allocUnsafe?n.allocUnsafe(0):new n(0)},e.filterArray=function(a,s){for(var o=[],u=0;u<a.length;u++)s.indexOf(u)>-1&&o.push(a[u]);return o},e.trimLeft=String.prototype.trimLeft?function(a){return a.trimLeft()}:function(a){return a.replace(/^\s+/,"")},e.trimRight=String.prototype.trimRight?function(a){return a.trimRight()}:function(a){return a.replace(/\s+$/,"")}}).call(this,r(3).Buffer)},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var l in u)u.hasOwnProperty(l)&&(o[l]=u[l])};return function(o,u){function l(){this.constructor=o}s(o,u),o.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=function(s){function o(u,l,h){var p=s.call(this,"Error: "+u+". JSON Line number: "+l+(h?" near: "+h:""))||this;return p.err=u,p.line=l,p.extra=h,p.name="CSV Parse Error",p}return n(o,s),o.column_mismatched=function(u,l){return new o("column_mismatched",u,l)},o.unclosed_quote=function(u,l){return new o("unclosed_quote",u,l)},o.fromJSON=function(u){return new o(u.err,u.line,u.extra)},o.prototype.toJSON=function(){return{err:this.err,line:this.line,extra:this.extra}},o}(Error);e.default=a},function(t,e,r){var n=r(18),a=r(68),s=r(69),o=n?n.toStringTag:void 0;t.exports=function(u){return u==null?u===void 0?"[object Undefined]":"[object Null]":o&&o in Object(u)?a(u):s(u)}},function(t,e){t.exports=function(r,n){return r===n||r!=r&&n!=n}},function(t,e,r){t.exports=r(33)},function(t,e,r){"use strict";var n=r(34),a=function(s,o){return new n.Converter(s,o)};a.csv=a,a.Converter=n.Converter,t.exports=a},function(t,e,r){"use strict";(function(n){var a=this&&this.__extends||function(){var S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,T){A.__proto__=T}||function(A,T){for(var I in T)T.hasOwnProperty(I)&&(A[I]=T[I])};return function(A,T){function I(){this.constructor=A}S(A,T),A.prototype=T===null?Object.create(T):(I.prototype=T.prototype,new I)}}(),s=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(36),u=r(50),l=r(51),h=s(r(15)),p=r(52),v=r(105),y=function(S){function A(T,I){I===void 0&&(I={});var N=S.call(this,I)||this;return N.options=I,N.params=u.mergeParams(T),N.runtime=l.initParseRuntime(N),N.result=new v.Result(N),N.processor=new p.ProcessorLocal(N),N.once("error",function(D){n(function(){N.result.processError(D),N.emit("done",D)})}),N.once("done",function(){N.processor.destroy()}),N}return a(A,S),A.prototype.preRawData=function(T){return this.runtime.preRawDataHook=T,this},A.prototype.preFileLine=function(T){return this.runtime.preFileLineHook=T,this},A.prototype.subscribe=function(T,I,N){return this.parseRuntime.subscribe={onNext:T,onError:I,onCompleted:N},this},A.prototype.fromFile=function(T,I){var N=this,D=r(!function(){var C=new Error("Cannot find module 'fs'");throw C.code="MODULE_NOT_FOUND",C}());return D.exists(T,function(C){C?D.createReadStream(T,I).pipe(N):N.emit("error",new Error("File does not exist. Check to make sure the file path to your csv is correct."))}),this},A.prototype.fromStream=function(T){return T.pipe(this),this},A.prototype.fromString=function(T){T.toString();var I=new o.Readable,N=0;return I._read=function(D){if(N>=T.length)this.push(null);else{var C=T.substr(N,D);this.push(C),N+=D}},this.fromStream(I)},A.prototype.then=function(T,I){var N=this;return new h.default(function(D,C){N.parseRuntime.then={onfulfilled:function(L){D(T?T(L):L)},onrejected:function(L){I?D(I(L)):C(L)}}})},Object.defineProperty(A.prototype,"parseParam",{get:function(){return this.params},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"parseRuntime",{get:function(){return this.runtime},enumerable:!0,configurable:!0}),A.prototype._transform=function(T,I,N){var D=this;this.processor.process(T).then(function(C){if(C.length>0)return D.runtime.started=!0,D.result.processResult(C)}).then(function(){D.emit("drained"),N()},function(C){D.runtime.hasError=!0,D.runtime.error=C,D.emit("error",C),N()})},A.prototype._flush=function(T){var I=this;this.processor.flush().then(function(N){if(N.length>0)return I.result.processResult(N)}).then(function(){I.processEnd(T)},function(N){I.emit("error",N),T()})},A.prototype.processEnd=function(T){this.result.endProcess(),this.emit("done"),T()},Object.defineProperty(A.prototype,"parsedLineNumber",{get:function(){return this.runtime.parsedLineNumber},enumerable:!0,configurable:!0}),A}(o.Transform);e.Converter=y}).call(this,r(11).setImmediate)},function(t,e,r){(function(n,a){(function(s,o){"use strict";if(!s.setImmediate){var u,l=1,h={},p=!1,v=s.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(s);y=y&&y.setTimeout?y:s,{}.toString.call(s.process)==="[object process]"?u=function(T){a.nextTick(function(){A(T)})}:function(){if(s.postMessage&&!s.importScripts){var T=!0,I=s.onmessage;return s.onmessage=function(){T=!1},s.postMessage("","*"),s.onmessage=I,T}}()?function(){var T="setImmediate$"+Math.random()+"$",I=function(N){N.source===s&&typeof N.data=="string"&&N.data.indexOf(T)===0&&A(+N.data.slice(T.length))};s.addEventListener?s.addEventListener("message",I,!1):s.attachEvent("onmessage",I),u=function(N){s.postMessage(T+N,"*")}}():s.MessageChannel?function(){var T=new MessageChannel;T.port1.onmessage=function(I){A(I.data)},u=function(I){T.port2.postMessage(I)}}():v&&"onreadystatechange"in v.createElement("script")?function(){var T=v.documentElement;u=function(I){var N=v.createElement("script");N.onreadystatechange=function(){A(I),N.onreadystatechange=null,T.removeChild(N),N=null},T.appendChild(N)}}():u=function(T){setTimeout(A,0,T)},y.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var I=new Array(arguments.length-1),N=0;N<I.length;N++)I[N]=arguments[N+1];var D={callback:T,args:I};return h[l]=D,u(l),l++},y.clearImmediate=S}function S(T){delete h[T]}function A(T){if(p)setTimeout(A,0,T);else{var I=h[T];if(I){p=!0;try{(function(N){var D=N.callback,C=N.args;switch(C.length){case 0:D();break;case 1:D(C[0]);break;case 2:D(C[0],C[1]);break;case 3:D(C[0],C[1],C[2]);break;default:D.apply(o,C)}})(I)}finally{S(T),p=!1}}}}})(typeof self=="undefined"?n===void 0?this:n:self)}).call(this,r(0),r(4))},function(t,e,r){t.exports=a;var n=r(12).EventEmitter;function a(){n.call(this)}r(2)(a,n),a.Readable=r(13),a.Writable=r(46),a.Duplex=r(47),a.Transform=r(48),a.PassThrough=r(49),a.Stream=a,a.prototype.pipe=function(s,o){var u=this;function l(T){s.writable&&s.write(T)===!1&&u.pause&&u.pause()}function h(){u.readable&&u.resume&&u.resume()}u.on("data",l),s.on("drain",h),s._isStdio||o&&o.end===!1||(u.on("end",v),u.on("close",y));var p=!1;function v(){p||(p=!0,s.end())}function y(){p||(p=!0,typeof s.destroy=="function"&&s.destroy())}function S(T){if(A(),n.listenerCount(this,"error")===0)throw T}function A(){u.removeListener("data",l),s.removeListener("drain",h),u.removeListener("end",v),u.removeListener("close",y),u.removeListener("error",S),s.removeListener("error",S),u.removeListener("end",A),u.removeListener("close",A),s.removeListener("close",A)}return u.on("error",S),s.on("error",S),u.on("end",A),u.on("close",A),s.on("close",A),s.emit("pipe",u),s}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(n){return r.call(n)=="[object Array]"}},function(t,e,r){"use strict";e.byteLength=function(y){var S=h(y),A=S[0],T=S[1];return 3*(A+T)/4-T},e.toByteArray=function(y){for(var S,A=h(y),T=A[0],I=A[1],N=new s(3*(T+I)/4-I),D=0,C=I>0?T-4:T,L=0;L<C;L+=4)S=a[y.charCodeAt(L)]<<18|a[y.charCodeAt(L+1)]<<12|a[y.charCodeAt(L+2)]<<6|a[y.charCodeAt(L+3)],N[D++]=S>>16&255,N[D++]=S>>8&255,N[D++]=255&S;return I===2&&(S=a[y.charCodeAt(L)]<<2|a[y.charCodeAt(L+1)]>>4,N[D++]=255&S),I===1&&(S=a[y.charCodeAt(L)]<<10|a[y.charCodeAt(L+1)]<<4|a[y.charCodeAt(L+2)]>>2,N[D++]=S>>8&255,N[D++]=255&S),N},e.fromByteArray=function(y){for(var S,A=y.length,T=A%3,I=[],N=0,D=A-T;N<D;N+=16383)I.push(v(y,N,N+16383>D?D:N+16383));return T===1?(S=y[A-1],I.push(n[S>>2]+n[S<<4&63]+"==")):T===2&&(S=(y[A-2]<<8)+y[A-1],I.push(n[S>>10]+n[S>>4&63]+n[S<<2&63]+"=")),I.join("")};for(var n=[],a=[],s=typeof Uint8Array!="undefined"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,l=o.length;u<l;++u)n[u]=o[u],a[o.charCodeAt(u)]=u;function h(y){var S=y.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var A=y.indexOf("=");return A===-1&&(A=S),[A,A===S?0:4-A%4]}function p(y){return n[y>>18&63]+n[y>>12&63]+n[y>>6&63]+n[63&y]}function v(y,S,A){for(var T,I=[],N=S;N<A;N+=3)T=(y[N]<<16&16711680)+(y[N+1]<<8&65280)+(255&y[N+2]),I.push(p(T));return I.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(t,e){e.read=function(r,n,a,s,o){var u,l,h=8*o-s-1,p=(1<<h)-1,v=p>>1,y=-7,S=a?o-1:0,A=a?-1:1,T=r[n+S];for(S+=A,u=T&(1<<-y)-1,T>>=-y,y+=h;y>0;u=256*u+r[n+S],S+=A,y-=8);for(l=u&(1<<-y)-1,u>>=-y,y+=s;y>0;l=256*l+r[n+S],S+=A,y-=8);if(u===0)u=1-v;else{if(u===p)return l?NaN:1/0*(T?-1:1);l+=Math.pow(2,s),u-=v}return(T?-1:1)*l*Math.pow(2,u-s)},e.write=function(r,n,a,s,o,u){var l,h,p,v=8*u-o-1,y=(1<<v)-1,S=y>>1,A=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=s?0:u-1,I=s?1:-1,N=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(h=isNaN(n)?1:0,l=y):(l=Math.floor(Math.log(n)/Math.LN2),n*(p=Math.pow(2,-l))<1&&(l--,p*=2),(n+=l+S>=1?A/p:A*Math.pow(2,1-S))*p>=2&&(l++,p/=2),l+S>=y?(h=0,l=y):l+S>=1?(h=(n*p-1)*Math.pow(2,o),l+=S):(h=n*Math.pow(2,S-1)*Math.pow(2,o),l=0));o>=8;r[a+T]=255&h,T+=I,h/=256,o-=8);for(l=l<<o|h,v+=o;v>0;r[a+T]=255&l,T+=I,l/=256,v-=8);r[a+T-I]|=128*N}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(n){return r.call(n)=="[object Array]"}},function(t,e){},function(t,e,r){"use strict";var n=r(7).Buffer,a=r(43);function s(o,u,l){o.copy(u,l)}t.exports=function(){function o(){(function(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.head=null,this.tail=null,this.length=0}return o.prototype.push=function(u){var l={data:u,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length},o.prototype.unshift=function(u){var l={data:u,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length},o.prototype.shift=function(){if(this.length!==0){var u=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,u}},o.prototype.clear=function(){this.head=this.tail=null,this.length=0},o.prototype.join=function(u){if(this.length===0)return"";for(var l=this.head,h=""+l.data;l=l.next;)h+=u+l.data;return h},o.prototype.concat=function(u){if(this.length===0)return n.alloc(0);if(this.length===1)return this.head.data;for(var l=n.allocUnsafe(u>>>0),h=this.head,p=0;h;)s(h.data,l,p),p+=h.data.length,h=h.next;return l},o}(),a&&a.inspect&&a.inspect.custom&&(t.exports.prototype[a.inspect.custom]=function(){var o=a.inspect({length:this.length});return this.constructor.name+" "+o})},function(t,e){},function(t,e,r){(function(n){function a(s){try{if(!n.localStorage)return!1}catch{return!1}var o=n.localStorage[s];return o!=null&&String(o).toLowerCase()==="true"}t.exports=function(s,o){if(a("noDeprecation"))return s;var u=!1;return function(){if(!u){if(a("throwDeprecation"))throw new Error(o);a("traceDeprecation")?console.trace(o):console.warn(o),u=!0}return s.apply(this,arguments)}}}).call(this,r(0))},function(t,e,r){"use strict";t.exports=s;var n=r(27),a=r(5);function s(o){if(!(this instanceof s))return new s(o);n.call(this,o)}a.inherits=r(2),a.inherits(s,n),s.prototype._transform=function(o,u,l){l(null,o)}},function(t,e,r){t.exports=r(14)},function(t,e,r){t.exports=r(1)},function(t,e,r){t.exports=r(13).Transform},function(t,e,r){t.exports=r(13).PassThrough},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeParams=function(n){var a={delimiter:",",ignoreColumns:void 0,includeColumns:void 0,quote:'"',trim:!0,checkType:!1,ignoreEmpty:!1,noheader:!1,headers:void 0,flatKeys:!1,maxRowLength:0,checkColumn:!1,escape:'"',colParser:{},eol:void 0,alwaysSplitAtEOL:!1,output:"json",nullObject:!1,downstreamFormat:"line",needEmitAll:!0};for(var s in n||(n={}),n)n.hasOwnProperty(s)&&(Array.isArray(n[s])?a[s]=[].concat(n[s]):a[s]=n[s]);return a}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initParseRuntime=function(n){var a=n.parseParam,s={needProcessIgnoreColumn:!1,needProcessIncludeColumn:!1,selectedColumns:void 0,ended:!1,hasError:!1,error:void 0,delimiter:n.parseParam.delimiter,eol:n.parseParam.eol,columnConv:[],headerType:[],headerTitle:[],headerFlag:[],headers:void 0,started:!1,parsedLineNumber:0,columnValueSetter:[]};return a.ignoreColumns&&(s.needProcessIgnoreColumn=!0),a.includeColumns&&(s.needProcessIncludeColumn=!0),s}},function(t,e,r){"use strict";(function(n){var a=this&&this.__extends||function(){var I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,D){N.__proto__=D}||function(N,D){for(var C in D)D.hasOwnProperty(C)&&(N[C]=D[C])};return function(N,D){function C(){this.constructor=N}I(N,D),N.prototype=D===null?Object.create(D):(C.prototype=D.prototype,new C)}}(),s=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(53),u=s(r(15)),l=r(54),h=s(r(16)),p=r(57),v=r(28),y=r(58),S=s(r(59)),A=s(r(29)),T=function(I){function N(){var D=I!==null&&I.apply(this,arguments)||this;return D.rowSplit=new y.RowSplit(D.converter),D.eolEmitted=!1,D._needEmitEol=void 0,D.headEmitted=!1,D._needEmitHead=void 0,D}return a(N,I),N.prototype.flush=function(){var D=this;if(this.runtime.csvLineBuffer&&this.runtime.csvLineBuffer.length>0){var C=this.runtime.csvLineBuffer;return this.runtime.csvLineBuffer=void 0,this.process(C,!0).then(function(L){return D.runtime.csvLineBuffer&&D.runtime.csvLineBuffer.length>0?u.default.reject(A.default.unclosed_quote(D.runtime.parsedLineNumber,D.runtime.csvLineBuffer.toString())):u.default.resolve(L)})}return u.default.resolve([])},N.prototype.destroy=function(){return u.default.resolve()},Object.defineProperty(N.prototype,"needEmitEol",{get:function(){return this._needEmitEol===void 0&&(this._needEmitEol=this.converter.listeners("eol").length>0),this._needEmitEol},enumerable:!0,configurable:!0}),Object.defineProperty(N.prototype,"needEmitHead",{get:function(){return this._needEmitHead===void 0&&(this._needEmitHead=this.converter.listeners("header").length>0),this._needEmitHead},enumerable:!0,configurable:!0}),N.prototype.process=function(D,C){var L,z=this;return C===void 0&&(C=!1),L=C?D.toString():l.prepareData(D,this.converter.parseRuntime),u.default.resolve().then(function(){return z.runtime.preRawDataHook?z.runtime.preRawDataHook(L):L}).then(function($){return $&&$.length>0?z.processCSV($,C):u.default.resolve([])})},N.prototype.processCSV=function(D,C){var L=this,z=this.params,$=this.runtime;$.eol||h.default(D,$),this.needEmitEol&&!this.eolEmitted&&$.eol&&(this.converter.emit("eol",$.eol),this.eolEmitted=!0),z.ignoreEmpty&&!$.started&&(D=v.trimLeft(D));var G=p.stringToLines(D,$);return C?(G.lines.push(G.partial),G.partial=""):this.prependLeftBuf(v.bufFromString(G.partial)),G.lines.length>0?($.preFileLineHook?this.runPreLineHook(G.lines):u.default.resolve(G.lines)).then(function(j){return $.started||L.runtime.headers?L.processCSVBody(j):L.processDataWithHead(j)}):u.default.resolve([])},N.prototype.processDataWithHead=function(D){if(this.params.noheader)this.params.headers?this.runtime.headers=this.params.headers:this.runtime.headers=[];else{for(var C="",L=[];D.length;){var z=C+D.shift(),$=this.rowSplit.parse(z);if($.closed){L=$.cells,C="";break}C=z+h.default(z,this.runtime)}if(this.prependLeftBuf(v.bufFromString(C)),L.length===0)return[];this.params.headers?this.runtime.headers=this.params.headers:this.runtime.headers=L}return(this.runtime.needProcessIgnoreColumn||this.runtime.needProcessIncludeColumn)&&this.filterHeader(),this.needEmitHead&&!this.headEmitted&&(this.converter.emit("header",this.runtime.headers),this.headEmitted=!0),this.processCSVBody(D)},N.prototype.filterHeader=function(){if(this.runtime.selectedColumns=[],this.runtime.headers){for(var D=this.runtime.headers,C=0;C<D.length;C++)if(this.params.ignoreColumns)if(this.params.ignoreColumns.test(D[C])){if(!this.params.includeColumns||!this.params.includeColumns.test(D[C]))continue;this.runtime.selectedColumns.push(C)}else this.runtime.selectedColumns.push(C);else this.params.includeColumns?this.params.includeColumns.test(D[C])&&this.runtime.selectedColumns.push(C):this.runtime.selectedColumns.push(C);this.runtime.headers=v.filterArray(this.runtime.headers,this.runtime.selectedColumns)}},N.prototype.processCSVBody=function(D){if(this.params.output==="line")return D;var C=this.rowSplit.parseMultiLines(D);return this.prependLeftBuf(v.bufFromString(C.partial)),this.params.output==="csv"?C.rowsCells:S.default(C.rowsCells,this.converter)},N.prototype.prependLeftBuf=function(D){D&&(this.runtime.csvLineBuffer?this.runtime.csvLineBuffer=n.concat([D,this.runtime.csvLineBuffer]):this.runtime.csvLineBuffer=D)},N.prototype.runPreLineHook=function(D){var C=this;return new u.default(function(L,z){(function $(G,j,K,M){if(K>=G.length)M();else if(j.preFileLineHook){var f=G[K],d=j.preFileLineHook(f,j.parsedLineNumber+K);if(K++,d&&d.then)d.then(function(g){G[K-1]=g,$(G,j,K,M)});else{for(G[K-1]=d;K<G.length;)G[K]=j.preFileLineHook(G[K],j.parsedLineNumber+K),K++;M()}}else M()})(D,C.runtime,0,function($){$?z($):L(D)})})},N}(o.Processor);e.ProcessorLocal=T}).call(this,r(3).Buffer)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(a){this.converter=a,this.params=a.parseParam,this.runtime=a.parseRuntime};e.Processor=n},function(t,e,r){"use strict";(function(n){var a=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(r(55));e.prepareData=function(o,u){var l=function(p,v){return v.csvLineBuffer&&v.csvLineBuffer.length>0?n.concat([v.csvLineBuffer,p]):p}(o,u);u.csvLineBuffer=void 0;var h=function(p,v){var y=p.length-1;if((128&p[y])!=0){for(;(192&p[y])==128;)y--;y--}return y!=p.length-1?(v.csvLineBuffer=p.slice(y+1),p.slice(0,y+1)):p}(l,u).toString("utf8");return u.started===!1?s.default(h):h}}).call(this,r(3).Buffer)},function(t,e,r){"use strict";(function(n){var a=r(56);t.exports=function(s){return typeof s=="string"&&s.charCodeAt(0)===65279?s.slice(1):n.isBuffer(s)&&a(s)&&s[0]===239&&s[1]===187&&s[2]===191?s.slice(3):s}}).call(this,r(3).Buffer)},function(t,e){t.exports=function(r){for(var n=0;n<r.length;)if(r[n]==9||r[n]==10||r[n]==13||32<=r[n]&&r[n]<=126)n+=1;else if(194<=r[n]&&r[n]<=223&&128<=r[n+1]&&r[n+1]<=191)n+=2;else if(r[n]==224&&160<=r[n+1]&&r[n+1]<=191&&128<=r[n+2]&&r[n+2]<=191||(225<=r[n]&&r[n]<=236||r[n]==238||r[n]==239)&&128<=r[n+1]&&r[n+1]<=191&&128<=r[n+2]&&r[n+2]<=191||r[n]==237&&128<=r[n+1]&&r[n+1]<=159&&128<=r[n+2]&&r[n+2]<=191)n+=3;else{if(!(r[n]==240&&144<=r[n+1]&&r[n+1]<=191&&128<=r[n+2]&&r[n+2]<=191&&128<=r[n+3]&&r[n+3]<=191||241<=r[n]&&r[n]<=243&&128<=r[n+1]&&r[n+1]<=191&&128<=r[n+2]&&r[n+2]<=191&&128<=r[n+3]&&r[n+3]<=191||r[n]==244&&128<=r[n+1]&&r[n+1]<=143&&128<=r[n+2]&&r[n+2]<=191&&128<=r[n+3]&&r[n+3]<=191))return!1;n+=4}return!0}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(r(16));e.stringToLines=function(s,o){var u=a.default(s,o),l=s.split(u);return{lines:l,partial:l.pop()||""}}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(r(16)),s=r(28),o=[",","|","	",";",":"],u=function(){function l(h){this.conv=h,this.cachedRegExp={},this.delimiterEmitted=!1,this._needEmitDelimiter=void 0,this.quote=h.parseParam.quote,this.trim=h.parseParam.trim,this.escape=h.parseParam.escape}return Object.defineProperty(l.prototype,"needEmitDelimiter",{get:function(){return this._needEmitDelimiter===void 0&&(this._needEmitDelimiter=this.conv.listeners("delimiter").length>0),this._needEmitDelimiter},enumerable:!0,configurable:!0}),l.prototype.parse=function(h){if(h.length===0||this.conv.parseParam.ignoreEmpty&&h.trim().length===0)return{cells:[],closed:!0};var p=this.quote,v=this.trim;this.escape,(this.conv.parseRuntime.delimiter instanceof Array||this.conv.parseRuntime.delimiter.toLowerCase()==="auto")&&(this.conv.parseRuntime.delimiter=this.getDelimiter(h)),this.needEmitDelimiter&&!this.delimiterEmitted&&(this.conv.emit("delimiter",this.conv.parseRuntime.delimiter),this.delimiterEmitted=!0);var y=this.conv.parseRuntime.delimiter,S=h.split(y);if(p==="off"){if(v)for(var A=0;A<S.length;A++)S[A]=S[A].trim();return{cells:S,closed:!0}}return this.toCSVRow(S,v,p,y)},l.prototype.toCSVRow=function(h,p,v,y){for(var S=[],A=!1,T="",I=0,N=h.length;I<N;I++){var D=h[I];!A&&p&&(D=s.trimLeft(D));var C=D.length;if(A)this.isQuoteClose(D)?(A=!1,T+=y+(D=D.substr(0,C-1)),T=this.escapeQuote(T),p&&(T=s.trimRight(T)),S.push(T),T=""):T+=y+D;else{if(C===2&&D===this.quote+this.quote){S.push("");continue}if(this.isQuoteOpen(D)){if(D=D.substr(1),this.isQuoteClose(D)){D=D.substring(0,D.lastIndexOf(v)),D=this.escapeQuote(D),S.push(D);continue}if(D.indexOf(v)!==-1){for(var L=0,z="",$=0,G=D;$<G.length;$++){var j=G[$];j===v&&z!==this.escape?(L++,z=""):z=j}if(L%2==1){p&&(D=s.trimRight(D)),S.push(v+D);continue}A=!0,T+=D;continue}A=!0,T+=D;continue}p&&(D=s.trimRight(D)),S.push(D)}}return{cells:S,closed:!A}},l.prototype.getDelimiter=function(h){var p;if(this.conv.parseParam.delimiter==="auto")p=o;else{if(!(this.conv.parseParam.delimiter instanceof Array))return this.conv.parseParam.delimiter;p=this.conv.parseParam.delimiter}var v=0,y=",";return p.forEach(function(S){var A=h.split(S).length;A>v&&(y=S,v=A)}),y},l.prototype.isQuoteOpen=function(h){var p=this.quote,v=this.escape;return h[0]===p&&(h[1]!==p||h[1]===v&&(h[2]===p||h.length===2))},l.prototype.isQuoteClose=function(h){var p=this.quote,v=this.escape;this.conv.parseParam.trim&&(h=s.trimRight(h));for(var y=0,S=h.length-1;h[S]===p||h[S]===v;)S--,y++;return y%2!=0},l.prototype.escapeQuote=function(h){var p="es|"+this.quote+"|"+this.escape;this.cachedRegExp[p]===void 0&&(this.cachedRegExp[p]=new RegExp("\\"+this.escape+"\\"+this.quote,"g"));var v=this.cachedRegExp[p];return h.replace(v,this.quote)},l.prototype.parseMultiLines=function(h){for(var p=[],v="";h.length;){var y=v+h.shift(),S=this.parse(y);S.cells.length===0&&this.conv.parseParam.ignoreEmpty||(S.closed||this.conv.parseParam.alwaysSplitAtEOL?(this.conv.parseRuntime.selectedColumns?p.push(s.filterArray(S.cells,this.conv.parseRuntime.selectedColumns)):p.push(S.cells),v=""):v=y+(a.default(y,this.conv.parseRuntime)||`
`))}return{rowsCells:p,partial:v}},l}();e.RowSplit=u},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(r(29)),s=n(r(60)),o=/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/;function u(N,D,C){if(D.parseParam.checkColumn&&D.parseRuntime.headers&&N.length!==D.parseRuntime.headers.length)throw a.default.column_mismatched(D.parseRuntime.parsedLineNumber+C);return function(L,z,$){for(var G=!1,j={},K=0,M=L.length;K<M;K++){var f=L[K];if(!$.parseParam.ignoreEmpty||f!==""){G=!0;var d=z[K];d&&d!==""||(d=z[K]="field"+(K+1));var g=h(d,K,$);if(g){var m=g(f,d,j,L,K);m!==void 0&&p(j,d,m,$,K)}else $.parseParam.checkType&&(f=S(f,d,K,$)(f)),f!==void 0&&p(j,d,f,$,K)}}return G?j:null}(N,D.parseRuntime.headers||[],D)||null}e.default=function(N,D){for(var C=[],L=0,z=N.length;L<z;L++){var $=u(N[L],D,L);$&&C.push($)}return C};var l={string:T,number:A,omit:function(){}};function h(N,D,C){if(C.parseRuntime.columnConv[D]!==void 0)return C.parseRuntime.columnConv[D];var L=C.parseParam.colParser[N];if(L===void 0)return C.parseRuntime.columnConv[D]=null;if(typeof L=="object"&&(L=L.cellParser||"string"),typeof L=="string"){L=L.trim().toLowerCase();var z=l[L];return C.parseRuntime.columnConv[D]=z||null}return C.parseRuntime.columnConv[D]=typeof L=="function"?L:null}function p(N,D,C,L,z){if(!L.parseRuntime.columnValueSetter[z])if(L.parseParam.flatKeys)L.parseRuntime.columnValueSetter[z]=v;else if(D.indexOf(".")>-1){for(var $=D.split("."),G=!0;$.length>0;)if($.shift().length===0){G=!1;break}!G||L.parseParam.colParser[D]&&L.parseParam.colParser[D].flat?L.parseRuntime.columnValueSetter[z]=v:L.parseRuntime.columnValueSetter[z]=y}else L.parseRuntime.columnValueSetter[z]=v;L.parseParam.nullObject===!0&&C==="null"&&(C=null),L.parseRuntime.columnValueSetter[z](N,D,C)}function v(N,D,C){N[D]=C}function y(N,D,C){s.default(N,D,C)}function S(N,D,C,L){return L.parseRuntime.headerType[C]?L.parseRuntime.headerType[C]:D.indexOf("number#!")>-1?L.parseRuntime.headerType[C]=A:D.indexOf("string#!")>-1?L.parseRuntime.headerType[C]=T:L.parseParam.checkType?L.parseRuntime.headerType[C]=I:L.parseRuntime.headerType[C]=T}function A(N){var D=parseFloat(N);return isNaN(D)?N:D}function T(N){return N.toString()}function I(N){var D=N.trim();return D===""?T(N):o.test(D)?A(N):D.length===5&&D.toLowerCase()==="false"||D.length===4&&D.toLowerCase()==="true"?function(C){var L=C.trim();return L.length!==5||L.toLowerCase()!=="false"}(N):D[0]==="{"&&D[D.length-1]==="}"||D[0]==="["&&D[D.length-1]==="]"?function(C){try{return JSON.parse(C)}catch{return C}}(N):T(N)}},function(t,e,r){var n=r(61);t.exports=function(a,s,o){return a==null?a:n(a,s,o)}},function(t,e,r){var n=r(62),a=r(74),s=r(103),o=r(20),u=r(104);t.exports=function(l,h,p,v){if(!o(l))return l;for(var y=-1,S=(h=a(h,l)).length,A=S-1,T=l;T!=null&&++y<S;){var I=u(h[y]),N=p;if(y!=A){var D=T[I];(N=v?v(D,I,T):void 0)===void 0&&(N=o(D)?D:s(h[y+1])?[]:{})}n(T,I,N),T=T[I]}return l}},function(t,e,r){var n=r(63),a=r(31),s=Object.prototype.hasOwnProperty;t.exports=function(o,u,l){var h=o[u];s.call(o,u)&&a(h,l)&&(l!==void 0||u in o)||n(o,u,l)}},function(t,e,r){var n=r(64);t.exports=function(a,s,o){s=="__proto__"&&n?n(a,s,{configurable:!0,enumerable:!0,value:o,writable:!0}):a[s]=o}},function(t,e,r){var n=r(17),a=function(){try{var s=n(Object,"defineProperty");return s({},"",{}),s}catch{}}();t.exports=a},function(t,e,r){var n=r(66),a=r(70),s=r(20),o=r(72),u=/^\[object .+?Constructor\]$/,l=Function.prototype,h=Object.prototype,p=l.toString,v=h.hasOwnProperty,y=RegExp("^"+p.call(v).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(S){return!(!s(S)||a(S))&&(n(S)?y:u).test(o(S))}},function(t,e,r){var n=r(30),a=r(20);t.exports=function(s){if(!a(s))return!1;var o=n(s);return o=="[object Function]"||o=="[object GeneratorFunction]"||o=="[object AsyncFunction]"||o=="[object Proxy]"}},function(t,e,r){(function(n){var a=typeof n=="object"&&n&&n.Object===Object&&n;t.exports=a}).call(this,r(0))},function(t,e,r){var n=r(18),a=Object.prototype,s=a.hasOwnProperty,o=a.toString,u=n?n.toStringTag:void 0;t.exports=function(l){var h=s.call(l,u),p=l[u];try{l[u]=void 0;var v=!0}catch{}var y=o.call(l);return v&&(h?l[u]=p:delete l[u]),y}},function(t,e){var r=Object.prototype.toString;t.exports=function(n){return r.call(n)}},function(t,e,r){var n=r(71),a=function(){var s=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}();t.exports=function(s){return!!a&&a in s}},function(t,e,r){var n=r(19)["__core-js_shared__"];t.exports=n},function(t,e){var r=Function.prototype.toString;t.exports=function(n){if(n!=null){try{return r.call(n)}catch{}try{return n+""}catch{}}return""}},function(t,e){t.exports=function(r,n){return r==null?void 0:r[n]}},function(t,e,r){var n=r(21),a=r(75),s=r(77),o=r(100);t.exports=function(u,l){return n(u)?u:a(u,l)?[u]:s(o(u))}},function(t,e,r){var n=r(21),a=r(22),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.exports=function(u,l){if(n(u))return!1;var h=typeof u;return!(h!="number"&&h!="symbol"&&h!="boolean"&&u!=null&&!a(u))||o.test(u)||!s.test(u)||l!=null&&u in Object(l)}},function(t,e){t.exports=function(r){return r!=null&&typeof r=="object"}},function(t,e,r){var n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,s=r(78)(function(o){var u=[];return o.charCodeAt(0)===46&&u.push(""),o.replace(n,function(l,h,p,v){u.push(p?v.replace(a,"$1"):h||l)}),u});t.exports=s},function(t,e,r){var n=r(79);t.exports=function(a){var s=n(a,function(u){return o.size===500&&o.clear(),u}),o=s.cache;return s}},function(t,e,r){var n=r(80),a="Expected a function";function s(o,u){if(typeof o!="function"||u!=null&&typeof u!="function")throw new TypeError(a);var l=function(){var h=arguments,p=u?u.apply(this,h):h[0],v=l.cache;if(v.has(p))return v.get(p);var y=o.apply(this,h);return l.cache=v.set(p,y)||v,y};return l.cache=new(s.Cache||n),l}s.Cache=n,t.exports=s},function(t,e,r){var n=r(81),a=r(95),s=r(97),o=r(98),u=r(99);function l(h){var p=-1,v=h==null?0:h.length;for(this.clear();++p<v;){var y=h[p];this.set(y[0],y[1])}}l.prototype.clear=n,l.prototype.delete=a,l.prototype.get=s,l.prototype.has=o,l.prototype.set=u,t.exports=l},function(t,e,r){var n=r(82),a=r(88),s=r(94);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(s||a),string:new n}}},function(t,e,r){var n=r(83),a=r(84),s=r(85),o=r(86),u=r(87);function l(h){var p=-1,v=h==null?0:h.length;for(this.clear();++p<v;){var y=h[p];this.set(y[0],y[1])}}l.prototype.clear=n,l.prototype.delete=a,l.prototype.get=s,l.prototype.has=o,l.prototype.set=u,t.exports=l},function(t,e,r){var n=r(8);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(t,e){t.exports=function(r){var n=this.has(r)&&delete this.__data__[r];return this.size-=n?1:0,n}},function(t,e,r){var n=r(8),a=Object.prototype.hasOwnProperty;t.exports=function(s){var o=this.__data__;if(n){var u=o[s];return u==="__lodash_hash_undefined__"?void 0:u}return a.call(o,s)?o[s]:void 0}},function(t,e,r){var n=r(8),a=Object.prototype.hasOwnProperty;t.exports=function(s){var o=this.__data__;return n?o[s]!==void 0:a.call(o,s)}},function(t,e,r){var n=r(8);t.exports=function(a,s){var o=this.__data__;return this.size+=this.has(a)?0:1,o[a]=n&&s===void 0?"__lodash_hash_undefined__":s,this}},function(t,e,r){var n=r(89),a=r(90),s=r(91),o=r(92),u=r(93);function l(h){var p=-1,v=h==null?0:h.length;for(this.clear();++p<v;){var y=h[p];this.set(y[0],y[1])}}l.prototype.clear=n,l.prototype.delete=a,l.prototype.get=s,l.prototype.has=o,l.prototype.set=u,t.exports=l},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,r){var n=r(9),a=Array.prototype.splice;t.exports=function(s){var o=this.__data__,u=n(o,s);return!(u<0||(u==o.length-1?o.pop():a.call(o,u,1),--this.size,0))}},function(t,e,r){var n=r(9);t.exports=function(a){var s=this.__data__,o=n(s,a);return o<0?void 0:s[o][1]}},function(t,e,r){var n=r(9);t.exports=function(a){return n(this.__data__,a)>-1}},function(t,e,r){var n=r(9);t.exports=function(a,s){var o=this.__data__,u=n(o,a);return u<0?(++this.size,o.push([a,s])):o[u][1]=s,this}},function(t,e,r){var n=r(17)(r(19),"Map");t.exports=n},function(t,e,r){var n=r(10);t.exports=function(a){var s=n(this,a).delete(a);return this.size-=s?1:0,s}},function(t,e){t.exports=function(r){var n=typeof r;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?r!=="__proto__":r===null}},function(t,e,r){var n=r(10);t.exports=function(a){return n(this,a).get(a)}},function(t,e,r){var n=r(10);t.exports=function(a){return n(this,a).has(a)}},function(t,e,r){var n=r(10);t.exports=function(a,s){var o=n(this,a),u=o.size;return o.set(a,s),this.size+=o.size==u?0:1,this}},function(t,e,r){var n=r(101);t.exports=function(a){return a==null?"":n(a)}},function(t,e,r){var n=r(18),a=r(102),s=r(21),o=r(22),u=n?n.prototype:void 0,l=u?u.toString:void 0;t.exports=function h(p){if(typeof p=="string")return p;if(s(p))return a(p,h)+"";if(o(p))return l?l.call(p):"";var v=p+"";return v=="0"&&1/p==-1/0?"-0":v}},function(t,e){t.exports=function(r,n){for(var a=-1,s=r==null?0:r.length,o=Array(s);++a<s;)o[a]=n(r[a],a,r);return o}},function(t,e){var r=/^(?:0|[1-9]\d*)$/;t.exports=function(n,a){var s=typeof n;return!!(a=a==null?9007199254740991:a)&&(s=="number"||s!="symbol"&&r.test(n))&&n>-1&&n%1==0&&n<a}},function(t,e,r){var n=r(22);t.exports=function(a){if(typeof a=="string"||n(a))return a;var s=a+"";return s=="0"&&1/a==-1/0?"-0":s}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(r(15)),s=r(106),o=function(){function l(h){this.converter=h,this.finalResult=[]}return Object.defineProperty(l.prototype,"needEmitLine",{get:function(){return!!this.converter.parseRuntime.subscribe&&!!this.converter.parseRuntime.subscribe.onNext||this.needPushDownstream},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"needPushDownstream",{get:function(){return this._needPushDownstream===void 0&&(this._needPushDownstream=this.converter.listeners("data").length>0||this.converter.listeners("readable").length>0),this._needPushDownstream},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"needEmitAll",{get:function(){return!!this.converter.parseRuntime.then&&this.converter.parseParam.needEmitAll},enumerable:!0,configurable:!0}),l.prototype.processResult=function(h){var p=this,v=this.converter.parseRuntime.parsedLineNumber;return this.needPushDownstream&&this.converter.parseParam.downstreamFormat==="array"&&v===0&&u(this.converter,"["+s.EOL),new a.default(function(y,S){p.needEmitLine?function A(T,I,N,D,C){if(N>=T.length)C();else if(I.parseRuntime.subscribe&&I.parseRuntime.subscribe.onNext){var L=I.parseRuntime.subscribe.onNext,z=T[N],$=L(z,I.parseRuntime.parsedLineNumber+N);if(N++,$&&$.then)$.then(function(){(function(j,K,M,f,d,g,m){d&&u(M,m),A(j,M,f,d,g)})(T,0,I,N,D,C,z)},C);else{for(D&&u(I,z);N<T.length;){var G=T[N];L(G,I.parseRuntime.parsedLineNumber+N),N++,D&&u(I,G)}C()}}else{if(D)for(;N<T.length;)G=T[N++],u(I,G);C()}}(h,p.converter,0,p.needPushDownstream,function(A){A?S(A):(p.appendFinalResult(h),y())}):(p.appendFinalResult(h),y())})},l.prototype.appendFinalResult=function(h){this.needEmitAll&&(this.finalResult=this.finalResult.concat(h)),this.converter.parseRuntime.parsedLineNumber+=h.length},l.prototype.processError=function(h){this.converter.parseRuntime.subscribe&&this.converter.parseRuntime.subscribe.onError&&this.converter.parseRuntime.subscribe.onError(h),this.converter.parseRuntime.then&&this.converter.parseRuntime.then.onrejected&&this.converter.parseRuntime.then.onrejected(h)},l.prototype.endProcess=function(){this.converter.parseRuntime.then&&this.converter.parseRuntime.then.onfulfilled&&(this.needEmitAll?this.converter.parseRuntime.then.onfulfilled(this.finalResult):this.converter.parseRuntime.then.onfulfilled([])),this.converter.parseRuntime.subscribe&&this.converter.parseRuntime.subscribe.onCompleted&&this.converter.parseRuntime.subscribe.onCompleted(),this.needPushDownstream&&this.converter.parseParam.downstreamFormat==="array"&&u(this.converter,"]"+s.EOL)},l}();function u(l,h){if(typeof h!="object"||l.options.objectMode)l.push(h);else{var p=JSON.stringify(h);l.push(p+(l.parseParam.downstreamFormat==="array"?","+s.EOL:s.EOL),"utf8")}}e.Result=o},function(t,e){e.endianness=function(){return"LE"},e.hostname=function(){return typeof location!="undefined"?location.hostname:""},e.loadavg=function(){return[]},e.uptime=function(){return 0},e.freemem=function(){return Number.MAX_VALUE},e.totalmem=function(){return Number.MAX_VALUE},e.cpus=function(){return[]},e.type=function(){return"Browser"},e.release=function(){return typeof navigator!="undefined"?navigator.appVersion:""},e.networkInterfaces=e.getNetworkInterfaces=function(){return{}},e.arch=function(){return"javascript"},e.platform=function(){return"browser"},e.tmpdir=e.tmpDir=function(){return"/tmp"},e.EOL=`
`,e.homedir=function(){return"/"}}])});var fr=ne((kA,iF)=>{var Qb=mn(),Ku=Qb.Buffer;function nF(t,e){for(var r in t)e[r]=t[r]}Ku.from&&Ku.alloc&&Ku.allocUnsafe&&Ku.allocUnsafeSlow?iF.exports=Qb:(nF(Qb,kA),kA.Buffer=$d);function $d(t,e,r){return Ku(t,e,r)}nF(Ku,$d);$d.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Ku(t,e,r)};$d.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Ku(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};$d.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ku(t)};$d.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Qb.SlowBuffer(t)}});var _c=ne((mXe,NA)=>{"use strict";var TA=65536,bce=4294967295;function wce(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var _ce=fr().Buffer,ew=global.crypto||global.msCrypto;ew&&ew.getRandomValues?NA.exports=xce:NA.exports=wce;function xce(t,e){if(t>bce)throw new RangeError("requested too many random bytes");var r=_ce.allocUnsafe(t);if(t>0)if(t>TA)for(var n=0;n<t;n+=TA)ew.getRandomValues(r.slice(n,n+TA));else ew.getRandomValues(r);return typeof e=="function"?process.nextTick(function(){e(null,r)}):r}});var oF=ne((IA,sF)=>{var tw=mn(),pu=tw.Buffer;function aF(t,e){for(var r in t)e[r]=t[r]}pu.from&&pu.alloc&&pu.allocUnsafe&&pu.allocUnsafeSlow?sF.exports=tw:(aF(tw,IA),IA.Buffer=xc);function xc(t,e,r){return pu(t,e,r)}xc.prototype=Object.create(pu.prototype);aF(pu,xc);xc.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return pu(t,e,r)};xc.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=pu(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};xc.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return pu(t)};xc.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return tw.SlowBuffer(t)}});var DA=ne((vXe,uF)=>{uF.exports=vs().EventEmitter});var hF=ne((gXe,cF)=>{"use strict";function fF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Sce(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fF(Object(r),!0).forEach(function(n){Ece(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fF(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ece(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ace(t,e,r){return e&&lF(t.prototype,e),r&&lF(t,r),t}var kce=mn(),rw=kce.Buffer,Tce=uu(),OA=Tce.inspect,Nce=OA&&OA.custom||"inspect";function Ice(t,e,r){rw.prototype.copy.call(t,e,r)}cF.exports=function(){function t(){Mce(this,t),this.head=null,this.tail=null,this.length=0}return Ace(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,a=""+n.data;n=n.next;)a+=r+n.data;return a}},{key:"concat",value:function(r){if(this.length===0)return rw.alloc(0);for(var n=rw.allocUnsafe(r>>>0),a=this.head,s=0;a;)Ice(a.data,n,s),s+=a.data.length,a=a.next;return n}},{key:"consume",value:function(r,n){var a;return r<this.head.data.length?(a=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?a=this.shift():a=n?this._getString(r):this._getBuffer(r),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,a=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,u=r>o.length?o.length:r;if(u===o.length?s+=o:s+=o.slice(0,r),r-=u,r===0){u===o.length?(++a,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(u));break}++a}return this.length-=a,s}},{key:"_getBuffer",value:function(r){var n=rw.allocUnsafe(r),a=this.head,s=1;for(a.data.copy(n),r-=a.data.length;a=a.next;){var o=a.data,u=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,u),r-=u,r===0){u===o.length?(++s,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=o.slice(u));break}++s}return this.length-=s,n}},{key:Nce,value:function(r,n){return OA(this,Sce({},n,{depth:0,customInspect:!1}))}}]),t}()});var CA=ne((yXe,pF)=>{"use strict";function Dce(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return n||a?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(RA,this,t)):process.nextTick(RA,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(nw,r):(r._writableState.errorEmitted=!0,process.nextTick(dF,r,s)):process.nextTick(dF,r,s):e?(process.nextTick(nw,r),e(s)):process.nextTick(nw,r)}),this)}function dF(t,e){RA(t,e),nw(t)}function nw(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function Oce(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function RA(t,e){t.emit("error",e)}function Rce(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}pF.exports={destroy:Dce,undestroy:Oce,errorOrDestroy:Rce}});var Sc=ne((bXe,gF)=>{"use strict";function Cce(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var vF={};function xs(t,e,r){r||(r=Error);function n(s,o,u){return typeof e=="string"?e:e(s,o,u)}var a=function(s){Cce(o,s);function o(u,l,h){return s.call(this,n(u,l,h))||this}return o}(r);a.prototype.name=r.name,a.prototype.code=t,vF[t]=a}function mF(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function Fce(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function Bce(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function Lce(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}xs("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);xs("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&Fce(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var a;if(Bce(t," argument"))a="The ".concat(t," ").concat(n," ").concat(mF(e,"type"));else{var s=Lce(t,".")?"property":"argument";a='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat(mF(e,"type"))}return a+=". Received type ".concat(typeof r),a},TypeError);xs("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");xs("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});xs("ERR_STREAM_PREMATURE_CLOSE","Premature close");xs("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});xs("ERR_MULTIPLE_CALLBACK","Callback called multiple times");xs("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");xs("ERR_STREAM_WRITE_AFTER_END","write after end");xs("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);xs("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);xs("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");gF.exports.codes=vF});var FA=ne((wXe,yF)=>{"use strict";var Pce=Sc().codes.ERR_INVALID_OPT_VALUE;function qce(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function $ce(t,e,r,n){var a=qce(e,n,r);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var s=n?r:"highWaterMark";throw new Pce(s,a)}return Math.floor(a)}return t.objectMode?16:16*1024}yF.exports={getHighWaterMark:$ce}});var PA=ne((_Xe,EF)=>{"use strict";EF.exports=ri;function wF(t){var e=this;this.next=null,this.entry=null,this.finish=function(){dhe(e,t)}}var zd;ri.WritableState=Bv;var zce={deprecate:Sv()},_F=DA(),aw=mn().Buffer,jce=global.Uint8Array||function(){};function Uce(t){return aw.from(t)}function Vce(t){return aw.isBuffer(t)||t instanceof jce}var LA=CA(),Wce=FA(),Gce=Wce.getHighWaterMark,il=Sc().codes,Hce=il.ERR_INVALID_ARG_TYPE,Kce=il.ERR_METHOD_NOT_IMPLEMENTED,Zce=il.ERR_MULTIPLE_CALLBACK,Jce=il.ERR_STREAM_CANNOT_PIPE,Yce=il.ERR_STREAM_DESTROYED,Xce=il.ERR_STREAM_NULL_VALUES,Qce=il.ERR_STREAM_WRITE_AFTER_END,ehe=il.ERR_UNKNOWN_ENCODING,jd=LA.errorOrDestroy;Et()(ri,_F);function the(){}function Bv(t,e,r){zd=zd||Ec(),t=t||{},typeof r!="boolean"&&(r=e instanceof zd),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=Gce(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){uhe(e,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new wF(this)}Bv.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(Bv.prototype,"buffer",{get:zce.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var iw;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(iw=Function.prototype[Symbol.hasInstance],Object.defineProperty(ri,Symbol.hasInstance,{value:function(e){return iw.call(this,e)?!0:this!==ri?!1:e&&e._writableState instanceof Bv}})):iw=function(e){return e instanceof this};function ri(t){zd=zd||Ec();var e=this instanceof zd;if(!e&&!iw.call(ri,this))return new ri(t);this._writableState=new Bv(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),_F.call(this)}ri.prototype.pipe=function(){jd(this,new Jce)};function rhe(t,e){var r=new Qce;jd(t,r),process.nextTick(e,r)}function nhe(t,e,r,n){var a;return r===null?a=new Xce:typeof r!="string"&&!e.objectMode&&(a=new Hce("chunk",["string","Buffer"],r)),a?(jd(t,a),process.nextTick(n,a),!1):!0}ri.prototype.write=function(t,e,r){var n=this._writableState,a=!1,s=!n.objectMode&&Vce(t);return s&&!aw.isBuffer(t)&&(t=Uce(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=the),n.ending?rhe(this,r):(s||nhe(this,n,t,r))&&(n.pendingcb++,a=ahe(this,n,s,t,e,r)),a};ri.prototype.cork=function(){this._writableState.corked++};ri.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&xF(this,t))};ri.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new ehe(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(ri.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ihe(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=aw.from(e,r)),e}Object.defineProperty(ri.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ahe(t,e,r,n,a,s){if(!r){var o=ihe(e,n,a);n!==o&&(r=!0,a="buffer",n=o)}var u=e.objectMode?1:n.length;e.length+=u;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:a,isBuf:r,callback:s,next:null},h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else BA(t,e,!1,u,n,a,s);return l}function BA(t,e,r,n,a,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Yce("write")):r?t._writev(a,e.onwrite):t._write(a,s,e.onwrite),e.sync=!1}function she(t,e,r,n,a){--e.pendingcb,r?(process.nextTick(a,n),process.nextTick(Fv,t,e),t._writableState.errorEmitted=!0,jd(t,n)):(a(n),t._writableState.errorEmitted=!0,jd(t,n),Fv(t,e))}function ohe(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function uhe(t,e){var r=t._writableState,n=r.sync,a=r.writecb;if(typeof a!="function")throw new Zce;if(ohe(r),e)she(t,r,n,e,a);else{var s=SF(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&xF(t,r),n?process.nextTick(bF,t,r,s,a):bF(t,r,s,a)}}function bF(t,e,r,n){r||fhe(t,e),e.pendingcb--,n(),Fv(t,e)}function fhe(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function xF(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,a=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,u=!0;r;)a[o]=r,r.isBuf||(u=!1),r=r.next,o+=1;a.allBuffers=u,BA(t,e,!0,e.length,a,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new wF(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,h=r.encoding,p=r.callback,v=e.objectMode?1:l.length;if(BA(t,e,!1,v,l,h,p),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}ri.prototype._write=function(t,e,r){r(new Kce("_write()"))};ri.prototype._writev=null;ri.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||hhe(this,n,r),this};Object.defineProperty(ri.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function SF(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function lhe(t,e){t._final(function(r){e.pendingcb--,r&&jd(t,r),e.prefinished=!0,t.emit("prefinish"),Fv(t,e)})}function che(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(lhe,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Fv(t,e){var r=SF(e);if(r&&(che(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function hhe(t,e,r){e.ending=!0,Fv(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function dhe(t,e,r){var n=t.entry;for(t.entry=null;n;){var a=n.callback;e.pendingcb--,a(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(ri.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});ri.prototype.destroy=LA.destroy;ri.prototype._undestroy=LA.undestroy;ri.prototype._destroy=function(t,e){e(t)}});var Ec=ne((xXe,AF)=>{"use strict";var phe=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};AF.exports=mu;var MF=zA(),$A=PA();Et()(mu,MF);for(qA=phe($A.prototype),sw=0;sw<qA.length;sw++)ow=qA[sw],mu.prototype[ow]||(mu.prototype[ow]=$A.prototype[ow]);var qA,ow,sw;function mu(t){if(!(this instanceof mu))return new mu(t);MF.call(this,t),$A.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",mhe)))}Object.defineProperty(mu.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(mu.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(mu.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function mhe(){this._writableState.ended||process.nextTick(vhe,this)}function vhe(t){t.end()}Object.defineProperty(mu.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var uw=ne((SXe,NF)=>{"use strict";var kF=Sc().codes.ERR_STREAM_PREMATURE_CLOSE;function ghe(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];t.apply(this,n)}}}function yhe(){}function bhe(t){return t.setHeader&&typeof t.abort=="function"}function TF(t,e,r){if(typeof e=="function")return TF(t,null,e);e||(e={}),r=ghe(r||yhe);var n=e.readable||e.readable!==!1&&t.readable,a=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||u()},o=t._writableState&&t._writableState.finished,u=function(){a=!1,o=!0,n||r.call(t)},l=t._readableState&&t._readableState.endEmitted,h=function(){n=!1,l=!0,a||r.call(t)},p=function(A){r.call(t,A)},v=function(){var A;if(n&&!l)return(!t._readableState||!t._readableState.ended)&&(A=new kF),r.call(t,A);if(a&&!o)return(!t._writableState||!t._writableState.ended)&&(A=new kF),r.call(t,A)},y=function(){t.req.on("finish",u)};return bhe(t)?(t.on("complete",u),t.on("abort",v),t.req?y():t.on("request",y)):a&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",h),t.on("finish",u),e.error!==!1&&t.on("error",p),t.on("close",v),function(){t.removeListener("complete",u),t.removeListener("abort",v),t.removeListener("request",y),t.req&&t.req.removeListener("finish",u),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",u),t.removeListener("end",h),t.removeListener("error",p),t.removeListener("close",v)}}NF.exports=TF});var DF=ne((EXe,IF)=>{"use strict";var fw;function al(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var whe=uw(),sl=Symbol("lastResolve"),Mc=Symbol("lastReject"),Lv=Symbol("error"),lw=Symbol("ended"),Ac=Symbol("lastPromise"),jA=Symbol("handlePromise"),kc=Symbol("stream");function ol(t,e){return{value:t,done:e}}function _he(t){var e=t[sl];if(e!==null){var r=t[kc].read();r!==null&&(t[Ac]=null,t[sl]=null,t[Mc]=null,e(ol(r,!1)))}}function xhe(t){process.nextTick(_he,t)}function She(t,e){return function(r,n){t.then(function(){if(e[lw]){r(ol(void 0,!0));return}e[jA](r,n)},n)}}var Ehe=Object.getPrototypeOf(function(){}),Mhe=Object.setPrototypeOf((fw={get stream(){return this[kc]},next:function(){var e=this,r=this[Lv];if(r!==null)return Promise.reject(r);if(this[lw])return Promise.resolve(ol(void 0,!0));if(this[kc].destroyed)return new Promise(function(o,u){process.nextTick(function(){e[Lv]?u(e[Lv]):o(ol(void 0,!0))})});var n=this[Ac],a;if(n)a=new Promise(She(n,this));else{var s=this[kc].read();if(s!==null)return Promise.resolve(ol(s,!1));a=new Promise(this[jA])}return this[Ac]=a,a}},al(fw,Symbol.asyncIterator,function(){return this}),al(fw,"return",function(){var e=this;return new Promise(function(r,n){e[kc].destroy(null,function(a){if(a){n(a);return}r(ol(void 0,!0))})})}),fw),Ehe),Ahe=function(e){var r,n=Object.create(Mhe,(r={},al(r,kc,{value:e,writable:!0}),al(r,sl,{value:null,writable:!0}),al(r,Mc,{value:null,writable:!0}),al(r,Lv,{value:null,writable:!0}),al(r,lw,{value:e._readableState.endEmitted,writable:!0}),al(r,jA,{value:function(s,o){var u=n[kc].read();u?(n[Ac]=null,n[sl]=null,n[Mc]=null,s(ol(u,!1))):(n[sl]=s,n[Mc]=o)},writable:!0}),r));return n[Ac]=null,whe(e,function(a){if(a&&a.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[Mc];s!==null&&(n[Ac]=null,n[sl]=null,n[Mc]=null,s(a)),n[Lv]=a;return}var o=n[sl];o!==null&&(n[Ac]=null,n[sl]=null,n[Mc]=null,o(ol(void 0,!0))),n[lw]=!0}),e.on("readable",xhe.bind(null,n)),n};IF.exports=Ahe});var RF=ne((MXe,OF)=>{OF.exports=function(){throw new Error("Readable.from is not available in the browser")}});var zA=ne((kXe,UF)=>{"use strict";UF.exports=gr;var Ud;gr.ReadableState=LF;var AXe=vs().EventEmitter,BF=function(e,r){return e.listeners(r).length},qv=DA(),cw=mn().Buffer,khe=global.Uint8Array||function(){};function The(t){return cw.from(t)}function Nhe(t){return cw.isBuffer(t)||t instanceof khe}var UA=uu(),er;UA&&UA.debuglog?er=UA.debuglog("stream"):er=function(){};var Ihe=hF(),JA=CA(),Dhe=FA(),Ohe=Dhe.getHighWaterMark,hw=Sc().codes,Rhe=hw.ERR_INVALID_ARG_TYPE,Che=hw.ERR_STREAM_PUSH_AFTER_EOF,Fhe=hw.ERR_METHOD_NOT_IMPLEMENTED,Bhe=hw.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Vd,VA,WA;Et()(gr,qv);var Pv=JA.errorOrDestroy,GA=["error","close","destroy","pause","resume"];function Lhe(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function LF(t,e,r){Ud=Ud||Ec(),t=t||{},typeof r!="boolean"&&(r=e instanceof Ud),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=Ohe(this,t,"readableHighWaterMark",r),this.buffer=new Ihe,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Vd||(Vd=cu().StringDecoder),this.decoder=new Vd(t.encoding),this.encoding=t.encoding)}function gr(t){if(Ud=Ud||Ec(),!(this instanceof gr))return new gr(t);var e=this instanceof Ud;this._readableState=new LF(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),qv.call(this)}Object.defineProperty(gr.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});gr.prototype.destroy=JA.destroy;gr.prototype._undestroy=JA.undestroy;gr.prototype._destroy=function(t,e){e(t)};gr.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=cw.from(t,e),e=""),n=!0),PF(this,t,e,!1,n)};gr.prototype.unshift=function(t){return PF(this,t,null,!0,!1)};function PF(t,e,r,n,a){er("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,$he(t,s);else{var o;if(a||(o=Phe(s,e)),o)Pv(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==cw.prototype&&(e=The(e)),n)s.endEmitted?Pv(t,new Bhe):HA(t,s,e,!0);else if(s.ended)Pv(t,new Che);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?HA(t,s,e,!1):ZA(t,s)):HA(t,s,e,!1)}else n||(s.reading=!1,ZA(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function HA(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&dw(t)),ZA(t,e)}function Phe(t,e){var r;return!Nhe(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new Rhe("chunk",["string","Buffer","Uint8Array"],e)),r}gr.prototype.isPaused=function(){return this._readableState.flowing===!1};gr.prototype.setEncoding=function(t){Vd||(Vd=cu().StringDecoder);var e=new Vd(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var CF=1073741824;function qhe(t){return t>=CF?t=CF:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function FF(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=qhe(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}gr.prototype.read=function(t){er("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return er("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?KA(this):dw(this),null;if(t=FF(t,e),t===0&&e.ended)return e.length===0&&KA(this),null;var n=e.needReadable;er("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,er("length less than watermark",n)),e.ended||e.reading?(n=!1,er("reading or ended",n)):n&&(er("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=FF(r,e)));var a;return t>0?a=zF(t,e):a=null,a===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&KA(this)),a!==null&&this.emit("data",a),a};function $he(t,e){if(er("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?dw(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,qF(t)))}}function dw(t){var e=t._readableState;er("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(er("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(qF,t))}function qF(t){var e=t._readableState;er("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,YA(t)}function ZA(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(zhe,t,e))}function zhe(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(er("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}gr.prototype._read=function(t){Pv(this,new Fhe("_read()"))};gr.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,er("pipe count=%d opts=%j",n.pipesCount,e);var a=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=a?u:T;n.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(I,N){er("onunpipe"),I===r&&N&&N.hasUnpiped===!1&&(N.hasUnpiped=!0,p())}function u(){er("onend"),t.end()}var l=jhe(r);t.on("drain",l);var h=!1;function p(){er("cleanup"),t.removeListener("close",S),t.removeListener("finish",A),t.removeListener("drain",l),t.removeListener("error",y),t.removeListener("unpipe",o),r.removeListener("end",u),r.removeListener("end",T),r.removeListener("data",v),h=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l()}r.on("data",v);function v(I){er("ondata");var N=t.write(I);er("dest.write",N),N===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&jF(n.pipes,t)!==-1)&&!h&&(er("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function y(I){er("onerror",I),T(),t.removeListener("error",y),BF(t,"error")===0&&Pv(t,I)}Lhe(t,"error",y);function S(){t.removeListener("finish",A),T()}t.once("close",S);function A(){er("onfinish"),t.removeListener("close",S),T()}t.once("finish",A);function T(){er("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(er("pipe resume"),r.resume()),t};function jhe(t){return function(){var r=t._readableState;er("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&BF(t,"data")&&(r.flowing=!0,YA(t))}}gr.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,a=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<a;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=jF(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};gr.prototype.on=function(t,e){var r=qv.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,er("on readable",n.length,n.reading),n.length?dw(this):n.reading||process.nextTick(Uhe,this)),r};gr.prototype.addListener=gr.prototype.on;gr.prototype.removeListener=function(t,e){var r=qv.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick($F,this),r};gr.prototype.removeAllListeners=function(t){var e=qv.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick($F,this),e};function $F(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function Uhe(t){er("readable nexttick read 0"),t.read(0)}gr.prototype.resume=function(){var t=this._readableState;return t.flowing||(er("resume"),t.flowing=!t.readableListening,Vhe(this,t)),t.paused=!1,this};function Vhe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(Whe,t,e))}function Whe(t,e){er("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),YA(t),e.flowing&&!e.reading&&t.read(0)}gr.prototype.pause=function(){return er("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(er("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function YA(t){var e=t._readableState;for(er("flow",e.flowing);e.flowing&&t.read()!==null;);}gr.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(er("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(er("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var u=e.push(o);u||(n=!0,t.pause())}});for(var a in t)this[a]===void 0&&typeof t[a]=="function"&&(this[a]=function(u){return function(){return t[u].apply(t,arguments)}}(a));for(var s=0;s<GA.length;s++)t.on(GA[s],this.emit.bind(this,GA[s]));return this._read=function(o){er("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(gr.prototype[Symbol.asyncIterator]=function(){return VA===void 0&&(VA=DF()),VA(this)});Object.defineProperty(gr.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(gr.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(gr.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});gr._fromList=zF;Object.defineProperty(gr.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function zF(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function KA(t){var e=t._readableState;er("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(Ghe,e,t))}function Ghe(t,e){if(er("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(gr.from=function(t,e){return WA===void 0&&(WA=RF()),WA(gr,t,e)});function jF(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var XA=ne((TXe,WF)=>{"use strict";WF.exports=Zu;var pw=Sc().codes,Hhe=pw.ERR_METHOD_NOT_IMPLEMENTED,Khe=pw.ERR_MULTIPLE_CALLBACK,Zhe=pw.ERR_TRANSFORM_ALREADY_TRANSFORMING,Jhe=pw.ERR_TRANSFORM_WITH_LENGTH_0,mw=Ec();Et()(Zu,mw);function Yhe(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new Khe);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function Zu(t){if(!(this instanceof Zu))return new Zu(t);mw.call(this,t),this._transformState={afterTransform:Yhe.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Xhe)}function Xhe(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){VF(t,e,r)}):VF(this,null,null)}Zu.prototype.push=function(t,e){return this._transformState.needTransform=!1,mw.prototype.push.call(this,t,e)};Zu.prototype._transform=function(t,e,r){r(new Hhe("_transform()"))};Zu.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var a=this._readableState;(n.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}};Zu.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Zu.prototype._destroy=function(t,e){mw.prototype._destroy.call(this,t,function(r){e(r)})};function VF(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Jhe;if(t._transformState.transforming)throw new Zhe;return t.push(null)}});var KF=ne((NXe,HF)=>{"use strict";HF.exports=$v;var GF=XA();Et()($v,GF);function $v(t){if(!(this instanceof $v))return new $v(t);GF.call(this,t)}$v.prototype._transform=function(t,e,r){r(null,t)}});var QF=ne((IXe,XF)=>{"use strict";var QA;function Qhe(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var YF=Sc().codes,ede=YF.ERR_MISSING_ARGS,tde=YF.ERR_STREAM_DESTROYED;function ZF(t){if(t)throw t}function rde(t){return t.setHeader&&typeof t.abort=="function"}function nde(t,e,r,n){n=Qhe(n);var a=!1;t.on("close",function(){a=!0}),QA===void 0&&(QA=uw()),QA(t,{readable:e,writable:r},function(o){if(o)return n(o);a=!0,n()});var s=!1;return function(o){if(!a&&!s){if(s=!0,rde(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new tde("pipe"))}}}function JF(t){t()}function ide(t,e){return t.pipe(e)}function ade(t){return!t.length||typeof t[t.length-1]!="function"?ZF:t.pop()}function sde(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=ade(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new ede("streams");var a,s=e.map(function(o,u){var l=u<e.length-1,h=u>0;return nde(o,l,h,function(p){a||(a=p),p&&s.forEach(JF),!l&&(s.forEach(JF),n(a))})});return e.reduce(ide)}XF.exports=sde});var t7=ne((Ss,e7)=>{Ss=e7.exports=zA();Ss.Stream=Ss;Ss.Readable=Ss;Ss.Writable=PA();Ss.Duplex=Ec();Ss.Transform=XA();Ss.PassThrough=KF();Ss.finished=uw();Ss.pipeline=QF()});var ek=ne((DXe,n7)=>{"use strict";var vw=oF().Buffer,r7=t7().Transform,ode=Et();function ude(t,e){if(!vw.isBuffer(t)&&typeof t!="string")throw new TypeError(e+" must be a string or a buffer")}function ul(t){r7.call(this),this._block=vw.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}ode(ul,r7);ul.prototype._transform=function(t,e,r){var n=null;try{this.update(t,e)}catch(a){n=a}r(n)};ul.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(r){e=r}t(e)};ul.prototype.update=function(t,e){if(ude(t,"Data"),this._finalized)throw new Error("Digest already called");vw.isBuffer(t)||(t=vw.from(t,e));for(var r=this._block,n=0;this._blockOffset+t.length-n>=this._blockSize;){for(var a=this._blockOffset;a<this._blockSize;)r[a++]=t[n++];this._update(),this._blockOffset=0}for(;n<t.length;)r[this._blockOffset++]=t[n++];for(var s=0,o=t.length*8;o>0;++s)this._length[s]+=o,o=this._length[s]/4294967296|0,o>0&&(this._length[s]-=4294967296*o);return this};ul.prototype._update=function(){throw new Error("_update is not implemented")};ul.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();t!==void 0&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e};ul.prototype._digest=function(){throw new Error("_digest is not implemented")};n7.exports=ul});var bw=ne((OXe,a7)=>{"use strict";var fde=Et(),i7=ek(),lde=fr().Buffer,cde=new Array(16);function gw(){i7.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}fde(gw,i7);gw.prototype._update=function(){for(var t=cde,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);var r=this._a,n=this._b,a=this._c,s=this._d;r=na(r,n,a,s,t[0],3614090360,7),s=na(s,r,n,a,t[1],3905402710,12),a=na(a,s,r,n,t[2],606105819,17),n=na(n,a,s,r,t[3],3250441966,22),r=na(r,n,a,s,t[4],4118548399,7),s=na(s,r,n,a,t[5],1200080426,12),a=na(a,s,r,n,t[6],2821735955,17),n=na(n,a,s,r,t[7],4249261313,22),r=na(r,n,a,s,t[8],1770035416,7),s=na(s,r,n,a,t[9],2336552879,12),a=na(a,s,r,n,t[10],4294925233,17),n=na(n,a,s,r,t[11],2304563134,22),r=na(r,n,a,s,t[12],1804603682,7),s=na(s,r,n,a,t[13],4254626195,12),a=na(a,s,r,n,t[14],2792965006,17),n=na(n,a,s,r,t[15],1236535329,22),r=ia(r,n,a,s,t[1],4129170786,5),s=ia(s,r,n,a,t[6],3225465664,9),a=ia(a,s,r,n,t[11],643717713,14),n=ia(n,a,s,r,t[0],3921069994,20),r=ia(r,n,a,s,t[5],3593408605,5),s=ia(s,r,n,a,t[10],38016083,9),a=ia(a,s,r,n,t[15],3634488961,14),n=ia(n,a,s,r,t[4],3889429448,20),r=ia(r,n,a,s,t[9],568446438,5),s=ia(s,r,n,a,t[14],3275163606,9),a=ia(a,s,r,n,t[3],4107603335,14),n=ia(n,a,s,r,t[8],1163531501,20),r=ia(r,n,a,s,t[13],2850285829,5),s=ia(s,r,n,a,t[2],4243563512,9),a=ia(a,s,r,n,t[7],1735328473,14),n=ia(n,a,s,r,t[12],2368359562,20),r=aa(r,n,a,s,t[5],4294588738,4),s=aa(s,r,n,a,t[8],2272392833,11),a=aa(a,s,r,n,t[11],1839030562,16),n=aa(n,a,s,r,t[14],4259657740,23),r=aa(r,n,a,s,t[1],2763975236,4),s=aa(s,r,n,a,t[4],1272893353,11),a=aa(a,s,r,n,t[7],4139469664,16),n=aa(n,a,s,r,t[10],3200236656,23),r=aa(r,n,a,s,t[13],681279174,4),s=aa(s,r,n,a,t[0],3936430074,11),a=aa(a,s,r,n,t[3],3572445317,16),n=aa(n,a,s,r,t[6],76029189,23),r=aa(r,n,a,s,t[9],3654602809,4),s=aa(s,r,n,a,t[12],3873151461,11),a=aa(a,s,r,n,t[15],530742520,16),n=aa(n,a,s,r,t[2],3299628645,23),r=sa(r,n,a,s,t[0],4096336452,6),s=sa(s,r,n,a,t[7],1126891415,10),a=sa(a,s,r,n,t[14],2878612391,15),n=sa(n,a,s,r,t[5],4237533241,21),r=sa(r,n,a,s,t[12],1700485571,6),s=sa(s,r,n,a,t[3],2399980690,10),a=sa(a,s,r,n,t[10],4293915773,15),n=sa(n,a,s,r,t[1],2240044497,21),r=sa(r,n,a,s,t[8],1873313359,6),s=sa(s,r,n,a,t[15],4264355552,10),a=sa(a,s,r,n,t[6],2734768916,15),n=sa(n,a,s,r,t[13],1309151649,21),r=sa(r,n,a,s,t[4],4149444226,6),s=sa(s,r,n,a,t[11],3174756917,10),a=sa(a,s,r,n,t[2],718787259,15),n=sa(n,a,s,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+a|0,this._d=this._d+s|0};gw.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=lde.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t};function yw(t,e){return t<<e|t>>>32-e}function na(t,e,r,n,a,s,o){return yw(t+(e&r|~e&n)+a+s|0,o)+e|0}function ia(t,e,r,n,a,s,o){return yw(t+(e&n|r&~n)+a+s|0,o)+e|0}function aa(t,e,r,n,a,s,o){return yw(t+(e^r^n)+a+s|0,o)+e|0}function sa(t,e,r,n,a,s,o){return yw(t+(r^(e|~n))+a+s|0,o)+e|0}a7.exports=gw});var _w=ne((RXe,h7)=>{"use strict";var tk=mn().Buffer,hde=Et(),c7=ek(),dde=new Array(16),zv=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],jv=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Uv=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Vv=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Wv=[0,1518500249,1859775393,2400959708,2840853838],Gv=[1352829926,1548603684,1836072691,2053994217,0];function ww(){c7.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}hde(ww,c7);ww.prototype._update=function(){for(var t=dde,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);for(var r=this._a|0,n=this._b|0,a=this._c|0,s=this._d|0,o=this._e|0,u=this._a|0,l=this._b|0,h=this._c|0,p=this._d|0,v=this._e|0,y=0;y<80;y+=1){var S,A;y<16?(S=s7(r,n,a,s,o,t[zv[y]],Wv[0],Uv[y]),A=l7(u,l,h,p,v,t[jv[y]],Gv[0],Vv[y])):y<32?(S=o7(r,n,a,s,o,t[zv[y]],Wv[1],Uv[y]),A=f7(u,l,h,p,v,t[jv[y]],Gv[1],Vv[y])):y<48?(S=u7(r,n,a,s,o,t[zv[y]],Wv[2],Uv[y]),A=u7(u,l,h,p,v,t[jv[y]],Gv[2],Vv[y])):y<64?(S=f7(r,n,a,s,o,t[zv[y]],Wv[3],Uv[y]),A=o7(u,l,h,p,v,t[jv[y]],Gv[3],Vv[y])):(S=l7(r,n,a,s,o,t[zv[y]],Wv[4],Uv[y]),A=s7(u,l,h,p,v,t[jv[y]],Gv[4],Vv[y])),r=o,o=s,s=Tc(a,10),a=n,n=S,u=v,v=p,p=Tc(h,10),h=l,l=A}var T=this._b+a+p|0;this._b=this._c+s+v|0,this._c=this._d+o+u|0,this._d=this._e+r+l|0,this._e=this._a+n+h|0,this._a=T};ww.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=tk.alloc?tk.alloc(20):new tk(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t};function Tc(t,e){return t<<e|t>>>32-e}function s7(t,e,r,n,a,s,o,u){return Tc(t+(e^r^n)+s+o|0,u)+a|0}function o7(t,e,r,n,a,s,o,u){return Tc(t+(e&r|~e&n)+s+o|0,u)+a|0}function u7(t,e,r,n,a,s,o,u){return Tc(t+((e|~r)^n)+s+o|0,u)+a|0}function f7(t,e,r,n,a,s,o,u){return Tc(t+(e&n|r&~n)+s+o|0,u)+a|0}function l7(t,e,r,n,a,s,o,u){return Tc(t+(e^(r|~n))+s+o|0,u)+a|0}h7.exports=ww});var Nc=ne((CXe,p7)=>{var d7=fr().Buffer;function xw(t,e){this._block=d7.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}xw.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=d7.from(t,e));for(var r=this._block,n=this._blockSize,a=t.length,s=this._len,o=0;o<a;){for(var u=s%n,l=Math.min(a-o,n-u),h=0;h<l;h++)r[u+h]=t[o+h];s+=l,o+=l,s%n===0&&this._update(r)}return this._len+=a,this};xw.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,a=(r-n)/4294967296;this._block.writeUInt32BE(a,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var s=this._hash();return t?s.toString(t):s};xw.prototype._update=function(){throw new Error("_update must be implemented by subclass")};p7.exports=xw});var g7=ne((FXe,v7)=>{var pde=Et(),m7=Nc(),mde=fr().Buffer,vde=[1518500249,1859775393,-1894007588,-899497514],gde=new Array(80);function Hv(){this.init(),this._w=gde,m7.call(this,64,56)}pde(Hv,m7);Hv.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function yde(t){return t<<5|t>>>27}function bde(t){return t<<30|t>>>2}function wde(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}Hv.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,a=this._c|0,s=this._d|0,o=this._e|0,u=0;u<16;++u)e[u]=t.readInt32BE(u*4);for(;u<80;++u)e[u]=e[u-3]^e[u-8]^e[u-14]^e[u-16];for(var l=0;l<80;++l){var h=~~(l/20),p=yde(r)+wde(h,n,a,s)+o+e[l]+vde[h]|0;o=s,s=a,a=bde(n),n=r,r=p}this._a=r+this._a|0,this._b=n+this._b|0,this._c=a+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0};Hv.prototype._hash=function(){var t=mde.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};v7.exports=Hv});var w7=ne((BXe,b7)=>{var _de=Et(),y7=Nc(),xde=fr().Buffer,Sde=[1518500249,1859775393,-1894007588,-899497514],Ede=new Array(80);function Kv(){this.init(),this._w=Ede,y7.call(this,64,56)}_de(Kv,y7);Kv.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function Mde(t){return t<<1|t>>>31}function Ade(t){return t<<5|t>>>27}function kde(t){return t<<30|t>>>2}function Tde(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}Kv.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,a=this._c|0,s=this._d|0,o=this._e|0,u=0;u<16;++u)e[u]=t.readInt32BE(u*4);for(;u<80;++u)e[u]=Mde(e[u-3]^e[u-8]^e[u-14]^e[u-16]);for(var l=0;l<80;++l){var h=~~(l/20),p=Ade(r)+Tde(h,n,a,s)+o+e[l]+Sde[h]|0;o=s,s=a,a=kde(n),n=r,r=p}this._a=r+this._a|0,this._b=n+this._b|0,this._c=a+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0};Kv.prototype._hash=function(){var t=xde.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};b7.exports=Kv});var rk=ne((LXe,x7)=>{var Nde=Et(),_7=Nc(),Ide=fr().Buffer,Dde=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Ode=new Array(64);function Zv(){this.init(),this._w=Ode,_7.call(this,64,56)}Nde(Zv,_7);Zv.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function Rde(t,e,r){return r^t&(e^r)}function Cde(t,e,r){return t&e|r&(t|e)}function Fde(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function Bde(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function Lde(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function Pde(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}Zv.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,a=this._c|0,s=this._d|0,o=this._e|0,u=this._f|0,l=this._g|0,h=this._h|0,p=0;p<16;++p)e[p]=t.readInt32BE(p*4);for(;p<64;++p)e[p]=Pde(e[p-2])+e[p-7]+Lde(e[p-15])+e[p-16]|0;for(var v=0;v<64;++v){var y=h+Bde(o)+Rde(o,u,l)+Dde[v]+e[v]|0,S=Fde(r)+Cde(r,n,a)|0;h=l,l=u,u=o,o=s+y|0,s=a,a=n,n=r,r=y+S|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=a+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0,this._f=u+this._f|0,this._g=l+this._g|0,this._h=h+this._h|0};Zv.prototype._hash=function(){var t=Ide.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t};x7.exports=Zv});var E7=ne((PXe,S7)=>{var qde=Et(),$de=rk(),zde=Nc(),jde=fr().Buffer,Ude=new Array(64);function Sw(){this.init(),this._w=Ude,zde.call(this,64,56)}qde(Sw,$de);Sw.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};Sw.prototype._hash=function(){var t=jde.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t};S7.exports=Sw});var nk=ne((qXe,D7)=>{var Vde=Et(),I7=Nc(),Wde=fr().Buffer,M7=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],Gde=new Array(160);function Jv(){this.init(),this._w=Gde,I7.call(this,128,112)}Vde(Jv,I7);Jv.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function A7(t,e,r){return r^t&(e^r)}function k7(t,e,r){return t&e|r&(t|e)}function T7(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function N7(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function Hde(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function Kde(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function Zde(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function Jde(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function Ii(t,e){return t>>>0<e>>>0?1:0}Jv.prototype._update=function(t){for(var e=this._w,r=this._ah|0,n=this._bh|0,a=this._ch|0,s=this._dh|0,o=this._eh|0,u=this._fh|0,l=this._gh|0,h=this._hh|0,p=this._al|0,v=this._bl|0,y=this._cl|0,S=this._dl|0,A=this._el|0,T=this._fl|0,I=this._gl|0,N=this._hl|0,D=0;D<32;D+=2)e[D]=t.readInt32BE(D*4),e[D+1]=t.readInt32BE(D*4+4);for(;D<160;D+=2){var C=e[D-30],L=e[D-15*2+1],z=Hde(C,L),$=Kde(L,C);C=e[D-2*2],L=e[D-2*2+1];var G=Zde(C,L),j=Jde(L,C),K=e[D-7*2],M=e[D-7*2+1],f=e[D-16*2],d=e[D-16*2+1],g=$+M|0,m=z+K+Ii(g,$)|0;g=g+j|0,m=m+G+Ii(g,j)|0,g=g+d|0,m=m+f+Ii(g,d)|0,e[D]=m,e[D+1]=g}for(var b=0;b<160;b+=2){m=e[b],g=e[b+1];var E=k7(r,n,a),k=k7(p,v,y),w=T7(r,p),c=T7(p,r),_=N7(o,A),R=N7(A,o),O=M7[b],F=M7[b+1],U=A7(o,u,l),H=A7(A,T,I),J=N+R|0,fe=h+_+Ii(J,N)|0;J=J+H|0,fe=fe+U+Ii(J,H)|0,J=J+F|0,fe=fe+O+Ii(J,F)|0,J=J+g|0,fe=fe+m+Ii(J,g)|0;var B=c+k|0,q=w+E+Ii(B,c)|0;h=l,N=I,l=u,I=T,u=o,T=A,A=S+J|0,o=s+fe+Ii(A,S)|0,s=a,S=y,a=n,y=v,n=r,v=p,p=J+B|0,r=fe+q+Ii(p,J)|0}this._al=this._al+p|0,this._bl=this._bl+v|0,this._cl=this._cl+y|0,this._dl=this._dl+S|0,this._el=this._el+A|0,this._fl=this._fl+T|0,this._gl=this._gl+I|0,this._hl=this._hl+N|0,this._ah=this._ah+r+Ii(this._al,p)|0,this._bh=this._bh+n+Ii(this._bl,v)|0,this._ch=this._ch+a+Ii(this._cl,y)|0,this._dh=this._dh+s+Ii(this._dl,S)|0,this._eh=this._eh+o+Ii(this._el,A)|0,this._fh=this._fh+u+Ii(this._fl,T)|0,this._gh=this._gh+l+Ii(this._gl,I)|0,this._hh=this._hh+h+Ii(this._hl,N)|0};Jv.prototype._hash=function(){var t=Wde.allocUnsafe(64);function e(r,n,a){t.writeInt32BE(r,a),t.writeInt32BE(n,a+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t};D7.exports=Jv});var R7=ne(($Xe,O7)=>{var Yde=Et(),Xde=nk(),Qde=Nc(),epe=fr().Buffer,tpe=new Array(160);function Ew(){this.init(),this._w=tpe,Qde.call(this,128,112)}Yde(Ew,Xde);Ew.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};Ew.prototype._hash=function(){var t=epe.allocUnsafe(48);function e(r,n,a){t.writeInt32BE(r,a),t.writeInt32BE(n,a+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t};O7.exports=Ew});var Mw=ne((Ju,C7)=>{var Ju=C7.exports=function(e){e=e.toLowerCase();var r=Ju[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r};Ju.sha=g7();Ju.sha1=w7();Ju.sha224=E7();Ju.sha256=rk();Ju.sha384=R7();Ju.sha512=nk()});var ik=ne((zXe,F7)=>{F7.exports=vs().EventEmitter});var q7=ne((jXe,P7)=>{"use strict";function B7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function rpe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?B7(Object(r),!0).forEach(function(n){npe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B7(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function npe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ipe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L7(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ape(t,e,r){return e&&L7(t.prototype,e),r&&L7(t,r),t}var spe=mn(),Aw=spe.Buffer,ope=uu(),ak=ope.inspect,upe=ak&&ak.custom||"inspect";function fpe(t,e,r){Aw.prototype.copy.call(t,e,r)}P7.exports=function(){function t(){ipe(this,t),this.head=null,this.tail=null,this.length=0}return ape(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,a=""+n.data;n=n.next;)a+=r+n.data;return a}},{key:"concat",value:function(r){if(this.length===0)return Aw.alloc(0);for(var n=Aw.allocUnsafe(r>>>0),a=this.head,s=0;a;)fpe(a.data,n,s),s+=a.data.length,a=a.next;return n}},{key:"consume",value:function(r,n){var a;return r<this.head.data.length?(a=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?a=this.shift():a=n?this._getString(r):this._getBuffer(r),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,a=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,u=r>o.length?o.length:r;if(u===o.length?s+=o:s+=o.slice(0,r),r-=u,r===0){u===o.length?(++a,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(u));break}++a}return this.length-=a,s}},{key:"_getBuffer",value:function(r){var n=Aw.allocUnsafe(r),a=this.head,s=1;for(a.data.copy(n),r-=a.data.length;a=a.next;){var o=a.data,u=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,u),r-=u,r===0){u===o.length?(++s,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=o.slice(u));break}++s}return this.length-=s,n}},{key:upe,value:function(r,n){return ak(this,rpe({},n,{depth:0,customInspect:!1}))}}]),t}()});var ok=ne((UXe,z7)=>{"use strict";function lpe(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return n||a?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(sk,this,t)):process.nextTick(sk,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(kw,r):(r._writableState.errorEmitted=!0,process.nextTick($7,r,s)):process.nextTick($7,r,s):e?(process.nextTick(kw,r),e(s)):process.nextTick(kw,r)}),this)}function $7(t,e){sk(t,e),kw(t)}function kw(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function cpe(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function sk(t,e){t.emit("error",e)}function hpe(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}z7.exports={destroy:lpe,undestroy:cpe,errorOrDestroy:hpe}});var Ic=ne((VXe,V7)=>{"use strict";function dpe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var U7={};function Es(t,e,r){r||(r=Error);function n(s,o,u){return typeof e=="string"?e:e(s,o,u)}var a=function(s){dpe(o,s);function o(u,l,h){return s.call(this,n(u,l,h))||this}return o}(r);a.prototype.name=r.name,a.prototype.code=t,U7[t]=a}function j7(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function ppe(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function mpe(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function vpe(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}Es("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Es("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&ppe(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var a;if(mpe(t," argument"))a="The ".concat(t," ").concat(n," ").concat(j7(e,"type"));else{var s=vpe(t,".")?"property":"argument";a='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat(j7(e,"type"))}return a+=". Received type ".concat(typeof r),a},TypeError);Es("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Es("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Es("ERR_STREAM_PREMATURE_CLOSE","Premature close");Es("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Es("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Es("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Es("ERR_STREAM_WRITE_AFTER_END","write after end");Es("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Es("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Es("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");V7.exports.codes=U7});var uk=ne((WXe,W7)=>{"use strict";var gpe=Ic().codes.ERR_INVALID_OPT_VALUE;function ype(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function bpe(t,e,r,n){var a=ype(e,n,r);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var s=n?r:"highWaterMark";throw new gpe(s,a)}return Math.floor(a)}return t.objectMode?16:16*1024}W7.exports={getHighWaterMark:bpe}});var ck=ne((GXe,Y7)=>{"use strict";Y7.exports=ni;function H7(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Gpe(e,t)}}var Wd;ni.WritableState=Xv;var wpe={deprecate:Sv()},K7=ik(),Nw=mn().Buffer,_pe=global.Uint8Array||function(){};function xpe(t){return Nw.from(t)}function Spe(t){return Nw.isBuffer(t)||t instanceof _pe}var lk=ok(),Epe=uk(),Mpe=Epe.getHighWaterMark,fl=Ic().codes,Ape=fl.ERR_INVALID_ARG_TYPE,kpe=fl.ERR_METHOD_NOT_IMPLEMENTED,Tpe=fl.ERR_MULTIPLE_CALLBACK,Npe=fl.ERR_STREAM_CANNOT_PIPE,Ipe=fl.ERR_STREAM_DESTROYED,Dpe=fl.ERR_STREAM_NULL_VALUES,Ope=fl.ERR_STREAM_WRITE_AFTER_END,Rpe=fl.ERR_UNKNOWN_ENCODING,Gd=lk.errorOrDestroy;Et()(ni,K7);function Cpe(){}function Xv(t,e,r){Wd=Wd||Dc(),t=t||{},typeof r!="boolean"&&(r=e instanceof Wd),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=Mpe(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){zpe(e,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new H7(this)}Xv.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(Xv.prototype,"buffer",{get:wpe.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Tw;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Tw=Function.prototype[Symbol.hasInstance],Object.defineProperty(ni,Symbol.hasInstance,{value:function(e){return Tw.call(this,e)?!0:this!==ni?!1:e&&e._writableState instanceof Xv}})):Tw=function(e){return e instanceof this};function ni(t){Wd=Wd||Dc();var e=this instanceof Wd;if(!e&&!Tw.call(ni,this))return new ni(t);this._writableState=new Xv(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),K7.call(this)}ni.prototype.pipe=function(){Gd(this,new Npe)};function Fpe(t,e){var r=new Ope;Gd(t,r),process.nextTick(e,r)}function Bpe(t,e,r,n){var a;return r===null?a=new Dpe:typeof r!="string"&&!e.objectMode&&(a=new Ape("chunk",["string","Buffer"],r)),a?(Gd(t,a),process.nextTick(n,a),!1):!0}ni.prototype.write=function(t,e,r){var n=this._writableState,a=!1,s=!n.objectMode&&Spe(t);return s&&!Nw.isBuffer(t)&&(t=xpe(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=Cpe),n.ending?Fpe(this,r):(s||Bpe(this,n,t,r))&&(n.pendingcb++,a=Ppe(this,n,s,t,e,r)),a};ni.prototype.cork=function(){this._writableState.corked++};ni.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&Z7(this,t))};ni.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new Rpe(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(ni.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Lpe(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Nw.from(e,r)),e}Object.defineProperty(ni.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Ppe(t,e,r,n,a,s){if(!r){var o=Lpe(e,n,a);n!==o&&(r=!0,a="buffer",n=o)}var u=e.objectMode?1:n.length;e.length+=u;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:a,isBuf:r,callback:s,next:null},h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else fk(t,e,!1,u,n,a,s);return l}function fk(t,e,r,n,a,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Ipe("write")):r?t._writev(a,e.onwrite):t._write(a,s,e.onwrite),e.sync=!1}function qpe(t,e,r,n,a){--e.pendingcb,r?(process.nextTick(a,n),process.nextTick(Yv,t,e),t._writableState.errorEmitted=!0,Gd(t,n)):(a(n),t._writableState.errorEmitted=!0,Gd(t,n),Yv(t,e))}function $pe(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function zpe(t,e){var r=t._writableState,n=r.sync,a=r.writecb;if(typeof a!="function")throw new Tpe;if($pe(r),e)qpe(t,r,n,e,a);else{var s=J7(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Z7(t,r),n?process.nextTick(G7,t,r,s,a):G7(t,r,s,a)}}function G7(t,e,r,n){r||jpe(t,e),e.pendingcb--,n(),Yv(t,e)}function jpe(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function Z7(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,a=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,u=!0;r;)a[o]=r,r.isBuf||(u=!1),r=r.next,o+=1;a.allBuffers=u,fk(t,e,!0,e.length,a,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new H7(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,h=r.encoding,p=r.callback,v=e.objectMode?1:l.length;if(fk(t,e,!1,v,l,h,p),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}ni.prototype._write=function(t,e,r){r(new kpe("_write()"))};ni.prototype._writev=null;ni.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||Wpe(this,n,r),this};Object.defineProperty(ni.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function J7(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Upe(t,e){t._final(function(r){e.pendingcb--,r&&Gd(t,r),e.prefinished=!0,t.emit("prefinish"),Yv(t,e)})}function Vpe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(Upe,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Yv(t,e){var r=J7(e);if(r&&(Vpe(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function Wpe(t,e,r){e.ending=!0,Yv(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Gpe(t,e,r){var n=t.entry;for(t.entry=null;n;){var a=n.callback;e.pendingcb--,a(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(ni.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});ni.prototype.destroy=lk.destroy;ni.prototype._undestroy=lk.undestroy;ni.prototype._destroy=function(t,e){e(t)}});var Dc=ne((HXe,Q7)=>{"use strict";var Hpe=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};Q7.exports=vu;var X7=pk(),dk=ck();Et()(vu,X7);for(hk=Hpe(dk.prototype),Iw=0;Iw<hk.length;Iw++)Dw=hk[Iw],vu.prototype[Dw]||(vu.prototype[Dw]=dk.prototype[Dw]);var hk,Dw,Iw;function vu(t){if(!(this instanceof vu))return new vu(t);X7.call(this,t),dk.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",Kpe)))}Object.defineProperty(vu.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(vu.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(vu.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Kpe(){this._writableState.ended||process.nextTick(Zpe,this)}function Zpe(t){t.end()}Object.defineProperty(vu.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var Ow=ne((KXe,r9)=>{"use strict";var e9=Ic().codes.ERR_STREAM_PREMATURE_CLOSE;function Jpe(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];t.apply(this,n)}}}function Ype(){}function Xpe(t){return t.setHeader&&typeof t.abort=="function"}function t9(t,e,r){if(typeof e=="function")return t9(t,null,e);e||(e={}),r=Jpe(r||Ype);var n=e.readable||e.readable!==!1&&t.readable,a=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||u()},o=t._writableState&&t._writableState.finished,u=function(){a=!1,o=!0,n||r.call(t)},l=t._readableState&&t._readableState.endEmitted,h=function(){n=!1,l=!0,a||r.call(t)},p=function(A){r.call(t,A)},v=function(){var A;if(n&&!l)return(!t._readableState||!t._readableState.ended)&&(A=new e9),r.call(t,A);if(a&&!o)return(!t._writableState||!t._writableState.ended)&&(A=new e9),r.call(t,A)},y=function(){t.req.on("finish",u)};return Xpe(t)?(t.on("complete",u),t.on("abort",v),t.req?y():t.on("request",y)):a&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",h),t.on("finish",u),e.error!==!1&&t.on("error",p),t.on("close",v),function(){t.removeListener("complete",u),t.removeListener("abort",v),t.removeListener("request",y),t.req&&t.req.removeListener("finish",u),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",u),t.removeListener("end",h),t.removeListener("error",p),t.removeListener("close",v)}}r9.exports=t9});var i9=ne((ZXe,n9)=>{"use strict";var Rw;function ll(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Qpe=Ow(),cl=Symbol("lastResolve"),Oc=Symbol("lastReject"),Qv=Symbol("error"),Cw=Symbol("ended"),Rc=Symbol("lastPromise"),mk=Symbol("handlePromise"),Cc=Symbol("stream");function hl(t,e){return{value:t,done:e}}function e0e(t){var e=t[cl];if(e!==null){var r=t[Cc].read();r!==null&&(t[Rc]=null,t[cl]=null,t[Oc]=null,e(hl(r,!1)))}}function t0e(t){process.nextTick(e0e,t)}function r0e(t,e){return function(r,n){t.then(function(){if(e[Cw]){r(hl(void 0,!0));return}e[mk](r,n)},n)}}var n0e=Object.getPrototypeOf(function(){}),i0e=Object.setPrototypeOf((Rw={get stream(){return this[Cc]},next:function(){var e=this,r=this[Qv];if(r!==null)return Promise.reject(r);if(this[Cw])return Promise.resolve(hl(void 0,!0));if(this[Cc].destroyed)return new Promise(function(o,u){process.nextTick(function(){e[Qv]?u(e[Qv]):o(hl(void 0,!0))})});var n=this[Rc],a;if(n)a=new Promise(r0e(n,this));else{var s=this[Cc].read();if(s!==null)return Promise.resolve(hl(s,!1));a=new Promise(this[mk])}return this[Rc]=a,a}},ll(Rw,Symbol.asyncIterator,function(){return this}),ll(Rw,"return",function(){var e=this;return new Promise(function(r,n){e[Cc].destroy(null,function(a){if(a){n(a);return}r(hl(void 0,!0))})})}),Rw),n0e),a0e=function(e){var r,n=Object.create(i0e,(r={},ll(r,Cc,{value:e,writable:!0}),ll(r,cl,{value:null,writable:!0}),ll(r,Oc,{value:null,writable:!0}),ll(r,Qv,{value:null,writable:!0}),ll(r,Cw,{value:e._readableState.endEmitted,writable:!0}),ll(r,mk,{value:function(s,o){var u=n[Cc].read();u?(n[Rc]=null,n[cl]=null,n[Oc]=null,s(hl(u,!1))):(n[cl]=s,n[Oc]=o)},writable:!0}),r));return n[Rc]=null,Qpe(e,function(a){if(a&&a.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[Oc];s!==null&&(n[Rc]=null,n[cl]=null,n[Oc]=null,s(a)),n[Qv]=a;return}var o=n[cl];o!==null&&(n[Rc]=null,n[cl]=null,n[Oc]=null,o(hl(void 0,!0))),n[Cw]=!0}),e.on("readable",t0e.bind(null,n)),n};n9.exports=a0e});var s9=ne((JXe,a9)=>{a9.exports=function(){throw new Error("Readable.from is not available in the browser")}});var pk=ne((XXe,v9)=>{"use strict";v9.exports=yr;var Hd;yr.ReadableState=l9;var YXe=vs().EventEmitter,f9=function(e,r){return e.listeners(r).length},tg=ik(),Fw=mn().Buffer,s0e=global.Uint8Array||function(){};function o0e(t){return Fw.from(t)}function u0e(t){return Fw.isBuffer(t)||t instanceof s0e}var vk=uu(),tr;vk&&vk.debuglog?tr=vk.debuglog("stream"):tr=function(){};var f0e=q7(),Sk=ok(),l0e=uk(),c0e=l0e.getHighWaterMark,Bw=Ic().codes,h0e=Bw.ERR_INVALID_ARG_TYPE,d0e=Bw.ERR_STREAM_PUSH_AFTER_EOF,p0e=Bw.ERR_METHOD_NOT_IMPLEMENTED,m0e=Bw.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Kd,gk,yk;Et()(yr,tg);var eg=Sk.errorOrDestroy,bk=["error","close","destroy","pause","resume"];function v0e(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function l9(t,e,r){Hd=Hd||Dc(),t=t||{},typeof r!="boolean"&&(r=e instanceof Hd),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=c0e(this,t,"readableHighWaterMark",r),this.buffer=new f0e,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Kd||(Kd=cu().StringDecoder),this.decoder=new Kd(t.encoding),this.encoding=t.encoding)}function yr(t){if(Hd=Hd||Dc(),!(this instanceof yr))return new yr(t);var e=this instanceof Hd;this._readableState=new l9(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),tg.call(this)}Object.defineProperty(yr.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});yr.prototype.destroy=Sk.destroy;yr.prototype._undestroy=Sk.undestroy;yr.prototype._destroy=function(t,e){e(t)};yr.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Fw.from(t,e),e=""),n=!0),c9(this,t,e,!1,n)};yr.prototype.unshift=function(t){return c9(this,t,null,!0,!1)};function c9(t,e,r,n,a){tr("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,b0e(t,s);else{var o;if(a||(o=g0e(s,e)),o)eg(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==Fw.prototype&&(e=o0e(e)),n)s.endEmitted?eg(t,new m0e):wk(t,s,e,!0);else if(s.ended)eg(t,new d0e);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?wk(t,s,e,!1):xk(t,s)):wk(t,s,e,!1)}else n||(s.reading=!1,xk(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function wk(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Lw(t)),xk(t,e)}function g0e(t,e){var r;return!u0e(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new h0e("chunk",["string","Buffer","Uint8Array"],e)),r}yr.prototype.isPaused=function(){return this._readableState.flowing===!1};yr.prototype.setEncoding=function(t){Kd||(Kd=cu().StringDecoder);var e=new Kd(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var o9=1073741824;function y0e(t){return t>=o9?t=o9:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function u9(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=y0e(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}yr.prototype.read=function(t){tr("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return tr("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?_k(this):Lw(this),null;if(t=u9(t,e),t===0&&e.ended)return e.length===0&&_k(this),null;var n=e.needReadable;tr("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,tr("length less than watermark",n)),e.ended||e.reading?(n=!1,tr("reading or ended",n)):n&&(tr("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=u9(r,e)));var a;return t>0?a=p9(t,e):a=null,a===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&_k(this)),a!==null&&this.emit("data",a),a};function b0e(t,e){if(tr("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Lw(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,h9(t)))}}function Lw(t){var e=t._readableState;tr("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(tr("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(h9,t))}function h9(t){var e=t._readableState;tr("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Ek(t)}function xk(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(w0e,t,e))}function w0e(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(tr("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}yr.prototype._read=function(t){eg(this,new p0e("_read()"))};yr.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,tr("pipe count=%d opts=%j",n.pipesCount,e);var a=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=a?u:T;n.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(I,N){tr("onunpipe"),I===r&&N&&N.hasUnpiped===!1&&(N.hasUnpiped=!0,p())}function u(){tr("onend"),t.end()}var l=_0e(r);t.on("drain",l);var h=!1;function p(){tr("cleanup"),t.removeListener("close",S),t.removeListener("finish",A),t.removeListener("drain",l),t.removeListener("error",y),t.removeListener("unpipe",o),r.removeListener("end",u),r.removeListener("end",T),r.removeListener("data",v),h=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l()}r.on("data",v);function v(I){tr("ondata");var N=t.write(I);tr("dest.write",N),N===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&m9(n.pipes,t)!==-1)&&!h&&(tr("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function y(I){tr("onerror",I),T(),t.removeListener("error",y),f9(t,"error")===0&&eg(t,I)}v0e(t,"error",y);function S(){t.removeListener("finish",A),T()}t.once("close",S);function A(){tr("onfinish"),t.removeListener("close",S),T()}t.once("finish",A);function T(){tr("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(tr("pipe resume"),r.resume()),t};function _0e(t){return function(){var r=t._readableState;tr("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&f9(t,"data")&&(r.flowing=!0,Ek(t))}}yr.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,a=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<a;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=m9(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};yr.prototype.on=function(t,e){var r=tg.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,tr("on readable",n.length,n.reading),n.length?Lw(this):n.reading||process.nextTick(x0e,this)),r};yr.prototype.addListener=yr.prototype.on;yr.prototype.removeListener=function(t,e){var r=tg.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(d9,this),r};yr.prototype.removeAllListeners=function(t){var e=tg.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(d9,this),e};function d9(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function x0e(t){tr("readable nexttick read 0"),t.read(0)}yr.prototype.resume=function(){var t=this._readableState;return t.flowing||(tr("resume"),t.flowing=!t.readableListening,S0e(this,t)),t.paused=!1,this};function S0e(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(E0e,t,e))}function E0e(t,e){tr("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Ek(t),e.flowing&&!e.reading&&t.read(0)}yr.prototype.pause=function(){return tr("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(tr("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Ek(t){var e=t._readableState;for(tr("flow",e.flowing);e.flowing&&t.read()!==null;);}yr.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(tr("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(tr("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var u=e.push(o);u||(n=!0,t.pause())}});for(var a in t)this[a]===void 0&&typeof t[a]=="function"&&(this[a]=function(u){return function(){return t[u].apply(t,arguments)}}(a));for(var s=0;s<bk.length;s++)t.on(bk[s],this.emit.bind(this,bk[s]));return this._read=function(o){tr("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(yr.prototype[Symbol.asyncIterator]=function(){return gk===void 0&&(gk=i9()),gk(this)});Object.defineProperty(yr.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(yr.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(yr.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});yr._fromList=p9;Object.defineProperty(yr.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function p9(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function _k(t){var e=t._readableState;tr("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(M0e,e,t))}function M0e(t,e){if(tr("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(yr.from=function(t,e){return yk===void 0&&(yk=s9()),yk(yr,t,e)});function m9(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var Mk=ne((QXe,y9)=>{"use strict";y9.exports=Yu;var Pw=Ic().codes,A0e=Pw.ERR_METHOD_NOT_IMPLEMENTED,k0e=Pw.ERR_MULTIPLE_CALLBACK,T0e=Pw.ERR_TRANSFORM_ALREADY_TRANSFORMING,N0e=Pw.ERR_TRANSFORM_WITH_LENGTH_0,qw=Dc();Et()(Yu,qw);function I0e(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new k0e);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function Yu(t){if(!(this instanceof Yu))return new Yu(t);qw.call(this,t),this._transformState={afterTransform:I0e.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",D0e)}function D0e(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){g9(t,e,r)}):g9(this,null,null)}Yu.prototype.push=function(t,e){return this._transformState.needTransform=!1,qw.prototype.push.call(this,t,e)};Yu.prototype._transform=function(t,e,r){r(new A0e("_transform()"))};Yu.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var a=this._readableState;(n.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}};Yu.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Yu.prototype._destroy=function(t,e){qw.prototype._destroy.call(this,t,function(r){e(r)})};function g9(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new N0e;if(t._transformState.transforming)throw new T0e;return t.push(null)}});var _9=ne((eQe,w9)=>{"use strict";w9.exports=rg;var b9=Mk();Et()(rg,b9);function rg(t){if(!(this instanceof rg))return new rg(t);b9.call(this,t)}rg.prototype._transform=function(t,e,r){r(null,t)}});var A9=ne((tQe,M9)=>{"use strict";var Ak;function O0e(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var E9=Ic().codes,R0e=E9.ERR_MISSING_ARGS,C0e=E9.ERR_STREAM_DESTROYED;function x9(t){if(t)throw t}function F0e(t){return t.setHeader&&typeof t.abort=="function"}function B0e(t,e,r,n){n=O0e(n);var a=!1;t.on("close",function(){a=!0}),Ak===void 0&&(Ak=Ow()),Ak(t,{readable:e,writable:r},function(o){if(o)return n(o);a=!0,n()});var s=!1;return function(o){if(!a&&!s){if(s=!0,F0e(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new C0e("pipe"))}}}function S9(t){t()}function L0e(t,e){return t.pipe(e)}function P0e(t){return!t.length||typeof t[t.length-1]!="function"?x9:t.pop()}function q0e(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=P0e(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new R0e("streams");var a,s=e.map(function(o,u){var l=u<e.length-1,h=u>0;return B0e(o,l,h,function(p){a||(a=p),p&&s.forEach(S9),!l&&(s.forEach(S9),n(a))})});return e.reduce(L0e)}M9.exports=q0e});var T9=ne((rQe,k9)=>{k9.exports=Ms;var kk=vs().EventEmitter,$0e=Et();$0e(Ms,kk);Ms.Readable=pk();Ms.Writable=ck();Ms.Duplex=Dc();Ms.Transform=Mk();Ms.PassThrough=_9();Ms.finished=Ow();Ms.pipeline=A9();Ms.Stream=Ms;function Ms(){kk.call(this)}Ms.prototype.pipe=function(t,e){var r=this;function n(p){t.writable&&t.write(p)===!1&&r.pause&&r.pause()}r.on("data",n);function a(){r.readable&&r.resume&&r.resume()}t.on("drain",a),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",u));var s=!1;function o(){s||(s=!0,t.end())}function u(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(p){if(h(),kk.listenerCount(this,"error")===0)throw p}r.on("error",l),t.on("error",l);function h(){r.removeListener("data",n),t.removeListener("drain",a),r.removeListener("end",o),r.removeListener("close",u),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",h),r.removeListener("close",h),t.removeListener("close",h)}return r.on("end",h),r.on("close",h),t.on("close",h),t.emit("pipe",r),t}});var Xu=ne((nQe,D9)=>{var N9=fr().Buffer,I9=T9().Transform,z0e=cu().StringDecoder,j0e=Et();function Ao(t){I9.call(this),this.hashMode=typeof t=="string",this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}j0e(Ao,I9);Ao.prototype.update=function(t,e,r){typeof t=="string"&&(t=N9.from(t,e));var n=this._update(t);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)};Ao.prototype.setAutoPadding=function(){};Ao.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")};Ao.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")};Ao.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")};Ao.prototype._transform=function(t,e,r){var n;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(a){n=a}finally{r(n)}};Ao.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(r){e=r}t(e)};Ao.prototype._finalOrDigest=function(t){var e=this.__final()||N9.alloc(0);return t&&(e=this._toString(e,t,!0)),e};Ao.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new z0e(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var n=this._decoder.write(t);return r&&(n+=this._decoder.end()),n};D9.exports=Ao});var Zd=ne((iQe,R9)=>{"use strict";var U0e=Et(),V0e=bw(),W0e=_w(),G0e=Mw(),O9=Xu();function $w(t){O9.call(this,"digest"),this._hash=t}U0e($w,O9);$w.prototype._update=function(t){this._hash.update(t)};$w.prototype._final=function(){return this._hash.digest()};R9.exports=function(e){return e=e.toLowerCase(),e==="md5"?new V0e:e==="rmd160"||e==="ripemd160"?new W0e:new $w(G0e(e))}});var B9=ne((aQe,F9)=>{"use strict";var H0e=Et(),Fc=fr().Buffer,C9=Xu(),K0e=Fc.alloc(128),Jd=64;function zw(t,e){C9.call(this,"digest"),typeof e=="string"&&(e=Fc.from(e)),this._alg=t,this._key=e,e.length>Jd?e=t(e):e.length<Jd&&(e=Fc.concat([e,K0e],Jd));for(var r=this._ipad=Fc.allocUnsafe(Jd),n=this._opad=Fc.allocUnsafe(Jd),a=0;a<Jd;a++)r[a]=e[a]^54,n[a]=e[a]^92;this._hash=[r]}H0e(zw,C9);zw.prototype._update=function(t){this._hash.push(t)};zw.prototype._final=function(){var t=this._alg(Fc.concat(this._hash));return this._alg(Fc.concat([this._opad,t]))};F9.exports=zw});var Tk=ne((sQe,L9)=>{var Z0e=bw();L9.exports=function(t){return new Z0e().update(t).digest()}});var Dk=ne((oQe,q9)=>{"use strict";var J0e=Et(),Y0e=B9(),P9=Xu(),ng=fr().Buffer,X0e=Tk(),Nk=_w(),Ik=Mw(),Q0e=ng.alloc(128);function ig(t,e){P9.call(this,"digest"),typeof e=="string"&&(e=ng.from(e));var r=t==="sha512"||t==="sha384"?128:64;if(this._alg=t,this._key=e,e.length>r){var n=t==="rmd160"?new Nk:Ik(t);e=n.update(e).digest()}else e.length<r&&(e=ng.concat([e,Q0e],r));for(var a=this._ipad=ng.allocUnsafe(r),s=this._opad=ng.allocUnsafe(r),o=0;o<r;o++)a[o]=e[o]^54,s[o]=e[o]^92;this._hash=t==="rmd160"?new Nk:Ik(t),this._hash.update(a)}J0e(ig,P9);ig.prototype._update=function(t){this._hash.update(t)};ig.prototype._final=function(){var t=this._hash.digest(),e=this._alg==="rmd160"?new Nk:Ik(this._alg);return e.update(this._opad).update(t).digest()};q9.exports=function(e,r){return e=e.toLowerCase(),e==="rmd160"||e==="ripemd160"?new ig("rmd160",r):e==="md5"?new Y0e(X0e,r):new ig(e,r)}});var Ok=ne((uQe,eme)=>{eme.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}});var z9=ne((fQe,$9)=>{$9.exports=Ok()});var Rk=ne((lQe,j9)=>{var tme=Math.pow(2,30)-1;j9.exports=function(t,e){if(typeof t!="number")throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if(typeof e!="number")throw new TypeError("Key length not a number");if(e<0||e>tme||e!==e)throw new TypeError("Bad key length")}});var Ck=ne((cQe,V9)=>{var jw;global.process&&global.process.browser?jw="utf-8":global.process&&global.process.version?(U9=parseInt(process.version.split(".")[0].slice(1),10),jw=U9>=6?"utf-8":"binary"):jw="utf-8";var U9;V9.exports=jw});var Bk=ne((hQe,W9)=>{var Fk=fr().Buffer;W9.exports=function(t,e,r){if(Fk.isBuffer(t))return t;if(typeof t=="string")return Fk.from(t,e);if(ArrayBuffer.isView(t))return Fk.from(t.buffer);throw new TypeError(r+" must be a string, a Buffer, a typed array or a DataView")}});var Lk=ne((dQe,Z9)=>{var rme=Tk(),nme=_w(),ime=Mw(),Bc=fr().Buffer,ame=Rk(),G9=Ck(),H9=Bk(),sme=Bc.alloc(128),Uw={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function K9(t,e,r){var n=ome(t),a=t==="sha512"||t==="sha384"?128:64;e.length>a?e=n(e):e.length<a&&(e=Bc.concat([e,sme],a));for(var s=Bc.allocUnsafe(a+Uw[t]),o=Bc.allocUnsafe(a+Uw[t]),u=0;u<a;u++)s[u]=e[u]^54,o[u]=e[u]^92;var l=Bc.allocUnsafe(a+r+4);s.copy(l,0,0,a),this.ipad1=l,this.ipad2=s,this.opad=o,this.alg=t,this.blocksize=a,this.hash=n,this.size=Uw[t]}K9.prototype.run=function(t,e){t.copy(e,this.blocksize);var r=this.hash(e);return r.copy(this.opad,this.blocksize),this.hash(this.opad)};function ome(t){function e(n){return ime(t).update(n).digest()}function r(n){return new nme().update(n).digest()}return t==="rmd160"||t==="ripemd160"?r:t==="md5"?rme:e}function ume(t,e,r,n,a){ame(r,n),t=H9(t,G9,"Password"),e=H9(e,G9,"Salt"),a=a||"sha1";var s=new K9(a,t,e.length),o=Bc.allocUnsafe(n),u=Bc.allocUnsafe(e.length+4);e.copy(u,0,0,e.length);for(var l=0,h=Uw[a],p=Math.ceil(n/h),v=1;v<=p;v++){u.writeUInt32BE(v,e.length);for(var y=s.run(u,s.ipad1),S=y,A=1;A<r;A++){S=s.run(S,s.ipad2);for(var T=0;T<h;T++)y[T]^=S[T]}y.copy(o,l),l+=h}return o}Z9.exports=ume});var rB=ne((pQe,tB)=>{var Q9=fr().Buffer,fme=Rk(),J9=Ck(),Y9=Lk(),X9=Bk(),Vw,ag=global.crypto&&global.crypto.subtle,lme={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},Pk=[];function cme(t){if(global.process&&!global.process.browser||!ag||!ag.importKey||!ag.deriveBits)return Promise.resolve(!1);if(Pk[t]!==void 0)return Pk[t];Vw=Vw||Q9.alloc(8);var e=eB(Vw,Vw,10,128,t).then(function(){return!0}).catch(function(){return!1});return Pk[t]=e,e}var Lc;function qk(){return Lc||(global.process&&global.process.nextTick?Lc=global.process.nextTick:global.queueMicrotask?Lc=global.queueMicrotask:global.setImmediate?Lc=global.setImmediate:Lc=global.setTimeout,Lc)}function eB(t,e,r,n,a){return ag.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then(function(s){return ag.deriveBits({name:"PBKDF2",salt:e,iterations:r,hash:{name:a}},s,n<<3)}).then(function(s){return Q9.from(s)})}function hme(t,e){t.then(function(r){qk()(function(){e(null,r)})},function(r){qk()(function(){e(r)})})}tB.exports=function(t,e,r,n,a,s){typeof a=="function"&&(s=a,a=void 0),a=a||"sha1";var o=lme[a.toLowerCase()];if(!o||typeof global.Promise!="function"){qk()(function(){var u;try{u=Y9(t,e,r,n,a)}catch(l){return s(l)}s(null,u)});return}if(fme(r,n),t=X9(t,J9,"Password"),e=X9(e,J9,"Salt"),typeof s!="function")throw new Error("No callback provided to pbkdf2");hme(cme(o).then(function(u){return u?eB(t,e,r,n,o):Y9(t,e,r,n,a)}),s)}});var zk=ne($k=>{$k.pbkdf2=rB();$k.pbkdf2Sync=Lk()});var jk=ne(As=>{"use strict";As.readUInt32BE=function(e,r){var n=e[0+r]<<24|e[1+r]<<16|e[2+r]<<8|e[3+r];return n>>>0};As.writeUInt32BE=function(e,r,n){e[0+n]=r>>>24,e[1+n]=r>>>16&255,e[2+n]=r>>>8&255,e[3+n]=r&255};As.ip=function(e,r,n,a){for(var s=0,o=0,u=6;u>=0;u-=2){for(var l=0;l<=24;l+=8)s<<=1,s|=r>>>l+u&1;for(var l=0;l<=24;l+=8)s<<=1,s|=e>>>l+u&1}for(var u=6;u>=0;u-=2){for(var l=1;l<=25;l+=8)o<<=1,o|=r>>>l+u&1;for(var l=1;l<=25;l+=8)o<<=1,o|=e>>>l+u&1}n[a+0]=s>>>0,n[a+1]=o>>>0};As.rip=function(e,r,n,a){for(var s=0,o=0,u=0;u<4;u++)for(var l=24;l>=0;l-=8)s<<=1,s|=r>>>l+u&1,s<<=1,s|=e>>>l+u&1;for(var u=4;u<8;u++)for(var l=24;l>=0;l-=8)o<<=1,o|=r>>>l+u&1,o<<=1,o|=e>>>l+u&1;n[a+0]=s>>>0,n[a+1]=o>>>0};As.pc1=function(e,r,n,a){for(var s=0,o=0,u=7;u>=5;u--){for(var l=0;l<=24;l+=8)s<<=1,s|=r>>l+u&1;for(var l=0;l<=24;l+=8)s<<=1,s|=e>>l+u&1}for(var l=0;l<=24;l+=8)s<<=1,s|=r>>l+u&1;for(var u=1;u<=3;u++){for(var l=0;l<=24;l+=8)o<<=1,o|=r>>l+u&1;for(var l=0;l<=24;l+=8)o<<=1,o|=e>>l+u&1}for(var l=0;l<=24;l+=8)o<<=1,o|=e>>l+u&1;n[a+0]=s>>>0,n[a+1]=o>>>0};As.r28shl=function(e,r){return e<<r&268435455|e>>>28-r};var Ww=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];As.pc2=function(e,r,n,a){for(var s=0,o=0,u=Ww.length>>>1,l=0;l<u;l++)s<<=1,s|=e>>>Ww[l]&1;for(var l=u;l<Ww.length;l++)o<<=1,o|=r>>>Ww[l]&1;n[a+0]=s>>>0,n[a+1]=o>>>0};As.expand=function(e,r,n){var a=0,s=0;a=(e&1)<<5|e>>>27;for(var o=23;o>=15;o-=4)a<<=6,a|=e>>>o&63;for(var o=11;o>=3;o-=4)s|=e>>>o&63,s<<=6;s|=(e&31)<<1|e>>>31,r[n+0]=a>>>0,r[n+1]=s>>>0};var nB=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];As.substitute=function(e,r){for(var n=0,a=0;a<4;a++){var s=e>>>18-a*6&63,o=nB[a*64+s];n<<=4,n|=o}for(var a=0;a<4;a++){var s=r>>>18-a*6&63,o=nB[4*64+a*64+s];n<<=4,n|=o}return n>>>0};var iB=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];As.permute=function(e){for(var r=0,n=0;n<iB.length;n++)r<<=1,r|=e>>>iB[n]&1;return r>>>0};As.padSplit=function(e,r,n){for(var a=e.toString(2);a.length<r;)a="0"+a;for(var s=[],o=0;o<r;o+=n)s.push(a.slice(o,o+n));return s.join(" ")}});var Qa=ne((gQe,sB)=>{sB.exports=aB;function aB(t,e){if(!t)throw new Error(e||"Assertion failed")}aB.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)}});var Gw=ne((yQe,oB)=>{"use strict";var dme=Qa();function ks(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}oB.exports=ks;ks.prototype._init=function(){};ks.prototype.update=function(e){return e.length===0?[]:this.type==="decrypt"?this._updateDecrypt(e):this._updateEncrypt(e)};ks.prototype._buffer=function(e,r){for(var n=Math.min(this.buffer.length-this.bufferOff,e.length-r),a=0;a<n;a++)this.buffer[this.bufferOff+a]=e[r+a];return this.bufferOff+=n,n};ks.prototype._flushBuffer=function(e,r){return this._update(this.buffer,0,e,r),this.bufferOff=0,this.blockSize};ks.prototype._updateEncrypt=function(e){var r=0,n=0,a=(this.bufferOff+e.length)/this.blockSize|0,s=new Array(a*this.blockSize);this.bufferOff!==0&&(r+=this._buffer(e,r),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(s,n)));for(var o=e.length-(e.length-r)%this.blockSize;r<o;r+=this.blockSize)this._update(e,r,s,n),n+=this.blockSize;for(;r<e.length;r++,this.bufferOff++)this.buffer[this.bufferOff]=e[r];return s};ks.prototype._updateDecrypt=function(e){for(var r=0,n=0,a=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,s=new Array(a*this.blockSize);a>0;a--)r+=this._buffer(e,r),n+=this._flushBuffer(s,n);return r+=this._buffer(e,r),s};ks.prototype.final=function(e){var r;e&&(r=this.update(e));var n;return this.type==="encrypt"?n=this._finalEncrypt():n=this._finalDecrypt(),r?r.concat(n):n};ks.prototype._pad=function(e,r){if(r===0)return!1;for(;r<e.length;)e[r++]=0;return!0};ks.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e};ks.prototype._unpad=function(e){return e};ks.prototype._finalDecrypt=function(){dme.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}});var Uk=ne((bQe,lB)=>{"use strict";var uB=Qa(),pme=Et(),wi=jk(),fB=Gw();function mme(){this.tmp=new Array(2),this.keys=null}function gu(t){fB.call(this,t);var e=new mme;this._desState=e,this.deriveKeys(e,t.key)}pme(gu,fB);lB.exports=gu;gu.create=function(e){return new gu(e)};var vme=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];gu.prototype.deriveKeys=function(e,r){e.keys=new Array(16*2),uB.equal(r.length,this.blockSize,"Invalid key length");var n=wi.readUInt32BE(r,0),a=wi.readUInt32BE(r,4);wi.pc1(n,a,e.tmp,0),n=e.tmp[0],a=e.tmp[1];for(var s=0;s<e.keys.length;s+=2){var o=vme[s>>>1];n=wi.r28shl(n,o),a=wi.r28shl(a,o),wi.pc2(n,a,e.keys,s)}};gu.prototype._update=function(e,r,n,a){var s=this._desState,o=wi.readUInt32BE(e,r),u=wi.readUInt32BE(e,r+4);wi.ip(o,u,s.tmp,0),o=s.tmp[0],u=s.tmp[1],this.type==="encrypt"?this._encrypt(s,o,u,s.tmp,0):this._decrypt(s,o,u,s.tmp,0),o=s.tmp[0],u=s.tmp[1],wi.writeUInt32BE(n,o,a),wi.writeUInt32BE(n,u,a+4)};gu.prototype._pad=function(e,r){for(var n=e.length-r,a=r;a<e.length;a++)e[a]=n;return!0};gu.prototype._unpad=function(e){for(var r=e[e.length-1],n=e.length-r;n<e.length;n++)uB.equal(e[n],r);return e.slice(0,e.length-r)};gu.prototype._encrypt=function(e,r,n,a,s){for(var o=r,u=n,l=0;l<e.keys.length;l+=2){var h=e.keys[l],p=e.keys[l+1];wi.expand(u,e.tmp,0),h^=e.tmp[0],p^=e.tmp[1];var v=wi.substitute(h,p),y=wi.permute(v),S=u;u=(o^y)>>>0,o=S}wi.rip(u,o,a,s)};gu.prototype._decrypt=function(e,r,n,a,s){for(var o=n,u=r,l=e.keys.length-2;l>=0;l-=2){var h=e.keys[l],p=e.keys[l+1];wi.expand(o,e.tmp,0),h^=e.tmp[0],p^=e.tmp[1];var v=wi.substitute(h,p),y=wi.permute(v),S=o;o=(u^y)>>>0,u=S}wi.rip(o,u,a,s)}});var hB=ne(cB=>{"use strict";var gme=Qa(),yme=Et(),Hw={};function bme(t){gme.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}function wme(t){function e(s){t.call(this,s),this._cbcInit()}yme(e,t);for(var r=Object.keys(Hw),n=0;n<r.length;n++){var a=r[n];e.prototype[a]=Hw[a]}return e.create=function(o){return new e(o)},e}cB.instantiate=wme;Hw._cbcInit=function(){var e=new bme(this.options.iv);this._cbcState=e};Hw._update=function(e,r,n,a){var s=this._cbcState,o=this.constructor.super_.prototype,u=s.iv;if(this.type==="encrypt"){for(var l=0;l<this.blockSize;l++)u[l]^=e[r+l];o._update.call(this,u,0,n,a);for(var l=0;l<this.blockSize;l++)u[l]=n[a+l]}else{o._update.call(this,e,r,n,a);for(var l=0;l<this.blockSize;l++)n[a+l]^=u[l];for(var l=0;l<this.blockSize;l++)u[l]=e[r+l]}}});var mB=ne((_Qe,pB)=>{"use strict";var _me=Qa(),xme=Et(),dB=Gw(),dl=Uk();function Sme(t,e){_me.equal(e.length,24,"Invalid key length");var r=e.slice(0,8),n=e.slice(8,16),a=e.slice(16,24);t==="encrypt"?this.ciphers=[dl.create({type:"encrypt",key:r}),dl.create({type:"decrypt",key:n}),dl.create({type:"encrypt",key:a})]:this.ciphers=[dl.create({type:"decrypt",key:a}),dl.create({type:"encrypt",key:n}),dl.create({type:"decrypt",key:r})]}function Pc(t){dB.call(this,t);var e=new Sme(this.type,this.options.key);this._edeState=e}xme(Pc,dB);pB.exports=Pc;Pc.create=function(e){return new Pc(e)};Pc.prototype._update=function(e,r,n,a){var s=this._edeState;s.ciphers[0]._update(e,r,n,a),s.ciphers[1]._update(n,a,n,a),s.ciphers[2]._update(n,a,n,a)};Pc.prototype._pad=dl.prototype._pad;Pc.prototype._unpad=dl.prototype._unpad});var vB=ne(Yd=>{"use strict";Yd.utils=jk();Yd.Cipher=Gw();Yd.DES=Uk();Yd.CBC=hB();Yd.EDE=mB()});var bB=ne((SQe,yB)=>{var gB=Xu(),Qu=vB(),Eme=Et(),qc=fr().Buffer,sg={"des-ede3-cbc":Qu.CBC.instantiate(Qu.EDE),"des-ede3":Qu.EDE,"des-ede-cbc":Qu.CBC.instantiate(Qu.EDE),"des-ede":Qu.EDE,"des-cbc":Qu.CBC.instantiate(Qu.DES),"des-ecb":Qu.DES};sg.des=sg["des-cbc"];sg.des3=sg["des-ede3-cbc"];yB.exports=Kw;Eme(Kw,gB);function Kw(t){gB.call(this);var e=t.mode.toLowerCase(),r=sg[e],n;t.decrypt?n="decrypt":n="encrypt";var a=t.key;qc.isBuffer(a)||(a=qc.from(a)),(e==="des-ede"||e==="des-ede-cbc")&&(a=qc.concat([a,a.slice(0,8)]));var s=t.iv;qc.isBuffer(s)||(s=qc.from(s)),this._des=r.create({key:a,iv:s,type:n})}Kw.prototype._update=function(t){return qc.from(this._des.update(t))};Kw.prototype._final=function(){return qc.from(this._des.final())}});var wB=ne(Vk=>{Vk.encrypt=function(t,e){return t._cipher.encryptBlock(e)};Vk.decrypt=function(t,e){return t._cipher.decryptBlock(e)}});var Xd=ne((MQe,_B)=>{_B.exports=function(e,r){for(var n=Math.min(e.length,r.length),a=new Buffer(n),s=0;s<n;++s)a[s]=e[s]^r[s];return a}});var SB=ne(Wk=>{var xB=Xd();Wk.encrypt=function(t,e){var r=xB(e,t._prev);return t._prev=t._cipher.encryptBlock(r),t._prev};Wk.decrypt=function(t,e){var r=t._prev;t._prev=e;var n=t._cipher.decryptBlock(e);return xB(n,r)}});var AB=ne(MB=>{var og=fr().Buffer,Mme=Xd();function EB(t,e,r){var n=e.length,a=Mme(e,t._cache);return t._cache=t._cache.slice(n),t._prev=og.concat([t._prev,r?e:a]),a}MB.encrypt=function(t,e,r){for(var n=og.allocUnsafe(0),a;e.length;)if(t._cache.length===0&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=og.allocUnsafe(0)),t._cache.length<=e.length)a=t._cache.length,n=og.concat([n,EB(t,e.slice(0,a),r)]),e=e.slice(a);else{n=og.concat([n,EB(t,e,r)]);break}return n}});var TB=ne(kB=>{var Gk=fr().Buffer;function Ame(t,e,r){var n=t._cipher.encryptBlock(t._prev),a=n[0]^e;return t._prev=Gk.concat([t._prev.slice(1),Gk.from([r?e:a])]),a}kB.encrypt=function(t,e,r){for(var n=e.length,a=Gk.allocUnsafe(n),s=-1;++s<n;)a[s]=Ame(t,e[s],r);return a}});var IB=ne(NB=>{var Zw=fr().Buffer;function kme(t,e,r){for(var n,a=-1,s=8,o=0,u,l;++a<s;)n=t._cipher.encryptBlock(t._prev),u=e&1<<7-a?128:0,l=n[0]^u,o+=(l&128)>>a%8,t._prev=Tme(t._prev,r?u:l);return o}function Tme(t,e){var r=t.length,n=-1,a=Zw.allocUnsafe(t.length);for(t=Zw.concat([t,Zw.from([e])]);++n<r;)a[n]=t[n]<<1|t[n+1]>>7;return a}NB.encrypt=function(t,e,r){for(var n=e.length,a=Zw.allocUnsafe(n),s=-1;++s<n;)a[s]=kme(t,e[s],r);return a}});var OB=ne(DB=>{var Nme=Xd();function Ime(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}DB.encrypt=function(t,e){for(;t._cache.length<e.length;)t._cache=Buffer.concat([t._cache,Ime(t)]);var r=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),Nme(e,r)}});var Hk=ne((DQe,RB)=>{function Dme(t){for(var e=t.length,r;e--;)if(r=t.readUInt8(e),r===255)t.writeUInt8(0,e);else{r++,t.writeUInt8(r,e);break}}RB.exports=Dme});var Zk=ne(FB=>{var Ome=Xd(),CB=fr().Buffer,Rme=Hk();function Cme(t){var e=t._cipher.encryptBlockRaw(t._prev);return Rme(t._prev),e}var Kk=16;FB.encrypt=function(t,e){var r=Math.ceil(e.length/Kk),n=t._cache.length;t._cache=CB.concat([t._cache,CB.allocUnsafe(r*Kk)]);for(var a=0;a<r;a++){var s=Cme(t),o=n+a*Kk;t._cache.writeUInt32BE(s[0],o+0),t._cache.writeUInt32BE(s[1],o+4),t._cache.writeUInt32BE(s[2],o+8),t._cache.writeUInt32BE(s[3],o+12)}var u=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),Ome(e,u)}});var Jk=ne((RQe,Fme)=>{Fme.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}});var Yw=ne((CQe,BB)=>{var Bme={ECB:wB(),CBC:SB(),CFB:AB(),CFB8:TB(),CFB1:IB(),OFB:OB(),CTR:Zk(),GCM:Zk()},Jw=Jk();for(Yk in Jw)Jw[Yk].module=Bme[Jw[Yk].mode];var Yk;BB.exports=Jw});var ug=ne((FQe,PB)=>{var Xw=fr().Buffer;function Qk(t){Xw.isBuffer(t)||(t=Xw.from(t));for(var e=t.length/4|0,r=new Array(e),n=0;n<e;n++)r[n]=t.readUInt32BE(n*4);return r}function Xk(t){for(var e=0;e<t.length;t++)t[e]=0}function LB(t,e,r,n,a){for(var s=r[0],o=r[1],u=r[2],l=r[3],h=t[0]^e[0],p=t[1]^e[1],v=t[2]^e[2],y=t[3]^e[3],S,A,T,I,N=4,D=1;D<a;D++)S=s[h>>>24]^o[p>>>16&255]^u[v>>>8&255]^l[y&255]^e[N++],A=s[p>>>24]^o[v>>>16&255]^u[y>>>8&255]^l[h&255]^e[N++],T=s[v>>>24]^o[y>>>16&255]^u[h>>>8&255]^l[p&255]^e[N++],I=s[y>>>24]^o[h>>>16&255]^u[p>>>8&255]^l[v&255]^e[N++],h=S,p=A,v=T,y=I;return S=(n[h>>>24]<<24|n[p>>>16&255]<<16|n[v>>>8&255]<<8|n[y&255])^e[N++],A=(n[p>>>24]<<24|n[v>>>16&255]<<16|n[y>>>8&255]<<8|n[h&255])^e[N++],T=(n[v>>>24]<<24|n[y>>>16&255]<<16|n[h>>>8&255]<<8|n[p&255])^e[N++],I=(n[y>>>24]<<24|n[h>>>16&255]<<16|n[p>>>8&255]<<8|n[v&255])^e[N++],S=S>>>0,A=A>>>0,T=T>>>0,I=I>>>0,[S,A,T,I]}var Lme=[0,1,2,4,8,16,32,64,128,27,54],mi=function(){for(var t=new Array(256),e=0;e<256;e++)e<128?t[e]=e<<1:t[e]=e<<1^283;for(var r=[],n=[],a=[[],[],[],[]],s=[[],[],[],[]],o=0,u=0,l=0;l<256;++l){var h=u^u<<1^u<<2^u<<3^u<<4;h=h>>>8^h&255^99,r[o]=h,n[h]=o;var p=t[o],v=t[p],y=t[v],S=t[h]*257^h*16843008;a[0][o]=S<<24|S>>>8,a[1][o]=S<<16|S>>>16,a[2][o]=S<<8|S>>>24,a[3][o]=S,S=y*16843009^v*65537^p*257^o*16843008,s[0][h]=S<<24|S>>>8,s[1][h]=S<<16|S>>>16,s[2][h]=S<<8|S>>>24,s[3][h]=S,o===0?o=u=1:(o=p^t[t[t[y^p]]],u^=t[t[u]])}return{SBOX:r,INV_SBOX:n,SUB_MIX:a,INV_SUB_MIX:s}}();function Ts(t){this._key=Qk(t),this._reset()}Ts.blockSize=4*4;Ts.keySize=256/8;Ts.prototype.blockSize=Ts.blockSize;Ts.prototype.keySize=Ts.keySize;Ts.prototype._reset=function(){for(var t=this._key,e=t.length,r=e+6,n=(r+1)*4,a=[],s=0;s<e;s++)a[s]=t[s];for(s=e;s<n;s++){var o=a[s-1];s%e===0?(o=o<<8|o>>>24,o=mi.SBOX[o>>>24]<<24|mi.SBOX[o>>>16&255]<<16|mi.SBOX[o>>>8&255]<<8|mi.SBOX[o&255],o^=Lme[s/e|0]<<24):e>6&&s%e===4&&(o=mi.SBOX[o>>>24]<<24|mi.SBOX[o>>>16&255]<<16|mi.SBOX[o>>>8&255]<<8|mi.SBOX[o&255]),a[s]=a[s-e]^o}for(var u=[],l=0;l<n;l++){var h=n-l,p=a[h-(l%4?0:4)];l<4||h<=4?u[l]=p:u[l]=mi.INV_SUB_MIX[0][mi.SBOX[p>>>24]]^mi.INV_SUB_MIX[1][mi.SBOX[p>>>16&255]]^mi.INV_SUB_MIX[2][mi.SBOX[p>>>8&255]]^mi.INV_SUB_MIX[3][mi.SBOX[p&255]]}this._nRounds=r,this._keySchedule=a,this._invKeySchedule=u};Ts.prototype.encryptBlockRaw=function(t){return t=Qk(t),LB(t,this._keySchedule,mi.SUB_MIX,mi.SBOX,this._nRounds)};Ts.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),r=Xw.allocUnsafe(16);return r.writeUInt32BE(e[0],0),r.writeUInt32BE(e[1],4),r.writeUInt32BE(e[2],8),r.writeUInt32BE(e[3],12),r};Ts.prototype.decryptBlock=function(t){t=Qk(t);var e=t[1];t[1]=t[3],t[3]=e;var r=LB(t,this._invKeySchedule,mi.INV_SUB_MIX,mi.INV_SBOX,this._nRounds),n=Xw.allocUnsafe(16);return n.writeUInt32BE(r[0],0),n.writeUInt32BE(r[3],4),n.writeUInt32BE(r[2],8),n.writeUInt32BE(r[1],12),n};Ts.prototype.scrub=function(){Xk(this._keySchedule),Xk(this._invKeySchedule),Xk(this._key)};PB.exports.AES=Ts});var zB=ne((BQe,$B)=>{var Qd=fr().Buffer,Pme=Qd.alloc(16,0);function qme(t){return[t.readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)]}function qB(t){var e=Qd.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function fg(t){this.h=t,this.state=Qd.alloc(16,0),this.cache=Qd.allocUnsafe(0)}fg.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()};fg.prototype._multiply=function(){for(var t=qme(this.h),e=[0,0,0,0],r,n,a,s=-1;++s<128;){for(n=(this.state[~~(s/8)]&1<<7-s%8)!==0,n&&(e[0]^=t[0],e[1]^=t[1],e[2]^=t[2],e[3]^=t[3]),a=(t[3]&1)!==0,r=3;r>0;r--)t[r]=t[r]>>>1|(t[r-1]&1)<<31;t[0]=t[0]>>>1,a&&(t[0]=t[0]^225<<24)}this.state=qB(e)};fg.prototype.update=function(t){this.cache=Qd.concat([this.cache,t]);for(var e;this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)};fg.prototype.final=function(t,e){return this.cache.length&&this.ghash(Qd.concat([this.cache,Pme],16)),this.ghash(qB([0,t,0,e])),this.state};$B.exports=fg});var eT=ne((LQe,VB)=>{var $me=ug(),Fa=fr().Buffer,jB=Xu(),zme=Et(),UB=zB(),jme=Xd(),Ume=Hk();function Vme(t,e){var r=0;t.length!==e.length&&r++;for(var n=Math.min(t.length,e.length),a=0;a<n;++a)r+=t[a]^e[a];return r}function Wme(t,e,r){if(e.length===12)return t._finID=Fa.concat([e,Fa.from([0,0,0,1])]),Fa.concat([e,Fa.from([0,0,0,2])]);var n=new UB(r),a=e.length,s=a%16;n.update(e),s&&(s=16-s,n.update(Fa.alloc(s,0))),n.update(Fa.alloc(8,0));var o=a*8,u=Fa.alloc(8);u.writeUIntBE(o,0,8),n.update(u),t._finID=n.state;var l=Fa.from(t._finID);return Ume(l),l}function $c(t,e,r,n){jB.call(this);var a=Fa.alloc(4,0);this._cipher=new $me.AES(e);var s=this._cipher.encryptBlock(a);this._ghash=new UB(s),r=Wme(this,r,s),this._prev=Fa.from(r),this._cache=Fa.allocUnsafe(0),this._secCache=Fa.allocUnsafe(0),this._decrypt=n,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}zme($c,jB);$c.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=Fa.alloc(e,0),this._ghash.update(e))}this._called=!0;var r=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(r),this._len+=t.length,r};$c.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=jme(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&Vme(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()};$c.prototype.getAuthTag=function(){if(this._decrypt||!Fa.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag};$c.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e};$c.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length};VB.exports=$c});var rT=ne((PQe,GB)=>{var Gme=ug(),tT=fr().Buffer,WB=Xu(),Hme=Et();function Qw(t,e,r,n){WB.call(this),this._cipher=new Gme.AES(e),this._prev=tT.from(r),this._cache=tT.allocUnsafe(0),this._secCache=tT.allocUnsafe(0),this._decrypt=n,this._mode=t}Hme(Qw,WB);Qw.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)};Qw.prototype._final=function(){this._cipher.scrub()};GB.exports=Qw});var lg=ne((qQe,HB)=>{var zc=fr().Buffer,Kme=bw();function Zme(t,e,r,n){if(zc.isBuffer(t)||(t=zc.from(t,"binary")),e&&(zc.isBuffer(e)||(e=zc.from(e,"binary")),e.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var a=r/8,s=zc.alloc(a),o=zc.alloc(n||0),u=zc.alloc(0);a>0||n>0;){var l=new Kme;l.update(u),l.update(t),e&&l.update(e),u=l.digest();var h=0;if(a>0){var p=s.length-a;h=Math.min(a,u.length),u.copy(s,p,0,h),a-=h}if(h<u.length&&n>0){var v=o.length-n,y=Math.min(n,u.length-h);u.copy(o,v,h,h+y),n-=y}}return u.fill(0),{key:s,iv:o}}HB.exports=Zme});var YB=ne(nT=>{var KB=Yw(),Jme=eT(),ef=fr().Buffer,Yme=rT(),ZB=Xu(),Xme=ug(),Qme=lg(),eve=Et();function cg(t,e,r){ZB.call(this),this._cache=new e_,this._cipher=new Xme.AES(e),this._prev=ef.from(r),this._mode=t,this._autopadding=!0}eve(cg,ZB);cg.prototype._update=function(t){this._cache.add(t);for(var e,r,n=[];e=this._cache.get();)r=this._mode.encrypt(this,e),n.push(r);return ef.concat(n)};var tve=ef.alloc(16,16);cg.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(tve))throw this._cipher.scrub(),new Error("data not multiple of block length")};cg.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this};function e_(){this.cache=ef.allocUnsafe(0)}e_.prototype.add=function(t){this.cache=ef.concat([this.cache,t])};e_.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null};e_.prototype.flush=function(){for(var t=16-this.cache.length,e=ef.allocUnsafe(t),r=-1;++r<t;)e.writeUInt8(t,r);return ef.concat([this.cache,e])};function JB(t,e,r){var n=KB[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");if(typeof e=="string"&&(e=ef.from(e)),e.length!==n.key/8)throw new TypeError("invalid key length "+e.length);if(typeof r=="string"&&(r=ef.from(r)),n.mode!=="GCM"&&r.length!==n.iv)throw new TypeError("invalid iv length "+r.length);return n.type==="stream"?new Yme(n.module,e,r):n.type==="auth"?new Jme(n.module,e,r):new cg(n.module,e,r)}function rve(t,e){var r=KB[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=Qme(e,!1,r.key,r.iv);return JB(t,n.key,n.iv)}nT.createCipheriv=JB;nT.createCipher=rve});var tL=ne(iT=>{var nve=eT(),ep=fr().Buffer,XB=Yw(),ive=rT(),QB=Xu(),ave=ug(),sve=lg(),ove=Et();function hg(t,e,r){QB.call(this),this._cache=new t_,this._last=void 0,this._cipher=new ave.AES(e),this._prev=ep.from(r),this._mode=t,this._autopadding=!0}ove(hg,QB);hg.prototype._update=function(t){this._cache.add(t);for(var e,r,n=[];e=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,e),n.push(r);return ep.concat(n)};hg.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return uve(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")};hg.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this};function t_(){this.cache=ep.allocUnsafe(0)}t_.prototype.add=function(t){this.cache=ep.concat([this.cache,t])};t_.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null};t_.prototype.flush=function(){if(this.cache.length)return this.cache};function uve(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");for(var r=-1;++r<e;)if(t[r+(16-e)]!==e)throw new Error("unable to decrypt data");if(e!==16)return t.slice(0,16-e)}function eL(t,e,r){var n=XB[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");if(typeof r=="string"&&(r=ep.from(r)),n.mode!=="GCM"&&r.length!==n.iv)throw new TypeError("invalid iv length "+r.length);if(typeof e=="string"&&(e=ep.from(e)),e.length!==n.key/8)throw new TypeError("invalid key length "+e.length);return n.type==="stream"?new ive(n.module,e,r,!0):n.type==="auth"?new nve(n.module,e,r,!0):new hg(n.module,e,r)}function fve(t,e){var r=XB[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=sve(e,!1,r.key,r.iv);return eL(t,n.key,n.iv)}iT.createDecipher=fve;iT.createDecipheriv=eL});var r_=ne(ko=>{var rL=YB(),nL=tL(),lve=Jk();function cve(){return Object.keys(lve)}ko.createCipher=ko.Cipher=rL.createCipher;ko.createCipheriv=ko.Cipheriv=rL.createCipheriv;ko.createDecipher=ko.Decipher=nL.createDecipher;ko.createDecipheriv=ko.Decipheriv=nL.createDecipheriv;ko.listCiphers=ko.getCiphers=cve});var iL=ne(tf=>{tf["des-ecb"]={key:8,iv:0};tf["des-cbc"]=tf.des={key:8,iv:8};tf["des-ede3-cbc"]=tf.des3={key:24,iv:8};tf["des-ede3"]={key:24,iv:0};tf["des-ede-cbc"]={key:16,iv:8};tf["des-ede"]={key:16,iv:0}});var fL=ne(To=>{var aL=bB(),aT=r_(),pl=Yw(),rf=iL(),sL=lg();function hve(t,e){t=t.toLowerCase();var r,n;if(pl[t])r=pl[t].key,n=pl[t].iv;else if(rf[t])r=rf[t].key*8,n=rf[t].iv;else throw new TypeError("invalid suite type");var a=sL(e,!1,r,n);return oL(t,a.key,a.iv)}function dve(t,e){t=t.toLowerCase();var r,n;if(pl[t])r=pl[t].key,n=pl[t].iv;else if(rf[t])r=rf[t].key*8,n=rf[t].iv;else throw new TypeError("invalid suite type");var a=sL(e,!1,r,n);return uL(t,a.key,a.iv)}function oL(t,e,r){if(t=t.toLowerCase(),pl[t])return aT.createCipheriv(t,e,r);if(rf[t])return new aL({key:e,iv:r,mode:t});throw new TypeError("invalid suite type")}function uL(t,e,r){if(t=t.toLowerCase(),pl[t])return aT.createDecipheriv(t,e,r);if(rf[t])return new aL({key:e,iv:r,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}function pve(){return Object.keys(rf).concat(aT.getCiphers())}To.createCipher=To.Cipher=hve;To.createCipheriv=To.Cipheriv=oL;To.createDecipher=To.Decipher=dve;To.createDecipheriv=To.Decipheriv=uL;To.listCiphers=To.getCiphers=pve});var oT=ne((lL,sT)=>{(function(t,e){"use strict";function r(M,f){if(!M)throw new Error(f||"Assertion failed")}function n(M,f){M.super_=f;var d=function(){};d.prototype=f.prototype,M.prototype=new d,M.prototype.constructor=M}function a(M,f,d){if(a.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((f==="le"||f==="be")&&(d=f,f=10),this._init(M||0,f||10,d||"be"))}typeof t=="object"?t.exports=a:e.BN=a,a.BN=a,a.wordSize=26;var s;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?s=window.Buffer:s=mn().Buffer}catch{}a.isBN=function(f){return f instanceof a?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===a.wordSize&&Array.isArray(f.words)},a.max=function(f,d){return f.cmp(d)>0?f:d},a.min=function(f,d){return f.cmp(d)<0?f:d},a.prototype._init=function(f,d,g){if(typeof f=="number")return this._initNumber(f,d,g);if(typeof f=="object")return this._initArray(f,d,g);d==="hex"&&(d=16),r(d===(d|0)&&d>=2&&d<=36),f=f.toString().replace(/\s+/g,"");var m=0;f[0]==="-"&&(m++,this.negative=1),m<f.length&&(d===16?this._parseHex(f,m,g):(this._parseBase(f,d,m),g==="le"&&this._initArray(this.toArray(),d,g)))},a.prototype._initNumber=function(f,d,g){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(r(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),d,g)},a.prototype._initArray=function(f,d,g){if(r(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var b,E,k=0;if(g==="be")for(m=f.length-1,b=0;m>=0;m-=3)E=f[m]|f[m-1]<<8|f[m-2]<<16,this.words[b]|=E<<k&67108863,this.words[b+1]=E>>>26-k&67108863,k+=24,k>=26&&(k-=26,b++);else if(g==="le")for(m=0,b=0;m<f.length;m+=3)E=f[m]|f[m+1]<<8|f[m+2]<<16,this.words[b]|=E<<k&67108863,this.words[b+1]=E>>>26-k&67108863,k+=24,k>=26&&(k-=26,b++);return this.strip()};function o(M,f){var d=M.charCodeAt(f);return d>=65&&d<=70?d-55:d>=97&&d<=102?d-87:d-48&15}function u(M,f,d){var g=o(M,d);return d-1>=f&&(g|=o(M,d-1)<<4),g}a.prototype._parseHex=function(f,d,g){this.length=Math.ceil((f.length-d)/6),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var b=0,E=0,k;if(g==="be")for(m=f.length-1;m>=d;m-=2)k=u(f,d,m)<<b,this.words[E]|=k&67108863,b>=18?(b-=18,E+=1,this.words[E]|=k>>>26):b+=8;else{var w=f.length-d;for(m=w%2===0?d+1:d;m<f.length;m+=2)k=u(f,d,m)<<b,this.words[E]|=k&67108863,b>=18?(b-=18,E+=1,this.words[E]|=k>>>26):b+=8}this.strip()};function l(M,f,d,g){for(var m=0,b=Math.min(M.length,d),E=f;E<b;E++){var k=M.charCodeAt(E)-48;m*=g,k>=49?m+=k-49+10:k>=17?m+=k-17+10:m+=k}return m}a.prototype._parseBase=function(f,d,g){this.words=[0],this.length=1;for(var m=0,b=1;b<=67108863;b*=d)m++;m--,b=b/d|0;for(var E=f.length-g,k=E%m,w=Math.min(E,E-k)+g,c=0,_=g;_<w;_+=m)c=l(f,_,_+m,d),this.imuln(b),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(k!==0){var R=1;for(c=l(f,_,f.length,d),_=0;_<k;_++)R*=d;this.imuln(R),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},a.prototype.copy=function(f){f.words=new Array(this.length);for(var d=0;d<this.length;d++)f.words[d]=this.words[d];f.length=this.length,f.negative=this.negative,f.red=this.red},a.prototype.clone=function(){var f=new a(null);return this.copy(f),f},a.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(f,d){f=f||10,d=d|0||1;var g;if(f===16||f==="hex"){g="";for(var m=0,b=0,E=0;E<this.length;E++){var k=this.words[E],w=((k<<m|b)&16777215).toString(16);b=k>>>24-m&16777215,b!==0||E!==this.length-1?g=h[6-w.length]+w+g:g=w+g,m+=2,m>=26&&(m-=26,E--)}for(b!==0&&(g=b.toString(16)+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(f===(f|0)&&f>=2&&f<=36){var c=p[f],_=v[f];g="";var R=this.clone();for(R.negative=0;!R.isZero();){var O=R.modn(_).toString(f);R=R.idivn(_),R.isZero()?g=O+g:g=h[c-O.length]+O+g}for(this.isZero()&&(g="0"+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}r(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(f,d){return r(typeof s!="undefined"),this.toArrayLike(s,f,d)},a.prototype.toArray=function(f,d){return this.toArrayLike(Array,f,d)},a.prototype.toArrayLike=function(f,d,g){var m=this.byteLength(),b=g||Math.max(1,m);r(m<=b,"byte array longer than desired length"),r(b>0,"Requested array length <= 0"),this.strip();var E=d==="le",k=new f(b),w,c,_=this.clone();if(E){for(c=0;!_.isZero();c++)w=_.andln(255),_.iushrn(8),k[c]=w;for(;c<b;c++)k[c]=0}else{for(c=0;c<b-m;c++)k[c]=0;for(c=0;!_.isZero();c++)w=_.andln(255),_.iushrn(8),k[b-c-1]=w}return k},Math.clz32?a.prototype._countBits=function(f){return 32-Math.clz32(f)}:a.prototype._countBits=function(f){var d=f,g=0;return d>=4096&&(g+=13,d>>>=13),d>=64&&(g+=7,d>>>=7),d>=8&&(g+=4,d>>>=4),d>=2&&(g+=2,d>>>=2),g+d},a.prototype._zeroBits=function(f){if(f===0)return 26;var d=f,g=0;return(d&8191)===0&&(g+=13,d>>>=13),(d&127)===0&&(g+=7,d>>>=7),(d&15)===0&&(g+=4,d>>>=4),(d&3)===0&&(g+=2,d>>>=2),(d&1)===0&&g++,g},a.prototype.bitLength=function(){var f=this.words[this.length-1],d=this._countBits(f);return(this.length-1)*26+d};function y(M){for(var f=new Array(M.bitLength()),d=0;d<f.length;d++){var g=d/26|0,m=d%26;f[d]=(M.words[g]&1<<m)>>>m}return f}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,d=0;d<this.length;d++){var g=this._zeroBits(this.words[d]);if(f+=g,g!==26)break}return f},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},a.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var d=0;d<f.length;d++)this.words[d]=this.words[d]|f.words[d];return this.strip()},a.prototype.ior=function(f){return r((this.negative|f.negative)===0),this.iuor(f)},a.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},a.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},a.prototype.iuand=function(f){var d;this.length>f.length?d=f:d=this;for(var g=0;g<d.length;g++)this.words[g]=this.words[g]&f.words[g];return this.length=d.length,this.strip()},a.prototype.iand=function(f){return r((this.negative|f.negative)===0),this.iuand(f)},a.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},a.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},a.prototype.iuxor=function(f){var d,g;this.length>f.length?(d=this,g=f):(d=f,g=this);for(var m=0;m<g.length;m++)this.words[m]=d.words[m]^g.words[m];if(this!==d)for(;m<d.length;m++)this.words[m]=d.words[m];return this.length=d.length,this.strip()},a.prototype.ixor=function(f){return r((this.negative|f.negative)===0),this.iuxor(f)},a.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},a.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},a.prototype.inotn=function(f){r(typeof f=="number"&&f>=0);var d=Math.ceil(f/26)|0,g=f%26;this._expand(d),g>0&&d--;for(var m=0;m<d;m++)this.words[m]=~this.words[m]&67108863;return g>0&&(this.words[m]=~this.words[m]&67108863>>26-g),this.strip()},a.prototype.notn=function(f){return this.clone().inotn(f)},a.prototype.setn=function(f,d){r(typeof f=="number"&&f>=0);var g=f/26|0,m=f%26;return this._expand(g+1),d?this.words[g]=this.words[g]|1<<m:this.words[g]=this.words[g]&~(1<<m),this.strip()},a.prototype.iadd=function(f){var d;if(this.negative!==0&&f.negative===0)return this.negative=0,d=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,d=this.isub(f),f.negative=1,d._normSign();var g,m;this.length>f.length?(g=this,m=f):(g=f,m=this);for(var b=0,E=0;E<m.length;E++)d=(g.words[E]|0)+(m.words[E]|0)+b,this.words[E]=d&67108863,b=d>>>26;for(;b!==0&&E<g.length;E++)d=(g.words[E]|0)+b,this.words[E]=d&67108863,b=d>>>26;if(this.length=g.length,b!==0)this.words[this.length]=b,this.length++;else if(g!==this)for(;E<g.length;E++)this.words[E]=g.words[E];return this},a.prototype.add=function(f){var d;return f.negative!==0&&this.negative===0?(f.negative=0,d=this.sub(f),f.negative^=1,d):f.negative===0&&this.negative!==0?(this.negative=0,d=f.sub(this),this.negative=1,d):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},a.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var d=this.iadd(f);return f.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var g=this.cmp(f);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var m,b;g>0?(m=this,b=f):(m=f,b=this);for(var E=0,k=0;k<b.length;k++)d=(m.words[k]|0)-(b.words[k]|0)+E,E=d>>26,this.words[k]=d&67108863;for(;E!==0&&k<m.length;k++)d=(m.words[k]|0)+E,E=d>>26,this.words[k]=d&67108863;if(E===0&&k<m.length&&m!==this)for(;k<m.length;k++)this.words[k]=m.words[k];return this.length=Math.max(this.length,k),m!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(f){return this.clone().isub(f)};function S(M,f,d){d.negative=f.negative^M.negative;var g=M.length+f.length|0;d.length=g,g=g-1|0;var m=M.words[0]|0,b=f.words[0]|0,E=m*b,k=E&67108863,w=E/67108864|0;d.words[0]=k;for(var c=1;c<g;c++){for(var _=w>>>26,R=w&67108863,O=Math.min(c,f.length-1),F=Math.max(0,c-M.length+1);F<=O;F++){var U=c-F|0;m=M.words[U]|0,b=f.words[F]|0,E=m*b+R,_+=E/67108864|0,R=E&67108863}d.words[c]=R|0,w=_|0}return w!==0?d.words[c]=w|0:d.length--,d.strip()}var A=function(f,d,g){var m=f.words,b=d.words,E=g.words,k=0,w,c,_,R=m[0]|0,O=R&8191,F=R>>>13,U=m[1]|0,H=U&8191,J=U>>>13,fe=m[2]|0,B=fe&8191,q=fe>>>13,Y=m[3]|0,X=Y&8191,Q=Y>>>13,be=m[4]|0,ue=be&8191,me=be>>>13,vt=m[5]|0,xe=vt&8191,le=vt>>>13,qt=m[6]|0,we=qt&8191,Te=qt>>>13,at=m[7]|0,ee=at&8191,ie=at>>>13,tt=m[8]|0,ae=tt&8191,de=tt>>>13,Ze=m[9]|0,he=Ze&8191,Se=Ze>>>13,At=b[0]|0,_e=At&8191,Ie=At>>>13,nr=b[1]|0,Ne=nr&8191,Re=nr>>>13,Qn=b[2]|0,qe=Qn&8191,Fe=Qn>>>13,$n=b[3]|0,$e=$n&8191,Be=$n>>>13,zn=b[4]|0,Le=zn&8191,ze=zn>>>13,ei=b[5]|0,Pe=ei&8191,Oe=ei>>>13,jn=b[6]|0,je=jn&8191,Ue=jn>>>13,xr=b[7]|0,ke=xr&8191,Ve=xr>>>13,kn=b[8]|0,De=kn&8191,We=kn>>>13,On=b[9]|0,Ge=On&8191,He=On>>>13;g.negative=f.negative^d.negative,g.length=19,w=Math.imul(O,_e),c=Math.imul(O,Ie),c=c+Math.imul(F,_e)|0,_=Math.imul(F,Ie);var rn=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(rn>>>26)|0,rn&=67108863,w=Math.imul(H,_e),c=Math.imul(H,Ie),c=c+Math.imul(J,_e)|0,_=Math.imul(J,Ie),w=w+Math.imul(O,Ne)|0,c=c+Math.imul(O,Re)|0,c=c+Math.imul(F,Ne)|0,_=_+Math.imul(F,Re)|0;var Ot=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,w=Math.imul(B,_e),c=Math.imul(B,Ie),c=c+Math.imul(q,_e)|0,_=Math.imul(q,Ie),w=w+Math.imul(H,Ne)|0,c=c+Math.imul(H,Re)|0,c=c+Math.imul(J,Ne)|0,_=_+Math.imul(J,Re)|0,w=w+Math.imul(O,qe)|0,c=c+Math.imul(O,Fe)|0,c=c+Math.imul(F,qe)|0,_=_+Math.imul(F,Fe)|0;var Rt=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,w=Math.imul(X,_e),c=Math.imul(X,Ie),c=c+Math.imul(Q,_e)|0,_=Math.imul(Q,Ie),w=w+Math.imul(B,Ne)|0,c=c+Math.imul(B,Re)|0,c=c+Math.imul(q,Ne)|0,_=_+Math.imul(q,Re)|0,w=w+Math.imul(H,qe)|0,c=c+Math.imul(H,Fe)|0,c=c+Math.imul(J,qe)|0,_=_+Math.imul(J,Fe)|0,w=w+Math.imul(O,$e)|0,c=c+Math.imul(O,Be)|0,c=c+Math.imul(F,$e)|0,_=_+Math.imul(F,Be)|0;var Lr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,w=Math.imul(ue,_e),c=Math.imul(ue,Ie),c=c+Math.imul(me,_e)|0,_=Math.imul(me,Ie),w=w+Math.imul(X,Ne)|0,c=c+Math.imul(X,Re)|0,c=c+Math.imul(Q,Ne)|0,_=_+Math.imul(Q,Re)|0,w=w+Math.imul(B,qe)|0,c=c+Math.imul(B,Fe)|0,c=c+Math.imul(q,qe)|0,_=_+Math.imul(q,Fe)|0,w=w+Math.imul(H,$e)|0,c=c+Math.imul(H,Be)|0,c=c+Math.imul(J,$e)|0,_=_+Math.imul(J,Be)|0,w=w+Math.imul(O,Le)|0,c=c+Math.imul(O,ze)|0,c=c+Math.imul(F,Le)|0,_=_+Math.imul(F,ze)|0;var Pr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,w=Math.imul(xe,_e),c=Math.imul(xe,Ie),c=c+Math.imul(le,_e)|0,_=Math.imul(le,Ie),w=w+Math.imul(ue,Ne)|0,c=c+Math.imul(ue,Re)|0,c=c+Math.imul(me,Ne)|0,_=_+Math.imul(me,Re)|0,w=w+Math.imul(X,qe)|0,c=c+Math.imul(X,Fe)|0,c=c+Math.imul(Q,qe)|0,_=_+Math.imul(Q,Fe)|0,w=w+Math.imul(B,$e)|0,c=c+Math.imul(B,Be)|0,c=c+Math.imul(q,$e)|0,_=_+Math.imul(q,Be)|0,w=w+Math.imul(H,Le)|0,c=c+Math.imul(H,ze)|0,c=c+Math.imul(J,Le)|0,_=_+Math.imul(J,ze)|0,w=w+Math.imul(O,Pe)|0,c=c+Math.imul(O,Oe)|0,c=c+Math.imul(F,Pe)|0,_=_+Math.imul(F,Oe)|0;var qr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(qr>>>26)|0,qr&=67108863,w=Math.imul(we,_e),c=Math.imul(we,Ie),c=c+Math.imul(Te,_e)|0,_=Math.imul(Te,Ie),w=w+Math.imul(xe,Ne)|0,c=c+Math.imul(xe,Re)|0,c=c+Math.imul(le,Ne)|0,_=_+Math.imul(le,Re)|0,w=w+Math.imul(ue,qe)|0,c=c+Math.imul(ue,Fe)|0,c=c+Math.imul(me,qe)|0,_=_+Math.imul(me,Fe)|0,w=w+Math.imul(X,$e)|0,c=c+Math.imul(X,Be)|0,c=c+Math.imul(Q,$e)|0,_=_+Math.imul(Q,Be)|0,w=w+Math.imul(B,Le)|0,c=c+Math.imul(B,ze)|0,c=c+Math.imul(q,Le)|0,_=_+Math.imul(q,ze)|0,w=w+Math.imul(H,Pe)|0,c=c+Math.imul(H,Oe)|0,c=c+Math.imul(J,Pe)|0,_=_+Math.imul(J,Oe)|0,w=w+Math.imul(O,je)|0,c=c+Math.imul(O,Ue)|0,c=c+Math.imul(F,je)|0,_=_+Math.imul(F,Ue)|0;var $r=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+($r>>>26)|0,$r&=67108863,w=Math.imul(ee,_e),c=Math.imul(ee,Ie),c=c+Math.imul(ie,_e)|0,_=Math.imul(ie,Ie),w=w+Math.imul(we,Ne)|0,c=c+Math.imul(we,Re)|0,c=c+Math.imul(Te,Ne)|0,_=_+Math.imul(Te,Re)|0,w=w+Math.imul(xe,qe)|0,c=c+Math.imul(xe,Fe)|0,c=c+Math.imul(le,qe)|0,_=_+Math.imul(le,Fe)|0,w=w+Math.imul(ue,$e)|0,c=c+Math.imul(ue,Be)|0,c=c+Math.imul(me,$e)|0,_=_+Math.imul(me,Be)|0,w=w+Math.imul(X,Le)|0,c=c+Math.imul(X,ze)|0,c=c+Math.imul(Q,Le)|0,_=_+Math.imul(Q,ze)|0,w=w+Math.imul(B,Pe)|0,c=c+Math.imul(B,Oe)|0,c=c+Math.imul(q,Pe)|0,_=_+Math.imul(q,Oe)|0,w=w+Math.imul(H,je)|0,c=c+Math.imul(H,Ue)|0,c=c+Math.imul(J,je)|0,_=_+Math.imul(J,Ue)|0,w=w+Math.imul(O,ke)|0,c=c+Math.imul(O,Ve)|0,c=c+Math.imul(F,ke)|0,_=_+Math.imul(F,Ve)|0;var zr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(zr>>>26)|0,zr&=67108863,w=Math.imul(ae,_e),c=Math.imul(ae,Ie),c=c+Math.imul(de,_e)|0,_=Math.imul(de,Ie),w=w+Math.imul(ee,Ne)|0,c=c+Math.imul(ee,Re)|0,c=c+Math.imul(ie,Ne)|0,_=_+Math.imul(ie,Re)|0,w=w+Math.imul(we,qe)|0,c=c+Math.imul(we,Fe)|0,c=c+Math.imul(Te,qe)|0,_=_+Math.imul(Te,Fe)|0,w=w+Math.imul(xe,$e)|0,c=c+Math.imul(xe,Be)|0,c=c+Math.imul(le,$e)|0,_=_+Math.imul(le,Be)|0,w=w+Math.imul(ue,Le)|0,c=c+Math.imul(ue,ze)|0,c=c+Math.imul(me,Le)|0,_=_+Math.imul(me,ze)|0,w=w+Math.imul(X,Pe)|0,c=c+Math.imul(X,Oe)|0,c=c+Math.imul(Q,Pe)|0,_=_+Math.imul(Q,Oe)|0,w=w+Math.imul(B,je)|0,c=c+Math.imul(B,Ue)|0,c=c+Math.imul(q,je)|0,_=_+Math.imul(q,Ue)|0,w=w+Math.imul(H,ke)|0,c=c+Math.imul(H,Ve)|0,c=c+Math.imul(J,ke)|0,_=_+Math.imul(J,Ve)|0,w=w+Math.imul(O,De)|0,c=c+Math.imul(O,We)|0,c=c+Math.imul(F,De)|0,_=_+Math.imul(F,We)|0;var jr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(jr>>>26)|0,jr&=67108863,w=Math.imul(he,_e),c=Math.imul(he,Ie),c=c+Math.imul(Se,_e)|0,_=Math.imul(Se,Ie),w=w+Math.imul(ae,Ne)|0,c=c+Math.imul(ae,Re)|0,c=c+Math.imul(de,Ne)|0,_=_+Math.imul(de,Re)|0,w=w+Math.imul(ee,qe)|0,c=c+Math.imul(ee,Fe)|0,c=c+Math.imul(ie,qe)|0,_=_+Math.imul(ie,Fe)|0,w=w+Math.imul(we,$e)|0,c=c+Math.imul(we,Be)|0,c=c+Math.imul(Te,$e)|0,_=_+Math.imul(Te,Be)|0,w=w+Math.imul(xe,Le)|0,c=c+Math.imul(xe,ze)|0,c=c+Math.imul(le,Le)|0,_=_+Math.imul(le,ze)|0,w=w+Math.imul(ue,Pe)|0,c=c+Math.imul(ue,Oe)|0,c=c+Math.imul(me,Pe)|0,_=_+Math.imul(me,Oe)|0,w=w+Math.imul(X,je)|0,c=c+Math.imul(X,Ue)|0,c=c+Math.imul(Q,je)|0,_=_+Math.imul(Q,Ue)|0,w=w+Math.imul(B,ke)|0,c=c+Math.imul(B,Ve)|0,c=c+Math.imul(q,ke)|0,_=_+Math.imul(q,Ve)|0,w=w+Math.imul(H,De)|0,c=c+Math.imul(H,We)|0,c=c+Math.imul(J,De)|0,_=_+Math.imul(J,We)|0,w=w+Math.imul(O,Ge)|0,c=c+Math.imul(O,He)|0,c=c+Math.imul(F,Ge)|0,_=_+Math.imul(F,He)|0;var Ur=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,w=Math.imul(he,Ne),c=Math.imul(he,Re),c=c+Math.imul(Se,Ne)|0,_=Math.imul(Se,Re),w=w+Math.imul(ae,qe)|0,c=c+Math.imul(ae,Fe)|0,c=c+Math.imul(de,qe)|0,_=_+Math.imul(de,Fe)|0,w=w+Math.imul(ee,$e)|0,c=c+Math.imul(ee,Be)|0,c=c+Math.imul(ie,$e)|0,_=_+Math.imul(ie,Be)|0,w=w+Math.imul(we,Le)|0,c=c+Math.imul(we,ze)|0,c=c+Math.imul(Te,Le)|0,_=_+Math.imul(Te,ze)|0,w=w+Math.imul(xe,Pe)|0,c=c+Math.imul(xe,Oe)|0,c=c+Math.imul(le,Pe)|0,_=_+Math.imul(le,Oe)|0,w=w+Math.imul(ue,je)|0,c=c+Math.imul(ue,Ue)|0,c=c+Math.imul(me,je)|0,_=_+Math.imul(me,Ue)|0,w=w+Math.imul(X,ke)|0,c=c+Math.imul(X,Ve)|0,c=c+Math.imul(Q,ke)|0,_=_+Math.imul(Q,Ve)|0,w=w+Math.imul(B,De)|0,c=c+Math.imul(B,We)|0,c=c+Math.imul(q,De)|0,_=_+Math.imul(q,We)|0,w=w+Math.imul(H,Ge)|0,c=c+Math.imul(H,He)|0,c=c+Math.imul(J,Ge)|0,_=_+Math.imul(J,He)|0;var Vr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,w=Math.imul(he,qe),c=Math.imul(he,Fe),c=c+Math.imul(Se,qe)|0,_=Math.imul(Se,Fe),w=w+Math.imul(ae,$e)|0,c=c+Math.imul(ae,Be)|0,c=c+Math.imul(de,$e)|0,_=_+Math.imul(de,Be)|0,w=w+Math.imul(ee,Le)|0,c=c+Math.imul(ee,ze)|0,c=c+Math.imul(ie,Le)|0,_=_+Math.imul(ie,ze)|0,w=w+Math.imul(we,Pe)|0,c=c+Math.imul(we,Oe)|0,c=c+Math.imul(Te,Pe)|0,_=_+Math.imul(Te,Oe)|0,w=w+Math.imul(xe,je)|0,c=c+Math.imul(xe,Ue)|0,c=c+Math.imul(le,je)|0,_=_+Math.imul(le,Ue)|0,w=w+Math.imul(ue,ke)|0,c=c+Math.imul(ue,Ve)|0,c=c+Math.imul(me,ke)|0,_=_+Math.imul(me,Ve)|0,w=w+Math.imul(X,De)|0,c=c+Math.imul(X,We)|0,c=c+Math.imul(Q,De)|0,_=_+Math.imul(Q,We)|0,w=w+Math.imul(B,Ge)|0,c=c+Math.imul(B,He)|0,c=c+Math.imul(q,Ge)|0,_=_+Math.imul(q,He)|0;var Wr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,w=Math.imul(he,$e),c=Math.imul(he,Be),c=c+Math.imul(Se,$e)|0,_=Math.imul(Se,Be),w=w+Math.imul(ae,Le)|0,c=c+Math.imul(ae,ze)|0,c=c+Math.imul(de,Le)|0,_=_+Math.imul(de,ze)|0,w=w+Math.imul(ee,Pe)|0,c=c+Math.imul(ee,Oe)|0,c=c+Math.imul(ie,Pe)|0,_=_+Math.imul(ie,Oe)|0,w=w+Math.imul(we,je)|0,c=c+Math.imul(we,Ue)|0,c=c+Math.imul(Te,je)|0,_=_+Math.imul(Te,Ue)|0,w=w+Math.imul(xe,ke)|0,c=c+Math.imul(xe,Ve)|0,c=c+Math.imul(le,ke)|0,_=_+Math.imul(le,Ve)|0,w=w+Math.imul(ue,De)|0,c=c+Math.imul(ue,We)|0,c=c+Math.imul(me,De)|0,_=_+Math.imul(me,We)|0,w=w+Math.imul(X,Ge)|0,c=c+Math.imul(X,He)|0,c=c+Math.imul(Q,Ge)|0,_=_+Math.imul(Q,He)|0;var Gr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,w=Math.imul(he,Le),c=Math.imul(he,ze),c=c+Math.imul(Se,Le)|0,_=Math.imul(Se,ze),w=w+Math.imul(ae,Pe)|0,c=c+Math.imul(ae,Oe)|0,c=c+Math.imul(de,Pe)|0,_=_+Math.imul(de,Oe)|0,w=w+Math.imul(ee,je)|0,c=c+Math.imul(ee,Ue)|0,c=c+Math.imul(ie,je)|0,_=_+Math.imul(ie,Ue)|0,w=w+Math.imul(we,ke)|0,c=c+Math.imul(we,Ve)|0,c=c+Math.imul(Te,ke)|0,_=_+Math.imul(Te,Ve)|0,w=w+Math.imul(xe,De)|0,c=c+Math.imul(xe,We)|0,c=c+Math.imul(le,De)|0,_=_+Math.imul(le,We)|0,w=w+Math.imul(ue,Ge)|0,c=c+Math.imul(ue,He)|0,c=c+Math.imul(me,Ge)|0,_=_+Math.imul(me,He)|0;var Hr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,w=Math.imul(he,Pe),c=Math.imul(he,Oe),c=c+Math.imul(Se,Pe)|0,_=Math.imul(Se,Oe),w=w+Math.imul(ae,je)|0,c=c+Math.imul(ae,Ue)|0,c=c+Math.imul(de,je)|0,_=_+Math.imul(de,Ue)|0,w=w+Math.imul(ee,ke)|0,c=c+Math.imul(ee,Ve)|0,c=c+Math.imul(ie,ke)|0,_=_+Math.imul(ie,Ve)|0,w=w+Math.imul(we,De)|0,c=c+Math.imul(we,We)|0,c=c+Math.imul(Te,De)|0,_=_+Math.imul(Te,We)|0,w=w+Math.imul(xe,Ge)|0,c=c+Math.imul(xe,He)|0,c=c+Math.imul(le,Ge)|0,_=_+Math.imul(le,He)|0;var Kr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,w=Math.imul(he,je),c=Math.imul(he,Ue),c=c+Math.imul(Se,je)|0,_=Math.imul(Se,Ue),w=w+Math.imul(ae,ke)|0,c=c+Math.imul(ae,Ve)|0,c=c+Math.imul(de,ke)|0,_=_+Math.imul(de,Ve)|0,w=w+Math.imul(ee,De)|0,c=c+Math.imul(ee,We)|0,c=c+Math.imul(ie,De)|0,_=_+Math.imul(ie,We)|0,w=w+Math.imul(we,Ge)|0,c=c+Math.imul(we,He)|0,c=c+Math.imul(Te,Ge)|0,_=_+Math.imul(Te,He)|0;var Zr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,w=Math.imul(he,ke),c=Math.imul(he,Ve),c=c+Math.imul(Se,ke)|0,_=Math.imul(Se,Ve),w=w+Math.imul(ae,De)|0,c=c+Math.imul(ae,We)|0,c=c+Math.imul(de,De)|0,_=_+Math.imul(de,We)|0,w=w+Math.imul(ee,Ge)|0,c=c+Math.imul(ee,He)|0,c=c+Math.imul(ie,Ge)|0,_=_+Math.imul(ie,He)|0;var Jr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,w=Math.imul(he,De),c=Math.imul(he,We),c=c+Math.imul(Se,De)|0,_=Math.imul(Se,We),w=w+Math.imul(ae,Ge)|0,c=c+Math.imul(ae,He)|0,c=c+Math.imul(de,Ge)|0,_=_+Math.imul(de,He)|0;var Xt=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,w=Math.imul(he,Ge),c=Math.imul(he,He),c=c+Math.imul(Se,Ge)|0,_=Math.imul(Se,He);var Tr=(k+w|0)+((c&8191)<<13)|0;return k=(_+(c>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,E[0]=rn,E[1]=Ot,E[2]=Rt,E[3]=Lr,E[4]=Pr,E[5]=qr,E[6]=$r,E[7]=zr,E[8]=jr,E[9]=Ur,E[10]=Vr,E[11]=Wr,E[12]=Gr,E[13]=Hr,E[14]=Kr,E[15]=Zr,E[16]=Jr,E[17]=Xt,E[18]=Tr,k!==0&&(E[19]=k,g.length++),g};Math.imul||(A=S);function T(M,f,d){d.negative=f.negative^M.negative,d.length=M.length+f.length;for(var g=0,m=0,b=0;b<d.length-1;b++){var E=m;m=0;for(var k=g&67108863,w=Math.min(b,f.length-1),c=Math.max(0,b-M.length+1);c<=w;c++){var _=b-c,R=M.words[_]|0,O=f.words[c]|0,F=R*O,U=F&67108863;E=E+(F/67108864|0)|0,U=U+k|0,k=U&67108863,E=E+(U>>>26)|0,m+=E>>>26,E&=67108863}d.words[b]=k,g=E,E=m}return g!==0?d.words[b]=g:d.length--,d.strip()}function I(M,f,d){var g=new N;return g.mulp(M,f,d)}a.prototype.mulTo=function(f,d){var g,m=this.length+f.length;return this.length===10&&f.length===10?g=A(this,f,d):m<63?g=S(this,f,d):m<1024?g=T(this,f,d):g=I(this,f,d),g};function N(M,f){this.x=M,this.y=f}N.prototype.makeRBT=function(f){for(var d=new Array(f),g=a.prototype._countBits(f)-1,m=0;m<f;m++)d[m]=this.revBin(m,g,f);return d},N.prototype.revBin=function(f,d,g){if(f===0||f===g-1)return f;for(var m=0,b=0;b<d;b++)m|=(f&1)<<d-b-1,f>>=1;return m},N.prototype.permute=function(f,d,g,m,b,E){for(var k=0;k<E;k++)m[k]=d[f[k]],b[k]=g[f[k]]},N.prototype.transform=function(f,d,g,m,b,E){this.permute(E,f,d,g,m,b);for(var k=1;k<b;k<<=1)for(var w=k<<1,c=Math.cos(2*Math.PI/w),_=Math.sin(2*Math.PI/w),R=0;R<b;R+=w)for(var O=c,F=_,U=0;U<k;U++){var H=g[R+U],J=m[R+U],fe=g[R+U+k],B=m[R+U+k],q=O*fe-F*B;B=O*B+F*fe,fe=q,g[R+U]=H+fe,m[R+U]=J+B,g[R+U+k]=H-fe,m[R+U+k]=J-B,U!==w&&(q=c*O-_*F,F=c*F+_*O,O=q)}},N.prototype.guessLen13b=function(f,d){var g=Math.max(d,f)|1,m=g&1,b=0;for(g=g/2|0;g;g=g>>>1)b++;return 1<<b+1+m},N.prototype.conjugate=function(f,d,g){if(!(g<=1))for(var m=0;m<g/2;m++){var b=f[m];f[m]=f[g-m-1],f[g-m-1]=b,b=d[m],d[m]=-d[g-m-1],d[g-m-1]=-b}},N.prototype.normalize13b=function(f,d){for(var g=0,m=0;m<d/2;m++){var b=Math.round(f[2*m+1]/d)*8192+Math.round(f[2*m]/d)+g;f[m]=b&67108863,b<67108864?g=0:g=b/67108864|0}return f},N.prototype.convert13b=function(f,d,g,m){for(var b=0,E=0;E<d;E++)b=b+(f[E]|0),g[2*E]=b&8191,b=b>>>13,g[2*E+1]=b&8191,b=b>>>13;for(E=2*d;E<m;++E)g[E]=0;r(b===0),r((b&-8192)===0)},N.prototype.stub=function(f){for(var d=new Array(f),g=0;g<f;g++)d[g]=0;return d},N.prototype.mulp=function(f,d,g){var m=2*this.guessLen13b(f.length,d.length),b=this.makeRBT(m),E=this.stub(m),k=new Array(m),w=new Array(m),c=new Array(m),_=new Array(m),R=new Array(m),O=new Array(m),F=g.words;F.length=m,this.convert13b(f.words,f.length,k,m),this.convert13b(d.words,d.length,_,m),this.transform(k,E,w,c,m,b),this.transform(_,E,R,O,m,b);for(var U=0;U<m;U++){var H=w[U]*R[U]-c[U]*O[U];c[U]=w[U]*O[U]+c[U]*R[U],w[U]=H}return this.conjugate(w,c,m),this.transform(w,c,F,E,m,b),this.conjugate(F,E,m),this.normalize13b(F,m),g.negative=f.negative^d.negative,g.length=f.length+d.length,g.strip()},a.prototype.mul=function(f){var d=new a(null);return d.words=new Array(this.length+f.length),this.mulTo(f,d)},a.prototype.mulf=function(f){var d=new a(null);return d.words=new Array(this.length+f.length),I(this,f,d)},a.prototype.imul=function(f){return this.clone().mulTo(f,this)},a.prototype.imuln=function(f){r(typeof f=="number"),r(f<67108864);for(var d=0,g=0;g<this.length;g++){var m=(this.words[g]|0)*f,b=(m&67108863)+(d&67108863);d>>=26,d+=m/67108864|0,d+=b>>>26,this.words[g]=b&67108863}return d!==0&&(this.words[g]=d,this.length++),this},a.prototype.muln=function(f){return this.clone().imuln(f)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(f){var d=y(f);if(d.length===0)return new a(1);for(var g=this,m=0;m<d.length&&d[m]===0;m++,g=g.sqr());if(++m<d.length)for(var b=g.sqr();m<d.length;m++,b=b.sqr())d[m]!==0&&(g=g.mul(b));return g},a.prototype.iushln=function(f){r(typeof f=="number"&&f>=0);var d=f%26,g=(f-d)/26,m=67108863>>>26-d<<26-d,b;if(d!==0){var E=0;for(b=0;b<this.length;b++){var k=this.words[b]&m,w=(this.words[b]|0)-k<<d;this.words[b]=w|E,E=k>>>26-d}E&&(this.words[b]=E,this.length++)}if(g!==0){for(b=this.length-1;b>=0;b--)this.words[b+g]=this.words[b];for(b=0;b<g;b++)this.words[b]=0;this.length+=g}return this.strip()},a.prototype.ishln=function(f){return r(this.negative===0),this.iushln(f)},a.prototype.iushrn=function(f,d,g){r(typeof f=="number"&&f>=0);var m;d?m=(d-d%26)/26:m=0;var b=f%26,E=Math.min((f-b)/26,this.length),k=67108863^67108863>>>b<<b,w=g;if(m-=E,m=Math.max(0,m),w){for(var c=0;c<E;c++)w.words[c]=this.words[c];w.length=E}if(E!==0)if(this.length>E)for(this.length-=E,c=0;c<this.length;c++)this.words[c]=this.words[c+E];else this.words[0]=0,this.length=1;var _=0;for(c=this.length-1;c>=0&&(_!==0||c>=m);c--){var R=this.words[c]|0;this.words[c]=_<<26-b|R>>>b,_=R&k}return w&&_!==0&&(w.words[w.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(f,d,g){return r(this.negative===0),this.iushrn(f,d,g)},a.prototype.shln=function(f){return this.clone().ishln(f)},a.prototype.ushln=function(f){return this.clone().iushln(f)},a.prototype.shrn=function(f){return this.clone().ishrn(f)},a.prototype.ushrn=function(f){return this.clone().iushrn(f)},a.prototype.testn=function(f){r(typeof f=="number"&&f>=0);var d=f%26,g=(f-d)/26,m=1<<d;if(this.length<=g)return!1;var b=this.words[g];return!!(b&m)},a.prototype.imaskn=function(f){r(typeof f=="number"&&f>=0);var d=f%26,g=(f-d)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(d!==0&&g++,this.length=Math.min(g,this.length),d!==0){var m=67108863^67108863>>>d<<d;this.words[this.length-1]&=m}return this.strip()},a.prototype.maskn=function(f){return this.clone().imaskn(f)},a.prototype.iaddn=function(f){return r(typeof f=="number"),r(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},a.prototype._iaddn=function(f){this.words[0]+=f;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},a.prototype.isubn=function(f){if(r(typeof f=="number"),r(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this.strip()},a.prototype.addn=function(f){return this.clone().iaddn(f)},a.prototype.subn=function(f){return this.clone().isubn(f)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(f,d,g){var m=f.length+g,b;this._expand(m);var E,k=0;for(b=0;b<f.length;b++){E=(this.words[b+g]|0)+k;var w=(f.words[b]|0)*d;E-=w&67108863,k=(E>>26)-(w/67108864|0),this.words[b+g]=E&67108863}for(;b<this.length-g;b++)E=(this.words[b+g]|0)+k,k=E>>26,this.words[b+g]=E&67108863;if(k===0)return this.strip();for(r(k===-1),k=0,b=0;b<this.length;b++)E=-(this.words[b]|0)+k,k=E>>26,this.words[b]=E&67108863;return this.negative=1,this.strip()},a.prototype._wordDiv=function(f,d){var g=this.length-f.length,m=this.clone(),b=f,E=b.words[b.length-1]|0,k=this._countBits(E);g=26-k,g!==0&&(b=b.ushln(g),m.iushln(g),E=b.words[b.length-1]|0);var w=m.length-b.length,c;if(d!=="mod"){c=new a(null),c.length=w+1,c.words=new Array(c.length);for(var _=0;_<c.length;_++)c.words[_]=0}var R=m.clone()._ishlnsubmul(b,1,w);R.negative===0&&(m=R,c&&(c.words[w]=1));for(var O=w-1;O>=0;O--){var F=(m.words[b.length+O]|0)*67108864+(m.words[b.length+O-1]|0);for(F=Math.min(F/E|0,67108863),m._ishlnsubmul(b,F,O);m.negative!==0;)F--,m.negative=0,m._ishlnsubmul(b,1,O),m.isZero()||(m.negative^=1);c&&(c.words[O]=F)}return c&&c.strip(),m.strip(),d!=="div"&&g!==0&&m.iushrn(g),{div:c||null,mod:m}},a.prototype.divmod=function(f,d,g){if(r(!f.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var m,b,E;return this.negative!==0&&f.negative===0?(E=this.neg().divmod(f,d),d!=="mod"&&(m=E.div.neg()),d!=="div"&&(b=E.mod.neg(),g&&b.negative!==0&&b.iadd(f)),{div:m,mod:b}):this.negative===0&&f.negative!==0?(E=this.divmod(f.neg(),d),d!=="mod"&&(m=E.div.neg()),{div:m,mod:E.mod}):(this.negative&f.negative)!==0?(E=this.neg().divmod(f.neg(),d),d!=="div"&&(b=E.mod.neg(),g&&b.negative!==0&&b.isub(f)),{div:E.div,mod:b}):f.length>this.length||this.cmp(f)<0?{div:new a(0),mod:this}:f.length===1?d==="div"?{div:this.divn(f.words[0]),mod:null}:d==="mod"?{div:null,mod:new a(this.modn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new a(this.modn(f.words[0]))}:this._wordDiv(f,d)},a.prototype.div=function(f){return this.divmod(f,"div",!1).div},a.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},a.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},a.prototype.divRound=function(f){var d=this.divmod(f);if(d.mod.isZero())return d.div;var g=d.div.negative!==0?d.mod.isub(f):d.mod,m=f.ushrn(1),b=f.andln(1),E=g.cmp(m);return E<0||b===1&&E===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},a.prototype.modn=function(f){r(f<=67108863);for(var d=(1<<26)%f,g=0,m=this.length-1;m>=0;m--)g=(d*g+(this.words[m]|0))%f;return g},a.prototype.idivn=function(f){r(f<=67108863);for(var d=0,g=this.length-1;g>=0;g--){var m=(this.words[g]|0)+d*67108864;this.words[g]=m/f|0,d=m%f}return this.strip()},a.prototype.divn=function(f){return this.clone().idivn(f)},a.prototype.egcd=function(f){r(f.negative===0),r(!f.isZero());var d=this,g=f.clone();d.negative!==0?d=d.umod(f):d=d.clone();for(var m=new a(1),b=new a(0),E=new a(0),k=new a(1),w=0;d.isEven()&&g.isEven();)d.iushrn(1),g.iushrn(1),++w;for(var c=g.clone(),_=d.clone();!d.isZero();){for(var R=0,O=1;(d.words[0]&O)===0&&R<26;++R,O<<=1);if(R>0)for(d.iushrn(R);R-- >0;)(m.isOdd()||b.isOdd())&&(m.iadd(c),b.isub(_)),m.iushrn(1),b.iushrn(1);for(var F=0,U=1;(g.words[0]&U)===0&&F<26;++F,U<<=1);if(F>0)for(g.iushrn(F);F-- >0;)(E.isOdd()||k.isOdd())&&(E.iadd(c),k.isub(_)),E.iushrn(1),k.iushrn(1);d.cmp(g)>=0?(d.isub(g),m.isub(E),b.isub(k)):(g.isub(d),E.isub(m),k.isub(b))}return{a:E,b:k,gcd:g.iushln(w)}},a.prototype._invmp=function(f){r(f.negative===0),r(!f.isZero());var d=this,g=f.clone();d.negative!==0?d=d.umod(f):d=d.clone();for(var m=new a(1),b=new a(0),E=g.clone();d.cmpn(1)>0&&g.cmpn(1)>0;){for(var k=0,w=1;(d.words[0]&w)===0&&k<26;++k,w<<=1);if(k>0)for(d.iushrn(k);k-- >0;)m.isOdd()&&m.iadd(E),m.iushrn(1);for(var c=0,_=1;(g.words[0]&_)===0&&c<26;++c,_<<=1);if(c>0)for(g.iushrn(c);c-- >0;)b.isOdd()&&b.iadd(E),b.iushrn(1);d.cmp(g)>=0?(d.isub(g),m.isub(b)):(g.isub(d),b.isub(m))}var R;return d.cmpn(1)===0?R=m:R=b,R.cmpn(0)<0&&R.iadd(f),R},a.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var d=this.clone(),g=f.clone();d.negative=0,g.negative=0;for(var m=0;d.isEven()&&g.isEven();m++)d.iushrn(1),g.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;g.isEven();)g.iushrn(1);var b=d.cmp(g);if(b<0){var E=d;d=g,g=E}else if(b===0||g.cmpn(1)===0)break;d.isub(g)}while(!0);return g.iushln(m)},a.prototype.invm=function(f){return this.egcd(f).a.umod(f)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(f){return this.words[0]&f},a.prototype.bincn=function(f){r(typeof f=="number");var d=f%26,g=(f-d)/26,m=1<<d;if(this.length<=g)return this._expand(g+1),this.words[g]|=m,this;for(var b=m,E=g;b!==0&&E<this.length;E++){var k=this.words[E]|0;k+=b,b=k>>>26,k&=67108863,this.words[E]=k}return b!==0&&(this.words[E]=b,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(f){var d=f<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this.strip();var g;if(this.length>1)g=1;else{d&&(f=-f),r(f<=67108863,"Number is too big");var m=this.words[0]|0;g=m===f?0:m<f?-1:1}return this.negative!==0?-g|0:g},a.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var d=this.ucmp(f);return this.negative!==0?-d|0:d},a.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var d=0,g=this.length-1;g>=0;g--){var m=this.words[g]|0,b=f.words[g]|0;if(m!==b){m<b?d=-1:m>b&&(d=1);break}}return d},a.prototype.gtn=function(f){return this.cmpn(f)===1},a.prototype.gt=function(f){return this.cmp(f)===1},a.prototype.gten=function(f){return this.cmpn(f)>=0},a.prototype.gte=function(f){return this.cmp(f)>=0},a.prototype.ltn=function(f){return this.cmpn(f)===-1},a.prototype.lt=function(f){return this.cmp(f)===-1},a.prototype.lten=function(f){return this.cmpn(f)<=0},a.prototype.lte=function(f){return this.cmp(f)<=0},a.prototype.eqn=function(f){return this.cmpn(f)===0},a.prototype.eq=function(f){return this.cmp(f)===0},a.red=function(f){return new j(f)},a.prototype.toRed=function(f){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},a.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(f){return this.red=f,this},a.prototype.forceRed=function(f){return r(!this.red,"Already a number in reduction context"),this._forceRed(f)},a.prototype.redAdd=function(f){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},a.prototype.redIAdd=function(f){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},a.prototype.redSub=function(f){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},a.prototype.redISub=function(f){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},a.prototype.redShl=function(f){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},a.prototype.redMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},a.prototype.redIMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},a.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(f){return r(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var D={k256:null,p224:null,p192:null,p25519:null};function C(M,f){this.name=M,this.p=new a(f,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}C.prototype._tmp=function(){var f=new a(null);return f.words=new Array(Math.ceil(this.n/13)),f},C.prototype.ireduce=function(f){var d=f,g;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),g=d.bitLength();while(g>this.n);var m=g<this.n?-1:d.ucmp(this.p);return m===0?(d.words[0]=0,d.length=1):m>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},C.prototype.split=function(f,d){f.iushrn(this.n,0,d)},C.prototype.imulK=function(f){return f.imul(this.k)};function L(){C.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(L,C),L.prototype.split=function(f,d){for(var g=4194303,m=Math.min(f.length,9),b=0;b<m;b++)d.words[b]=f.words[b];if(d.length=m,f.length<=9){f.words[0]=0,f.length=1;return}var E=f.words[9];for(d.words[d.length++]=E&g,b=10;b<f.length;b++){var k=f.words[b]|0;f.words[b-10]=(k&g)<<4|E>>>22,E=k}E>>>=22,f.words[b-10]=E,E===0&&f.length>10?f.length-=10:f.length-=9},L.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var d=0,g=0;g<f.length;g++){var m=f.words[g]|0;d+=m*977,f.words[g]=d&67108863,d=m*64+(d/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function z(){C.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(z,C);function $(){C.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n($,C);function G(){C.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(G,C),G.prototype.imulK=function(f){for(var d=0,g=0;g<f.length;g++){var m=(f.words[g]|0)*19+d,b=m&67108863;m>>>=26,f.words[g]=b,d=m}return d!==0&&(f.words[f.length++]=d),f},a._prime=function(f){if(D[f])return D[f];var d;if(f==="k256")d=new L;else if(f==="p224")d=new z;else if(f==="p192")d=new $;else if(f==="p25519")d=new G;else throw new Error("Unknown prime "+f);return D[f]=d,d};function j(M){if(typeof M=="string"){var f=a._prime(M);this.m=f.p,this.prime=f}else r(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}j.prototype._verify1=function(f){r(f.negative===0,"red works only with positives"),r(f.red,"red works only with red numbers")},j.prototype._verify2=function(f,d){r((f.negative|d.negative)===0,"red works only with positives"),r(f.red&&f.red===d.red,"red works only with red numbers")},j.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):f.umod(this.m)._forceRed(this)},j.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},j.prototype.add=function(f,d){this._verify2(f,d);var g=f.add(d);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},j.prototype.iadd=function(f,d){this._verify2(f,d);var g=f.iadd(d);return g.cmp(this.m)>=0&&g.isub(this.m),g},j.prototype.sub=function(f,d){this._verify2(f,d);var g=f.sub(d);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},j.prototype.isub=function(f,d){this._verify2(f,d);var g=f.isub(d);return g.cmpn(0)<0&&g.iadd(this.m),g},j.prototype.shl=function(f,d){return this._verify1(f),this.imod(f.ushln(d))},j.prototype.imul=function(f,d){return this._verify2(f,d),this.imod(f.imul(d))},j.prototype.mul=function(f,d){return this._verify2(f,d),this.imod(f.mul(d))},j.prototype.isqr=function(f){return this.imul(f,f.clone())},j.prototype.sqr=function(f){return this.mul(f,f)},j.prototype.sqrt=function(f){if(f.isZero())return f.clone();var d=this.m.andln(3);if(r(d%2===1),d===3){var g=this.m.add(new a(1)).iushrn(2);return this.pow(f,g)}for(var m=this.m.subn(1),b=0;!m.isZero()&&m.andln(1)===0;)b++,m.iushrn(1);r(!m.isZero());var E=new a(1).toRed(this),k=E.redNeg(),w=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new a(2*c*c).toRed(this);this.pow(c,w).cmp(k)!==0;)c.redIAdd(k);for(var _=this.pow(c,m),R=this.pow(f,m.addn(1).iushrn(1)),O=this.pow(f,m),F=b;O.cmp(E)!==0;){for(var U=O,H=0;U.cmp(E)!==0;H++)U=U.redSqr();r(H<F);var J=this.pow(_,new a(1).iushln(F-H-1));R=R.redMul(J),_=J.redSqr(),O=O.redMul(_),F=H}return R},j.prototype.invm=function(f){var d=f._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},j.prototype.pow=function(f,d){if(d.isZero())return new a(1).toRed(this);if(d.cmpn(1)===0)return f.clone();var g=4,m=new Array(1<<g);m[0]=new a(1).toRed(this),m[1]=f;for(var b=2;b<m.length;b++)m[b]=this.mul(m[b-1],f);var E=m[0],k=0,w=0,c=d.bitLength()%26;for(c===0&&(c=26),b=d.length-1;b>=0;b--){for(var _=d.words[b],R=c-1;R>=0;R--){var O=_>>R&1;if(E!==m[0]&&(E=this.sqr(E)),O===0&&k===0){w=0;continue}k<<=1,k|=O,w++,!(w!==g&&(b!==0||R!==0))&&(E=this.mul(E,m[k]),w=0,k=0)}c=26}return E},j.prototype.convertTo=function(f){var d=f.umod(this.m);return d===f?d.clone():d},j.prototype.convertFrom=function(f){var d=f.clone();return d.red=null,d},a.mont=function(f){return new K(f)};function K(M){j.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(K,j),K.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},K.prototype.convertFrom=function(f){var d=this.imod(f.mul(this.rinv));return d.red=null,d},K.prototype.imul=function(f,d){if(f.isZero()||d.isZero())return f.words[0]=0,f.length=1,f;var g=f.imul(d),m=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(m).iushrn(this.shift),E=b;return b.cmp(this.m)>=0?E=b.isub(this.m):b.cmpn(0)<0&&(E=b.iadd(this.m)),E._forceRed(this)},K.prototype.mul=function(f,d){if(f.isZero()||d.isZero())return new a(0)._forceRed(this);var g=f.mul(d),m=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(m).iushrn(this.shift),E=b;return b.cmp(this.m)>=0?E=b.isub(this.m):b.cmpn(0)<0&&(E=b.iadd(this.m)),E._forceRed(this)},K.prototype.invm=function(f){var d=this.imod(f._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(typeof sT=="undefined"||sT,lL)});var hL=ne((cL,uT)=>{(function(t,e){"use strict";function r(M,f){if(!M)throw new Error(f||"Assertion failed")}function n(M,f){M.super_=f;var d=function(){};d.prototype=f.prototype,M.prototype=new d,M.prototype.constructor=M}function a(M,f,d){if(a.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((f==="le"||f==="be")&&(d=f,f=10),this._init(M||0,f||10,d||"be"))}typeof t=="object"?t.exports=a:e.BN=a,a.BN=a,a.wordSize=26;var s;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?s=window.Buffer:s=mn().Buffer}catch{}a.isBN=function(f){return f instanceof a?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===a.wordSize&&Array.isArray(f.words)},a.max=function(f,d){return f.cmp(d)>0?f:d},a.min=function(f,d){return f.cmp(d)<0?f:d},a.prototype._init=function(f,d,g){if(typeof f=="number")return this._initNumber(f,d,g);if(typeof f=="object")return this._initArray(f,d,g);d==="hex"&&(d=16),r(d===(d|0)&&d>=2&&d<=36),f=f.toString().replace(/\s+/g,"");var m=0;f[0]==="-"&&(m++,this.negative=1),m<f.length&&(d===16?this._parseHex(f,m,g):(this._parseBase(f,d,m),g==="le"&&this._initArray(this.toArray(),d,g)))},a.prototype._initNumber=function(f,d,g){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(r(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),d,g)},a.prototype._initArray=function(f,d,g){if(r(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var b,E,k=0;if(g==="be")for(m=f.length-1,b=0;m>=0;m-=3)E=f[m]|f[m-1]<<8|f[m-2]<<16,this.words[b]|=E<<k&67108863,this.words[b+1]=E>>>26-k&67108863,k+=24,k>=26&&(k-=26,b++);else if(g==="le")for(m=0,b=0;m<f.length;m+=3)E=f[m]|f[m+1]<<8|f[m+2]<<16,this.words[b]|=E<<k&67108863,this.words[b+1]=E>>>26-k&67108863,k+=24,k>=26&&(k-=26,b++);return this.strip()};function o(M,f){var d=M.charCodeAt(f);return d>=65&&d<=70?d-55:d>=97&&d<=102?d-87:d-48&15}function u(M,f,d){var g=o(M,d);return d-1>=f&&(g|=o(M,d-1)<<4),g}a.prototype._parseHex=function(f,d,g){this.length=Math.ceil((f.length-d)/6),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var b=0,E=0,k;if(g==="be")for(m=f.length-1;m>=d;m-=2)k=u(f,d,m)<<b,this.words[E]|=k&67108863,b>=18?(b-=18,E+=1,this.words[E]|=k>>>26):b+=8;else{var w=f.length-d;for(m=w%2===0?d+1:d;m<f.length;m+=2)k=u(f,d,m)<<b,this.words[E]|=k&67108863,b>=18?(b-=18,E+=1,this.words[E]|=k>>>26):b+=8}this.strip()};function l(M,f,d,g){for(var m=0,b=Math.min(M.length,d),E=f;E<b;E++){var k=M.charCodeAt(E)-48;m*=g,k>=49?m+=k-49+10:k>=17?m+=k-17+10:m+=k}return m}a.prototype._parseBase=function(f,d,g){this.words=[0],this.length=1;for(var m=0,b=1;b<=67108863;b*=d)m++;m--,b=b/d|0;for(var E=f.length-g,k=E%m,w=Math.min(E,E-k)+g,c=0,_=g;_<w;_+=m)c=l(f,_,_+m,d),this.imuln(b),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(k!==0){var R=1;for(c=l(f,_,f.length,d),_=0;_<k;_++)R*=d;this.imuln(R),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},a.prototype.copy=function(f){f.words=new Array(this.length);for(var d=0;d<this.length;d++)f.words[d]=this.words[d];f.length=this.length,f.negative=this.negative,f.red=this.red},a.prototype.clone=function(){var f=new a(null);return this.copy(f),f},a.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(f,d){f=f||10,d=d|0||1;var g;if(f===16||f==="hex"){g="";for(var m=0,b=0,E=0;E<this.length;E++){var k=this.words[E],w=((k<<m|b)&16777215).toString(16);b=k>>>24-m&16777215,b!==0||E!==this.length-1?g=h[6-w.length]+w+g:g=w+g,m+=2,m>=26&&(m-=26,E--)}for(b!==0&&(g=b.toString(16)+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(f===(f|0)&&f>=2&&f<=36){var c=p[f],_=v[f];g="";var R=this.clone();for(R.negative=0;!R.isZero();){var O=R.modn(_).toString(f);R=R.idivn(_),R.isZero()?g=O+g:g=h[c-O.length]+O+g}for(this.isZero()&&(g="0"+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}r(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(f,d){return r(typeof s!="undefined"),this.toArrayLike(s,f,d)},a.prototype.toArray=function(f,d){return this.toArrayLike(Array,f,d)},a.prototype.toArrayLike=function(f,d,g){var m=this.byteLength(),b=g||Math.max(1,m);r(m<=b,"byte array longer than desired length"),r(b>0,"Requested array length <= 0"),this.strip();var E=d==="le",k=new f(b),w,c,_=this.clone();if(E){for(c=0;!_.isZero();c++)w=_.andln(255),_.iushrn(8),k[c]=w;for(;c<b;c++)k[c]=0}else{for(c=0;c<b-m;c++)k[c]=0;for(c=0;!_.isZero();c++)w=_.andln(255),_.iushrn(8),k[b-c-1]=w}return k},Math.clz32?a.prototype._countBits=function(f){return 32-Math.clz32(f)}:a.prototype._countBits=function(f){var d=f,g=0;return d>=4096&&(g+=13,d>>>=13),d>=64&&(g+=7,d>>>=7),d>=8&&(g+=4,d>>>=4),d>=2&&(g+=2,d>>>=2),g+d},a.prototype._zeroBits=function(f){if(f===0)return 26;var d=f,g=0;return(d&8191)===0&&(g+=13,d>>>=13),(d&127)===0&&(g+=7,d>>>=7),(d&15)===0&&(g+=4,d>>>=4),(d&3)===0&&(g+=2,d>>>=2),(d&1)===0&&g++,g},a.prototype.bitLength=function(){var f=this.words[this.length-1],d=this._countBits(f);return(this.length-1)*26+d};function y(M){for(var f=new Array(M.bitLength()),d=0;d<f.length;d++){var g=d/26|0,m=d%26;f[d]=(M.words[g]&1<<m)>>>m}return f}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,d=0;d<this.length;d++){var g=this._zeroBits(this.words[d]);if(f+=g,g!==26)break}return f},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},a.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var d=0;d<f.length;d++)this.words[d]=this.words[d]|f.words[d];return this.strip()},a.prototype.ior=function(f){return r((this.negative|f.negative)===0),this.iuor(f)},a.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},a.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},a.prototype.iuand=function(f){var d;this.length>f.length?d=f:d=this;for(var g=0;g<d.length;g++)this.words[g]=this.words[g]&f.words[g];return this.length=d.length,this.strip()},a.prototype.iand=function(f){return r((this.negative|f.negative)===0),this.iuand(f)},a.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},a.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},a.prototype.iuxor=function(f){var d,g;this.length>f.length?(d=this,g=f):(d=f,g=this);for(var m=0;m<g.length;m++)this.words[m]=d.words[m]^g.words[m];if(this!==d)for(;m<d.length;m++)this.words[m]=d.words[m];return this.length=d.length,this.strip()},a.prototype.ixor=function(f){return r((this.negative|f.negative)===0),this.iuxor(f)},a.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},a.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},a.prototype.inotn=function(f){r(typeof f=="number"&&f>=0);var d=Math.ceil(f/26)|0,g=f%26;this._expand(d),g>0&&d--;for(var m=0;m<d;m++)this.words[m]=~this.words[m]&67108863;return g>0&&(this.words[m]=~this.words[m]&67108863>>26-g),this.strip()},a.prototype.notn=function(f){return this.clone().inotn(f)},a.prototype.setn=function(f,d){r(typeof f=="number"&&f>=0);var g=f/26|0,m=f%26;return this._expand(g+1),d?this.words[g]=this.words[g]|1<<m:this.words[g]=this.words[g]&~(1<<m),this.strip()},a.prototype.iadd=function(f){var d;if(this.negative!==0&&f.negative===0)return this.negative=0,d=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,d=this.isub(f),f.negative=1,d._normSign();var g,m;this.length>f.length?(g=this,m=f):(g=f,m=this);for(var b=0,E=0;E<m.length;E++)d=(g.words[E]|0)+(m.words[E]|0)+b,this.words[E]=d&67108863,b=d>>>26;for(;b!==0&&E<g.length;E++)d=(g.words[E]|0)+b,this.words[E]=d&67108863,b=d>>>26;if(this.length=g.length,b!==0)this.words[this.length]=b,this.length++;else if(g!==this)for(;E<g.length;E++)this.words[E]=g.words[E];return this},a.prototype.add=function(f){var d;return f.negative!==0&&this.negative===0?(f.negative=0,d=this.sub(f),f.negative^=1,d):f.negative===0&&this.negative!==0?(this.negative=0,d=f.sub(this),this.negative=1,d):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},a.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var d=this.iadd(f);return f.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var g=this.cmp(f);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var m,b;g>0?(m=this,b=f):(m=f,b=this);for(var E=0,k=0;k<b.length;k++)d=(m.words[k]|0)-(b.words[k]|0)+E,E=d>>26,this.words[k]=d&67108863;for(;E!==0&&k<m.length;k++)d=(m.words[k]|0)+E,E=d>>26,this.words[k]=d&67108863;if(E===0&&k<m.length&&m!==this)for(;k<m.length;k++)this.words[k]=m.words[k];return this.length=Math.max(this.length,k),m!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(f){return this.clone().isub(f)};function S(M,f,d){d.negative=f.negative^M.negative;var g=M.length+f.length|0;d.length=g,g=g-1|0;var m=M.words[0]|0,b=f.words[0]|0,E=m*b,k=E&67108863,w=E/67108864|0;d.words[0]=k;for(var c=1;c<g;c++){for(var _=w>>>26,R=w&67108863,O=Math.min(c,f.length-1),F=Math.max(0,c-M.length+1);F<=O;F++){var U=c-F|0;m=M.words[U]|0,b=f.words[F]|0,E=m*b+R,_+=E/67108864|0,R=E&67108863}d.words[c]=R|0,w=_|0}return w!==0?d.words[c]=w|0:d.length--,d.strip()}var A=function(f,d,g){var m=f.words,b=d.words,E=g.words,k=0,w,c,_,R=m[0]|0,O=R&8191,F=R>>>13,U=m[1]|0,H=U&8191,J=U>>>13,fe=m[2]|0,B=fe&8191,q=fe>>>13,Y=m[3]|0,X=Y&8191,Q=Y>>>13,be=m[4]|0,ue=be&8191,me=be>>>13,vt=m[5]|0,xe=vt&8191,le=vt>>>13,qt=m[6]|0,we=qt&8191,Te=qt>>>13,at=m[7]|0,ee=at&8191,ie=at>>>13,tt=m[8]|0,ae=tt&8191,de=tt>>>13,Ze=m[9]|0,he=Ze&8191,Se=Ze>>>13,At=b[0]|0,_e=At&8191,Ie=At>>>13,nr=b[1]|0,Ne=nr&8191,Re=nr>>>13,Qn=b[2]|0,qe=Qn&8191,Fe=Qn>>>13,$n=b[3]|0,$e=$n&8191,Be=$n>>>13,zn=b[4]|0,Le=zn&8191,ze=zn>>>13,ei=b[5]|0,Pe=ei&8191,Oe=ei>>>13,jn=b[6]|0,je=jn&8191,Ue=jn>>>13,xr=b[7]|0,ke=xr&8191,Ve=xr>>>13,kn=b[8]|0,De=kn&8191,We=kn>>>13,On=b[9]|0,Ge=On&8191,He=On>>>13;g.negative=f.negative^d.negative,g.length=19,w=Math.imul(O,_e),c=Math.imul(O,Ie),c=c+Math.imul(F,_e)|0,_=Math.imul(F,Ie);var rn=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(rn>>>26)|0,rn&=67108863,w=Math.imul(H,_e),c=Math.imul(H,Ie),c=c+Math.imul(J,_e)|0,_=Math.imul(J,Ie),w=w+Math.imul(O,Ne)|0,c=c+Math.imul(O,Re)|0,c=c+Math.imul(F,Ne)|0,_=_+Math.imul(F,Re)|0;var Ot=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,w=Math.imul(B,_e),c=Math.imul(B,Ie),c=c+Math.imul(q,_e)|0,_=Math.imul(q,Ie),w=w+Math.imul(H,Ne)|0,c=c+Math.imul(H,Re)|0,c=c+Math.imul(J,Ne)|0,_=_+Math.imul(J,Re)|0,w=w+Math.imul(O,qe)|0,c=c+Math.imul(O,Fe)|0,c=c+Math.imul(F,qe)|0,_=_+Math.imul(F,Fe)|0;var Rt=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,w=Math.imul(X,_e),c=Math.imul(X,Ie),c=c+Math.imul(Q,_e)|0,_=Math.imul(Q,Ie),w=w+Math.imul(B,Ne)|0,c=c+Math.imul(B,Re)|0,c=c+Math.imul(q,Ne)|0,_=_+Math.imul(q,Re)|0,w=w+Math.imul(H,qe)|0,c=c+Math.imul(H,Fe)|0,c=c+Math.imul(J,qe)|0,_=_+Math.imul(J,Fe)|0,w=w+Math.imul(O,$e)|0,c=c+Math.imul(O,Be)|0,c=c+Math.imul(F,$e)|0,_=_+Math.imul(F,Be)|0;var Lr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,w=Math.imul(ue,_e),c=Math.imul(ue,Ie),c=c+Math.imul(me,_e)|0,_=Math.imul(me,Ie),w=w+Math.imul(X,Ne)|0,c=c+Math.imul(X,Re)|0,c=c+Math.imul(Q,Ne)|0,_=_+Math.imul(Q,Re)|0,w=w+Math.imul(B,qe)|0,c=c+Math.imul(B,Fe)|0,c=c+Math.imul(q,qe)|0,_=_+Math.imul(q,Fe)|0,w=w+Math.imul(H,$e)|0,c=c+Math.imul(H,Be)|0,c=c+Math.imul(J,$e)|0,_=_+Math.imul(J,Be)|0,w=w+Math.imul(O,Le)|0,c=c+Math.imul(O,ze)|0,c=c+Math.imul(F,Le)|0,_=_+Math.imul(F,ze)|0;var Pr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,w=Math.imul(xe,_e),c=Math.imul(xe,Ie),c=c+Math.imul(le,_e)|0,_=Math.imul(le,Ie),w=w+Math.imul(ue,Ne)|0,c=c+Math.imul(ue,Re)|0,c=c+Math.imul(me,Ne)|0,_=_+Math.imul(me,Re)|0,w=w+Math.imul(X,qe)|0,c=c+Math.imul(X,Fe)|0,c=c+Math.imul(Q,qe)|0,_=_+Math.imul(Q,Fe)|0,w=w+Math.imul(B,$e)|0,c=c+Math.imul(B,Be)|0,c=c+Math.imul(q,$e)|0,_=_+Math.imul(q,Be)|0,w=w+Math.imul(H,Le)|0,c=c+Math.imul(H,ze)|0,c=c+Math.imul(J,Le)|0,_=_+Math.imul(J,ze)|0,w=w+Math.imul(O,Pe)|0,c=c+Math.imul(O,Oe)|0,c=c+Math.imul(F,Pe)|0,_=_+Math.imul(F,Oe)|0;var qr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(qr>>>26)|0,qr&=67108863,w=Math.imul(we,_e),c=Math.imul(we,Ie),c=c+Math.imul(Te,_e)|0,_=Math.imul(Te,Ie),w=w+Math.imul(xe,Ne)|0,c=c+Math.imul(xe,Re)|0,c=c+Math.imul(le,Ne)|0,_=_+Math.imul(le,Re)|0,w=w+Math.imul(ue,qe)|0,c=c+Math.imul(ue,Fe)|0,c=c+Math.imul(me,qe)|0,_=_+Math.imul(me,Fe)|0,w=w+Math.imul(X,$e)|0,c=c+Math.imul(X,Be)|0,c=c+Math.imul(Q,$e)|0,_=_+Math.imul(Q,Be)|0,w=w+Math.imul(B,Le)|0,c=c+Math.imul(B,ze)|0,c=c+Math.imul(q,Le)|0,_=_+Math.imul(q,ze)|0,w=w+Math.imul(H,Pe)|0,c=c+Math.imul(H,Oe)|0,c=c+Math.imul(J,Pe)|0,_=_+Math.imul(J,Oe)|0,w=w+Math.imul(O,je)|0,c=c+Math.imul(O,Ue)|0,c=c+Math.imul(F,je)|0,_=_+Math.imul(F,Ue)|0;var $r=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+($r>>>26)|0,$r&=67108863,w=Math.imul(ee,_e),c=Math.imul(ee,Ie),c=c+Math.imul(ie,_e)|0,_=Math.imul(ie,Ie),w=w+Math.imul(we,Ne)|0,c=c+Math.imul(we,Re)|0,c=c+Math.imul(Te,Ne)|0,_=_+Math.imul(Te,Re)|0,w=w+Math.imul(xe,qe)|0,c=c+Math.imul(xe,Fe)|0,c=c+Math.imul(le,qe)|0,_=_+Math.imul(le,Fe)|0,w=w+Math.imul(ue,$e)|0,c=c+Math.imul(ue,Be)|0,c=c+Math.imul(me,$e)|0,_=_+Math.imul(me,Be)|0,w=w+Math.imul(X,Le)|0,c=c+Math.imul(X,ze)|0,c=c+Math.imul(Q,Le)|0,_=_+Math.imul(Q,ze)|0,w=w+Math.imul(B,Pe)|0,c=c+Math.imul(B,Oe)|0,c=c+Math.imul(q,Pe)|0,_=_+Math.imul(q,Oe)|0,w=w+Math.imul(H,je)|0,c=c+Math.imul(H,Ue)|0,c=c+Math.imul(J,je)|0,_=_+Math.imul(J,Ue)|0,w=w+Math.imul(O,ke)|0,c=c+Math.imul(O,Ve)|0,c=c+Math.imul(F,ke)|0,_=_+Math.imul(F,Ve)|0;var zr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(zr>>>26)|0,zr&=67108863,w=Math.imul(ae,_e),c=Math.imul(ae,Ie),c=c+Math.imul(de,_e)|0,_=Math.imul(de,Ie),w=w+Math.imul(ee,Ne)|0,c=c+Math.imul(ee,Re)|0,c=c+Math.imul(ie,Ne)|0,_=_+Math.imul(ie,Re)|0,w=w+Math.imul(we,qe)|0,c=c+Math.imul(we,Fe)|0,c=c+Math.imul(Te,qe)|0,_=_+Math.imul(Te,Fe)|0,w=w+Math.imul(xe,$e)|0,c=c+Math.imul(xe,Be)|0,c=c+Math.imul(le,$e)|0,_=_+Math.imul(le,Be)|0,w=w+Math.imul(ue,Le)|0,c=c+Math.imul(ue,ze)|0,c=c+Math.imul(me,Le)|0,_=_+Math.imul(me,ze)|0,w=w+Math.imul(X,Pe)|0,c=c+Math.imul(X,Oe)|0,c=c+Math.imul(Q,Pe)|0,_=_+Math.imul(Q,Oe)|0,w=w+Math.imul(B,je)|0,c=c+Math.imul(B,Ue)|0,c=c+Math.imul(q,je)|0,_=_+Math.imul(q,Ue)|0,w=w+Math.imul(H,ke)|0,c=c+Math.imul(H,Ve)|0,c=c+Math.imul(J,ke)|0,_=_+Math.imul(J,Ve)|0,w=w+Math.imul(O,De)|0,c=c+Math.imul(O,We)|0,c=c+Math.imul(F,De)|0,_=_+Math.imul(F,We)|0;var jr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(jr>>>26)|0,jr&=67108863,w=Math.imul(he,_e),c=Math.imul(he,Ie),c=c+Math.imul(Se,_e)|0,_=Math.imul(Se,Ie),w=w+Math.imul(ae,Ne)|0,c=c+Math.imul(ae,Re)|0,c=c+Math.imul(de,Ne)|0,_=_+Math.imul(de,Re)|0,w=w+Math.imul(ee,qe)|0,c=c+Math.imul(ee,Fe)|0,c=c+Math.imul(ie,qe)|0,_=_+Math.imul(ie,Fe)|0,w=w+Math.imul(we,$e)|0,c=c+Math.imul(we,Be)|0,c=c+Math.imul(Te,$e)|0,_=_+Math.imul(Te,Be)|0,w=w+Math.imul(xe,Le)|0,c=c+Math.imul(xe,ze)|0,c=c+Math.imul(le,Le)|0,_=_+Math.imul(le,ze)|0,w=w+Math.imul(ue,Pe)|0,c=c+Math.imul(ue,Oe)|0,c=c+Math.imul(me,Pe)|0,_=_+Math.imul(me,Oe)|0,w=w+Math.imul(X,je)|0,c=c+Math.imul(X,Ue)|0,c=c+Math.imul(Q,je)|0,_=_+Math.imul(Q,Ue)|0,w=w+Math.imul(B,ke)|0,c=c+Math.imul(B,Ve)|0,c=c+Math.imul(q,ke)|0,_=_+Math.imul(q,Ve)|0,w=w+Math.imul(H,De)|0,c=c+Math.imul(H,We)|0,c=c+Math.imul(J,De)|0,_=_+Math.imul(J,We)|0,w=w+Math.imul(O,Ge)|0,c=c+Math.imul(O,He)|0,c=c+Math.imul(F,Ge)|0,_=_+Math.imul(F,He)|0;var Ur=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,w=Math.imul(he,Ne),c=Math.imul(he,Re),c=c+Math.imul(Se,Ne)|0,_=Math.imul(Se,Re),w=w+Math.imul(ae,qe)|0,c=c+Math.imul(ae,Fe)|0,c=c+Math.imul(de,qe)|0,_=_+Math.imul(de,Fe)|0,w=w+Math.imul(ee,$e)|0,c=c+Math.imul(ee,Be)|0,c=c+Math.imul(ie,$e)|0,_=_+Math.imul(ie,Be)|0,w=w+Math.imul(we,Le)|0,c=c+Math.imul(we,ze)|0,c=c+Math.imul(Te,Le)|0,_=_+Math.imul(Te,ze)|0,w=w+Math.imul(xe,Pe)|0,c=c+Math.imul(xe,Oe)|0,c=c+Math.imul(le,Pe)|0,_=_+Math.imul(le,Oe)|0,w=w+Math.imul(ue,je)|0,c=c+Math.imul(ue,Ue)|0,c=c+Math.imul(me,je)|0,_=_+Math.imul(me,Ue)|0,w=w+Math.imul(X,ke)|0,c=c+Math.imul(X,Ve)|0,c=c+Math.imul(Q,ke)|0,_=_+Math.imul(Q,Ve)|0,w=w+Math.imul(B,De)|0,c=c+Math.imul(B,We)|0,c=c+Math.imul(q,De)|0,_=_+Math.imul(q,We)|0,w=w+Math.imul(H,Ge)|0,c=c+Math.imul(H,He)|0,c=c+Math.imul(J,Ge)|0,_=_+Math.imul(J,He)|0;var Vr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,w=Math.imul(he,qe),c=Math.imul(he,Fe),c=c+Math.imul(Se,qe)|0,_=Math.imul(Se,Fe),w=w+Math.imul(ae,$e)|0,c=c+Math.imul(ae,Be)|0,c=c+Math.imul(de,$e)|0,_=_+Math.imul(de,Be)|0,w=w+Math.imul(ee,Le)|0,c=c+Math.imul(ee,ze)|0,c=c+Math.imul(ie,Le)|0,_=_+Math.imul(ie,ze)|0,w=w+Math.imul(we,Pe)|0,c=c+Math.imul(we,Oe)|0,c=c+Math.imul(Te,Pe)|0,_=_+Math.imul(Te,Oe)|0,w=w+Math.imul(xe,je)|0,c=c+Math.imul(xe,Ue)|0,c=c+Math.imul(le,je)|0,_=_+Math.imul(le,Ue)|0,w=w+Math.imul(ue,ke)|0,c=c+Math.imul(ue,Ve)|0,c=c+Math.imul(me,ke)|0,_=_+Math.imul(me,Ve)|0,w=w+Math.imul(X,De)|0,c=c+Math.imul(X,We)|0,c=c+Math.imul(Q,De)|0,_=_+Math.imul(Q,We)|0,w=w+Math.imul(B,Ge)|0,c=c+Math.imul(B,He)|0,c=c+Math.imul(q,Ge)|0,_=_+Math.imul(q,He)|0;var Wr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,w=Math.imul(he,$e),c=Math.imul(he,Be),c=c+Math.imul(Se,$e)|0,_=Math.imul(Se,Be),w=w+Math.imul(ae,Le)|0,c=c+Math.imul(ae,ze)|0,c=c+Math.imul(de,Le)|0,_=_+Math.imul(de,ze)|0,w=w+Math.imul(ee,Pe)|0,c=c+Math.imul(ee,Oe)|0,c=c+Math.imul(ie,Pe)|0,_=_+Math.imul(ie,Oe)|0,w=w+Math.imul(we,je)|0,c=c+Math.imul(we,Ue)|0,c=c+Math.imul(Te,je)|0,_=_+Math.imul(Te,Ue)|0,w=w+Math.imul(xe,ke)|0,c=c+Math.imul(xe,Ve)|0,c=c+Math.imul(le,ke)|0,_=_+Math.imul(le,Ve)|0,w=w+Math.imul(ue,De)|0,c=c+Math.imul(ue,We)|0,c=c+Math.imul(me,De)|0,_=_+Math.imul(me,We)|0,w=w+Math.imul(X,Ge)|0,c=c+Math.imul(X,He)|0,c=c+Math.imul(Q,Ge)|0,_=_+Math.imul(Q,He)|0;var Gr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,w=Math.imul(he,Le),c=Math.imul(he,ze),c=c+Math.imul(Se,Le)|0,_=Math.imul(Se,ze),w=w+Math.imul(ae,Pe)|0,c=c+Math.imul(ae,Oe)|0,c=c+Math.imul(de,Pe)|0,_=_+Math.imul(de,Oe)|0,w=w+Math.imul(ee,je)|0,c=c+Math.imul(ee,Ue)|0,c=c+Math.imul(ie,je)|0,_=_+Math.imul(ie,Ue)|0,w=w+Math.imul(we,ke)|0,c=c+Math.imul(we,Ve)|0,c=c+Math.imul(Te,ke)|0,_=_+Math.imul(Te,Ve)|0,w=w+Math.imul(xe,De)|0,c=c+Math.imul(xe,We)|0,c=c+Math.imul(le,De)|0,_=_+Math.imul(le,We)|0,w=w+Math.imul(ue,Ge)|0,c=c+Math.imul(ue,He)|0,c=c+Math.imul(me,Ge)|0,_=_+Math.imul(me,He)|0;var Hr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,w=Math.imul(he,Pe),c=Math.imul(he,Oe),c=c+Math.imul(Se,Pe)|0,_=Math.imul(Se,Oe),w=w+Math.imul(ae,je)|0,c=c+Math.imul(ae,Ue)|0,c=c+Math.imul(de,je)|0,_=_+Math.imul(de,Ue)|0,w=w+Math.imul(ee,ke)|0,c=c+Math.imul(ee,Ve)|0,c=c+Math.imul(ie,ke)|0,_=_+Math.imul(ie,Ve)|0,w=w+Math.imul(we,De)|0,c=c+Math.imul(we,We)|0,c=c+Math.imul(Te,De)|0,_=_+Math.imul(Te,We)|0,w=w+Math.imul(xe,Ge)|0,c=c+Math.imul(xe,He)|0,c=c+Math.imul(le,Ge)|0,_=_+Math.imul(le,He)|0;var Kr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,w=Math.imul(he,je),c=Math.imul(he,Ue),c=c+Math.imul(Se,je)|0,_=Math.imul(Se,Ue),w=w+Math.imul(ae,ke)|0,c=c+Math.imul(ae,Ve)|0,c=c+Math.imul(de,ke)|0,_=_+Math.imul(de,Ve)|0,w=w+Math.imul(ee,De)|0,c=c+Math.imul(ee,We)|0,c=c+Math.imul(ie,De)|0,_=_+Math.imul(ie,We)|0,w=w+Math.imul(we,Ge)|0,c=c+Math.imul(we,He)|0,c=c+Math.imul(Te,Ge)|0,_=_+Math.imul(Te,He)|0;var Zr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,w=Math.imul(he,ke),c=Math.imul(he,Ve),c=c+Math.imul(Se,ke)|0,_=Math.imul(Se,Ve),w=w+Math.imul(ae,De)|0,c=c+Math.imul(ae,We)|0,c=c+Math.imul(de,De)|0,_=_+Math.imul(de,We)|0,w=w+Math.imul(ee,Ge)|0,c=c+Math.imul(ee,He)|0,c=c+Math.imul(ie,Ge)|0,_=_+Math.imul(ie,He)|0;var Jr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,w=Math.imul(he,De),c=Math.imul(he,We),c=c+Math.imul(Se,De)|0,_=Math.imul(Se,We),w=w+Math.imul(ae,Ge)|0,c=c+Math.imul(ae,He)|0,c=c+Math.imul(de,Ge)|0,_=_+Math.imul(de,He)|0;var Xt=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,w=Math.imul(he,Ge),c=Math.imul(he,He),c=c+Math.imul(Se,Ge)|0,_=Math.imul(Se,He);var Tr=(k+w|0)+((c&8191)<<13)|0;return k=(_+(c>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,E[0]=rn,E[1]=Ot,E[2]=Rt,E[3]=Lr,E[4]=Pr,E[5]=qr,E[6]=$r,E[7]=zr,E[8]=jr,E[9]=Ur,E[10]=Vr,E[11]=Wr,E[12]=Gr,E[13]=Hr,E[14]=Kr,E[15]=Zr,E[16]=Jr,E[17]=Xt,E[18]=Tr,k!==0&&(E[19]=k,g.length++),g};Math.imul||(A=S);function T(M,f,d){d.negative=f.negative^M.negative,d.length=M.length+f.length;for(var g=0,m=0,b=0;b<d.length-1;b++){var E=m;m=0;for(var k=g&67108863,w=Math.min(b,f.length-1),c=Math.max(0,b-M.length+1);c<=w;c++){var _=b-c,R=M.words[_]|0,O=f.words[c]|0,F=R*O,U=F&67108863;E=E+(F/67108864|0)|0,U=U+k|0,k=U&67108863,E=E+(U>>>26)|0,m+=E>>>26,E&=67108863}d.words[b]=k,g=E,E=m}return g!==0?d.words[b]=g:d.length--,d.strip()}function I(M,f,d){var g=new N;return g.mulp(M,f,d)}a.prototype.mulTo=function(f,d){var g,m=this.length+f.length;return this.length===10&&f.length===10?g=A(this,f,d):m<63?g=S(this,f,d):m<1024?g=T(this,f,d):g=I(this,f,d),g};function N(M,f){this.x=M,this.y=f}N.prototype.makeRBT=function(f){for(var d=new Array(f),g=a.prototype._countBits(f)-1,m=0;m<f;m++)d[m]=this.revBin(m,g,f);return d},N.prototype.revBin=function(f,d,g){if(f===0||f===g-1)return f;for(var m=0,b=0;b<d;b++)m|=(f&1)<<d-b-1,f>>=1;return m},N.prototype.permute=function(f,d,g,m,b,E){for(var k=0;k<E;k++)m[k]=d[f[k]],b[k]=g[f[k]]},N.prototype.transform=function(f,d,g,m,b,E){this.permute(E,f,d,g,m,b);for(var k=1;k<b;k<<=1)for(var w=k<<1,c=Math.cos(2*Math.PI/w),_=Math.sin(2*Math.PI/w),R=0;R<b;R+=w)for(var O=c,F=_,U=0;U<k;U++){var H=g[R+U],J=m[R+U],fe=g[R+U+k],B=m[R+U+k],q=O*fe-F*B;B=O*B+F*fe,fe=q,g[R+U]=H+fe,m[R+U]=J+B,g[R+U+k]=H-fe,m[R+U+k]=J-B,U!==w&&(q=c*O-_*F,F=c*F+_*O,O=q)}},N.prototype.guessLen13b=function(f,d){var g=Math.max(d,f)|1,m=g&1,b=0;for(g=g/2|0;g;g=g>>>1)b++;return 1<<b+1+m},N.prototype.conjugate=function(f,d,g){if(!(g<=1))for(var m=0;m<g/2;m++){var b=f[m];f[m]=f[g-m-1],f[g-m-1]=b,b=d[m],d[m]=-d[g-m-1],d[g-m-1]=-b}},N.prototype.normalize13b=function(f,d){for(var g=0,m=0;m<d/2;m++){var b=Math.round(f[2*m+1]/d)*8192+Math.round(f[2*m]/d)+g;f[m]=b&67108863,b<67108864?g=0:g=b/67108864|0}return f},N.prototype.convert13b=function(f,d,g,m){for(var b=0,E=0;E<d;E++)b=b+(f[E]|0),g[2*E]=b&8191,b=b>>>13,g[2*E+1]=b&8191,b=b>>>13;for(E=2*d;E<m;++E)g[E]=0;r(b===0),r((b&-8192)===0)},N.prototype.stub=function(f){for(var d=new Array(f),g=0;g<f;g++)d[g]=0;return d},N.prototype.mulp=function(f,d,g){var m=2*this.guessLen13b(f.length,d.length),b=this.makeRBT(m),E=this.stub(m),k=new Array(m),w=new Array(m),c=new Array(m),_=new Array(m),R=new Array(m),O=new Array(m),F=g.words;F.length=m,this.convert13b(f.words,f.length,k,m),this.convert13b(d.words,d.length,_,m),this.transform(k,E,w,c,m,b),this.transform(_,E,R,O,m,b);for(var U=0;U<m;U++){var H=w[U]*R[U]-c[U]*O[U];c[U]=w[U]*O[U]+c[U]*R[U],w[U]=H}return this.conjugate(w,c,m),this.transform(w,c,F,E,m,b),this.conjugate(F,E,m),this.normalize13b(F,m),g.negative=f.negative^d.negative,g.length=f.length+d.length,g.strip()},a.prototype.mul=function(f){var d=new a(null);return d.words=new Array(this.length+f.length),this.mulTo(f,d)},a.prototype.mulf=function(f){var d=new a(null);return d.words=new Array(this.length+f.length),I(this,f,d)},a.prototype.imul=function(f){return this.clone().mulTo(f,this)},a.prototype.imuln=function(f){r(typeof f=="number"),r(f<67108864);for(var d=0,g=0;g<this.length;g++){var m=(this.words[g]|0)*f,b=(m&67108863)+(d&67108863);d>>=26,d+=m/67108864|0,d+=b>>>26,this.words[g]=b&67108863}return d!==0&&(this.words[g]=d,this.length++),this},a.prototype.muln=function(f){return this.clone().imuln(f)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(f){var d=y(f);if(d.length===0)return new a(1);for(var g=this,m=0;m<d.length&&d[m]===0;m++,g=g.sqr());if(++m<d.length)for(var b=g.sqr();m<d.length;m++,b=b.sqr())d[m]!==0&&(g=g.mul(b));return g},a.prototype.iushln=function(f){r(typeof f=="number"&&f>=0);var d=f%26,g=(f-d)/26,m=67108863>>>26-d<<26-d,b;if(d!==0){var E=0;for(b=0;b<this.length;b++){var k=this.words[b]&m,w=(this.words[b]|0)-k<<d;this.words[b]=w|E,E=k>>>26-d}E&&(this.words[b]=E,this.length++)}if(g!==0){for(b=this.length-1;b>=0;b--)this.words[b+g]=this.words[b];for(b=0;b<g;b++)this.words[b]=0;this.length+=g}return this.strip()},a.prototype.ishln=function(f){return r(this.negative===0),this.iushln(f)},a.prototype.iushrn=function(f,d,g){r(typeof f=="number"&&f>=0);var m;d?m=(d-d%26)/26:m=0;var b=f%26,E=Math.min((f-b)/26,this.length),k=67108863^67108863>>>b<<b,w=g;if(m-=E,m=Math.max(0,m),w){for(var c=0;c<E;c++)w.words[c]=this.words[c];w.length=E}if(E!==0)if(this.length>E)for(this.length-=E,c=0;c<this.length;c++)this.words[c]=this.words[c+E];else this.words[0]=0,this.length=1;var _=0;for(c=this.length-1;c>=0&&(_!==0||c>=m);c--){var R=this.words[c]|0;this.words[c]=_<<26-b|R>>>b,_=R&k}return w&&_!==0&&(w.words[w.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(f,d,g){return r(this.negative===0),this.iushrn(f,d,g)},a.prototype.shln=function(f){return this.clone().ishln(f)},a.prototype.ushln=function(f){return this.clone().iushln(f)},a.prototype.shrn=function(f){return this.clone().ishrn(f)},a.prototype.ushrn=function(f){return this.clone().iushrn(f)},a.prototype.testn=function(f){r(typeof f=="number"&&f>=0);var d=f%26,g=(f-d)/26,m=1<<d;if(this.length<=g)return!1;var b=this.words[g];return!!(b&m)},a.prototype.imaskn=function(f){r(typeof f=="number"&&f>=0);var d=f%26,g=(f-d)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(d!==0&&g++,this.length=Math.min(g,this.length),d!==0){var m=67108863^67108863>>>d<<d;this.words[this.length-1]&=m}return this.strip()},a.prototype.maskn=function(f){return this.clone().imaskn(f)},a.prototype.iaddn=function(f){return r(typeof f=="number"),r(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},a.prototype._iaddn=function(f){this.words[0]+=f;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},a.prototype.isubn=function(f){if(r(typeof f=="number"),r(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this.strip()},a.prototype.addn=function(f){return this.clone().iaddn(f)},a.prototype.subn=function(f){return this.clone().isubn(f)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(f,d,g){var m=f.length+g,b;this._expand(m);var E,k=0;for(b=0;b<f.length;b++){E=(this.words[b+g]|0)+k;var w=(f.words[b]|0)*d;E-=w&67108863,k=(E>>26)-(w/67108864|0),this.words[b+g]=E&67108863}for(;b<this.length-g;b++)E=(this.words[b+g]|0)+k,k=E>>26,this.words[b+g]=E&67108863;if(k===0)return this.strip();for(r(k===-1),k=0,b=0;b<this.length;b++)E=-(this.words[b]|0)+k,k=E>>26,this.words[b]=E&67108863;return this.negative=1,this.strip()},a.prototype._wordDiv=function(f,d){var g=this.length-f.length,m=this.clone(),b=f,E=b.words[b.length-1]|0,k=this._countBits(E);g=26-k,g!==0&&(b=b.ushln(g),m.iushln(g),E=b.words[b.length-1]|0);var w=m.length-b.length,c;if(d!=="mod"){c=new a(null),c.length=w+1,c.words=new Array(c.length);for(var _=0;_<c.length;_++)c.words[_]=0}var R=m.clone()._ishlnsubmul(b,1,w);R.negative===0&&(m=R,c&&(c.words[w]=1));for(var O=w-1;O>=0;O--){var F=(m.words[b.length+O]|0)*67108864+(m.words[b.length+O-1]|0);for(F=Math.min(F/E|0,67108863),m._ishlnsubmul(b,F,O);m.negative!==0;)F--,m.negative=0,m._ishlnsubmul(b,1,O),m.isZero()||(m.negative^=1);c&&(c.words[O]=F)}return c&&c.strip(),m.strip(),d!=="div"&&g!==0&&m.iushrn(g),{div:c||null,mod:m}},a.prototype.divmod=function(f,d,g){if(r(!f.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var m,b,E;return this.negative!==0&&f.negative===0?(E=this.neg().divmod(f,d),d!=="mod"&&(m=E.div.neg()),d!=="div"&&(b=E.mod.neg(),g&&b.negative!==0&&b.iadd(f)),{div:m,mod:b}):this.negative===0&&f.negative!==0?(E=this.divmod(f.neg(),d),d!=="mod"&&(m=E.div.neg()),{div:m,mod:E.mod}):(this.negative&f.negative)!==0?(E=this.neg().divmod(f.neg(),d),d!=="div"&&(b=E.mod.neg(),g&&b.negative!==0&&b.isub(f)),{div:E.div,mod:b}):f.length>this.length||this.cmp(f)<0?{div:new a(0),mod:this}:f.length===1?d==="div"?{div:this.divn(f.words[0]),mod:null}:d==="mod"?{div:null,mod:new a(this.modn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new a(this.modn(f.words[0]))}:this._wordDiv(f,d)},a.prototype.div=function(f){return this.divmod(f,"div",!1).div},a.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},a.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},a.prototype.divRound=function(f){var d=this.divmod(f);if(d.mod.isZero())return d.div;var g=d.div.negative!==0?d.mod.isub(f):d.mod,m=f.ushrn(1),b=f.andln(1),E=g.cmp(m);return E<0||b===1&&E===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},a.prototype.modn=function(f){r(f<=67108863);for(var d=(1<<26)%f,g=0,m=this.length-1;m>=0;m--)g=(d*g+(this.words[m]|0))%f;return g},a.prototype.idivn=function(f){r(f<=67108863);for(var d=0,g=this.length-1;g>=0;g--){var m=(this.words[g]|0)+d*67108864;this.words[g]=m/f|0,d=m%f}return this.strip()},a.prototype.divn=function(f){return this.clone().idivn(f)},a.prototype.egcd=function(f){r(f.negative===0),r(!f.isZero());var d=this,g=f.clone();d.negative!==0?d=d.umod(f):d=d.clone();for(var m=new a(1),b=new a(0),E=new a(0),k=new a(1),w=0;d.isEven()&&g.isEven();)d.iushrn(1),g.iushrn(1),++w;for(var c=g.clone(),_=d.clone();!d.isZero();){for(var R=0,O=1;(d.words[0]&O)===0&&R<26;++R,O<<=1);if(R>0)for(d.iushrn(R);R-- >0;)(m.isOdd()||b.isOdd())&&(m.iadd(c),b.isub(_)),m.iushrn(1),b.iushrn(1);for(var F=0,U=1;(g.words[0]&U)===0&&F<26;++F,U<<=1);if(F>0)for(g.iushrn(F);F-- >0;)(E.isOdd()||k.isOdd())&&(E.iadd(c),k.isub(_)),E.iushrn(1),k.iushrn(1);d.cmp(g)>=0?(d.isub(g),m.isub(E),b.isub(k)):(g.isub(d),E.isub(m),k.isub(b))}return{a:E,b:k,gcd:g.iushln(w)}},a.prototype._invmp=function(f){r(f.negative===0),r(!f.isZero());var d=this,g=f.clone();d.negative!==0?d=d.umod(f):d=d.clone();for(var m=new a(1),b=new a(0),E=g.clone();d.cmpn(1)>0&&g.cmpn(1)>0;){for(var k=0,w=1;(d.words[0]&w)===0&&k<26;++k,w<<=1);if(k>0)for(d.iushrn(k);k-- >0;)m.isOdd()&&m.iadd(E),m.iushrn(1);for(var c=0,_=1;(g.words[0]&_)===0&&c<26;++c,_<<=1);if(c>0)for(g.iushrn(c);c-- >0;)b.isOdd()&&b.iadd(E),b.iushrn(1);d.cmp(g)>=0?(d.isub(g),m.isub(b)):(g.isub(d),b.isub(m))}var R;return d.cmpn(1)===0?R=m:R=b,R.cmpn(0)<0&&R.iadd(f),R},a.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var d=this.clone(),g=f.clone();d.negative=0,g.negative=0;for(var m=0;d.isEven()&&g.isEven();m++)d.iushrn(1),g.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;g.isEven();)g.iushrn(1);var b=d.cmp(g);if(b<0){var E=d;d=g,g=E}else if(b===0||g.cmpn(1)===0)break;d.isub(g)}while(!0);return g.iushln(m)},a.prototype.invm=function(f){return this.egcd(f).a.umod(f)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(f){return this.words[0]&f},a.prototype.bincn=function(f){r(typeof f=="number");var d=f%26,g=(f-d)/26,m=1<<d;if(this.length<=g)return this._expand(g+1),this.words[g]|=m,this;for(var b=m,E=g;b!==0&&E<this.length;E++){var k=this.words[E]|0;k+=b,b=k>>>26,k&=67108863,this.words[E]=k}return b!==0&&(this.words[E]=b,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(f){var d=f<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this.strip();var g;if(this.length>1)g=1;else{d&&(f=-f),r(f<=67108863,"Number is too big");var m=this.words[0]|0;g=m===f?0:m<f?-1:1}return this.negative!==0?-g|0:g},a.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var d=this.ucmp(f);return this.negative!==0?-d|0:d},a.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var d=0,g=this.length-1;g>=0;g--){var m=this.words[g]|0,b=f.words[g]|0;if(m!==b){m<b?d=-1:m>b&&(d=1);break}}return d},a.prototype.gtn=function(f){return this.cmpn(f)===1},a.prototype.gt=function(f){return this.cmp(f)===1},a.prototype.gten=function(f){return this.cmpn(f)>=0},a.prototype.gte=function(f){return this.cmp(f)>=0},a.prototype.ltn=function(f){return this.cmpn(f)===-1},a.prototype.lt=function(f){return this.cmp(f)===-1},a.prototype.lten=function(f){return this.cmpn(f)<=0},a.prototype.lte=function(f){return this.cmp(f)<=0},a.prototype.eqn=function(f){return this.cmpn(f)===0},a.prototype.eq=function(f){return this.cmp(f)===0},a.red=function(f){return new j(f)},a.prototype.toRed=function(f){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},a.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(f){return this.red=f,this},a.prototype.forceRed=function(f){return r(!this.red,"Already a number in reduction context"),this._forceRed(f)},a.prototype.redAdd=function(f){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},a.prototype.redIAdd=function(f){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},a.prototype.redSub=function(f){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},a.prototype.redISub=function(f){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},a.prototype.redShl=function(f){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},a.prototype.redMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},a.prototype.redIMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},a.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(f){return r(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var D={k256:null,p224:null,p192:null,p25519:null};function C(M,f){this.name=M,this.p=new a(f,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}C.prototype._tmp=function(){var f=new a(null);return f.words=new Array(Math.ceil(this.n/13)),f},C.prototype.ireduce=function(f){var d=f,g;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),g=d.bitLength();while(g>this.n);var m=g<this.n?-1:d.ucmp(this.p);return m===0?(d.words[0]=0,d.length=1):m>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},C.prototype.split=function(f,d){f.iushrn(this.n,0,d)},C.prototype.imulK=function(f){return f.imul(this.k)};function L(){C.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(L,C),L.prototype.split=function(f,d){for(var g=4194303,m=Math.min(f.length,9),b=0;b<m;b++)d.words[b]=f.words[b];if(d.length=m,f.length<=9){f.words[0]=0,f.length=1;return}var E=f.words[9];for(d.words[d.length++]=E&g,b=10;b<f.length;b++){var k=f.words[b]|0;f.words[b-10]=(k&g)<<4|E>>>22,E=k}E>>>=22,f.words[b-10]=E,E===0&&f.length>10?f.length-=10:f.length-=9},L.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var d=0,g=0;g<f.length;g++){var m=f.words[g]|0;d+=m*977,f.words[g]=d&67108863,d=m*64+(d/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function z(){C.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(z,C);function $(){C.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n($,C);function G(){C.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(G,C),G.prototype.imulK=function(f){for(var d=0,g=0;g<f.length;g++){var m=(f.words[g]|0)*19+d,b=m&67108863;m>>>=26,f.words[g]=b,d=m}return d!==0&&(f.words[f.length++]=d),f},a._prime=function(f){if(D[f])return D[f];var d;if(f==="k256")d=new L;else if(f==="p224")d=new z;else if(f==="p192")d=new $;else if(f==="p25519")d=new G;else throw new Error("Unknown prime "+f);return D[f]=d,d};function j(M){if(typeof M=="string"){var f=a._prime(M);this.m=f.p,this.prime=f}else r(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}j.prototype._verify1=function(f){r(f.negative===0,"red works only with positives"),r(f.red,"red works only with red numbers")},j.prototype._verify2=function(f,d){r((f.negative|d.negative)===0,"red works only with positives"),r(f.red&&f.red===d.red,"red works only with red numbers")},j.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):f.umod(this.m)._forceRed(this)},j.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},j.prototype.add=function(f,d){this._verify2(f,d);var g=f.add(d);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},j.prototype.iadd=function(f,d){this._verify2(f,d);var g=f.iadd(d);return g.cmp(this.m)>=0&&g.isub(this.m),g},j.prototype.sub=function(f,d){this._verify2(f,d);var g=f.sub(d);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},j.prototype.isub=function(f,d){this._verify2(f,d);var g=f.isub(d);return g.cmpn(0)<0&&g.iadd(this.m),g},j.prototype.shl=function(f,d){return this._verify1(f),this.imod(f.ushln(d))},j.prototype.imul=function(f,d){return this._verify2(f,d),this.imod(f.imul(d))},j.prototype.mul=function(f,d){return this._verify2(f,d),this.imod(f.mul(d))},j.prototype.isqr=function(f){return this.imul(f,f.clone())},j.prototype.sqr=function(f){return this.mul(f,f)},j.prototype.sqrt=function(f){if(f.isZero())return f.clone();var d=this.m.andln(3);if(r(d%2===1),d===3){var g=this.m.add(new a(1)).iushrn(2);return this.pow(f,g)}for(var m=this.m.subn(1),b=0;!m.isZero()&&m.andln(1)===0;)b++,m.iushrn(1);r(!m.isZero());var E=new a(1).toRed(this),k=E.redNeg(),w=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new a(2*c*c).toRed(this);this.pow(c,w).cmp(k)!==0;)c.redIAdd(k);for(var _=this.pow(c,m),R=this.pow(f,m.addn(1).iushrn(1)),O=this.pow(f,m),F=b;O.cmp(E)!==0;){for(var U=O,H=0;U.cmp(E)!==0;H++)U=U.redSqr();r(H<F);var J=this.pow(_,new a(1).iushln(F-H-1));R=R.redMul(J),_=J.redSqr(),O=O.redMul(_),F=H}return R},j.prototype.invm=function(f){var d=f._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},j.prototype.pow=function(f,d){if(d.isZero())return new a(1).toRed(this);if(d.cmpn(1)===0)return f.clone();var g=4,m=new Array(1<<g);m[0]=new a(1).toRed(this),m[1]=f;for(var b=2;b<m.length;b++)m[b]=this.mul(m[b-1],f);var E=m[0],k=0,w=0,c=d.bitLength()%26;for(c===0&&(c=26),b=d.length-1;b>=0;b--){for(var _=d.words[b],R=c-1;R>=0;R--){var O=_>>R&1;if(E!==m[0]&&(E=this.sqr(E)),O===0&&k===0){w=0;continue}k<<=1,k|=O,w++,!(w!==g&&(b!==0||R!==0))&&(E=this.mul(E,m[k]),w=0,k=0)}c=26}return E},j.prototype.convertTo=function(f){var d=f.umod(this.m);return d===f?d.clone():d},j.prototype.convertFrom=function(f){var d=f.clone();return d.red=null,d},a.mont=function(f){return new K(f)};function K(M){j.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(K,j),K.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},K.prototype.convertFrom=function(f){var d=this.imod(f.mul(this.rinv));return d.red=null,d},K.prototype.imul=function(f,d){if(f.isZero()||d.isZero())return f.words[0]=0,f.length=1,f;var g=f.imul(d),m=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(m).iushrn(this.shift),E=b;return b.cmp(this.m)>=0?E=b.isub(this.m):b.cmpn(0)<0&&(E=b.iadd(this.m)),E._forceRed(this)},K.prototype.mul=function(f,d){if(f.isZero()||d.isZero())return new a(0)._forceRed(this);var g=f.mul(d),m=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(m).iushrn(this.shift),E=b;return b.cmp(this.m)>=0?E=b.isub(this.m):b.cmpn(0)<0&&(E=b.iadd(this.m)),E._forceRed(this)},K.prototype.invm=function(f){var d=this.imod(f._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(typeof uT=="undefined"||uT,cL)});var n_=ne((WQe,cT)=>{var fT;cT.exports=function(e){return fT||(fT=new ml(null)),fT.generate(e)};function ml(t){this.rand=t}cT.exports.Rand=ml;ml.prototype.generate=function(e){return this._rand(e)};ml.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?ml.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?ml.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(ml.prototype._rand=function(){throw new Error("Not implemented yet")});else try{if(lT=i_(),typeof lT.randomBytes!="function")throw new Error("Not supported");ml.prototype._rand=function(e){return lT.randomBytes(e)}}catch{}var lT});var hT=ne((GQe,dL)=>{var jc=hL(),mve=n_();function Uc(t){this.rand=t||new mve.Rand}dL.exports=Uc;Uc.create=function(e){return new Uc(e)};Uc.prototype._randbelow=function(e){var r=e.bitLength(),n=Math.ceil(r/8);do var a=new jc(this.rand.generate(n));while(a.cmp(e)>=0);return a};Uc.prototype._randrange=function(e,r){var n=r.sub(e);return e.add(this._randbelow(n))};Uc.prototype.test=function(e,r,n){var a=e.bitLength(),s=jc.mont(e),o=new jc(1).toRed(s);r||(r=Math.max(1,a/48|0));for(var u=e.subn(1),l=0;!u.testn(l);l++);for(var h=e.shrn(l),p=u.toRed(s),v=!0;r>0;r--){var y=this._randrange(new jc(2),u);n&&n(y);var S=y.toRed(s).redPow(h);if(!(S.cmp(o)===0||S.cmp(p)===0)){for(var A=1;A<l;A++){if(S=S.redSqr(),S.cmp(o)===0)return!1;if(S.cmp(p)===0)break}if(A===l)return!1}}return v};Uc.prototype.getDivisor=function(e,r){var n=e.bitLength(),a=jc.mont(e),s=new jc(1).toRed(a);r||(r=Math.max(1,n/48|0));for(var o=e.subn(1),u=0;!o.testn(u);u++);for(var l=e.shrn(u),h=o.toRed(a);r>0;r--){var p=this._randrange(new jc(2),o),v=e.gcd(p);if(v.cmpn(1)!==0)return v;var y=p.toRed(a).redPow(l);if(!(y.cmp(s)===0||y.cmp(h)===0)){for(var S=1;S<u;S++){if(y=y.redSqr(),y.cmp(s)===0)return y.fromRed().subn(1).gcd(e);if(y.cmp(h)===0)break}if(S===u)return y=y.redSqr(),y.fromRed().subn(1).gcd(e)}}return!1}});var yT=ne((YQe,vL)=>{var vve=_c();vL.exports=gT;gT.simpleSieve=mT;gT.fermatTest=vT;var Hi=oT(),gve=new Hi(24),yve=hT(),pL=new yve,bve=new Hi(1),pT=new Hi(2),wve=new Hi(5),HQe=new Hi(16),KQe=new Hi(8),_ve=new Hi(10),xve=new Hi(3),ZQe=new Hi(7),Sve=new Hi(11),mL=new Hi(4),JQe=new Hi(12),dT=null;function Eve(){if(dT!==null)return dT;var t=1048576,e=[];e[0]=2;for(var r=1,n=3;n<t;n+=2){for(var a=Math.ceil(Math.sqrt(n)),s=0;s<r&&e[s]<=a&&n%e[s]!==0;s++);r!==s&&e[s]<=a||(e[r++]=n)}return dT=e,e}function mT(t){for(var e=Eve(),r=0;r<e.length;r++)if(t.modn(e[r])===0)return t.cmpn(e[r])===0;return!0}function vT(t){var e=Hi.mont(t);return pT.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)===0}function gT(t,e){if(t<16)return e===2||e===5?new Hi([140,123]):new Hi([140,39]);e=new Hi(e);for(var r,n;;){for(r=new Hi(vve(Math.ceil(t/8)));r.bitLength()>t;)r.ishrn(1);if(r.isEven()&&r.iadd(bve),r.testn(1)||r.iadd(pT),e.cmp(pT)){if(!e.cmp(wve))for(;r.mod(_ve).cmp(xve);)r.iadd(mL)}else for(;r.mod(gve).cmp(Sve);)r.iadd(mL);if(n=r.shrn(1),mT(n)&&mT(r)&&vT(n)&&vT(r)&&pL.test(n)&&pL.test(r))return r}}});var gL=ne((XQe,Mve)=>{Mve.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}});var _L=ne((QQe,wL)=>{var Ns=oT(),Ave=hT(),yL=new Ave,kve=new Ns(24),Tve=new Ns(11),Nve=new Ns(10),Ive=new Ns(3),Dve=new Ns(7),bL=yT(),Ove=_c();wL.exports=nf;function Rve(t,e){return e=e||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,e)),this._pub=new Ns(t),this}function Cve(t,e){return e=e||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,e)),this._priv=new Ns(t),this}var a_={};function Fve(t,e){var r=e.toString("hex"),n=[r,t.toString(16)].join("_");if(n in a_)return a_[n];var a=0;if(t.isEven()||!bL.simpleSieve||!bL.fermatTest(t)||!yL.test(t))return a+=1,r==="02"||r==="05"?a+=8:a+=4,a_[n]=a,a;yL.test(t.shrn(1))||(a+=2);var s;switch(r){case"02":t.mod(kve).cmp(Tve)&&(a+=8);break;case"05":s=t.mod(Nve),s.cmp(Ive)&&s.cmp(Dve)&&(a+=8);break;default:a+=4}return a_[n]=a,a}function nf(t,e,r){this.setGenerator(e),this.__prime=new Ns(t),this._prime=Ns.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,r?(this.setPublicKey=Rve,this.setPrivateKey=Cve):this._primeCode=8}Object.defineProperty(nf.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=Fve(this.__prime,this.__gen)),this._primeCode}});nf.prototype.generateKeys=function(){return this._priv||(this._priv=new Ns(Ove(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()};nf.prototype.computeSecret=function(t){t=new Ns(t),t=t.toRed(this._prime);var e=t.redPow(this._priv).fromRed(),r=new Buffer(e.toArray()),n=this.getPrime();if(r.length<n.length){var a=new Buffer(n.length-r.length);a.fill(0),r=Buffer.concat([a,r])}return r};nf.prototype.getPublicKey=function(e){return s_(this._pub,e)};nf.prototype.getPrivateKey=function(e){return s_(this._priv,e)};nf.prototype.getPrime=function(t){return s_(this.__prime,t)};nf.prototype.getGenerator=function(t){return s_(this._gen,t)};nf.prototype.setGenerator=function(t,e){return e=e||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,e)),this.__gen=t,this._gen=new Ns(t),this};function s_(t,e){var r=new Buffer(t.toArray());return e?r.toString(e):r}});var EL=ne(tp=>{var Bve=yT(),xL=gL(),bT=_L();function Lve(t){var e=new Buffer(xL[t].prime,"hex"),r=new Buffer(xL[t].gen,"hex");return new bT(e,r)}var Pve={binary:!0,hex:!0,base64:!0};function SL(t,e,r,n){return Buffer.isBuffer(e)||Pve[e]===void 0?SL(t,"binary",e,r):(e=e||"binary",n=n||"binary",r=r||new Buffer([2]),Buffer.isBuffer(r)||(r=new Buffer(r,n)),typeof t=="number"?new bT(Bve(t,r),r,!0):(Buffer.isBuffer(t)||(t=new Buffer(t,e)),new bT(t,r,!0)))}tp.DiffieHellmanGroup=tp.createDiffieHellmanGroup=tp.getDiffieHellman=Lve;tp.createDiffieHellman=tp.DiffieHellman=SL});var u_=ne((wT,AL)=>{var o_=mn(),yu=o_.Buffer;function ML(t,e){for(var r in t)e[r]=t[r]}yu.from&&yu.alloc&&yu.allocUnsafe&&yu.allocUnsafeSlow?AL.exports=o_:(ML(o_,wT),wT.Buffer=Vc);function Vc(t,e,r){return yu(t,e,r)}Vc.prototype=Object.create(yu.prototype);ML(yu,Vc);Vc.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return yu(t,e,r)};Vc.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=yu(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Vc.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return yu(t)};Vc.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return o_.SlowBuffer(t)}});var _T=ne((tet,kL)=>{kL.exports=vs().EventEmitter});var DL=ne((ret,IL)=>{"use strict";function TL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function qve(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TL(Object(r),!0).forEach(function(n){$ve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $ve(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function jve(t,e,r){return e&&NL(t.prototype,e),r&&NL(t,r),t}var Uve=mn(),f_=Uve.Buffer,Vve=uu(),xT=Vve.inspect,Wve=xT&&xT.custom||"inspect";function Gve(t,e,r){f_.prototype.copy.call(t,e,r)}IL.exports=function(){function t(){zve(this,t),this.head=null,this.tail=null,this.length=0}return jve(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,a=""+n.data;n=n.next;)a+=r+n.data;return a}},{key:"concat",value:function(r){if(this.length===0)return f_.alloc(0);for(var n=f_.allocUnsafe(r>>>0),a=this.head,s=0;a;)Gve(a.data,n,s),s+=a.data.length,a=a.next;return n}},{key:"consume",value:function(r,n){var a;return r<this.head.data.length?(a=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?a=this.shift():a=n?this._getString(r):this._getBuffer(r),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,a=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,u=r>o.length?o.length:r;if(u===o.length?s+=o:s+=o.slice(0,r),r-=u,r===0){u===o.length?(++a,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(u));break}++a}return this.length-=a,s}},{key:"_getBuffer",value:function(r){var n=f_.allocUnsafe(r),a=this.head,s=1;for(a.data.copy(n),r-=a.data.length;a=a.next;){var o=a.data,u=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,u),r-=u,r===0){u===o.length?(++s,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=o.slice(u));break}++s}return this.length-=s,n}},{key:Wve,value:function(r,n){return xT(this,qve({},n,{depth:0,customInspect:!1}))}}]),t}()});var ET=ne((net,RL)=>{"use strict";function Hve(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return n||a?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(ST,this,t)):process.nextTick(ST,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(l_,r):(r._writableState.errorEmitted=!0,process.nextTick(OL,r,s)):process.nextTick(OL,r,s):e?(process.nextTick(l_,r),e(s)):process.nextTick(l_,r)}),this)}function OL(t,e){ST(t,e),l_(t)}function l_(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function Kve(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function ST(t,e){t.emit("error",e)}function Zve(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}RL.exports={destroy:Hve,undestroy:Kve,errorOrDestroy:Zve}});var Wc=ne((iet,BL)=>{"use strict";function Jve(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var FL={};function Is(t,e,r){r||(r=Error);function n(s,o,u){return typeof e=="string"?e:e(s,o,u)}var a=function(s){Jve(o,s);function o(u,l,h){return s.call(this,n(u,l,h))||this}return o}(r);a.prototype.name=r.name,a.prototype.code=t,FL[t]=a}function CL(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function Yve(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function Xve(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function Qve(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}Is("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Is("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&Yve(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var a;if(Xve(t," argument"))a="The ".concat(t," ").concat(n," ").concat(CL(e,"type"));else{var s=Qve(t,".")?"property":"argument";a='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat(CL(e,"type"))}return a+=". Received type ".concat(typeof r),a},TypeError);Is("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Is("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Is("ERR_STREAM_PREMATURE_CLOSE","Premature close");Is("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Is("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Is("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Is("ERR_STREAM_WRITE_AFTER_END","write after end");Is("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Is("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Is("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");BL.exports.codes=FL});var MT=ne((aet,LL)=>{"use strict";var ege=Wc().codes.ERR_INVALID_OPT_VALUE;function tge(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function rge(t,e,r,n){var a=tge(e,n,r);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var s=n?r:"highWaterMark";throw new ege(s,a)}return Math.floor(a)}return t.objectMode?16:16*1024}LL.exports={getHighWaterMark:rge}});var TT=ne((set,UL)=>{"use strict";UL.exports=ii;function qL(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Nge(e,t)}}var rp;ii.WritableState=pg;var nge={deprecate:Sv()},$L=_T(),h_=mn().Buffer,ige=global.Uint8Array||function(){};function age(t){return h_.from(t)}function sge(t){return h_.isBuffer(t)||t instanceof ige}var kT=ET(),oge=MT(),uge=oge.getHighWaterMark,vl=Wc().codes,fge=vl.ERR_INVALID_ARG_TYPE,lge=vl.ERR_METHOD_NOT_IMPLEMENTED,cge=vl.ERR_MULTIPLE_CALLBACK,hge=vl.ERR_STREAM_CANNOT_PIPE,dge=vl.ERR_STREAM_DESTROYED,pge=vl.ERR_STREAM_NULL_VALUES,mge=vl.ERR_STREAM_WRITE_AFTER_END,vge=vl.ERR_UNKNOWN_ENCODING,np=kT.errorOrDestroy;Et()(ii,$L);function gge(){}function pg(t,e,r){rp=rp||Gc(),t=t||{},typeof r!="boolean"&&(r=e instanceof rp),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=uge(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){Ege(e,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new qL(this)}pg.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(pg.prototype,"buffer",{get:nge.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var c_;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(c_=Function.prototype[Symbol.hasInstance],Object.defineProperty(ii,Symbol.hasInstance,{value:function(e){return c_.call(this,e)?!0:this!==ii?!1:e&&e._writableState instanceof pg}})):c_=function(e){return e instanceof this};function ii(t){rp=rp||Gc();var e=this instanceof rp;if(!e&&!c_.call(ii,this))return new ii(t);this._writableState=new pg(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),$L.call(this)}ii.prototype.pipe=function(){np(this,new hge)};function yge(t,e){var r=new mge;np(t,r),process.nextTick(e,r)}function bge(t,e,r,n){var a;return r===null?a=new pge:typeof r!="string"&&!e.objectMode&&(a=new fge("chunk",["string","Buffer"],r)),a?(np(t,a),process.nextTick(n,a),!1):!0}ii.prototype.write=function(t,e,r){var n=this._writableState,a=!1,s=!n.objectMode&&sge(t);return s&&!h_.isBuffer(t)&&(t=age(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=gge),n.ending?yge(this,r):(s||bge(this,n,t,r))&&(n.pendingcb++,a=_ge(this,n,s,t,e,r)),a};ii.prototype.cork=function(){this._writableState.corked++};ii.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&zL(this,t))};ii.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new vge(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(ii.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function wge(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=h_.from(e,r)),e}Object.defineProperty(ii.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function _ge(t,e,r,n,a,s){if(!r){var o=wge(e,n,a);n!==o&&(r=!0,a="buffer",n=o)}var u=e.objectMode?1:n.length;e.length+=u;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:a,isBuf:r,callback:s,next:null},h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else AT(t,e,!1,u,n,a,s);return l}function AT(t,e,r,n,a,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new dge("write")):r?t._writev(a,e.onwrite):t._write(a,s,e.onwrite),e.sync=!1}function xge(t,e,r,n,a){--e.pendingcb,r?(process.nextTick(a,n),process.nextTick(dg,t,e),t._writableState.errorEmitted=!0,np(t,n)):(a(n),t._writableState.errorEmitted=!0,np(t,n),dg(t,e))}function Sge(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Ege(t,e){var r=t._writableState,n=r.sync,a=r.writecb;if(typeof a!="function")throw new cge;if(Sge(r),e)xge(t,r,n,e,a);else{var s=jL(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&zL(t,r),n?process.nextTick(PL,t,r,s,a):PL(t,r,s,a)}}function PL(t,e,r,n){r||Mge(t,e),e.pendingcb--,n(),dg(t,e)}function Mge(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function zL(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,a=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,u=!0;r;)a[o]=r,r.isBuf||(u=!1),r=r.next,o+=1;a.allBuffers=u,AT(t,e,!0,e.length,a,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new qL(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,h=r.encoding,p=r.callback,v=e.objectMode?1:l.length;if(AT(t,e,!1,v,l,h,p),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}ii.prototype._write=function(t,e,r){r(new lge("_write()"))};ii.prototype._writev=null;ii.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||Tge(this,n,r),this};Object.defineProperty(ii.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function jL(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Age(t,e){t._final(function(r){e.pendingcb--,r&&np(t,r),e.prefinished=!0,t.emit("prefinish"),dg(t,e)})}function kge(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(Age,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function dg(t,e){var r=jL(e);if(r&&(kge(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function Tge(t,e,r){e.ending=!0,dg(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Nge(t,e,r){var n=t.entry;for(t.entry=null;n;){var a=n.callback;e.pendingcb--,a(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(ii.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});ii.prototype.destroy=kT.destroy;ii.prototype._undestroy=kT.undestroy;ii.prototype._destroy=function(t,e){e(t)}});var Gc=ne((oet,WL)=>{"use strict";var Ige=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};WL.exports=bu;var VL=DT(),IT=TT();Et()(bu,VL);for(NT=Ige(IT.prototype),d_=0;d_<NT.length;d_++)p_=NT[d_],bu.prototype[p_]||(bu.prototype[p_]=IT.prototype[p_]);var NT,p_,d_;function bu(t){if(!(this instanceof bu))return new bu(t);VL.call(this,t),IT.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",Dge)))}Object.defineProperty(bu.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(bu.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(bu.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Dge(){this._writableState.ended||process.nextTick(Oge,this)}function Oge(t){t.end()}Object.defineProperty(bu.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var m_=ne((uet,KL)=>{"use strict";var GL=Wc().codes.ERR_STREAM_PREMATURE_CLOSE;function Rge(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];t.apply(this,n)}}}function Cge(){}function Fge(t){return t.setHeader&&typeof t.abort=="function"}function HL(t,e,r){if(typeof e=="function")return HL(t,null,e);e||(e={}),r=Rge(r||Cge);var n=e.readable||e.readable!==!1&&t.readable,a=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||u()},o=t._writableState&&t._writableState.finished,u=function(){a=!1,o=!0,n||r.call(t)},l=t._readableState&&t._readableState.endEmitted,h=function(){n=!1,l=!0,a||r.call(t)},p=function(A){r.call(t,A)},v=function(){var A;if(n&&!l)return(!t._readableState||!t._readableState.ended)&&(A=new GL),r.call(t,A);if(a&&!o)return(!t._writableState||!t._writableState.ended)&&(A=new GL),r.call(t,A)},y=function(){t.req.on("finish",u)};return Fge(t)?(t.on("complete",u),t.on("abort",v),t.req?y():t.on("request",y)):a&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",h),t.on("finish",u),e.error!==!1&&t.on("error",p),t.on("close",v),function(){t.removeListener("complete",u),t.removeListener("abort",v),t.removeListener("request",y),t.req&&t.req.removeListener("finish",u),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",u),t.removeListener("end",h),t.removeListener("error",p),t.removeListener("close",v)}}KL.exports=HL});var JL=ne((fet,ZL)=>{"use strict";var v_;function gl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Bge=m_(),yl=Symbol("lastResolve"),Hc=Symbol("lastReject"),mg=Symbol("error"),g_=Symbol("ended"),Kc=Symbol("lastPromise"),OT=Symbol("handlePromise"),Zc=Symbol("stream");function bl(t,e){return{value:t,done:e}}function Lge(t){var e=t[yl];if(e!==null){var r=t[Zc].read();r!==null&&(t[Kc]=null,t[yl]=null,t[Hc]=null,e(bl(r,!1)))}}function Pge(t){process.nextTick(Lge,t)}function qge(t,e){return function(r,n){t.then(function(){if(e[g_]){r(bl(void 0,!0));return}e[OT](r,n)},n)}}var $ge=Object.getPrototypeOf(function(){}),zge=Object.setPrototypeOf((v_={get stream(){return this[Zc]},next:function(){var e=this,r=this[mg];if(r!==null)return Promise.reject(r);if(this[g_])return Promise.resolve(bl(void 0,!0));if(this[Zc].destroyed)return new Promise(function(o,u){process.nextTick(function(){e[mg]?u(e[mg]):o(bl(void 0,!0))})});var n=this[Kc],a;if(n)a=new Promise(qge(n,this));else{var s=this[Zc].read();if(s!==null)return Promise.resolve(bl(s,!1));a=new Promise(this[OT])}return this[Kc]=a,a}},gl(v_,Symbol.asyncIterator,function(){return this}),gl(v_,"return",function(){var e=this;return new Promise(function(r,n){e[Zc].destroy(null,function(a){if(a){n(a);return}r(bl(void 0,!0))})})}),v_),$ge),jge=function(e){var r,n=Object.create(zge,(r={},gl(r,Zc,{value:e,writable:!0}),gl(r,yl,{value:null,writable:!0}),gl(r,Hc,{value:null,writable:!0}),gl(r,mg,{value:null,writable:!0}),gl(r,g_,{value:e._readableState.endEmitted,writable:!0}),gl(r,OT,{value:function(s,o){var u=n[Zc].read();u?(n[Kc]=null,n[yl]=null,n[Hc]=null,s(bl(u,!1))):(n[yl]=s,n[Hc]=o)},writable:!0}),r));return n[Kc]=null,Bge(e,function(a){if(a&&a.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[Hc];s!==null&&(n[Kc]=null,n[yl]=null,n[Hc]=null,s(a)),n[mg]=a;return}var o=n[yl];o!==null&&(n[Kc]=null,n[yl]=null,n[Hc]=null,o(bl(void 0,!0))),n[g_]=!0}),e.on("readable",Pge.bind(null,n)),n};ZL.exports=jge});var XL=ne((cet,YL)=>{YL.exports=function(){throw new Error("Readable.from is not available in the browser")}});var DT=ne((det,uP)=>{"use strict";uP.exports=br;var ip;br.ReadableState=rP;var het=vs().EventEmitter,tP=function(e,r){return e.listeners(r).length},gg=_T(),y_=mn().Buffer,Uge=global.Uint8Array||function(){};function Vge(t){return y_.from(t)}function Wge(t){return y_.isBuffer(t)||t instanceof Uge}var RT=uu(),rr;RT&&RT.debuglog?rr=RT.debuglog("stream"):rr=function(){};var Gge=DL(),$T=ET(),Hge=MT(),Kge=Hge.getHighWaterMark,b_=Wc().codes,Zge=b_.ERR_INVALID_ARG_TYPE,Jge=b_.ERR_STREAM_PUSH_AFTER_EOF,Yge=b_.ERR_METHOD_NOT_IMPLEMENTED,Xge=b_.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,ap,CT,FT;Et()(br,gg);var vg=$T.errorOrDestroy,BT=["error","close","destroy","pause","resume"];function Qge(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function rP(t,e,r){ip=ip||Gc(),t=t||{},typeof r!="boolean"&&(r=e instanceof ip),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=Kge(this,t,"readableHighWaterMark",r),this.buffer=new Gge,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(ap||(ap=cu().StringDecoder),this.decoder=new ap(t.encoding),this.encoding=t.encoding)}function br(t){if(ip=ip||Gc(),!(this instanceof br))return new br(t);var e=this instanceof ip;this._readableState=new rP(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),gg.call(this)}Object.defineProperty(br.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});br.prototype.destroy=$T.destroy;br.prototype._undestroy=$T.undestroy;br.prototype._destroy=function(t,e){e(t)};br.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=y_.from(t,e),e=""),n=!0),nP(this,t,e,!1,n)};br.prototype.unshift=function(t){return nP(this,t,null,!0,!1)};function nP(t,e,r,n,a){rr("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,rye(t,s);else{var o;if(a||(o=eye(s,e)),o)vg(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==y_.prototype&&(e=Vge(e)),n)s.endEmitted?vg(t,new Xge):LT(t,s,e,!0);else if(s.ended)vg(t,new Jge);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?LT(t,s,e,!1):qT(t,s)):LT(t,s,e,!1)}else n||(s.reading=!1,qT(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function LT(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&w_(t)),qT(t,e)}function eye(t,e){var r;return!Wge(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new Zge("chunk",["string","Buffer","Uint8Array"],e)),r}br.prototype.isPaused=function(){return this._readableState.flowing===!1};br.prototype.setEncoding=function(t){ap||(ap=cu().StringDecoder);var e=new ap(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var QL=1073741824;function tye(t){return t>=QL?t=QL:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function eP(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=tye(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}br.prototype.read=function(t){rr("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return rr("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?PT(this):w_(this),null;if(t=eP(t,e),t===0&&e.ended)return e.length===0&&PT(this),null;var n=e.needReadable;rr("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,rr("length less than watermark",n)),e.ended||e.reading?(n=!1,rr("reading or ended",n)):n&&(rr("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=eP(r,e)));var a;return t>0?a=sP(t,e):a=null,a===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&PT(this)),a!==null&&this.emit("data",a),a};function rye(t,e){if(rr("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?w_(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,iP(t)))}}function w_(t){var e=t._readableState;rr("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(rr("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(iP,t))}function iP(t){var e=t._readableState;rr("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,zT(t)}function qT(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(nye,t,e))}function nye(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(rr("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}br.prototype._read=function(t){vg(this,new Yge("_read()"))};br.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,rr("pipe count=%d opts=%j",n.pipesCount,e);var a=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=a?u:T;n.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(I,N){rr("onunpipe"),I===r&&N&&N.hasUnpiped===!1&&(N.hasUnpiped=!0,p())}function u(){rr("onend"),t.end()}var l=iye(r);t.on("drain",l);var h=!1;function p(){rr("cleanup"),t.removeListener("close",S),t.removeListener("finish",A),t.removeListener("drain",l),t.removeListener("error",y),t.removeListener("unpipe",o),r.removeListener("end",u),r.removeListener("end",T),r.removeListener("data",v),h=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l()}r.on("data",v);function v(I){rr("ondata");var N=t.write(I);rr("dest.write",N),N===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&oP(n.pipes,t)!==-1)&&!h&&(rr("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function y(I){rr("onerror",I),T(),t.removeListener("error",y),tP(t,"error")===0&&vg(t,I)}Qge(t,"error",y);function S(){t.removeListener("finish",A),T()}t.once("close",S);function A(){rr("onfinish"),t.removeListener("close",S),T()}t.once("finish",A);function T(){rr("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(rr("pipe resume"),r.resume()),t};function iye(t){return function(){var r=t._readableState;rr("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&tP(t,"data")&&(r.flowing=!0,zT(t))}}br.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,a=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<a;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=oP(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};br.prototype.on=function(t,e){var r=gg.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,rr("on readable",n.length,n.reading),n.length?w_(this):n.reading||process.nextTick(aye,this)),r};br.prototype.addListener=br.prototype.on;br.prototype.removeListener=function(t,e){var r=gg.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(aP,this),r};br.prototype.removeAllListeners=function(t){var e=gg.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(aP,this),e};function aP(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function aye(t){rr("readable nexttick read 0"),t.read(0)}br.prototype.resume=function(){var t=this._readableState;return t.flowing||(rr("resume"),t.flowing=!t.readableListening,sye(this,t)),t.paused=!1,this};function sye(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(oye,t,e))}function oye(t,e){rr("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),zT(t),e.flowing&&!e.reading&&t.read(0)}br.prototype.pause=function(){return rr("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(rr("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function zT(t){var e=t._readableState;for(rr("flow",e.flowing);e.flowing&&t.read()!==null;);}br.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(rr("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(rr("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var u=e.push(o);u||(n=!0,t.pause())}});for(var a in t)this[a]===void 0&&typeof t[a]=="function"&&(this[a]=function(u){return function(){return t[u].apply(t,arguments)}}(a));for(var s=0;s<BT.length;s++)t.on(BT[s],this.emit.bind(this,BT[s]));return this._read=function(o){rr("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(br.prototype[Symbol.asyncIterator]=function(){return CT===void 0&&(CT=JL()),CT(this)});Object.defineProperty(br.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(br.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(br.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});br._fromList=sP;Object.defineProperty(br.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function sP(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function PT(t){var e=t._readableState;rr("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(uye,e,t))}function uye(t,e){if(rr("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(br.from=function(t,e){return FT===void 0&&(FT=XL()),FT(br,t,e)});function oP(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var jT=ne((pet,lP)=>{"use strict";lP.exports=af;var __=Wc().codes,fye=__.ERR_METHOD_NOT_IMPLEMENTED,lye=__.ERR_MULTIPLE_CALLBACK,cye=__.ERR_TRANSFORM_ALREADY_TRANSFORMING,hye=__.ERR_TRANSFORM_WITH_LENGTH_0,x_=Gc();Et()(af,x_);function dye(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new lye);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function af(t){if(!(this instanceof af))return new af(t);x_.call(this,t),this._transformState={afterTransform:dye.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",pye)}function pye(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){fP(t,e,r)}):fP(this,null,null)}af.prototype.push=function(t,e){return this._transformState.needTransform=!1,x_.prototype.push.call(this,t,e)};af.prototype._transform=function(t,e,r){r(new fye("_transform()"))};af.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var a=this._readableState;(n.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}};af.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};af.prototype._destroy=function(t,e){x_.prototype._destroy.call(this,t,function(r){e(r)})};function fP(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new hye;if(t._transformState.transforming)throw new cye;return t.push(null)}});var dP=ne((met,hP)=>{"use strict";hP.exports=yg;var cP=jT();Et()(yg,cP);function yg(t){if(!(this instanceof yg))return new yg(t);cP.call(this,t)}yg.prototype._transform=function(t,e,r){r(null,t)}});var yP=ne((vet,gP)=>{"use strict";var UT;function mye(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var vP=Wc().codes,vye=vP.ERR_MISSING_ARGS,gye=vP.ERR_STREAM_DESTROYED;function pP(t){if(t)throw t}function yye(t){return t.setHeader&&typeof t.abort=="function"}function bye(t,e,r,n){n=mye(n);var a=!1;t.on("close",function(){a=!0}),UT===void 0&&(UT=m_()),UT(t,{readable:e,writable:r},function(o){if(o)return n(o);a=!0,n()});var s=!1;return function(o){if(!a&&!s){if(s=!0,yye(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new gye("pipe"))}}}function mP(t){t()}function wye(t,e){return t.pipe(e)}function _ye(t){return!t.length||typeof t[t.length-1]!="function"?pP:t.pop()}function xye(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=_ye(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new vye("streams");var a,s=e.map(function(o,u){var l=u<e.length-1,h=u>0;return bye(o,l,h,function(p){a||(a=p),p&&s.forEach(mP),!l&&(s.forEach(mP),n(a))})});return e.reduce(wye)}gP.exports=xye});var wP=ne((Ds,bP)=>{Ds=bP.exports=DT();Ds.Stream=Ds;Ds.Readable=Ds;Ds.Writable=TT();Ds.Duplex=Gc();Ds.Transform=jT();Ds.PassThrough=dP();Ds.finished=m_();Ds.pipeline=yP()});var S_=ne((_P,VT)=>{(function(t,e){"use strict";function r(g,m){if(!g)throw new Error(m||"Assertion failed")}function n(g,m){g.super_=m;var b=function(){};b.prototype=m.prototype,g.prototype=new b,g.prototype.constructor=g}function a(g,m,b){if(a.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,g!==null&&((m==="le"||m==="be")&&(b=m,m=10),this._init(g||0,m||10,b||"be"))}typeof t=="object"?t.exports=a:e.BN=a,a.BN=a,a.wordSize=26;var s;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?s=window.Buffer:s=mn().Buffer}catch{}a.isBN=function(m){return m instanceof a?!0:m!==null&&typeof m=="object"&&m.constructor.wordSize===a.wordSize&&Array.isArray(m.words)},a.max=function(m,b){return m.cmp(b)>0?m:b},a.min=function(m,b){return m.cmp(b)<0?m:b},a.prototype._init=function(m,b,E){if(typeof m=="number")return this._initNumber(m,b,E);if(typeof m=="object")return this._initArray(m,b,E);b==="hex"&&(b=16),r(b===(b|0)&&b>=2&&b<=36),m=m.toString().replace(/\s+/g,"");var k=0;m[0]==="-"&&(k++,this.negative=1),k<m.length&&(b===16?this._parseHex(m,k,E):(this._parseBase(m,b,k),E==="le"&&this._initArray(this.toArray(),b,E)))},a.prototype._initNumber=function(m,b,E){m<0&&(this.negative=1,m=-m),m<67108864?(this.words=[m&67108863],this.length=1):m<4503599627370496?(this.words=[m&67108863,m/67108864&67108863],this.length=2):(r(m<9007199254740992),this.words=[m&67108863,m/67108864&67108863,1],this.length=3),E==="le"&&this._initArray(this.toArray(),b,E)},a.prototype._initArray=function(m,b,E){if(r(typeof m.length=="number"),m.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(m.length/3),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var w,c,_=0;if(E==="be")for(k=m.length-1,w=0;k>=0;k-=3)c=m[k]|m[k-1]<<8|m[k-2]<<16,this.words[w]|=c<<_&67108863,this.words[w+1]=c>>>26-_&67108863,_+=24,_>=26&&(_-=26,w++);else if(E==="le")for(k=0,w=0;k<m.length;k+=3)c=m[k]|m[k+1]<<8|m[k+2]<<16,this.words[w]|=c<<_&67108863,this.words[w+1]=c>>>26-_&67108863,_+=24,_>=26&&(_-=26,w++);return this._strip()};function o(g,m){var b=g.charCodeAt(m);if(b>=48&&b<=57)return b-48;if(b>=65&&b<=70)return b-55;if(b>=97&&b<=102)return b-87;r(!1,"Invalid character in "+g)}function u(g,m,b){var E=o(g,b);return b-1>=m&&(E|=o(g,b-1)<<4),E}a.prototype._parseHex=function(m,b,E){this.length=Math.ceil((m.length-b)/6),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var w=0,c=0,_;if(E==="be")for(k=m.length-1;k>=b;k-=2)_=u(m,b,k)<<w,this.words[c]|=_&67108863,w>=18?(w-=18,c+=1,this.words[c]|=_>>>26):w+=8;else{var R=m.length-b;for(k=R%2===0?b+1:b;k<m.length;k+=2)_=u(m,b,k)<<w,this.words[c]|=_&67108863,w>=18?(w-=18,c+=1,this.words[c]|=_>>>26):w+=8}this._strip()};function l(g,m,b,E){for(var k=0,w=0,c=Math.min(g.length,b),_=m;_<c;_++){var R=g.charCodeAt(_)-48;k*=E,R>=49?w=R-49+10:R>=17?w=R-17+10:w=R,r(R>=0&&w<E,"Invalid character"),k+=w}return k}a.prototype._parseBase=function(m,b,E){this.words=[0],this.length=1;for(var k=0,w=1;w<=67108863;w*=b)k++;k--,w=w/b|0;for(var c=m.length-E,_=c%k,R=Math.min(c,c-_)+E,O=0,F=E;F<R;F+=k)O=l(m,F,F+k,b),this.imuln(w),this.words[0]+O<67108864?this.words[0]+=O:this._iaddn(O);if(_!==0){var U=1;for(O=l(m,F,m.length,b),F=0;F<_;F++)U*=b;this.imuln(U),this.words[0]+O<67108864?this.words[0]+=O:this._iaddn(O)}this._strip()},a.prototype.copy=function(m){m.words=new Array(this.length);for(var b=0;b<this.length;b++)m.words[b]=this.words[b];m.length=this.length,m.negative=this.negative,m.red=this.red};function h(g,m){g.words=m.words,g.length=m.length,g.negative=m.negative,g.red=m.red}if(a.prototype._move=function(m){h(m,this)},a.prototype.clone=function(){var m=new a(null);return this.copy(m),m},a.prototype._expand=function(m){for(;this.length<m;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol!="undefined"&&typeof Symbol.for=="function")try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=p}catch{a.prototype.inspect=p}else a.prototype.inspect=p;function p(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],y=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(m,b){m=m||10,b=b|0||1;var E;if(m===16||m==="hex"){E="";for(var k=0,w=0,c=0;c<this.length;c++){var _=this.words[c],R=((_<<k|w)&16777215).toString(16);w=_>>>24-k&16777215,k+=2,k>=26&&(k-=26,c--),w!==0||c!==this.length-1?E=v[6-R.length]+R+E:E=R+E}for(w!==0&&(E=w.toString(16)+E);E.length%b!==0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}if(m===(m|0)&&m>=2&&m<=36){var O=y[m],F=S[m];E="";var U=this.clone();for(U.negative=0;!U.isZero();){var H=U.modrn(F).toString(m);U=U.idivn(F),U.isZero()?E=H+E:E=v[O-H.length]+H+E}for(this.isZero()&&(E="0"+E);E.length%b!==0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}r(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var m=this.words[0];return this.length===2?m+=this.words[1]*67108864:this.length===3&&this.words[2]===1?m+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-m:m},a.prototype.toJSON=function(){return this.toString(16,2)},s&&(a.prototype.toBuffer=function(m,b){return this.toArrayLike(s,m,b)}),a.prototype.toArray=function(m,b){return this.toArrayLike(Array,m,b)};var A=function(m,b){return m.allocUnsafe?m.allocUnsafe(b):new m(b)};a.prototype.toArrayLike=function(m,b,E){this._strip();var k=this.byteLength(),w=E||Math.max(1,k);r(k<=w,"byte array longer than desired length"),r(w>0,"Requested array length <= 0");var c=A(m,w),_=b==="le"?"LE":"BE";return this["_toArrayLike"+_](c,k),c},a.prototype._toArrayLikeLE=function(m,b){for(var E=0,k=0,w=0,c=0;w<this.length;w++){var _=this.words[w]<<c|k;m[E++]=_&255,E<m.length&&(m[E++]=_>>8&255),E<m.length&&(m[E++]=_>>16&255),c===6?(E<m.length&&(m[E++]=_>>24&255),k=0,c=0):(k=_>>>24,c+=2)}if(E<m.length)for(m[E++]=k;E<m.length;)m[E++]=0},a.prototype._toArrayLikeBE=function(m,b){for(var E=m.length-1,k=0,w=0,c=0;w<this.length;w++){var _=this.words[w]<<c|k;m[E--]=_&255,E>=0&&(m[E--]=_>>8&255),E>=0&&(m[E--]=_>>16&255),c===6?(E>=0&&(m[E--]=_>>24&255),k=0,c=0):(k=_>>>24,c+=2)}if(E>=0)for(m[E--]=k;E>=0;)m[E--]=0},Math.clz32?a.prototype._countBits=function(m){return 32-Math.clz32(m)}:a.prototype._countBits=function(m){var b=m,E=0;return b>=4096&&(E+=13,b>>>=13),b>=64&&(E+=7,b>>>=7),b>=8&&(E+=4,b>>>=4),b>=2&&(E+=2,b>>>=2),E+b},a.prototype._zeroBits=function(m){if(m===0)return 26;var b=m,E=0;return(b&8191)===0&&(E+=13,b>>>=13),(b&127)===0&&(E+=7,b>>>=7),(b&15)===0&&(E+=4,b>>>=4),(b&3)===0&&(E+=2,b>>>=2),(b&1)===0&&E++,E},a.prototype.bitLength=function(){var m=this.words[this.length-1],b=this._countBits(m);return(this.length-1)*26+b};function T(g){for(var m=new Array(g.bitLength()),b=0;b<m.length;b++){var E=b/26|0,k=b%26;m[b]=g.words[E]>>>k&1}return m}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var m=0,b=0;b<this.length;b++){var E=this._zeroBits(this.words[b]);if(m+=E,E!==26)break}return m},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(m){return this.negative!==0?this.abs().inotn(m).iaddn(1):this.clone()},a.prototype.fromTwos=function(m){return this.testn(m-1)?this.notn(m).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(m){for(;this.length<m.length;)this.words[this.length++]=0;for(var b=0;b<m.length;b++)this.words[b]=this.words[b]|m.words[b];return this._strip()},a.prototype.ior=function(m){return r((this.negative|m.negative)===0),this.iuor(m)},a.prototype.or=function(m){return this.length>m.length?this.clone().ior(m):m.clone().ior(this)},a.prototype.uor=function(m){return this.length>m.length?this.clone().iuor(m):m.clone().iuor(this)},a.prototype.iuand=function(m){var b;this.length>m.length?b=m:b=this;for(var E=0;E<b.length;E++)this.words[E]=this.words[E]&m.words[E];return this.length=b.length,this._strip()},a.prototype.iand=function(m){return r((this.negative|m.negative)===0),this.iuand(m)},a.prototype.and=function(m){return this.length>m.length?this.clone().iand(m):m.clone().iand(this)},a.prototype.uand=function(m){return this.length>m.length?this.clone().iuand(m):m.clone().iuand(this)},a.prototype.iuxor=function(m){var b,E;this.length>m.length?(b=this,E=m):(b=m,E=this);for(var k=0;k<E.length;k++)this.words[k]=b.words[k]^E.words[k];if(this!==b)for(;k<b.length;k++)this.words[k]=b.words[k];return this.length=b.length,this._strip()},a.prototype.ixor=function(m){return r((this.negative|m.negative)===0),this.iuxor(m)},a.prototype.xor=function(m){return this.length>m.length?this.clone().ixor(m):m.clone().ixor(this)},a.prototype.uxor=function(m){return this.length>m.length?this.clone().iuxor(m):m.clone().iuxor(this)},a.prototype.inotn=function(m){r(typeof m=="number"&&m>=0);var b=Math.ceil(m/26)|0,E=m%26;this._expand(b),E>0&&b--;for(var k=0;k<b;k++)this.words[k]=~this.words[k]&67108863;return E>0&&(this.words[k]=~this.words[k]&67108863>>26-E),this._strip()},a.prototype.notn=function(m){return this.clone().inotn(m)},a.prototype.setn=function(m,b){r(typeof m=="number"&&m>=0);var E=m/26|0,k=m%26;return this._expand(E+1),b?this.words[E]=this.words[E]|1<<k:this.words[E]=this.words[E]&~(1<<k),this._strip()},a.prototype.iadd=function(m){var b;if(this.negative!==0&&m.negative===0)return this.negative=0,b=this.isub(m),this.negative^=1,this._normSign();if(this.negative===0&&m.negative!==0)return m.negative=0,b=this.isub(m),m.negative=1,b._normSign();var E,k;this.length>m.length?(E=this,k=m):(E=m,k=this);for(var w=0,c=0;c<k.length;c++)b=(E.words[c]|0)+(k.words[c]|0)+w,this.words[c]=b&67108863,w=b>>>26;for(;w!==0&&c<E.length;c++)b=(E.words[c]|0)+w,this.words[c]=b&67108863,w=b>>>26;if(this.length=E.length,w!==0)this.words[this.length]=w,this.length++;else if(E!==this)for(;c<E.length;c++)this.words[c]=E.words[c];return this},a.prototype.add=function(m){var b;return m.negative!==0&&this.negative===0?(m.negative=0,b=this.sub(m),m.negative^=1,b):m.negative===0&&this.negative!==0?(this.negative=0,b=m.sub(this),this.negative=1,b):this.length>m.length?this.clone().iadd(m):m.clone().iadd(this)},a.prototype.isub=function(m){if(m.negative!==0){m.negative=0;var b=this.iadd(m);return m.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(m),this.negative=1,this._normSign();var E=this.cmp(m);if(E===0)return this.negative=0,this.length=1,this.words[0]=0,this;var k,w;E>0?(k=this,w=m):(k=m,w=this);for(var c=0,_=0;_<w.length;_++)b=(k.words[_]|0)-(w.words[_]|0)+c,c=b>>26,this.words[_]=b&67108863;for(;c!==0&&_<k.length;_++)b=(k.words[_]|0)+c,c=b>>26,this.words[_]=b&67108863;if(c===0&&_<k.length&&k!==this)for(;_<k.length;_++)this.words[_]=k.words[_];return this.length=Math.max(this.length,_),k!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(m){return this.clone().isub(m)};function I(g,m,b){b.negative=m.negative^g.negative;var E=g.length+m.length|0;b.length=E,E=E-1|0;var k=g.words[0]|0,w=m.words[0]|0,c=k*w,_=c&67108863,R=c/67108864|0;b.words[0]=_;for(var O=1;O<E;O++){for(var F=R>>>26,U=R&67108863,H=Math.min(O,m.length-1),J=Math.max(0,O-g.length+1);J<=H;J++){var fe=O-J|0;k=g.words[fe]|0,w=m.words[J]|0,c=k*w+U,F+=c/67108864|0,U=c&67108863}b.words[O]=U|0,R=F|0}return R!==0?b.words[O]=R|0:b.length--,b._strip()}var N=function(m,b,E){var k=m.words,w=b.words,c=E.words,_=0,R,O,F,U=k[0]|0,H=U&8191,J=U>>>13,fe=k[1]|0,B=fe&8191,q=fe>>>13,Y=k[2]|0,X=Y&8191,Q=Y>>>13,be=k[3]|0,ue=be&8191,me=be>>>13,vt=k[4]|0,xe=vt&8191,le=vt>>>13,qt=k[5]|0,we=qt&8191,Te=qt>>>13,at=k[6]|0,ee=at&8191,ie=at>>>13,tt=k[7]|0,ae=tt&8191,de=tt>>>13,Ze=k[8]|0,he=Ze&8191,Se=Ze>>>13,At=k[9]|0,_e=At&8191,Ie=At>>>13,nr=w[0]|0,Ne=nr&8191,Re=nr>>>13,Qn=w[1]|0,qe=Qn&8191,Fe=Qn>>>13,$n=w[2]|0,$e=$n&8191,Be=$n>>>13,zn=w[3]|0,Le=zn&8191,ze=zn>>>13,ei=w[4]|0,Pe=ei&8191,Oe=ei>>>13,jn=w[5]|0,je=jn&8191,Ue=jn>>>13,xr=w[6]|0,ke=xr&8191,Ve=xr>>>13,kn=w[7]|0,De=kn&8191,We=kn>>>13,On=w[8]|0,Ge=On&8191,He=On>>>13,rn=w[9]|0,Ot=rn&8191,Rt=rn>>>13;E.negative=m.negative^b.negative,E.length=19,R=Math.imul(H,Ne),O=Math.imul(H,Re),O=O+Math.imul(J,Ne)|0,F=Math.imul(J,Re);var Lr=(_+R|0)+((O&8191)<<13)|0;_=(F+(O>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,R=Math.imul(B,Ne),O=Math.imul(B,Re),O=O+Math.imul(q,Ne)|0,F=Math.imul(q,Re),R=R+Math.imul(H,qe)|0,O=O+Math.imul(H,Fe)|0,O=O+Math.imul(J,qe)|0,F=F+Math.imul(J,Fe)|0;var Pr=(_+R|0)+((O&8191)<<13)|0;_=(F+(O>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,R=Math.imul(X,Ne),O=Math.imul(X,Re),O=O+Math.imul(Q,Ne)|0,F=Math.imul(Q,Re),R=R+Math.imul(B,qe)|0,O=O+Math.imul(B,Fe)|0,O=O+Math.imul(q,qe)|0,F=F+Math.imul(q,Fe)|0,R=R+Math.imul(H,$e)|0,O=O+Math.imul(H,Be)|0,O=O+Math.imul(J,$e)|0,F=F+Math.imul(J,Be)|0;var qr=(_+R|0)+((O&8191)<<13)|0;_=(F+(O>>>13)|0)+(qr>>>26)|0,qr&=67108863,R=Math.imul(ue,Ne),O=Math.imul(ue,Re),O=O+Math.imul(me,Ne)|0,F=Math.imul(me,Re),R=R+Math.imul(X,qe)|0,O=O+Math.imul(X,Fe)|0,O=O+Math.imul(Q,qe)|0,F=F+Math.imul(Q,Fe)|0,R=R+Math.imul(B,$e)|0,O=O+Math.imul(B,Be)|0,O=O+Math.imul(q,$e)|0,F=F+Math.imul(q,Be)|0,R=R+Math.imul(H,Le)|0,O=O+Math.imul(H,ze)|0,O=O+Math.imul(J,Le)|0,F=F+Math.imul(J,ze)|0;var $r=(_+R|0)+((O&8191)<<13)|0;_=(F+(O>>>13)|0)+($r>>>26)|0,$r&=67108863,R=Math.imul(xe,Ne),O=Math.imul(xe,Re),O=O+Math.imul(le,Ne)|0,F=Math.imul(le,Re),R=R+Math.imul(ue,qe)|0,O=O+Math.imul(ue,Fe)|0,O=O+Math.imul(me,qe)|0,F=F+Math.imul(me,Fe)|0,R=R+Math.imul(X,$e)|0,O=O+Math.imul(X,Be)|0,O=O+Math.imul(Q,$e)|0,F=F+Math.imul(Q,Be)|0,R=R+Math.imul(B,Le)|0,O=O+Math.imul(B,ze)|0,O=O+Math.imul(q,Le)|0,F=F+Math.imul(q,ze)|0,R=R+Math.imul(H,Pe)|0,O=O+Math.imul(H,Oe)|0,O=O+Math.imul(J,Pe)|0,F=F+Math.imul(J,Oe)|0;var zr=(_+R|0)+((O&8191)<<13)|0;_=(F+(O>>>13)|0)+(zr>>>26)|0,zr&=67108863,R=Math.imul(we,Ne),O=Math.imul(we,Re),O=O+Math.imul(Te,Ne)|0,F=Math.imul(Te,Re),R=R+Math.imul(xe,qe)|0,O=O+Math.imul(xe,Fe)|0,O=O+Math.imul(le,qe)|0,F=F+Math.imul(le,Fe)|0,R=R+Math.imul(ue,$e)|0,O=O+Math.imul(ue,Be)|0,O=O+Math.imul(me,$e)|0,F=F+Math.imul(me,Be)|0,R=R+Math.imul(X,Le)|0,O=O+Math.imul(X,ze)|0,O=O+Math.imul(Q,Le)|0,F=F+Math.imul(Q,ze)|0,R=R+Math.imul(B,Pe)|0,O=O+Math.imul(B,Oe)|0,O=O+Math.imul(q,Pe)|0,F=F+Math.imul(q,Oe)|0,R=R+Math.imul(H,je)|0,O=O+Math.imul(H,Ue)|0,O=O+Math.imul(J,je)|0,F=F+Math.imul(J,Ue)|0;var jr=(_+R|0)+((O&8191)<<13)|0;_=(F+(O>>>13)|0)+(jr>>>26)|0,jr&=67108863,R=Math.imul(ee,Ne),O=Math.imul(ee,Re),O=O+Math.imul(ie,Ne)|0,F=Math.imul(ie,Re),R=R+Math.imul(we,qe)|0,O=O+Math.imul(we,Fe)|0,O=O+Math.imul(Te,qe)|0,F=F+Math.imul(Te,Fe)|0,R=R+Math.imul(xe,$e)|0,O=O+Math.imul(xe,Be)|0,O=O+Math.imul(le,$e)|0,F=F+Math.imul(le,Be)|0,R=R+Math.imul(ue,Le)|0,O=O+Math.imul(ue,ze)|0,O=O+Math.imul(me,Le)|0,F=F+Math.imul(me,ze)|0,R=R+Math.imul(X,Pe)|0,O=O+Math.imul(X,Oe)|0,O=O+Math.imul(Q,Pe)|0,F=F+Math.imul(Q,Oe)|0,R=R+Math.imul(B,je)|0,O=O+Math.imul(B,Ue)|0,O=O+Math.imul(q,je)|0,F=F+Math.imul(q,Ue)|0,R=R+Math.imul(H,ke)|0,O=O+Math.imul(H,Ve)|0,O=O+Math.imul(J,ke)|0,F=F+Math.imul(J,Ve)|0;var Ur=(_+R|0)+((O&8191)<<13)|0;_=(F+(O>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,R=Math.imul(ae,Ne),O=Math.imul(ae,Re),O=O+Math.imul(de,Ne)|0,F=Math.imul(de,Re),R=R+Math.imul(ee,qe)|0,O=O+Math.imul(ee,Fe)|0,O=O+Math.imul(ie,qe)|0,F=F+Math.imul(ie,Fe)|0,R=R+Math.imul(we,$e)|0,O=O+Math.imul(we,Be)|0,O=O+Math.imul(Te,$e)|0,F=F+Math.imul(Te,Be)|0,R=R+Math.imul(xe,Le)|0,O=O+Math.imul(xe,ze)|0,O=O+Math.imul(le,Le)|0,F=F+Math.imul(le,ze)|0,R=R+Math.imul(ue,Pe)|0,O=O+Math.imul(ue,Oe)|0,O=O+Math.imul(me,Pe)|0,F=F+Math.imul(me,Oe)|0,R=R+Math.imul(X,je)|0,O=O+Math.imul(X,Ue)|0,O=O+Math.imul(Q,je)|0,F=F+Math.imul(Q,Ue)|0,R=R+Math.imul(B,ke)|0,O=O+Math.imul(B,Ve)|0,O=O+Math.imul(q,ke)|0,F=F+Math.imul(q,Ve)|0,R=R+Math.imul(H,De)|0,O=O+Math.imul(H,We)|0,O=O+Math.imul(J,De)|0,F=F+Math.imul(J,We)|0;var Vr=(_+R|0)+((O&8191)<<13)|0;_=(F+(O>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,R=Math.imul(he,Ne),O=Math.imul(he,Re),O=O+Math.imul(Se,Ne)|0,F=Math.imul(Se,Re),R=R+Math.imul(ae,qe)|0,O=O+Math.imul(ae,Fe)|0,O=O+Math.imul(de,qe)|0,F=F+Math.imul(de,Fe)|0,R=R+Math.imul(ee,$e)|0,O=O+Math.imul(ee,Be)|0,O=O+Math.imul(ie,$e)|0,F=F+Math.imul(ie,Be)|0,R=R+Math.imul(we,Le)|0,O=O+Math.imul(we,ze)|0,O=O+Math.imul(Te,Le)|0,F=F+Math.imul(Te,ze)|0,R=R+Math.imul(xe,Pe)|0,O=O+Math.imul(xe,Oe)|0,O=O+Math.imul(le,Pe)|0,F=F+Math.imul(le,Oe)|0,R=R+Math.imul(ue,je)|0,O=O+Math.imul(ue,Ue)|0,O=O+Math.imul(me,je)|0,F=F+Math.imul(me,Ue)|0,R=R+Math.imul(X,ke)|0,O=O+Math.imul(X,Ve)|0,O=O+Math.imul(Q,ke)|0,F=F+Math.imul(Q,Ve)|0,R=R+Math.imul(B,De)|0,O=O+Math.imul(B,We)|0,O=O+Math.imul(q,De)|0,F=F+Math.imul(q,We)|0,R=R+Math.imul(H,Ge)|0,O=O+Math.imul(H,He)|0,O=O+Math.imul(J,Ge)|0,F=F+Math.imul(J,He)|0;var Wr=(_+R|0)+((O&8191)<<13)|0;_=(F+(O>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,R=Math.imul(_e,Ne),O=Math.imul(_e,Re),O=O+Math.imul(Ie,Ne)|0,F=Math.imul(Ie,Re),R=R+Math.imul(he,qe)|0,O=O+Math.imul(he,Fe)|0,O=O+Math.imul(Se,qe)|0,F=F+Math.imul(Se,Fe)|0,R=R+Math.imul(ae,$e)|0,O=O+Math.imul(ae,Be)|0,O=O+Math.imul(de,$e)|0,F=F+Math.imul(de,Be)|0,R=R+Math.imul(ee,Le)|0,O=O+Math.imul(ee,ze)|0,O=O+Math.imul(ie,Le)|0,F=F+Math.imul(ie,ze)|0,R=R+Math.imul(we,Pe)|0,O=O+Math.imul(we,Oe)|0,O=O+Math.imul(Te,Pe)|0,F=F+Math.imul(Te,Oe)|0,R=R+Math.imul(xe,je)|0,O=O+Math.imul(xe,Ue)|0,O=O+Math.imul(le,je)|0,F=F+Math.imul(le,Ue)|0,R=R+Math.imul(ue,ke)|0,O=O+Math.imul(ue,Ve)|0,O=O+Math.imul(me,ke)|0,F=F+Math.imul(me,Ve)|0,R=R+Math.imul(X,De)|0,O=O+Math.imul(X,We)|0,O=O+Math.imul(Q,De)|0,F=F+Math.imul(Q,We)|0,R=R+Math.imul(B,Ge)|0,O=O+Math.imul(B,He)|0,O=O+Math.imul(q,Ge)|0,F=F+Math.imul(q,He)|0,R=R+Math.imul(H,Ot)|0,O=O+Math.imul(H,Rt)|0,O=O+Math.imul(J,Ot)|0,F=F+Math.imul(J,Rt)|0;var Gr=(_+R|0)+((O&8191)<<13)|0;_=(F+(O>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,R=Math.imul(_e,qe),O=Math.imul(_e,Fe),O=O+Math.imul(Ie,qe)|0,F=Math.imul(Ie,Fe),R=R+Math.imul(he,$e)|0,O=O+Math.imul(he,Be)|0,O=O+Math.imul(Se,$e)|0,F=F+Math.imul(Se,Be)|0,R=R+Math.imul(ae,Le)|0,O=O+Math.imul(ae,ze)|0,O=O+Math.imul(de,Le)|0,F=F+Math.imul(de,ze)|0,R=R+Math.imul(ee,Pe)|0,O=O+Math.imul(ee,Oe)|0,O=O+Math.imul(ie,Pe)|0,F=F+Math.imul(ie,Oe)|0,R=R+Math.imul(we,je)|0,O=O+Math.imul(we,Ue)|0,O=O+Math.imul(Te,je)|0,F=F+Math.imul(Te,Ue)|0,R=R+Math.imul(xe,ke)|0,O=O+Math.imul(xe,Ve)|0,O=O+Math.imul(le,ke)|0,F=F+Math.imul(le,Ve)|0,R=R+Math.imul(ue,De)|0,O=O+Math.imul(ue,We)|0,O=O+Math.imul(me,De)|0,F=F+Math.imul(me,We)|0,R=R+Math.imul(X,Ge)|0,O=O+Math.imul(X,He)|0,O=O+Math.imul(Q,Ge)|0,F=F+Math.imul(Q,He)|0,R=R+Math.imul(B,Ot)|0,O=O+Math.imul(B,Rt)|0,O=O+Math.imul(q,Ot)|0,F=F+Math.imul(q,Rt)|0;var Hr=(_+R|0)+((O&8191)<<13)|0;_=(F+(O>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,R=Math.imul(_e,$e),O=Math.imul(_e,Be),O=O+Math.imul(Ie,$e)|0,F=Math.imul(Ie,Be),R=R+Math.imul(he,Le)|0,O=O+Math.imul(he,ze)|0,O=O+Math.imul(Se,Le)|0,F=F+Math.imul(Se,ze)|0,R=R+Math.imul(ae,Pe)|0,O=O+Math.imul(ae,Oe)|0,O=O+Math.imul(de,Pe)|0,F=F+Math.imul(de,Oe)|0,R=R+Math.imul(ee,je)|0,O=O+Math.imul(ee,Ue)|0,O=O+Math.imul(ie,je)|0,F=F+Math.imul(ie,Ue)|0,R=R+Math.imul(we,ke)|0,O=O+Math.imul(we,Ve)|0,O=O+Math.imul(Te,ke)|0,F=F+Math.imul(Te,Ve)|0,R=R+Math.imul(xe,De)|0,O=O+Math.imul(xe,We)|0,O=O+Math.imul(le,De)|0,F=F+Math.imul(le,We)|0,R=R+Math.imul(ue,Ge)|0,O=O+Math.imul(ue,He)|0,O=O+Math.imul(me,Ge)|0,F=F+Math.imul(me,He)|0,R=R+Math.imul(X,Ot)|0,O=O+Math.imul(X,Rt)|0,O=O+Math.imul(Q,Ot)|0,F=F+Math.imul(Q,Rt)|0;var Kr=(_+R|0)+((O&8191)<<13)|0;_=(F+(O>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,R=Math.imul(_e,Le),O=Math.imul(_e,ze),O=O+Math.imul(Ie,Le)|0,F=Math.imul(Ie,ze),R=R+Math.imul(he,Pe)|0,O=O+Math.imul(he,Oe)|0,O=O+Math.imul(Se,Pe)|0,F=F+Math.imul(Se,Oe)|0,R=R+Math.imul(ae,je)|0,O=O+Math.imul(ae,Ue)|0,O=O+Math.imul(de,je)|0,F=F+Math.imul(de,Ue)|0,R=R+Math.imul(ee,ke)|0,O=O+Math.imul(ee,Ve)|0,O=O+Math.imul(ie,ke)|0,F=F+Math.imul(ie,Ve)|0,R=R+Math.imul(we,De)|0,O=O+Math.imul(we,We)|0,O=O+Math.imul(Te,De)|0,F=F+Math.imul(Te,We)|0,R=R+Math.imul(xe,Ge)|0,O=O+Math.imul(xe,He)|0,O=O+Math.imul(le,Ge)|0,F=F+Math.imul(le,He)|0,R=R+Math.imul(ue,Ot)|0,O=O+Math.imul(ue,Rt)|0,O=O+Math.imul(me,Ot)|0,F=F+Math.imul(me,Rt)|0;var Zr=(_+R|0)+((O&8191)<<13)|0;_=(F+(O>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,R=Math.imul(_e,Pe),O=Math.imul(_e,Oe),O=O+Math.imul(Ie,Pe)|0,F=Math.imul(Ie,Oe),R=R+Math.imul(he,je)|0,O=O+Math.imul(he,Ue)|0,O=O+Math.imul(Se,je)|0,F=F+Math.imul(Se,Ue)|0,R=R+Math.imul(ae,ke)|0,O=O+Math.imul(ae,Ve)|0,O=O+Math.imul(de,ke)|0,F=F+Math.imul(de,Ve)|0,R=R+Math.imul(ee,De)|0,O=O+Math.imul(ee,We)|0,O=O+Math.imul(ie,De)|0,F=F+Math.imul(ie,We)|0,R=R+Math.imul(we,Ge)|0,O=O+Math.imul(we,He)|0,O=O+Math.imul(Te,Ge)|0,F=F+Math.imul(Te,He)|0,R=R+Math.imul(xe,Ot)|0,O=O+Math.imul(xe,Rt)|0,O=O+Math.imul(le,Ot)|0,F=F+Math.imul(le,Rt)|0;var Jr=(_+R|0)+((O&8191)<<13)|0;_=(F+(O>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,R=Math.imul(_e,je),O=Math.imul(_e,Ue),O=O+Math.imul(Ie,je)|0,F=Math.imul(Ie,Ue),R=R+Math.imul(he,ke)|0,O=O+Math.imul(he,Ve)|0,O=O+Math.imul(Se,ke)|0,F=F+Math.imul(Se,Ve)|0,R=R+Math.imul(ae,De)|0,O=O+Math.imul(ae,We)|0,O=O+Math.imul(de,De)|0,F=F+Math.imul(de,We)|0,R=R+Math.imul(ee,Ge)|0,O=O+Math.imul(ee,He)|0,O=O+Math.imul(ie,Ge)|0,F=F+Math.imul(ie,He)|0,R=R+Math.imul(we,Ot)|0,O=O+Math.imul(we,Rt)|0,O=O+Math.imul(Te,Ot)|0,F=F+Math.imul(Te,Rt)|0;var Xt=(_+R|0)+((O&8191)<<13)|0;_=(F+(O>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,R=Math.imul(_e,ke),O=Math.imul(_e,Ve),O=O+Math.imul(Ie,ke)|0,F=Math.imul(Ie,Ve),R=R+Math.imul(he,De)|0,O=O+Math.imul(he,We)|0,O=O+Math.imul(Se,De)|0,F=F+Math.imul(Se,We)|0,R=R+Math.imul(ae,Ge)|0,O=O+Math.imul(ae,He)|0,O=O+Math.imul(de,Ge)|0,F=F+Math.imul(de,He)|0,R=R+Math.imul(ee,Ot)|0,O=O+Math.imul(ee,Rt)|0,O=O+Math.imul(ie,Ot)|0,F=F+Math.imul(ie,Rt)|0;var Tr=(_+R|0)+((O&8191)<<13)|0;_=(F+(O>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,R=Math.imul(_e,De),O=Math.imul(_e,We),O=O+Math.imul(Ie,De)|0,F=Math.imul(Ie,We),R=R+Math.imul(he,Ge)|0,O=O+Math.imul(he,He)|0,O=O+Math.imul(Se,Ge)|0,F=F+Math.imul(Se,He)|0,R=R+Math.imul(ae,Ot)|0,O=O+Math.imul(ae,Rt)|0,O=O+Math.imul(de,Ot)|0,F=F+Math.imul(de,Rt)|0;var yd=(_+R|0)+((O&8191)<<13)|0;_=(F+(O>>>13)|0)+(yd>>>26)|0,yd&=67108863,R=Math.imul(_e,Ge),O=Math.imul(_e,He),O=O+Math.imul(Ie,Ge)|0,F=Math.imul(Ie,He),R=R+Math.imul(he,Ot)|0,O=O+Math.imul(he,Rt)|0,O=O+Math.imul(Se,Ot)|0,F=F+Math.imul(Se,Rt)|0;var bd=(_+R|0)+((O&8191)<<13)|0;_=(F+(O>>>13)|0)+(bd>>>26)|0,bd&=67108863,R=Math.imul(_e,Ot),O=Math.imul(_e,Rt),O=O+Math.imul(Ie,Ot)|0,F=Math.imul(Ie,Rt);var hv=(_+R|0)+((O&8191)<<13)|0;return _=(F+(O>>>13)|0)+(hv>>>26)|0,hv&=67108863,c[0]=Lr,c[1]=Pr,c[2]=qr,c[3]=$r,c[4]=zr,c[5]=jr,c[6]=Ur,c[7]=Vr,c[8]=Wr,c[9]=Gr,c[10]=Hr,c[11]=Kr,c[12]=Zr,c[13]=Jr,c[14]=Xt,c[15]=Tr,c[16]=yd,c[17]=bd,c[18]=hv,_!==0&&(c[19]=_,E.length++),E};Math.imul||(N=I);function D(g,m,b){b.negative=m.negative^g.negative,b.length=g.length+m.length;for(var E=0,k=0,w=0;w<b.length-1;w++){var c=k;k=0;for(var _=E&67108863,R=Math.min(w,m.length-1),O=Math.max(0,w-g.length+1);O<=R;O++){var F=w-O,U=g.words[F]|0,H=m.words[O]|0,J=U*H,fe=J&67108863;c=c+(J/67108864|0)|0,fe=fe+_|0,_=fe&67108863,c=c+(fe>>>26)|0,k+=c>>>26,c&=67108863}b.words[w]=_,E=c,c=k}return E!==0?b.words[w]=E:b.length--,b._strip()}function C(g,m,b){return D(g,m,b)}a.prototype.mulTo=function(m,b){var E,k=this.length+m.length;return this.length===10&&m.length===10?E=N(this,m,b):k<63?E=I(this,m,b):k<1024?E=D(this,m,b):E=C(this,m,b),E};function L(g,m){this.x=g,this.y=m}L.prototype.makeRBT=function(m){for(var b=new Array(m),E=a.prototype._countBits(m)-1,k=0;k<m;k++)b[k]=this.revBin(k,E,m);return b},L.prototype.revBin=function(m,b,E){if(m===0||m===E-1)return m;for(var k=0,w=0;w<b;w++)k|=(m&1)<<b-w-1,m>>=1;return k},L.prototype.permute=function(m,b,E,k,w,c){for(var _=0;_<c;_++)k[_]=b[m[_]],w[_]=E[m[_]]},L.prototype.transform=function(m,b,E,k,w,c){this.permute(c,m,b,E,k,w);for(var _=1;_<w;_<<=1)for(var R=_<<1,O=Math.cos(2*Math.PI/R),F=Math.sin(2*Math.PI/R),U=0;U<w;U+=R)for(var H=O,J=F,fe=0;fe<_;fe++){var B=E[U+fe],q=k[U+fe],Y=E[U+fe+_],X=k[U+fe+_],Q=H*Y-J*X;X=H*X+J*Y,Y=Q,E[U+fe]=B+Y,k[U+fe]=q+X,E[U+fe+_]=B-Y,k[U+fe+_]=q-X,fe!==R&&(Q=O*H-F*J,J=O*J+F*H,H=Q)}},L.prototype.guessLen13b=function(m,b){var E=Math.max(b,m)|1,k=E&1,w=0;for(E=E/2|0;E;E=E>>>1)w++;return 1<<w+1+k},L.prototype.conjugate=function(m,b,E){if(!(E<=1))for(var k=0;k<E/2;k++){var w=m[k];m[k]=m[E-k-1],m[E-k-1]=w,w=b[k],b[k]=-b[E-k-1],b[E-k-1]=-w}},L.prototype.normalize13b=function(m,b){for(var E=0,k=0;k<b/2;k++){var w=Math.round(m[2*k+1]/b)*8192+Math.round(m[2*k]/b)+E;m[k]=w&67108863,w<67108864?E=0:E=w/67108864|0}return m},L.prototype.convert13b=function(m,b,E,k){for(var w=0,c=0;c<b;c++)w=w+(m[c]|0),E[2*c]=w&8191,w=w>>>13,E[2*c+1]=w&8191,w=w>>>13;for(c=2*b;c<k;++c)E[c]=0;r(w===0),r((w&-8192)===0)},L.prototype.stub=function(m){for(var b=new Array(m),E=0;E<m;E++)b[E]=0;return b},L.prototype.mulp=function(m,b,E){var k=2*this.guessLen13b(m.length,b.length),w=this.makeRBT(k),c=this.stub(k),_=new Array(k),R=new Array(k),O=new Array(k),F=new Array(k),U=new Array(k),H=new Array(k),J=E.words;J.length=k,this.convert13b(m.words,m.length,_,k),this.convert13b(b.words,b.length,F,k),this.transform(_,c,R,O,k,w),this.transform(F,c,U,H,k,w);for(var fe=0;fe<k;fe++){var B=R[fe]*U[fe]-O[fe]*H[fe];O[fe]=R[fe]*H[fe]+O[fe]*U[fe],R[fe]=B}return this.conjugate(R,O,k),this.transform(R,O,J,c,k,w),this.conjugate(J,c,k),this.normalize13b(J,k),E.negative=m.negative^b.negative,E.length=m.length+b.length,E._strip()},a.prototype.mul=function(m){var b=new a(null);return b.words=new Array(this.length+m.length),this.mulTo(m,b)},a.prototype.mulf=function(m){var b=new a(null);return b.words=new Array(this.length+m.length),C(this,m,b)},a.prototype.imul=function(m){return this.clone().mulTo(m,this)},a.prototype.imuln=function(m){var b=m<0;b&&(m=-m),r(typeof m=="number"),r(m<67108864);for(var E=0,k=0;k<this.length;k++){var w=(this.words[k]|0)*m,c=(w&67108863)+(E&67108863);E>>=26,E+=w/67108864|0,E+=c>>>26,this.words[k]=c&67108863}return E!==0&&(this.words[k]=E,this.length++),b?this.ineg():this},a.prototype.muln=function(m){return this.clone().imuln(m)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(m){var b=T(m);if(b.length===0)return new a(1);for(var E=this,k=0;k<b.length&&b[k]===0;k++,E=E.sqr());if(++k<b.length)for(var w=E.sqr();k<b.length;k++,w=w.sqr())b[k]!==0&&(E=E.mul(w));return E},a.prototype.iushln=function(m){r(typeof m=="number"&&m>=0);var b=m%26,E=(m-b)/26,k=67108863>>>26-b<<26-b,w;if(b!==0){var c=0;for(w=0;w<this.length;w++){var _=this.words[w]&k,R=(this.words[w]|0)-_<<b;this.words[w]=R|c,c=_>>>26-b}c&&(this.words[w]=c,this.length++)}if(E!==0){for(w=this.length-1;w>=0;w--)this.words[w+E]=this.words[w];for(w=0;w<E;w++)this.words[w]=0;this.length+=E}return this._strip()},a.prototype.ishln=function(m){return r(this.negative===0),this.iushln(m)},a.prototype.iushrn=function(m,b,E){r(typeof m=="number"&&m>=0);var k;b?k=(b-b%26)/26:k=0;var w=m%26,c=Math.min((m-w)/26,this.length),_=67108863^67108863>>>w<<w,R=E;if(k-=c,k=Math.max(0,k),R){for(var O=0;O<c;O++)R.words[O]=this.words[O];R.length=c}if(c!==0)if(this.length>c)for(this.length-=c,O=0;O<this.length;O++)this.words[O]=this.words[O+c];else this.words[0]=0,this.length=1;var F=0;for(O=this.length-1;O>=0&&(F!==0||O>=k);O--){var U=this.words[O]|0;this.words[O]=F<<26-w|U>>>w,F=U&_}return R&&F!==0&&(R.words[R.length++]=F),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(m,b,E){return r(this.negative===0),this.iushrn(m,b,E)},a.prototype.shln=function(m){return this.clone().ishln(m)},a.prototype.ushln=function(m){return this.clone().iushln(m)},a.prototype.shrn=function(m){return this.clone().ishrn(m)},a.prototype.ushrn=function(m){return this.clone().iushrn(m)},a.prototype.testn=function(m){r(typeof m=="number"&&m>=0);var b=m%26,E=(m-b)/26,k=1<<b;if(this.length<=E)return!1;var w=this.words[E];return!!(w&k)},a.prototype.imaskn=function(m){r(typeof m=="number"&&m>=0);var b=m%26,E=(m-b)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=E)return this;if(b!==0&&E++,this.length=Math.min(E,this.length),b!==0){var k=67108863^67108863>>>b<<b;this.words[this.length-1]&=k}return this._strip()},a.prototype.maskn=function(m){return this.clone().imaskn(m)},a.prototype.iaddn=function(m){return r(typeof m=="number"),r(m<67108864),m<0?this.isubn(-m):this.negative!==0?this.length===1&&(this.words[0]|0)<=m?(this.words[0]=m-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(m),this.negative=1,this):this._iaddn(m)},a.prototype._iaddn=function(m){this.words[0]+=m;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},a.prototype.isubn=function(m){if(r(typeof m=="number"),r(m<67108864),m<0)return this.iaddn(-m);if(this.negative!==0)return this.negative=0,this.iaddn(m),this.negative=1,this;if(this.words[0]-=m,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this._strip()},a.prototype.addn=function(m){return this.clone().iaddn(m)},a.prototype.subn=function(m){return this.clone().isubn(m)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(m,b,E){var k=m.length+E,w;this._expand(k);var c,_=0;for(w=0;w<m.length;w++){c=(this.words[w+E]|0)+_;var R=(m.words[w]|0)*b;c-=R&67108863,_=(c>>26)-(R/67108864|0),this.words[w+E]=c&67108863}for(;w<this.length-E;w++)c=(this.words[w+E]|0)+_,_=c>>26,this.words[w+E]=c&67108863;if(_===0)return this._strip();for(r(_===-1),_=0,w=0;w<this.length;w++)c=-(this.words[w]|0)+_,_=c>>26,this.words[w]=c&67108863;return this.negative=1,this._strip()},a.prototype._wordDiv=function(m,b){var E=this.length-m.length,k=this.clone(),w=m,c=w.words[w.length-1]|0,_=this._countBits(c);E=26-_,E!==0&&(w=w.ushln(E),k.iushln(E),c=w.words[w.length-1]|0);var R=k.length-w.length,O;if(b!=="mod"){O=new a(null),O.length=R+1,O.words=new Array(O.length);for(var F=0;F<O.length;F++)O.words[F]=0}var U=k.clone()._ishlnsubmul(w,1,R);U.negative===0&&(k=U,O&&(O.words[R]=1));for(var H=R-1;H>=0;H--){var J=(k.words[w.length+H]|0)*67108864+(k.words[w.length+H-1]|0);for(J=Math.min(J/c|0,67108863),k._ishlnsubmul(w,J,H);k.negative!==0;)J--,k.negative=0,k._ishlnsubmul(w,1,H),k.isZero()||(k.negative^=1);O&&(O.words[H]=J)}return O&&O._strip(),k._strip(),b!=="div"&&E!==0&&k.iushrn(E),{div:O||null,mod:k}},a.prototype.divmod=function(m,b,E){if(r(!m.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var k,w,c;return this.negative!==0&&m.negative===0?(c=this.neg().divmod(m,b),b!=="mod"&&(k=c.div.neg()),b!=="div"&&(w=c.mod.neg(),E&&w.negative!==0&&w.iadd(m)),{div:k,mod:w}):this.negative===0&&m.negative!==0?(c=this.divmod(m.neg(),b),b!=="mod"&&(k=c.div.neg()),{div:k,mod:c.mod}):(this.negative&m.negative)!==0?(c=this.neg().divmod(m.neg(),b),b!=="div"&&(w=c.mod.neg(),E&&w.negative!==0&&w.isub(m)),{div:c.div,mod:w}):m.length>this.length||this.cmp(m)<0?{div:new a(0),mod:this}:m.length===1?b==="div"?{div:this.divn(m.words[0]),mod:null}:b==="mod"?{div:null,mod:new a(this.modrn(m.words[0]))}:{div:this.divn(m.words[0]),mod:new a(this.modrn(m.words[0]))}:this._wordDiv(m,b)},a.prototype.div=function(m){return this.divmod(m,"div",!1).div},a.prototype.mod=function(m){return this.divmod(m,"mod",!1).mod},a.prototype.umod=function(m){return this.divmod(m,"mod",!0).mod},a.prototype.divRound=function(m){var b=this.divmod(m);if(b.mod.isZero())return b.div;var E=b.div.negative!==0?b.mod.isub(m):b.mod,k=m.ushrn(1),w=m.andln(1),c=E.cmp(k);return c<0||w===1&&c===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},a.prototype.modrn=function(m){var b=m<0;b&&(m=-m),r(m<=67108863);for(var E=(1<<26)%m,k=0,w=this.length-1;w>=0;w--)k=(E*k+(this.words[w]|0))%m;return b?-k:k},a.prototype.modn=function(m){return this.modrn(m)},a.prototype.idivn=function(m){var b=m<0;b&&(m=-m),r(m<=67108863);for(var E=0,k=this.length-1;k>=0;k--){var w=(this.words[k]|0)+E*67108864;this.words[k]=w/m|0,E=w%m}return this._strip(),b?this.ineg():this},a.prototype.divn=function(m){return this.clone().idivn(m)},a.prototype.egcd=function(m){r(m.negative===0),r(!m.isZero());var b=this,E=m.clone();b.negative!==0?b=b.umod(m):b=b.clone();for(var k=new a(1),w=new a(0),c=new a(0),_=new a(1),R=0;b.isEven()&&E.isEven();)b.iushrn(1),E.iushrn(1),++R;for(var O=E.clone(),F=b.clone();!b.isZero();){for(var U=0,H=1;(b.words[0]&H)===0&&U<26;++U,H<<=1);if(U>0)for(b.iushrn(U);U-- >0;)(k.isOdd()||w.isOdd())&&(k.iadd(O),w.isub(F)),k.iushrn(1),w.iushrn(1);for(var J=0,fe=1;(E.words[0]&fe)===0&&J<26;++J,fe<<=1);if(J>0)for(E.iushrn(J);J-- >0;)(c.isOdd()||_.isOdd())&&(c.iadd(O),_.isub(F)),c.iushrn(1),_.iushrn(1);b.cmp(E)>=0?(b.isub(E),k.isub(c),w.isub(_)):(E.isub(b),c.isub(k),_.isub(w))}return{a:c,b:_,gcd:E.iushln(R)}},a.prototype._invmp=function(m){r(m.negative===0),r(!m.isZero());var b=this,E=m.clone();b.negative!==0?b=b.umod(m):b=b.clone();for(var k=new a(1),w=new a(0),c=E.clone();b.cmpn(1)>0&&E.cmpn(1)>0;){for(var _=0,R=1;(b.words[0]&R)===0&&_<26;++_,R<<=1);if(_>0)for(b.iushrn(_);_-- >0;)k.isOdd()&&k.iadd(c),k.iushrn(1);for(var O=0,F=1;(E.words[0]&F)===0&&O<26;++O,F<<=1);if(O>0)for(E.iushrn(O);O-- >0;)w.isOdd()&&w.iadd(c),w.iushrn(1);b.cmp(E)>=0?(b.isub(E),k.isub(w)):(E.isub(b),w.isub(k))}var U;return b.cmpn(1)===0?U=k:U=w,U.cmpn(0)<0&&U.iadd(m),U},a.prototype.gcd=function(m){if(this.isZero())return m.abs();if(m.isZero())return this.abs();var b=this.clone(),E=m.clone();b.negative=0,E.negative=0;for(var k=0;b.isEven()&&E.isEven();k++)b.iushrn(1),E.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;E.isEven();)E.iushrn(1);var w=b.cmp(E);if(w<0){var c=b;b=E,E=c}else if(w===0||E.cmpn(1)===0)break;b.isub(E)}while(!0);return E.iushln(k)},a.prototype.invm=function(m){return this.egcd(m).a.umod(m)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(m){return this.words[0]&m},a.prototype.bincn=function(m){r(typeof m=="number");var b=m%26,E=(m-b)/26,k=1<<b;if(this.length<=E)return this._expand(E+1),this.words[E]|=k,this;for(var w=k,c=E;w!==0&&c<this.length;c++){var _=this.words[c]|0;_+=w,w=_>>>26,_&=67108863,this.words[c]=_}return w!==0&&(this.words[c]=w,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(m){var b=m<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this._strip();var E;if(this.length>1)E=1;else{b&&(m=-m),r(m<=67108863,"Number is too big");var k=this.words[0]|0;E=k===m?0:k<m?-1:1}return this.negative!==0?-E|0:E},a.prototype.cmp=function(m){if(this.negative!==0&&m.negative===0)return-1;if(this.negative===0&&m.negative!==0)return 1;var b=this.ucmp(m);return this.negative!==0?-b|0:b},a.prototype.ucmp=function(m){if(this.length>m.length)return 1;if(this.length<m.length)return-1;for(var b=0,E=this.length-1;E>=0;E--){var k=this.words[E]|0,w=m.words[E]|0;if(k!==w){k<w?b=-1:k>w&&(b=1);break}}return b},a.prototype.gtn=function(m){return this.cmpn(m)===1},a.prototype.gt=function(m){return this.cmp(m)===1},a.prototype.gten=function(m){return this.cmpn(m)>=0},a.prototype.gte=function(m){return this.cmp(m)>=0},a.prototype.ltn=function(m){return this.cmpn(m)===-1},a.prototype.lt=function(m){return this.cmp(m)===-1},a.prototype.lten=function(m){return this.cmpn(m)<=0},a.prototype.lte=function(m){return this.cmp(m)<=0},a.prototype.eqn=function(m){return this.cmpn(m)===0},a.prototype.eq=function(m){return this.cmp(m)===0},a.red=function(m){return new f(m)},a.prototype.toRed=function(m){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),m.convertTo(this)._forceRed(m)},a.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(m){return this.red=m,this},a.prototype.forceRed=function(m){return r(!this.red,"Already a number in reduction context"),this._forceRed(m)},a.prototype.redAdd=function(m){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,m)},a.prototype.redIAdd=function(m){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,m)},a.prototype.redSub=function(m){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,m)},a.prototype.redISub=function(m){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,m)},a.prototype.redShl=function(m){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,m)},a.prototype.redMul=function(m){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,m),this.red.mul(this,m)},a.prototype.redIMul=function(m){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,m),this.red.imul(this,m)},a.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(m){return r(this.red&&!m.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,m)};var z={k256:null,p224:null,p192:null,p25519:null};function $(g,m){this.name=g,this.p=new a(m,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}$.prototype._tmp=function(){var m=new a(null);return m.words=new Array(Math.ceil(this.n/13)),m},$.prototype.ireduce=function(m){var b=m,E;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),E=b.bitLength();while(E>this.n);var k=E<this.n?-1:b.ucmp(this.p);return k===0?(b.words[0]=0,b.length=1):k>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},$.prototype.split=function(m,b){m.iushrn(this.n,0,b)},$.prototype.imulK=function(m){return m.imul(this.k)};function G(){$.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(G,$),G.prototype.split=function(m,b){for(var E=4194303,k=Math.min(m.length,9),w=0;w<k;w++)b.words[w]=m.words[w];if(b.length=k,m.length<=9){m.words[0]=0,m.length=1;return}var c=m.words[9];for(b.words[b.length++]=c&E,w=10;w<m.length;w++){var _=m.words[w]|0;m.words[w-10]=(_&E)<<4|c>>>22,c=_}c>>>=22,m.words[w-10]=c,c===0&&m.length>10?m.length-=10:m.length-=9},G.prototype.imulK=function(m){m.words[m.length]=0,m.words[m.length+1]=0,m.length+=2;for(var b=0,E=0;E<m.length;E++){var k=m.words[E]|0;b+=k*977,m.words[E]=b&67108863,b=k*64+(b/67108864|0)}return m.words[m.length-1]===0&&(m.length--,m.words[m.length-1]===0&&m.length--),m};function j(){$.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(j,$);function K(){$.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(K,$);function M(){$.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(M,$),M.prototype.imulK=function(m){for(var b=0,E=0;E<m.length;E++){var k=(m.words[E]|0)*19+b,w=k&67108863;k>>>=26,m.words[E]=w,b=k}return b!==0&&(m.words[m.length++]=b),m},a._prime=function(m){if(z[m])return z[m];var b;if(m==="k256")b=new G;else if(m==="p224")b=new j;else if(m==="p192")b=new K;else if(m==="p25519")b=new M;else throw new Error("Unknown prime "+m);return z[m]=b,b};function f(g){if(typeof g=="string"){var m=a._prime(g);this.m=m.p,this.prime=m}else r(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}f.prototype._verify1=function(m){r(m.negative===0,"red works only with positives"),r(m.red,"red works only with red numbers")},f.prototype._verify2=function(m,b){r((m.negative|b.negative)===0,"red works only with positives"),r(m.red&&m.red===b.red,"red works only with red numbers")},f.prototype.imod=function(m){return this.prime?this.prime.ireduce(m)._forceRed(this):(h(m,m.umod(this.m)._forceRed(this)),m)},f.prototype.neg=function(m){return m.isZero()?m.clone():this.m.sub(m)._forceRed(this)},f.prototype.add=function(m,b){this._verify2(m,b);var E=m.add(b);return E.cmp(this.m)>=0&&E.isub(this.m),E._forceRed(this)},f.prototype.iadd=function(m,b){this._verify2(m,b);var E=m.iadd(b);return E.cmp(this.m)>=0&&E.isub(this.m),E},f.prototype.sub=function(m,b){this._verify2(m,b);var E=m.sub(b);return E.cmpn(0)<0&&E.iadd(this.m),E._forceRed(this)},f.prototype.isub=function(m,b){this._verify2(m,b);var E=m.isub(b);return E.cmpn(0)<0&&E.iadd(this.m),E},f.prototype.shl=function(m,b){return this._verify1(m),this.imod(m.ushln(b))},f.prototype.imul=function(m,b){return this._verify2(m,b),this.imod(m.imul(b))},f.prototype.mul=function(m,b){return this._verify2(m,b),this.imod(m.mul(b))},f.prototype.isqr=function(m){return this.imul(m,m.clone())},f.prototype.sqr=function(m){return this.mul(m,m)},f.prototype.sqrt=function(m){if(m.isZero())return m.clone();var b=this.m.andln(3);if(r(b%2===1),b===3){var E=this.m.add(new a(1)).iushrn(2);return this.pow(m,E)}for(var k=this.m.subn(1),w=0;!k.isZero()&&k.andln(1)===0;)w++,k.iushrn(1);r(!k.isZero());var c=new a(1).toRed(this),_=c.redNeg(),R=this.m.subn(1).iushrn(1),O=this.m.bitLength();for(O=new a(2*O*O).toRed(this);this.pow(O,R).cmp(_)!==0;)O.redIAdd(_);for(var F=this.pow(O,k),U=this.pow(m,k.addn(1).iushrn(1)),H=this.pow(m,k),J=w;H.cmp(c)!==0;){for(var fe=H,B=0;fe.cmp(c)!==0;B++)fe=fe.redSqr();r(B<J);var q=this.pow(F,new a(1).iushln(J-B-1));U=U.redMul(q),F=q.redSqr(),H=H.redMul(F),J=B}return U},f.prototype.invm=function(m){var b=m._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},f.prototype.pow=function(m,b){if(b.isZero())return new a(1).toRed(this);if(b.cmpn(1)===0)return m.clone();var E=4,k=new Array(1<<E);k[0]=new a(1).toRed(this),k[1]=m;for(var w=2;w<k.length;w++)k[w]=this.mul(k[w-1],m);var c=k[0],_=0,R=0,O=b.bitLength()%26;for(O===0&&(O=26),w=b.length-1;w>=0;w--){for(var F=b.words[w],U=O-1;U>=0;U--){var H=F>>U&1;if(c!==k[0]&&(c=this.sqr(c)),H===0&&_===0){R=0;continue}_<<=1,_|=H,R++,!(R!==E&&(w!==0||U!==0))&&(c=this.mul(c,k[_]),R=0,_=0)}O=26}return c},f.prototype.convertTo=function(m){var b=m.umod(this.m);return b===m?b.clone():b},f.prototype.convertFrom=function(m){var b=m.clone();return b.red=null,b},a.mont=function(m){return new d(m)};function d(g){f.call(this,g),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(d,f),d.prototype.convertTo=function(m){return this.imod(m.ushln(this.shift))},d.prototype.convertFrom=function(m){var b=this.imod(m.mul(this.rinv));return b.red=null,b},d.prototype.imul=function(m,b){if(m.isZero()||b.isZero())return m.words[0]=0,m.length=1,m;var E=m.imul(b),k=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=E.isub(k).iushrn(this.shift),c=w;return w.cmp(this.m)>=0?c=w.isub(this.m):w.cmpn(0)<0&&(c=w.iadd(this.m)),c._forceRed(this)},d.prototype.mul=function(m,b){if(m.isZero()||b.isZero())return new a(0)._forceRed(this);var E=m.mul(b),k=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=E.isub(k).iushrn(this.shift),c=w;return w.cmp(this.m)>=0?c=w.isub(this.m):w.cmpn(0)<0&&(c=w.iadd(this.m)),c._forceRed(this)},d.prototype.invm=function(m){var b=this.imod(m._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(typeof VT=="undefined"||VT,_P)});var E_=ne((get,EP)=>{var sp=S_(),Sye=_c();function Eye(t){var e=xP(t),r=e.toRed(sp.mont(t.modulus)).redPow(new sp(t.publicExponent)).fromRed();return{blinder:r,unblinder:e.invm(t.modulus)}}function xP(t){var e=t.modulus.byteLength(),r;do r=new sp(Sye(e));while(r.cmp(t.modulus)>=0||!r.umod(t.prime1)||!r.umod(t.prime2));return r}function SP(t,e){var r=Eye(e),n=e.modulus.byteLength(),a=new sp(t).mul(r.blinder).umod(e.modulus),s=a.toRed(sp.mont(e.prime1)),o=a.toRed(sp.mont(e.prime2)),u=e.coefficient,l=e.prime1,h=e.prime2,p=s.redPow(e.exponent1).fromRed(),v=o.redPow(e.exponent2).fromRed(),y=p.isub(v).imul(u).umod(l).imul(h);return v.iadd(y).imul(r.unblinder).umod(e.modulus).toArrayLike(Buffer,"be",n)}SP.getr=xP;EP.exports=SP});var MP=ne((yet,Mye)=>{Mye.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}});var wu=ne((AP,WT)=>{(function(t,e){"use strict";function r(M,f){if(!M)throw new Error(f||"Assertion failed")}function n(M,f){M.super_=f;var d=function(){};d.prototype=f.prototype,M.prototype=new d,M.prototype.constructor=M}function a(M,f,d){if(a.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((f==="le"||f==="be")&&(d=f,f=10),this._init(M||0,f||10,d||"be"))}typeof t=="object"?t.exports=a:e.BN=a,a.BN=a,a.wordSize=26;var s;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?s=window.Buffer:s=mn().Buffer}catch{}a.isBN=function(f){return f instanceof a?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===a.wordSize&&Array.isArray(f.words)},a.max=function(f,d){return f.cmp(d)>0?f:d},a.min=function(f,d){return f.cmp(d)<0?f:d},a.prototype._init=function(f,d,g){if(typeof f=="number")return this._initNumber(f,d,g);if(typeof f=="object")return this._initArray(f,d,g);d==="hex"&&(d=16),r(d===(d|0)&&d>=2&&d<=36),f=f.toString().replace(/\s+/g,"");var m=0;f[0]==="-"&&(m++,this.negative=1),m<f.length&&(d===16?this._parseHex(f,m,g):(this._parseBase(f,d,m),g==="le"&&this._initArray(this.toArray(),d,g)))},a.prototype._initNumber=function(f,d,g){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(r(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),d,g)},a.prototype._initArray=function(f,d,g){if(r(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var b,E,k=0;if(g==="be")for(m=f.length-1,b=0;m>=0;m-=3)E=f[m]|f[m-1]<<8|f[m-2]<<16,this.words[b]|=E<<k&67108863,this.words[b+1]=E>>>26-k&67108863,k+=24,k>=26&&(k-=26,b++);else if(g==="le")for(m=0,b=0;m<f.length;m+=3)E=f[m]|f[m+1]<<8|f[m+2]<<16,this.words[b]|=E<<k&67108863,this.words[b+1]=E>>>26-k&67108863,k+=24,k>=26&&(k-=26,b++);return this.strip()};function o(M,f){var d=M.charCodeAt(f);return d>=65&&d<=70?d-55:d>=97&&d<=102?d-87:d-48&15}function u(M,f,d){var g=o(M,d);return d-1>=f&&(g|=o(M,d-1)<<4),g}a.prototype._parseHex=function(f,d,g){this.length=Math.ceil((f.length-d)/6),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var b=0,E=0,k;if(g==="be")for(m=f.length-1;m>=d;m-=2)k=u(f,d,m)<<b,this.words[E]|=k&67108863,b>=18?(b-=18,E+=1,this.words[E]|=k>>>26):b+=8;else{var w=f.length-d;for(m=w%2===0?d+1:d;m<f.length;m+=2)k=u(f,d,m)<<b,this.words[E]|=k&67108863,b>=18?(b-=18,E+=1,this.words[E]|=k>>>26):b+=8}this.strip()};function l(M,f,d,g){for(var m=0,b=Math.min(M.length,d),E=f;E<b;E++){var k=M.charCodeAt(E)-48;m*=g,k>=49?m+=k-49+10:k>=17?m+=k-17+10:m+=k}return m}a.prototype._parseBase=function(f,d,g){this.words=[0],this.length=1;for(var m=0,b=1;b<=67108863;b*=d)m++;m--,b=b/d|0;for(var E=f.length-g,k=E%m,w=Math.min(E,E-k)+g,c=0,_=g;_<w;_+=m)c=l(f,_,_+m,d),this.imuln(b),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(k!==0){var R=1;for(c=l(f,_,f.length,d),_=0;_<k;_++)R*=d;this.imuln(R),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},a.prototype.copy=function(f){f.words=new Array(this.length);for(var d=0;d<this.length;d++)f.words[d]=this.words[d];f.length=this.length,f.negative=this.negative,f.red=this.red},a.prototype.clone=function(){var f=new a(null);return this.copy(f),f},a.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(f,d){f=f||10,d=d|0||1;var g;if(f===16||f==="hex"){g="";for(var m=0,b=0,E=0;E<this.length;E++){var k=this.words[E],w=((k<<m|b)&16777215).toString(16);b=k>>>24-m&16777215,b!==0||E!==this.length-1?g=h[6-w.length]+w+g:g=w+g,m+=2,m>=26&&(m-=26,E--)}for(b!==0&&(g=b.toString(16)+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(f===(f|0)&&f>=2&&f<=36){var c=p[f],_=v[f];g="";var R=this.clone();for(R.negative=0;!R.isZero();){var O=R.modn(_).toString(f);R=R.idivn(_),R.isZero()?g=O+g:g=h[c-O.length]+O+g}for(this.isZero()&&(g="0"+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}r(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(f,d){return r(typeof s!="undefined"),this.toArrayLike(s,f,d)},a.prototype.toArray=function(f,d){return this.toArrayLike(Array,f,d)},a.prototype.toArrayLike=function(f,d,g){var m=this.byteLength(),b=g||Math.max(1,m);r(m<=b,"byte array longer than desired length"),r(b>0,"Requested array length <= 0"),this.strip();var E=d==="le",k=new f(b),w,c,_=this.clone();if(E){for(c=0;!_.isZero();c++)w=_.andln(255),_.iushrn(8),k[c]=w;for(;c<b;c++)k[c]=0}else{for(c=0;c<b-m;c++)k[c]=0;for(c=0;!_.isZero();c++)w=_.andln(255),_.iushrn(8),k[b-c-1]=w}return k},Math.clz32?a.prototype._countBits=function(f){return 32-Math.clz32(f)}:a.prototype._countBits=function(f){var d=f,g=0;return d>=4096&&(g+=13,d>>>=13),d>=64&&(g+=7,d>>>=7),d>=8&&(g+=4,d>>>=4),d>=2&&(g+=2,d>>>=2),g+d},a.prototype._zeroBits=function(f){if(f===0)return 26;var d=f,g=0;return(d&8191)===0&&(g+=13,d>>>=13),(d&127)===0&&(g+=7,d>>>=7),(d&15)===0&&(g+=4,d>>>=4),(d&3)===0&&(g+=2,d>>>=2),(d&1)===0&&g++,g},a.prototype.bitLength=function(){var f=this.words[this.length-1],d=this._countBits(f);return(this.length-1)*26+d};function y(M){for(var f=new Array(M.bitLength()),d=0;d<f.length;d++){var g=d/26|0,m=d%26;f[d]=(M.words[g]&1<<m)>>>m}return f}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,d=0;d<this.length;d++){var g=this._zeroBits(this.words[d]);if(f+=g,g!==26)break}return f},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},a.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var d=0;d<f.length;d++)this.words[d]=this.words[d]|f.words[d];return this.strip()},a.prototype.ior=function(f){return r((this.negative|f.negative)===0),this.iuor(f)},a.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},a.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},a.prototype.iuand=function(f){var d;this.length>f.length?d=f:d=this;for(var g=0;g<d.length;g++)this.words[g]=this.words[g]&f.words[g];return this.length=d.length,this.strip()},a.prototype.iand=function(f){return r((this.negative|f.negative)===0),this.iuand(f)},a.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},a.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},a.prototype.iuxor=function(f){var d,g;this.length>f.length?(d=this,g=f):(d=f,g=this);for(var m=0;m<g.length;m++)this.words[m]=d.words[m]^g.words[m];if(this!==d)for(;m<d.length;m++)this.words[m]=d.words[m];return this.length=d.length,this.strip()},a.prototype.ixor=function(f){return r((this.negative|f.negative)===0),this.iuxor(f)},a.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},a.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},a.prototype.inotn=function(f){r(typeof f=="number"&&f>=0);var d=Math.ceil(f/26)|0,g=f%26;this._expand(d),g>0&&d--;for(var m=0;m<d;m++)this.words[m]=~this.words[m]&67108863;return g>0&&(this.words[m]=~this.words[m]&67108863>>26-g),this.strip()},a.prototype.notn=function(f){return this.clone().inotn(f)},a.prototype.setn=function(f,d){r(typeof f=="number"&&f>=0);var g=f/26|0,m=f%26;return this._expand(g+1),d?this.words[g]=this.words[g]|1<<m:this.words[g]=this.words[g]&~(1<<m),this.strip()},a.prototype.iadd=function(f){var d;if(this.negative!==0&&f.negative===0)return this.negative=0,d=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,d=this.isub(f),f.negative=1,d._normSign();var g,m;this.length>f.length?(g=this,m=f):(g=f,m=this);for(var b=0,E=0;E<m.length;E++)d=(g.words[E]|0)+(m.words[E]|0)+b,this.words[E]=d&67108863,b=d>>>26;for(;b!==0&&E<g.length;E++)d=(g.words[E]|0)+b,this.words[E]=d&67108863,b=d>>>26;if(this.length=g.length,b!==0)this.words[this.length]=b,this.length++;else if(g!==this)for(;E<g.length;E++)this.words[E]=g.words[E];return this},a.prototype.add=function(f){var d;return f.negative!==0&&this.negative===0?(f.negative=0,d=this.sub(f),f.negative^=1,d):f.negative===0&&this.negative!==0?(this.negative=0,d=f.sub(this),this.negative=1,d):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},a.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var d=this.iadd(f);return f.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var g=this.cmp(f);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var m,b;g>0?(m=this,b=f):(m=f,b=this);for(var E=0,k=0;k<b.length;k++)d=(m.words[k]|0)-(b.words[k]|0)+E,E=d>>26,this.words[k]=d&67108863;for(;E!==0&&k<m.length;k++)d=(m.words[k]|0)+E,E=d>>26,this.words[k]=d&67108863;if(E===0&&k<m.length&&m!==this)for(;k<m.length;k++)this.words[k]=m.words[k];return this.length=Math.max(this.length,k),m!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(f){return this.clone().isub(f)};function S(M,f,d){d.negative=f.negative^M.negative;var g=M.length+f.length|0;d.length=g,g=g-1|0;var m=M.words[0]|0,b=f.words[0]|0,E=m*b,k=E&67108863,w=E/67108864|0;d.words[0]=k;for(var c=1;c<g;c++){for(var _=w>>>26,R=w&67108863,O=Math.min(c,f.length-1),F=Math.max(0,c-M.length+1);F<=O;F++){var U=c-F|0;m=M.words[U]|0,b=f.words[F]|0,E=m*b+R,_+=E/67108864|0,R=E&67108863}d.words[c]=R|0,w=_|0}return w!==0?d.words[c]=w|0:d.length--,d.strip()}var A=function(f,d,g){var m=f.words,b=d.words,E=g.words,k=0,w,c,_,R=m[0]|0,O=R&8191,F=R>>>13,U=m[1]|0,H=U&8191,J=U>>>13,fe=m[2]|0,B=fe&8191,q=fe>>>13,Y=m[3]|0,X=Y&8191,Q=Y>>>13,be=m[4]|0,ue=be&8191,me=be>>>13,vt=m[5]|0,xe=vt&8191,le=vt>>>13,qt=m[6]|0,we=qt&8191,Te=qt>>>13,at=m[7]|0,ee=at&8191,ie=at>>>13,tt=m[8]|0,ae=tt&8191,de=tt>>>13,Ze=m[9]|0,he=Ze&8191,Se=Ze>>>13,At=b[0]|0,_e=At&8191,Ie=At>>>13,nr=b[1]|0,Ne=nr&8191,Re=nr>>>13,Qn=b[2]|0,qe=Qn&8191,Fe=Qn>>>13,$n=b[3]|0,$e=$n&8191,Be=$n>>>13,zn=b[4]|0,Le=zn&8191,ze=zn>>>13,ei=b[5]|0,Pe=ei&8191,Oe=ei>>>13,jn=b[6]|0,je=jn&8191,Ue=jn>>>13,xr=b[7]|0,ke=xr&8191,Ve=xr>>>13,kn=b[8]|0,De=kn&8191,We=kn>>>13,On=b[9]|0,Ge=On&8191,He=On>>>13;g.negative=f.negative^d.negative,g.length=19,w=Math.imul(O,_e),c=Math.imul(O,Ie),c=c+Math.imul(F,_e)|0,_=Math.imul(F,Ie);var rn=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(rn>>>26)|0,rn&=67108863,w=Math.imul(H,_e),c=Math.imul(H,Ie),c=c+Math.imul(J,_e)|0,_=Math.imul(J,Ie),w=w+Math.imul(O,Ne)|0,c=c+Math.imul(O,Re)|0,c=c+Math.imul(F,Ne)|0,_=_+Math.imul(F,Re)|0;var Ot=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,w=Math.imul(B,_e),c=Math.imul(B,Ie),c=c+Math.imul(q,_e)|0,_=Math.imul(q,Ie),w=w+Math.imul(H,Ne)|0,c=c+Math.imul(H,Re)|0,c=c+Math.imul(J,Ne)|0,_=_+Math.imul(J,Re)|0,w=w+Math.imul(O,qe)|0,c=c+Math.imul(O,Fe)|0,c=c+Math.imul(F,qe)|0,_=_+Math.imul(F,Fe)|0;var Rt=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,w=Math.imul(X,_e),c=Math.imul(X,Ie),c=c+Math.imul(Q,_e)|0,_=Math.imul(Q,Ie),w=w+Math.imul(B,Ne)|0,c=c+Math.imul(B,Re)|0,c=c+Math.imul(q,Ne)|0,_=_+Math.imul(q,Re)|0,w=w+Math.imul(H,qe)|0,c=c+Math.imul(H,Fe)|0,c=c+Math.imul(J,qe)|0,_=_+Math.imul(J,Fe)|0,w=w+Math.imul(O,$e)|0,c=c+Math.imul(O,Be)|0,c=c+Math.imul(F,$e)|0,_=_+Math.imul(F,Be)|0;var Lr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,w=Math.imul(ue,_e),c=Math.imul(ue,Ie),c=c+Math.imul(me,_e)|0,_=Math.imul(me,Ie),w=w+Math.imul(X,Ne)|0,c=c+Math.imul(X,Re)|0,c=c+Math.imul(Q,Ne)|0,_=_+Math.imul(Q,Re)|0,w=w+Math.imul(B,qe)|0,c=c+Math.imul(B,Fe)|0,c=c+Math.imul(q,qe)|0,_=_+Math.imul(q,Fe)|0,w=w+Math.imul(H,$e)|0,c=c+Math.imul(H,Be)|0,c=c+Math.imul(J,$e)|0,_=_+Math.imul(J,Be)|0,w=w+Math.imul(O,Le)|0,c=c+Math.imul(O,ze)|0,c=c+Math.imul(F,Le)|0,_=_+Math.imul(F,ze)|0;var Pr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,w=Math.imul(xe,_e),c=Math.imul(xe,Ie),c=c+Math.imul(le,_e)|0,_=Math.imul(le,Ie),w=w+Math.imul(ue,Ne)|0,c=c+Math.imul(ue,Re)|0,c=c+Math.imul(me,Ne)|0,_=_+Math.imul(me,Re)|0,w=w+Math.imul(X,qe)|0,c=c+Math.imul(X,Fe)|0,c=c+Math.imul(Q,qe)|0,_=_+Math.imul(Q,Fe)|0,w=w+Math.imul(B,$e)|0,c=c+Math.imul(B,Be)|0,c=c+Math.imul(q,$e)|0,_=_+Math.imul(q,Be)|0,w=w+Math.imul(H,Le)|0,c=c+Math.imul(H,ze)|0,c=c+Math.imul(J,Le)|0,_=_+Math.imul(J,ze)|0,w=w+Math.imul(O,Pe)|0,c=c+Math.imul(O,Oe)|0,c=c+Math.imul(F,Pe)|0,_=_+Math.imul(F,Oe)|0;var qr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(qr>>>26)|0,qr&=67108863,w=Math.imul(we,_e),c=Math.imul(we,Ie),c=c+Math.imul(Te,_e)|0,_=Math.imul(Te,Ie),w=w+Math.imul(xe,Ne)|0,c=c+Math.imul(xe,Re)|0,c=c+Math.imul(le,Ne)|0,_=_+Math.imul(le,Re)|0,w=w+Math.imul(ue,qe)|0,c=c+Math.imul(ue,Fe)|0,c=c+Math.imul(me,qe)|0,_=_+Math.imul(me,Fe)|0,w=w+Math.imul(X,$e)|0,c=c+Math.imul(X,Be)|0,c=c+Math.imul(Q,$e)|0,_=_+Math.imul(Q,Be)|0,w=w+Math.imul(B,Le)|0,c=c+Math.imul(B,ze)|0,c=c+Math.imul(q,Le)|0,_=_+Math.imul(q,ze)|0,w=w+Math.imul(H,Pe)|0,c=c+Math.imul(H,Oe)|0,c=c+Math.imul(J,Pe)|0,_=_+Math.imul(J,Oe)|0,w=w+Math.imul(O,je)|0,c=c+Math.imul(O,Ue)|0,c=c+Math.imul(F,je)|0,_=_+Math.imul(F,Ue)|0;var $r=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+($r>>>26)|0,$r&=67108863,w=Math.imul(ee,_e),c=Math.imul(ee,Ie),c=c+Math.imul(ie,_e)|0,_=Math.imul(ie,Ie),w=w+Math.imul(we,Ne)|0,c=c+Math.imul(we,Re)|0,c=c+Math.imul(Te,Ne)|0,_=_+Math.imul(Te,Re)|0,w=w+Math.imul(xe,qe)|0,c=c+Math.imul(xe,Fe)|0,c=c+Math.imul(le,qe)|0,_=_+Math.imul(le,Fe)|0,w=w+Math.imul(ue,$e)|0,c=c+Math.imul(ue,Be)|0,c=c+Math.imul(me,$e)|0,_=_+Math.imul(me,Be)|0,w=w+Math.imul(X,Le)|0,c=c+Math.imul(X,ze)|0,c=c+Math.imul(Q,Le)|0,_=_+Math.imul(Q,ze)|0,w=w+Math.imul(B,Pe)|0,c=c+Math.imul(B,Oe)|0,c=c+Math.imul(q,Pe)|0,_=_+Math.imul(q,Oe)|0,w=w+Math.imul(H,je)|0,c=c+Math.imul(H,Ue)|0,c=c+Math.imul(J,je)|0,_=_+Math.imul(J,Ue)|0,w=w+Math.imul(O,ke)|0,c=c+Math.imul(O,Ve)|0,c=c+Math.imul(F,ke)|0,_=_+Math.imul(F,Ve)|0;var zr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(zr>>>26)|0,zr&=67108863,w=Math.imul(ae,_e),c=Math.imul(ae,Ie),c=c+Math.imul(de,_e)|0,_=Math.imul(de,Ie),w=w+Math.imul(ee,Ne)|0,c=c+Math.imul(ee,Re)|0,c=c+Math.imul(ie,Ne)|0,_=_+Math.imul(ie,Re)|0,w=w+Math.imul(we,qe)|0,c=c+Math.imul(we,Fe)|0,c=c+Math.imul(Te,qe)|0,_=_+Math.imul(Te,Fe)|0,w=w+Math.imul(xe,$e)|0,c=c+Math.imul(xe,Be)|0,c=c+Math.imul(le,$e)|0,_=_+Math.imul(le,Be)|0,w=w+Math.imul(ue,Le)|0,c=c+Math.imul(ue,ze)|0,c=c+Math.imul(me,Le)|0,_=_+Math.imul(me,ze)|0,w=w+Math.imul(X,Pe)|0,c=c+Math.imul(X,Oe)|0,c=c+Math.imul(Q,Pe)|0,_=_+Math.imul(Q,Oe)|0,w=w+Math.imul(B,je)|0,c=c+Math.imul(B,Ue)|0,c=c+Math.imul(q,je)|0,_=_+Math.imul(q,Ue)|0,w=w+Math.imul(H,ke)|0,c=c+Math.imul(H,Ve)|0,c=c+Math.imul(J,ke)|0,_=_+Math.imul(J,Ve)|0,w=w+Math.imul(O,De)|0,c=c+Math.imul(O,We)|0,c=c+Math.imul(F,De)|0,_=_+Math.imul(F,We)|0;var jr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(jr>>>26)|0,jr&=67108863,w=Math.imul(he,_e),c=Math.imul(he,Ie),c=c+Math.imul(Se,_e)|0,_=Math.imul(Se,Ie),w=w+Math.imul(ae,Ne)|0,c=c+Math.imul(ae,Re)|0,c=c+Math.imul(de,Ne)|0,_=_+Math.imul(de,Re)|0,w=w+Math.imul(ee,qe)|0,c=c+Math.imul(ee,Fe)|0,c=c+Math.imul(ie,qe)|0,_=_+Math.imul(ie,Fe)|0,w=w+Math.imul(we,$e)|0,c=c+Math.imul(we,Be)|0,c=c+Math.imul(Te,$e)|0,_=_+Math.imul(Te,Be)|0,w=w+Math.imul(xe,Le)|0,c=c+Math.imul(xe,ze)|0,c=c+Math.imul(le,Le)|0,_=_+Math.imul(le,ze)|0,w=w+Math.imul(ue,Pe)|0,c=c+Math.imul(ue,Oe)|0,c=c+Math.imul(me,Pe)|0,_=_+Math.imul(me,Oe)|0,w=w+Math.imul(X,je)|0,c=c+Math.imul(X,Ue)|0,c=c+Math.imul(Q,je)|0,_=_+Math.imul(Q,Ue)|0,w=w+Math.imul(B,ke)|0,c=c+Math.imul(B,Ve)|0,c=c+Math.imul(q,ke)|0,_=_+Math.imul(q,Ve)|0,w=w+Math.imul(H,De)|0,c=c+Math.imul(H,We)|0,c=c+Math.imul(J,De)|0,_=_+Math.imul(J,We)|0,w=w+Math.imul(O,Ge)|0,c=c+Math.imul(O,He)|0,c=c+Math.imul(F,Ge)|0,_=_+Math.imul(F,He)|0;var Ur=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,w=Math.imul(he,Ne),c=Math.imul(he,Re),c=c+Math.imul(Se,Ne)|0,_=Math.imul(Se,Re),w=w+Math.imul(ae,qe)|0,c=c+Math.imul(ae,Fe)|0,c=c+Math.imul(de,qe)|0,_=_+Math.imul(de,Fe)|0,w=w+Math.imul(ee,$e)|0,c=c+Math.imul(ee,Be)|0,c=c+Math.imul(ie,$e)|0,_=_+Math.imul(ie,Be)|0,w=w+Math.imul(we,Le)|0,c=c+Math.imul(we,ze)|0,c=c+Math.imul(Te,Le)|0,_=_+Math.imul(Te,ze)|0,w=w+Math.imul(xe,Pe)|0,c=c+Math.imul(xe,Oe)|0,c=c+Math.imul(le,Pe)|0,_=_+Math.imul(le,Oe)|0,w=w+Math.imul(ue,je)|0,c=c+Math.imul(ue,Ue)|0,c=c+Math.imul(me,je)|0,_=_+Math.imul(me,Ue)|0,w=w+Math.imul(X,ke)|0,c=c+Math.imul(X,Ve)|0,c=c+Math.imul(Q,ke)|0,_=_+Math.imul(Q,Ve)|0,w=w+Math.imul(B,De)|0,c=c+Math.imul(B,We)|0,c=c+Math.imul(q,De)|0,_=_+Math.imul(q,We)|0,w=w+Math.imul(H,Ge)|0,c=c+Math.imul(H,He)|0,c=c+Math.imul(J,Ge)|0,_=_+Math.imul(J,He)|0;var Vr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,w=Math.imul(he,qe),c=Math.imul(he,Fe),c=c+Math.imul(Se,qe)|0,_=Math.imul(Se,Fe),w=w+Math.imul(ae,$e)|0,c=c+Math.imul(ae,Be)|0,c=c+Math.imul(de,$e)|0,_=_+Math.imul(de,Be)|0,w=w+Math.imul(ee,Le)|0,c=c+Math.imul(ee,ze)|0,c=c+Math.imul(ie,Le)|0,_=_+Math.imul(ie,ze)|0,w=w+Math.imul(we,Pe)|0,c=c+Math.imul(we,Oe)|0,c=c+Math.imul(Te,Pe)|0,_=_+Math.imul(Te,Oe)|0,w=w+Math.imul(xe,je)|0,c=c+Math.imul(xe,Ue)|0,c=c+Math.imul(le,je)|0,_=_+Math.imul(le,Ue)|0,w=w+Math.imul(ue,ke)|0,c=c+Math.imul(ue,Ve)|0,c=c+Math.imul(me,ke)|0,_=_+Math.imul(me,Ve)|0,w=w+Math.imul(X,De)|0,c=c+Math.imul(X,We)|0,c=c+Math.imul(Q,De)|0,_=_+Math.imul(Q,We)|0,w=w+Math.imul(B,Ge)|0,c=c+Math.imul(B,He)|0,c=c+Math.imul(q,Ge)|0,_=_+Math.imul(q,He)|0;var Wr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,w=Math.imul(he,$e),c=Math.imul(he,Be),c=c+Math.imul(Se,$e)|0,_=Math.imul(Se,Be),w=w+Math.imul(ae,Le)|0,c=c+Math.imul(ae,ze)|0,c=c+Math.imul(de,Le)|0,_=_+Math.imul(de,ze)|0,w=w+Math.imul(ee,Pe)|0,c=c+Math.imul(ee,Oe)|0,c=c+Math.imul(ie,Pe)|0,_=_+Math.imul(ie,Oe)|0,w=w+Math.imul(we,je)|0,c=c+Math.imul(we,Ue)|0,c=c+Math.imul(Te,je)|0,_=_+Math.imul(Te,Ue)|0,w=w+Math.imul(xe,ke)|0,c=c+Math.imul(xe,Ve)|0,c=c+Math.imul(le,ke)|0,_=_+Math.imul(le,Ve)|0,w=w+Math.imul(ue,De)|0,c=c+Math.imul(ue,We)|0,c=c+Math.imul(me,De)|0,_=_+Math.imul(me,We)|0,w=w+Math.imul(X,Ge)|0,c=c+Math.imul(X,He)|0,c=c+Math.imul(Q,Ge)|0,_=_+Math.imul(Q,He)|0;var Gr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,w=Math.imul(he,Le),c=Math.imul(he,ze),c=c+Math.imul(Se,Le)|0,_=Math.imul(Se,ze),w=w+Math.imul(ae,Pe)|0,c=c+Math.imul(ae,Oe)|0,c=c+Math.imul(de,Pe)|0,_=_+Math.imul(de,Oe)|0,w=w+Math.imul(ee,je)|0,c=c+Math.imul(ee,Ue)|0,c=c+Math.imul(ie,je)|0,_=_+Math.imul(ie,Ue)|0,w=w+Math.imul(we,ke)|0,c=c+Math.imul(we,Ve)|0,c=c+Math.imul(Te,ke)|0,_=_+Math.imul(Te,Ve)|0,w=w+Math.imul(xe,De)|0,c=c+Math.imul(xe,We)|0,c=c+Math.imul(le,De)|0,_=_+Math.imul(le,We)|0,w=w+Math.imul(ue,Ge)|0,c=c+Math.imul(ue,He)|0,c=c+Math.imul(me,Ge)|0,_=_+Math.imul(me,He)|0;var Hr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,w=Math.imul(he,Pe),c=Math.imul(he,Oe),c=c+Math.imul(Se,Pe)|0,_=Math.imul(Se,Oe),w=w+Math.imul(ae,je)|0,c=c+Math.imul(ae,Ue)|0,c=c+Math.imul(de,je)|0,_=_+Math.imul(de,Ue)|0,w=w+Math.imul(ee,ke)|0,c=c+Math.imul(ee,Ve)|0,c=c+Math.imul(ie,ke)|0,_=_+Math.imul(ie,Ve)|0,w=w+Math.imul(we,De)|0,c=c+Math.imul(we,We)|0,c=c+Math.imul(Te,De)|0,_=_+Math.imul(Te,We)|0,w=w+Math.imul(xe,Ge)|0,c=c+Math.imul(xe,He)|0,c=c+Math.imul(le,Ge)|0,_=_+Math.imul(le,He)|0;var Kr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,w=Math.imul(he,je),c=Math.imul(he,Ue),c=c+Math.imul(Se,je)|0,_=Math.imul(Se,Ue),w=w+Math.imul(ae,ke)|0,c=c+Math.imul(ae,Ve)|0,c=c+Math.imul(de,ke)|0,_=_+Math.imul(de,Ve)|0,w=w+Math.imul(ee,De)|0,c=c+Math.imul(ee,We)|0,c=c+Math.imul(ie,De)|0,_=_+Math.imul(ie,We)|0,w=w+Math.imul(we,Ge)|0,c=c+Math.imul(we,He)|0,c=c+Math.imul(Te,Ge)|0,_=_+Math.imul(Te,He)|0;var Zr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,w=Math.imul(he,ke),c=Math.imul(he,Ve),c=c+Math.imul(Se,ke)|0,_=Math.imul(Se,Ve),w=w+Math.imul(ae,De)|0,c=c+Math.imul(ae,We)|0,c=c+Math.imul(de,De)|0,_=_+Math.imul(de,We)|0,w=w+Math.imul(ee,Ge)|0,c=c+Math.imul(ee,He)|0,c=c+Math.imul(ie,Ge)|0,_=_+Math.imul(ie,He)|0;var Jr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,w=Math.imul(he,De),c=Math.imul(he,We),c=c+Math.imul(Se,De)|0,_=Math.imul(Se,We),w=w+Math.imul(ae,Ge)|0,c=c+Math.imul(ae,He)|0,c=c+Math.imul(de,Ge)|0,_=_+Math.imul(de,He)|0;var Xt=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,w=Math.imul(he,Ge),c=Math.imul(he,He),c=c+Math.imul(Se,Ge)|0,_=Math.imul(Se,He);var Tr=(k+w|0)+((c&8191)<<13)|0;return k=(_+(c>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,E[0]=rn,E[1]=Ot,E[2]=Rt,E[3]=Lr,E[4]=Pr,E[5]=qr,E[6]=$r,E[7]=zr,E[8]=jr,E[9]=Ur,E[10]=Vr,E[11]=Wr,E[12]=Gr,E[13]=Hr,E[14]=Kr,E[15]=Zr,E[16]=Jr,E[17]=Xt,E[18]=Tr,k!==0&&(E[19]=k,g.length++),g};Math.imul||(A=S);function T(M,f,d){d.negative=f.negative^M.negative,d.length=M.length+f.length;for(var g=0,m=0,b=0;b<d.length-1;b++){var E=m;m=0;for(var k=g&67108863,w=Math.min(b,f.length-1),c=Math.max(0,b-M.length+1);c<=w;c++){var _=b-c,R=M.words[_]|0,O=f.words[c]|0,F=R*O,U=F&67108863;E=E+(F/67108864|0)|0,U=U+k|0,k=U&67108863,E=E+(U>>>26)|0,m+=E>>>26,E&=67108863}d.words[b]=k,g=E,E=m}return g!==0?d.words[b]=g:d.length--,d.strip()}function I(M,f,d){var g=new N;return g.mulp(M,f,d)}a.prototype.mulTo=function(f,d){var g,m=this.length+f.length;return this.length===10&&f.length===10?g=A(this,f,d):m<63?g=S(this,f,d):m<1024?g=T(this,f,d):g=I(this,f,d),g};function N(M,f){this.x=M,this.y=f}N.prototype.makeRBT=function(f){for(var d=new Array(f),g=a.prototype._countBits(f)-1,m=0;m<f;m++)d[m]=this.revBin(m,g,f);return d},N.prototype.revBin=function(f,d,g){if(f===0||f===g-1)return f;for(var m=0,b=0;b<d;b++)m|=(f&1)<<d-b-1,f>>=1;return m},N.prototype.permute=function(f,d,g,m,b,E){for(var k=0;k<E;k++)m[k]=d[f[k]],b[k]=g[f[k]]},N.prototype.transform=function(f,d,g,m,b,E){this.permute(E,f,d,g,m,b);for(var k=1;k<b;k<<=1)for(var w=k<<1,c=Math.cos(2*Math.PI/w),_=Math.sin(2*Math.PI/w),R=0;R<b;R+=w)for(var O=c,F=_,U=0;U<k;U++){var H=g[R+U],J=m[R+U],fe=g[R+U+k],B=m[R+U+k],q=O*fe-F*B;B=O*B+F*fe,fe=q,g[R+U]=H+fe,m[R+U]=J+B,g[R+U+k]=H-fe,m[R+U+k]=J-B,U!==w&&(q=c*O-_*F,F=c*F+_*O,O=q)}},N.prototype.guessLen13b=function(f,d){var g=Math.max(d,f)|1,m=g&1,b=0;for(g=g/2|0;g;g=g>>>1)b++;return 1<<b+1+m},N.prototype.conjugate=function(f,d,g){if(!(g<=1))for(var m=0;m<g/2;m++){var b=f[m];f[m]=f[g-m-1],f[g-m-1]=b,b=d[m],d[m]=-d[g-m-1],d[g-m-1]=-b}},N.prototype.normalize13b=function(f,d){for(var g=0,m=0;m<d/2;m++){var b=Math.round(f[2*m+1]/d)*8192+Math.round(f[2*m]/d)+g;f[m]=b&67108863,b<67108864?g=0:g=b/67108864|0}return f},N.prototype.convert13b=function(f,d,g,m){for(var b=0,E=0;E<d;E++)b=b+(f[E]|0),g[2*E]=b&8191,b=b>>>13,g[2*E+1]=b&8191,b=b>>>13;for(E=2*d;E<m;++E)g[E]=0;r(b===0),r((b&-8192)===0)},N.prototype.stub=function(f){for(var d=new Array(f),g=0;g<f;g++)d[g]=0;return d},N.prototype.mulp=function(f,d,g){var m=2*this.guessLen13b(f.length,d.length),b=this.makeRBT(m),E=this.stub(m),k=new Array(m),w=new Array(m),c=new Array(m),_=new Array(m),R=new Array(m),O=new Array(m),F=g.words;F.length=m,this.convert13b(f.words,f.length,k,m),this.convert13b(d.words,d.length,_,m),this.transform(k,E,w,c,m,b),this.transform(_,E,R,O,m,b);for(var U=0;U<m;U++){var H=w[U]*R[U]-c[U]*O[U];c[U]=w[U]*O[U]+c[U]*R[U],w[U]=H}return this.conjugate(w,c,m),this.transform(w,c,F,E,m,b),this.conjugate(F,E,m),this.normalize13b(F,m),g.negative=f.negative^d.negative,g.length=f.length+d.length,g.strip()},a.prototype.mul=function(f){var d=new a(null);return d.words=new Array(this.length+f.length),this.mulTo(f,d)},a.prototype.mulf=function(f){var d=new a(null);return d.words=new Array(this.length+f.length),I(this,f,d)},a.prototype.imul=function(f){return this.clone().mulTo(f,this)},a.prototype.imuln=function(f){r(typeof f=="number"),r(f<67108864);for(var d=0,g=0;g<this.length;g++){var m=(this.words[g]|0)*f,b=(m&67108863)+(d&67108863);d>>=26,d+=m/67108864|0,d+=b>>>26,this.words[g]=b&67108863}return d!==0&&(this.words[g]=d,this.length++),this},a.prototype.muln=function(f){return this.clone().imuln(f)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(f){var d=y(f);if(d.length===0)return new a(1);for(var g=this,m=0;m<d.length&&d[m]===0;m++,g=g.sqr());if(++m<d.length)for(var b=g.sqr();m<d.length;m++,b=b.sqr())d[m]!==0&&(g=g.mul(b));return g},a.prototype.iushln=function(f){r(typeof f=="number"&&f>=0);var d=f%26,g=(f-d)/26,m=67108863>>>26-d<<26-d,b;if(d!==0){var E=0;for(b=0;b<this.length;b++){var k=this.words[b]&m,w=(this.words[b]|0)-k<<d;this.words[b]=w|E,E=k>>>26-d}E&&(this.words[b]=E,this.length++)}if(g!==0){for(b=this.length-1;b>=0;b--)this.words[b+g]=this.words[b];for(b=0;b<g;b++)this.words[b]=0;this.length+=g}return this.strip()},a.prototype.ishln=function(f){return r(this.negative===0),this.iushln(f)},a.prototype.iushrn=function(f,d,g){r(typeof f=="number"&&f>=0);var m;d?m=(d-d%26)/26:m=0;var b=f%26,E=Math.min((f-b)/26,this.length),k=67108863^67108863>>>b<<b,w=g;if(m-=E,m=Math.max(0,m),w){for(var c=0;c<E;c++)w.words[c]=this.words[c];w.length=E}if(E!==0)if(this.length>E)for(this.length-=E,c=0;c<this.length;c++)this.words[c]=this.words[c+E];else this.words[0]=0,this.length=1;var _=0;for(c=this.length-1;c>=0&&(_!==0||c>=m);c--){var R=this.words[c]|0;this.words[c]=_<<26-b|R>>>b,_=R&k}return w&&_!==0&&(w.words[w.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(f,d,g){return r(this.negative===0),this.iushrn(f,d,g)},a.prototype.shln=function(f){return this.clone().ishln(f)},a.prototype.ushln=function(f){return this.clone().iushln(f)},a.prototype.shrn=function(f){return this.clone().ishrn(f)},a.prototype.ushrn=function(f){return this.clone().iushrn(f)},a.prototype.testn=function(f){r(typeof f=="number"&&f>=0);var d=f%26,g=(f-d)/26,m=1<<d;if(this.length<=g)return!1;var b=this.words[g];return!!(b&m)},a.prototype.imaskn=function(f){r(typeof f=="number"&&f>=0);var d=f%26,g=(f-d)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(d!==0&&g++,this.length=Math.min(g,this.length),d!==0){var m=67108863^67108863>>>d<<d;this.words[this.length-1]&=m}return this.strip()},a.prototype.maskn=function(f){return this.clone().imaskn(f)},a.prototype.iaddn=function(f){return r(typeof f=="number"),r(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},a.prototype._iaddn=function(f){this.words[0]+=f;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},a.prototype.isubn=function(f){if(r(typeof f=="number"),r(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this.strip()},a.prototype.addn=function(f){return this.clone().iaddn(f)},a.prototype.subn=function(f){return this.clone().isubn(f)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(f,d,g){var m=f.length+g,b;this._expand(m);var E,k=0;for(b=0;b<f.length;b++){E=(this.words[b+g]|0)+k;var w=(f.words[b]|0)*d;E-=w&67108863,k=(E>>26)-(w/67108864|0),this.words[b+g]=E&67108863}for(;b<this.length-g;b++)E=(this.words[b+g]|0)+k,k=E>>26,this.words[b+g]=E&67108863;if(k===0)return this.strip();for(r(k===-1),k=0,b=0;b<this.length;b++)E=-(this.words[b]|0)+k,k=E>>26,this.words[b]=E&67108863;return this.negative=1,this.strip()},a.prototype._wordDiv=function(f,d){var g=this.length-f.length,m=this.clone(),b=f,E=b.words[b.length-1]|0,k=this._countBits(E);g=26-k,g!==0&&(b=b.ushln(g),m.iushln(g),E=b.words[b.length-1]|0);var w=m.length-b.length,c;if(d!=="mod"){c=new a(null),c.length=w+1,c.words=new Array(c.length);for(var _=0;_<c.length;_++)c.words[_]=0}var R=m.clone()._ishlnsubmul(b,1,w);R.negative===0&&(m=R,c&&(c.words[w]=1));for(var O=w-1;O>=0;O--){var F=(m.words[b.length+O]|0)*67108864+(m.words[b.length+O-1]|0);for(F=Math.min(F/E|0,67108863),m._ishlnsubmul(b,F,O);m.negative!==0;)F--,m.negative=0,m._ishlnsubmul(b,1,O),m.isZero()||(m.negative^=1);c&&(c.words[O]=F)}return c&&c.strip(),m.strip(),d!=="div"&&g!==0&&m.iushrn(g),{div:c||null,mod:m}},a.prototype.divmod=function(f,d,g){if(r(!f.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var m,b,E;return this.negative!==0&&f.negative===0?(E=this.neg().divmod(f,d),d!=="mod"&&(m=E.div.neg()),d!=="div"&&(b=E.mod.neg(),g&&b.negative!==0&&b.iadd(f)),{div:m,mod:b}):this.negative===0&&f.negative!==0?(E=this.divmod(f.neg(),d),d!=="mod"&&(m=E.div.neg()),{div:m,mod:E.mod}):(this.negative&f.negative)!==0?(E=this.neg().divmod(f.neg(),d),d!=="div"&&(b=E.mod.neg(),g&&b.negative!==0&&b.isub(f)),{div:E.div,mod:b}):f.length>this.length||this.cmp(f)<0?{div:new a(0),mod:this}:f.length===1?d==="div"?{div:this.divn(f.words[0]),mod:null}:d==="mod"?{div:null,mod:new a(this.modn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new a(this.modn(f.words[0]))}:this._wordDiv(f,d)},a.prototype.div=function(f){return this.divmod(f,"div",!1).div},a.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},a.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},a.prototype.divRound=function(f){var d=this.divmod(f);if(d.mod.isZero())return d.div;var g=d.div.negative!==0?d.mod.isub(f):d.mod,m=f.ushrn(1),b=f.andln(1),E=g.cmp(m);return E<0||b===1&&E===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},a.prototype.modn=function(f){r(f<=67108863);for(var d=(1<<26)%f,g=0,m=this.length-1;m>=0;m--)g=(d*g+(this.words[m]|0))%f;return g},a.prototype.idivn=function(f){r(f<=67108863);for(var d=0,g=this.length-1;g>=0;g--){var m=(this.words[g]|0)+d*67108864;this.words[g]=m/f|0,d=m%f}return this.strip()},a.prototype.divn=function(f){return this.clone().idivn(f)},a.prototype.egcd=function(f){r(f.negative===0),r(!f.isZero());var d=this,g=f.clone();d.negative!==0?d=d.umod(f):d=d.clone();for(var m=new a(1),b=new a(0),E=new a(0),k=new a(1),w=0;d.isEven()&&g.isEven();)d.iushrn(1),g.iushrn(1),++w;for(var c=g.clone(),_=d.clone();!d.isZero();){for(var R=0,O=1;(d.words[0]&O)===0&&R<26;++R,O<<=1);if(R>0)for(d.iushrn(R);R-- >0;)(m.isOdd()||b.isOdd())&&(m.iadd(c),b.isub(_)),m.iushrn(1),b.iushrn(1);for(var F=0,U=1;(g.words[0]&U)===0&&F<26;++F,U<<=1);if(F>0)for(g.iushrn(F);F-- >0;)(E.isOdd()||k.isOdd())&&(E.iadd(c),k.isub(_)),E.iushrn(1),k.iushrn(1);d.cmp(g)>=0?(d.isub(g),m.isub(E),b.isub(k)):(g.isub(d),E.isub(m),k.isub(b))}return{a:E,b:k,gcd:g.iushln(w)}},a.prototype._invmp=function(f){r(f.negative===0),r(!f.isZero());var d=this,g=f.clone();d.negative!==0?d=d.umod(f):d=d.clone();for(var m=new a(1),b=new a(0),E=g.clone();d.cmpn(1)>0&&g.cmpn(1)>0;){for(var k=0,w=1;(d.words[0]&w)===0&&k<26;++k,w<<=1);if(k>0)for(d.iushrn(k);k-- >0;)m.isOdd()&&m.iadd(E),m.iushrn(1);for(var c=0,_=1;(g.words[0]&_)===0&&c<26;++c,_<<=1);if(c>0)for(g.iushrn(c);c-- >0;)b.isOdd()&&b.iadd(E),b.iushrn(1);d.cmp(g)>=0?(d.isub(g),m.isub(b)):(g.isub(d),b.isub(m))}var R;return d.cmpn(1)===0?R=m:R=b,R.cmpn(0)<0&&R.iadd(f),R},a.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var d=this.clone(),g=f.clone();d.negative=0,g.negative=0;for(var m=0;d.isEven()&&g.isEven();m++)d.iushrn(1),g.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;g.isEven();)g.iushrn(1);var b=d.cmp(g);if(b<0){var E=d;d=g,g=E}else if(b===0||g.cmpn(1)===0)break;d.isub(g)}while(!0);return g.iushln(m)},a.prototype.invm=function(f){return this.egcd(f).a.umod(f)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(f){return this.words[0]&f},a.prototype.bincn=function(f){r(typeof f=="number");var d=f%26,g=(f-d)/26,m=1<<d;if(this.length<=g)return this._expand(g+1),this.words[g]|=m,this;for(var b=m,E=g;b!==0&&E<this.length;E++){var k=this.words[E]|0;k+=b,b=k>>>26,k&=67108863,this.words[E]=k}return b!==0&&(this.words[E]=b,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(f){var d=f<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this.strip();var g;if(this.length>1)g=1;else{d&&(f=-f),r(f<=67108863,"Number is too big");var m=this.words[0]|0;g=m===f?0:m<f?-1:1}return this.negative!==0?-g|0:g},a.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var d=this.ucmp(f);return this.negative!==0?-d|0:d},a.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var d=0,g=this.length-1;g>=0;g--){var m=this.words[g]|0,b=f.words[g]|0;if(m!==b){m<b?d=-1:m>b&&(d=1);break}}return d},a.prototype.gtn=function(f){return this.cmpn(f)===1},a.prototype.gt=function(f){return this.cmp(f)===1},a.prototype.gten=function(f){return this.cmpn(f)>=0},a.prototype.gte=function(f){return this.cmp(f)>=0},a.prototype.ltn=function(f){return this.cmpn(f)===-1},a.prototype.lt=function(f){return this.cmp(f)===-1},a.prototype.lten=function(f){return this.cmpn(f)<=0},a.prototype.lte=function(f){return this.cmp(f)<=0},a.prototype.eqn=function(f){return this.cmpn(f)===0},a.prototype.eq=function(f){return this.cmp(f)===0},a.red=function(f){return new j(f)},a.prototype.toRed=function(f){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},a.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(f){return this.red=f,this},a.prototype.forceRed=function(f){return r(!this.red,"Already a number in reduction context"),this._forceRed(f)},a.prototype.redAdd=function(f){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},a.prototype.redIAdd=function(f){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},a.prototype.redSub=function(f){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},a.prototype.redISub=function(f){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},a.prototype.redShl=function(f){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},a.prototype.redMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},a.prototype.redIMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},a.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(f){return r(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var D={k256:null,p224:null,p192:null,p25519:null};function C(M,f){this.name=M,this.p=new a(f,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}C.prototype._tmp=function(){var f=new a(null);return f.words=new Array(Math.ceil(this.n/13)),f},C.prototype.ireduce=function(f){var d=f,g;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),g=d.bitLength();while(g>this.n);var m=g<this.n?-1:d.ucmp(this.p);return m===0?(d.words[0]=0,d.length=1):m>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},C.prototype.split=function(f,d){f.iushrn(this.n,0,d)},C.prototype.imulK=function(f){return f.imul(this.k)};function L(){C.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(L,C),L.prototype.split=function(f,d){for(var g=4194303,m=Math.min(f.length,9),b=0;b<m;b++)d.words[b]=f.words[b];if(d.length=m,f.length<=9){f.words[0]=0,f.length=1;return}var E=f.words[9];for(d.words[d.length++]=E&g,b=10;b<f.length;b++){var k=f.words[b]|0;f.words[b-10]=(k&g)<<4|E>>>22,E=k}E>>>=22,f.words[b-10]=E,E===0&&f.length>10?f.length-=10:f.length-=9},L.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var d=0,g=0;g<f.length;g++){var m=f.words[g]|0;d+=m*977,f.words[g]=d&67108863,d=m*64+(d/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function z(){C.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(z,C);function $(){C.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n($,C);function G(){C.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(G,C),G.prototype.imulK=function(f){for(var d=0,g=0;g<f.length;g++){var m=(f.words[g]|0)*19+d,b=m&67108863;m>>>=26,f.words[g]=b,d=m}return d!==0&&(f.words[f.length++]=d),f},a._prime=function(f){if(D[f])return D[f];var d;if(f==="k256")d=new L;else if(f==="p224")d=new z;else if(f==="p192")d=new $;else if(f==="p25519")d=new G;else throw new Error("Unknown prime "+f);return D[f]=d,d};function j(M){if(typeof M=="string"){var f=a._prime(M);this.m=f.p,this.prime=f}else r(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}j.prototype._verify1=function(f){r(f.negative===0,"red works only with positives"),r(f.red,"red works only with red numbers")},j.prototype._verify2=function(f,d){r((f.negative|d.negative)===0,"red works only with positives"),r(f.red&&f.red===d.red,"red works only with red numbers")},j.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):f.umod(this.m)._forceRed(this)},j.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},j.prototype.add=function(f,d){this._verify2(f,d);var g=f.add(d);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},j.prototype.iadd=function(f,d){this._verify2(f,d);var g=f.iadd(d);return g.cmp(this.m)>=0&&g.isub(this.m),g},j.prototype.sub=function(f,d){this._verify2(f,d);var g=f.sub(d);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},j.prototype.isub=function(f,d){this._verify2(f,d);var g=f.isub(d);return g.cmpn(0)<0&&g.iadd(this.m),g},j.prototype.shl=function(f,d){return this._verify1(f),this.imod(f.ushln(d))},j.prototype.imul=function(f,d){return this._verify2(f,d),this.imod(f.imul(d))},j.prototype.mul=function(f,d){return this._verify2(f,d),this.imod(f.mul(d))},j.prototype.isqr=function(f){return this.imul(f,f.clone())},j.prototype.sqr=function(f){return this.mul(f,f)},j.prototype.sqrt=function(f){if(f.isZero())return f.clone();var d=this.m.andln(3);if(r(d%2===1),d===3){var g=this.m.add(new a(1)).iushrn(2);return this.pow(f,g)}for(var m=this.m.subn(1),b=0;!m.isZero()&&m.andln(1)===0;)b++,m.iushrn(1);r(!m.isZero());var E=new a(1).toRed(this),k=E.redNeg(),w=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new a(2*c*c).toRed(this);this.pow(c,w).cmp(k)!==0;)c.redIAdd(k);for(var _=this.pow(c,m),R=this.pow(f,m.addn(1).iushrn(1)),O=this.pow(f,m),F=b;O.cmp(E)!==0;){for(var U=O,H=0;U.cmp(E)!==0;H++)U=U.redSqr();r(H<F);var J=this.pow(_,new a(1).iushln(F-H-1));R=R.redMul(J),_=J.redSqr(),O=O.redMul(_),F=H}return R},j.prototype.invm=function(f){var d=f._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},j.prototype.pow=function(f,d){if(d.isZero())return new a(1).toRed(this);if(d.cmpn(1)===0)return f.clone();var g=4,m=new Array(1<<g);m[0]=new a(1).toRed(this),m[1]=f;for(var b=2;b<m.length;b++)m[b]=this.mul(m[b-1],f);var E=m[0],k=0,w=0,c=d.bitLength()%26;for(c===0&&(c=26),b=d.length-1;b>=0;b--){for(var _=d.words[b],R=c-1;R>=0;R--){var O=_>>R&1;if(E!==m[0]&&(E=this.sqr(E)),O===0&&k===0){w=0;continue}k<<=1,k|=O,w++,!(w!==g&&(b!==0||R!==0))&&(E=this.mul(E,m[k]),w=0,k=0)}c=26}return E},j.prototype.convertTo=function(f){var d=f.umod(this.m);return d===f?d.clone():d},j.prototype.convertFrom=function(f){var d=f.clone();return d.red=null,d},a.mont=function(f){return new K(f)};function K(M){j.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(K,j),K.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},K.prototype.convertFrom=function(f){var d=this.imod(f.mul(this.rinv));return d.red=null,d},K.prototype.imul=function(f,d){if(f.isZero()||d.isZero())return f.words[0]=0,f.length=1,f;var g=f.imul(d),m=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(m).iushrn(this.shift),E=b;return b.cmp(this.m)>=0?E=b.isub(this.m):b.cmpn(0)<0&&(E=b.iadd(this.m)),E._forceRed(this)},K.prototype.mul=function(f,d){if(f.isZero()||d.isZero())return new a(0)._forceRed(this);var g=f.mul(d),m=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(m).iushrn(this.shift),E=b;return b.cmp(this.m)>=0?E=b.isub(this.m):b.cmpn(0)<0&&(E=b.iadd(this.m)),E._forceRed(this)},K.prototype.invm=function(f){var d=this.imod(f._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(typeof WT=="undefined"||WT,AP)});var GT=ne(NP=>{"use strict";var M_=NP;function Aye(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t!="string"){for(var n=0;n<t.length;n++)r[n]=t[n]|0;return r}if(e==="hex"){t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t);for(var n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(var n=0;n<t.length;n++){var a=t.charCodeAt(n),s=a>>8,o=a&255;s?r.push(s,o):r.push(o)}return r}M_.toArray=Aye;function kP(t){return t.length===1?"0"+t:t}M_.zero2=kP;function TP(t){for(var e="",r=0;r<t.length;r++)e+=kP(t[r].toString(16));return e}M_.toHex=TP;M_.encode=function(e,r){return r==="hex"?TP(e):e}});var es=ne(IP=>{"use strict";var No=IP,kye=wu(),Tye=Qa(),A_=GT();No.assert=Tye;No.toArray=A_.toArray;No.zero2=A_.zero2;No.toHex=A_.toHex;No.encode=A_.encode;function Nye(t,e,r){var n=new Array(Math.max(t.bitLength(),r)+1);n.fill(0);for(var a=1<<e+1,s=t.clone(),o=0;o<n.length;o++){var u,l=s.andln(a-1);s.isOdd()?(l>(a>>1)-1?u=(a>>1)-l:u=l,s.isubn(u)):u=0,n[o]=u,s.iushrn(1)}return n}No.getNAF=Nye;function Iye(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var n=0,a=0,s;t.cmpn(-n)>0||e.cmpn(-a)>0;){var o=t.andln(3)+n&3,u=e.andln(3)+a&3;o===3&&(o=-1),u===3&&(u=-1);var l;(o&1)===0?l=0:(s=t.andln(7)+n&7,(s===3||s===5)&&u===2?l=-o:l=o),r[0].push(l);var h;(u&1)===0?h=0:(s=e.andln(7)+a&7,(s===3||s===5)&&o===2?h=-u:h=u),r[1].push(h),2*n===l+1&&(n=1-n),2*a===h+1&&(a=1-a),t.iushrn(1),e.iushrn(1)}return r}No.getJSF=Iye;function Dye(t,e,r){var n="_"+e;t.prototype[e]=function(){return this[n]!==void 0?this[n]:this[n]=r.call(this)}}No.cachedProperty=Dye;function Oye(t){return typeof t=="string"?No.toArray(t,"hex"):t}No.parseBytes=Oye;function Rye(t){return new kye(t,"hex","le")}No.intFromLE=Rye});var wg=ne((_et,DP)=>{"use strict";var Jc=wu(),bg=es(),k_=bg.getNAF,Cye=bg.getJSF,T_=bg.assert;function wl(t,e){this.type=t,this.p=new Jc(e.p,16),this.red=e.prime?Jc.red(e.prime):Jc.mont(this.p),this.zero=new Jc(0).toRed(this.red),this.one=new Jc(1).toRed(this.red),this.two=new Jc(2).toRed(this.red),this.n=e.n&&new Jc(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}DP.exports=wl;wl.prototype.point=function(){throw new Error("Not implemented")};wl.prototype.validate=function(){throw new Error("Not implemented")};wl.prototype._fixedNafMul=function(e,r){T_(e.precomputed);var n=e._getDoubles(),a=k_(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],u,l;for(u=0;u<a.length;u+=n.step){l=0;for(var h=u+n.step-1;h>=u;h--)l=(l<<1)+a[h];o.push(l)}for(var p=this.jpoint(null,null,null),v=this.jpoint(null,null,null),y=s;y>0;y--){for(u=0;u<o.length;u++)l=o[u],l===y?v=v.mixedAdd(n.points[u]):l===-y&&(v=v.mixedAdd(n.points[u].neg()));p=p.add(v)}return p.toP()};wl.prototype._wnafMul=function(e,r){var n=4,a=e._getNAFPoints(n);n=a.wnd;for(var s=a.points,o=k_(r,n,this._bitLength),u=this.jpoint(null,null,null),l=o.length-1;l>=0;l--){for(var h=0;l>=0&&o[l]===0;l--)h++;if(l>=0&&h++,u=u.dblp(h),l<0)break;var p=o[l];T_(p!==0),e.type==="affine"?p>0?u=u.mixedAdd(s[p-1>>1]):u=u.mixedAdd(s[-p-1>>1].neg()):p>0?u=u.add(s[p-1>>1]):u=u.add(s[-p-1>>1].neg())}return e.type==="affine"?u.toP():u};wl.prototype._wnafMulAdd=function(e,r,n,a,s){var o=this._wnafT1,u=this._wnafT2,l=this._wnafT3,h=0,p,v,y;for(p=0;p<a;p++){y=r[p];var S=y._getNAFPoints(e);o[p]=S.wnd,u[p]=S.points}for(p=a-1;p>=1;p-=2){var A=p-1,T=p;if(o[A]!==1||o[T]!==1){l[A]=k_(n[A],o[A],this._bitLength),l[T]=k_(n[T],o[T],this._bitLength),h=Math.max(l[A].length,h),h=Math.max(l[T].length,h);continue}var I=[r[A],null,null,r[T]];r[A].y.cmp(r[T].y)===0?(I[1]=r[A].add(r[T]),I[2]=r[A].toJ().mixedAdd(r[T].neg())):r[A].y.cmp(r[T].y.redNeg())===0?(I[1]=r[A].toJ().mixedAdd(r[T]),I[2]=r[A].add(r[T].neg())):(I[1]=r[A].toJ().mixedAdd(r[T]),I[2]=r[A].toJ().mixedAdd(r[T].neg()));var N=[-3,-1,-5,-7,0,7,5,1,3],D=Cye(n[A],n[T]);for(h=Math.max(D[0].length,h),l[A]=new Array(h),l[T]=new Array(h),v=0;v<h;v++){var C=D[0][v]|0,L=D[1][v]|0;l[A][v]=N[(C+1)*3+(L+1)],l[T][v]=0,u[A]=I}}var z=this.jpoint(null,null,null),$=this._wnafT4;for(p=h;p>=0;p--){for(var G=0;p>=0;){var j=!0;for(v=0;v<a;v++)$[v]=l[v][p]|0,$[v]!==0&&(j=!1);if(!j)break;G++,p--}if(p>=0&&G++,z=z.dblp(G),p<0)break;for(v=0;v<a;v++){var K=$[v];K!==0&&(K>0?y=u[v][K-1>>1]:K<0&&(y=u[v][-K-1>>1].neg()),y.type==="affine"?z=z.mixedAdd(y):z=z.add(y))}}for(p=0;p<a;p++)u[p]=null;return s?z:z.toP()};function Os(t,e){this.curve=t,this.type=e,this.precomputed=null}wl.BasePoint=Os;Os.prototype.eq=function(){throw new Error("Not implemented")};Os.prototype.validate=function(){return this.curve.validate(this)};wl.prototype.decodePoint=function(e,r){e=bg.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?T_(e[e.length-1]%2===0):e[0]===7&&T_(e[e.length-1]%2===1);var a=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return a}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Os.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Os.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};Os.prototype.encode=function(e,r){return bg.encode(this._encode(r),e)};Os.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Os.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Os.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],a=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)a=a.dbl();n.push(a)}return{step:e,points:n}};Os.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,a=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(a);return{wnd:e,points:r}};Os.prototype._getBeta=function(){return null};Os.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r}});var RP=ne((xet,OP)=>{"use strict";var Fye=es(),ai=wu(),HT=Et(),op=wg(),Bye=Fye.assert;function Rs(t){op.call(this,"short",t),this.a=new ai(t.a,16).toRed(this.red),this.b=new ai(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}HT(Rs,op);OP.exports=Rs;Rs.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new ai(e.beta,16).toRed(this.red);else{var a=this._getEndoRoots(this.p);r=a[0].cmp(a[1])<0?a[0]:a[1],r=r.toRed(this.red)}if(e.lambda)n=new ai(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],Bye(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(u){return{a:new ai(u.a,16),b:new ai(u.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};Rs.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:ai.mont(e),n=new ai(2).toRed(r).redInvm(),a=n.redNeg(),s=new ai(3).toRed(r).redNeg().redSqrt().redMul(n),o=a.redAdd(s).fromRed(),u=a.redSub(s).fromRed();return[o,u]};Rs.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,a=this.n.clone(),s=new ai(1),o=new ai(0),u=new ai(0),l=new ai(1),h,p,v,y,S,A,T,I=0,N,D;n.cmpn(0)!==0;){var C=a.div(n);N=a.sub(C.mul(n)),D=u.sub(C.mul(s));var L=l.sub(C.mul(o));if(!v&&N.cmp(r)<0)h=T.neg(),p=s,v=N.neg(),y=D;else if(v&&++I===2)break;T=N,a=n,n=N,u=s,s=D,l=o,o=L}S=N.neg(),A=D;var z=v.sqr().add(y.sqr()),$=S.sqr().add(A.sqr());return $.cmp(z)>=0&&(S=h,A=p),v.negative&&(v=v.neg(),y=y.neg()),S.negative&&(S=S.neg(),A=A.neg()),[{a:v,b:y},{a:S,b:A}]};Rs.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],a=r[1],s=a.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),u=s.mul(n.a),l=o.mul(a.a),h=s.mul(n.b),p=o.mul(a.b),v=e.sub(u).sub(l),y=h.add(p).neg();return{k1:v,k2:y}};Rs.prototype.pointFromX=function(e,r){e=new ai(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),a=n.redSqrt();if(a.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=a.fromRed().isOdd();return(r&&!s||!r&&s)&&(a=a.redNeg()),this.point(e,a)};Rs.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,a=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(a).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};Rs.prototype._endoWnafMulAdd=function(e,r,n){for(var a=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var u=this._endoSplit(r[o]),l=e[o],h=l._getBeta();u.k1.negative&&(u.k1.ineg(),l=l.neg(!0)),u.k2.negative&&(u.k2.ineg(),h=h.neg(!0)),a[o*2]=l,a[o*2+1]=h,s[o*2]=u.k1,s[o*2+1]=u.k2}for(var p=this._wnafMulAdd(1,a,s,o*2,n),v=0;v<o*2;v++)a[v]=null,s[v]=null;return p};function Di(t,e,r,n){op.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new ai(e,16),this.y=new ai(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}HT(Di,op.BasePoint);Rs.prototype.point=function(e,r,n){return new Di(this,e,r,n)};Rs.prototype.pointFromJSON=function(e,r){return Di.fromJSON(this,e,r)};Di.prototype._getBeta=function(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,a=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(a)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(a)}}}return r}};Di.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Di.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var a=e.point(r[0],r[1],n);if(!r[2])return a;function s(u){return e.point(u[0],u[1],n)}var o=r[2];return a.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[a].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[a].concat(o.naf.points.map(s))}},a};Di.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Di.prototype.isInfinity=function(){return this.inf};Di.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),a=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,a)};Di.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),a=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(a),o=s.redSqr().redISub(this.x.redAdd(this.x)),u=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,u)};Di.prototype.getX=function(){return this.x.fromRed()};Di.prototype.getY=function(){return this.y.fromRed()};Di.prototype.mul=function(e){return e=new ai(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Di.prototype.mulAdd=function(e,r,n){var a=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(a,s):this.curve._wnafMulAdd(1,a,s,2)};Di.prototype.jmulAdd=function(e,r,n){var a=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(a,s,!0):this.curve._wnafMulAdd(1,a,s,2,!0)};Di.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Di.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,a=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(a)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(a)}}}return r};Di.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Ki(t,e,r,n){op.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new ai(0)):(this.x=new ai(e,16),this.y=new ai(r,16),this.z=new ai(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}HT(Ki,op.BasePoint);Rs.prototype.jpoint=function(e,r,n){return new Ki(this,e,r,n)};Ki.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),a=this.y.redMul(r).redMul(e);return this.curve.point(n,a)};Ki.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Ki.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),a=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),u=e.y.redMul(n.redMul(this.z)),l=a.redSub(s),h=o.redSub(u);if(l.cmpn(0)===0)return h.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var p=l.redSqr(),v=p.redMul(l),y=a.redMul(p),S=h.redSqr().redIAdd(v).redISub(y).redISub(y),A=h.redMul(y.redISub(S)).redISub(o.redMul(v)),T=this.z.redMul(e.z).redMul(l);return this.curve.jpoint(S,A,T)};Ki.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,a=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),u=n.redSub(a),l=s.redSub(o);if(u.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var h=u.redSqr(),p=h.redMul(u),v=n.redMul(h),y=l.redSqr().redIAdd(p).redISub(v).redISub(v),S=l.redMul(v.redISub(y)).redISub(s.redMul(p)),A=this.z.redMul(u);return this.curve.jpoint(y,S,A)};Ki.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var a=this.curve.a,s=this.curve.tinv,o=this.x,u=this.y,l=this.z,h=l.redSqr().redSqr(),p=u.redAdd(u);for(r=0;r<e;r++){var v=o.redSqr(),y=p.redSqr(),S=y.redSqr(),A=v.redAdd(v).redIAdd(v).redIAdd(a.redMul(h)),T=o.redMul(y),I=A.redSqr().redISub(T.redAdd(T)),N=T.redISub(I),D=A.redMul(N);D=D.redIAdd(D).redISub(S);var C=p.redMul(l);r+1<e&&(h=h.redMul(S)),o=I,l=C,p=D}return this.curve.jpoint(o,p.redMul(s),l)};Ki.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Ki.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var a=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),u=this.x.redAdd(s).redSqr().redISub(a).redISub(o);u=u.redIAdd(u);var l=a.redAdd(a).redIAdd(a),h=l.redSqr().redISub(u).redISub(u),p=o.redIAdd(o);p=p.redIAdd(p),p=p.redIAdd(p),e=h,r=l.redMul(u.redISub(h)).redISub(p),n=this.y.redAdd(this.y)}else{var v=this.x.redSqr(),y=this.y.redSqr(),S=y.redSqr(),A=this.x.redAdd(y).redSqr().redISub(v).redISub(S);A=A.redIAdd(A);var T=v.redAdd(v).redIAdd(v),I=T.redSqr(),N=S.redIAdd(S);N=N.redIAdd(N),N=N.redIAdd(N),e=I.redISub(A).redISub(A),r=T.redMul(A.redISub(e)).redISub(N),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};Ki.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var a=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),u=this.x.redAdd(s).redSqr().redISub(a).redISub(o);u=u.redIAdd(u);var l=a.redAdd(a).redIAdd(a).redIAdd(this.curve.a),h=l.redSqr().redISub(u).redISub(u);e=h;var p=o.redIAdd(o);p=p.redIAdd(p),p=p.redIAdd(p),r=l.redMul(u.redISub(h)).redISub(p),n=this.y.redAdd(this.y)}else{var v=this.z.redSqr(),y=this.y.redSqr(),S=this.x.redMul(y),A=this.x.redSub(v).redMul(this.x.redAdd(v));A=A.redAdd(A).redIAdd(A);var T=S.redIAdd(S);T=T.redIAdd(T);var I=T.redAdd(T);e=A.redSqr().redISub(I),n=this.y.redAdd(this.z).redSqr().redISub(y).redISub(v);var N=y.redSqr();N=N.redIAdd(N),N=N.redIAdd(N),N=N.redIAdd(N),r=A.redMul(T.redISub(e)).redISub(N)}return this.curve.jpoint(e,r,n)};Ki.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,a=this.z,s=a.redSqr().redSqr(),o=r.redSqr(),u=n.redSqr(),l=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),h=r.redAdd(r);h=h.redIAdd(h);var p=h.redMul(u),v=l.redSqr().redISub(p.redAdd(p)),y=p.redISub(v),S=u.redSqr();S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var A=l.redMul(y).redISub(S),T=n.redAdd(n).redMul(a);return this.curve.jpoint(v,A,T)};Ki.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),a=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),u=this.x.redAdd(r).redSqr().redISub(e).redISub(a);u=u.redIAdd(u),u=u.redAdd(u).redIAdd(u),u=u.redISub(o);var l=u.redSqr(),h=a.redIAdd(a);h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var p=s.redIAdd(u).redSqr().redISub(o).redISub(l).redISub(h),v=r.redMul(p);v=v.redIAdd(v),v=v.redIAdd(v);var y=this.x.redMul(l).redISub(v);y=y.redIAdd(y),y=y.redIAdd(y);var S=this.y.redMul(p.redMul(h.redISub(p)).redISub(u.redMul(l)));S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var A=this.z.redAdd(u).redSqr().redISub(n).redISub(l);return this.curve.jpoint(y,S,A)};Ki.prototype.mul=function(e,r){return e=new ai(e,r),this.curve._wnafMul(this,e)};Ki.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var a=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(a)).cmpn(0)===0};Ki.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var a=e.clone(),s=this.curve.redN.redMul(r);;){if(a.iadd(this.curve.n),a.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};Ki.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Ki.prototype.isInfinity=function(){return this.z.cmpn(0)===0}});var BP=ne((Eet,FP)=>{"use strict";var up=wu(),CP=Et(),N_=wg(),Lye=es();function fp(t){N_.call(this,"mont",t),this.a=new up(t.a,16).toRed(this.red),this.b=new up(t.b,16).toRed(this.red),this.i4=new up(4).toRed(this.red).redInvm(),this.two=new up(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}CP(fp,N_);FP.exports=fp;fp.prototype.validate=function(e){var r=e.normalize().x,n=r.redSqr(),a=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),s=a.redSqrt();return s.redSqr().cmp(a)===0};function Oi(t,e,r){N_.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new up(e,16),this.z=new up(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}CP(Oi,N_.BasePoint);fp.prototype.decodePoint=function(e,r){return this.point(Lye.toArray(e,r),1)};fp.prototype.point=function(e,r){return new Oi(this,e,r)};fp.prototype.pointFromJSON=function(e){return Oi.fromJSON(this,e)};Oi.prototype.precompute=function(){};Oi.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Oi.fromJSON=function(e,r){return new Oi(e,r[0],r[1]||e.one)};Oi.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Oi.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Oi.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),n=this.x.redSub(this.z),a=n.redSqr(),s=r.redSub(a),o=r.redMul(a),u=s.redMul(a.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,u)};Oi.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Oi.prototype.diffAdd=function(e,r){var n=this.x.redAdd(this.z),a=this.x.redSub(this.z),s=e.x.redAdd(e.z),o=e.x.redSub(e.z),u=o.redMul(n),l=s.redMul(a),h=r.z.redMul(u.redAdd(l).redSqr()),p=r.x.redMul(u.redISub(l).redSqr());return this.curve.point(h,p)};Oi.prototype.mul=function(e){for(var r=e.clone(),n=this,a=this.curve.point(null,null),s=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var u=o.length-1;u>=0;u--)o[u]===0?(n=n.diffAdd(a,s),a=a.dbl()):(a=n.diffAdd(a,s),n=n.dbl());return a};Oi.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Oi.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Oi.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Oi.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Oi.prototype.getX=function(){return this.normalize(),this.x.fromRed()}});var qP=ne((Met,PP)=>{"use strict";var Pye=es(),sf=wu(),LP=Et(),I_=wg(),qye=Pye.assert;function _u(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,I_.call(this,"edwards",t),this.a=new sf(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new sf(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new sf(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),qye(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}LP(_u,I_);PP.exports=_u;_u.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};_u.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};_u.prototype.jpoint=function(e,r,n,a){return this.point(e,r,n,a)};_u.prototype.pointFromX=function(e,r){e=new sf(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),a=this.c2.redSub(this.a.redMul(n)),s=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=a.redMul(s.redInvm()),u=o.redSqrt();if(u.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var l=u.fromRed().isOdd();return(r&&!l||!r&&l)&&(u=u.redNeg()),this.point(e,u)};_u.prototype.pointFromY=function(e,r){e=new sf(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),a=n.redSub(this.c2),s=n.redMul(this.d).redMul(this.c2).redSub(this.a),o=a.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var u=o.redSqrt();if(u.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return u.fromRed().isOdd()!==r&&(u=u.redNeg()),this.point(u,e)};_u.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),n=e.y.redSqr(),a=r.redMul(this.a).redAdd(n),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return a.cmp(s)===0};function vn(t,e,r,n,a){I_.BasePoint.call(this,t,"projective"),e===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new sf(e,16),this.y=new sf(r,16),this.z=n?new sf(n,16):this.curve.one,this.t=a&&new sf(a,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}LP(vn,I_.BasePoint);_u.prototype.pointFromJSON=function(e){return vn.fromJSON(this,e)};_u.prototype.point=function(e,r,n,a){return new vn(this,e,r,n,a)};vn.fromJSON=function(e,r){return new vn(e,r[0],r[1],r[2])};vn.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};vn.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};vn.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var a=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),o=a.redAdd(r),u=o.redSub(n),l=a.redSub(r),h=s.redMul(u),p=o.redMul(l),v=s.redMul(l),y=u.redMul(o);return this.curve.point(h,p,y,v)};vn.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),a,s,o,u,l,h;if(this.curve.twisted){u=this.curve._mulA(r);var p=u.redAdd(n);this.zOne?(a=e.redSub(r).redSub(n).redMul(p.redSub(this.curve.two)),s=p.redMul(u.redSub(n)),o=p.redSqr().redSub(p).redSub(p)):(l=this.z.redSqr(),h=p.redSub(l).redISub(l),a=e.redSub(r).redISub(n).redMul(h),s=p.redMul(u.redSub(n)),o=p.redMul(h))}else u=r.redAdd(n),l=this.curve._mulC(this.z).redSqr(),h=u.redSub(l).redSub(l),a=this.curve._mulC(e.redISub(u)).redMul(h),s=this.curve._mulC(u).redMul(r.redISub(n)),o=u.redMul(h);return this.curve.point(a,s,o)};vn.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};vn.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),a=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),o=n.redSub(r),u=s.redSub(a),l=s.redAdd(a),h=n.redAdd(r),p=o.redMul(u),v=l.redMul(h),y=o.redMul(h),S=u.redMul(l);return this.curve.point(p,v,S,y)};vn.prototype._projAdd=function(e){var r=this.z.redMul(e.z),n=r.redSqr(),a=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(a).redMul(s),u=n.redSub(o),l=n.redAdd(o),h=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(a).redISub(s),p=r.redMul(u).redMul(h),v,y;return this.curve.twisted?(v=r.redMul(l).redMul(s.redSub(this.curve._mulA(a))),y=u.redMul(l)):(v=r.redMul(l).redMul(s.redSub(a)),y=this.curve._mulC(u).redMul(l)),this.curve.point(p,v,y)};vn.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};vn.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};vn.prototype.mulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!1)};vn.prototype.jmulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!0)};vn.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};vn.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};vn.prototype.getX=function(){return this.normalize(),this.x.fromRed()};vn.prototype.getY=function(){return this.normalize(),this.y.fromRed()};vn.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};vn.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=e.clone(),a=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(a),this.x.cmp(r)===0)return!0}};vn.prototype.toP=vn.prototype.normalize;vn.prototype.mixedAdd=vn.prototype.add});var KT=ne($P=>{"use strict";var D_=$P;D_.base=wg();D_.short=RP();D_.mont=BP();D_.edwards=qP()});var Io=ne(fn=>{"use strict";var $ye=Qa(),zye=Et();fn.inherits=zye;function jye(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function Uye(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),a=0;a<t.length;a+=2)r.push(parseInt(t[a]+t[a+1],16))}else for(var n=0,a=0;a<t.length;a++){var s=t.charCodeAt(a);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):jye(t,a)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++a)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(a=0;a<t.length;a++)r[a]=t[a]|0;return r}fn.toArray=Uye;function Vye(t){for(var e="",r=0;r<t.length;r++)e+=jP(t[r].toString(16));return e}fn.toHex=Vye;function zP(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}fn.htonl=zP;function Wye(t,e){for(var r="",n=0;n<t.length;n++){var a=t[n];e==="little"&&(a=zP(a)),r+=UP(a.toString(16))}return r}fn.toHex32=Wye;function jP(t){return t.length===1?"0"+t:t}fn.zero2=jP;function UP(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}fn.zero8=UP;function Gye(t,e,r,n){var a=r-e;$ye(a%4===0);for(var s=new Array(a/4),o=0,u=e;o<s.length;o++,u+=4){var l;n==="big"?l=t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:l=t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],s[o]=l>>>0}return s}fn.join32=Gye;function Hye(t,e){for(var r=new Array(t.length*4),n=0,a=0;n<t.length;n++,a+=4){var s=t[n];e==="big"?(r[a]=s>>>24,r[a+1]=s>>>16&255,r[a+2]=s>>>8&255,r[a+3]=s&255):(r[a+3]=s>>>24,r[a+2]=s>>>16&255,r[a+1]=s>>>8&255,r[a]=s&255)}return r}fn.split32=Hye;function Kye(t,e){return t>>>e|t<<32-e}fn.rotr32=Kye;function Zye(t,e){return t<<e|t>>>32-e}fn.rotl32=Zye;function Jye(t,e){return t+e>>>0}fn.sum32=Jye;function Yye(t,e,r){return t+e+r>>>0}fn.sum32_3=Yye;function Xye(t,e,r,n){return t+e+r+n>>>0}fn.sum32_4=Xye;function Qye(t,e,r,n,a){return t+e+r+n+a>>>0}fn.sum32_5=Qye;function e1e(t,e,r,n){var a=t[e],s=t[e+1],o=n+s>>>0,u=(o<n?1:0)+r+a;t[e]=u>>>0,t[e+1]=o}fn.sum64=e1e;function t1e(t,e,r,n){var a=e+n>>>0,s=(a<e?1:0)+t+r;return s>>>0}fn.sum64_hi=t1e;function r1e(t,e,r,n){var a=e+n;return a>>>0}fn.sum64_lo=r1e;function n1e(t,e,r,n,a,s,o,u){var l=0,h=e;h=h+n>>>0,l+=h<e?1:0,h=h+s>>>0,l+=h<s?1:0,h=h+u>>>0,l+=h<u?1:0;var p=t+r+a+o+l;return p>>>0}fn.sum64_4_hi=n1e;function i1e(t,e,r,n,a,s,o,u){var l=e+n+s+u;return l>>>0}fn.sum64_4_lo=i1e;function a1e(t,e,r,n,a,s,o,u,l,h){var p=0,v=e;v=v+n>>>0,p+=v<e?1:0,v=v+s>>>0,p+=v<s?1:0,v=v+u>>>0,p+=v<u?1:0,v=v+h>>>0,p+=v<h?1:0;var y=t+r+a+o+l+p;return y>>>0}fn.sum64_5_hi=a1e;function s1e(t,e,r,n,a,s,o,u,l,h){var p=e+n+s+u+h;return p>>>0}fn.sum64_5_lo=s1e;function o1e(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}fn.rotr64_hi=o1e;function u1e(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}fn.rotr64_lo=u1e;function f1e(t,e,r){return t>>>r}fn.shr64_hi=f1e;function l1e(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}fn.shr64_lo=l1e});var lp=ne(WP=>{"use strict";var VP=Io(),c1e=Qa();function O_(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}WP.BlockHash=O_;O_.prototype.update=function(e,r){if(e=VP.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=VP.join32(e,0,e.length-n,this.endian);for(var a=0;a<e.length;a+=this._delta32)this._update(e,a,a+this._delta32)}return this};O_.prototype.digest=function(e){return this.update(this._pad()),c1e(this.pending===null),this._digest(e)};O_.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,a=new Array(n+this.padLength);a[0]=128;for(var s=1;s<n;s++)a[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)a[s++]=0;a[s++]=0,a[s++]=0,a[s++]=0,a[s++]=0,a[s++]=e>>>24&255,a[s++]=e>>>16&255,a[s++]=e>>>8&255,a[s++]=e&255}else for(a[s++]=e&255,a[s++]=e>>>8&255,a[s++]=e>>>16&255,a[s++]=e>>>24&255,a[s++]=0,a[s++]=0,a[s++]=0,a[s++]=0,o=8;o<this.padLength;o++)a[s++]=0;return a}});var ZT=ne(of=>{"use strict";var h1e=Io(),xu=h1e.rotr32;function d1e(t,e,r,n){if(t===0)return GP(e,r,n);if(t===1||t===3)return KP(e,r,n);if(t===2)return HP(e,r,n)}of.ft_1=d1e;function GP(t,e,r){return t&e^~t&r}of.ch32=GP;function HP(t,e,r){return t&e^t&r^e&r}of.maj32=HP;function KP(t,e,r){return t^e^r}of.p32=KP;function p1e(t){return xu(t,2)^xu(t,13)^xu(t,22)}of.s0_256=p1e;function m1e(t){return xu(t,6)^xu(t,11)^xu(t,25)}of.s1_256=m1e;function v1e(t){return xu(t,7)^xu(t,18)^t>>>3}of.g0_256=v1e;function g1e(t){return xu(t,17)^xu(t,19)^t>>>10}of.g1_256=g1e});var YP=ne((Iet,JP)=>{"use strict";var cp=Io(),y1e=lp(),b1e=ZT(),JT=cp.rotl32,_g=cp.sum32,w1e=cp.sum32_5,_1e=b1e.ft_1,ZP=y1e.BlockHash,x1e=[1518500249,1859775393,2400959708,3395469782];function Su(){if(!(this instanceof Su))return new Su;ZP.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}cp.inherits(Su,ZP);JP.exports=Su;Su.blockSize=512;Su.outSize=160;Su.hmacStrength=80;Su.padLength=64;Su.prototype._update=function(e,r){for(var n=this.W,a=0;a<16;a++)n[a]=e[r+a];for(;a<n.length;a++)n[a]=JT(n[a-3]^n[a-8]^n[a-14]^n[a-16],1);var s=this.h[0],o=this.h[1],u=this.h[2],l=this.h[3],h=this.h[4];for(a=0;a<n.length;a++){var p=~~(a/20),v=w1e(JT(s,5),_1e(p,o,u,l),h,n[a],x1e[p]);h=l,l=u,u=JT(o,30),o=s,s=v}this.h[0]=_g(this.h[0],s),this.h[1]=_g(this.h[1],o),this.h[2]=_g(this.h[2],u),this.h[3]=_g(this.h[3],l),this.h[4]=_g(this.h[4],h)};Su.prototype._digest=function(e){return e==="hex"?cp.toHex32(this.h,"big"):cp.split32(this.h,"big")}});var YT=ne((Det,QP)=>{"use strict";var hp=Io(),S1e=lp(),dp=ZT(),E1e=Qa(),Do=hp.sum32,M1e=hp.sum32_4,A1e=hp.sum32_5,k1e=dp.ch32,T1e=dp.maj32,N1e=dp.s0_256,I1e=dp.s1_256,D1e=dp.g0_256,O1e=dp.g1_256,XP=S1e.BlockHash,R1e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Eu(){if(!(this instanceof Eu))return new Eu;XP.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=R1e,this.W=new Array(64)}hp.inherits(Eu,XP);QP.exports=Eu;Eu.blockSize=512;Eu.outSize=256;Eu.hmacStrength=192;Eu.padLength=64;Eu.prototype._update=function(e,r){for(var n=this.W,a=0;a<16;a++)n[a]=e[r+a];for(;a<n.length;a++)n[a]=M1e(O1e(n[a-2]),n[a-7],D1e(n[a-15]),n[a-16]);var s=this.h[0],o=this.h[1],u=this.h[2],l=this.h[3],h=this.h[4],p=this.h[5],v=this.h[6],y=this.h[7];for(E1e(this.k.length===n.length),a=0;a<n.length;a++){var S=A1e(y,I1e(h),k1e(h,p,v),this.k[a],n[a]),A=Do(N1e(s),T1e(s,o,u));y=v,v=p,p=h,h=Do(l,S),l=u,u=o,o=s,s=Do(S,A)}this.h[0]=Do(this.h[0],s),this.h[1]=Do(this.h[1],o),this.h[2]=Do(this.h[2],u),this.h[3]=Do(this.h[3],l),this.h[4]=Do(this.h[4],h),this.h[5]=Do(this.h[5],p),this.h[6]=Do(this.h[6],v),this.h[7]=Do(this.h[7],y)};Eu.prototype._digest=function(e){return e==="hex"?hp.toHex32(this.h,"big"):hp.split32(this.h,"big")}});var rq=ne((Oet,tq)=>{"use strict";var XT=Io(),eq=YT();function uf(){if(!(this instanceof uf))return new uf;eq.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}XT.inherits(uf,eq);tq.exports=uf;uf.blockSize=512;uf.outSize=224;uf.hmacStrength=192;uf.padLength=64;uf.prototype._digest=function(e){return e==="hex"?XT.toHex32(this.h.slice(0,7),"big"):XT.split32(this.h.slice(0,7),"big")}});var t6=ne((Ret,sq)=>{"use strict";var Ba=Io(),C1e=lp(),F1e=Qa(),Mu=Ba.rotr64_hi,Au=Ba.rotr64_lo,nq=Ba.shr64_hi,iq=Ba.shr64_lo,_l=Ba.sum64,QT=Ba.sum64_hi,e6=Ba.sum64_lo,B1e=Ba.sum64_4_hi,L1e=Ba.sum64_4_lo,P1e=Ba.sum64_5_hi,q1e=Ba.sum64_5_lo,aq=C1e.BlockHash,$1e=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Oo(){if(!(this instanceof Oo))return new Oo;aq.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=$1e,this.W=new Array(160)}Ba.inherits(Oo,aq);sq.exports=Oo;Oo.blockSize=1024;Oo.outSize=512;Oo.hmacStrength=192;Oo.padLength=128;Oo.prototype._prepareBlock=function(e,r){for(var n=this.W,a=0;a<32;a++)n[a]=e[r+a];for(;a<n.length;a+=2){var s=Y1e(n[a-4],n[a-3]),o=X1e(n[a-4],n[a-3]),u=n[a-14],l=n[a-13],h=Z1e(n[a-30],n[a-29]),p=J1e(n[a-30],n[a-29]),v=n[a-32],y=n[a-31];n[a]=B1e(s,o,u,l,h,p,v,y),n[a+1]=L1e(s,o,u,l,h,p,v,y)}};Oo.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,a=this.h[0],s=this.h[1],o=this.h[2],u=this.h[3],l=this.h[4],h=this.h[5],p=this.h[6],v=this.h[7],y=this.h[8],S=this.h[9],A=this.h[10],T=this.h[11],I=this.h[12],N=this.h[13],D=this.h[14],C=this.h[15];F1e(this.k.length===n.length);for(var L=0;L<n.length;L+=2){var z=D,$=C,G=H1e(y,S),j=K1e(y,S),K=z1e(y,S,A,T,I,N),M=j1e(y,S,A,T,I,N),f=this.k[L],d=this.k[L+1],g=n[L],m=n[L+1],b=P1e(z,$,G,j,K,M,f,d,g,m),E=q1e(z,$,G,j,K,M,f,d,g,m);z=W1e(a,s),$=G1e(a,s),G=U1e(a,s,o,u,l,h),j=V1e(a,s,o,u,l,h);var k=QT(z,$,G,j),w=e6(z,$,G,j);D=I,C=N,I=A,N=T,A=y,T=S,y=QT(p,v,b,E),S=e6(v,v,b,E),p=l,v=h,l=o,h=u,o=a,u=s,a=QT(b,E,k,w),s=e6(b,E,k,w)}_l(this.h,0,a,s),_l(this.h,2,o,u),_l(this.h,4,l,h),_l(this.h,6,p,v),_l(this.h,8,y,S),_l(this.h,10,A,T),_l(this.h,12,I,N),_l(this.h,14,D,C)};Oo.prototype._digest=function(e){return e==="hex"?Ba.toHex32(this.h,"big"):Ba.split32(this.h,"big")};function z1e(t,e,r,n,a){var s=t&r^~t&a;return s<0&&(s+=4294967296),s}function j1e(t,e,r,n,a,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function U1e(t,e,r,n,a){var s=t&r^t&a^r&a;return s<0&&(s+=4294967296),s}function V1e(t,e,r,n,a,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function W1e(t,e){var r=Mu(t,e,28),n=Mu(e,t,2),a=Mu(e,t,7),s=r^n^a;return s<0&&(s+=4294967296),s}function G1e(t,e){var r=Au(t,e,28),n=Au(e,t,2),a=Au(e,t,7),s=r^n^a;return s<0&&(s+=4294967296),s}function H1e(t,e){var r=Mu(t,e,14),n=Mu(t,e,18),a=Mu(e,t,9),s=r^n^a;return s<0&&(s+=4294967296),s}function K1e(t,e){var r=Au(t,e,14),n=Au(t,e,18),a=Au(e,t,9),s=r^n^a;return s<0&&(s+=4294967296),s}function Z1e(t,e){var r=Mu(t,e,1),n=Mu(t,e,8),a=nq(t,e,7),s=r^n^a;return s<0&&(s+=4294967296),s}function J1e(t,e){var r=Au(t,e,1),n=Au(t,e,8),a=iq(t,e,7),s=r^n^a;return s<0&&(s+=4294967296),s}function Y1e(t,e){var r=Mu(t,e,19),n=Mu(e,t,29),a=nq(t,e,6),s=r^n^a;return s<0&&(s+=4294967296),s}function X1e(t,e){var r=Au(t,e,19),n=Au(e,t,29),a=iq(t,e,6),s=r^n^a;return s<0&&(s+=4294967296),s}});var fq=ne((Cet,uq)=>{"use strict";var r6=Io(),oq=t6();function ff(){if(!(this instanceof ff))return new ff;oq.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r6.inherits(ff,oq);uq.exports=ff;ff.blockSize=1024;ff.outSize=384;ff.hmacStrength=192;ff.padLength=128;ff.prototype._digest=function(e){return e==="hex"?r6.toHex32(this.h.slice(0,12),"big"):r6.split32(this.h.slice(0,12),"big")}});var lq=ne(pp=>{"use strict";pp.sha1=YP();pp.sha224=rq();pp.sha256=YT();pp.sha384=fq();pp.sha512=t6()});var vq=ne(mq=>{"use strict";var Yc=Io(),Q1e=lp(),R_=Yc.rotl32,cq=Yc.sum32,xg=Yc.sum32_3,hq=Yc.sum32_4,pq=Q1e.BlockHash;function ku(){if(!(this instanceof ku))return new ku;pq.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Yc.inherits(ku,pq);mq.ripemd160=ku;ku.blockSize=512;ku.outSize=160;ku.hmacStrength=192;ku.padLength=64;ku.prototype._update=function(e,r){for(var n=this.h[0],a=this.h[1],s=this.h[2],o=this.h[3],u=this.h[4],l=n,h=a,p=s,v=o,y=u,S=0;S<80;S++){var A=cq(R_(hq(n,dq(S,a,s,o),e[rbe[S]+r],ebe(S)),ibe[S]),u);n=u,u=o,o=R_(s,10),s=a,a=A,A=cq(R_(hq(l,dq(79-S,h,p,v),e[nbe[S]+r],tbe(S)),abe[S]),y),l=y,y=v,v=R_(p,10),p=h,h=A}A=xg(this.h[1],s,v),this.h[1]=xg(this.h[2],o,y),this.h[2]=xg(this.h[3],u,l),this.h[3]=xg(this.h[4],n,h),this.h[4]=xg(this.h[0],a,p),this.h[0]=A};ku.prototype._digest=function(e){return e==="hex"?Yc.toHex32(this.h,"little"):Yc.split32(this.h,"little")};function dq(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function ebe(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function tbe(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var rbe=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],nbe=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],ibe=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],abe=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]});var yq=ne((Let,gq)=>{"use strict";var sbe=Io(),obe=Qa();function mp(t,e,r){if(!(this instanceof mp))return new mp(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(sbe.toArray(e,r))}gq.exports=mp;mp.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),obe(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};mp.prototype.update=function(e,r){return this.inner.update(e,r),this};mp.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}});var C_=ne(bq=>{var Zi=bq;Zi.utils=Io();Zi.common=lp();Zi.sha=lq();Zi.ripemd=vq();Zi.hmac=yq();Zi.sha1=Zi.sha.sha1;Zi.sha256=Zi.sha.sha256;Zi.sha224=Zi.sha.sha224;Zi.sha384=Zi.sha.sha384;Zi.sha512=Zi.sha.sha512;Zi.ripemd160=Zi.ripemd.ripemd160});var _q=ne((qet,wq)=>{wq.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}});var F_=ne(Eq=>{"use strict";var i6=Eq,xl=C_(),n6=KT(),ube=es(),xq=ube.assert;function Sq(t){t.type==="short"?this.curve=new n6.short(t):t.type==="edwards"?this.curve=new n6.edwards(t):this.curve=new n6.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,xq(this.g.validate(),"Invalid curve"),xq(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}i6.PresetCurve=Sq;function Sl(t,e){Object.defineProperty(i6,t,{configurable:!0,enumerable:!0,get:function(){var r=new Sq(e);return Object.defineProperty(i6,t,{configurable:!0,enumerable:!0,value:r}),r}})}Sl("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:xl.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});Sl("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:xl.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});Sl("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:xl.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});Sl("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:xl.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});Sl("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:xl.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});Sl("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:xl.sha256,gRed:!1,g:["9"]});Sl("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:xl.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var a6;try{a6=_q()}catch{a6=void 0}Sl("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:xl.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a6]})});var kq=ne((zet,Aq)=>{"use strict";var fbe=C_(),Xc=GT(),Mq=Qa();function El(t){if(!(this instanceof El))return new El(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Xc.toArray(t.entropy,t.entropyEnc||"hex"),r=Xc.toArray(t.nonce,t.nonceEnc||"hex"),n=Xc.toArray(t.pers,t.persEnc||"hex");Mq(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}Aq.exports=El;El.prototype._init=function(e,r,n){var a=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(a),this._reseed=1,this.reseedInterval=281474976710656};El.prototype._hmac=function(){return new fbe.hmac(this.hash,this.K)};El.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};El.prototype.reseed=function(e,r,n,a){typeof r!="string"&&(a=n,n=r,r=null),e=Xc.toArray(e,r),n=Xc.toArray(n,a),Mq(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};El.prototype.generate=function(e,r,n,a){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(a=n,n=r,r=null),n&&(n=Xc.toArray(n,a||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,Xc.encode(o,r)}});var Nq=ne((jet,Tq)=>{"use strict";var lbe=wu(),cbe=es(),s6=cbe.assert;function oa(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}Tq.exports=oa;oa.fromPublic=function(e,r,n){return r instanceof oa?r:new oa(e,{pub:r,pubEnc:n})};oa.fromPrivate=function(e,r,n){return r instanceof oa?r:new oa(e,{priv:r,privEnc:n})};oa.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};oa.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};oa.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};oa.prototype._importPrivate=function(e,r){this.priv=new lbe(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};oa.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?s6(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&s6(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};oa.prototype.derive=function(e){return e.validate()||s6(e.validate(),"public point not validated"),e.mul(this.priv).getX()};oa.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};oa.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};oa.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}});var Oq=ne((Uet,Dq)=>{"use strict";var B_=wu(),f6=es(),hbe=f6.assert;function L_(t,e){if(t instanceof L_)return t;this._importDER(t,e)||(hbe(t.r&&t.s,"Signature without r or s"),this.r=new B_(t.r,16),this.s=new B_(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}Dq.exports=L_;function dbe(){this.place=0}function o6(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var a=0,s=0,o=e.place;s<n;s++,o++)a<<=8,a|=t[o],a>>>=0;return a<=127?!1:(e.place=o,a)}function Iq(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}L_.prototype._importDER=function(e,r){e=f6.toArray(e,r);var n=new dbe;if(e[n.place++]!==48)return!1;var a=o6(e,n);if(a===!1||a+n.place!==e.length||e[n.place++]!==2)return!1;var s=o6(e,n);if(s===!1)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var u=o6(e,n);if(u===!1||e.length!==u+n.place)return!1;var l=e.slice(n.place,u+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(l[0]===0)if(l[1]&128)l=l.slice(1);else return!1;return this.r=new B_(o),this.s=new B_(l),this.recoveryParam=null,!0};function u6(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}L_.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=Iq(r),n=Iq(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var a=[2];u6(a,r.length),a=a.concat(r),a.push(2),u6(a,n.length);var s=a.concat(n),o=[48];return u6(o,s.length),o=o.concat(s),f6.encode(o,e)}});var Bq=ne((Vet,Fq)=>{"use strict";var Qc=wu(),Rq=kq(),pbe=es(),l6=F_(),mbe=n_(),Cq=pbe.assert,c6=Nq(),P_=Oq();function Cs(t){if(!(this instanceof Cs))return new Cs(t);typeof t=="string"&&(Cq(Object.prototype.hasOwnProperty.call(l6,t),"Unknown curve "+t),t=l6[t]),t instanceof l6.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}Fq.exports=Cs;Cs.prototype.keyPair=function(e){return new c6(this,e)};Cs.prototype.keyFromPrivate=function(e,r){return c6.fromPrivate(this,e,r)};Cs.prototype.keyFromPublic=function(e,r){return c6.fromPublic(this,e,r)};Cs.prototype.genKeyPair=function(e){e||(e={});for(var r=new Rq({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||mbe(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),a=this.n.sub(new Qc(2));;){var s=new Qc(r.generate(n));if(!(s.cmp(a)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Cs.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};Cs.prototype.sign=function(e,r,n,a){typeof n=="object"&&(a=n,n=null),a||(a={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new Qc(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),u=e.toArray("be",s),l=new Rq({hash:this.hash,entropy:o,nonce:u,pers:a.pers,persEnc:a.persEnc||"utf8"}),h=this.n.sub(new Qc(1)),p=0;;p++){var v=a.k?a.k(p):new Qc(l.generate(this.n.byteLength()));if(v=this._truncateToN(v,!0),!(v.cmpn(1)<=0||v.cmp(h)>=0)){var y=this.g.mul(v);if(!y.isInfinity()){var S=y.getX(),A=S.umod(this.n);if(A.cmpn(0)!==0){var T=v.invm(this.n).mul(A.mul(r.getPrivate()).iadd(e));if(T=T.umod(this.n),T.cmpn(0)!==0){var I=(y.getY().isOdd()?1:0)|(S.cmp(A)!==0?2:0);return a.canonical&&T.cmp(this.nh)>0&&(T=this.n.sub(T),I^=1),new P_({r:A,s:T,recoveryParam:I})}}}}}};Cs.prototype.verify=function(e,r,n,a){e=this._truncateToN(new Qc(e,16)),n=this.keyFromPublic(n,a),r=new P_(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var u=o.invm(this.n),l=u.mul(e).umod(this.n),h=u.mul(s).umod(this.n),p;return this.curve._maxwellTrick?(p=this.g.jmulAdd(l,n.getPublic(),h),p.isInfinity()?!1:p.eqXToP(s)):(p=this.g.mulAdd(l,n.getPublic(),h),p.isInfinity()?!1:p.getX().umod(this.n).cmp(s)===0)};Cs.prototype.recoverPubKey=function(t,e,r,n){Cq((3&r)===r,"The recovery param is more than two bits"),e=new P_(e,n);var a=this.n,s=new Qc(t),o=e.r,u=e.s,l=r&1,h=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");h?o=this.curve.pointFromX(o.add(this.curve.n),l):o=this.curve.pointFromX(o,l);var p=e.r.invm(a),v=a.sub(s).mul(p).umod(a),y=u.mul(p).umod(a);return this.g.mulAdd(v,o,y)};Cs.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new P_(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var a=0;a<4;a++){var s;try{s=this.recoverPubKey(t,e,a)}catch{continue}if(s.eq(r))return a}throw new Error("Unable to find valid recovery factor")}});var $q=ne((Wet,qq)=>{"use strict";var Sg=es(),Pq=Sg.assert,Lq=Sg.parseBytes,vp=Sg.cachedProperty;function Ri(t,e){this.eddsa=t,this._secret=Lq(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=Lq(e.pub)}Ri.fromPublic=function(e,r){return r instanceof Ri?r:new Ri(e,{pub:r})};Ri.fromSecret=function(e,r){return r instanceof Ri?r:new Ri(e,{secret:r})};Ri.prototype.secret=function(){return this._secret};vp(Ri,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});vp(Ri,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});vp(Ri,"privBytes",function(){var e=this.eddsa,r=this.hash(),n=e.encodingLength-1,a=r.slice(0,e.encodingLength);return a[0]&=248,a[n]&=127,a[n]|=64,a});vp(Ri,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});vp(Ri,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});vp(Ri,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Ri.prototype.sign=function(e){return Pq(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Ri.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};Ri.prototype.getSecret=function(e){return Pq(this._secret,"KeyPair is public only"),Sg.encode(this.secret(),e)};Ri.prototype.getPublic=function(e){return Sg.encode(this.pubBytes(),e)};qq.exports=Ri});var jq=ne((Get,zq)=>{"use strict";var vbe=wu(),q_=es(),gbe=q_.assert,$_=q_.cachedProperty,ybe=q_.parseBytes;function eh(t,e){this.eddsa=t,typeof e!="object"&&(e=ybe(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),gbe(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof vbe&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}$_(eh,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});$_(eh,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});$_(eh,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});$_(eh,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});eh.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};eh.prototype.toHex=function(){return q_.encode(this.toBytes(),"hex").toUpperCase()};zq.exports=eh});var Hq=ne((Het,Gq)=>{"use strict";var bbe=C_(),wbe=F_(),gp=es(),_be=gp.assert,Vq=gp.parseBytes,Wq=$q(),Uq=jq();function La(t){if(_be(t==="ed25519","only tested with ed25519 so far"),!(this instanceof La))return new La(t);t=wbe[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=bbe.sha512}Gq.exports=La;La.prototype.sign=function(e,r){e=Vq(e);var n=this.keyFromSecret(r),a=this.hashInt(n.messagePrefix(),e),s=this.g.mul(a),o=this.encodePoint(s),u=this.hashInt(o,n.pubBytes(),e).mul(n.priv()),l=a.add(u).umod(this.curve.n);return this.makeSignature({R:s,S:l,Rencoded:o})};La.prototype.verify=function(e,r,n){e=Vq(e),r=this.makeSignature(r);var a=this.keyFromPublic(n),s=this.hashInt(r.Rencoded(),a.pubBytes(),e),o=this.g.mul(r.S()),u=r.R().add(a.pub().mul(s));return u.eq(o)};La.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return gp.intFromLE(e.digest()).umod(this.curve.n)};La.prototype.keyFromPublic=function(e){return Wq.fromPublic(this,e)};La.prototype.keyFromSecret=function(e){return Wq.fromSecret(this,e)};La.prototype.makeSignature=function(e){return e instanceof Uq?e:new Uq(this,e)};La.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};La.prototype.decodePoint=function(e){e=gp.parseBytes(e);var r=e.length-1,n=e.slice(0,r).concat(e[r]&-129),a=(e[r]&128)!==0,s=gp.intFromLE(n);return this.curve.pointFromY(s,a)};La.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};La.prototype.decodeInt=function(e){return gp.intFromLE(e)};La.prototype.isPoint=function(e){return e instanceof this.pointClass}});var z_=ne(Kq=>{"use strict";var th=Kq;th.version=MP().version;th.utils=es();th.rand=n_();th.curve=KT();th.curves=F_();th.ec=Bq();th.eddsa=Hq()});var d6=ne((Zq,h6)=>{(function(t,e){"use strict";function r(M,f){if(!M)throw new Error(f||"Assertion failed")}function n(M,f){M.super_=f;var d=function(){};d.prototype=f.prototype,M.prototype=new d,M.prototype.constructor=M}function a(M,f,d){if(a.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((f==="le"||f==="be")&&(d=f,f=10),this._init(M||0,f||10,d||"be"))}typeof t=="object"?t.exports=a:e.BN=a,a.BN=a,a.wordSize=26;var s;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?s=window.Buffer:s=mn().Buffer}catch{}a.isBN=function(f){return f instanceof a?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===a.wordSize&&Array.isArray(f.words)},a.max=function(f,d){return f.cmp(d)>0?f:d},a.min=function(f,d){return f.cmp(d)<0?f:d},a.prototype._init=function(f,d,g){if(typeof f=="number")return this._initNumber(f,d,g);if(typeof f=="object")return this._initArray(f,d,g);d==="hex"&&(d=16),r(d===(d|0)&&d>=2&&d<=36),f=f.toString().replace(/\s+/g,"");var m=0;f[0]==="-"&&(m++,this.negative=1),m<f.length&&(d===16?this._parseHex(f,m,g):(this._parseBase(f,d,m),g==="le"&&this._initArray(this.toArray(),d,g)))},a.prototype._initNumber=function(f,d,g){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(r(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),d,g)},a.prototype._initArray=function(f,d,g){if(r(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var b,E,k=0;if(g==="be")for(m=f.length-1,b=0;m>=0;m-=3)E=f[m]|f[m-1]<<8|f[m-2]<<16,this.words[b]|=E<<k&67108863,this.words[b+1]=E>>>26-k&67108863,k+=24,k>=26&&(k-=26,b++);else if(g==="le")for(m=0,b=0;m<f.length;m+=3)E=f[m]|f[m+1]<<8|f[m+2]<<16,this.words[b]|=E<<k&67108863,this.words[b+1]=E>>>26-k&67108863,k+=24,k>=26&&(k-=26,b++);return this.strip()};function o(M,f){var d=M.charCodeAt(f);return d>=65&&d<=70?d-55:d>=97&&d<=102?d-87:d-48&15}function u(M,f,d){var g=o(M,d);return d-1>=f&&(g|=o(M,d-1)<<4),g}a.prototype._parseHex=function(f,d,g){this.length=Math.ceil((f.length-d)/6),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var b=0,E=0,k;if(g==="be")for(m=f.length-1;m>=d;m-=2)k=u(f,d,m)<<b,this.words[E]|=k&67108863,b>=18?(b-=18,E+=1,this.words[E]|=k>>>26):b+=8;else{var w=f.length-d;for(m=w%2===0?d+1:d;m<f.length;m+=2)k=u(f,d,m)<<b,this.words[E]|=k&67108863,b>=18?(b-=18,E+=1,this.words[E]|=k>>>26):b+=8}this.strip()};function l(M,f,d,g){for(var m=0,b=Math.min(M.length,d),E=f;E<b;E++){var k=M.charCodeAt(E)-48;m*=g,k>=49?m+=k-49+10:k>=17?m+=k-17+10:m+=k}return m}a.prototype._parseBase=function(f,d,g){this.words=[0],this.length=1;for(var m=0,b=1;b<=67108863;b*=d)m++;m--,b=b/d|0;for(var E=f.length-g,k=E%m,w=Math.min(E,E-k)+g,c=0,_=g;_<w;_+=m)c=l(f,_,_+m,d),this.imuln(b),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(k!==0){var R=1;for(c=l(f,_,f.length,d),_=0;_<k;_++)R*=d;this.imuln(R),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},a.prototype.copy=function(f){f.words=new Array(this.length);for(var d=0;d<this.length;d++)f.words[d]=this.words[d];f.length=this.length,f.negative=this.negative,f.red=this.red},a.prototype.clone=function(){var f=new a(null);return this.copy(f),f},a.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(f,d){f=f||10,d=d|0||1;var g;if(f===16||f==="hex"){g="";for(var m=0,b=0,E=0;E<this.length;E++){var k=this.words[E],w=((k<<m|b)&16777215).toString(16);b=k>>>24-m&16777215,b!==0||E!==this.length-1?g=h[6-w.length]+w+g:g=w+g,m+=2,m>=26&&(m-=26,E--)}for(b!==0&&(g=b.toString(16)+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(f===(f|0)&&f>=2&&f<=36){var c=p[f],_=v[f];g="";var R=this.clone();for(R.negative=0;!R.isZero();){var O=R.modn(_).toString(f);R=R.idivn(_),R.isZero()?g=O+g:g=h[c-O.length]+O+g}for(this.isZero()&&(g="0"+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}r(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(f,d){return r(typeof s!="undefined"),this.toArrayLike(s,f,d)},a.prototype.toArray=function(f,d){return this.toArrayLike(Array,f,d)},a.prototype.toArrayLike=function(f,d,g){var m=this.byteLength(),b=g||Math.max(1,m);r(m<=b,"byte array longer than desired length"),r(b>0,"Requested array length <= 0"),this.strip();var E=d==="le",k=new f(b),w,c,_=this.clone();if(E){for(c=0;!_.isZero();c++)w=_.andln(255),_.iushrn(8),k[c]=w;for(;c<b;c++)k[c]=0}else{for(c=0;c<b-m;c++)k[c]=0;for(c=0;!_.isZero();c++)w=_.andln(255),_.iushrn(8),k[b-c-1]=w}return k},Math.clz32?a.prototype._countBits=function(f){return 32-Math.clz32(f)}:a.prototype._countBits=function(f){var d=f,g=0;return d>=4096&&(g+=13,d>>>=13),d>=64&&(g+=7,d>>>=7),d>=8&&(g+=4,d>>>=4),d>=2&&(g+=2,d>>>=2),g+d},a.prototype._zeroBits=function(f){if(f===0)return 26;var d=f,g=0;return(d&8191)===0&&(g+=13,d>>>=13),(d&127)===0&&(g+=7,d>>>=7),(d&15)===0&&(g+=4,d>>>=4),(d&3)===0&&(g+=2,d>>>=2),(d&1)===0&&g++,g},a.prototype.bitLength=function(){var f=this.words[this.length-1],d=this._countBits(f);return(this.length-1)*26+d};function y(M){for(var f=new Array(M.bitLength()),d=0;d<f.length;d++){var g=d/26|0,m=d%26;f[d]=(M.words[g]&1<<m)>>>m}return f}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,d=0;d<this.length;d++){var g=this._zeroBits(this.words[d]);if(f+=g,g!==26)break}return f},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},a.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var d=0;d<f.length;d++)this.words[d]=this.words[d]|f.words[d];return this.strip()},a.prototype.ior=function(f){return r((this.negative|f.negative)===0),this.iuor(f)},a.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},a.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},a.prototype.iuand=function(f){var d;this.length>f.length?d=f:d=this;for(var g=0;g<d.length;g++)this.words[g]=this.words[g]&f.words[g];return this.length=d.length,this.strip()},a.prototype.iand=function(f){return r((this.negative|f.negative)===0),this.iuand(f)},a.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},a.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},a.prototype.iuxor=function(f){var d,g;this.length>f.length?(d=this,g=f):(d=f,g=this);for(var m=0;m<g.length;m++)this.words[m]=d.words[m]^g.words[m];if(this!==d)for(;m<d.length;m++)this.words[m]=d.words[m];return this.length=d.length,this.strip()},a.prototype.ixor=function(f){return r((this.negative|f.negative)===0),this.iuxor(f)},a.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},a.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},a.prototype.inotn=function(f){r(typeof f=="number"&&f>=0);var d=Math.ceil(f/26)|0,g=f%26;this._expand(d),g>0&&d--;for(var m=0;m<d;m++)this.words[m]=~this.words[m]&67108863;return g>0&&(this.words[m]=~this.words[m]&67108863>>26-g),this.strip()},a.prototype.notn=function(f){return this.clone().inotn(f)},a.prototype.setn=function(f,d){r(typeof f=="number"&&f>=0);var g=f/26|0,m=f%26;return this._expand(g+1),d?this.words[g]=this.words[g]|1<<m:this.words[g]=this.words[g]&~(1<<m),this.strip()},a.prototype.iadd=function(f){var d;if(this.negative!==0&&f.negative===0)return this.negative=0,d=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,d=this.isub(f),f.negative=1,d._normSign();var g,m;this.length>f.length?(g=this,m=f):(g=f,m=this);for(var b=0,E=0;E<m.length;E++)d=(g.words[E]|0)+(m.words[E]|0)+b,this.words[E]=d&67108863,b=d>>>26;for(;b!==0&&E<g.length;E++)d=(g.words[E]|0)+b,this.words[E]=d&67108863,b=d>>>26;if(this.length=g.length,b!==0)this.words[this.length]=b,this.length++;else if(g!==this)for(;E<g.length;E++)this.words[E]=g.words[E];return this},a.prototype.add=function(f){var d;return f.negative!==0&&this.negative===0?(f.negative=0,d=this.sub(f),f.negative^=1,d):f.negative===0&&this.negative!==0?(this.negative=0,d=f.sub(this),this.negative=1,d):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},a.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var d=this.iadd(f);return f.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var g=this.cmp(f);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var m,b;g>0?(m=this,b=f):(m=f,b=this);for(var E=0,k=0;k<b.length;k++)d=(m.words[k]|0)-(b.words[k]|0)+E,E=d>>26,this.words[k]=d&67108863;for(;E!==0&&k<m.length;k++)d=(m.words[k]|0)+E,E=d>>26,this.words[k]=d&67108863;if(E===0&&k<m.length&&m!==this)for(;k<m.length;k++)this.words[k]=m.words[k];return this.length=Math.max(this.length,k),m!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(f){return this.clone().isub(f)};function S(M,f,d){d.negative=f.negative^M.negative;var g=M.length+f.length|0;d.length=g,g=g-1|0;var m=M.words[0]|0,b=f.words[0]|0,E=m*b,k=E&67108863,w=E/67108864|0;d.words[0]=k;for(var c=1;c<g;c++){for(var _=w>>>26,R=w&67108863,O=Math.min(c,f.length-1),F=Math.max(0,c-M.length+1);F<=O;F++){var U=c-F|0;m=M.words[U]|0,b=f.words[F]|0,E=m*b+R,_+=E/67108864|0,R=E&67108863}d.words[c]=R|0,w=_|0}return w!==0?d.words[c]=w|0:d.length--,d.strip()}var A=function(f,d,g){var m=f.words,b=d.words,E=g.words,k=0,w,c,_,R=m[0]|0,O=R&8191,F=R>>>13,U=m[1]|0,H=U&8191,J=U>>>13,fe=m[2]|0,B=fe&8191,q=fe>>>13,Y=m[3]|0,X=Y&8191,Q=Y>>>13,be=m[4]|0,ue=be&8191,me=be>>>13,vt=m[5]|0,xe=vt&8191,le=vt>>>13,qt=m[6]|0,we=qt&8191,Te=qt>>>13,at=m[7]|0,ee=at&8191,ie=at>>>13,tt=m[8]|0,ae=tt&8191,de=tt>>>13,Ze=m[9]|0,he=Ze&8191,Se=Ze>>>13,At=b[0]|0,_e=At&8191,Ie=At>>>13,nr=b[1]|0,Ne=nr&8191,Re=nr>>>13,Qn=b[2]|0,qe=Qn&8191,Fe=Qn>>>13,$n=b[3]|0,$e=$n&8191,Be=$n>>>13,zn=b[4]|0,Le=zn&8191,ze=zn>>>13,ei=b[5]|0,Pe=ei&8191,Oe=ei>>>13,jn=b[6]|0,je=jn&8191,Ue=jn>>>13,xr=b[7]|0,ke=xr&8191,Ve=xr>>>13,kn=b[8]|0,De=kn&8191,We=kn>>>13,On=b[9]|0,Ge=On&8191,He=On>>>13;g.negative=f.negative^d.negative,g.length=19,w=Math.imul(O,_e),c=Math.imul(O,Ie),c=c+Math.imul(F,_e)|0,_=Math.imul(F,Ie);var rn=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(rn>>>26)|0,rn&=67108863,w=Math.imul(H,_e),c=Math.imul(H,Ie),c=c+Math.imul(J,_e)|0,_=Math.imul(J,Ie),w=w+Math.imul(O,Ne)|0,c=c+Math.imul(O,Re)|0,c=c+Math.imul(F,Ne)|0,_=_+Math.imul(F,Re)|0;var Ot=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,w=Math.imul(B,_e),c=Math.imul(B,Ie),c=c+Math.imul(q,_e)|0,_=Math.imul(q,Ie),w=w+Math.imul(H,Ne)|0,c=c+Math.imul(H,Re)|0,c=c+Math.imul(J,Ne)|0,_=_+Math.imul(J,Re)|0,w=w+Math.imul(O,qe)|0,c=c+Math.imul(O,Fe)|0,c=c+Math.imul(F,qe)|0,_=_+Math.imul(F,Fe)|0;var Rt=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,w=Math.imul(X,_e),c=Math.imul(X,Ie),c=c+Math.imul(Q,_e)|0,_=Math.imul(Q,Ie),w=w+Math.imul(B,Ne)|0,c=c+Math.imul(B,Re)|0,c=c+Math.imul(q,Ne)|0,_=_+Math.imul(q,Re)|0,w=w+Math.imul(H,qe)|0,c=c+Math.imul(H,Fe)|0,c=c+Math.imul(J,qe)|0,_=_+Math.imul(J,Fe)|0,w=w+Math.imul(O,$e)|0,c=c+Math.imul(O,Be)|0,c=c+Math.imul(F,$e)|0,_=_+Math.imul(F,Be)|0;var Lr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,w=Math.imul(ue,_e),c=Math.imul(ue,Ie),c=c+Math.imul(me,_e)|0,_=Math.imul(me,Ie),w=w+Math.imul(X,Ne)|0,c=c+Math.imul(X,Re)|0,c=c+Math.imul(Q,Ne)|0,_=_+Math.imul(Q,Re)|0,w=w+Math.imul(B,qe)|0,c=c+Math.imul(B,Fe)|0,c=c+Math.imul(q,qe)|0,_=_+Math.imul(q,Fe)|0,w=w+Math.imul(H,$e)|0,c=c+Math.imul(H,Be)|0,c=c+Math.imul(J,$e)|0,_=_+Math.imul(J,Be)|0,w=w+Math.imul(O,Le)|0,c=c+Math.imul(O,ze)|0,c=c+Math.imul(F,Le)|0,_=_+Math.imul(F,ze)|0;var Pr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,w=Math.imul(xe,_e),c=Math.imul(xe,Ie),c=c+Math.imul(le,_e)|0,_=Math.imul(le,Ie),w=w+Math.imul(ue,Ne)|0,c=c+Math.imul(ue,Re)|0,c=c+Math.imul(me,Ne)|0,_=_+Math.imul(me,Re)|0,w=w+Math.imul(X,qe)|0,c=c+Math.imul(X,Fe)|0,c=c+Math.imul(Q,qe)|0,_=_+Math.imul(Q,Fe)|0,w=w+Math.imul(B,$e)|0,c=c+Math.imul(B,Be)|0,c=c+Math.imul(q,$e)|0,_=_+Math.imul(q,Be)|0,w=w+Math.imul(H,Le)|0,c=c+Math.imul(H,ze)|0,c=c+Math.imul(J,Le)|0,_=_+Math.imul(J,ze)|0,w=w+Math.imul(O,Pe)|0,c=c+Math.imul(O,Oe)|0,c=c+Math.imul(F,Pe)|0,_=_+Math.imul(F,Oe)|0;var qr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(qr>>>26)|0,qr&=67108863,w=Math.imul(we,_e),c=Math.imul(we,Ie),c=c+Math.imul(Te,_e)|0,_=Math.imul(Te,Ie),w=w+Math.imul(xe,Ne)|0,c=c+Math.imul(xe,Re)|0,c=c+Math.imul(le,Ne)|0,_=_+Math.imul(le,Re)|0,w=w+Math.imul(ue,qe)|0,c=c+Math.imul(ue,Fe)|0,c=c+Math.imul(me,qe)|0,_=_+Math.imul(me,Fe)|0,w=w+Math.imul(X,$e)|0,c=c+Math.imul(X,Be)|0,c=c+Math.imul(Q,$e)|0,_=_+Math.imul(Q,Be)|0,w=w+Math.imul(B,Le)|0,c=c+Math.imul(B,ze)|0,c=c+Math.imul(q,Le)|0,_=_+Math.imul(q,ze)|0,w=w+Math.imul(H,Pe)|0,c=c+Math.imul(H,Oe)|0,c=c+Math.imul(J,Pe)|0,_=_+Math.imul(J,Oe)|0,w=w+Math.imul(O,je)|0,c=c+Math.imul(O,Ue)|0,c=c+Math.imul(F,je)|0,_=_+Math.imul(F,Ue)|0;var $r=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+($r>>>26)|0,$r&=67108863,w=Math.imul(ee,_e),c=Math.imul(ee,Ie),c=c+Math.imul(ie,_e)|0,_=Math.imul(ie,Ie),w=w+Math.imul(we,Ne)|0,c=c+Math.imul(we,Re)|0,c=c+Math.imul(Te,Ne)|0,_=_+Math.imul(Te,Re)|0,w=w+Math.imul(xe,qe)|0,c=c+Math.imul(xe,Fe)|0,c=c+Math.imul(le,qe)|0,_=_+Math.imul(le,Fe)|0,w=w+Math.imul(ue,$e)|0,c=c+Math.imul(ue,Be)|0,c=c+Math.imul(me,$e)|0,_=_+Math.imul(me,Be)|0,w=w+Math.imul(X,Le)|0,c=c+Math.imul(X,ze)|0,c=c+Math.imul(Q,Le)|0,_=_+Math.imul(Q,ze)|0,w=w+Math.imul(B,Pe)|0,c=c+Math.imul(B,Oe)|0,c=c+Math.imul(q,Pe)|0,_=_+Math.imul(q,Oe)|0,w=w+Math.imul(H,je)|0,c=c+Math.imul(H,Ue)|0,c=c+Math.imul(J,je)|0,_=_+Math.imul(J,Ue)|0,w=w+Math.imul(O,ke)|0,c=c+Math.imul(O,Ve)|0,c=c+Math.imul(F,ke)|0,_=_+Math.imul(F,Ve)|0;var zr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(zr>>>26)|0,zr&=67108863,w=Math.imul(ae,_e),c=Math.imul(ae,Ie),c=c+Math.imul(de,_e)|0,_=Math.imul(de,Ie),w=w+Math.imul(ee,Ne)|0,c=c+Math.imul(ee,Re)|0,c=c+Math.imul(ie,Ne)|0,_=_+Math.imul(ie,Re)|0,w=w+Math.imul(we,qe)|0,c=c+Math.imul(we,Fe)|0,c=c+Math.imul(Te,qe)|0,_=_+Math.imul(Te,Fe)|0,w=w+Math.imul(xe,$e)|0,c=c+Math.imul(xe,Be)|0,c=c+Math.imul(le,$e)|0,_=_+Math.imul(le,Be)|0,w=w+Math.imul(ue,Le)|0,c=c+Math.imul(ue,ze)|0,c=c+Math.imul(me,Le)|0,_=_+Math.imul(me,ze)|0,w=w+Math.imul(X,Pe)|0,c=c+Math.imul(X,Oe)|0,c=c+Math.imul(Q,Pe)|0,_=_+Math.imul(Q,Oe)|0,w=w+Math.imul(B,je)|0,c=c+Math.imul(B,Ue)|0,c=c+Math.imul(q,je)|0,_=_+Math.imul(q,Ue)|0,w=w+Math.imul(H,ke)|0,c=c+Math.imul(H,Ve)|0,c=c+Math.imul(J,ke)|0,_=_+Math.imul(J,Ve)|0,w=w+Math.imul(O,De)|0,c=c+Math.imul(O,We)|0,c=c+Math.imul(F,De)|0,_=_+Math.imul(F,We)|0;var jr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(jr>>>26)|0,jr&=67108863,w=Math.imul(he,_e),c=Math.imul(he,Ie),c=c+Math.imul(Se,_e)|0,_=Math.imul(Se,Ie),w=w+Math.imul(ae,Ne)|0,c=c+Math.imul(ae,Re)|0,c=c+Math.imul(de,Ne)|0,_=_+Math.imul(de,Re)|0,w=w+Math.imul(ee,qe)|0,c=c+Math.imul(ee,Fe)|0,c=c+Math.imul(ie,qe)|0,_=_+Math.imul(ie,Fe)|0,w=w+Math.imul(we,$e)|0,c=c+Math.imul(we,Be)|0,c=c+Math.imul(Te,$e)|0,_=_+Math.imul(Te,Be)|0,w=w+Math.imul(xe,Le)|0,c=c+Math.imul(xe,ze)|0,c=c+Math.imul(le,Le)|0,_=_+Math.imul(le,ze)|0,w=w+Math.imul(ue,Pe)|0,c=c+Math.imul(ue,Oe)|0,c=c+Math.imul(me,Pe)|0,_=_+Math.imul(me,Oe)|0,w=w+Math.imul(X,je)|0,c=c+Math.imul(X,Ue)|0,c=c+Math.imul(Q,je)|0,_=_+Math.imul(Q,Ue)|0,w=w+Math.imul(B,ke)|0,c=c+Math.imul(B,Ve)|0,c=c+Math.imul(q,ke)|0,_=_+Math.imul(q,Ve)|0,w=w+Math.imul(H,De)|0,c=c+Math.imul(H,We)|0,c=c+Math.imul(J,De)|0,_=_+Math.imul(J,We)|0,w=w+Math.imul(O,Ge)|0,c=c+Math.imul(O,He)|0,c=c+Math.imul(F,Ge)|0,_=_+Math.imul(F,He)|0;var Ur=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,w=Math.imul(he,Ne),c=Math.imul(he,Re),c=c+Math.imul(Se,Ne)|0,_=Math.imul(Se,Re),w=w+Math.imul(ae,qe)|0,c=c+Math.imul(ae,Fe)|0,c=c+Math.imul(de,qe)|0,_=_+Math.imul(de,Fe)|0,w=w+Math.imul(ee,$e)|0,c=c+Math.imul(ee,Be)|0,c=c+Math.imul(ie,$e)|0,_=_+Math.imul(ie,Be)|0,w=w+Math.imul(we,Le)|0,c=c+Math.imul(we,ze)|0,c=c+Math.imul(Te,Le)|0,_=_+Math.imul(Te,ze)|0,w=w+Math.imul(xe,Pe)|0,c=c+Math.imul(xe,Oe)|0,c=c+Math.imul(le,Pe)|0,_=_+Math.imul(le,Oe)|0,w=w+Math.imul(ue,je)|0,c=c+Math.imul(ue,Ue)|0,c=c+Math.imul(me,je)|0,_=_+Math.imul(me,Ue)|0,w=w+Math.imul(X,ke)|0,c=c+Math.imul(X,Ve)|0,c=c+Math.imul(Q,ke)|0,_=_+Math.imul(Q,Ve)|0,w=w+Math.imul(B,De)|0,c=c+Math.imul(B,We)|0,c=c+Math.imul(q,De)|0,_=_+Math.imul(q,We)|0,w=w+Math.imul(H,Ge)|0,c=c+Math.imul(H,He)|0,c=c+Math.imul(J,Ge)|0,_=_+Math.imul(J,He)|0;var Vr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,w=Math.imul(he,qe),c=Math.imul(he,Fe),c=c+Math.imul(Se,qe)|0,_=Math.imul(Se,Fe),w=w+Math.imul(ae,$e)|0,c=c+Math.imul(ae,Be)|0,c=c+Math.imul(de,$e)|0,_=_+Math.imul(de,Be)|0,w=w+Math.imul(ee,Le)|0,c=c+Math.imul(ee,ze)|0,c=c+Math.imul(ie,Le)|0,_=_+Math.imul(ie,ze)|0,w=w+Math.imul(we,Pe)|0,c=c+Math.imul(we,Oe)|0,c=c+Math.imul(Te,Pe)|0,_=_+Math.imul(Te,Oe)|0,w=w+Math.imul(xe,je)|0,c=c+Math.imul(xe,Ue)|0,c=c+Math.imul(le,je)|0,_=_+Math.imul(le,Ue)|0,w=w+Math.imul(ue,ke)|0,c=c+Math.imul(ue,Ve)|0,c=c+Math.imul(me,ke)|0,_=_+Math.imul(me,Ve)|0,w=w+Math.imul(X,De)|0,c=c+Math.imul(X,We)|0,c=c+Math.imul(Q,De)|0,_=_+Math.imul(Q,We)|0,w=w+Math.imul(B,Ge)|0,c=c+Math.imul(B,He)|0,c=c+Math.imul(q,Ge)|0,_=_+Math.imul(q,He)|0;var Wr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,w=Math.imul(he,$e),c=Math.imul(he,Be),c=c+Math.imul(Se,$e)|0,_=Math.imul(Se,Be),w=w+Math.imul(ae,Le)|0,c=c+Math.imul(ae,ze)|0,c=c+Math.imul(de,Le)|0,_=_+Math.imul(de,ze)|0,w=w+Math.imul(ee,Pe)|0,c=c+Math.imul(ee,Oe)|0,c=c+Math.imul(ie,Pe)|0,_=_+Math.imul(ie,Oe)|0,w=w+Math.imul(we,je)|0,c=c+Math.imul(we,Ue)|0,c=c+Math.imul(Te,je)|0,_=_+Math.imul(Te,Ue)|0,w=w+Math.imul(xe,ke)|0,c=c+Math.imul(xe,Ve)|0,c=c+Math.imul(le,ke)|0,_=_+Math.imul(le,Ve)|0,w=w+Math.imul(ue,De)|0,c=c+Math.imul(ue,We)|0,c=c+Math.imul(me,De)|0,_=_+Math.imul(me,We)|0,w=w+Math.imul(X,Ge)|0,c=c+Math.imul(X,He)|0,c=c+Math.imul(Q,Ge)|0,_=_+Math.imul(Q,He)|0;var Gr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,w=Math.imul(he,Le),c=Math.imul(he,ze),c=c+Math.imul(Se,Le)|0,_=Math.imul(Se,ze),w=w+Math.imul(ae,Pe)|0,c=c+Math.imul(ae,Oe)|0,c=c+Math.imul(de,Pe)|0,_=_+Math.imul(de,Oe)|0,w=w+Math.imul(ee,je)|0,c=c+Math.imul(ee,Ue)|0,c=c+Math.imul(ie,je)|0,_=_+Math.imul(ie,Ue)|0,w=w+Math.imul(we,ke)|0,c=c+Math.imul(we,Ve)|0,c=c+Math.imul(Te,ke)|0,_=_+Math.imul(Te,Ve)|0,w=w+Math.imul(xe,De)|0,c=c+Math.imul(xe,We)|0,c=c+Math.imul(le,De)|0,_=_+Math.imul(le,We)|0,w=w+Math.imul(ue,Ge)|0,c=c+Math.imul(ue,He)|0,c=c+Math.imul(me,Ge)|0,_=_+Math.imul(me,He)|0;var Hr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,w=Math.imul(he,Pe),c=Math.imul(he,Oe),c=c+Math.imul(Se,Pe)|0,_=Math.imul(Se,Oe),w=w+Math.imul(ae,je)|0,c=c+Math.imul(ae,Ue)|0,c=c+Math.imul(de,je)|0,_=_+Math.imul(de,Ue)|0,w=w+Math.imul(ee,ke)|0,c=c+Math.imul(ee,Ve)|0,c=c+Math.imul(ie,ke)|0,_=_+Math.imul(ie,Ve)|0,w=w+Math.imul(we,De)|0,c=c+Math.imul(we,We)|0,c=c+Math.imul(Te,De)|0,_=_+Math.imul(Te,We)|0,w=w+Math.imul(xe,Ge)|0,c=c+Math.imul(xe,He)|0,c=c+Math.imul(le,Ge)|0,_=_+Math.imul(le,He)|0;var Kr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,w=Math.imul(he,je),c=Math.imul(he,Ue),c=c+Math.imul(Se,je)|0,_=Math.imul(Se,Ue),w=w+Math.imul(ae,ke)|0,c=c+Math.imul(ae,Ve)|0,c=c+Math.imul(de,ke)|0,_=_+Math.imul(de,Ve)|0,w=w+Math.imul(ee,De)|0,c=c+Math.imul(ee,We)|0,c=c+Math.imul(ie,De)|0,_=_+Math.imul(ie,We)|0,w=w+Math.imul(we,Ge)|0,c=c+Math.imul(we,He)|0,c=c+Math.imul(Te,Ge)|0,_=_+Math.imul(Te,He)|0;var Zr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,w=Math.imul(he,ke),c=Math.imul(he,Ve),c=c+Math.imul(Se,ke)|0,_=Math.imul(Se,Ve),w=w+Math.imul(ae,De)|0,c=c+Math.imul(ae,We)|0,c=c+Math.imul(de,De)|0,_=_+Math.imul(de,We)|0,w=w+Math.imul(ee,Ge)|0,c=c+Math.imul(ee,He)|0,c=c+Math.imul(ie,Ge)|0,_=_+Math.imul(ie,He)|0;var Jr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,w=Math.imul(he,De),c=Math.imul(he,We),c=c+Math.imul(Se,De)|0,_=Math.imul(Se,We),w=w+Math.imul(ae,Ge)|0,c=c+Math.imul(ae,He)|0,c=c+Math.imul(de,Ge)|0,_=_+Math.imul(de,He)|0;var Xt=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,w=Math.imul(he,Ge),c=Math.imul(he,He),c=c+Math.imul(Se,Ge)|0,_=Math.imul(Se,He);var Tr=(k+w|0)+((c&8191)<<13)|0;return k=(_+(c>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,E[0]=rn,E[1]=Ot,E[2]=Rt,E[3]=Lr,E[4]=Pr,E[5]=qr,E[6]=$r,E[7]=zr,E[8]=jr,E[9]=Ur,E[10]=Vr,E[11]=Wr,E[12]=Gr,E[13]=Hr,E[14]=Kr,E[15]=Zr,E[16]=Jr,E[17]=Xt,E[18]=Tr,k!==0&&(E[19]=k,g.length++),g};Math.imul||(A=S);function T(M,f,d){d.negative=f.negative^M.negative,d.length=M.length+f.length;for(var g=0,m=0,b=0;b<d.length-1;b++){var E=m;m=0;for(var k=g&67108863,w=Math.min(b,f.length-1),c=Math.max(0,b-M.length+1);c<=w;c++){var _=b-c,R=M.words[_]|0,O=f.words[c]|0,F=R*O,U=F&67108863;E=E+(F/67108864|0)|0,U=U+k|0,k=U&67108863,E=E+(U>>>26)|0,m+=E>>>26,E&=67108863}d.words[b]=k,g=E,E=m}return g!==0?d.words[b]=g:d.length--,d.strip()}function I(M,f,d){var g=new N;return g.mulp(M,f,d)}a.prototype.mulTo=function(f,d){var g,m=this.length+f.length;return this.length===10&&f.length===10?g=A(this,f,d):m<63?g=S(this,f,d):m<1024?g=T(this,f,d):g=I(this,f,d),g};function N(M,f){this.x=M,this.y=f}N.prototype.makeRBT=function(f){for(var d=new Array(f),g=a.prototype._countBits(f)-1,m=0;m<f;m++)d[m]=this.revBin(m,g,f);return d},N.prototype.revBin=function(f,d,g){if(f===0||f===g-1)return f;for(var m=0,b=0;b<d;b++)m|=(f&1)<<d-b-1,f>>=1;return m},N.prototype.permute=function(f,d,g,m,b,E){for(var k=0;k<E;k++)m[k]=d[f[k]],b[k]=g[f[k]]},N.prototype.transform=function(f,d,g,m,b,E){this.permute(E,f,d,g,m,b);for(var k=1;k<b;k<<=1)for(var w=k<<1,c=Math.cos(2*Math.PI/w),_=Math.sin(2*Math.PI/w),R=0;R<b;R+=w)for(var O=c,F=_,U=0;U<k;U++){var H=g[R+U],J=m[R+U],fe=g[R+U+k],B=m[R+U+k],q=O*fe-F*B;B=O*B+F*fe,fe=q,g[R+U]=H+fe,m[R+U]=J+B,g[R+U+k]=H-fe,m[R+U+k]=J-B,U!==w&&(q=c*O-_*F,F=c*F+_*O,O=q)}},N.prototype.guessLen13b=function(f,d){var g=Math.max(d,f)|1,m=g&1,b=0;for(g=g/2|0;g;g=g>>>1)b++;return 1<<b+1+m},N.prototype.conjugate=function(f,d,g){if(!(g<=1))for(var m=0;m<g/2;m++){var b=f[m];f[m]=f[g-m-1],f[g-m-1]=b,b=d[m],d[m]=-d[g-m-1],d[g-m-1]=-b}},N.prototype.normalize13b=function(f,d){for(var g=0,m=0;m<d/2;m++){var b=Math.round(f[2*m+1]/d)*8192+Math.round(f[2*m]/d)+g;f[m]=b&67108863,b<67108864?g=0:g=b/67108864|0}return f},N.prototype.convert13b=function(f,d,g,m){for(var b=0,E=0;E<d;E++)b=b+(f[E]|0),g[2*E]=b&8191,b=b>>>13,g[2*E+1]=b&8191,b=b>>>13;for(E=2*d;E<m;++E)g[E]=0;r(b===0),r((b&-8192)===0)},N.prototype.stub=function(f){for(var d=new Array(f),g=0;g<f;g++)d[g]=0;return d},N.prototype.mulp=function(f,d,g){var m=2*this.guessLen13b(f.length,d.length),b=this.makeRBT(m),E=this.stub(m),k=new Array(m),w=new Array(m),c=new Array(m),_=new Array(m),R=new Array(m),O=new Array(m),F=g.words;F.length=m,this.convert13b(f.words,f.length,k,m),this.convert13b(d.words,d.length,_,m),this.transform(k,E,w,c,m,b),this.transform(_,E,R,O,m,b);for(var U=0;U<m;U++){var H=w[U]*R[U]-c[U]*O[U];c[U]=w[U]*O[U]+c[U]*R[U],w[U]=H}return this.conjugate(w,c,m),this.transform(w,c,F,E,m,b),this.conjugate(F,E,m),this.normalize13b(F,m),g.negative=f.negative^d.negative,g.length=f.length+d.length,g.strip()},a.prototype.mul=function(f){var d=new a(null);return d.words=new Array(this.length+f.length),this.mulTo(f,d)},a.prototype.mulf=function(f){var d=new a(null);return d.words=new Array(this.length+f.length),I(this,f,d)},a.prototype.imul=function(f){return this.clone().mulTo(f,this)},a.prototype.imuln=function(f){r(typeof f=="number"),r(f<67108864);for(var d=0,g=0;g<this.length;g++){var m=(this.words[g]|0)*f,b=(m&67108863)+(d&67108863);d>>=26,d+=m/67108864|0,d+=b>>>26,this.words[g]=b&67108863}return d!==0&&(this.words[g]=d,this.length++),this},a.prototype.muln=function(f){return this.clone().imuln(f)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(f){var d=y(f);if(d.length===0)return new a(1);for(var g=this,m=0;m<d.length&&d[m]===0;m++,g=g.sqr());if(++m<d.length)for(var b=g.sqr();m<d.length;m++,b=b.sqr())d[m]!==0&&(g=g.mul(b));return g},a.prototype.iushln=function(f){r(typeof f=="number"&&f>=0);var d=f%26,g=(f-d)/26,m=67108863>>>26-d<<26-d,b;if(d!==0){var E=0;for(b=0;b<this.length;b++){var k=this.words[b]&m,w=(this.words[b]|0)-k<<d;this.words[b]=w|E,E=k>>>26-d}E&&(this.words[b]=E,this.length++)}if(g!==0){for(b=this.length-1;b>=0;b--)this.words[b+g]=this.words[b];for(b=0;b<g;b++)this.words[b]=0;this.length+=g}return this.strip()},a.prototype.ishln=function(f){return r(this.negative===0),this.iushln(f)},a.prototype.iushrn=function(f,d,g){r(typeof f=="number"&&f>=0);var m;d?m=(d-d%26)/26:m=0;var b=f%26,E=Math.min((f-b)/26,this.length),k=67108863^67108863>>>b<<b,w=g;if(m-=E,m=Math.max(0,m),w){for(var c=0;c<E;c++)w.words[c]=this.words[c];w.length=E}if(E!==0)if(this.length>E)for(this.length-=E,c=0;c<this.length;c++)this.words[c]=this.words[c+E];else this.words[0]=0,this.length=1;var _=0;for(c=this.length-1;c>=0&&(_!==0||c>=m);c--){var R=this.words[c]|0;this.words[c]=_<<26-b|R>>>b,_=R&k}return w&&_!==0&&(w.words[w.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(f,d,g){return r(this.negative===0),this.iushrn(f,d,g)},a.prototype.shln=function(f){return this.clone().ishln(f)},a.prototype.ushln=function(f){return this.clone().iushln(f)},a.prototype.shrn=function(f){return this.clone().ishrn(f)},a.prototype.ushrn=function(f){return this.clone().iushrn(f)},a.prototype.testn=function(f){r(typeof f=="number"&&f>=0);var d=f%26,g=(f-d)/26,m=1<<d;if(this.length<=g)return!1;var b=this.words[g];return!!(b&m)},a.prototype.imaskn=function(f){r(typeof f=="number"&&f>=0);var d=f%26,g=(f-d)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(d!==0&&g++,this.length=Math.min(g,this.length),d!==0){var m=67108863^67108863>>>d<<d;this.words[this.length-1]&=m}return this.strip()},a.prototype.maskn=function(f){return this.clone().imaskn(f)},a.prototype.iaddn=function(f){return r(typeof f=="number"),r(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},a.prototype._iaddn=function(f){this.words[0]+=f;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},a.prototype.isubn=function(f){if(r(typeof f=="number"),r(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this.strip()},a.prototype.addn=function(f){return this.clone().iaddn(f)},a.prototype.subn=function(f){return this.clone().isubn(f)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(f,d,g){var m=f.length+g,b;this._expand(m);var E,k=0;for(b=0;b<f.length;b++){E=(this.words[b+g]|0)+k;var w=(f.words[b]|0)*d;E-=w&67108863,k=(E>>26)-(w/67108864|0),this.words[b+g]=E&67108863}for(;b<this.length-g;b++)E=(this.words[b+g]|0)+k,k=E>>26,this.words[b+g]=E&67108863;if(k===0)return this.strip();for(r(k===-1),k=0,b=0;b<this.length;b++)E=-(this.words[b]|0)+k,k=E>>26,this.words[b]=E&67108863;return this.negative=1,this.strip()},a.prototype._wordDiv=function(f,d){var g=this.length-f.length,m=this.clone(),b=f,E=b.words[b.length-1]|0,k=this._countBits(E);g=26-k,g!==0&&(b=b.ushln(g),m.iushln(g),E=b.words[b.length-1]|0);var w=m.length-b.length,c;if(d!=="mod"){c=new a(null),c.length=w+1,c.words=new Array(c.length);for(var _=0;_<c.length;_++)c.words[_]=0}var R=m.clone()._ishlnsubmul(b,1,w);R.negative===0&&(m=R,c&&(c.words[w]=1));for(var O=w-1;O>=0;O--){var F=(m.words[b.length+O]|0)*67108864+(m.words[b.length+O-1]|0);for(F=Math.min(F/E|0,67108863),m._ishlnsubmul(b,F,O);m.negative!==0;)F--,m.negative=0,m._ishlnsubmul(b,1,O),m.isZero()||(m.negative^=1);c&&(c.words[O]=F)}return c&&c.strip(),m.strip(),d!=="div"&&g!==0&&m.iushrn(g),{div:c||null,mod:m}},a.prototype.divmod=function(f,d,g){if(r(!f.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var m,b,E;return this.negative!==0&&f.negative===0?(E=this.neg().divmod(f,d),d!=="mod"&&(m=E.div.neg()),d!=="div"&&(b=E.mod.neg(),g&&b.negative!==0&&b.iadd(f)),{div:m,mod:b}):this.negative===0&&f.negative!==0?(E=this.divmod(f.neg(),d),d!=="mod"&&(m=E.div.neg()),{div:m,mod:E.mod}):(this.negative&f.negative)!==0?(E=this.neg().divmod(f.neg(),d),d!=="div"&&(b=E.mod.neg(),g&&b.negative!==0&&b.isub(f)),{div:E.div,mod:b}):f.length>this.length||this.cmp(f)<0?{div:new a(0),mod:this}:f.length===1?d==="div"?{div:this.divn(f.words[0]),mod:null}:d==="mod"?{div:null,mod:new a(this.modn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new a(this.modn(f.words[0]))}:this._wordDiv(f,d)},a.prototype.div=function(f){return this.divmod(f,"div",!1).div},a.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},a.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},a.prototype.divRound=function(f){var d=this.divmod(f);if(d.mod.isZero())return d.div;var g=d.div.negative!==0?d.mod.isub(f):d.mod,m=f.ushrn(1),b=f.andln(1),E=g.cmp(m);return E<0||b===1&&E===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},a.prototype.modn=function(f){r(f<=67108863);for(var d=(1<<26)%f,g=0,m=this.length-1;m>=0;m--)g=(d*g+(this.words[m]|0))%f;return g},a.prototype.idivn=function(f){r(f<=67108863);for(var d=0,g=this.length-1;g>=0;g--){var m=(this.words[g]|0)+d*67108864;this.words[g]=m/f|0,d=m%f}return this.strip()},a.prototype.divn=function(f){return this.clone().idivn(f)},a.prototype.egcd=function(f){r(f.negative===0),r(!f.isZero());var d=this,g=f.clone();d.negative!==0?d=d.umod(f):d=d.clone();for(var m=new a(1),b=new a(0),E=new a(0),k=new a(1),w=0;d.isEven()&&g.isEven();)d.iushrn(1),g.iushrn(1),++w;for(var c=g.clone(),_=d.clone();!d.isZero();){for(var R=0,O=1;(d.words[0]&O)===0&&R<26;++R,O<<=1);if(R>0)for(d.iushrn(R);R-- >0;)(m.isOdd()||b.isOdd())&&(m.iadd(c),b.isub(_)),m.iushrn(1),b.iushrn(1);for(var F=0,U=1;(g.words[0]&U)===0&&F<26;++F,U<<=1);if(F>0)for(g.iushrn(F);F-- >0;)(E.isOdd()||k.isOdd())&&(E.iadd(c),k.isub(_)),E.iushrn(1),k.iushrn(1);d.cmp(g)>=0?(d.isub(g),m.isub(E),b.isub(k)):(g.isub(d),E.isub(m),k.isub(b))}return{a:E,b:k,gcd:g.iushln(w)}},a.prototype._invmp=function(f){r(f.negative===0),r(!f.isZero());var d=this,g=f.clone();d.negative!==0?d=d.umod(f):d=d.clone();for(var m=new a(1),b=new a(0),E=g.clone();d.cmpn(1)>0&&g.cmpn(1)>0;){for(var k=0,w=1;(d.words[0]&w)===0&&k<26;++k,w<<=1);if(k>0)for(d.iushrn(k);k-- >0;)m.isOdd()&&m.iadd(E),m.iushrn(1);for(var c=0,_=1;(g.words[0]&_)===0&&c<26;++c,_<<=1);if(c>0)for(g.iushrn(c);c-- >0;)b.isOdd()&&b.iadd(E),b.iushrn(1);d.cmp(g)>=0?(d.isub(g),m.isub(b)):(g.isub(d),b.isub(m))}var R;return d.cmpn(1)===0?R=m:R=b,R.cmpn(0)<0&&R.iadd(f),R},a.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var d=this.clone(),g=f.clone();d.negative=0,g.negative=0;for(var m=0;d.isEven()&&g.isEven();m++)d.iushrn(1),g.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;g.isEven();)g.iushrn(1);var b=d.cmp(g);if(b<0){var E=d;d=g,g=E}else if(b===0||g.cmpn(1)===0)break;d.isub(g)}while(!0);return g.iushln(m)},a.prototype.invm=function(f){return this.egcd(f).a.umod(f)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(f){return this.words[0]&f},a.prototype.bincn=function(f){r(typeof f=="number");var d=f%26,g=(f-d)/26,m=1<<d;if(this.length<=g)return this._expand(g+1),this.words[g]|=m,this;for(var b=m,E=g;b!==0&&E<this.length;E++){var k=this.words[E]|0;k+=b,b=k>>>26,k&=67108863,this.words[E]=k}return b!==0&&(this.words[E]=b,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(f){var d=f<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this.strip();var g;if(this.length>1)g=1;else{d&&(f=-f),r(f<=67108863,"Number is too big");var m=this.words[0]|0;g=m===f?0:m<f?-1:1}return this.negative!==0?-g|0:g},a.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var d=this.ucmp(f);return this.negative!==0?-d|0:d},a.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var d=0,g=this.length-1;g>=0;g--){var m=this.words[g]|0,b=f.words[g]|0;if(m!==b){m<b?d=-1:m>b&&(d=1);break}}return d},a.prototype.gtn=function(f){return this.cmpn(f)===1},a.prototype.gt=function(f){return this.cmp(f)===1},a.prototype.gten=function(f){return this.cmpn(f)>=0},a.prototype.gte=function(f){return this.cmp(f)>=0},a.prototype.ltn=function(f){return this.cmpn(f)===-1},a.prototype.lt=function(f){return this.cmp(f)===-1},a.prototype.lten=function(f){return this.cmpn(f)<=0},a.prototype.lte=function(f){return this.cmp(f)<=0},a.prototype.eqn=function(f){return this.cmpn(f)===0},a.prototype.eq=function(f){return this.cmp(f)===0},a.red=function(f){return new j(f)},a.prototype.toRed=function(f){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},a.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(f){return this.red=f,this},a.prototype.forceRed=function(f){return r(!this.red,"Already a number in reduction context"),this._forceRed(f)},a.prototype.redAdd=function(f){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},a.prototype.redIAdd=function(f){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},a.prototype.redSub=function(f){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},a.prototype.redISub=function(f){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},a.prototype.redShl=function(f){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},a.prototype.redMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},a.prototype.redIMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},a.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(f){return r(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var D={k256:null,p224:null,p192:null,p25519:null};function C(M,f){this.name=M,this.p=new a(f,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}C.prototype._tmp=function(){var f=new a(null);return f.words=new Array(Math.ceil(this.n/13)),f},C.prototype.ireduce=function(f){var d=f,g;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),g=d.bitLength();while(g>this.n);var m=g<this.n?-1:d.ucmp(this.p);return m===0?(d.words[0]=0,d.length=1):m>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},C.prototype.split=function(f,d){f.iushrn(this.n,0,d)},C.prototype.imulK=function(f){return f.imul(this.k)};function L(){C.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(L,C),L.prototype.split=function(f,d){for(var g=4194303,m=Math.min(f.length,9),b=0;b<m;b++)d.words[b]=f.words[b];if(d.length=m,f.length<=9){f.words[0]=0,f.length=1;return}var E=f.words[9];for(d.words[d.length++]=E&g,b=10;b<f.length;b++){var k=f.words[b]|0;f.words[b-10]=(k&g)<<4|E>>>22,E=k}E>>>=22,f.words[b-10]=E,E===0&&f.length>10?f.length-=10:f.length-=9},L.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var d=0,g=0;g<f.length;g++){var m=f.words[g]|0;d+=m*977,f.words[g]=d&67108863,d=m*64+(d/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function z(){C.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(z,C);function $(){C.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n($,C);function G(){C.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(G,C),G.prototype.imulK=function(f){for(var d=0,g=0;g<f.length;g++){var m=(f.words[g]|0)*19+d,b=m&67108863;m>>>=26,f.words[g]=b,d=m}return d!==0&&(f.words[f.length++]=d),f},a._prime=function(f){if(D[f])return D[f];var d;if(f==="k256")d=new L;else if(f==="p224")d=new z;else if(f==="p192")d=new $;else if(f==="p25519")d=new G;else throw new Error("Unknown prime "+f);return D[f]=d,d};function j(M){if(typeof M=="string"){var f=a._prime(M);this.m=f.p,this.prime=f}else r(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}j.prototype._verify1=function(f){r(f.negative===0,"red works only with positives"),r(f.red,"red works only with red numbers")},j.prototype._verify2=function(f,d){r((f.negative|d.negative)===0,"red works only with positives"),r(f.red&&f.red===d.red,"red works only with red numbers")},j.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):f.umod(this.m)._forceRed(this)},j.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},j.prototype.add=function(f,d){this._verify2(f,d);var g=f.add(d);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},j.prototype.iadd=function(f,d){this._verify2(f,d);var g=f.iadd(d);return g.cmp(this.m)>=0&&g.isub(this.m),g},j.prototype.sub=function(f,d){this._verify2(f,d);var g=f.sub(d);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},j.prototype.isub=function(f,d){this._verify2(f,d);var g=f.isub(d);return g.cmpn(0)<0&&g.iadd(this.m),g},j.prototype.shl=function(f,d){return this._verify1(f),this.imod(f.ushln(d))},j.prototype.imul=function(f,d){return this._verify2(f,d),this.imod(f.imul(d))},j.prototype.mul=function(f,d){return this._verify2(f,d),this.imod(f.mul(d))},j.prototype.isqr=function(f){return this.imul(f,f.clone())},j.prototype.sqr=function(f){return this.mul(f,f)},j.prototype.sqrt=function(f){if(f.isZero())return f.clone();var d=this.m.andln(3);if(r(d%2===1),d===3){var g=this.m.add(new a(1)).iushrn(2);return this.pow(f,g)}for(var m=this.m.subn(1),b=0;!m.isZero()&&m.andln(1)===0;)b++,m.iushrn(1);r(!m.isZero());var E=new a(1).toRed(this),k=E.redNeg(),w=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new a(2*c*c).toRed(this);this.pow(c,w).cmp(k)!==0;)c.redIAdd(k);for(var _=this.pow(c,m),R=this.pow(f,m.addn(1).iushrn(1)),O=this.pow(f,m),F=b;O.cmp(E)!==0;){for(var U=O,H=0;U.cmp(E)!==0;H++)U=U.redSqr();r(H<F);var J=this.pow(_,new a(1).iushln(F-H-1));R=R.redMul(J),_=J.redSqr(),O=O.redMul(_),F=H}return R},j.prototype.invm=function(f){var d=f._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},j.prototype.pow=function(f,d){if(d.isZero())return new a(1).toRed(this);if(d.cmpn(1)===0)return f.clone();var g=4,m=new Array(1<<g);m[0]=new a(1).toRed(this),m[1]=f;for(var b=2;b<m.length;b++)m[b]=this.mul(m[b-1],f);var E=m[0],k=0,w=0,c=d.bitLength()%26;for(c===0&&(c=26),b=d.length-1;b>=0;b--){for(var _=d.words[b],R=c-1;R>=0;R--){var O=_>>R&1;if(E!==m[0]&&(E=this.sqr(E)),O===0&&k===0){w=0;continue}k<<=1,k|=O,w++,!(w!==g&&(b!==0||R!==0))&&(E=this.mul(E,m[k]),w=0,k=0)}c=26}return E},j.prototype.convertTo=function(f){var d=f.umod(this.m);return d===f?d.clone():d},j.prototype.convertFrom=function(f){var d=f.clone();return d.red=null,d},a.mont=function(f){return new K(f)};function K(M){j.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(K,j),K.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},K.prototype.convertFrom=function(f){var d=this.imod(f.mul(this.rinv));return d.red=null,d},K.prototype.imul=function(f,d){if(f.isZero()||d.isZero())return f.words[0]=0,f.length=1,f;var g=f.imul(d),m=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(m).iushrn(this.shift),E=b;return b.cmp(this.m)>=0?E=b.isub(this.m):b.cmpn(0)<0&&(E=b.iadd(this.m)),E._forceRed(this)},K.prototype.mul=function(f,d){if(f.isZero()||d.isZero())return new a(0)._forceRed(this);var g=f.mul(d),m=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(m).iushrn(this.shift),E=b;return b.cmp(this.m)>=0?E=b.isub(this.m):b.cmpn(0)<0&&(E=b.iadd(this.m)),E._forceRed(this)},K.prototype.invm=function(f){var d=this.imod(f._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(typeof h6=="undefined"||h6,Zq)});var U_=ne((Zet,Jq)=>{"use strict";var j_=mn(),yp=j_.Buffer,Fs={},Bs;for(Bs in j_)!j_.hasOwnProperty(Bs)||Bs==="SlowBuffer"||Bs==="Buffer"||(Fs[Bs]=j_[Bs]);var bp=Fs.Buffer={};for(Bs in yp)!yp.hasOwnProperty(Bs)||Bs==="allocUnsafe"||Bs==="allocUnsafeSlow"||(bp[Bs]=yp[Bs]);Fs.Buffer.prototype=yp.prototype;(!bp.from||bp.from===Uint8Array.from)&&(bp.from=function(t,e,r){if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&typeof t.length=="undefined")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return yp(t,e,r)});bp.alloc||(bp.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=yp(t);return!e||e.length===0?n.fill(0):typeof r=="string"?n.fill(e,r):n.fill(e),n});if(!Fs.kStringMaxLength)try{Fs.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}Fs.constants||(Fs.constants={MAX_LENGTH:Fs.kMaxLength},Fs.kStringMaxLength&&(Fs.constants.MAX_STRING_LENGTH=Fs.kStringMaxLength));Jq.exports=Fs});var V_=ne(Yq=>{"use strict";var xbe=Et();function Ls(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}Yq.Reporter=Ls;Ls.prototype.isError=function(e){return e instanceof wp};Ls.prototype.save=function(){let e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}};Ls.prototype.restore=function(e){let r=this._reporterState;r.obj=e.obj,r.path=r.path.slice(0,e.pathLen)};Ls.prototype.enterKey=function(e){return this._reporterState.path.push(e)};Ls.prototype.exitKey=function(e){let r=this._reporterState;r.path=r.path.slice(0,e-1)};Ls.prototype.leaveKey=function(e,r,n){let a=this._reporterState;this.exitKey(e),a.obj!==null&&(a.obj[r]=n)};Ls.prototype.path=function(){return this._reporterState.path.join("/")};Ls.prototype.enterObject=function(){let e=this._reporterState,r=e.obj;return e.obj={},r};Ls.prototype.leaveObject=function(e){let r=this._reporterState,n=r.obj;return r.obj=e,n};Ls.prototype.error=function(e){let r,n=this._reporterState,a=e instanceof wp;if(a?r=e:r=new wp(n.path.map(function(s){return"["+JSON.stringify(s)+"]"}).join(""),e.message||e,e.stack),!n.options.partial)throw r;return a||n.errors.push(r),r};Ls.prototype.wrapResult=function(e){let r=this._reporterState;return r.options.partial?{result:this.isError(e)?null:e,errors:r.errors}:e};function wp(t,e){this.path=t,this.rethrow(e)}xbe(wp,Error);wp.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,wp),!this.stack)try{throw new Error(this.message)}catch(r){this.stack=r.stack}return this}});var Sp=ne(p6=>{"use strict";var Sbe=Et(),W_=V_().Reporter,_p=U_().Buffer;function Ps(t,e){if(W_.call(this,e),!_p.isBuffer(t)){this.error("Input not Buffer");return}this.base=t,this.offset=0,this.length=t.length}Sbe(Ps,W_);p6.DecoderBuffer=Ps;Ps.isDecoderBuffer=function(e){return e instanceof Ps?!0:typeof e=="object"&&_p.isBuffer(e.base)&&e.constructor.name==="DecoderBuffer"&&typeof e.offset=="number"&&typeof e.length=="number"&&typeof e.save=="function"&&typeof e.restore=="function"&&typeof e.isEmpty=="function"&&typeof e.readUInt8=="function"&&typeof e.skip=="function"&&typeof e.raw=="function"};Ps.prototype.save=function(){return{offset:this.offset,reporter:W_.prototype.save.call(this)}};Ps.prototype.restore=function(e){let r=new Ps(this.base);return r.offset=e.offset,r.length=this.offset,this.offset=e.offset,W_.prototype.restore.call(this,e.reporter),r};Ps.prototype.isEmpty=function(){return this.offset===this.length};Ps.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")};Ps.prototype.skip=function(e,r){if(!(this.offset+e<=this.length))return this.error(r||"DecoderBuffer overrun");let n=new Ps(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n};Ps.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)};function xp(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(r){return xp.isEncoderBuffer(r)||(r=new xp(r,e)),this.length+=r.length,r},this);else if(typeof t=="number"){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if(typeof t=="string")this.value=t,this.length=_p.byteLength(t);else if(_p.isBuffer(t))this.value=t,this.length=t.length;else return e.error("Unsupported type: "+typeof t)}p6.EncoderBuffer=xp;xp.isEncoderBuffer=function(e){return e instanceof xp?!0:typeof e=="object"&&e.constructor.name==="EncoderBuffer"&&typeof e.length=="number"&&typeof e.join=="function"};xp.prototype.join=function(e,r){return e||(e=_p.alloc(this.length)),r||(r=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(n){n.join(e,r),r+=n.length}):(typeof this.value=="number"?e[r]=this.value:typeof this.value=="string"?e.write(this.value,r):_p.isBuffer(this.value)&&this.value.copy(e,r),r+=this.length)),e}});var G_=ne((Xet,Qq)=>{"use strict";var Ebe=V_().Reporter,Mbe=Sp().EncoderBuffer,Abe=Sp().DecoderBuffer,_a=Qa(),Xq=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],kbe=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(Xq),Tbe=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function an(t,e,r){let n={};this._baseState=n,n.name=r,n.enc=t,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}Qq.exports=an;var Nbe=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];an.prototype.clone=function(){let e=this._baseState,r={};Nbe.forEach(function(a){r[a]=e[a]});let n=new this.constructor(r.parent);return n._baseState=r,n};an.prototype._wrap=function(){let e=this._baseState;kbe.forEach(function(r){this[r]=function(){let a=new this.constructor(this);return e.children.push(a),a[r].apply(a,arguments)}},this)};an.prototype._init=function(e){let r=this._baseState;_a(r.parent===null),e.call(this),r.children=r.children.filter(function(n){return n._baseState.parent===this},this),_a.equal(r.children.length,1,"Root node can have only one child")};an.prototype._useArgs=function(e){let r=this._baseState,n=e.filter(function(a){return a instanceof this.constructor},this);e=e.filter(function(a){return!(a instanceof this.constructor)},this),n.length!==0&&(_a(r.children===null),r.children=n,n.forEach(function(a){a._baseState.parent=this},this)),e.length!==0&&(_a(r.args===null),r.args=e,r.reverseArgs=e.map(function(a){if(typeof a!="object"||a.constructor!==Object)return a;let s={};return Object.keys(a).forEach(function(o){o==(o|0)&&(o|=0);let u=a[o];s[u]=o}),s}))};Tbe.forEach(function(t){an.prototype[t]=function(){let r=this._baseState;throw new Error(t+" not implemented for encoding: "+r.enc)}});Xq.forEach(function(t){an.prototype[t]=function(){let r=this._baseState,n=Array.prototype.slice.call(arguments);return _a(r.tag===null),r.tag=t,this._useArgs(n),this}});an.prototype.use=function(e){_a(e);let r=this._baseState;return _a(r.use===null),r.use=e,this};an.prototype.optional=function(){let e=this._baseState;return e.optional=!0,this};an.prototype.def=function(e){let r=this._baseState;return _a(r.default===null),r.default=e,r.optional=!0,this};an.prototype.explicit=function(e){let r=this._baseState;return _a(r.explicit===null&&r.implicit===null),r.explicit=e,this};an.prototype.implicit=function(e){let r=this._baseState;return _a(r.explicit===null&&r.implicit===null),r.implicit=e,this};an.prototype.obj=function(){let e=this._baseState,r=Array.prototype.slice.call(arguments);return e.obj=!0,r.length!==0&&this._useArgs(r),this};an.prototype.key=function(e){let r=this._baseState;return _a(r.key===null),r.key=e,this};an.prototype.any=function(){let e=this._baseState;return e.any=!0,this};an.prototype.choice=function(e){let r=this._baseState;return _a(r.choice===null),r.choice=e,this._useArgs(Object.keys(e).map(function(n){return e[n]})),this};an.prototype.contains=function(e){let r=this._baseState;return _a(r.use===null),r.contains=e,this};an.prototype._decode=function(e,r){let n=this._baseState;if(n.parent===null)return e.wrapResult(n.children[0]._decode(e,r));let a=n.default,s=!0,o=null;if(n.key!==null&&(o=e.enterKey(n.key)),n.optional){let l=null;if(n.explicit!==null?l=n.explicit:n.implicit!==null?l=n.implicit:n.tag!==null&&(l=n.tag),l===null&&!n.any){let h=e.save();try{n.choice===null?this._decodeGeneric(n.tag,e,r):this._decodeChoice(e,r),s=!0}catch{s=!1}e.restore(h)}else if(s=this._peekTag(e,l,n.any),e.isError(s))return s}let u;if(n.obj&&s&&(u=e.enterObject()),s){if(n.explicit!==null){let h=this._decodeTag(e,n.explicit);if(e.isError(h))return h;e=h}let l=e.offset;if(n.use===null&&n.choice===null){let h;n.any&&(h=e.save());let p=this._decodeTag(e,n.implicit!==null?n.implicit:n.tag,n.any);if(e.isError(p))return p;n.any?a=e.raw(h):e=p}if(r&&r.track&&n.tag!==null&&r.track(e.path(),l,e.length,"tagged"),r&&r.track&&n.tag!==null&&r.track(e.path(),e.offset,e.length,"content"),n.any||(n.choice===null?a=this._decodeGeneric(n.tag,e,r):a=this._decodeChoice(e,r)),e.isError(a))return a;if(!n.any&&n.choice===null&&n.children!==null&&n.children.forEach(function(p){p._decode(e,r)}),n.contains&&(n.tag==="octstr"||n.tag==="bitstr")){let h=new Abe(a);a=this._getUse(n.contains,e._reporterState.obj)._decode(h,r)}}return n.obj&&s&&(a=e.leaveObject(u)),n.key!==null&&(a!==null||s===!0)?e.leaveKey(o,n.key,a):o!==null&&e.exitKey(o),a};an.prototype._decodeGeneric=function(e,r,n){let a=this._baseState;return e==="seq"||e==="set"?null:e==="seqof"||e==="setof"?this._decodeList(r,e,a.args[0],n):/str$/.test(e)?this._decodeStr(r,e,n):e==="objid"&&a.args?this._decodeObjid(r,a.args[0],a.args[1],n):e==="objid"?this._decodeObjid(r,null,null,n):e==="gentime"||e==="utctime"?this._decodeTime(r,e,n):e==="null_"?this._decodeNull(r,n):e==="bool"?this._decodeBool(r,n):e==="objDesc"?this._decodeStr(r,e,n):e==="int"||e==="enum"?this._decodeInt(r,a.args&&a.args[0],n):a.use!==null?this._getUse(a.use,r._reporterState.obj)._decode(r,n):r.error("unknown tag: "+e)};an.prototype._getUse=function(e,r){let n=this._baseState;return n.useDecoder=this._use(e,r),_a(n.useDecoder._baseState.parent===null),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder};an.prototype._decodeChoice=function(e,r){let n=this._baseState,a=null,s=!1;return Object.keys(n.choice).some(function(o){let u=e.save(),l=n.choice[o];try{let h=l._decode(e,r);if(e.isError(h))return!1;a={type:o,value:h},s=!0}catch{return e.restore(u),!1}return!0},this),s?a:e.error("Choice not matched")};an.prototype._createEncoderBuffer=function(e){return new Mbe(e,this.reporter)};an.prototype._encode=function(e,r,n){let a=this._baseState;if(a.default!==null&&a.default===e)return;let s=this._encodeValue(e,r,n);if(s!==void 0&&!this._skipDefault(s,r,n))return s};an.prototype._encodeValue=function(e,r,n){let a=this._baseState;if(a.parent===null)return a.children[0]._encode(e,r||new Ebe);let s=null;if(this.reporter=r,a.optional&&e===void 0)if(a.default!==null)e=a.default;else return;let o=null,u=!1;if(a.any)s=this._createEncoderBuffer(e);else if(a.choice)s=this._encodeChoice(e,r);else if(a.contains)o=this._getUse(a.contains,n)._encode(e,r),u=!0;else if(a.children)o=a.children.map(function(l){if(l._baseState.tag==="null_")return l._encode(null,r,e);if(l._baseState.key===null)return r.error("Child should have a key");let h=r.enterKey(l._baseState.key);if(typeof e!="object")return r.error("Child expected, but input is not object");let p=l._encode(e[l._baseState.key],r,e);return r.leaveKey(h),p},this).filter(function(l){return l}),o=this._createEncoderBuffer(o);else if(a.tag==="seqof"||a.tag==="setof"){if(!(a.args&&a.args.length===1))return r.error("Too many args for : "+a.tag);if(!Array.isArray(e))return r.error("seqof/setof, but data is not Array");let l=this.clone();l._baseState.implicit=null,o=this._createEncoderBuffer(e.map(function(h){let p=this._baseState;return this._getUse(p.args[0],e)._encode(h,r)},l))}else a.use!==null?s=this._getUse(a.use,n)._encode(e,r):(o=this._encodePrimitive(a.tag,e),u=!0);if(!a.any&&a.choice===null){let l=a.implicit!==null?a.implicit:a.tag,h=a.implicit===null?"universal":"context";l===null?a.use===null&&r.error("Tag could be omitted only for .use()"):a.use===null&&(s=this._encodeComposite(l,u,h,o))}return a.explicit!==null&&(s=this._encodeComposite(a.explicit,!1,"context",s)),s};an.prototype._encodeChoice=function(e,r){let n=this._baseState,a=n.choice[e.type];return a||_a(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),a._encode(e.value,r)};an.prototype._encodePrimitive=function(e,r){let n=this._baseState;if(/str$/.test(e))return this._encodeStr(r,e);if(e==="objid"&&n.args)return this._encodeObjid(r,n.reverseArgs[0],n.args[1]);if(e==="objid")return this._encodeObjid(r,null,null);if(e==="gentime"||e==="utctime")return this._encodeTime(r,e);if(e==="null_")return this._encodeNull();if(e==="int"||e==="enum")return this._encodeInt(r,n.args&&n.reverseArgs[0]);if(e==="bool")return this._encodeBool(r);if(e==="objDesc")return this._encodeStr(r,e);throw new Error("Unsupported tag: "+e)};an.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)};an.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}});var H_=ne(rh=>{"use strict";function e$(t){let e={};return Object.keys(t).forEach(function(r){(r|0)==r&&(r=r|0);let n=t[r];e[n]=r}),e}rh.tagClass={0:"universal",1:"application",2:"context",3:"private"};rh.tagClassByName=e$(rh.tagClass);rh.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"};rh.tagByName=e$(rh.tag)});var v6=ne((ett,n$)=>{"use strict";var Ibe=Et(),lf=U_().Buffer,t$=G_(),m6=H_();function r$(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new Ro,this.tree._init(t.body)}n$.exports=r$;r$.prototype.encode=function(e,r){return this.tree._encode(e,r).join()};function Ro(t){t$.call(this,"der",t)}Ibe(Ro,t$);Ro.prototype._encodeComposite=function(e,r,n,a){let s=Dbe(e,r,n,this.reporter);if(a.length<128){let l=lf.alloc(2);return l[0]=s,l[1]=a.length,this._createEncoderBuffer([l,a])}let o=1;for(let l=a.length;l>=256;l>>=8)o++;let u=lf.alloc(1+1+o);u[0]=s,u[1]=128|o;for(let l=1+o,h=a.length;h>0;l--,h>>=8)u[l]=h&255;return this._createEncoderBuffer([u,a])};Ro.prototype._encodeStr=function(e,r){if(r==="bitstr")return this._createEncoderBuffer([e.unused|0,e.data]);if(r==="bmpstr"){let n=lf.alloc(e.length*2);for(let a=0;a<e.length;a++)n.writeUInt16BE(e.charCodeAt(a),a*2);return this._createEncoderBuffer(n)}else return r==="numstr"?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):r==="printstr"?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(r)?this._createEncoderBuffer(e):r==="objDesc"?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+r+" unsupported")};Ro.prototype._encodeObjid=function(e,r,n){if(typeof e=="string"){if(!r)return this.reporter.error("string objid given, but no values map found");if(!r.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=r[e].split(/[\s.]+/g);for(let u=0;u<e.length;u++)e[u]|=0}else if(Array.isArray(e)){e=e.slice();for(let u=0;u<e.length;u++)e[u]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,e[0]*40+e[1])}let a=0;for(let u=0;u<e.length;u++){let l=e[u];for(a++;l>=128;l>>=7)a++}let s=lf.alloc(a),o=s.length-1;for(let u=e.length-1;u>=0;u--){let l=e[u];for(s[o--]=l&127;(l>>=7)>0;)s[o--]=128|l&127}return this._createEncoderBuffer(s)};function qs(t){return t<10?"0"+t:t}Ro.prototype._encodeTime=function(e,r){let n,a=new Date(e);return r==="gentime"?n=[qs(a.getUTCFullYear()),qs(a.getUTCMonth()+1),qs(a.getUTCDate()),qs(a.getUTCHours()),qs(a.getUTCMinutes()),qs(a.getUTCSeconds()),"Z"].join(""):r==="utctime"?n=[qs(a.getUTCFullYear()%100),qs(a.getUTCMonth()+1),qs(a.getUTCDate()),qs(a.getUTCHours()),qs(a.getUTCMinutes()),qs(a.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+r+" time is not supported yet"),this._encodeStr(n,"octstr")};Ro.prototype._encodeNull=function(){return this._createEncoderBuffer("")};Ro.prototype._encodeInt=function(e,r){if(typeof e=="string"){if(!r)return this.reporter.error("String int or enum given, but no values map");if(!r.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=r[e]}if(typeof e!="number"&&!lf.isBuffer(e)){let s=e.toArray();!e.sign&&s[0]&128&&s.unshift(0),e=lf.from(s)}if(lf.isBuffer(e)){let s=e.length;e.length===0&&s++;let o=lf.alloc(s);return e.copy(o),e.length===0&&(o[0]=0),this._createEncoderBuffer(o)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let n=1;for(let s=e;s>=256;s>>=8)n++;let a=new Array(n);for(let s=a.length-1;s>=0;s--)a[s]=e&255,e>>=8;return a[0]&128&&a.unshift(0),this._createEncoderBuffer(lf.from(a))};Ro.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)};Ro.prototype._use=function(e,r){return typeof e=="function"&&(e=e(r)),e._getEncoder("der").tree};Ro.prototype._skipDefault=function(e,r,n){let a=this._baseState,s;if(a.default===null)return!1;let o=e.join();if(a.defaultBuffer===void 0&&(a.defaultBuffer=this._encodeValue(a.default,r,n).join()),o.length!==a.defaultBuffer.length)return!1;for(s=0;s<o.length;s++)if(o[s]!==a.defaultBuffer[s])return!1;return!0};function Dbe(t,e,r,n){let a;if(t==="seqof"?t="seq":t==="setof"&&(t="set"),m6.tagByName.hasOwnProperty(t))a=m6.tagByName[t];else if(typeof t=="number"&&(t|0)===t)a=t;else return n.error("Unknown tag: "+t);return a>=31?n.error("Multi-octet tag encoding unsupported"):(e||(a|=32),a|=m6.tagClassByName[r||"universal"]<<6,a)}});var a$=ne((ttt,i$)=>{"use strict";var Obe=Et(),g6=v6();function y6(t){g6.call(this,t),this.enc="pem"}Obe(y6,g6);i$.exports=y6;y6.prototype.encode=function(e,r){let a=g6.prototype.encode.call(this,e).toString("base64"),s=["-----BEGIN "+r.label+"-----"];for(let o=0;o<a.length;o+=64)s.push(a.slice(o,o+64));return s.push("-----END "+r.label+"-----"),s.join(`
`)}});var b6=ne(o$=>{"use strict";var s$=o$;s$.der=v6();s$.pem=a$()});var _6=ne((ntt,d$)=>{"use strict";var Rbe=Et(),Cbe=d6(),u$=Sp().DecoderBuffer,l$=G_(),f$=H_();function c$(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new ts,this.tree._init(t.body)}d$.exports=c$;c$.prototype.decode=function(e,r){return u$.isDecoderBuffer(e)||(e=new u$(e,r)),this.tree._decode(e,r)};function ts(t){l$.call(this,"der",t)}Rbe(ts,l$);ts.prototype._peekTag=function(e,r,n){if(e.isEmpty())return!1;let a=e.save(),s=w6(e,'Failed to peek tag: "'+r+'"');return e.isError(s)?s:(e.restore(a),s.tag===r||s.tagStr===r||s.tagStr+"of"===r||n)};ts.prototype._decodeTag=function(e,r,n){let a=w6(e,'Failed to decode tag of "'+r+'"');if(e.isError(a))return a;let s=h$(e,a.primitive,'Failed to get length of "'+r+'"');if(e.isError(s))return s;if(!n&&a.tag!==r&&a.tagStr!==r&&a.tagStr+"of"!==r)return e.error('Failed to match tag: "'+r+'"');if(a.primitive||s!==null)return e.skip(s,'Failed to match body of: "'+r+'"');let o=e.save(),u=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(u)?u:(s=e.offset-o.offset,e.restore(o),e.skip(s,'Failed to match body of: "'+r+'"'))};ts.prototype._skipUntilEnd=function(e,r){for(;;){let n=w6(e,r);if(e.isError(n))return n;let a=h$(e,n.primitive,r);if(e.isError(a))return a;let s;if(n.primitive||a!==null?s=e.skip(a):s=this._skipUntilEnd(e,r),e.isError(s))return s;if(n.tagStr==="end")break}};ts.prototype._decodeList=function(e,r,n,a){let s=[];for(;!e.isEmpty();){let o=this._peekTag(e,"end");if(e.isError(o))return o;let u=n.decode(e,"der",a);if(e.isError(u)&&o)break;s.push(u)}return s};ts.prototype._decodeStr=function(e,r){if(r==="bitstr"){let n=e.readUInt8();return e.isError(n)?n:{unused:n,data:e.raw()}}else if(r==="bmpstr"){let n=e.raw();if(n.length%2===1)return e.error("Decoding of string type: bmpstr length mismatch");let a="";for(let s=0;s<n.length/2;s++)a+=String.fromCharCode(n.readUInt16BE(s*2));return a}else if(r==="numstr"){let n=e.raw().toString("ascii");return this._isNumstr(n)?n:e.error("Decoding of string type: numstr unsupported characters")}else{if(r==="octstr")return e.raw();if(r==="objDesc")return e.raw();if(r==="printstr"){let n=e.raw().toString("ascii");return this._isPrintstr(n)?n:e.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(r)?e.raw().toString():e.error("Decoding of string type: "+r+" unsupported")}};ts.prototype._decodeObjid=function(e,r,n){let a,s=[],o=0,u=0;for(;!e.isEmpty();)u=e.readUInt8(),o<<=7,o|=u&127,(u&128)===0&&(s.push(o),o=0);u&128&&s.push(o);let l=s[0]/40|0,h=s[0]%40;if(n?a=s:a=[l,h].concat(s.slice(1)),r){let p=r[a.join(" ")];p===void 0&&(p=r[a.join(".")]),p!==void 0&&(a=p)}return a};ts.prototype._decodeTime=function(e,r){let n=e.raw().toString(),a,s,o,u,l,h;if(r==="gentime")a=n.slice(0,4)|0,s=n.slice(4,6)|0,o=n.slice(6,8)|0,u=n.slice(8,10)|0,l=n.slice(10,12)|0,h=n.slice(12,14)|0;else if(r==="utctime")a=n.slice(0,2)|0,s=n.slice(2,4)|0,o=n.slice(4,6)|0,u=n.slice(6,8)|0,l=n.slice(8,10)|0,h=n.slice(10,12)|0,a<70?a=2e3+a:a=1900+a;else return e.error("Decoding "+r+" time is not supported yet");return Date.UTC(a,s-1,o,u,l,h,0)};ts.prototype._decodeNull=function(){return null};ts.prototype._decodeBool=function(e){let r=e.readUInt8();return e.isError(r)?r:r!==0};ts.prototype._decodeInt=function(e,r){let n=e.raw(),a=new Cbe(n);return r&&(a=r[a.toString(10)]||a),a};ts.prototype._use=function(e,r){return typeof e=="function"&&(e=e(r)),e._getDecoder("der").tree};function w6(t,e){let r=t.readUInt8(e);if(t.isError(r))return r;let n=f$.tagClass[r>>6],a=(r&32)===0;if((r&31)===31){let o=r;for(r=0;(o&128)===128;){if(o=t.readUInt8(e),t.isError(o))return o;r<<=7,r|=o&127}}else r&=31;let s=f$.tag[r];return{cls:n,primitive:a,tag:r,tagStr:s}}function h$(t,e,r){let n=t.readUInt8(r);if(t.isError(n))return n;if(!e&&n===128)return null;if((n&128)===0)return n;let a=n&127;if(a>4)return t.error("length octect is too long");n=0;for(let s=0;s<a;s++){n<<=8;let o=t.readUInt8(r);if(t.isError(o))return o;n|=o}return n}});var m$=ne((itt,p$)=>{"use strict";var Fbe=Et(),Bbe=U_().Buffer,x6=_6();function S6(t){x6.call(this,t),this.enc="pem"}Fbe(S6,x6);p$.exports=S6;S6.prototype.decode=function(e,r){let n=e.toString().split(/[\r\n]+/g),a=r.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/,o=-1,u=-1;for(let p=0;p<n.length;p++){let v=n[p].match(s);if(v!==null&&v[2]===a)if(o===-1){if(v[1]!=="BEGIN")break;o=p}else{if(v[1]!=="END")break;u=p;break}}if(o===-1||u===-1)throw new Error("PEM section not found for: "+a);let l=n.slice(o+1,u).join("");l.replace(/[^a-z0-9+/=]+/gi,"");let h=Bbe.from(l,"base64");return x6.prototype.decode.call(this,h,r)}});var E6=ne(g$=>{"use strict";var v$=g$;v$.der=_6();v$.pem=m$()});var b$=ne(y$=>{"use strict";var Lbe=b6(),Pbe=E6(),qbe=Et(),$be=y$;$be.define=function(e,r){return new Ep(e,r)};function Ep(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}Ep.prototype._createNamed=function(e){let r=this.name;function n(a){this._initNamed(a,r)}return qbe(n,e),n.prototype._initNamed=function(s,o){e.call(this,s,o)},new n(this)};Ep.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(Pbe[e])),this.decoders[e]};Ep.prototype.decode=function(e,r,n){return this._getDecoder(r).decode(e,n)};Ep.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(Lbe[e])),this.encoders[e]};Ep.prototype.encode=function(e,r,n){return this._getEncoder(r).encode(e,n)}});var _$=ne(w$=>{"use strict";var K_=w$;K_.Reporter=V_().Reporter;K_.DecoderBuffer=Sp().DecoderBuffer;K_.EncoderBuffer=Sp().EncoderBuffer;K_.Node=G_()});var E$=ne(S$=>{"use strict";var x$=S$;x$._reverse=function(e){let r={};return Object.keys(e).forEach(function(n){(n|0)==n&&(n=n|0);let a=e[n];r[a]=n}),r};x$.der=H_()});var M6=ne(M$=>{"use strict";var Mp=M$;Mp.bignum=d6();Mp.define=b$().define;Mp.base=_$();Mp.constants=E$();Mp.decoders=E6();Mp.encoders=b6()});var N$=ne((ltt,T$)=>{"use strict";var Co=M6(),A$=Co.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),zbe=Co.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),A6=Co.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),jbe=Co.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(A6),this.key("subjectPublicKey").bitstr())}),Ube=Co.define("RelativeDistinguishedName",function(){this.setof(zbe)}),Vbe=Co.define("RDNSequence",function(){this.seqof(Ube)}),k$=Co.define("Name",function(){this.choice({rdnSequence:this.use(Vbe)})}),Wbe=Co.define("Validity",function(){this.seq().obj(this.key("notBefore").use(A$),this.key("notAfter").use(A$))}),Gbe=Co.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),Hbe=Co.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(A6),this.key("issuer").use(k$),this.key("validity").use(Wbe),this.key("subject").use(k$),this.key("subjectPublicKeyInfo").use(jbe),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(Gbe).optional())}),Kbe=Co.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(Hbe),this.key("signatureAlgorithm").use(A6),this.key("signatureValue").bitstr())});T$.exports=Kbe});var D$=ne(Bo=>{"use strict";var Fo=M6();Bo.certificate=N$();var Zbe=Fo.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});Bo.RSAPrivateKey=Zbe;var Jbe=Fo.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});Bo.RSAPublicKey=Jbe;var Ybe=Fo.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(I$),this.key("subjectPublicKey").bitstr())});Bo.PublicKey=Ybe;var I$=Fo.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),Xbe=Fo.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(I$),this.key("subjectPrivateKey").octstr())});Bo.PrivateKey=Xbe;var Qbe=Fo.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});Bo.EncryptedPrivateKey=Qbe;var ewe=Fo.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});Bo.DSAPrivateKey=ewe;Bo.DSAparam=Fo.define("DSAparam",function(){this.int()});var twe=Fo.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(rwe),this.key("publicKey").optional().explicit(1).bitstr())});Bo.ECPrivateKey=twe;var rwe=Fo.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});Bo.signature=Fo.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})});var O$=ne((htt,nwe)=>{nwe.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}});var C$=ne((dtt,R$)=>{var iwe=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,awe=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,swe=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,owe=lg(),uwe=r_(),Z_=fr().Buffer;R$.exports=function(t,e){var r=t.toString(),n=r.match(iwe),a;if(n){var o="aes"+n[1],u=Z_.from(n[2],"hex"),l=Z_.from(n[3].replace(/[\r\n]/g,""),"base64"),h=owe(e,u.slice(0,8),parseInt(n[1],10)).key,p=[],v=uwe.createDecipheriv(o,h,u);p.push(v.update(l)),p.push(v.final()),a=Z_.concat(p)}else{var s=r.match(swe);a=Z_.from(s[2].replace(/[\r\n]/g,""),"base64")}var y=r.match(awe)[1];return{tag:y,data:a}}});var Eg=ne((ptt,B$)=>{var Pa=D$(),fwe=O$(),lwe=C$(),cwe=r_(),hwe=zk(),k6=fr().Buffer;B$.exports=F$;function F$(t){var e;typeof t=="object"&&!k6.isBuffer(t)&&(e=t.passphrase,t=t.key),typeof t=="string"&&(t=k6.from(t));var r=lwe(t,e),n=r.tag,a=r.data,s,o;switch(n){case"CERTIFICATE":o=Pa.certificate.decode(a,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(o||(o=Pa.PublicKey.decode(a,"der")),s=o.algorithm.algorithm.join("."),s){case"1.2.840.113549.1.1.1":return Pa.RSAPublicKey.decode(o.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return o.subjectPrivateKey=o.subjectPublicKey,{type:"ec",data:o};case"1.2.840.10040.4.1":return o.algorithm.params.pub_key=Pa.DSAparam.decode(o.subjectPublicKey.data,"der"),{type:"dsa",data:o.algorithm.params};default:throw new Error("unknown key id "+s)}case"ENCRYPTED PRIVATE KEY":a=Pa.EncryptedPrivateKey.decode(a,"der"),a=dwe(a,e);case"PRIVATE KEY":switch(o=Pa.PrivateKey.decode(a,"der"),s=o.algorithm.algorithm.join("."),s){case"1.2.840.113549.1.1.1":return Pa.RSAPrivateKey.decode(o.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:o.algorithm.curve,privateKey:Pa.ECPrivateKey.decode(o.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return o.algorithm.params.priv_key=Pa.DSAparam.decode(o.subjectPrivateKey,"der"),{type:"dsa",params:o.algorithm.params};default:throw new Error("unknown key id "+s)}case"RSA PUBLIC KEY":return Pa.RSAPublicKey.decode(a,"der");case"RSA PRIVATE KEY":return Pa.RSAPrivateKey.decode(a,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:Pa.DSAPrivateKey.decode(a,"der")};case"EC PRIVATE KEY":return a=Pa.ECPrivateKey.decode(a,"der"),{curve:a.parameters.value,privateKey:a.privateKey};default:throw new Error("unknown key type "+n)}}F$.signature=Pa.signature;function dwe(t,e){var r=t.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),a=fwe[t.algorithm.decrypt.cipher.algo.join(".")],s=t.algorithm.decrypt.cipher.iv,o=t.subjectPrivateKey,u=parseInt(a.split("-")[1],10)/8,l=hwe.pbkdf2Sync(e,r,n,u,"sha1"),h=cwe.createDecipheriv(a,l,s),p=[];return p.push(h.update(o)),p.push(h.final()),k6.concat(p)}});var T6=ne((mtt,pwe)=>{pwe.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}});var q$=ne((vtt,Y_)=>{var ua=u_().Buffer,nh=Dk(),mwe=E_(),vwe=z_().ec,J_=S_(),gwe=Eg(),ywe=T6();function bwe(t,e,r,n,a){var s=gwe(e);if(s.curve){if(n!=="ecdsa"&&n!=="ecdsa/rsa")throw new Error("wrong private key type");return wwe(t,s)}else if(s.type==="dsa"){if(n!=="dsa")throw new Error("wrong private key type");return _we(t,s,r)}else if(n!=="rsa"&&n!=="ecdsa/rsa")throw new Error("wrong private key type");t=ua.concat([a,t]);for(var o=s.modulus.byteLength(),u=[0,1];t.length+u.length+1<o;)u.push(255);u.push(0);for(var l=-1;++l<t.length;)u.push(t[l]);var h=mwe(u,s);return h}function wwe(t,e){var r=ywe[e.curve.join(".")];if(!r)throw new Error("unknown curve "+e.curve.join("."));var n=new vwe(r),a=n.keyFromPrivate(e.privateKey),s=a.sign(t);return ua.from(s.toDER())}function _we(t,e,r){for(var n=e.params.priv_key,a=e.params.p,s=e.params.q,o=e.params.g,u=new J_(0),l,h=N6(t,s).mod(s),p=!1,v=L$(n,s,t,r);p===!1;)l=P$(s,v,r),u=Ewe(o,l,a,s),p=l.invm(s).imul(h.add(n.mul(u))).mod(s),p.cmpn(0)===0&&(p=!1,u=new J_(0));return xwe(u,p)}function xwe(t,e){t=t.toArray(),e=e.toArray(),t[0]&128&&(t=[0].concat(t)),e[0]&128&&(e=[0].concat(e));var r=t.length+e.length+4,n=[48,r,2,t.length];return n=n.concat(t,[2,e.length],e),ua.from(n)}function L$(t,e,r,n){if(t=ua.from(t.toArray()),t.length<e.byteLength()){var a=ua.alloc(e.byteLength()-t.length);t=ua.concat([a,t])}var s=r.length,o=Swe(r,e),u=ua.alloc(s);u.fill(1);var l=ua.alloc(s);return l=nh(n,l).update(u).update(ua.from([0])).update(t).update(o).digest(),u=nh(n,l).update(u).digest(),l=nh(n,l).update(u).update(ua.from([1])).update(t).update(o).digest(),u=nh(n,l).update(u).digest(),{k:l,v:u}}function N6(t,e){var r=new J_(t),n=(t.length<<3)-e.bitLength();return n>0&&r.ishrn(n),r}function Swe(t,e){t=N6(t,e),t=t.mod(e);var r=ua.from(t.toArray());if(r.length<e.byteLength()){var n=ua.alloc(e.byteLength()-r.length);r=ua.concat([n,r])}return r}function P$(t,e,r){var n,a;do{for(n=ua.alloc(0);n.length*8<t.bitLength();)e.v=nh(r,e.k).update(e.v).digest(),n=ua.concat([n,e.v]);a=N6(n,t),e.k=nh(r,e.k).update(e.v).update(ua.from([0])).digest(),e.v=nh(r,e.k).update(e.v).digest()}while(a.cmp(t)!==-1);return a}function Ewe(t,e,r,n){return t.toRed(J_.mont(r)).redPow(e).fromRed().mod(n)}Y_.exports=bwe;Y_.exports.getKey=L$;Y_.exports.makeKey=P$});var U$=ne((gtt,j$)=>{var I6=u_().Buffer,Mg=S_(),Mwe=z_().ec,z$=Eg(),Awe=T6();function kwe(t,e,r,n,a){var s=z$(r);if(s.type==="ec"){if(n!=="ecdsa"&&n!=="ecdsa/rsa")throw new Error("wrong public key type");return Twe(t,e,s)}else if(s.type==="dsa"){if(n!=="dsa")throw new Error("wrong public key type");return Nwe(t,e,s)}else if(n!=="rsa"&&n!=="ecdsa/rsa")throw new Error("wrong public key type");e=I6.concat([a,e]);for(var o=s.modulus.byteLength(),u=[1],l=0;e.length+u.length+2<o;)u.push(255),l++;u.push(0);for(var h=-1;++h<e.length;)u.push(e[h]);u=I6.from(u);var p=Mg.mont(s.modulus);t=new Mg(t).toRed(p),t=t.redPow(new Mg(s.publicExponent)),t=I6.from(t.fromRed().toArray());var v=l<8?1:0;for(o=Math.min(t.length,u.length),t.length!==u.length&&(v=1),h=-1;++h<o;)v|=t[h]^u[h];return v===0}function Twe(t,e,r){var n=Awe[r.data.algorithm.curve.join(".")];if(!n)throw new Error("unknown curve "+r.data.algorithm.curve.join("."));var a=new Mwe(n),s=r.data.subjectPrivateKey.data;return a.verify(e,t,s)}function Nwe(t,e,r){var n=r.data.p,a=r.data.q,s=r.data.g,o=r.data.pub_key,u=z$.signature.decode(t,"der"),l=u.s,h=u.r;$$(l,a),$$(h,a);var p=Mg.mont(n),v=l.invm(a),y=s.toRed(p).redPow(new Mg(e).mul(v).mod(a)).fromRed().mul(o.toRed(p).redPow(h.mul(v).mod(a)).fromRed()).mod(n).mod(a);return y.cmp(h)===0}function $$(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}j$.exports=kwe});var Z$=ne((ytt,K$)=>{var X_=u_().Buffer,G$=Zd(),Q_=wP(),H$=Et(),Iwe=q$(),Dwe=U$(),ih=Ok();Object.keys(ih).forEach(function(t){ih[t].id=X_.from(ih[t].id,"hex"),ih[t.toLowerCase()]=ih[t]});function Ag(t){Q_.Writable.call(this);var e=ih[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=G$(e.hash),this._tag=e.id,this._signType=e.sign}H$(Ag,Q_.Writable);Ag.prototype._write=function(e,r,n){this._hash.update(e),n()};Ag.prototype.update=function(e,r){return typeof e=="string"&&(e=X_.from(e,r)),this._hash.update(e),this};Ag.prototype.sign=function(e,r){this.end();var n=this._hash.digest(),a=Iwe(n,e,this._hashType,this._signType,this._tag);return r?a.toString(r):a};function kg(t){Q_.Writable.call(this);var e=ih[t];if(!e)throw new Error("Unknown message digest");this._hash=G$(e.hash),this._tag=e.id,this._signType=e.sign}H$(kg,Q_.Writable);kg.prototype._write=function(e,r,n){this._hash.update(e),n()};kg.prototype.update=function(e,r){return typeof e=="string"&&(e=X_.from(e,r)),this._hash.update(e),this};kg.prototype.verify=function(e,r,n){typeof r=="string"&&(r=X_.from(r,n)),this.end();var a=this._hash.digest();return Dwe(r,a,e,this._signType,this._tag)};function V$(t){return new Ag(t)}function W$(t){return new kg(t)}K$.exports={Sign:V$,Verify:W$,createSign:V$,createVerify:W$}});var Y$=ne((J$,D6)=>{(function(t,e){"use strict";function r(M,f){if(!M)throw new Error(f||"Assertion failed")}function n(M,f){M.super_=f;var d=function(){};d.prototype=f.prototype,M.prototype=new d,M.prototype.constructor=M}function a(M,f,d){if(a.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((f==="le"||f==="be")&&(d=f,f=10),this._init(M||0,f||10,d||"be"))}typeof t=="object"?t.exports=a:e.BN=a,a.BN=a,a.wordSize=26;var s;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?s=window.Buffer:s=mn().Buffer}catch{}a.isBN=function(f){return f instanceof a?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===a.wordSize&&Array.isArray(f.words)},a.max=function(f,d){return f.cmp(d)>0?f:d},a.min=function(f,d){return f.cmp(d)<0?f:d},a.prototype._init=function(f,d,g){if(typeof f=="number")return this._initNumber(f,d,g);if(typeof f=="object")return this._initArray(f,d,g);d==="hex"&&(d=16),r(d===(d|0)&&d>=2&&d<=36),f=f.toString().replace(/\s+/g,"");var m=0;f[0]==="-"&&(m++,this.negative=1),m<f.length&&(d===16?this._parseHex(f,m,g):(this._parseBase(f,d,m),g==="le"&&this._initArray(this.toArray(),d,g)))},a.prototype._initNumber=function(f,d,g){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(r(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),d,g)},a.prototype._initArray=function(f,d,g){if(r(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var b,E,k=0;if(g==="be")for(m=f.length-1,b=0;m>=0;m-=3)E=f[m]|f[m-1]<<8|f[m-2]<<16,this.words[b]|=E<<k&67108863,this.words[b+1]=E>>>26-k&67108863,k+=24,k>=26&&(k-=26,b++);else if(g==="le")for(m=0,b=0;m<f.length;m+=3)E=f[m]|f[m+1]<<8|f[m+2]<<16,this.words[b]|=E<<k&67108863,this.words[b+1]=E>>>26-k&67108863,k+=24,k>=26&&(k-=26,b++);return this.strip()};function o(M,f){var d=M.charCodeAt(f);return d>=65&&d<=70?d-55:d>=97&&d<=102?d-87:d-48&15}function u(M,f,d){var g=o(M,d);return d-1>=f&&(g|=o(M,d-1)<<4),g}a.prototype._parseHex=function(f,d,g){this.length=Math.ceil((f.length-d)/6),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var b=0,E=0,k;if(g==="be")for(m=f.length-1;m>=d;m-=2)k=u(f,d,m)<<b,this.words[E]|=k&67108863,b>=18?(b-=18,E+=1,this.words[E]|=k>>>26):b+=8;else{var w=f.length-d;for(m=w%2===0?d+1:d;m<f.length;m+=2)k=u(f,d,m)<<b,this.words[E]|=k&67108863,b>=18?(b-=18,E+=1,this.words[E]|=k>>>26):b+=8}this.strip()};function l(M,f,d,g){for(var m=0,b=Math.min(M.length,d),E=f;E<b;E++){var k=M.charCodeAt(E)-48;m*=g,k>=49?m+=k-49+10:k>=17?m+=k-17+10:m+=k}return m}a.prototype._parseBase=function(f,d,g){this.words=[0],this.length=1;for(var m=0,b=1;b<=67108863;b*=d)m++;m--,b=b/d|0;for(var E=f.length-g,k=E%m,w=Math.min(E,E-k)+g,c=0,_=g;_<w;_+=m)c=l(f,_,_+m,d),this.imuln(b),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(k!==0){var R=1;for(c=l(f,_,f.length,d),_=0;_<k;_++)R*=d;this.imuln(R),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},a.prototype.copy=function(f){f.words=new Array(this.length);for(var d=0;d<this.length;d++)f.words[d]=this.words[d];f.length=this.length,f.negative=this.negative,f.red=this.red},a.prototype.clone=function(){var f=new a(null);return this.copy(f),f},a.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(f,d){f=f||10,d=d|0||1;var g;if(f===16||f==="hex"){g="";for(var m=0,b=0,E=0;E<this.length;E++){var k=this.words[E],w=((k<<m|b)&16777215).toString(16);b=k>>>24-m&16777215,b!==0||E!==this.length-1?g=h[6-w.length]+w+g:g=w+g,m+=2,m>=26&&(m-=26,E--)}for(b!==0&&(g=b.toString(16)+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(f===(f|0)&&f>=2&&f<=36){var c=p[f],_=v[f];g="";var R=this.clone();for(R.negative=0;!R.isZero();){var O=R.modn(_).toString(f);R=R.idivn(_),R.isZero()?g=O+g:g=h[c-O.length]+O+g}for(this.isZero()&&(g="0"+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}r(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(f,d){return r(typeof s!="undefined"),this.toArrayLike(s,f,d)},a.prototype.toArray=function(f,d){return this.toArrayLike(Array,f,d)},a.prototype.toArrayLike=function(f,d,g){var m=this.byteLength(),b=g||Math.max(1,m);r(m<=b,"byte array longer than desired length"),r(b>0,"Requested array length <= 0"),this.strip();var E=d==="le",k=new f(b),w,c,_=this.clone();if(E){for(c=0;!_.isZero();c++)w=_.andln(255),_.iushrn(8),k[c]=w;for(;c<b;c++)k[c]=0}else{for(c=0;c<b-m;c++)k[c]=0;for(c=0;!_.isZero();c++)w=_.andln(255),_.iushrn(8),k[b-c-1]=w}return k},Math.clz32?a.prototype._countBits=function(f){return 32-Math.clz32(f)}:a.prototype._countBits=function(f){var d=f,g=0;return d>=4096&&(g+=13,d>>>=13),d>=64&&(g+=7,d>>>=7),d>=8&&(g+=4,d>>>=4),d>=2&&(g+=2,d>>>=2),g+d},a.prototype._zeroBits=function(f){if(f===0)return 26;var d=f,g=0;return(d&8191)===0&&(g+=13,d>>>=13),(d&127)===0&&(g+=7,d>>>=7),(d&15)===0&&(g+=4,d>>>=4),(d&3)===0&&(g+=2,d>>>=2),(d&1)===0&&g++,g},a.prototype.bitLength=function(){var f=this.words[this.length-1],d=this._countBits(f);return(this.length-1)*26+d};function y(M){for(var f=new Array(M.bitLength()),d=0;d<f.length;d++){var g=d/26|0,m=d%26;f[d]=(M.words[g]&1<<m)>>>m}return f}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,d=0;d<this.length;d++){var g=this._zeroBits(this.words[d]);if(f+=g,g!==26)break}return f},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},a.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var d=0;d<f.length;d++)this.words[d]=this.words[d]|f.words[d];return this.strip()},a.prototype.ior=function(f){return r((this.negative|f.negative)===0),this.iuor(f)},a.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},a.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},a.prototype.iuand=function(f){var d;this.length>f.length?d=f:d=this;for(var g=0;g<d.length;g++)this.words[g]=this.words[g]&f.words[g];return this.length=d.length,this.strip()},a.prototype.iand=function(f){return r((this.negative|f.negative)===0),this.iuand(f)},a.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},a.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},a.prototype.iuxor=function(f){var d,g;this.length>f.length?(d=this,g=f):(d=f,g=this);for(var m=0;m<g.length;m++)this.words[m]=d.words[m]^g.words[m];if(this!==d)for(;m<d.length;m++)this.words[m]=d.words[m];return this.length=d.length,this.strip()},a.prototype.ixor=function(f){return r((this.negative|f.negative)===0),this.iuxor(f)},a.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},a.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},a.prototype.inotn=function(f){r(typeof f=="number"&&f>=0);var d=Math.ceil(f/26)|0,g=f%26;this._expand(d),g>0&&d--;for(var m=0;m<d;m++)this.words[m]=~this.words[m]&67108863;return g>0&&(this.words[m]=~this.words[m]&67108863>>26-g),this.strip()},a.prototype.notn=function(f){return this.clone().inotn(f)},a.prototype.setn=function(f,d){r(typeof f=="number"&&f>=0);var g=f/26|0,m=f%26;return this._expand(g+1),d?this.words[g]=this.words[g]|1<<m:this.words[g]=this.words[g]&~(1<<m),this.strip()},a.prototype.iadd=function(f){var d;if(this.negative!==0&&f.negative===0)return this.negative=0,d=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,d=this.isub(f),f.negative=1,d._normSign();var g,m;this.length>f.length?(g=this,m=f):(g=f,m=this);for(var b=0,E=0;E<m.length;E++)d=(g.words[E]|0)+(m.words[E]|0)+b,this.words[E]=d&67108863,b=d>>>26;for(;b!==0&&E<g.length;E++)d=(g.words[E]|0)+b,this.words[E]=d&67108863,b=d>>>26;if(this.length=g.length,b!==0)this.words[this.length]=b,this.length++;else if(g!==this)for(;E<g.length;E++)this.words[E]=g.words[E];return this},a.prototype.add=function(f){var d;return f.negative!==0&&this.negative===0?(f.negative=0,d=this.sub(f),f.negative^=1,d):f.negative===0&&this.negative!==0?(this.negative=0,d=f.sub(this),this.negative=1,d):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},a.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var d=this.iadd(f);return f.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var g=this.cmp(f);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var m,b;g>0?(m=this,b=f):(m=f,b=this);for(var E=0,k=0;k<b.length;k++)d=(m.words[k]|0)-(b.words[k]|0)+E,E=d>>26,this.words[k]=d&67108863;for(;E!==0&&k<m.length;k++)d=(m.words[k]|0)+E,E=d>>26,this.words[k]=d&67108863;if(E===0&&k<m.length&&m!==this)for(;k<m.length;k++)this.words[k]=m.words[k];return this.length=Math.max(this.length,k),m!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(f){return this.clone().isub(f)};function S(M,f,d){d.negative=f.negative^M.negative;var g=M.length+f.length|0;d.length=g,g=g-1|0;var m=M.words[0]|0,b=f.words[0]|0,E=m*b,k=E&67108863,w=E/67108864|0;d.words[0]=k;for(var c=1;c<g;c++){for(var _=w>>>26,R=w&67108863,O=Math.min(c,f.length-1),F=Math.max(0,c-M.length+1);F<=O;F++){var U=c-F|0;m=M.words[U]|0,b=f.words[F]|0,E=m*b+R,_+=E/67108864|0,R=E&67108863}d.words[c]=R|0,w=_|0}return w!==0?d.words[c]=w|0:d.length--,d.strip()}var A=function(f,d,g){var m=f.words,b=d.words,E=g.words,k=0,w,c,_,R=m[0]|0,O=R&8191,F=R>>>13,U=m[1]|0,H=U&8191,J=U>>>13,fe=m[2]|0,B=fe&8191,q=fe>>>13,Y=m[3]|0,X=Y&8191,Q=Y>>>13,be=m[4]|0,ue=be&8191,me=be>>>13,vt=m[5]|0,xe=vt&8191,le=vt>>>13,qt=m[6]|0,we=qt&8191,Te=qt>>>13,at=m[7]|0,ee=at&8191,ie=at>>>13,tt=m[8]|0,ae=tt&8191,de=tt>>>13,Ze=m[9]|0,he=Ze&8191,Se=Ze>>>13,At=b[0]|0,_e=At&8191,Ie=At>>>13,nr=b[1]|0,Ne=nr&8191,Re=nr>>>13,Qn=b[2]|0,qe=Qn&8191,Fe=Qn>>>13,$n=b[3]|0,$e=$n&8191,Be=$n>>>13,zn=b[4]|0,Le=zn&8191,ze=zn>>>13,ei=b[5]|0,Pe=ei&8191,Oe=ei>>>13,jn=b[6]|0,je=jn&8191,Ue=jn>>>13,xr=b[7]|0,ke=xr&8191,Ve=xr>>>13,kn=b[8]|0,De=kn&8191,We=kn>>>13,On=b[9]|0,Ge=On&8191,He=On>>>13;g.negative=f.negative^d.negative,g.length=19,w=Math.imul(O,_e),c=Math.imul(O,Ie),c=c+Math.imul(F,_e)|0,_=Math.imul(F,Ie);var rn=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(rn>>>26)|0,rn&=67108863,w=Math.imul(H,_e),c=Math.imul(H,Ie),c=c+Math.imul(J,_e)|0,_=Math.imul(J,Ie),w=w+Math.imul(O,Ne)|0,c=c+Math.imul(O,Re)|0,c=c+Math.imul(F,Ne)|0,_=_+Math.imul(F,Re)|0;var Ot=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,w=Math.imul(B,_e),c=Math.imul(B,Ie),c=c+Math.imul(q,_e)|0,_=Math.imul(q,Ie),w=w+Math.imul(H,Ne)|0,c=c+Math.imul(H,Re)|0,c=c+Math.imul(J,Ne)|0,_=_+Math.imul(J,Re)|0,w=w+Math.imul(O,qe)|0,c=c+Math.imul(O,Fe)|0,c=c+Math.imul(F,qe)|0,_=_+Math.imul(F,Fe)|0;var Rt=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,w=Math.imul(X,_e),c=Math.imul(X,Ie),c=c+Math.imul(Q,_e)|0,_=Math.imul(Q,Ie),w=w+Math.imul(B,Ne)|0,c=c+Math.imul(B,Re)|0,c=c+Math.imul(q,Ne)|0,_=_+Math.imul(q,Re)|0,w=w+Math.imul(H,qe)|0,c=c+Math.imul(H,Fe)|0,c=c+Math.imul(J,qe)|0,_=_+Math.imul(J,Fe)|0,w=w+Math.imul(O,$e)|0,c=c+Math.imul(O,Be)|0,c=c+Math.imul(F,$e)|0,_=_+Math.imul(F,Be)|0;var Lr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,w=Math.imul(ue,_e),c=Math.imul(ue,Ie),c=c+Math.imul(me,_e)|0,_=Math.imul(me,Ie),w=w+Math.imul(X,Ne)|0,c=c+Math.imul(X,Re)|0,c=c+Math.imul(Q,Ne)|0,_=_+Math.imul(Q,Re)|0,w=w+Math.imul(B,qe)|0,c=c+Math.imul(B,Fe)|0,c=c+Math.imul(q,qe)|0,_=_+Math.imul(q,Fe)|0,w=w+Math.imul(H,$e)|0,c=c+Math.imul(H,Be)|0,c=c+Math.imul(J,$e)|0,_=_+Math.imul(J,Be)|0,w=w+Math.imul(O,Le)|0,c=c+Math.imul(O,ze)|0,c=c+Math.imul(F,Le)|0,_=_+Math.imul(F,ze)|0;var Pr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,w=Math.imul(xe,_e),c=Math.imul(xe,Ie),c=c+Math.imul(le,_e)|0,_=Math.imul(le,Ie),w=w+Math.imul(ue,Ne)|0,c=c+Math.imul(ue,Re)|0,c=c+Math.imul(me,Ne)|0,_=_+Math.imul(me,Re)|0,w=w+Math.imul(X,qe)|0,c=c+Math.imul(X,Fe)|0,c=c+Math.imul(Q,qe)|0,_=_+Math.imul(Q,Fe)|0,w=w+Math.imul(B,$e)|0,c=c+Math.imul(B,Be)|0,c=c+Math.imul(q,$e)|0,_=_+Math.imul(q,Be)|0,w=w+Math.imul(H,Le)|0,c=c+Math.imul(H,ze)|0,c=c+Math.imul(J,Le)|0,_=_+Math.imul(J,ze)|0,w=w+Math.imul(O,Pe)|0,c=c+Math.imul(O,Oe)|0,c=c+Math.imul(F,Pe)|0,_=_+Math.imul(F,Oe)|0;var qr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(qr>>>26)|0,qr&=67108863,w=Math.imul(we,_e),c=Math.imul(we,Ie),c=c+Math.imul(Te,_e)|0,_=Math.imul(Te,Ie),w=w+Math.imul(xe,Ne)|0,c=c+Math.imul(xe,Re)|0,c=c+Math.imul(le,Ne)|0,_=_+Math.imul(le,Re)|0,w=w+Math.imul(ue,qe)|0,c=c+Math.imul(ue,Fe)|0,c=c+Math.imul(me,qe)|0,_=_+Math.imul(me,Fe)|0,w=w+Math.imul(X,$e)|0,c=c+Math.imul(X,Be)|0,c=c+Math.imul(Q,$e)|0,_=_+Math.imul(Q,Be)|0,w=w+Math.imul(B,Le)|0,c=c+Math.imul(B,ze)|0,c=c+Math.imul(q,Le)|0,_=_+Math.imul(q,ze)|0,w=w+Math.imul(H,Pe)|0,c=c+Math.imul(H,Oe)|0,c=c+Math.imul(J,Pe)|0,_=_+Math.imul(J,Oe)|0,w=w+Math.imul(O,je)|0,c=c+Math.imul(O,Ue)|0,c=c+Math.imul(F,je)|0,_=_+Math.imul(F,Ue)|0;var $r=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+($r>>>26)|0,$r&=67108863,w=Math.imul(ee,_e),c=Math.imul(ee,Ie),c=c+Math.imul(ie,_e)|0,_=Math.imul(ie,Ie),w=w+Math.imul(we,Ne)|0,c=c+Math.imul(we,Re)|0,c=c+Math.imul(Te,Ne)|0,_=_+Math.imul(Te,Re)|0,w=w+Math.imul(xe,qe)|0,c=c+Math.imul(xe,Fe)|0,c=c+Math.imul(le,qe)|0,_=_+Math.imul(le,Fe)|0,w=w+Math.imul(ue,$e)|0,c=c+Math.imul(ue,Be)|0,c=c+Math.imul(me,$e)|0,_=_+Math.imul(me,Be)|0,w=w+Math.imul(X,Le)|0,c=c+Math.imul(X,ze)|0,c=c+Math.imul(Q,Le)|0,_=_+Math.imul(Q,ze)|0,w=w+Math.imul(B,Pe)|0,c=c+Math.imul(B,Oe)|0,c=c+Math.imul(q,Pe)|0,_=_+Math.imul(q,Oe)|0,w=w+Math.imul(H,je)|0,c=c+Math.imul(H,Ue)|0,c=c+Math.imul(J,je)|0,_=_+Math.imul(J,Ue)|0,w=w+Math.imul(O,ke)|0,c=c+Math.imul(O,Ve)|0,c=c+Math.imul(F,ke)|0,_=_+Math.imul(F,Ve)|0;var zr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(zr>>>26)|0,zr&=67108863,w=Math.imul(ae,_e),c=Math.imul(ae,Ie),c=c+Math.imul(de,_e)|0,_=Math.imul(de,Ie),w=w+Math.imul(ee,Ne)|0,c=c+Math.imul(ee,Re)|0,c=c+Math.imul(ie,Ne)|0,_=_+Math.imul(ie,Re)|0,w=w+Math.imul(we,qe)|0,c=c+Math.imul(we,Fe)|0,c=c+Math.imul(Te,qe)|0,_=_+Math.imul(Te,Fe)|0,w=w+Math.imul(xe,$e)|0,c=c+Math.imul(xe,Be)|0,c=c+Math.imul(le,$e)|0,_=_+Math.imul(le,Be)|0,w=w+Math.imul(ue,Le)|0,c=c+Math.imul(ue,ze)|0,c=c+Math.imul(me,Le)|0,_=_+Math.imul(me,ze)|0,w=w+Math.imul(X,Pe)|0,c=c+Math.imul(X,Oe)|0,c=c+Math.imul(Q,Pe)|0,_=_+Math.imul(Q,Oe)|0,w=w+Math.imul(B,je)|0,c=c+Math.imul(B,Ue)|0,c=c+Math.imul(q,je)|0,_=_+Math.imul(q,Ue)|0,w=w+Math.imul(H,ke)|0,c=c+Math.imul(H,Ve)|0,c=c+Math.imul(J,ke)|0,_=_+Math.imul(J,Ve)|0,w=w+Math.imul(O,De)|0,c=c+Math.imul(O,We)|0,c=c+Math.imul(F,De)|0,_=_+Math.imul(F,We)|0;var jr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(jr>>>26)|0,jr&=67108863,w=Math.imul(he,_e),c=Math.imul(he,Ie),c=c+Math.imul(Se,_e)|0,_=Math.imul(Se,Ie),w=w+Math.imul(ae,Ne)|0,c=c+Math.imul(ae,Re)|0,c=c+Math.imul(de,Ne)|0,_=_+Math.imul(de,Re)|0,w=w+Math.imul(ee,qe)|0,c=c+Math.imul(ee,Fe)|0,c=c+Math.imul(ie,qe)|0,_=_+Math.imul(ie,Fe)|0,w=w+Math.imul(we,$e)|0,c=c+Math.imul(we,Be)|0,c=c+Math.imul(Te,$e)|0,_=_+Math.imul(Te,Be)|0,w=w+Math.imul(xe,Le)|0,c=c+Math.imul(xe,ze)|0,c=c+Math.imul(le,Le)|0,_=_+Math.imul(le,ze)|0,w=w+Math.imul(ue,Pe)|0,c=c+Math.imul(ue,Oe)|0,c=c+Math.imul(me,Pe)|0,_=_+Math.imul(me,Oe)|0,w=w+Math.imul(X,je)|0,c=c+Math.imul(X,Ue)|0,c=c+Math.imul(Q,je)|0,_=_+Math.imul(Q,Ue)|0,w=w+Math.imul(B,ke)|0,c=c+Math.imul(B,Ve)|0,c=c+Math.imul(q,ke)|0,_=_+Math.imul(q,Ve)|0,w=w+Math.imul(H,De)|0,c=c+Math.imul(H,We)|0,c=c+Math.imul(J,De)|0,_=_+Math.imul(J,We)|0,w=w+Math.imul(O,Ge)|0,c=c+Math.imul(O,He)|0,c=c+Math.imul(F,Ge)|0,_=_+Math.imul(F,He)|0;var Ur=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,w=Math.imul(he,Ne),c=Math.imul(he,Re),c=c+Math.imul(Se,Ne)|0,_=Math.imul(Se,Re),w=w+Math.imul(ae,qe)|0,c=c+Math.imul(ae,Fe)|0,c=c+Math.imul(de,qe)|0,_=_+Math.imul(de,Fe)|0,w=w+Math.imul(ee,$e)|0,c=c+Math.imul(ee,Be)|0,c=c+Math.imul(ie,$e)|0,_=_+Math.imul(ie,Be)|0,w=w+Math.imul(we,Le)|0,c=c+Math.imul(we,ze)|0,c=c+Math.imul(Te,Le)|0,_=_+Math.imul(Te,ze)|0,w=w+Math.imul(xe,Pe)|0,c=c+Math.imul(xe,Oe)|0,c=c+Math.imul(le,Pe)|0,_=_+Math.imul(le,Oe)|0,w=w+Math.imul(ue,je)|0,c=c+Math.imul(ue,Ue)|0,c=c+Math.imul(me,je)|0,_=_+Math.imul(me,Ue)|0,w=w+Math.imul(X,ke)|0,c=c+Math.imul(X,Ve)|0,c=c+Math.imul(Q,ke)|0,_=_+Math.imul(Q,Ve)|0,w=w+Math.imul(B,De)|0,c=c+Math.imul(B,We)|0,c=c+Math.imul(q,De)|0,_=_+Math.imul(q,We)|0,w=w+Math.imul(H,Ge)|0,c=c+Math.imul(H,He)|0,c=c+Math.imul(J,Ge)|0,_=_+Math.imul(J,He)|0;var Vr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,w=Math.imul(he,qe),c=Math.imul(he,Fe),c=c+Math.imul(Se,qe)|0,_=Math.imul(Se,Fe),w=w+Math.imul(ae,$e)|0,c=c+Math.imul(ae,Be)|0,c=c+Math.imul(de,$e)|0,_=_+Math.imul(de,Be)|0,w=w+Math.imul(ee,Le)|0,c=c+Math.imul(ee,ze)|0,c=c+Math.imul(ie,Le)|0,_=_+Math.imul(ie,ze)|0,w=w+Math.imul(we,Pe)|0,c=c+Math.imul(we,Oe)|0,c=c+Math.imul(Te,Pe)|0,_=_+Math.imul(Te,Oe)|0,w=w+Math.imul(xe,je)|0,c=c+Math.imul(xe,Ue)|0,c=c+Math.imul(le,je)|0,_=_+Math.imul(le,Ue)|0,w=w+Math.imul(ue,ke)|0,c=c+Math.imul(ue,Ve)|0,c=c+Math.imul(me,ke)|0,_=_+Math.imul(me,Ve)|0,w=w+Math.imul(X,De)|0,c=c+Math.imul(X,We)|0,c=c+Math.imul(Q,De)|0,_=_+Math.imul(Q,We)|0,w=w+Math.imul(B,Ge)|0,c=c+Math.imul(B,He)|0,c=c+Math.imul(q,Ge)|0,_=_+Math.imul(q,He)|0;var Wr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,w=Math.imul(he,$e),c=Math.imul(he,Be),c=c+Math.imul(Se,$e)|0,_=Math.imul(Se,Be),w=w+Math.imul(ae,Le)|0,c=c+Math.imul(ae,ze)|0,c=c+Math.imul(de,Le)|0,_=_+Math.imul(de,ze)|0,w=w+Math.imul(ee,Pe)|0,c=c+Math.imul(ee,Oe)|0,c=c+Math.imul(ie,Pe)|0,_=_+Math.imul(ie,Oe)|0,w=w+Math.imul(we,je)|0,c=c+Math.imul(we,Ue)|0,c=c+Math.imul(Te,je)|0,_=_+Math.imul(Te,Ue)|0,w=w+Math.imul(xe,ke)|0,c=c+Math.imul(xe,Ve)|0,c=c+Math.imul(le,ke)|0,_=_+Math.imul(le,Ve)|0,w=w+Math.imul(ue,De)|0,c=c+Math.imul(ue,We)|0,c=c+Math.imul(me,De)|0,_=_+Math.imul(me,We)|0,w=w+Math.imul(X,Ge)|0,c=c+Math.imul(X,He)|0,c=c+Math.imul(Q,Ge)|0,_=_+Math.imul(Q,He)|0;var Gr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,w=Math.imul(he,Le),c=Math.imul(he,ze),c=c+Math.imul(Se,Le)|0,_=Math.imul(Se,ze),w=w+Math.imul(ae,Pe)|0,c=c+Math.imul(ae,Oe)|0,c=c+Math.imul(de,Pe)|0,_=_+Math.imul(de,Oe)|0,w=w+Math.imul(ee,je)|0,c=c+Math.imul(ee,Ue)|0,c=c+Math.imul(ie,je)|0,_=_+Math.imul(ie,Ue)|0,w=w+Math.imul(we,ke)|0,c=c+Math.imul(we,Ve)|0,c=c+Math.imul(Te,ke)|0,_=_+Math.imul(Te,Ve)|0,w=w+Math.imul(xe,De)|0,c=c+Math.imul(xe,We)|0,c=c+Math.imul(le,De)|0,_=_+Math.imul(le,We)|0,w=w+Math.imul(ue,Ge)|0,c=c+Math.imul(ue,He)|0,c=c+Math.imul(me,Ge)|0,_=_+Math.imul(me,He)|0;var Hr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,w=Math.imul(he,Pe),c=Math.imul(he,Oe),c=c+Math.imul(Se,Pe)|0,_=Math.imul(Se,Oe),w=w+Math.imul(ae,je)|0,c=c+Math.imul(ae,Ue)|0,c=c+Math.imul(de,je)|0,_=_+Math.imul(de,Ue)|0,w=w+Math.imul(ee,ke)|0,c=c+Math.imul(ee,Ve)|0,c=c+Math.imul(ie,ke)|0,_=_+Math.imul(ie,Ve)|0,w=w+Math.imul(we,De)|0,c=c+Math.imul(we,We)|0,c=c+Math.imul(Te,De)|0,_=_+Math.imul(Te,We)|0,w=w+Math.imul(xe,Ge)|0,c=c+Math.imul(xe,He)|0,c=c+Math.imul(le,Ge)|0,_=_+Math.imul(le,He)|0;var Kr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,w=Math.imul(he,je),c=Math.imul(he,Ue),c=c+Math.imul(Se,je)|0,_=Math.imul(Se,Ue),w=w+Math.imul(ae,ke)|0,c=c+Math.imul(ae,Ve)|0,c=c+Math.imul(de,ke)|0,_=_+Math.imul(de,Ve)|0,w=w+Math.imul(ee,De)|0,c=c+Math.imul(ee,We)|0,c=c+Math.imul(ie,De)|0,_=_+Math.imul(ie,We)|0,w=w+Math.imul(we,Ge)|0,c=c+Math.imul(we,He)|0,c=c+Math.imul(Te,Ge)|0,_=_+Math.imul(Te,He)|0;var Zr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,w=Math.imul(he,ke),c=Math.imul(he,Ve),c=c+Math.imul(Se,ke)|0,_=Math.imul(Se,Ve),w=w+Math.imul(ae,De)|0,c=c+Math.imul(ae,We)|0,c=c+Math.imul(de,De)|0,_=_+Math.imul(de,We)|0,w=w+Math.imul(ee,Ge)|0,c=c+Math.imul(ee,He)|0,c=c+Math.imul(ie,Ge)|0,_=_+Math.imul(ie,He)|0;var Jr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,w=Math.imul(he,De),c=Math.imul(he,We),c=c+Math.imul(Se,De)|0,_=Math.imul(Se,We),w=w+Math.imul(ae,Ge)|0,c=c+Math.imul(ae,He)|0,c=c+Math.imul(de,Ge)|0,_=_+Math.imul(de,He)|0;var Xt=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,w=Math.imul(he,Ge),c=Math.imul(he,He),c=c+Math.imul(Se,Ge)|0,_=Math.imul(Se,He);var Tr=(k+w|0)+((c&8191)<<13)|0;return k=(_+(c>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,E[0]=rn,E[1]=Ot,E[2]=Rt,E[3]=Lr,E[4]=Pr,E[5]=qr,E[6]=$r,E[7]=zr,E[8]=jr,E[9]=Ur,E[10]=Vr,E[11]=Wr,E[12]=Gr,E[13]=Hr,E[14]=Kr,E[15]=Zr,E[16]=Jr,E[17]=Xt,E[18]=Tr,k!==0&&(E[19]=k,g.length++),g};Math.imul||(A=S);function T(M,f,d){d.negative=f.negative^M.negative,d.length=M.length+f.length;for(var g=0,m=0,b=0;b<d.length-1;b++){var E=m;m=0;for(var k=g&67108863,w=Math.min(b,f.length-1),c=Math.max(0,b-M.length+1);c<=w;c++){var _=b-c,R=M.words[_]|0,O=f.words[c]|0,F=R*O,U=F&67108863;E=E+(F/67108864|0)|0,U=U+k|0,k=U&67108863,E=E+(U>>>26)|0,m+=E>>>26,E&=67108863}d.words[b]=k,g=E,E=m}return g!==0?d.words[b]=g:d.length--,d.strip()}function I(M,f,d){var g=new N;return g.mulp(M,f,d)}a.prototype.mulTo=function(f,d){var g,m=this.length+f.length;return this.length===10&&f.length===10?g=A(this,f,d):m<63?g=S(this,f,d):m<1024?g=T(this,f,d):g=I(this,f,d),g};function N(M,f){this.x=M,this.y=f}N.prototype.makeRBT=function(f){for(var d=new Array(f),g=a.prototype._countBits(f)-1,m=0;m<f;m++)d[m]=this.revBin(m,g,f);return d},N.prototype.revBin=function(f,d,g){if(f===0||f===g-1)return f;for(var m=0,b=0;b<d;b++)m|=(f&1)<<d-b-1,f>>=1;return m},N.prototype.permute=function(f,d,g,m,b,E){for(var k=0;k<E;k++)m[k]=d[f[k]],b[k]=g[f[k]]},N.prototype.transform=function(f,d,g,m,b,E){this.permute(E,f,d,g,m,b);for(var k=1;k<b;k<<=1)for(var w=k<<1,c=Math.cos(2*Math.PI/w),_=Math.sin(2*Math.PI/w),R=0;R<b;R+=w)for(var O=c,F=_,U=0;U<k;U++){var H=g[R+U],J=m[R+U],fe=g[R+U+k],B=m[R+U+k],q=O*fe-F*B;B=O*B+F*fe,fe=q,g[R+U]=H+fe,m[R+U]=J+B,g[R+U+k]=H-fe,m[R+U+k]=J-B,U!==w&&(q=c*O-_*F,F=c*F+_*O,O=q)}},N.prototype.guessLen13b=function(f,d){var g=Math.max(d,f)|1,m=g&1,b=0;for(g=g/2|0;g;g=g>>>1)b++;return 1<<b+1+m},N.prototype.conjugate=function(f,d,g){if(!(g<=1))for(var m=0;m<g/2;m++){var b=f[m];f[m]=f[g-m-1],f[g-m-1]=b,b=d[m],d[m]=-d[g-m-1],d[g-m-1]=-b}},N.prototype.normalize13b=function(f,d){for(var g=0,m=0;m<d/2;m++){var b=Math.round(f[2*m+1]/d)*8192+Math.round(f[2*m]/d)+g;f[m]=b&67108863,b<67108864?g=0:g=b/67108864|0}return f},N.prototype.convert13b=function(f,d,g,m){for(var b=0,E=0;E<d;E++)b=b+(f[E]|0),g[2*E]=b&8191,b=b>>>13,g[2*E+1]=b&8191,b=b>>>13;for(E=2*d;E<m;++E)g[E]=0;r(b===0),r((b&-8192)===0)},N.prototype.stub=function(f){for(var d=new Array(f),g=0;g<f;g++)d[g]=0;return d},N.prototype.mulp=function(f,d,g){var m=2*this.guessLen13b(f.length,d.length),b=this.makeRBT(m),E=this.stub(m),k=new Array(m),w=new Array(m),c=new Array(m),_=new Array(m),R=new Array(m),O=new Array(m),F=g.words;F.length=m,this.convert13b(f.words,f.length,k,m),this.convert13b(d.words,d.length,_,m),this.transform(k,E,w,c,m,b),this.transform(_,E,R,O,m,b);for(var U=0;U<m;U++){var H=w[U]*R[U]-c[U]*O[U];c[U]=w[U]*O[U]+c[U]*R[U],w[U]=H}return this.conjugate(w,c,m),this.transform(w,c,F,E,m,b),this.conjugate(F,E,m),this.normalize13b(F,m),g.negative=f.negative^d.negative,g.length=f.length+d.length,g.strip()},a.prototype.mul=function(f){var d=new a(null);return d.words=new Array(this.length+f.length),this.mulTo(f,d)},a.prototype.mulf=function(f){var d=new a(null);return d.words=new Array(this.length+f.length),I(this,f,d)},a.prototype.imul=function(f){return this.clone().mulTo(f,this)},a.prototype.imuln=function(f){r(typeof f=="number"),r(f<67108864);for(var d=0,g=0;g<this.length;g++){var m=(this.words[g]|0)*f,b=(m&67108863)+(d&67108863);d>>=26,d+=m/67108864|0,d+=b>>>26,this.words[g]=b&67108863}return d!==0&&(this.words[g]=d,this.length++),this},a.prototype.muln=function(f){return this.clone().imuln(f)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(f){var d=y(f);if(d.length===0)return new a(1);for(var g=this,m=0;m<d.length&&d[m]===0;m++,g=g.sqr());if(++m<d.length)for(var b=g.sqr();m<d.length;m++,b=b.sqr())d[m]!==0&&(g=g.mul(b));return g},a.prototype.iushln=function(f){r(typeof f=="number"&&f>=0);var d=f%26,g=(f-d)/26,m=67108863>>>26-d<<26-d,b;if(d!==0){var E=0;for(b=0;b<this.length;b++){var k=this.words[b]&m,w=(this.words[b]|0)-k<<d;this.words[b]=w|E,E=k>>>26-d}E&&(this.words[b]=E,this.length++)}if(g!==0){for(b=this.length-1;b>=0;b--)this.words[b+g]=this.words[b];for(b=0;b<g;b++)this.words[b]=0;this.length+=g}return this.strip()},a.prototype.ishln=function(f){return r(this.negative===0),this.iushln(f)},a.prototype.iushrn=function(f,d,g){r(typeof f=="number"&&f>=0);var m;d?m=(d-d%26)/26:m=0;var b=f%26,E=Math.min((f-b)/26,this.length),k=67108863^67108863>>>b<<b,w=g;if(m-=E,m=Math.max(0,m),w){for(var c=0;c<E;c++)w.words[c]=this.words[c];w.length=E}if(E!==0)if(this.length>E)for(this.length-=E,c=0;c<this.length;c++)this.words[c]=this.words[c+E];else this.words[0]=0,this.length=1;var _=0;for(c=this.length-1;c>=0&&(_!==0||c>=m);c--){var R=this.words[c]|0;this.words[c]=_<<26-b|R>>>b,_=R&k}return w&&_!==0&&(w.words[w.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(f,d,g){return r(this.negative===0),this.iushrn(f,d,g)},a.prototype.shln=function(f){return this.clone().ishln(f)},a.prototype.ushln=function(f){return this.clone().iushln(f)},a.prototype.shrn=function(f){return this.clone().ishrn(f)},a.prototype.ushrn=function(f){return this.clone().iushrn(f)},a.prototype.testn=function(f){r(typeof f=="number"&&f>=0);var d=f%26,g=(f-d)/26,m=1<<d;if(this.length<=g)return!1;var b=this.words[g];return!!(b&m)},a.prototype.imaskn=function(f){r(typeof f=="number"&&f>=0);var d=f%26,g=(f-d)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(d!==0&&g++,this.length=Math.min(g,this.length),d!==0){var m=67108863^67108863>>>d<<d;this.words[this.length-1]&=m}return this.strip()},a.prototype.maskn=function(f){return this.clone().imaskn(f)},a.prototype.iaddn=function(f){return r(typeof f=="number"),r(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},a.prototype._iaddn=function(f){this.words[0]+=f;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},a.prototype.isubn=function(f){if(r(typeof f=="number"),r(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this.strip()},a.prototype.addn=function(f){return this.clone().iaddn(f)},a.prototype.subn=function(f){return this.clone().isubn(f)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(f,d,g){var m=f.length+g,b;this._expand(m);var E,k=0;for(b=0;b<f.length;b++){E=(this.words[b+g]|0)+k;var w=(f.words[b]|0)*d;E-=w&67108863,k=(E>>26)-(w/67108864|0),this.words[b+g]=E&67108863}for(;b<this.length-g;b++)E=(this.words[b+g]|0)+k,k=E>>26,this.words[b+g]=E&67108863;if(k===0)return this.strip();for(r(k===-1),k=0,b=0;b<this.length;b++)E=-(this.words[b]|0)+k,k=E>>26,this.words[b]=E&67108863;return this.negative=1,this.strip()},a.prototype._wordDiv=function(f,d){var g=this.length-f.length,m=this.clone(),b=f,E=b.words[b.length-1]|0,k=this._countBits(E);g=26-k,g!==0&&(b=b.ushln(g),m.iushln(g),E=b.words[b.length-1]|0);var w=m.length-b.length,c;if(d!=="mod"){c=new a(null),c.length=w+1,c.words=new Array(c.length);for(var _=0;_<c.length;_++)c.words[_]=0}var R=m.clone()._ishlnsubmul(b,1,w);R.negative===0&&(m=R,c&&(c.words[w]=1));for(var O=w-1;O>=0;O--){var F=(m.words[b.length+O]|0)*67108864+(m.words[b.length+O-1]|0);for(F=Math.min(F/E|0,67108863),m._ishlnsubmul(b,F,O);m.negative!==0;)F--,m.negative=0,m._ishlnsubmul(b,1,O),m.isZero()||(m.negative^=1);c&&(c.words[O]=F)}return c&&c.strip(),m.strip(),d!=="div"&&g!==0&&m.iushrn(g),{div:c||null,mod:m}},a.prototype.divmod=function(f,d,g){if(r(!f.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var m,b,E;return this.negative!==0&&f.negative===0?(E=this.neg().divmod(f,d),d!=="mod"&&(m=E.div.neg()),d!=="div"&&(b=E.mod.neg(),g&&b.negative!==0&&b.iadd(f)),{div:m,mod:b}):this.negative===0&&f.negative!==0?(E=this.divmod(f.neg(),d),d!=="mod"&&(m=E.div.neg()),{div:m,mod:E.mod}):(this.negative&f.negative)!==0?(E=this.neg().divmod(f.neg(),d),d!=="div"&&(b=E.mod.neg(),g&&b.negative!==0&&b.isub(f)),{div:E.div,mod:b}):f.length>this.length||this.cmp(f)<0?{div:new a(0),mod:this}:f.length===1?d==="div"?{div:this.divn(f.words[0]),mod:null}:d==="mod"?{div:null,mod:new a(this.modn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new a(this.modn(f.words[0]))}:this._wordDiv(f,d)},a.prototype.div=function(f){return this.divmod(f,"div",!1).div},a.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},a.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},a.prototype.divRound=function(f){var d=this.divmod(f);if(d.mod.isZero())return d.div;var g=d.div.negative!==0?d.mod.isub(f):d.mod,m=f.ushrn(1),b=f.andln(1),E=g.cmp(m);return E<0||b===1&&E===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},a.prototype.modn=function(f){r(f<=67108863);for(var d=(1<<26)%f,g=0,m=this.length-1;m>=0;m--)g=(d*g+(this.words[m]|0))%f;return g},a.prototype.idivn=function(f){r(f<=67108863);for(var d=0,g=this.length-1;g>=0;g--){var m=(this.words[g]|0)+d*67108864;this.words[g]=m/f|0,d=m%f}return this.strip()},a.prototype.divn=function(f){return this.clone().idivn(f)},a.prototype.egcd=function(f){r(f.negative===0),r(!f.isZero());var d=this,g=f.clone();d.negative!==0?d=d.umod(f):d=d.clone();for(var m=new a(1),b=new a(0),E=new a(0),k=new a(1),w=0;d.isEven()&&g.isEven();)d.iushrn(1),g.iushrn(1),++w;for(var c=g.clone(),_=d.clone();!d.isZero();){for(var R=0,O=1;(d.words[0]&O)===0&&R<26;++R,O<<=1);if(R>0)for(d.iushrn(R);R-- >0;)(m.isOdd()||b.isOdd())&&(m.iadd(c),b.isub(_)),m.iushrn(1),b.iushrn(1);for(var F=0,U=1;(g.words[0]&U)===0&&F<26;++F,U<<=1);if(F>0)for(g.iushrn(F);F-- >0;)(E.isOdd()||k.isOdd())&&(E.iadd(c),k.isub(_)),E.iushrn(1),k.iushrn(1);d.cmp(g)>=0?(d.isub(g),m.isub(E),b.isub(k)):(g.isub(d),E.isub(m),k.isub(b))}return{a:E,b:k,gcd:g.iushln(w)}},a.prototype._invmp=function(f){r(f.negative===0),r(!f.isZero());var d=this,g=f.clone();d.negative!==0?d=d.umod(f):d=d.clone();for(var m=new a(1),b=new a(0),E=g.clone();d.cmpn(1)>0&&g.cmpn(1)>0;){for(var k=0,w=1;(d.words[0]&w)===0&&k<26;++k,w<<=1);if(k>0)for(d.iushrn(k);k-- >0;)m.isOdd()&&m.iadd(E),m.iushrn(1);for(var c=0,_=1;(g.words[0]&_)===0&&c<26;++c,_<<=1);if(c>0)for(g.iushrn(c);c-- >0;)b.isOdd()&&b.iadd(E),b.iushrn(1);d.cmp(g)>=0?(d.isub(g),m.isub(b)):(g.isub(d),b.isub(m))}var R;return d.cmpn(1)===0?R=m:R=b,R.cmpn(0)<0&&R.iadd(f),R},a.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var d=this.clone(),g=f.clone();d.negative=0,g.negative=0;for(var m=0;d.isEven()&&g.isEven();m++)d.iushrn(1),g.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;g.isEven();)g.iushrn(1);var b=d.cmp(g);if(b<0){var E=d;d=g,g=E}else if(b===0||g.cmpn(1)===0)break;d.isub(g)}while(!0);return g.iushln(m)},a.prototype.invm=function(f){return this.egcd(f).a.umod(f)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(f){return this.words[0]&f},a.prototype.bincn=function(f){r(typeof f=="number");var d=f%26,g=(f-d)/26,m=1<<d;if(this.length<=g)return this._expand(g+1),this.words[g]|=m,this;for(var b=m,E=g;b!==0&&E<this.length;E++){var k=this.words[E]|0;k+=b,b=k>>>26,k&=67108863,this.words[E]=k}return b!==0&&(this.words[E]=b,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(f){var d=f<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this.strip();var g;if(this.length>1)g=1;else{d&&(f=-f),r(f<=67108863,"Number is too big");var m=this.words[0]|0;g=m===f?0:m<f?-1:1}return this.negative!==0?-g|0:g},a.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var d=this.ucmp(f);return this.negative!==0?-d|0:d},a.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var d=0,g=this.length-1;g>=0;g--){var m=this.words[g]|0,b=f.words[g]|0;if(m!==b){m<b?d=-1:m>b&&(d=1);break}}return d},a.prototype.gtn=function(f){return this.cmpn(f)===1},a.prototype.gt=function(f){return this.cmp(f)===1},a.prototype.gten=function(f){return this.cmpn(f)>=0},a.prototype.gte=function(f){return this.cmp(f)>=0},a.prototype.ltn=function(f){return this.cmpn(f)===-1},a.prototype.lt=function(f){return this.cmp(f)===-1},a.prototype.lten=function(f){return this.cmpn(f)<=0},a.prototype.lte=function(f){return this.cmp(f)<=0},a.prototype.eqn=function(f){return this.cmpn(f)===0},a.prototype.eq=function(f){return this.cmp(f)===0},a.red=function(f){return new j(f)},a.prototype.toRed=function(f){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},a.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(f){return this.red=f,this},a.prototype.forceRed=function(f){return r(!this.red,"Already a number in reduction context"),this._forceRed(f)},a.prototype.redAdd=function(f){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},a.prototype.redIAdd=function(f){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},a.prototype.redSub=function(f){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},a.prototype.redISub=function(f){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},a.prototype.redShl=function(f){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},a.prototype.redMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},a.prototype.redIMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},a.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(f){return r(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var D={k256:null,p224:null,p192:null,p25519:null};function C(M,f){this.name=M,this.p=new a(f,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}C.prototype._tmp=function(){var f=new a(null);return f.words=new Array(Math.ceil(this.n/13)),f},C.prototype.ireduce=function(f){var d=f,g;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),g=d.bitLength();while(g>this.n);var m=g<this.n?-1:d.ucmp(this.p);return m===0?(d.words[0]=0,d.length=1):m>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},C.prototype.split=function(f,d){f.iushrn(this.n,0,d)},C.prototype.imulK=function(f){return f.imul(this.k)};function L(){C.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(L,C),L.prototype.split=function(f,d){for(var g=4194303,m=Math.min(f.length,9),b=0;b<m;b++)d.words[b]=f.words[b];if(d.length=m,f.length<=9){f.words[0]=0,f.length=1;return}var E=f.words[9];for(d.words[d.length++]=E&g,b=10;b<f.length;b++){var k=f.words[b]|0;f.words[b-10]=(k&g)<<4|E>>>22,E=k}E>>>=22,f.words[b-10]=E,E===0&&f.length>10?f.length-=10:f.length-=9},L.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var d=0,g=0;g<f.length;g++){var m=f.words[g]|0;d+=m*977,f.words[g]=d&67108863,d=m*64+(d/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function z(){C.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(z,C);function $(){C.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n($,C);function G(){C.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(G,C),G.prototype.imulK=function(f){for(var d=0,g=0;g<f.length;g++){var m=(f.words[g]|0)*19+d,b=m&67108863;m>>>=26,f.words[g]=b,d=m}return d!==0&&(f.words[f.length++]=d),f},a._prime=function(f){if(D[f])return D[f];var d;if(f==="k256")d=new L;else if(f==="p224")d=new z;else if(f==="p192")d=new $;else if(f==="p25519")d=new G;else throw new Error("Unknown prime "+f);return D[f]=d,d};function j(M){if(typeof M=="string"){var f=a._prime(M);this.m=f.p,this.prime=f}else r(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}j.prototype._verify1=function(f){r(f.negative===0,"red works only with positives"),r(f.red,"red works only with red numbers")},j.prototype._verify2=function(f,d){r((f.negative|d.negative)===0,"red works only with positives"),r(f.red&&f.red===d.red,"red works only with red numbers")},j.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):f.umod(this.m)._forceRed(this)},j.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},j.prototype.add=function(f,d){this._verify2(f,d);var g=f.add(d);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},j.prototype.iadd=function(f,d){this._verify2(f,d);var g=f.iadd(d);return g.cmp(this.m)>=0&&g.isub(this.m),g},j.prototype.sub=function(f,d){this._verify2(f,d);var g=f.sub(d);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},j.prototype.isub=function(f,d){this._verify2(f,d);var g=f.isub(d);return g.cmpn(0)<0&&g.iadd(this.m),g},j.prototype.shl=function(f,d){return this._verify1(f),this.imod(f.ushln(d))},j.prototype.imul=function(f,d){return this._verify2(f,d),this.imod(f.imul(d))},j.prototype.mul=function(f,d){return this._verify2(f,d),this.imod(f.mul(d))},j.prototype.isqr=function(f){return this.imul(f,f.clone())},j.prototype.sqr=function(f){return this.mul(f,f)},j.prototype.sqrt=function(f){if(f.isZero())return f.clone();var d=this.m.andln(3);if(r(d%2===1),d===3){var g=this.m.add(new a(1)).iushrn(2);return this.pow(f,g)}for(var m=this.m.subn(1),b=0;!m.isZero()&&m.andln(1)===0;)b++,m.iushrn(1);r(!m.isZero());var E=new a(1).toRed(this),k=E.redNeg(),w=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new a(2*c*c).toRed(this);this.pow(c,w).cmp(k)!==0;)c.redIAdd(k);for(var _=this.pow(c,m),R=this.pow(f,m.addn(1).iushrn(1)),O=this.pow(f,m),F=b;O.cmp(E)!==0;){for(var U=O,H=0;U.cmp(E)!==0;H++)U=U.redSqr();r(H<F);var J=this.pow(_,new a(1).iushln(F-H-1));R=R.redMul(J),_=J.redSqr(),O=O.redMul(_),F=H}return R},j.prototype.invm=function(f){var d=f._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},j.prototype.pow=function(f,d){if(d.isZero())return new a(1).toRed(this);if(d.cmpn(1)===0)return f.clone();var g=4,m=new Array(1<<g);m[0]=new a(1).toRed(this),m[1]=f;for(var b=2;b<m.length;b++)m[b]=this.mul(m[b-1],f);var E=m[0],k=0,w=0,c=d.bitLength()%26;for(c===0&&(c=26),b=d.length-1;b>=0;b--){for(var _=d.words[b],R=c-1;R>=0;R--){var O=_>>R&1;if(E!==m[0]&&(E=this.sqr(E)),O===0&&k===0){w=0;continue}k<<=1,k|=O,w++,!(w!==g&&(b!==0||R!==0))&&(E=this.mul(E,m[k]),w=0,k=0)}c=26}return E},j.prototype.convertTo=function(f){var d=f.umod(this.m);return d===f?d.clone():d},j.prototype.convertFrom=function(f){var d=f.clone();return d.red=null,d},a.mont=function(f){return new K(f)};function K(M){j.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(K,j),K.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},K.prototype.convertFrom=function(f){var d=this.imod(f.mul(this.rinv));return d.red=null,d},K.prototype.imul=function(f,d){if(f.isZero()||d.isZero())return f.words[0]=0,f.length=1,f;var g=f.imul(d),m=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(m).iushrn(this.shift),E=b;return b.cmp(this.m)>=0?E=b.isub(this.m):b.cmpn(0)<0&&(E=b.iadd(this.m)),E._forceRed(this)},K.prototype.mul=function(f,d){if(f.isZero()||d.isZero())return new a(0)._forceRed(this);var g=f.mul(d),m=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(m).iushrn(this.shift),E=b;return b.cmp(this.m)>=0?E=b.isub(this.m):b.cmpn(0)<0&&(E=b.iadd(this.m)),E._forceRed(this)},K.prototype.invm=function(f){var d=this.imod(f._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(typeof D6=="undefined"||D6,J$)});var Q$=ne((btt,X$)=>{var Owe=z_(),Rwe=Y$();X$.exports=function(e){return new ah(e)};var rs={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};rs.p224=rs.secp224r1;rs.p256=rs.secp256r1=rs.prime256v1;rs.p192=rs.secp192r1=rs.prime192v1;rs.p384=rs.secp384r1;rs.p521=rs.secp521r1;function ah(t){this.curveType=rs[t],this.curveType||(this.curveType={name:t}),this.curve=new Owe.ec(this.curveType.name),this.keys=void 0}ah.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)};ah.prototype.computeSecret=function(t,e,r){e=e||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,e));var n=this.curve.keyFromPublic(t).getPublic(),a=n.mul(this.keys.getPrivate()).getX();return O6(a,r,this.curveType.byteLength)};ah.prototype.getPublicKey=function(t,e){var r=this.keys.getPublic(e==="compressed",!0);return e==="hybrid"&&(r[r.length-1]%2?r[0]=7:r[0]=6),O6(r,t)};ah.prototype.getPrivateKey=function(t){return O6(this.keys.getPrivate(),t)};ah.prototype.setPublicKey=function(t,e){return e=e||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,e)),this.keys._importPublic(t),this};ah.prototype.setPrivateKey=function(t,e){e=e||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,e));var r=new Rwe(t);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this};function O6(t,e,r){Array.isArray(t)||(t=t.toArray());var n=new Buffer(t);if(r&&n.length<r){var a=new Buffer(r-n.length);a.fill(0),n=Buffer.concat([a,n])}return e?n.toString(e):n}});var C6=ne((wtt,ez)=>{var Cwe=Zd(),R6=fr().Buffer;ez.exports=function(t,e){for(var r=R6.alloc(0),n=0,a;r.length<e;)a=Fwe(n++),r=R6.concat([r,Cwe("sha1").update(t).update(a).digest()]);return r.slice(0,e)};function Fwe(t){var e=R6.allocUnsafe(4);return e.writeUInt32BE(t,0),e}});var F6=ne((_tt,tz)=>{tz.exports=function(e,r){for(var n=e.length,a=-1;++a<n;)e[a]^=r[a];return e}});var e2=ne((rz,B6)=>{(function(t,e){"use strict";function r(M,f){if(!M)throw new Error(f||"Assertion failed")}function n(M,f){M.super_=f;var d=function(){};d.prototype=f.prototype,M.prototype=new d,M.prototype.constructor=M}function a(M,f,d){if(a.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((f==="le"||f==="be")&&(d=f,f=10),this._init(M||0,f||10,d||"be"))}typeof t=="object"?t.exports=a:e.BN=a,a.BN=a,a.wordSize=26;var s;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?s=window.Buffer:s=mn().Buffer}catch{}a.isBN=function(f){return f instanceof a?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===a.wordSize&&Array.isArray(f.words)},a.max=function(f,d){return f.cmp(d)>0?f:d},a.min=function(f,d){return f.cmp(d)<0?f:d},a.prototype._init=function(f,d,g){if(typeof f=="number")return this._initNumber(f,d,g);if(typeof f=="object")return this._initArray(f,d,g);d==="hex"&&(d=16),r(d===(d|0)&&d>=2&&d<=36),f=f.toString().replace(/\s+/g,"");var m=0;f[0]==="-"&&(m++,this.negative=1),m<f.length&&(d===16?this._parseHex(f,m,g):(this._parseBase(f,d,m),g==="le"&&this._initArray(this.toArray(),d,g)))},a.prototype._initNumber=function(f,d,g){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(r(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),d,g)},a.prototype._initArray=function(f,d,g){if(r(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var b,E,k=0;if(g==="be")for(m=f.length-1,b=0;m>=0;m-=3)E=f[m]|f[m-1]<<8|f[m-2]<<16,this.words[b]|=E<<k&67108863,this.words[b+1]=E>>>26-k&67108863,k+=24,k>=26&&(k-=26,b++);else if(g==="le")for(m=0,b=0;m<f.length;m+=3)E=f[m]|f[m+1]<<8|f[m+2]<<16,this.words[b]|=E<<k&67108863,this.words[b+1]=E>>>26-k&67108863,k+=24,k>=26&&(k-=26,b++);return this.strip()};function o(M,f){var d=M.charCodeAt(f);return d>=65&&d<=70?d-55:d>=97&&d<=102?d-87:d-48&15}function u(M,f,d){var g=o(M,d);return d-1>=f&&(g|=o(M,d-1)<<4),g}a.prototype._parseHex=function(f,d,g){this.length=Math.ceil((f.length-d)/6),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var b=0,E=0,k;if(g==="be")for(m=f.length-1;m>=d;m-=2)k=u(f,d,m)<<b,this.words[E]|=k&67108863,b>=18?(b-=18,E+=1,this.words[E]|=k>>>26):b+=8;else{var w=f.length-d;for(m=w%2===0?d+1:d;m<f.length;m+=2)k=u(f,d,m)<<b,this.words[E]|=k&67108863,b>=18?(b-=18,E+=1,this.words[E]|=k>>>26):b+=8}this.strip()};function l(M,f,d,g){for(var m=0,b=Math.min(M.length,d),E=f;E<b;E++){var k=M.charCodeAt(E)-48;m*=g,k>=49?m+=k-49+10:k>=17?m+=k-17+10:m+=k}return m}a.prototype._parseBase=function(f,d,g){this.words=[0],this.length=1;for(var m=0,b=1;b<=67108863;b*=d)m++;m--,b=b/d|0;for(var E=f.length-g,k=E%m,w=Math.min(E,E-k)+g,c=0,_=g;_<w;_+=m)c=l(f,_,_+m,d),this.imuln(b),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(k!==0){var R=1;for(c=l(f,_,f.length,d),_=0;_<k;_++)R*=d;this.imuln(R),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},a.prototype.copy=function(f){f.words=new Array(this.length);for(var d=0;d<this.length;d++)f.words[d]=this.words[d];f.length=this.length,f.negative=this.negative,f.red=this.red},a.prototype.clone=function(){var f=new a(null);return this.copy(f),f},a.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(f,d){f=f||10,d=d|0||1;var g;if(f===16||f==="hex"){g="";for(var m=0,b=0,E=0;E<this.length;E++){var k=this.words[E],w=((k<<m|b)&16777215).toString(16);b=k>>>24-m&16777215,b!==0||E!==this.length-1?g=h[6-w.length]+w+g:g=w+g,m+=2,m>=26&&(m-=26,E--)}for(b!==0&&(g=b.toString(16)+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(f===(f|0)&&f>=2&&f<=36){var c=p[f],_=v[f];g="";var R=this.clone();for(R.negative=0;!R.isZero();){var O=R.modn(_).toString(f);R=R.idivn(_),R.isZero()?g=O+g:g=h[c-O.length]+O+g}for(this.isZero()&&(g="0"+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}r(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(f,d){return r(typeof s!="undefined"),this.toArrayLike(s,f,d)},a.prototype.toArray=function(f,d){return this.toArrayLike(Array,f,d)},a.prototype.toArrayLike=function(f,d,g){var m=this.byteLength(),b=g||Math.max(1,m);r(m<=b,"byte array longer than desired length"),r(b>0,"Requested array length <= 0"),this.strip();var E=d==="le",k=new f(b),w,c,_=this.clone();if(E){for(c=0;!_.isZero();c++)w=_.andln(255),_.iushrn(8),k[c]=w;for(;c<b;c++)k[c]=0}else{for(c=0;c<b-m;c++)k[c]=0;for(c=0;!_.isZero();c++)w=_.andln(255),_.iushrn(8),k[b-c-1]=w}return k},Math.clz32?a.prototype._countBits=function(f){return 32-Math.clz32(f)}:a.prototype._countBits=function(f){var d=f,g=0;return d>=4096&&(g+=13,d>>>=13),d>=64&&(g+=7,d>>>=7),d>=8&&(g+=4,d>>>=4),d>=2&&(g+=2,d>>>=2),g+d},a.prototype._zeroBits=function(f){if(f===0)return 26;var d=f,g=0;return(d&8191)===0&&(g+=13,d>>>=13),(d&127)===0&&(g+=7,d>>>=7),(d&15)===0&&(g+=4,d>>>=4),(d&3)===0&&(g+=2,d>>>=2),(d&1)===0&&g++,g},a.prototype.bitLength=function(){var f=this.words[this.length-1],d=this._countBits(f);return(this.length-1)*26+d};function y(M){for(var f=new Array(M.bitLength()),d=0;d<f.length;d++){var g=d/26|0,m=d%26;f[d]=(M.words[g]&1<<m)>>>m}return f}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,d=0;d<this.length;d++){var g=this._zeroBits(this.words[d]);if(f+=g,g!==26)break}return f},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},a.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var d=0;d<f.length;d++)this.words[d]=this.words[d]|f.words[d];return this.strip()},a.prototype.ior=function(f){return r((this.negative|f.negative)===0),this.iuor(f)},a.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},a.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},a.prototype.iuand=function(f){var d;this.length>f.length?d=f:d=this;for(var g=0;g<d.length;g++)this.words[g]=this.words[g]&f.words[g];return this.length=d.length,this.strip()},a.prototype.iand=function(f){return r((this.negative|f.negative)===0),this.iuand(f)},a.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},a.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},a.prototype.iuxor=function(f){var d,g;this.length>f.length?(d=this,g=f):(d=f,g=this);for(var m=0;m<g.length;m++)this.words[m]=d.words[m]^g.words[m];if(this!==d)for(;m<d.length;m++)this.words[m]=d.words[m];return this.length=d.length,this.strip()},a.prototype.ixor=function(f){return r((this.negative|f.negative)===0),this.iuxor(f)},a.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},a.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},a.prototype.inotn=function(f){r(typeof f=="number"&&f>=0);var d=Math.ceil(f/26)|0,g=f%26;this._expand(d),g>0&&d--;for(var m=0;m<d;m++)this.words[m]=~this.words[m]&67108863;return g>0&&(this.words[m]=~this.words[m]&67108863>>26-g),this.strip()},a.prototype.notn=function(f){return this.clone().inotn(f)},a.prototype.setn=function(f,d){r(typeof f=="number"&&f>=0);var g=f/26|0,m=f%26;return this._expand(g+1),d?this.words[g]=this.words[g]|1<<m:this.words[g]=this.words[g]&~(1<<m),this.strip()},a.prototype.iadd=function(f){var d;if(this.negative!==0&&f.negative===0)return this.negative=0,d=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,d=this.isub(f),f.negative=1,d._normSign();var g,m;this.length>f.length?(g=this,m=f):(g=f,m=this);for(var b=0,E=0;E<m.length;E++)d=(g.words[E]|0)+(m.words[E]|0)+b,this.words[E]=d&67108863,b=d>>>26;for(;b!==0&&E<g.length;E++)d=(g.words[E]|0)+b,this.words[E]=d&67108863,b=d>>>26;if(this.length=g.length,b!==0)this.words[this.length]=b,this.length++;else if(g!==this)for(;E<g.length;E++)this.words[E]=g.words[E];return this},a.prototype.add=function(f){var d;return f.negative!==0&&this.negative===0?(f.negative=0,d=this.sub(f),f.negative^=1,d):f.negative===0&&this.negative!==0?(this.negative=0,d=f.sub(this),this.negative=1,d):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},a.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var d=this.iadd(f);return f.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var g=this.cmp(f);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var m,b;g>0?(m=this,b=f):(m=f,b=this);for(var E=0,k=0;k<b.length;k++)d=(m.words[k]|0)-(b.words[k]|0)+E,E=d>>26,this.words[k]=d&67108863;for(;E!==0&&k<m.length;k++)d=(m.words[k]|0)+E,E=d>>26,this.words[k]=d&67108863;if(E===0&&k<m.length&&m!==this)for(;k<m.length;k++)this.words[k]=m.words[k];return this.length=Math.max(this.length,k),m!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(f){return this.clone().isub(f)};function S(M,f,d){d.negative=f.negative^M.negative;var g=M.length+f.length|0;d.length=g,g=g-1|0;var m=M.words[0]|0,b=f.words[0]|0,E=m*b,k=E&67108863,w=E/67108864|0;d.words[0]=k;for(var c=1;c<g;c++){for(var _=w>>>26,R=w&67108863,O=Math.min(c,f.length-1),F=Math.max(0,c-M.length+1);F<=O;F++){var U=c-F|0;m=M.words[U]|0,b=f.words[F]|0,E=m*b+R,_+=E/67108864|0,R=E&67108863}d.words[c]=R|0,w=_|0}return w!==0?d.words[c]=w|0:d.length--,d.strip()}var A=function(f,d,g){var m=f.words,b=d.words,E=g.words,k=0,w,c,_,R=m[0]|0,O=R&8191,F=R>>>13,U=m[1]|0,H=U&8191,J=U>>>13,fe=m[2]|0,B=fe&8191,q=fe>>>13,Y=m[3]|0,X=Y&8191,Q=Y>>>13,be=m[4]|0,ue=be&8191,me=be>>>13,vt=m[5]|0,xe=vt&8191,le=vt>>>13,qt=m[6]|0,we=qt&8191,Te=qt>>>13,at=m[7]|0,ee=at&8191,ie=at>>>13,tt=m[8]|0,ae=tt&8191,de=tt>>>13,Ze=m[9]|0,he=Ze&8191,Se=Ze>>>13,At=b[0]|0,_e=At&8191,Ie=At>>>13,nr=b[1]|0,Ne=nr&8191,Re=nr>>>13,Qn=b[2]|0,qe=Qn&8191,Fe=Qn>>>13,$n=b[3]|0,$e=$n&8191,Be=$n>>>13,zn=b[4]|0,Le=zn&8191,ze=zn>>>13,ei=b[5]|0,Pe=ei&8191,Oe=ei>>>13,jn=b[6]|0,je=jn&8191,Ue=jn>>>13,xr=b[7]|0,ke=xr&8191,Ve=xr>>>13,kn=b[8]|0,De=kn&8191,We=kn>>>13,On=b[9]|0,Ge=On&8191,He=On>>>13;g.negative=f.negative^d.negative,g.length=19,w=Math.imul(O,_e),c=Math.imul(O,Ie),c=c+Math.imul(F,_e)|0,_=Math.imul(F,Ie);var rn=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(rn>>>26)|0,rn&=67108863,w=Math.imul(H,_e),c=Math.imul(H,Ie),c=c+Math.imul(J,_e)|0,_=Math.imul(J,Ie),w=w+Math.imul(O,Ne)|0,c=c+Math.imul(O,Re)|0,c=c+Math.imul(F,Ne)|0,_=_+Math.imul(F,Re)|0;var Ot=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,w=Math.imul(B,_e),c=Math.imul(B,Ie),c=c+Math.imul(q,_e)|0,_=Math.imul(q,Ie),w=w+Math.imul(H,Ne)|0,c=c+Math.imul(H,Re)|0,c=c+Math.imul(J,Ne)|0,_=_+Math.imul(J,Re)|0,w=w+Math.imul(O,qe)|0,c=c+Math.imul(O,Fe)|0,c=c+Math.imul(F,qe)|0,_=_+Math.imul(F,Fe)|0;var Rt=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,w=Math.imul(X,_e),c=Math.imul(X,Ie),c=c+Math.imul(Q,_e)|0,_=Math.imul(Q,Ie),w=w+Math.imul(B,Ne)|0,c=c+Math.imul(B,Re)|0,c=c+Math.imul(q,Ne)|0,_=_+Math.imul(q,Re)|0,w=w+Math.imul(H,qe)|0,c=c+Math.imul(H,Fe)|0,c=c+Math.imul(J,qe)|0,_=_+Math.imul(J,Fe)|0,w=w+Math.imul(O,$e)|0,c=c+Math.imul(O,Be)|0,c=c+Math.imul(F,$e)|0,_=_+Math.imul(F,Be)|0;var Lr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,w=Math.imul(ue,_e),c=Math.imul(ue,Ie),c=c+Math.imul(me,_e)|0,_=Math.imul(me,Ie),w=w+Math.imul(X,Ne)|0,c=c+Math.imul(X,Re)|0,c=c+Math.imul(Q,Ne)|0,_=_+Math.imul(Q,Re)|0,w=w+Math.imul(B,qe)|0,c=c+Math.imul(B,Fe)|0,c=c+Math.imul(q,qe)|0,_=_+Math.imul(q,Fe)|0,w=w+Math.imul(H,$e)|0,c=c+Math.imul(H,Be)|0,c=c+Math.imul(J,$e)|0,_=_+Math.imul(J,Be)|0,w=w+Math.imul(O,Le)|0,c=c+Math.imul(O,ze)|0,c=c+Math.imul(F,Le)|0,_=_+Math.imul(F,ze)|0;var Pr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,w=Math.imul(xe,_e),c=Math.imul(xe,Ie),c=c+Math.imul(le,_e)|0,_=Math.imul(le,Ie),w=w+Math.imul(ue,Ne)|0,c=c+Math.imul(ue,Re)|0,c=c+Math.imul(me,Ne)|0,_=_+Math.imul(me,Re)|0,w=w+Math.imul(X,qe)|0,c=c+Math.imul(X,Fe)|0,c=c+Math.imul(Q,qe)|0,_=_+Math.imul(Q,Fe)|0,w=w+Math.imul(B,$e)|0,c=c+Math.imul(B,Be)|0,c=c+Math.imul(q,$e)|0,_=_+Math.imul(q,Be)|0,w=w+Math.imul(H,Le)|0,c=c+Math.imul(H,ze)|0,c=c+Math.imul(J,Le)|0,_=_+Math.imul(J,ze)|0,w=w+Math.imul(O,Pe)|0,c=c+Math.imul(O,Oe)|0,c=c+Math.imul(F,Pe)|0,_=_+Math.imul(F,Oe)|0;var qr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(qr>>>26)|0,qr&=67108863,w=Math.imul(we,_e),c=Math.imul(we,Ie),c=c+Math.imul(Te,_e)|0,_=Math.imul(Te,Ie),w=w+Math.imul(xe,Ne)|0,c=c+Math.imul(xe,Re)|0,c=c+Math.imul(le,Ne)|0,_=_+Math.imul(le,Re)|0,w=w+Math.imul(ue,qe)|0,c=c+Math.imul(ue,Fe)|0,c=c+Math.imul(me,qe)|0,_=_+Math.imul(me,Fe)|0,w=w+Math.imul(X,$e)|0,c=c+Math.imul(X,Be)|0,c=c+Math.imul(Q,$e)|0,_=_+Math.imul(Q,Be)|0,w=w+Math.imul(B,Le)|0,c=c+Math.imul(B,ze)|0,c=c+Math.imul(q,Le)|0,_=_+Math.imul(q,ze)|0,w=w+Math.imul(H,Pe)|0,c=c+Math.imul(H,Oe)|0,c=c+Math.imul(J,Pe)|0,_=_+Math.imul(J,Oe)|0,w=w+Math.imul(O,je)|0,c=c+Math.imul(O,Ue)|0,c=c+Math.imul(F,je)|0,_=_+Math.imul(F,Ue)|0;var $r=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+($r>>>26)|0,$r&=67108863,w=Math.imul(ee,_e),c=Math.imul(ee,Ie),c=c+Math.imul(ie,_e)|0,_=Math.imul(ie,Ie),w=w+Math.imul(we,Ne)|0,c=c+Math.imul(we,Re)|0,c=c+Math.imul(Te,Ne)|0,_=_+Math.imul(Te,Re)|0,w=w+Math.imul(xe,qe)|0,c=c+Math.imul(xe,Fe)|0,c=c+Math.imul(le,qe)|0,_=_+Math.imul(le,Fe)|0,w=w+Math.imul(ue,$e)|0,c=c+Math.imul(ue,Be)|0,c=c+Math.imul(me,$e)|0,_=_+Math.imul(me,Be)|0,w=w+Math.imul(X,Le)|0,c=c+Math.imul(X,ze)|0,c=c+Math.imul(Q,Le)|0,_=_+Math.imul(Q,ze)|0,w=w+Math.imul(B,Pe)|0,c=c+Math.imul(B,Oe)|0,c=c+Math.imul(q,Pe)|0,_=_+Math.imul(q,Oe)|0,w=w+Math.imul(H,je)|0,c=c+Math.imul(H,Ue)|0,c=c+Math.imul(J,je)|0,_=_+Math.imul(J,Ue)|0,w=w+Math.imul(O,ke)|0,c=c+Math.imul(O,Ve)|0,c=c+Math.imul(F,ke)|0,_=_+Math.imul(F,Ve)|0;var zr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(zr>>>26)|0,zr&=67108863,w=Math.imul(ae,_e),c=Math.imul(ae,Ie),c=c+Math.imul(de,_e)|0,_=Math.imul(de,Ie),w=w+Math.imul(ee,Ne)|0,c=c+Math.imul(ee,Re)|0,c=c+Math.imul(ie,Ne)|0,_=_+Math.imul(ie,Re)|0,w=w+Math.imul(we,qe)|0,c=c+Math.imul(we,Fe)|0,c=c+Math.imul(Te,qe)|0,_=_+Math.imul(Te,Fe)|0,w=w+Math.imul(xe,$e)|0,c=c+Math.imul(xe,Be)|0,c=c+Math.imul(le,$e)|0,_=_+Math.imul(le,Be)|0,w=w+Math.imul(ue,Le)|0,c=c+Math.imul(ue,ze)|0,c=c+Math.imul(me,Le)|0,_=_+Math.imul(me,ze)|0,w=w+Math.imul(X,Pe)|0,c=c+Math.imul(X,Oe)|0,c=c+Math.imul(Q,Pe)|0,_=_+Math.imul(Q,Oe)|0,w=w+Math.imul(B,je)|0,c=c+Math.imul(B,Ue)|0,c=c+Math.imul(q,je)|0,_=_+Math.imul(q,Ue)|0,w=w+Math.imul(H,ke)|0,c=c+Math.imul(H,Ve)|0,c=c+Math.imul(J,ke)|0,_=_+Math.imul(J,Ve)|0,w=w+Math.imul(O,De)|0,c=c+Math.imul(O,We)|0,c=c+Math.imul(F,De)|0,_=_+Math.imul(F,We)|0;var jr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(jr>>>26)|0,jr&=67108863,w=Math.imul(he,_e),c=Math.imul(he,Ie),c=c+Math.imul(Se,_e)|0,_=Math.imul(Se,Ie),w=w+Math.imul(ae,Ne)|0,c=c+Math.imul(ae,Re)|0,c=c+Math.imul(de,Ne)|0,_=_+Math.imul(de,Re)|0,w=w+Math.imul(ee,qe)|0,c=c+Math.imul(ee,Fe)|0,c=c+Math.imul(ie,qe)|0,_=_+Math.imul(ie,Fe)|0,w=w+Math.imul(we,$e)|0,c=c+Math.imul(we,Be)|0,c=c+Math.imul(Te,$e)|0,_=_+Math.imul(Te,Be)|0,w=w+Math.imul(xe,Le)|0,c=c+Math.imul(xe,ze)|0,c=c+Math.imul(le,Le)|0,_=_+Math.imul(le,ze)|0,w=w+Math.imul(ue,Pe)|0,c=c+Math.imul(ue,Oe)|0,c=c+Math.imul(me,Pe)|0,_=_+Math.imul(me,Oe)|0,w=w+Math.imul(X,je)|0,c=c+Math.imul(X,Ue)|0,c=c+Math.imul(Q,je)|0,_=_+Math.imul(Q,Ue)|0,w=w+Math.imul(B,ke)|0,c=c+Math.imul(B,Ve)|0,c=c+Math.imul(q,ke)|0,_=_+Math.imul(q,Ve)|0,w=w+Math.imul(H,De)|0,c=c+Math.imul(H,We)|0,c=c+Math.imul(J,De)|0,_=_+Math.imul(J,We)|0,w=w+Math.imul(O,Ge)|0,c=c+Math.imul(O,He)|0,c=c+Math.imul(F,Ge)|0,_=_+Math.imul(F,He)|0;var Ur=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,w=Math.imul(he,Ne),c=Math.imul(he,Re),c=c+Math.imul(Se,Ne)|0,_=Math.imul(Se,Re),w=w+Math.imul(ae,qe)|0,c=c+Math.imul(ae,Fe)|0,c=c+Math.imul(de,qe)|0,_=_+Math.imul(de,Fe)|0,w=w+Math.imul(ee,$e)|0,c=c+Math.imul(ee,Be)|0,c=c+Math.imul(ie,$e)|0,_=_+Math.imul(ie,Be)|0,w=w+Math.imul(we,Le)|0,c=c+Math.imul(we,ze)|0,c=c+Math.imul(Te,Le)|0,_=_+Math.imul(Te,ze)|0,w=w+Math.imul(xe,Pe)|0,c=c+Math.imul(xe,Oe)|0,c=c+Math.imul(le,Pe)|0,_=_+Math.imul(le,Oe)|0,w=w+Math.imul(ue,je)|0,c=c+Math.imul(ue,Ue)|0,c=c+Math.imul(me,je)|0,_=_+Math.imul(me,Ue)|0,w=w+Math.imul(X,ke)|0,c=c+Math.imul(X,Ve)|0,c=c+Math.imul(Q,ke)|0,_=_+Math.imul(Q,Ve)|0,w=w+Math.imul(B,De)|0,c=c+Math.imul(B,We)|0,c=c+Math.imul(q,De)|0,_=_+Math.imul(q,We)|0,w=w+Math.imul(H,Ge)|0,c=c+Math.imul(H,He)|0,c=c+Math.imul(J,Ge)|0,_=_+Math.imul(J,He)|0;var Vr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,w=Math.imul(he,qe),c=Math.imul(he,Fe),c=c+Math.imul(Se,qe)|0,_=Math.imul(Se,Fe),w=w+Math.imul(ae,$e)|0,c=c+Math.imul(ae,Be)|0,c=c+Math.imul(de,$e)|0,_=_+Math.imul(de,Be)|0,w=w+Math.imul(ee,Le)|0,c=c+Math.imul(ee,ze)|0,c=c+Math.imul(ie,Le)|0,_=_+Math.imul(ie,ze)|0,w=w+Math.imul(we,Pe)|0,c=c+Math.imul(we,Oe)|0,c=c+Math.imul(Te,Pe)|0,_=_+Math.imul(Te,Oe)|0,w=w+Math.imul(xe,je)|0,c=c+Math.imul(xe,Ue)|0,c=c+Math.imul(le,je)|0,_=_+Math.imul(le,Ue)|0,w=w+Math.imul(ue,ke)|0,c=c+Math.imul(ue,Ve)|0,c=c+Math.imul(me,ke)|0,_=_+Math.imul(me,Ve)|0,w=w+Math.imul(X,De)|0,c=c+Math.imul(X,We)|0,c=c+Math.imul(Q,De)|0,_=_+Math.imul(Q,We)|0,w=w+Math.imul(B,Ge)|0,c=c+Math.imul(B,He)|0,c=c+Math.imul(q,Ge)|0,_=_+Math.imul(q,He)|0;var Wr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,w=Math.imul(he,$e),c=Math.imul(he,Be),c=c+Math.imul(Se,$e)|0,_=Math.imul(Se,Be),w=w+Math.imul(ae,Le)|0,c=c+Math.imul(ae,ze)|0,c=c+Math.imul(de,Le)|0,_=_+Math.imul(de,ze)|0,w=w+Math.imul(ee,Pe)|0,c=c+Math.imul(ee,Oe)|0,c=c+Math.imul(ie,Pe)|0,_=_+Math.imul(ie,Oe)|0,w=w+Math.imul(we,je)|0,c=c+Math.imul(we,Ue)|0,c=c+Math.imul(Te,je)|0,_=_+Math.imul(Te,Ue)|0,w=w+Math.imul(xe,ke)|0,c=c+Math.imul(xe,Ve)|0,c=c+Math.imul(le,ke)|0,_=_+Math.imul(le,Ve)|0,w=w+Math.imul(ue,De)|0,c=c+Math.imul(ue,We)|0,c=c+Math.imul(me,De)|0,_=_+Math.imul(me,We)|0,w=w+Math.imul(X,Ge)|0,c=c+Math.imul(X,He)|0,c=c+Math.imul(Q,Ge)|0,_=_+Math.imul(Q,He)|0;var Gr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,w=Math.imul(he,Le),c=Math.imul(he,ze),c=c+Math.imul(Se,Le)|0,_=Math.imul(Se,ze),w=w+Math.imul(ae,Pe)|0,c=c+Math.imul(ae,Oe)|0,c=c+Math.imul(de,Pe)|0,_=_+Math.imul(de,Oe)|0,w=w+Math.imul(ee,je)|0,c=c+Math.imul(ee,Ue)|0,c=c+Math.imul(ie,je)|0,_=_+Math.imul(ie,Ue)|0,w=w+Math.imul(we,ke)|0,c=c+Math.imul(we,Ve)|0,c=c+Math.imul(Te,ke)|0,_=_+Math.imul(Te,Ve)|0,w=w+Math.imul(xe,De)|0,c=c+Math.imul(xe,We)|0,c=c+Math.imul(le,De)|0,_=_+Math.imul(le,We)|0,w=w+Math.imul(ue,Ge)|0,c=c+Math.imul(ue,He)|0,c=c+Math.imul(me,Ge)|0,_=_+Math.imul(me,He)|0;var Hr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,w=Math.imul(he,Pe),c=Math.imul(he,Oe),c=c+Math.imul(Se,Pe)|0,_=Math.imul(Se,Oe),w=w+Math.imul(ae,je)|0,c=c+Math.imul(ae,Ue)|0,c=c+Math.imul(de,je)|0,_=_+Math.imul(de,Ue)|0,w=w+Math.imul(ee,ke)|0,c=c+Math.imul(ee,Ve)|0,c=c+Math.imul(ie,ke)|0,_=_+Math.imul(ie,Ve)|0,w=w+Math.imul(we,De)|0,c=c+Math.imul(we,We)|0,c=c+Math.imul(Te,De)|0,_=_+Math.imul(Te,We)|0,w=w+Math.imul(xe,Ge)|0,c=c+Math.imul(xe,He)|0,c=c+Math.imul(le,Ge)|0,_=_+Math.imul(le,He)|0;var Kr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,w=Math.imul(he,je),c=Math.imul(he,Ue),c=c+Math.imul(Se,je)|0,_=Math.imul(Se,Ue),w=w+Math.imul(ae,ke)|0,c=c+Math.imul(ae,Ve)|0,c=c+Math.imul(de,ke)|0,_=_+Math.imul(de,Ve)|0,w=w+Math.imul(ee,De)|0,c=c+Math.imul(ee,We)|0,c=c+Math.imul(ie,De)|0,_=_+Math.imul(ie,We)|0,w=w+Math.imul(we,Ge)|0,c=c+Math.imul(we,He)|0,c=c+Math.imul(Te,Ge)|0,_=_+Math.imul(Te,He)|0;var Zr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,w=Math.imul(he,ke),c=Math.imul(he,Ve),c=c+Math.imul(Se,ke)|0,_=Math.imul(Se,Ve),w=w+Math.imul(ae,De)|0,c=c+Math.imul(ae,We)|0,c=c+Math.imul(de,De)|0,_=_+Math.imul(de,We)|0,w=w+Math.imul(ee,Ge)|0,c=c+Math.imul(ee,He)|0,c=c+Math.imul(ie,Ge)|0,_=_+Math.imul(ie,He)|0;var Jr=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,w=Math.imul(he,De),c=Math.imul(he,We),c=c+Math.imul(Se,De)|0,_=Math.imul(Se,We),w=w+Math.imul(ae,Ge)|0,c=c+Math.imul(ae,He)|0,c=c+Math.imul(de,Ge)|0,_=_+Math.imul(de,He)|0;var Xt=(k+w|0)+((c&8191)<<13)|0;k=(_+(c>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,w=Math.imul(he,Ge),c=Math.imul(he,He),c=c+Math.imul(Se,Ge)|0,_=Math.imul(Se,He);var Tr=(k+w|0)+((c&8191)<<13)|0;return k=(_+(c>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,E[0]=rn,E[1]=Ot,E[2]=Rt,E[3]=Lr,E[4]=Pr,E[5]=qr,E[6]=$r,E[7]=zr,E[8]=jr,E[9]=Ur,E[10]=Vr,E[11]=Wr,E[12]=Gr,E[13]=Hr,E[14]=Kr,E[15]=Zr,E[16]=Jr,E[17]=Xt,E[18]=Tr,k!==0&&(E[19]=k,g.length++),g};Math.imul||(A=S);function T(M,f,d){d.negative=f.negative^M.negative,d.length=M.length+f.length;for(var g=0,m=0,b=0;b<d.length-1;b++){var E=m;m=0;for(var k=g&67108863,w=Math.min(b,f.length-1),c=Math.max(0,b-M.length+1);c<=w;c++){var _=b-c,R=M.words[_]|0,O=f.words[c]|0,F=R*O,U=F&67108863;E=E+(F/67108864|0)|0,U=U+k|0,k=U&67108863,E=E+(U>>>26)|0,m+=E>>>26,E&=67108863}d.words[b]=k,g=E,E=m}return g!==0?d.words[b]=g:d.length--,d.strip()}function I(M,f,d){var g=new N;return g.mulp(M,f,d)}a.prototype.mulTo=function(f,d){var g,m=this.length+f.length;return this.length===10&&f.length===10?g=A(this,f,d):m<63?g=S(this,f,d):m<1024?g=T(this,f,d):g=I(this,f,d),g};function N(M,f){this.x=M,this.y=f}N.prototype.makeRBT=function(f){for(var d=new Array(f),g=a.prototype._countBits(f)-1,m=0;m<f;m++)d[m]=this.revBin(m,g,f);return d},N.prototype.revBin=function(f,d,g){if(f===0||f===g-1)return f;for(var m=0,b=0;b<d;b++)m|=(f&1)<<d-b-1,f>>=1;return m},N.prototype.permute=function(f,d,g,m,b,E){for(var k=0;k<E;k++)m[k]=d[f[k]],b[k]=g[f[k]]},N.prototype.transform=function(f,d,g,m,b,E){this.permute(E,f,d,g,m,b);for(var k=1;k<b;k<<=1)for(var w=k<<1,c=Math.cos(2*Math.PI/w),_=Math.sin(2*Math.PI/w),R=0;R<b;R+=w)for(var O=c,F=_,U=0;U<k;U++){var H=g[R+U],J=m[R+U],fe=g[R+U+k],B=m[R+U+k],q=O*fe-F*B;B=O*B+F*fe,fe=q,g[R+U]=H+fe,m[R+U]=J+B,g[R+U+k]=H-fe,m[R+U+k]=J-B,U!==w&&(q=c*O-_*F,F=c*F+_*O,O=q)}},N.prototype.guessLen13b=function(f,d){var g=Math.max(d,f)|1,m=g&1,b=0;for(g=g/2|0;g;g=g>>>1)b++;return 1<<b+1+m},N.prototype.conjugate=function(f,d,g){if(!(g<=1))for(var m=0;m<g/2;m++){var b=f[m];f[m]=f[g-m-1],f[g-m-1]=b,b=d[m],d[m]=-d[g-m-1],d[g-m-1]=-b}},N.prototype.normalize13b=function(f,d){for(var g=0,m=0;m<d/2;m++){var b=Math.round(f[2*m+1]/d)*8192+Math.round(f[2*m]/d)+g;f[m]=b&67108863,b<67108864?g=0:g=b/67108864|0}return f},N.prototype.convert13b=function(f,d,g,m){for(var b=0,E=0;E<d;E++)b=b+(f[E]|0),g[2*E]=b&8191,b=b>>>13,g[2*E+1]=b&8191,b=b>>>13;for(E=2*d;E<m;++E)g[E]=0;r(b===0),r((b&-8192)===0)},N.prototype.stub=function(f){for(var d=new Array(f),g=0;g<f;g++)d[g]=0;return d},N.prototype.mulp=function(f,d,g){var m=2*this.guessLen13b(f.length,d.length),b=this.makeRBT(m),E=this.stub(m),k=new Array(m),w=new Array(m),c=new Array(m),_=new Array(m),R=new Array(m),O=new Array(m),F=g.words;F.length=m,this.convert13b(f.words,f.length,k,m),this.convert13b(d.words,d.length,_,m),this.transform(k,E,w,c,m,b),this.transform(_,E,R,O,m,b);for(var U=0;U<m;U++){var H=w[U]*R[U]-c[U]*O[U];c[U]=w[U]*O[U]+c[U]*R[U],w[U]=H}return this.conjugate(w,c,m),this.transform(w,c,F,E,m,b),this.conjugate(F,E,m),this.normalize13b(F,m),g.negative=f.negative^d.negative,g.length=f.length+d.length,g.strip()},a.prototype.mul=function(f){var d=new a(null);return d.words=new Array(this.length+f.length),this.mulTo(f,d)},a.prototype.mulf=function(f){var d=new a(null);return d.words=new Array(this.length+f.length),I(this,f,d)},a.prototype.imul=function(f){return this.clone().mulTo(f,this)},a.prototype.imuln=function(f){r(typeof f=="number"),r(f<67108864);for(var d=0,g=0;g<this.length;g++){var m=(this.words[g]|0)*f,b=(m&67108863)+(d&67108863);d>>=26,d+=m/67108864|0,d+=b>>>26,this.words[g]=b&67108863}return d!==0&&(this.words[g]=d,this.length++),this},a.prototype.muln=function(f){return this.clone().imuln(f)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(f){var d=y(f);if(d.length===0)return new a(1);for(var g=this,m=0;m<d.length&&d[m]===0;m++,g=g.sqr());if(++m<d.length)for(var b=g.sqr();m<d.length;m++,b=b.sqr())d[m]!==0&&(g=g.mul(b));return g},a.prototype.iushln=function(f){r(typeof f=="number"&&f>=0);var d=f%26,g=(f-d)/26,m=67108863>>>26-d<<26-d,b;if(d!==0){var E=0;for(b=0;b<this.length;b++){var k=this.words[b]&m,w=(this.words[b]|0)-k<<d;this.words[b]=w|E,E=k>>>26-d}E&&(this.words[b]=E,this.length++)}if(g!==0){for(b=this.length-1;b>=0;b--)this.words[b+g]=this.words[b];for(b=0;b<g;b++)this.words[b]=0;this.length+=g}return this.strip()},a.prototype.ishln=function(f){return r(this.negative===0),this.iushln(f)},a.prototype.iushrn=function(f,d,g){r(typeof f=="number"&&f>=0);var m;d?m=(d-d%26)/26:m=0;var b=f%26,E=Math.min((f-b)/26,this.length),k=67108863^67108863>>>b<<b,w=g;if(m-=E,m=Math.max(0,m),w){for(var c=0;c<E;c++)w.words[c]=this.words[c];w.length=E}if(E!==0)if(this.length>E)for(this.length-=E,c=0;c<this.length;c++)this.words[c]=this.words[c+E];else this.words[0]=0,this.length=1;var _=0;for(c=this.length-1;c>=0&&(_!==0||c>=m);c--){var R=this.words[c]|0;this.words[c]=_<<26-b|R>>>b,_=R&k}return w&&_!==0&&(w.words[w.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(f,d,g){return r(this.negative===0),this.iushrn(f,d,g)},a.prototype.shln=function(f){return this.clone().ishln(f)},a.prototype.ushln=function(f){return this.clone().iushln(f)},a.prototype.shrn=function(f){return this.clone().ishrn(f)},a.prototype.ushrn=function(f){return this.clone().iushrn(f)},a.prototype.testn=function(f){r(typeof f=="number"&&f>=0);var d=f%26,g=(f-d)/26,m=1<<d;if(this.length<=g)return!1;var b=this.words[g];return!!(b&m)},a.prototype.imaskn=function(f){r(typeof f=="number"&&f>=0);var d=f%26,g=(f-d)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(d!==0&&g++,this.length=Math.min(g,this.length),d!==0){var m=67108863^67108863>>>d<<d;this.words[this.length-1]&=m}return this.strip()},a.prototype.maskn=function(f){return this.clone().imaskn(f)},a.prototype.iaddn=function(f){return r(typeof f=="number"),r(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},a.prototype._iaddn=function(f){this.words[0]+=f;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},a.prototype.isubn=function(f){if(r(typeof f=="number"),r(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this.strip()},a.prototype.addn=function(f){return this.clone().iaddn(f)},a.prototype.subn=function(f){return this.clone().isubn(f)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(f,d,g){var m=f.length+g,b;this._expand(m);var E,k=0;for(b=0;b<f.length;b++){E=(this.words[b+g]|0)+k;var w=(f.words[b]|0)*d;E-=w&67108863,k=(E>>26)-(w/67108864|0),this.words[b+g]=E&67108863}for(;b<this.length-g;b++)E=(this.words[b+g]|0)+k,k=E>>26,this.words[b+g]=E&67108863;if(k===0)return this.strip();for(r(k===-1),k=0,b=0;b<this.length;b++)E=-(this.words[b]|0)+k,k=E>>26,this.words[b]=E&67108863;return this.negative=1,this.strip()},a.prototype._wordDiv=function(f,d){var g=this.length-f.length,m=this.clone(),b=f,E=b.words[b.length-1]|0,k=this._countBits(E);g=26-k,g!==0&&(b=b.ushln(g),m.iushln(g),E=b.words[b.length-1]|0);var w=m.length-b.length,c;if(d!=="mod"){c=new a(null),c.length=w+1,c.words=new Array(c.length);for(var _=0;_<c.length;_++)c.words[_]=0}var R=m.clone()._ishlnsubmul(b,1,w);R.negative===0&&(m=R,c&&(c.words[w]=1));for(var O=w-1;O>=0;O--){var F=(m.words[b.length+O]|0)*67108864+(m.words[b.length+O-1]|0);for(F=Math.min(F/E|0,67108863),m._ishlnsubmul(b,F,O);m.negative!==0;)F--,m.negative=0,m._ishlnsubmul(b,1,O),m.isZero()||(m.negative^=1);c&&(c.words[O]=F)}return c&&c.strip(),m.strip(),d!=="div"&&g!==0&&m.iushrn(g),{div:c||null,mod:m}},a.prototype.divmod=function(f,d,g){if(r(!f.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var m,b,E;return this.negative!==0&&f.negative===0?(E=this.neg().divmod(f,d),d!=="mod"&&(m=E.div.neg()),d!=="div"&&(b=E.mod.neg(),g&&b.negative!==0&&b.iadd(f)),{div:m,mod:b}):this.negative===0&&f.negative!==0?(E=this.divmod(f.neg(),d),d!=="mod"&&(m=E.div.neg()),{div:m,mod:E.mod}):(this.negative&f.negative)!==0?(E=this.neg().divmod(f.neg(),d),d!=="div"&&(b=E.mod.neg(),g&&b.negative!==0&&b.isub(f)),{div:E.div,mod:b}):f.length>this.length||this.cmp(f)<0?{div:new a(0),mod:this}:f.length===1?d==="div"?{div:this.divn(f.words[0]),mod:null}:d==="mod"?{div:null,mod:new a(this.modn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new a(this.modn(f.words[0]))}:this._wordDiv(f,d)},a.prototype.div=function(f){return this.divmod(f,"div",!1).div},a.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},a.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},a.prototype.divRound=function(f){var d=this.divmod(f);if(d.mod.isZero())return d.div;var g=d.div.negative!==0?d.mod.isub(f):d.mod,m=f.ushrn(1),b=f.andln(1),E=g.cmp(m);return E<0||b===1&&E===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},a.prototype.modn=function(f){r(f<=67108863);for(var d=(1<<26)%f,g=0,m=this.length-1;m>=0;m--)g=(d*g+(this.words[m]|0))%f;return g},a.prototype.idivn=function(f){r(f<=67108863);for(var d=0,g=this.length-1;g>=0;g--){var m=(this.words[g]|0)+d*67108864;this.words[g]=m/f|0,d=m%f}return this.strip()},a.prototype.divn=function(f){return this.clone().idivn(f)},a.prototype.egcd=function(f){r(f.negative===0),r(!f.isZero());var d=this,g=f.clone();d.negative!==0?d=d.umod(f):d=d.clone();for(var m=new a(1),b=new a(0),E=new a(0),k=new a(1),w=0;d.isEven()&&g.isEven();)d.iushrn(1),g.iushrn(1),++w;for(var c=g.clone(),_=d.clone();!d.isZero();){for(var R=0,O=1;(d.words[0]&O)===0&&R<26;++R,O<<=1);if(R>0)for(d.iushrn(R);R-- >0;)(m.isOdd()||b.isOdd())&&(m.iadd(c),b.isub(_)),m.iushrn(1),b.iushrn(1);for(var F=0,U=1;(g.words[0]&U)===0&&F<26;++F,U<<=1);if(F>0)for(g.iushrn(F);F-- >0;)(E.isOdd()||k.isOdd())&&(E.iadd(c),k.isub(_)),E.iushrn(1),k.iushrn(1);d.cmp(g)>=0?(d.isub(g),m.isub(E),b.isub(k)):(g.isub(d),E.isub(m),k.isub(b))}return{a:E,b:k,gcd:g.iushln(w)}},a.prototype._invmp=function(f){r(f.negative===0),r(!f.isZero());var d=this,g=f.clone();d.negative!==0?d=d.umod(f):d=d.clone();for(var m=new a(1),b=new a(0),E=g.clone();d.cmpn(1)>0&&g.cmpn(1)>0;){for(var k=0,w=1;(d.words[0]&w)===0&&k<26;++k,w<<=1);if(k>0)for(d.iushrn(k);k-- >0;)m.isOdd()&&m.iadd(E),m.iushrn(1);for(var c=0,_=1;(g.words[0]&_)===0&&c<26;++c,_<<=1);if(c>0)for(g.iushrn(c);c-- >0;)b.isOdd()&&b.iadd(E),b.iushrn(1);d.cmp(g)>=0?(d.isub(g),m.isub(b)):(g.isub(d),b.isub(m))}var R;return d.cmpn(1)===0?R=m:R=b,R.cmpn(0)<0&&R.iadd(f),R},a.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var d=this.clone(),g=f.clone();d.negative=0,g.negative=0;for(var m=0;d.isEven()&&g.isEven();m++)d.iushrn(1),g.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;g.isEven();)g.iushrn(1);var b=d.cmp(g);if(b<0){var E=d;d=g,g=E}else if(b===0||g.cmpn(1)===0)break;d.isub(g)}while(!0);return g.iushln(m)},a.prototype.invm=function(f){return this.egcd(f).a.umod(f)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(f){return this.words[0]&f},a.prototype.bincn=function(f){r(typeof f=="number");var d=f%26,g=(f-d)/26,m=1<<d;if(this.length<=g)return this._expand(g+1),this.words[g]|=m,this;for(var b=m,E=g;b!==0&&E<this.length;E++){var k=this.words[E]|0;k+=b,b=k>>>26,k&=67108863,this.words[E]=k}return b!==0&&(this.words[E]=b,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(f){var d=f<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this.strip();var g;if(this.length>1)g=1;else{d&&(f=-f),r(f<=67108863,"Number is too big");var m=this.words[0]|0;g=m===f?0:m<f?-1:1}return this.negative!==0?-g|0:g},a.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var d=this.ucmp(f);return this.negative!==0?-d|0:d},a.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var d=0,g=this.length-1;g>=0;g--){var m=this.words[g]|0,b=f.words[g]|0;if(m!==b){m<b?d=-1:m>b&&(d=1);break}}return d},a.prototype.gtn=function(f){return this.cmpn(f)===1},a.prototype.gt=function(f){return this.cmp(f)===1},a.prototype.gten=function(f){return this.cmpn(f)>=0},a.prototype.gte=function(f){return this.cmp(f)>=0},a.prototype.ltn=function(f){return this.cmpn(f)===-1},a.prototype.lt=function(f){return this.cmp(f)===-1},a.prototype.lten=function(f){return this.cmpn(f)<=0},a.prototype.lte=function(f){return this.cmp(f)<=0},a.prototype.eqn=function(f){return this.cmpn(f)===0},a.prototype.eq=function(f){return this.cmp(f)===0},a.red=function(f){return new j(f)},a.prototype.toRed=function(f){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},a.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(f){return this.red=f,this},a.prototype.forceRed=function(f){return r(!this.red,"Already a number in reduction context"),this._forceRed(f)},a.prototype.redAdd=function(f){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},a.prototype.redIAdd=function(f){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},a.prototype.redSub=function(f){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},a.prototype.redISub=function(f){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},a.prototype.redShl=function(f){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},a.prototype.redMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},a.prototype.redIMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},a.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(f){return r(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var D={k256:null,p224:null,p192:null,p25519:null};function C(M,f){this.name=M,this.p=new a(f,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}C.prototype._tmp=function(){var f=new a(null);return f.words=new Array(Math.ceil(this.n/13)),f},C.prototype.ireduce=function(f){var d=f,g;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),g=d.bitLength();while(g>this.n);var m=g<this.n?-1:d.ucmp(this.p);return m===0?(d.words[0]=0,d.length=1):m>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},C.prototype.split=function(f,d){f.iushrn(this.n,0,d)},C.prototype.imulK=function(f){return f.imul(this.k)};function L(){C.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(L,C),L.prototype.split=function(f,d){for(var g=4194303,m=Math.min(f.length,9),b=0;b<m;b++)d.words[b]=f.words[b];if(d.length=m,f.length<=9){f.words[0]=0,f.length=1;return}var E=f.words[9];for(d.words[d.length++]=E&g,b=10;b<f.length;b++){var k=f.words[b]|0;f.words[b-10]=(k&g)<<4|E>>>22,E=k}E>>>=22,f.words[b-10]=E,E===0&&f.length>10?f.length-=10:f.length-=9},L.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var d=0,g=0;g<f.length;g++){var m=f.words[g]|0;d+=m*977,f.words[g]=d&67108863,d=m*64+(d/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function z(){C.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(z,C);function $(){C.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n($,C);function G(){C.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(G,C),G.prototype.imulK=function(f){for(var d=0,g=0;g<f.length;g++){var m=(f.words[g]|0)*19+d,b=m&67108863;m>>>=26,f.words[g]=b,d=m}return d!==0&&(f.words[f.length++]=d),f},a._prime=function(f){if(D[f])return D[f];var d;if(f==="k256")d=new L;else if(f==="p224")d=new z;else if(f==="p192")d=new $;else if(f==="p25519")d=new G;else throw new Error("Unknown prime "+f);return D[f]=d,d};function j(M){if(typeof M=="string"){var f=a._prime(M);this.m=f.p,this.prime=f}else r(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}j.prototype._verify1=function(f){r(f.negative===0,"red works only with positives"),r(f.red,"red works only with red numbers")},j.prototype._verify2=function(f,d){r((f.negative|d.negative)===0,"red works only with positives"),r(f.red&&f.red===d.red,"red works only with red numbers")},j.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):f.umod(this.m)._forceRed(this)},j.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},j.prototype.add=function(f,d){this._verify2(f,d);var g=f.add(d);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},j.prototype.iadd=function(f,d){this._verify2(f,d);var g=f.iadd(d);return g.cmp(this.m)>=0&&g.isub(this.m),g},j.prototype.sub=function(f,d){this._verify2(f,d);var g=f.sub(d);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},j.prototype.isub=function(f,d){this._verify2(f,d);var g=f.isub(d);return g.cmpn(0)<0&&g.iadd(this.m),g},j.prototype.shl=function(f,d){return this._verify1(f),this.imod(f.ushln(d))},j.prototype.imul=function(f,d){return this._verify2(f,d),this.imod(f.imul(d))},j.prototype.mul=function(f,d){return this._verify2(f,d),this.imod(f.mul(d))},j.prototype.isqr=function(f){return this.imul(f,f.clone())},j.prototype.sqr=function(f){return this.mul(f,f)},j.prototype.sqrt=function(f){if(f.isZero())return f.clone();var d=this.m.andln(3);if(r(d%2===1),d===3){var g=this.m.add(new a(1)).iushrn(2);return this.pow(f,g)}for(var m=this.m.subn(1),b=0;!m.isZero()&&m.andln(1)===0;)b++,m.iushrn(1);r(!m.isZero());var E=new a(1).toRed(this),k=E.redNeg(),w=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new a(2*c*c).toRed(this);this.pow(c,w).cmp(k)!==0;)c.redIAdd(k);for(var _=this.pow(c,m),R=this.pow(f,m.addn(1).iushrn(1)),O=this.pow(f,m),F=b;O.cmp(E)!==0;){for(var U=O,H=0;U.cmp(E)!==0;H++)U=U.redSqr();r(H<F);var J=this.pow(_,new a(1).iushln(F-H-1));R=R.redMul(J),_=J.redSqr(),O=O.redMul(_),F=H}return R},j.prototype.invm=function(f){var d=f._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},j.prototype.pow=function(f,d){if(d.isZero())return new a(1).toRed(this);if(d.cmpn(1)===0)return f.clone();var g=4,m=new Array(1<<g);m[0]=new a(1).toRed(this),m[1]=f;for(var b=2;b<m.length;b++)m[b]=this.mul(m[b-1],f);var E=m[0],k=0,w=0,c=d.bitLength()%26;for(c===0&&(c=26),b=d.length-1;b>=0;b--){for(var _=d.words[b],R=c-1;R>=0;R--){var O=_>>R&1;if(E!==m[0]&&(E=this.sqr(E)),O===0&&k===0){w=0;continue}k<<=1,k|=O,w++,!(w!==g&&(b!==0||R!==0))&&(E=this.mul(E,m[k]),w=0,k=0)}c=26}return E},j.prototype.convertTo=function(f){var d=f.umod(this.m);return d===f?d.clone():d},j.prototype.convertFrom=function(f){var d=f.clone();return d.red=null,d},a.mont=function(f){return new K(f)};function K(M){j.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(K,j),K.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},K.prototype.convertFrom=function(f){var d=this.imod(f.mul(this.rinv));return d.red=null,d},K.prototype.imul=function(f,d){if(f.isZero()||d.isZero())return f.words[0]=0,f.length=1,f;var g=f.imul(d),m=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(m).iushrn(this.shift),E=b;return b.cmp(this.m)>=0?E=b.isub(this.m):b.cmpn(0)<0&&(E=b.iadd(this.m)),E._forceRed(this)},K.prototype.mul=function(f,d){if(f.isZero()||d.isZero())return new a(0)._forceRed(this);var g=f.mul(d),m=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(m).iushrn(this.shift),E=b;return b.cmp(this.m)>=0?E=b.isub(this.m):b.cmpn(0)<0&&(E=b.iadd(this.m)),E._forceRed(this)},K.prototype.invm=function(f){var d=this.imod(f._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(typeof B6=="undefined"||B6,rz)});var L6=ne((xtt,iz)=>{var nz=e2(),Bwe=fr().Buffer;function Lwe(t,e){return Bwe.from(t.toRed(nz.mont(e.modulus)).redPow(new nz(e.publicExponent)).fromRed().toArray())}iz.exports=Lwe});var uz=ne((Stt,oz)=>{var Pwe=Eg(),P6=_c(),qwe=Zd(),az=C6(),sz=F6(),q6=e2(),$we=L6(),zwe=E_(),Lo=fr().Buffer;oz.exports=function(e,r,n){var a;e.padding?a=e.padding:n?a=1:a=4;var s=Pwe(e),o;if(a===4)o=jwe(s,r);else if(a===1)o=Uwe(s,r,n);else if(a===3){if(o=new q6(r),o.cmp(s.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return n?zwe(o,s):$we(o,s)};function jwe(t,e){var r=t.modulus.byteLength(),n=e.length,a=qwe("sha1").update(Lo.alloc(0)).digest(),s=a.length,o=2*s;if(n>r-o-2)throw new Error("message too long");var u=Lo.alloc(r-n-o-2),l=r-s-1,h=P6(s),p=sz(Lo.concat([a,u,Lo.alloc(1,1),e],l),az(h,l)),v=sz(h,az(p,s));return new q6(Lo.concat([Lo.alloc(1),v,p],r))}function Uwe(t,e,r){var n=e.length,a=t.modulus.byteLength();if(n>a-11)throw new Error("message too long");var s;return r?s=Lo.alloc(a-n-3,255):s=Vwe(a-n-3),new q6(Lo.concat([Lo.from([0,r?1:2]),s,Lo.alloc(1),e],a))}function Vwe(t){for(var e=Lo.allocUnsafe(t),r=0,n=P6(t*2),a=0,s;r<t;)a===n.length&&(n=P6(t*2),a=0),s=n[a++],s&&(e[r++]=s);return e}});var dz=ne((Ett,hz)=>{var Wwe=Eg(),fz=C6(),lz=F6(),cz=e2(),Gwe=E_(),Hwe=Zd(),Kwe=L6(),Tg=fr().Buffer;hz.exports=function(e,r,n){var a;e.padding?a=e.padding:n?a=1:a=4;var s=Wwe(e),o=s.modulus.byteLength();if(r.length>o||new cz(r).cmp(s.modulus)>=0)throw new Error("decryption error");var u;n?u=Kwe(new cz(r),s):u=Gwe(r,s);var l=Tg.alloc(o-u.length);if(u=Tg.concat([l,u],o),a===4)return Zwe(s,u);if(a===1)return Jwe(s,u,n);if(a===3)return u;throw new Error("unknown padding")};function Zwe(t,e){var r=t.modulus.byteLength(),n=Hwe("sha1").update(Tg.alloc(0)).digest(),a=n.length;if(e[0]!==0)throw new Error("decryption error");var s=e.slice(1,a+1),o=e.slice(a+1),u=lz(s,fz(o,a)),l=lz(o,fz(u,r-a-1));if(Ywe(n,l.slice(0,a)))throw new Error("decryption error");for(var h=a;l[h]===0;)h++;if(l[h++]!==1)throw new Error("decryption error");return l.slice(h)}function Jwe(t,e,r){for(var n=e.slice(0,2),a=2,s=0;e[a++]!==0;)if(a>=e.length){s++;break}var o=e.slice(2,a-1);if((n.toString("hex")!=="0002"&&!r||n.toString("hex")!=="0001"&&r)&&s++,o.length<8&&s++,s)throw new Error("decryption error");return e.slice(a)}function Ywe(t,e){t=Tg.from(t),e=Tg.from(e);var r=0,n=t.length;t.length!==e.length&&(r++,n=Math.min(t.length,e.length));for(var a=-1;++a<n;)r+=t[a]^e[a];return r}});var pz=ne(sh=>{sh.publicEncrypt=uz();sh.privateDecrypt=dz();sh.privateEncrypt=function(e,r){return sh.publicEncrypt(e,r,!0)};sh.publicDecrypt=function(e,r){return sh.privateDecrypt(e,r,!0)}});var Ez=ne(Ng=>{"use strict";function mz(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var gz=fr(),vz=_c(),yz=gz.Buffer,bz=gz.kMaxLength,$6=global.crypto||global.msCrypto,wz=Math.pow(2,32)-1;function _z(t,e){if(typeof t!="number"||t!==t)throw new TypeError("offset must be a number");if(t>wz||t<0)throw new TypeError("offset must be a uint32");if(t>bz||t>e)throw new RangeError("offset out of range")}function xz(t,e,r){if(typeof t!="number"||t!==t)throw new TypeError("size must be a number");if(t>wz||t<0)throw new TypeError("size must be a uint32");if(t+e>r||t>bz)throw new RangeError("buffer too small")}$6&&$6.getRandomValues||!process.browser?(Ng.randomFill=Xwe,Ng.randomFillSync=Qwe):(Ng.randomFill=mz,Ng.randomFillSync=mz);function Xwe(t,e,r,n){if(!yz.isBuffer(t)&&!(t instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof e=="function")n=e,e=0,r=t.length;else if(typeof r=="function")n=r,r=t.length-e;else if(typeof n!="function")throw new TypeError('"cb" argument must be a function');return _z(e,t.length),xz(r,e,t.length),Sz(t,e,r,n)}function Sz(t,e,r,n){if(process.browser){var a=t.buffer,s=new Uint8Array(a,e,r);if($6.getRandomValues(s),n){process.nextTick(function(){n(null,t)});return}return t}if(n){vz(r,function(u,l){if(u)return n(u);l.copy(t,e),n(null,t)});return}var o=vz(r);return o.copy(t,e),t}function Qwe(t,e,r){if(typeof e=="undefined"&&(e=0),!yz.isBuffer(t)&&!(t instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return _z(e,t.length),r===void 0&&(r=t.length-e),xz(r,e,t.length),Sz(t,e,r)}});var i_=ne(Vt=>{"use strict";Vt.randomBytes=Vt.rng=Vt.pseudoRandomBytes=Vt.prng=_c();Vt.createHash=Vt.Hash=Zd();Vt.createHmac=Vt.Hmac=Dk();var e_e=z9(),t_e=Object.keys(e_e),r_e=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(t_e);Vt.getHashes=function(){return r_e};var Mz=zk();Vt.pbkdf2=Mz.pbkdf2;Vt.pbkdf2Sync=Mz.pbkdf2Sync;var Tu=fL();Vt.Cipher=Tu.Cipher;Vt.createCipher=Tu.createCipher;Vt.Cipheriv=Tu.Cipheriv;Vt.createCipheriv=Tu.createCipheriv;Vt.Decipher=Tu.Decipher;Vt.createDecipher=Tu.createDecipher;Vt.Decipheriv=Tu.Decipheriv;Vt.createDecipheriv=Tu.createDecipheriv;Vt.getCiphers=Tu.getCiphers;Vt.listCiphers=Tu.listCiphers;var Ig=EL();Vt.DiffieHellmanGroup=Ig.DiffieHellmanGroup;Vt.createDiffieHellmanGroup=Ig.createDiffieHellmanGroup;Vt.getDiffieHellman=Ig.getDiffieHellman;Vt.createDiffieHellman=Ig.createDiffieHellman;Vt.DiffieHellman=Ig.DiffieHellman;var t2=Z$();Vt.createSign=t2.createSign;Vt.Sign=t2.Sign;Vt.createVerify=t2.createVerify;Vt.Verify=t2.Verify;Vt.createECDH=Q$();var r2=pz();Vt.publicEncrypt=r2.publicEncrypt;Vt.privateEncrypt=r2.privateEncrypt;Vt.publicDecrypt=r2.publicDecrypt;Vt.privateDecrypt=r2.privateDecrypt;var Az=Ez();Vt.randomFill=Az.randomFill;Vt.randomFillSync=Az.randomFillSync;Vt.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))};Vt.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}});var kz=ne((exports,module)=>{var crypto=i_(),exp=Math.exp,ln=Math.log,PI=Math.PI,pow=Math.pow;module.exports={prng:function(t){t===void 0&&(t=16);for(var e=crypto.randomBytes(t),r=0,n=0;n<t;n++)r=r+Number(e[n])/Math.pow(256,n+1);return r},rbeta:function(t,e,r,n){t=this._v(t,"n"),e=this._v(e,"nn",1),r=this._v(r,"nn",1),n=this._v(n,"r",0);for(var a=[],s=0;s<t;s++){var o=this.rgamma(1,e,1)[0],u=this.rgamma(1,r,1)[0];a[s]=n+o/(o+u)}return a},rbinom:function(t,e,r){t=this._v(t,"n"),e=this._v(e,"nni",1),r=this._v(r,"p",.5);for(var n=[],a=0;a<t;a++){for(var s=0,o=0;o<e;o++)this.prng()<r&&s++;n[a]=s}return n},rcauchy:function(t,e,r){t=this._v(t,"n"),e=this._v(e,"r",0),r=this._v(r,"nn",1);for(var n=[],a=0;a<t;a++){var s=r*Math.tan(PI*(this.prng()-.5))+e;n[a]=s}return n},rchisq:function(t,e,r){t=this._v(t,"n"),e=this._v(e,"nn"),r=this._v(r,"r",0);for(var n=[],a=0;a<t;a++){for(var s=r,o=0;o<e;o++)s=s+Math.pow(this.rnorm(1)[0],2);n[a]=s}return n},dexp:function(t,e){return t=this._v(t,"r"),e=this._v(e,"pos",1),t<0?0:e*exp(-e*t)},rexp:function(t,e){t=this._v(t,"n"),e=this._v(e,"pos",1);for(var r=[],n=0;n<t;n++)r[n]=-ln(this.prng())/e;return r},rf:function(t,e,r){t=this._v(t,"n"),e=this._v(e,"nn"),r=this._v(r,"nn");for(var n=[],a=0;a<t;a++){var s=this.rchisq(1,e)[0]/e,o=this.rchisq(1,r)[0]/r;n[a]=s/o}return n},rgamma:function(t,e,r){t=this._v(t,"n"),e=this._v(e,"nn"),r=this._v(r,"pos",1);for(var n=ln(4),a=1+ln(4.5),s=1/r,o=[],u=0;u<t;u++){if(e>1)for(var l=Math.sqrt(2*e-1),h=e-n,p=e+l;;){var v=this.prng();if(!(v<1e-7||D>.9999999)){var y=1-this.prng(),S=ln(v/(1-v))/l,A=e*exp(S),T=v*v*y,I=h+p*S-A;if(I+a-4.5*T>=0||I>=ln(T)){var N=A*s;break}}}else if(e==1){for(var D=this.prng();D<=1e-7;)D=this.prng();var N=-ln(D)*s}else{for(;;){var D=this.prng(),C=(Math.E+e)/Math.E,L=C*D;if(L<=1)var A=Math.pow(L,1/e);else var A=-ln((C-L)/e);var v=this.prng();if(L>1){if(v<=Math.pow(A,e-1))break}else if(v<=exp(-A))break}var N=A*s}o[u]=N}return o},rint:function(t,e,r,n){if(t=this._v(t,"n"),e=this._v(e,"int"),r=this._v(r,"int"),n===!1){if(e++,e===r)throw new Error("Minimum value cannot be greater than maximum value. For non-inclusive, minimum and maximum must be separated by at least 2.")}else r++;if(e>r)throw new Error("Minimum value cannot be greater than maximum value. For non-inclusive, minimum and maximum must be separated by at least 2.");for(var a=[],s=this.runif(t,e,r),o=0;o<t;o++)a[o]=Math.floor(s[o]);return a},rlaplace:function(t,e,r){t=this._v(t,"n"),e=this._v(e,"r",0),r=this._v(r,"nn",1);for(var n=[],a=0;a<t;a++){var s=this.sample([-1,1])[0]*ln(this.prng()),o=e-r*s;n[a]=o}return n},rlnorm:function(t,e,r){t=this._v(t,"n"),e=this._v(e,"r",0),r=this._v(r,"nn",1);for(var n=[],a=0;a<t;a++){var s=this.rnorm(1,e,r)[0];n[a]=exp(s)}return n},rnbinom:function(t,e,r,n){if(t=this._v(t,"n"),e===void 0&&(e=1),Math.round(e)!=e)throw new Error("Size must be a whole number");if(e<1)throw new Error("Size must be one or greater");if(r!==void 0&&n!==void 0)throw new Error("You must specify probability or mean, not both");n!==void 0&&(r=e/(e+n)),r=this._v(r,"p");for(var a=[],s=0;s<t;s++){for(var o=0,u=e;u>0;)o++,this.prng()<r&&u--;a[s]=o-1}return a},dnorm:function(t,e,r){if(t=this._v(t,"r"),e=this._v(e,"r",0),r=this._v(r,"nn",1),r===0)return t===e?1/0:0;var n=r*Math.sqrt(2*PI),a=-(t-e)*(t-e),s=2*r*r;return 1/n*exp(a/s)},rnorm:function(t,e,r){t=this._v(t,"n"),e=this._v(e,"r",0),r=this._v(r,"nn",1);for(var n=[],a=0;a<t;a++){var s,o,u,l;do{var h=this.prng(),p=this.prng();s=2*h-1,o=2*p-1,u=s*s+o*o}while(u>1);l=Math.sqrt(-2*ln(u)/u)*s,l=e+r*l,n.push(l)}return n},dpois:function(t,e){if(t=this._v(t,"nni"),e=this._v(e,"nn"),e===0)return t===0?1:0;var r=pow(e,t),n=exp(-e),a=this._factorial(t);return r*n/a},rpois:function(t,e){t=this._v(t,"n"),e=this._v(e,"pos");for(var r=[],n=0;n<t;n++)if(e<30){var a=exp(-e),s=1,o=0;do o++,s*=this.prng();while(s>a);r.push(o-1)}else{for(var u=1e4,s=e/u,o=0,l=0;l<u;l++)this.prng()<s&&o++;r[n]=o}return r},dunif:function(t,e,r){if(t=this._v(t,"r"),e=this._v(e,"r",0),r=this._v(r,"r",1),e>r)throw new Error("Minimum value cannot be greater than maximum value");return t<e||t>r?0:e===r?1/0:1/(r-e)},runif:function(t,e,r){if(t=this._v(t,"n"),e=this._v(e,"r",0),r=this._v(r,"r",1),e>r)throw new Error("Minimum value cannot be greater than maximum value");for(var n=[],a=0;a<t;a++){var s=this.prng(),o=e+s*(r-e);n.push(o)}return n},rword:function(t,e){t=this._v(t,"n"),e=this._v(e,"str","abcdefghijklmnopqrstuvwxyz");var r=e.split(""),n=this.sample(r,t,!0);return n.join("")},sample:function(t,e,r,n){if(t=this._v(t,"a"),e=this._v(e,"n",t.length),r===void 0&&(r=!1),!r&&t.length<e)throw new Error("You cannot select "+e+" items from an array of length "+t.length+" without replacement");if(n===void 0){n=[];for(var a=0;a<t.length;a++)n[a]=1}for(var s=this._getCumulativeProbs(n,t.length),o=[],u=0;u<e;u++){var l=this._sampleOneIndex(s);r?o[u]=t[l]:(o[u]=t.splice(l,1)[0],n.splice(l,1),n.length&&(s=this._getCumulativeProbs(n,t.length)))}return o},visualize:function(data,domID,options){var defaultOptions={lag:1e3,blank:"",inf:"&infin;",loop:!0,conditions:"",arrivalTimes:!1,arrivalSymbol:'<span class="pd-arrival">&#8226;</span>',arrivalFlashTime:.25,significantDigits:0};typeof options=="undefined"&&(options={});for(var property in defaultOptions)defaultOptions.hasOwnProperty(property)&&typeof options[property]=="undefined"&&(options[property]=defaultOptions[property]);var elem=document.getElementById(domID);if(!elem)throw new Error("Unable to find DOM element "+domID);var len=data.length,i=0,format=function(x){var x=data[i];if(options.conditions){if(!/^[x\&\|=0-9\<\>\s\-\.]+$/.test(options.conditions))throw new Error("Bad input sent to options.conditions");if(eval(options.conditions)!==!0)return x=options.blank,x}return options.significantDigits&&(x=x.toPrecision(options.significantDigits)),x===1/0&&(x=options.inf),x};if(options.arrivalTimes){var blankOut=function(){setTimeout(function(){elem.innerHTML=options.blank},options.arrivalFlashTime*options.lag)},cycle=function(){elem.innerHTML=options.arrivalSymbol,blankOut(),++i===len&&(i=0),options.loop||i!==0?setTimeout(cycle,data[i]*options.lag):elem.innerHTML=options.blank};cycle()}else{var update=function(){elem.innerHTML=format(data[i]),++i===len&&(i=0),options.loop||i!==0?setTimeout(update,options.lag):setTimeout(function(){elem.innerHTML=options.blank},options.lag)};update()}},_getCumulativeProbs:function(t,e){if(e===void 0)throw new Error("An error occurred: len was not sent to _getCumulativeProbs");if(t.length!==e)throw new Error("Probabilities for sample must be same length as the array to sample from");var r=[];if(t!==void 0){if(t=this._v(t,"a"),t.length!==e)throw new Error("Probabilities array must be the same length as the array you are sampling from");var n=0;t.map(function(s){s=this._v(s,"nn"),n+=s,r.push(n)}.bind(this));for(var a=0;a<r.length;a++)r[a]=r[a]/n;return r}},_sampleOneIndex:function(t){for(var e=this.prng(),r=0;e>t[r];)r++;return r},_factorial:function(t){for(var e=1,r=2;r<=t;r++)e=e*r;return e},_v:function(t,e,r){if(t==null&&r!=null)return r;switch(e){case"a":if(!Array.isArray(t)||!t.length)throw new Error("Expected an array of length 1 or greater");return t.slice(0);case"int":if(t!==Number(t))throw new Error("A required parameter is missing or not a number");if(t!==Math.round(t))throw new Error("Parameter must be a whole number");if(t===1/0)throw new Error("Sent 'infinity' as a parameter");return t;case"n":if(t===void 0)throw new Error("You must specify how many values you want");if(t!==Number(t))throw new Error("The number of values must be numeric");if(t!==Math.round(t))throw new Error("The number of values must be a whole number");if(t<1)throw new Error("The number of values must be a whole number of 1 or greater");if(t===1/0)throw new Error("The number of values cannot be infinite ;-)");return t;case"p":if(Number(t)!==t)throw new Error("Probability value is missing or not a number");if(t>1)throw new Error("Probability values cannot be greater than 1");if(t<0)throw new Error("Probability values cannot be less than 0");return t;case"pos":if(Number(t)!==t)throw new Error("A required parameter is missing or not a number");if(t<=0)throw new Error("Parameter must be greater than 0");if(t===1/0)throw new Error("Sent 'infinity' as a parameter");return t;case"r":if(Number(t)!==t)throw new Error("A required parameter is missing or not a number");if(t===1/0)throw new Error("Sent 'infinity' as a parameter");return t;case"nn":if(t!==Number(t))throw new Error("A required parameter is missing or not a number");if(t<0)throw new Error("Parameter cannot be less than 0");if(t===1/0)throw new Error("Sent 'infinity' as a parameter");return t;case"nni":if(t!==Number(t))throw new Error("A required parameter is missing or not a number");if(t!==Math.round(t))throw new Error("Parameter must be a whole number");if(t<0)throw new Error("Parameter cannot be less than zero");if(t===1/0)throw new Error("Sent 'infinity' as a parameter");return t;case"str":if(t!==String(t))throw new Error("A required parameter is missing or not a string");if(t.length===0)throw new Error("Parameter must be at least one character long");return t}},rfml:function(t,e,r,n,a){t=this._v(t,"n"),e=this._v(e,"nni",1),r===void 0&&(r=this.prng),n=this._v(n,"n",1e4),a===void 0&&(a={});for(var s=[],o=0;o<t;o++){var u=0,l=e,h=r();if(e===0)s[o]=0;else{do{var p=this.prng();p<h?(l++,a[String(o)+"_"+String(u)]={problems:l,p:h,result:1}):(l--,a[String(o)+"_"+String(u)]={problems:l,p:h,result:-1}),u++}while(l>0&&u<n);u===n&&(u=-1),s[o]=u}}return s},ruf:function(t){t=this._v(t,"n");for(var e=[],r=0;r<t;r++)e[r]=this.rexp(1,this.prng())[0];return e}}});var z6=ne(Dt=>{"use strict";function n2(t,e){return t-e}Dt.sum=function(e){for(var r=0,n=0;n<e.length;n++)r+=e[n];return r};Dt.max=function(e){for(var r=e[0],n=e.length,a=1;a<n;a++)e[a]>r&&(r=e[a]);return r};Dt.min=function(e){for(var r=e[0],n=e.length,a=1;a<n;a++)e[a]<r&&(r=e[a]);return r};Dt.minMax=function(e){for(var r=e[0],n=e[0],a=e.length,s=1;s<a;s++)e[s]<r&&(r=e[s]),e[s]>n&&(n=e[s]);return{min:r,max:n}};Dt.arithmeticMean=function(e){for(var r=0,n=e.length,a=0;a<n;a++)r+=e[a];return r/n};Dt.mean=Dt.arithmeticMean;Dt.geometricMean=function(e){for(var r=1,n=e.length,a=0;a<n;a++)r*=e[a];return Math.pow(r,1/n)};Dt.logMean=function(e){for(var r=0,n=e.length,a=0;a<n;a++)r+=Math.log(e[a]);return r/n};Dt.grandMean=function(e,r){for(var n=0,a=0,s=e.length,o=0;o<s;o++)n+=r[o]*e[o],a+=r[o];return n/a};Dt.truncatedMean=function(e,r,n){n===void 0&&(n=!1),n||(e=[].concat(e).sort(n2));for(var a=e.length,s=Math.floor(a*r),o=0,u=s;u<a-s;u++)o+=e[u];return o/(a-2*s)};Dt.harmonicMean=function(e){for(var r=0,n=e.length,a=0;a<n;a++){if(e[a]===0)throw new RangeError("value at index "+a+"is zero");r+=1/e[a]}return n/r};Dt.contraHarmonicMean=function(e){for(var r=0,n=0,a=e.length,s=0;s<a;s++)r+=e[s]*e[s],n+=e[s];if(n<0)throw new RangeError("sum of values is negative");return r/n};Dt.median=function(e,r){r===void 0&&(r=!1),r||(e=[].concat(e).sort(n2));var n=e.length,a=Math.floor(n/2);return n%2===0?(e[a-1]+e[a])*.5:e[a]};Dt.variance=function(e,r){r===void 0&&(r=!0);for(var n=Dt.mean(e),a=0,s=e.length,o=0;o<s;o++){var u=e[o]-n;a+=u*u}return r?a/(s-1):a/s};Dt.standardDeviation=function(e,r){return Math.sqrt(Dt.variance(e,r))};Dt.standardError=function(e){return Dt.standardDeviation(e)/Math.sqrt(e.length)};Dt.robustMeanAndStdev=function(e){var r=0,n=0,a=e.length,s=0;for(s=0;s<a;s++)r+=e[s];r/=a;var o=new Array(a);for(s=0;s<a;s++)o[s]=Math.abs(e[s]-r);return o.sort(n2),a%2===1?n=o[(a-1)/2]/.6745:n=.5*(o[a/2]+o[a/2-1])/.6745,{mean:r,stdev:n}};Dt.quartiles=function(e,r){typeof r=="undefined"&&(r=!1),r||(e=[].concat(e).sort(n2));var n=e.length/4,a=e[Math.ceil(n)-1],s=Dt.median(e,!0),o=e[Math.ceil(n*3)-1];return{q1:a,q2:s,q3:o}};Dt.pooledStandardDeviation=function(e,r){return Math.sqrt(Dt.pooledVariance(e,r))};Dt.pooledVariance=function(e,r){typeof r=="undefined"&&(r=!0);for(var n=0,a=0,s=e.length,o=0;o<s;o++){var u=e[o],l=Dt.variance(u);n+=(u.length-1)*l,r?a+=u.length-1:a+=u.length}return n/a};Dt.mode=function(e){var r=e.length,n=new Array(r),a;for(a=0;a<r;a++)n[a]=0;var s=new Array(r),o=0;for(a=0;a<r;a++){var u=s.indexOf(e[a]);u>=0?n[u]++:(s[o]=e[a],n[o]=1,o++)}var l=0,h=0;for(a=0;a<o;a++)n[a]>l&&(l=n[a],h=a);return s[h]};Dt.covariance=function(e,r,n){typeof n=="undefined"&&(n=!0);var a=Dt.mean(e),s=Dt.mean(r);if(e.length!==r.length)throw"Vectors do not have the same dimensions";for(var o=0,u=e.length,l=0;l<u;l++){var h=e[l]-a,p=r[l]-s;o+=h*p}return n?o/(u-1):o/u};Dt.skewness=function(e,r){typeof r=="undefined"&&(r=!0);for(var n=Dt.mean(e),a=0,s=0,o=e.length,u=0;u<o;u++){var l=e[u]-n;a+=l*l,s+=l*l*l}var h=a/o,p=s/o,v=p/Math.pow(h,3/2);if(r){var y=Math.sqrt(o*(o-1)),S=o-2;return y/S*v}else return v};Dt.kurtosis=function(e,r){typeof r=="undefined"&&(r=!0);for(var n=Dt.mean(e),a=e.length,s=0,o=0,u=0;u<a;u++){var l=e[u]-n;s+=l*l,o+=l*l*l*l}var h=s/a,p=o/a;if(r){var v=s/(a-1),y=a*(a+1)/((a-1)*(a-2)*(a-3)),S=o/(v*v),A=(a-1)*(a-1)/((a-2)*(a-3));return y*S-3*A}else return p/(h*h)-3};Dt.entropy=function(e,r){typeof r=="undefined"&&(r=0);for(var n=0,a=e.length,s=0;s<a;s++)n+=e[s]*Math.log(e[s]+r);return-n};Dt.weightedMean=function(e,r){for(var n=0,a=e.length,s=0;s<a;s++)n+=e[s]*r[s];return n};Dt.weightedStandardDeviation=function(e,r){return Math.sqrt(Dt.weightedVariance(e,r))};Dt.weightedVariance=function(e,r){for(var n=Dt.weightedMean(e,r),a=0,s=e.length,o=0,u=0,l=0;l<s;l++){var h=e[l]-n,p=r[l];a+=p*(h*h),u+=p,o+=p*p}return a*(u/(u*u-o))};Dt.center=function(e,r){typeof r=="undefined"&&(r=!1);var n=e;r||(n=[].concat(e));for(var a=Dt.mean(n),s=n.length,o=0;o<s;o++)n[o]-=a};Dt.standardize=function(e,r,n){typeof r=="undefined"&&(r=Dt.standardDeviation(e)),typeof n=="undefined"&&(n=!1);for(var a=e.length,s=n?e:new Array(a),o=0;o<a;o++)s[o]=e[o]/r;return s};Dt.cumulativeSum=function(e){var r=e.length,n=new Array(r);n[0]=e[0];for(var a=1;a<r;a++)n[a]=n[a-1]+e[a];return n}});var Tz=ne(Ct=>{"use strict";var n_e=z6();function i_e(t,e){return t-e}Ct.max=function(e){for(var r=-1/0,n=0;n<e.length;n++)for(var a=0;a<e[n].length;a++)e[n][a]>r&&(r=e[n][a]);return r};Ct.min=function(e){for(var r=1/0,n=0;n<e.length;n++)for(var a=0;a<e[n].length;a++)e[n][a]<r&&(r=e[n][a]);return r};Ct.minMax=function(e){for(var r=1/0,n=-1/0,a=0;a<e.length;a++)for(var s=0;s<e[a].length;s++)e[a][s]<r&&(r=e[a][s]),e[a][s]>n&&(n=e[a][s]);return{min:r,max:n}};Ct.entropy=function(e,r){typeof r=="undefined"&&(r=0);for(var n=0,a=e.length,s=e[0].length,o=0;o<a;o++)for(var u=0;u<s;u++)n+=e[o][u]*Math.log(e[o][u]+r);return-n};Ct.mean=function(e,r){typeof r=="undefined"&&(r=0);var n=e.length,a=e[0].length,s,o,u,l;if(r===-1){for(s=[0],o=n*a,u=0;u<n;u++)for(l=0;l<a;l++)s[0]+=e[u][l];s[0]/=o}else if(r===0)for(s=new Array(a),o=n,l=0;l<a;l++){for(s[l]=0,u=0;u<n;u++)s[l]+=e[u][l];s[l]/=o}else if(r===1)for(s=new Array(n),o=a,l=0;l<n;l++){for(s[l]=0,u=0;u<a;u++)s[l]+=e[l][u];s[l]/=o}else throw new Error("Invalid dimension");return s};Ct.sum=function(e,r){typeof r=="undefined"&&(r=0);var n=e.length,a=e[0].length,s,o,u;if(r===-1)for(s=[0],o=0;o<n;o++)for(u=0;u<a;u++)s[0]+=e[o][u];else if(r===0)for(s=new Array(a),u=0;u<a;u++)for(s[u]=0,o=0;o<n;o++)s[u]+=e[o][u];else if(r===1)for(s=new Array(n),u=0;u<n;u++)for(s[u]=0,o=0;o<a;o++)s[u]+=e[u][o];else throw new Error("Invalid dimension");return s};Ct.product=function(e,r){typeof r=="undefined"&&(r=0);var n=e.length,a=e[0].length,s,o,u;if(r===-1)for(s=[1],o=0;o<n;o++)for(u=0;u<a;u++)s[0]*=e[o][u];else if(r===0)for(s=new Array(a),u=0;u<a;u++)for(s[u]=1,o=0;o<n;o++)s[u]*=e[o][u];else if(r===1)for(s=new Array(n),u=0;u<n;u++)for(s[u]=1,o=0;o<a;o++)s[u]*=e[u][o];else throw new Error("Invalid dimension");return s};Ct.standardDeviation=function(e,r,n){for(var a=Ct.variance(e,r,n),s=a.length,o=0;o<s;o++)a[o]=Math.sqrt(a[o]);return a};Ct.variance=function(e,r,n){typeof n=="undefined"&&(n=!0),r=r||Ct.mean(e);var a=e.length;if(a===0)return[];for(var s=e[0].length,o=new Array(s),u=0;u<s;u++){for(var l=0,h=0,p=0,v=0;v<a;v++)p=e[v][u]-r[u],l+=p,h+=p*p;n?o[u]=(h-l*l/a)/(a-1):o[u]=(h-l*l/a)/a}return o};Ct.median=function(e){for(var r=e.length,n=e[0].length,a=new Array(n),s=0;s<n;s++){for(var o=new Array(r),u=0;u<r;u++)o[u]=e[u][s];o.sort(i_e);var l=o.length;l%2===0?a[s]=(o[l/2]+o[l/2-1])*.5:a[s]=o[Math.floor(l/2)]}return a};Ct.mode=function(e){var r=e.length,n=e[0].length,a=new Array(n),s,o;for(s=0;s<n;s++){for(var u=new Array(r),l=0;l<r;l++)u[l]=0;var h=new Array(r),p=0;for(o=0;o<r;o++){var v=h.indexOf(e[o][s]);v>=0?u[v]++:(h[p]=e[o][s],u[p]=1,p++)}var y=0,S=0;for(o=0;o<p;o++)u[o]>y&&(y=u[o],S=o);a[s]=h[S]}return a};Ct.skewness=function(e,r){typeof r=="undefined"&&(r=!0);for(var n=Ct.mean(e),a=e.length,s=n.length,o=new Array(s),u=0;u<s;u++){for(var l=0,h=0,p=0;p<a;p++){var v=e[p][u]-n[u];l+=v*v,h+=v*v*v}var y=l/a,S=h/a,A=S/Math.pow(y,3/2);if(r){var T=Math.sqrt(a*(a-1)),I=a-2;o[u]=T/I*A}else o[u]=A}return o};Ct.kurtosis=function(e,r){typeof r=="undefined"&&(r=!0);for(var n=Ct.mean(e),a=e.length,s=e[0].length,o=new Array(s),u=0;u<s;u++){for(var l=0,h=0,p=0;p<a;p++){var v=e[p][u]-n[u];l+=v*v,h+=v*v*v*v}var y=l/a,S=h/a;if(r){var A=l/(a-1),T=a*(a+1)/((a-1)*(a-2)*(a-3)),I=h/(A*A),N=(a-1)*(a-1)/((a-2)*(a-3));o[u]=T*I-3*N}else o[u]=S/(y*y)-3}return o};Ct.standardError=function(e){for(var r=e.length,n=Ct.standardDeviation(e),a=n.length,s=new Array(a),o=Math.sqrt(r),u=0;u<a;u++)s[u]=n[u]/o;return s};Ct.covariance=function(e,r){return Ct.scatter(e,void 0,r)};Ct.scatter=function(e,r,n){typeof n=="undefined"&&(n=0),typeof r=="undefined"&&(n===0?r=e.length-1:n===1&&(r=e[0].length-1));var a=Ct.mean(e,n),s=e.length;if(s===0)return[[]];var o=e[0].length,u,l,h,p,v;if(n===0){for(u=new Array(o),l=0;l<o;l++)u[l]=new Array(o);for(l=0;l<o;l++)for(h=l;h<o;h++){for(p=0,v=0;v<s;v++)p+=(e[v][h]-a[h])*(e[v][l]-a[l]);p/=r,u[l][h]=p,u[h][l]=p}}else if(n===1){for(u=new Array(s),l=0;l<s;l++)u[l]=new Array(s);for(l=0;l<s;l++)for(h=l;h<s;h++){for(p=0,v=0;v<o;v++)p+=(e[h][v]-a[h])*(e[l][v]-a[l]);p/=r,u[l][h]=p,u[h][l]=p}}else throw new Error("Invalid dimension");return u};Ct.correlation=function(e){var r=Ct.mean(e),n=Ct.standardDeviation(e,!0,r),a=Ct.zScores(e,r,n),s=e.length,o=e[0].length,u,l,h=new Array(o);for(u=0;u<o;u++)h[u]=new Array(o);for(u=0;u<o;u++)for(l=u;l<o;l++){for(var p=0,v=0,y=a.length;v<y;v++)p+=a[v][l]*a[v][u];p/=s-1,h[u][l]=p,h[l][u]=p}return h};Ct.zScores=function(e,r,n){return r=r||Ct.mean(e),typeof n=="undefined"&&(n=Ct.standardDeviation(e,!0,r)),Ct.standardize(Ct.center(e,r,!1),n,!0)};Ct.center=function(e,r,n){r=r||Ct.mean(e);var a=e,s=e.length,o,u,l;if(!n)for(a=new Array(s),o=0;o<s;o++)a[o]=new Array(e[o].length);for(o=0;o<s;o++){var h=a[o];for(u=0,l=h.length;u<l;u++)h[u]=e[o][u]-r[u]}return a};Ct.standardize=function(e,r,n){typeof r=="undefined"&&(r=Ct.standardDeviation(e));var a=e,s=e.length,o,u,l;if(!n)for(a=new Array(s),o=0;o<s;o++)a[o]=new Array(e[o].length);for(o=0;o<s;o++){var h=a[o],p=e[o];for(u=0,l=h.length;u<l;u++)r[u]!==0&&!isNaN(r[u])&&(h[u]=p[u]/r[u])}return a};Ct.weightedVariance=function(e,r){var n=Ct.mean(e),a=e.length;if(a===0)return[];for(var s=e[0].length,o=new Array(s),u=0;u<s;u++){for(var l=0,h=0,p=0,v=0;v<a;v++){var y=e[v][u]-n[u],S=r[v];l+=S*(y*y),p+=S,h+=S*S}o[u]=l*(p/(p*p-h))}return o};Ct.weightedMean=function(e,r,n){typeof n=="undefined"&&(n=0);var a=e.length;if(a===0)return[];var s=e[0].length,o,u,l,h,p,v;if(n===0){for(o=new Array(s),u=0;u<s;u++)o[u]=0;for(u=0;u<a;u++)for(v=e[u],p=r[u],h=0;h<s;h++)o[h]+=v[h]*p}else if(n===1){for(o=new Array(a),u=0;u<a;u++)o[u]=0;for(h=0;h<a;h++)for(v=e[h],p=r[h],u=0;u<s;u++)o[h]+=v[u]*p}else throw new Error("Invalid dimension");var y=n_e.sum(r);if(y!==0)for(u=0,l=o.length;u<l;u++)o[u]/=y;return o};Ct.weightedCovariance=function(e,r,n,a){a=a||0,n=n||Ct.weightedMean(e,r,a);for(var s=0,o=0,u=0,l=r.length;u<l;u++)s+=r[u],o+=r[u]*r[u];var h=s/(s*s-o);return Ct.weightedScatter(e,r,n,h,a)};Ct.weightedScatter=function(e,r,n,a,s){s=s||0,n=n||Ct.weightedMean(e,r,s),typeof a=="undefined"&&(a=1);var o=e.length;if(o===0)return[[]];var u=e[0].length,l,h,p,v,y;if(s===0){for(l=new Array(u),h=0;h<u;h++)l[h]=new Array(u);for(h=0;h<u;h++)for(p=h;p<u;p++){for(y=0,v=0;v<o;v++)y+=r[v]*(e[v][p]-n[p])*(e[v][h]-n[h]);l[h][p]=y*a,l[p][h]=y*a}}else if(s===1){for(l=new Array(o),h=0;h<o;h++)l[h]=new Array(o);for(h=0;h<o;h++)for(p=h;p<o;p++){for(y=0,v=0;v<u;v++)y+=r[v]*(e[p][v]-n[p])*(e[h][v]-n[h]);l[h][p]=y*a,l[p][h]=y*a}}else throw new Error("Invalid dimension");return l}});var Dg=ne(j6=>{"use strict";j6.array=z6();j6.matrix=Tz()});var oh=ne((Dtt,Rz)=>{var Nz=1/0,Dz=9007199254740991,a_e=17976931348623157e292,Iz=0/0,s_e="[object Function]",o_e="[object GeneratorFunction]",u_e="[object Symbol]",f_e=/^\s+|\s+$/g,l_e=/^[-+]0x[0-9a-f]+$/i,c_e=/^0b[01]+$/i,h_e=/^0o[0-7]+$/i,d_e=/^(?:0|[1-9]\d*)$/,p_e=parseInt,m_e=Object.prototype,Oz=m_e.toString,v_e=Math.ceil,g_e=Math.max;function y_e(t,e,r,n){for(var a=-1,s=g_e(v_e((e-t)/(r||1)),0),o=Array(s);s--;)o[n?s:++a]=t,t+=r;return o}function b_e(t){return function(e,r,n){return n&&typeof n!="number"&&__e(e,r,n)&&(r=n=void 0),e=U6(e),r===void 0?(r=e,e=0):r=U6(r),n=n===void 0?e<r?1:-1:U6(n),y_e(e,r,n,t)}}function w_e(t,e){return e=e==null?Dz:e,!!e&&(typeof t=="number"||d_e.test(t))&&t>-1&&t%1==0&&t<e}function __e(t,e,r){if(!i2(r))return!1;var n=typeof e;return(n=="number"?S_e(r)&&w_e(e,r.length):n=="string"&&e in r)?x_e(r[e],t):!1}function x_e(t,e){return t===e||t!==t&&e!==e}function S_e(t){return t!=null&&M_e(t.length)&&!E_e(t)}function E_e(t){var e=i2(t)?Oz.call(t):"";return e==s_e||e==o_e}function M_e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Dz}function i2(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function A_e(t){return!!t&&typeof t=="object"}function k_e(t){return typeof t=="symbol"||A_e(t)&&Oz.call(t)==u_e}function U6(t){if(!t)return t===0?t:0;if(t=T_e(t),t===Nz||t===-Nz){var e=t<0?-1:1;return e*a_e}return t===t?t:0}function T_e(t){if(typeof t=="number")return t;if(k_e(t))return Iz;if(i2(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=i2(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(f_e,"");var r=c_e.test(t);return r||h_e.test(t)?p_e(t.slice(2),r?2:8):l_e.test(t)?Iz:+t}var N_e=b_e();Rz.exports=N_e});var W6=ne((Ott,Pz)=>{var Cz=1/0,Bz=9007199254740991,I_e=17976931348623157e292,Fz=0/0,D_e="[object Function]",O_e="[object GeneratorFunction]",R_e="[object Symbol]",C_e=/^\s+|\s+$/g,F_e=/^[-+]0x[0-9a-f]+$/i,B_e=/^0b[01]+$/i,L_e=/^0o[0-7]+$/i,P_e=/^(?:0|[1-9]\d*)$/,q_e=parseInt,$_e=Object.prototype,Lz=$_e.toString,z_e=Math.ceil,j_e=Math.max;function U_e(t,e,r,n){for(var a=-1,s=j_e(z_e((e-t)/(r||1)),0),o=Array(s);s--;)o[n?s:++a]=t,t+=r;return o}function V_e(t){return function(e,r,n){return n&&typeof n!="number"&&G_e(e,r,n)&&(r=n=void 0),e=V6(e),r===void 0?(r=e,e=0):r=V6(r),n=n===void 0?e<r?1:-1:V6(n),U_e(e,r,n,t)}}function W_e(t,e){return e=e==null?Bz:e,!!e&&(typeof t=="number"||P_e.test(t))&&t>-1&&t%1==0&&t<e}function G_e(t,e,r){if(!a2(r))return!1;var n=typeof e;return(n=="number"?K_e(r)&&W_e(e,r.length):n=="string"&&e in r)?H_e(r[e],t):!1}function H_e(t,e){return t===e||t!==t&&e!==e}function K_e(t){return t!=null&&J_e(t.length)&&!Z_e(t)}function Z_e(t){var e=a2(t)?Lz.call(t):"";return e==D_e||e==O_e}function J_e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Bz}function a2(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Y_e(t){return!!t&&typeof t=="object"}function X_e(t){return typeof t=="symbol"||Y_e(t)&&Lz.call(t)==R_e}function V6(t){if(!t)return t===0?t:0;if(t=Q_e(t),t===Cz||t===-Cz){var e=t<0?-1:1;return e*I_e}return t===t?t:0}function Q_e(t){if(typeof t=="number")return t;if(X_e(t))return Fz;if(a2(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=a2(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(C_e,"");var r=B_e.test(t);return r||L_e.test(t)?q_e(t.slice(2),r?2:8):F_e.test(t)?Fz:+t}var e2e=V_e(!0);Pz.exports=e2e});var yj=ne(gj=>{"use strict";Object.defineProperty(gj,"__esModule",{value:!0})});var _j=ne(wj=>{"use strict";var bj=yj(),Q6=class{constructor(e){this._run_callback=e.run_callback,this._params=[],this._shades=[],this._combinations=[],this._results=[],this._prepare(e.params)}save(e){let r={results:this._results,params:this._params,combinations:this._combinations};bj.writeFileSync(e,JSON.stringify(r),{encoding:"utf8"})}load(e){let r=bj.readFileSync(e,"utf8"),n=JSON.parse(r);this._results=n.results,this._params=n.params,this._combinations=n.combinations}clone(e){return Object.assign({},e)}_prepare(e){let r=[];for(let n in e)e.hasOwnProperty(n)&&r.push({name:n,values:e[n]});this._combinations=[{}];for(let n=0;n<r.length;n++){let a=[];for(let s of this._combinations)for(let o=0;o<r[n].values.length;o++){let u=this.clone(s);u[r[n].name]=r[n].values[o],a.push(u)}this._combinations=a}this._params=r}run(){for(let e of this._combinations)this._results.push({params:e,results:this._run_callback(e)})}_createDefaultTable(e,r,n){let a=[];for(let s=0;s<e;s++){let o=[];for(let u=0;u<r;u++)o.push(n);a.push(o)}return a}_findMatchForParam(e,r){for(let n=0;n<e.length;n++){let a=!0;for(let s in e[n])e[n].hasOwnProperty(s)&&(a=a&&r[s]==e[n][s]);if(a)return n}return-1}getTableOfResults(e,r,n){let a=[{}],s=[{}],o=this._params.filter(h=>r.indexOf(h.name)>=0),u=this._params.filter(h=>e.indexOf(h.name)>=0);for(let h=0;h<o.length;h++){let p=[];for(let v of a)for(let y=0;y<o[h].values.length;y++){let S=this.clone(v);S[o[h].name]=o[h].values[y],p.push(S)}a=p}for(let h=0;h<u.length;h++){let p=[];for(let v of s)for(let y=0;y<u[h].values.length;y++){let S=this.clone(v);S[u[h].name]=u[h].values[y],p.push(S)}s=p}let l=this._createDefaultTable(a.length,s.length,-1);for(let h of this._results){let p=this._findMatchForParam(a,h.params),v=this._findMatchForParam(s,h.params);if(p<0||v<0)continue;let y=n(h);l[p][v]<y&&(l[p][v]=y)}return{rows:a,cols:s,results:l}}_createTitle(e){let r="";for(let n in e)e.hasOwnProperty(n)&&(r+=`${n}=${e[n]},`);return r.substr(0,r.length-1)}_padToWidth(e,r,n){for(n=n||" ";e.length<r;)e+=n;return e}_prepareColorShades(e,r){let n=(r-e)/5;this._shades=[];for(let a=0;a<5;a++)this._shades.push(r-a*n)}_outputValue(e,r){return this._padToWidth(""+e,r)}displayTableOfResults(e,r,n){let a=this.getTableOfResults(e,r,n),s=a.cols.map(S=>this._createTitle(S)),o=a.rows.map(S=>this._createTitle(S)),u=s.map(S=>Math.max(S.length+4,8)),l=0;o.forEach(S=>{l=Math.max(l,S.length+4)});let h=null,p=null;a.results.forEach(S=>{S.forEach(A=>{(h===null||h>A)&&(h=A),(p===null||p<A)&&(p=A)})}),this._prepareColorShades(h,p);let v="",y="";v+="| "+this._padToWidth("",l),y+="|-"+this._padToWidth("",l,"-");for(let S=0;S<s.length;S++)v+="| "+this._padToWidth(s[S],u[S]),y+="|-"+this._padToWidth("",u[S],"-");console.log(v),console.log(y);for(let S=0;S<o.length;S++){v="| ",v+=this._padToWidth(o[S],l);for(let A=0;A<s.length;A++)v+="| "+this._outputValue(a.results[S][A],u[A]);console.log(v)}}};wj.GridSearch=Q6});var xj=ne(e4=>{"use strict";Object.defineProperty(e4,"__esModule",{value:!0});var S2e=function(){function t(e,r){e===void 0&&(e=null),r===void 0&&(r=null),this.item=e,this.parent=r,this.support=1,this.nextSameItemNode=null,this._children=[]}return Object.defineProperty(t.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),t.prototype.upsertChild=function(e,r,n){n===void 0&&(n=1);var a=this.getChild(e);return a?a.support+=n:(a=new t(e,this),a.support=n,this._children.push(a),r&&r(a)),a},t.prototype.getChild=function(e){return this._children.find(function(r){return r.item==e})},t}();e4.FPNode=S2e});var Sj=ne(t4=>{"use strict";Object.defineProperty(t4,"__esModule",{value:!0});var E2e=xj(),M2e=function(){function t(e,r){this.supports=e,this._support=r,this._isInit=!1,this.root=new E2e.FPNode,this._firstInserted={},this._lastInserted={}}return Object.defineProperty(t.prototype,"headers",{get:function(){return this._headers},enumerable:!0,configurable:!0}),t.prototype.fromTransactions=function(e){var r=this;if(this._isInit)throw new Error("Error building the FPTree");return e.forEach(function(n){var a=n.filter(function(s){return r.supports[JSON.stringify(s)]>=r._support}).sort(function(s,o){var u=r.supports[JSON.stringify(o)]-r.supports[JSON.stringify(s)];return u==0?JSON.stringify(o).localeCompare(JSON.stringify(s)):u});r._addItems(a)}),this._headers=this._getHeaderList(),this._isInit=!0,this},t.prototype.fromPrefixPaths=function(e){var r=this;if(this._isInit)throw new Error("Error building the FPTree");return e.forEach(function(n){var a=n.path.filter(function(s){return r.supports[JSON.stringify(s)]>=r._support}).sort(function(s,o){var u=r.supports[JSON.stringify(o)]-r.supports[JSON.stringify(s)];return u==0?JSON.stringify(o).localeCompare(JSON.stringify(s)):u});r._addItems(a,n.support)}),this._headers=this._getHeaderList(),this._isInit=!0,this},t.prototype.getConditionalFPTree=function(e){var r=this._firstInserted[JSON.stringify(e)];if(!r)return null;var n=this.supports[JSON.stringify(e)],a={},s=this._getPrefixPaths(r,n,function(u,l){a[JSON.stringify(u)]=(a[JSON.stringify(u)]||0)+l}),o=new t(a,this._support).fromPrefixPaths(s);return o.root.children.length?o:null},t.prototype.getPrefixPaths=function(e){if(!this._isInit)throw new Error("Error building the FPTree");var r=this._firstInserted[JSON.stringify(e)];return r?this._getPrefixPaths(r,r.support):[]},t.prototype.getPrefixPath=function(e,r){if(!this._isInit)throw new Error("Error building the FPTree");var n=this._getPrefixPath(e,e.support,r);if(n.length!==0)return{support:e.support,path:n}},t.prototype.isSinglePath=function(){if(!this._isInit)throw new Error("Error building the FPTree");return!!this.getSinglePath()},t.prototype.getSinglePath=function(){if(!this._isInit)throw new Error("Error building the FPTree");return this._getSinglePath(this.root)},t.prototype._addItems=function(e,r){var n=this;r===void 0&&(r=1);var a=this.root;e.forEach(function(s){a=a.upsertChild(s,function(o){var u=JSON.stringify(s);n._updateLastInserted(u,o),n._updateFirstInserted(u,o)},r)})},t.prototype._getPrefixPaths=function(e,r,n,a){a===void 0&&(a=[]);var s=this.getPrefixPath(e,n);return s&&a.push(s),e.nextSameItemNode?this._getPrefixPaths(e.nextSameItemNode,r,n,a):a},t.prototype._getPrefixPath=function(e,r,n){return e.parent&&e.parent.parent?(n&&n(e.parent.item,r),[e.parent.item].concat(this._getPrefixPath(e.parent,r,n))):[]},t.prototype._getSinglePath=function(e,r){return r===void 0&&(r=[]),e.children.length==0?r:e.children.length>1?null:(r.push(e.children[0]),this._getSinglePath(e.children[0],r))},t.prototype._updateLastInserted=function(e,r){var n=this._lastInserted[e];n&&(n.nextSameItemNode=r),this._lastInserted[e]=r},t.prototype._updateFirstInserted=function(e,r){var n=this._firstInserted[e];n||(this._firstInserted[e]=r)},t.prototype._getHeaderList=function(){var e=this;return Object.keys(this._firstInserted).sort(function(r,n){return e.supports[r]-e.supports[n]}).map(function(r){return JSON.parse(r)})},t}();t4.FPTree=M2e});var Ej=ne(Rg=>{"use strict";var A2e=Rg&&Rg.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Rg,"__esModule",{value:!0});var k2e=vs(),T2e=Sj(),N2e=function(t){A2e(e,t);function e(r){var n=t.call(this)||this;return n._support=r,n._itemsets=[],n}return e.prototype.exec=function(r,n){var a=this;this._transactions=r,this._support=Math.ceil(this._support*r.length);var s=this._getDistinctItemsCount(this._transactions);return new Promise(function(o,u){var l=new T2e.FPTree(s,a._support).fromTransactions(a._transactions),h=a._fpGrowth(l,a._transactions.length);n&&n(h),o(h)})},e.prototype._fpGrowth=function(r,n,a){var s=this;return a===void 0&&(a=[]),r.headers.reduce(function(o,u){var l=Math.min(r.supports[JSON.stringify(u)],n),h=a.slice(0);h.push(u),o.push(s._getFrequentItemset(h,l));var p=r.getConditionalFPTree(u);return p?o.concat(s._fpGrowth(p,l,h)):o},[])},e.prototype._handleSinglePath=function(r,n){return[]},e.prototype._getFrequentItemset=function(r,n){var a={items:r,support:n};return this.emit("data",a),a},e.prototype._getDistinctItemsCount=function(r){return r.reduce(function(n,a){return a.reduce(function(s,o){return s[JSON.stringify(o)]=(s[JSON.stringify(o)]||0)+1,s},n)},{})},e}(k2e.EventEmitter);Rg.FPGrowth=N2e});var sU=ne(()=>{});var Mt=ne(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});var g4=function(t,e){return g4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},g4(t,e)};function gf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");g4(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function xt(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(p){try{h(n.next(p))}catch(v){o(v)}}function l(p){try{h(n.throw(p))}catch(v){o(v)}}function h(p){p.done?s(p.value):a(p.value).then(u,l)}h((n=n.apply(t,e||[])).next())})}function St(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(h){return function(p){return l([h,p])}}function l(h){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=h[0]&2?a.return:h[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,h[1])).done)return s;switch(a=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,a=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){r.label=h[1];break}if(h[0]===6&&r.label<s[1]){r.label=s[1],s=h;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(h);break}s[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(p){h=[6,p],a=0}finally{n=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function $a(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wt(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,s=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)s.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function Ir(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(wt(arguments[e]));return t}var Exe=1e-7,Mxe=1e-4,Axe=function(){function t(e,r){this.backend=e,this.dataMover=r,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},t.prototype.set=function(e,r){this.dataIdsCount++,this.data.set(e,r)},t.prototype.has=function(e){return this.data.has(e)},t.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},t.prototype.numDataIds=function(){return this.dataIdsCount},t}(),AU=function(){function t(){}return t.prototype.refCount=function(e){return ns("refCount")},t.prototype.incRef=function(e){return ns("incRef")},t.prototype.timerAvailable=function(){return!0},t.prototype.time=function(e){return ns("time")},t.prototype.read=function(e){return ns("read")},t.prototype.readSync=function(e){return ns("readSync")},t.prototype.readToGPU=function(e,r){return ns("readToGPU")},t.prototype.numDataIds=function(){return ns("numDataIds")},t.prototype.disposeData=function(e,r){return ns("disposeData")},t.prototype.write=function(e,r,n){return ns("write")},t.prototype.move=function(e,r,n,a,s){return ns("move")},t.prototype.memory=function(){return ns("memory")},t.prototype.floatPrecision=function(){return ns("floatPrecision")},t.prototype.epsilon=function(){return this.floatPrecision()===32?Exe:Mxe},t.prototype.dispose=function(){return ns("dispose")},t}();function ns(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen")}function kU(t){for(var e=t.length,r=0;e>0;)r=Math.random()*e|0,e--,S2(t,e,r)}function kxe(t,e){if(t.length!==e.length)throw new Error("Array sizes must match to be shuffled together "+("First array length was "+t.length)+("Second array length was "+e.length));for(var r=t.length,n=0;r>0;)n=Math.random()*r|0,r--,S2(t,r,n),S2(e,r,n)}function jg(t,e,r){return Math.max(t,Math.min(e,r))}function Txe(t){return t%2===0?t:t+1}function S2(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Nxe(t){for(var e=0,r=0;r<t.length;r++)e+=t[r];return e}function Ixe(t,e){var r=Math.random();return e*r+(1-r)*t}function Dxe(t,e){for(var r=0,n=0;n<t.length;n++){var a=Number(t[n])-Number(e[n]);r+=a*a}return r}function se(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function la(t,e,r){r===void 0&&(r=""),se(Cl(t,e),function(){return r+(" Shapes "+t+" and "+e+" must match")})}function Th(t){se(t!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function Sh(t,e,r){if(e===void 0&&(e=[]),r===void 0&&(r=!1),e==null&&(e=[]),Array.isArray(t)||Ji(t)&&!r)for(var n=0;n<t.length;++n)Sh(t[n],e,r);else e.push(t);return e}function bn(t){if(t.length===0)return 1;for(var e=t[0],r=1;r<t.length;r++)e*=t[r];return e}function Oxe(t){return t.length===0}function Cl(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function $p(t){return t%1===0}function Rxe(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function Cxe(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Fxe(t){for(var e=new Uint32Array(t),r=0;r<t;++r)e[r]=r;return kU(e),e}function qg(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function Bxe(t,e,r){return e===void 0&&(e=function(n){return 0}),new Promise(function(n,a){var s=0,o=function(){if(t()){n();return}s++;var u=e(s);if(r!=null&&s>=r){a();return}setTimeout(o,u)};o()})}function Lxe(t,e){for(var r=1,n=-1,a=0;a<t.length;++a)if(t[a]>=0)r*=t[a];else if(t[a]===-1){if(n!==-1)throw Error("Shapes can only have 1 implicit size. "+("Found -1 at dim "+n+" and dim "+a));n=a}else if(t[a]<0)throw Error("Shapes can not be < 0. Found "+t[a]+" at dim "+a);if(n===-1){if(e>0&&e!==r)throw Error("Size("+e+") must match the product of shape "+t);return t}if(r===0)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(e%r!==0)throw Error("The implicit shape can't be a fractional number. "+("Got "+e+" / "+r));var s=t.slice();return s[n]=e/r,s}function ey(t,e){var r=e.length;return t=t==null?e.map(function(n,a){return a}):[].concat(t),se(t.every(function(n){return n>=-r&&n<r}),function(){return"All values in axis param must be in range [-"+r+", "+r+") but "+("got axis "+t)}),se(t.every(function(n){return $p(n)}),function(){return"All values in axis param must be integers but "+("got axis "+t)}),t.map(function(n){return n<0?r+n:n})}function TU(t,e){for(var r=[],n=[],a=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||a?null:ey(e,t).sort(),o=0,u=0;u<t.length;++u){if(s!=null){if(s[o]===u&&t[u]!==1)throw new Error("Can't squeeze axis "+u+" since its dim '"+t[u]+"' is not 1");(s[o]==null||s[o]>u)&&t[u]===1&&(r.push(t[u]),n.push(u)),s[o]<=u&&o++}t[u]!==1&&(r.push(t[u]),n.push(u))}return{newShape:r,keptDims:n}}function NU(t,e){var r=null;if(t==null||t==="float32")r=new Float32Array(e);else if(t==="int32")r=new Int32Array(e);else if(t==="bool")r=new Uint8Array(e);else throw new Error("Unknown data type "+t);return r}function IU(t,e){var r=null;if(t==null||t==="float32")r=new Float32Array(e);else if(t==="int32")r=new Int32Array(e);else if(t==="bool")r=new Uint8Array(e);else if(t==="string")r=new Array(e);else throw new Error("Unknown data type "+t);return r}function DU(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(isNaN(n)||!isFinite(n))throw Error("A tensor of type "+e+" being uploaded contains "+n+".")}}function OU(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function Pxe(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function Ji(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}function y4(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function RU(t){if(t==null)return 0;var e=0;return t.forEach(function(r){return e+=r.length}),e}function Tl(t){return typeof t=="string"||t instanceof String}function CU(t){return typeof t=="boolean"}function FU(t){return typeof t=="number"}function L2(t){return Array.isArray(t)?L2(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":FU(t)?"float32":Tl(t)?"string":CU(t)?"bool":"float32"}function Dl(t){return!!(t&&t.constructor&&t.call&&t.apply)}function E2(t,e){for(var r=e;r<t;++r)if(t%r===0)return r;return t}function Wp(t){var e=t.length;if(e<2)return[];var r=new Array(e-1);r[e-2]=t[e-1];for(var n=e-3;n>=0;--n)r[n]=r[n+1]*t[n+1];return r}function BU(t,e,r,n){n===void 0&&(n=!1);var a=new Array;if(e.length===1)for(var s=e[0]*(n?2:1),o=0;o<s;o++)a[o]=r[t+o];else for(var s=e[0],u=e.slice(1),l=u.reduce(function(p,v){return p*v})*(n?2:1),o=0;o<s;o++)a[o]=BU(t+o*l,u,r,n);return a}function Cp(t,e,r){if(r===void 0&&(r=!1),t.length===0)return e[0];var n=t.reduce(function(a,s){return a*s})*(r?2:1);if(n===0)return[];if(n!==e.length)throw new Error("["+t+"] does not match the input size "+e.length+(r?" for a complex tensor":"")+".");return BU(0,t,e,r)}function U4(t,e){for(var r=P2(t,e),n=0;n<r.length;n++)r[n]=1;return r}function P2(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+e)}function qxe(t,e){var r=t.reduce(function(n,a){return n*a},1);if(e==null||e==="float32")return Cp(t,new Float32Array(r));if(e==="int32")return Cp(t,new Int32Array(r));if(e==="bool")return Cp(t,new Uint8Array(r));throw new Error("Unknown data type "+e)}function V4(t){t.forEach(function(e){se(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got "+("shape ["+t+"].")})})}function $xe(t,e,r){if(e===0)return 0;if(e===1)return t[0];for(var n=t[t.length-1],a=0;a<t.length-1;++a)n+=r[a]*t[a];return n}function zxe(t,e,r){if(e===0)return[];if(e===1)return[t];for(var n=new Array(e),a=0;a<n.length-1;++a)n[a]=Math.floor(t/r[a]),t-=n[a]*r[a];return n[n.length-1]=t,n}function W4(t){return t&&t.then&&typeof t.then=="function"}var oU="tfjsflags",LU=function(){function t(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=jxe,this.populateURLFlags()}return t.prototype.setPlatform=function(e,r){this.platform!=null&&(Gt().getBool("IS_TEST")||Gt().getBool("PROD")||console.warn("Platform "+this.platformName+" has already been set. "+("Overwriting the platform with "+e+"."))),this.platformName=e,this.platform=r},t.prototype.registerFlag=function(e,r,n){if(this.flagRegistry[e]={evaluationFn:r,setHook:n},this.urlFlags[e]!=null){var a=this.urlFlags[e];Gt().getBool("IS_TEST")||Gt().getBool("PROD")||console.warn("Setting feature override from URL "+e+": "+a+"."),this.set(e,a)}},t.prototype.getAsync=function(e){return xt(this,void 0,void 0,function(){var r,n;return St(this,function(a){switch(a.label){case 0:return e in this.flags?[2,this.flags[e]]:(r=this.flags,n=e,[4,this.evaluateFlag(e)]);case 1:return r[n]=a.sent(),[2,this.flags[e]]}})})},t.prototype.get=function(e){if(e in this.flags)return this.flags[e];var r=this.evaluateFlag(e);if(W4(r))throw new Error("Flag "+e+" cannot be synchronously evaluated. Please use getAsync() instead.");return this.flags[e]=r,this.flags[e]},t.prototype.getNumber=function(e){return this.get(e)},t.prototype.getBool=function(e){return this.get(e)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(e,r){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=r,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(r)},t.prototype.evaluateFlag=function(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},t.prototype.setFlags=function(e){this.flags=Object.assign({},e)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var e=this;if(!(typeof this.global=="undefined"||typeof this.global.location=="undefined"||typeof this.global.location.search=="undefined")){var r=this.getQueryParams(this.global.location.search);if(oU in r){var n=r[oU].split(",");n.forEach(function(a){var s=wt(a.split(":"),2),o=s[0],u=s[1];e.urlFlags[o]=Vxe(o,u)})}}},t}();function jxe(t){var e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(r){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return Uxe(e,n[0],n[1]),n.join("=")}),e}function Uxe(t,e,r){t[decodeURIComponent(e)]=decodeURIComponent(r||"")}function Vxe(t,e){if(e=e.toLowerCase(),e==="true"||e==="false")return e==="true";if(""+ +e===e)return+e;throw new Error("Could not parse value flag value "+e+" for flag "+t+".")}function Gt(){return W.ENV}W.ENV=null;function Wxe(t){W.ENV=t}var c4;function PU(){if(c4==null){var t=void 0;if(typeof window!="undefined")t=window;else if(typeof global!="undefined")t=global;else if(typeof process!="undefined")t=process;else if(typeof self!="undefined")t=self;else throw new Error("Could not find a global object");c4=t}return c4}function Gxe(){var t=PU();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function G4(t,e){var r=Gxe();if(r.has(t))return r.get(t);var n=e();return r.set(t,n),r.get(t)}var qU="Abs",$U="Acos",zU="Acosh",H4="Add",jU="AddN",UU="All",VU="Any",WU="ArgMax",GU="ArgMin",HU="Asin",KU="Asinh",ZU="Atan",JU="Atanh",YU="Atan2",XU="AvgPool",Hxe="AvgPoolGrad",QU="AvgPool3D",Kxe="AvgPool3DGrad",eV="BatchMatMul",tV="BatchToSpaceND",rV="Bincount",Zxe="BroadcastTo",nV="BroadcastArgs",K4="Cast",iV="Ceil",aV="ClipByValue",sV="Complex",oV="ComplexAbs",uV="Concat",fV="Conv2D",lV="Conv2DBackpropFilter",cV="Conv2DBackpropInput",hV="Conv3D",Jxe="Conv3DBackpropFilterV2",dV="Conv3DBackpropInputV2",pV="Cos",mV="Cosh",vV="Cumprod",gV="Cumsum",yV="CropAndResize",bV="DenseBincount",wV="DepthToSpace",_V="DepthwiseConv2dNative",xV="DepthwiseConv2dNativeBackpropFilter",SV="DepthwiseConv2dNativeBackpropInput",EV="Diag",MV="Dilation2D",Yxe="Dilation2DBackpropInput",Xxe="Dilation2DBackpropFilter",AV="RealDiv",kV="Einsum",TV="Elu",Qxe="EluGrad",NV="Erf",IV="Equal",DV="Exp",OV="ExpandDims",RV="Expm1",CV="FFT",FV="Fill",BV="FlipLeftRight",LV="Floor",PV="FloorDiv",qV="FusedBatchNorm",$V="GatherV2",zV="GatherNd",jV="Greater",UV="GreaterEqual",Z4="Identity",VV="IFFT",WV="Imag",GV="IsFinite",HV="IsInf",KV="IsNan",ZV="LeakyRelu",JV="Less",YV="LessEqual",XV="LinSpace",QV="Log",eW="Log1p",tW="LogicalAnd",rW="LogicalNot",nW="LogicalOr",eSe="LogicalXor",tSe="LogSoftmax",rSe="LowerBound",iW="LRN",nSe="LRNGrad",aW="Max",sW="Maximum",oW="MaxPool",iSe="MaxPoolGrad",uW="MaxPool3D",aSe="MaxPool3DGrad",fW="MaxPoolWithArgmax",lW="Mean",cW="Min",hW="Minimum",dW="MirrorPad",pW="Mod",mW="Multinomial",vW="Multiply",gW="Neg",yW="NotEqual",bW="NonMaxSuppressionV3",wW="NonMaxSuppressionV4",_W="NonMaxSuppressionV5",xW="OnesLike",SW="OneHot",EW="Pack",MW="PadV2",sSe="Pool",AW="Pow",kW="Prelu",TW="Prod",NW="Range",IW="Real",DW="Reciprocal",OW="Relu",RW="Reshape",CW="ResizeNearestNeighbor",oSe="ResizeNearestNeighborGrad",FW="ResizeBilinear",uSe="ResizeBilinearGrad",BW="Relu6",LW="Reverse",PW="Round",qW="Rsqrt",$W="ScatterNd",zW="SearchSorted",jW="Select",UW="Selu",VW="Slice",WW="Sin",GW="Sinh",HW="Sign",KW="Sigmoid",ZW="Softplus",JW="Sqrt",YW="Sum",XW="SpaceToBatchND",QW="SplitV",eG="Softmax",tG="SparseFillEmptyRows",rG="SparseReshape",nG="SparseSegmentMean",iG="SparseSegmentSum",aG="SparseToDense",sG="SquaredDifference",fSe="Square",oG="StridedSlice",uG="StringNGrams",fG="StringSplit",lG="StringToHashBucketFast",cG="Sub",hG="Tan",dG="Tanh",J4="Tile",pG="TopK",mG="Transform",b2="Transpose",vG="Unique",gG="Unpack",yG="UnsortedSegmentSum",lSe="UpperBound",bG="ZerosLike",wG="Step",b4="FromPixels",_G="RotateWithOffset",w4="_FusedMatMul",_4="FusedConv2D",x4="FusedDepthwiseConv2D";function kl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Gt().getBool("IS_TEST")||Gt().getBool("PROD")||console.warn.apply(console,Ir(t))}function cSe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Gt().getBool("IS_TEST")||Gt().getBool("PROD")||console.log.apply(console,Ir(t))}var zp=G4("kernelRegistry",function(){return new Map}),Ug=G4("gradRegistry",function(){return new Map});function M2(t,e){var r=Y4(t,e);return zp.get(r)}function S4(t){return Ug.get(t)}function A2(t){for(var e=zp.entries(),r=[];;){var n=e.next(),a=n.done,s=n.value;if(a)break;var o=wt(s,2),u=o[0],l=o[1],h=wt(u.split("_"),1),p=h[0];p===t&&r.push(l)}return r}function xG(t){var e=t.kernelName,r=t.backendName,n=Y4(e,r);zp.has(n)&&kl("The kernel '"+e+"' for backend "+("'"+r+"' is already registered")),zp.set(n,t)}function hSe(t){var e=t.kernelName;Ug.has(e)&&Gt().getBool("DEBUG")&&kl("Overriding the gradient for '"+e+"'"),Ug.set(e,t)}function dSe(t,e){var r=Y4(t,e);if(!zp.has(r))throw new Error("The kernel '"+t+"' for backend "+("'"+e+"' is not registered"));zp.delete(r)}function pSe(t){if(!Ug.has(t))throw new Error("The gradient '"+t+"' for backend is not registered");Ug.delete(t)}function mSe(t,e){var r=A2(t);r.forEach(function(n){var a=Object.assign({},n,{backendName:e});xG(a)})}function Y4(t,e){return e+"_"+t}var E4=wn,Vs=null;try{Vs=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function wn(t,e,r){this.low=t|0,this.high=e|0,this.unsigned=!!r}wn.prototype.__isLong__;Object.defineProperty(wn.prototype,"__isLong__",{value:!0});function ja(t){return(t&&t.__isLong__)===!0}wn.isLong=ja;var uU={},fU={};function Nh(t,e){var r,n,a;return e?(t>>>=0,(a=0<=t&&t<256)&&(n=fU[t],n)?n:(r=_n(t,(t|0)<0?-1:0,!0),a&&(fU[t]=r),r)):(t|=0,(a=-128<=t&&t<128)&&(n=uU[t],n)?n:(r=_n(t,t<0?-1:0,!1),a&&(uU[t]=r),r))}wn.fromInt=Nh;function Ws(t,e){if(isNaN(t))return e?yh:Gs;if(e){if(t<0)return yh;if(t>=SG)return AG}else{if(t<=-cU)return qa;if(t+1>=cU)return MG}return t<0?Ws(-t,e).neg():_n(t%jp|0,t/jp|0,e)}wn.fromNumber=Ws;function _n(t,e,r){return new wn(t,e,r)}wn.fromBits=_n;var k2=Math.pow;function X4(t,e,r){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Gs;if(typeof e=="number"?(r=e,e=!1):e=!!e,r=r||10,r<2||36<r)throw RangeError("radix");var n;if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return X4(t.substring(1),e,r).neg();for(var a=Ws(k2(r,8)),s=Gs,o=0;o<t.length;o+=8){var u=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+u),r);if(u<8){var h=Ws(k2(r,u));s=s.mul(h).add(Ws(l))}else s=s.mul(a),s=s.add(Ws(l))}return s.unsigned=e,s}wn.fromString=X4;function zo(t,e){return typeof t=="number"?Ws(t,e):typeof t=="string"?X4(t,e):_n(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}wn.fromValue=zo;var lU=1<<16,vSe=1<<24,jp=lU*lU,SG=jp*jp,cU=SG/2,hU=Nh(vSe),Gs=Nh(0);wn.ZERO=Gs;var yh=Nh(0,!0);wn.UZERO=yh;var Rp=Nh(1);wn.ONE=Rp;var EG=Nh(1,!0);wn.UONE=EG;var M4=Nh(-1);wn.NEG_ONE=M4;var MG=_n(-1,2147483647,!1);wn.MAX_VALUE=MG;var AG=_n(-1,-1,!0);wn.MAX_UNSIGNED_VALUE=AG;var qa=_n(0,-2147483648,!1);wn.MIN_VALUE=qa;var ct=wn.prototype;ct.toInt=function(){return this.unsigned?this.low>>>0:this.low};ct.toNumber=function(){return this.unsigned?(this.high>>>0)*jp+(this.low>>>0):this.high*jp+(this.low>>>0)};ct.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(qa)){var r=Ws(e),n=this.div(r),a=n.mul(r).sub(this);return n.toString(e)+a.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=Ws(k2(e,6),this.unsigned),o=this,u="";;){var l=o.div(s),h=o.sub(l.mul(s)).toInt()>>>0,p=h.toString(e);if(o=l,o.isZero())return p+u;for(;p.length<6;)p="0"+p;u=""+p+u}};ct.getHighBits=function(){return this.high};ct.getHighBitsUnsigned=function(){return this.high>>>0};ct.getLowBits=function(){return this.low};ct.getLowBitsUnsigned=function(){return this.low>>>0};ct.getNumBitsAbs=function(){if(this.isNegative())return this.eq(qa)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,r=31;r>0&&(e&1<<r)==0;r--);return this.high!=0?r+33:r+1};ct.isZero=function(){return this.high===0&&this.low===0};ct.eqz=ct.isZero;ct.isNegative=function(){return!this.unsigned&&this.high<0};ct.isPositive=function(){return this.unsigned||this.high>=0};ct.isOdd=function(){return(this.low&1)===1};ct.isEven=function(){return(this.low&1)===0};ct.equals=function(e){return ja(e)||(e=zo(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};ct.eq=ct.equals;ct.notEquals=function(e){return!this.eq(e)};ct.neq=ct.notEquals;ct.ne=ct.notEquals;ct.lessThan=function(e){return this.comp(e)<0};ct.lt=ct.lessThan;ct.lessThanOrEqual=function(e){return this.comp(e)<=0};ct.lte=ct.lessThanOrEqual;ct.le=ct.lessThanOrEqual;ct.greaterThan=function(e){return this.comp(e)>0};ct.gt=ct.greaterThan;ct.greaterThanOrEqual=function(e){return this.comp(e)>=0};ct.gte=ct.greaterThanOrEqual;ct.ge=ct.greaterThanOrEqual;ct.compare=function(e){if(ja(e)||(e=zo(e)),this.eq(e))return 0;var r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};ct.comp=ct.compare;ct.negate=function(){return!this.unsigned&&this.eq(qa)?qa:this.not().add(Rp)};ct.neg=ct.negate;ct.add=function(e){ja(e)||(e=zo(e));var r=this.high>>>16,n=this.high&65535,a=this.low>>>16,s=this.low&65535,o=e.high>>>16,u=e.high&65535,l=e.low>>>16,h=e.low&65535,p=0,v=0,y=0,S=0;return S+=s+h,y+=S>>>16,S&=65535,y+=a+l,v+=y>>>16,y&=65535,v+=n+u,p+=v>>>16,v&=65535,p+=r+o,p&=65535,_n(y<<16|S,p<<16|v,this.unsigned)};ct.subtract=function(e){return ja(e)||(e=zo(e)),this.add(e.neg())};ct.sub=ct.subtract;ct.multiply=function(e){if(this.isZero())return Gs;if(ja(e)||(e=zo(e)),Vs){var r=Vs.mul(this.low,this.high,e.low,e.high);return _n(r,Vs.get_high(),this.unsigned)}if(e.isZero())return Gs;if(this.eq(qa))return e.isOdd()?qa:Gs;if(e.eq(qa))return this.isOdd()?qa:Gs;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(hU)&&e.lt(hU))return Ws(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=this.high&65535,s=this.low>>>16,o=this.low&65535,u=e.high>>>16,l=e.high&65535,h=e.low>>>16,p=e.low&65535,v=0,y=0,S=0,A=0;return A+=o*p,S+=A>>>16,A&=65535,S+=s*p,y+=S>>>16,S&=65535,S+=o*h,y+=S>>>16,S&=65535,y+=a*p,v+=y>>>16,y&=65535,y+=s*h,v+=y>>>16,y&=65535,y+=o*l,v+=y>>>16,y&=65535,v+=n*p+a*h+s*l+o*u,v&=65535,_n(S<<16|A,v<<16|y,this.unsigned)};ct.mul=ct.multiply;ct.divide=function(e){if(ja(e)||(e=zo(e)),e.isZero())throw Error("division by zero");if(Vs){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var r=(this.unsigned?Vs.div_u:Vs.div_s)(this.low,this.high,e.low,e.high);return _n(r,Vs.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?yh:Gs;var n,a,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return yh;if(e.gt(this.shru(1)))return EG;s=yh}else{if(this.eq(qa)){if(e.eq(Rp)||e.eq(M4))return qa;if(e.eq(qa))return Rp;var o=this.shr(1);return n=o.div(e).shl(1),n.eq(Gs)?e.isNegative()?Rp:M4:(a=this.sub(e.mul(n)),s=n.add(a.div(e)),s)}else if(e.eq(qa))return this.unsigned?yh:Gs;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=Gs}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var u=Math.ceil(Math.log(n)/Math.LN2),l=u<=48?1:k2(2,u-48),h=Ws(n),p=h.mul(e);p.isNegative()||p.gt(a);)n-=l,h=Ws(n,this.unsigned),p=h.mul(e);h.isZero()&&(h=Rp),s=s.add(h),a=a.sub(p)}return s};ct.div=ct.divide;ct.modulo=function(e){if(ja(e)||(e=zo(e)),Vs){var r=(this.unsigned?Vs.rem_u:Vs.rem_s)(this.low,this.high,e.low,e.high);return _n(r,Vs.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};ct.mod=ct.modulo;ct.rem=ct.modulo;ct.not=function(){return _n(~this.low,~this.high,this.unsigned)};ct.and=function(e){return ja(e)||(e=zo(e)),_n(this.low&e.low,this.high&e.high,this.unsigned)};ct.or=function(e){return ja(e)||(e=zo(e)),_n(this.low|e.low,this.high|e.high,this.unsigned)};ct.xor=function(e){return ja(e)||(e=zo(e)),_n(this.low^e.low,this.high^e.high,this.unsigned)};ct.shiftLeft=function(e){return ja(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?_n(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):_n(0,this.low<<e-32,this.unsigned)};ct.shl=ct.shiftLeft;ct.shiftRight=function(e){return ja(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?_n(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):_n(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};ct.shr=ct.shiftRight;ct.shiftRightUnsigned=function(e){if(ja(e)&&(e=e.toInt()),e&=63,e===0)return this;var r=this.high;if(e<32){var n=this.low;return _n(n>>>e|r<<32-e,r>>>e,this.unsigned)}else return e===32?_n(r,0,this.unsigned):_n(r>>>e-32,0,this.unsigned)};ct.shru=ct.shiftRightUnsigned;ct.shr_u=ct.shiftRightUnsigned;ct.toSigned=function(){return this.unsigned?_n(this.low,this.high,!1):this};ct.toUnsigned=function(){return this.unsigned?this:_n(this.low,this.high,!0)};ct.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};ct.toBytesLE=function(){var e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};ct.toBytesBE=function(){var e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]};wn.fromBytes=function(e,r,n){return n?wn.fromBytesLE(e,r):wn.fromBytesBE(e,r)};wn.fromBytesLE=function(e,r){return new wn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)};wn.fromBytesBE=function(e,r){return new wn(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)};var gSe=Object.assign(Object.create(null),E4,{default:E4}),gh=E4||gSe;function ty(t){return gh.fromString(t,!0,16)}var kG=ty("c3a5c85c97cb3127"),mh=ty("b492b66fbe98f273"),fa=ty("9ae16a3b2f90404f");function A4(t){return t.xor(t.shru(47))}function TG(t,e,r){var n=t.slice(e,e+r);return gh.fromBytes(Array.from(n),!0,!0)}function cn(t,e){return TG(t,e,8)}function dU(t,e){return TG(t,e,4)}function xi(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Il(t,e,r){r===void 0&&(r=ty("9ddfea08eb382d69"));var n=t.xor(e).mul(r);n=n.xor(n.shru(47));var a=e.xor(n).mul(r);return a=a.xor(a.shru(47)),a=a.mul(r),a}function ySe(t,e,r,n,a,s){a=a.add(t),s=xi(s.add(a).add(n),21);var o=a;return a=a.add(e),a=a.add(r),s=s.add(xi(a,44)),[a.add(n),s.add(o)]}function g2(t,e,r,n){return ySe(cn(t,e),cn(t,e+8),cn(t,e+16),cn(t,e+24),r,n)}function bSe(t,e){if(e===void 0&&(e=t.length),e>=8){var r=fa.add(e*2),n=cn(t,0).add(fa),a=cn(t,e-8),s=xi(a,37).mul(r).add(n),o=xi(n,25).add(a).mul(r);return Il(s,o,r)}if(e>=4){var r=fa.add(e*2),n=dU(t,0);return Il(n.shl(3).add(e),dU(t,e-4),r)}if(e>0){var n=t[0],a=t[e>>1],s=t[e-1],u=n+(a<<8),l=e+(s<<2);return A4(fa.mul(u).xor(kG.mul(l))).mul(fa)}return fa}function wSe(t,e){e===void 0&&(e=t.length);var r=fa.add(e*2),n=cn(t,0).mul(mh),a=cn(t,8),s=cn(t,e-8).mul(r),o=cn(t,e-16).mul(fa);return Il(xi(n.add(a),43).add(xi(s,30)).add(o),n.add(xi(a.add(fa),18)).add(s),r)}function _Se(t,e){e===void 0&&(e=t.length);var r=fa.add(e*2),n=cn(t,0).mul(fa),a=cn(t,8),s=cn(t,e-8).mul(r),o=cn(t,e-16).mul(fa),u=xi(n.add(a),43).add(xi(s,30)).add(o),l=Il(u,n.add(xi(a.add(fa),18)).add(s),r),h=cn(t,16).mul(r),p=cn(t,24),v=u.add(cn(t,e-32)).mul(r),y=l.add(cn(t,e-24)).mul(r);return Il(xi(h.add(p),43).add(xi(v,30)).add(y),h.add(xi(p.add(n),18)).add(v),r)}function xSe(t,e){var r,n;e===void 0&&(e=t.length);var a=gh.fromNumber(81,!0);if(e<=32)return e<=16?bSe(t,e):wSe(t,e);if(e<=64)return _Se(t,e);var s=a,o=a.mul(mh).add(113),u=A4(o.mul(fa).add(113)).mul(fa),l=[gh.UZERO,gh.UZERO],h=[gh.UZERO,gh.UZERO];s=s.mul(fa).add(cn(t,0));var p=0,v=(e-1>>6)*64,y=v+(e-1&63)-63;do s=xi(s.add(o).add(l[0]).add(cn(t,p+8)),37).mul(mh),o=xi(o.add(l[1]).add(cn(t,p+48)),42).mul(mh),s=s.xor(h[1]),o=o.add(l[0]).add(cn(t,p+40)),u=xi(u.add(h[0]),33).mul(mh),l=g2(t,p,l[1].mul(mh),s.add(h[0])),h=g2(t,p+32,u.add(h[1]),o.add(cn(t,p+16))),r=wt([s,u],2),u=r[0],s=r[1],p+=64;while(p!==v);var S=mh.add(u.and(255).shl(1));return p=y,h[0]=h[0].add(e-1&63),l[0]=l[0].add(h[0]),h[0]=h[0].add(l[0]),s=xi(s.add(o).add(l[0]).add(cn(t,p+8)),37).mul(S),o=xi(o.add(l[1]).add(cn(t,p+48)),42).mul(S),s=s.xor(h[1].mul(9)),o=o.add(l[0].mul(9).add(cn(t,p+40))),u=xi(u.add(h[0]),33).mul(S),l=g2(t,p,l[1].mul(S),s.add(h[0])),h=g2(t,p+32,u.add(h[1]),o.add(cn(t,p+16))),n=wt([s,u],2),u=n[0],s=n[1],Il(Il(l[0],h[0],S).add(A4(o).mul(kG)).add(u),Il(l[1],h[1],S).add(s),S)}function SSe(t,e){return e==="string"?ry(t):q2([t],e)}function ESe(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function q2(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Sh(t)),Gt().getBool("DEBUG")&&DU(t,e),ESe(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){for(var r=new Uint8Array(t.length),n=0;n<r.length;++n)Math.round(t[n])!==0&&(r[n]=1);return r}else throw new Error("Unknown data type "+e)}function Vg(){return Gt().platform.now()}function MSe(t,e){return Gt().platform.fetch(t,e)}function ry(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",Gt().platform.encode(t,e)}function T2(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",Gt().platform.decode(t,e)}var ASe={__proto__:null,createScalarValue:SSe,toTypedArray:q2,now:Vg,fetch:MSe,encodeString:ry,decodeString:T2,shuffle:kU,shuffleCombo:kxe,clamp:jg,nearestLargerEven:Txe,swap:S2,sum:Nxe,randUniform:Ixe,distSquared:Dxe,assert:se,assertShapesMatch:la,assertNonNull:Th,flatten:Sh,sizeFromShape:bn,isScalarShape:Oxe,arraysEqual:Cl,isInt:$p,tanh:Rxe,sizeToSquarishShape:Cxe,createShuffledIndices:Fxe,rightPad:qg,repeatedTry:Bxe,inferFromImplicitShape:Lxe,parseAxisParam:ey,squeezeShape:TU,getTypedArrayFromDType:NU,getArrayFromDType:IU,checkConversionForErrors:DU,isValidDtype:OU,hasEncodingLoss:Pxe,isTypedArray:Ji,bytesPerElement:y4,bytesFromStringArray:RU,isString:Tl,isBoolean:CU,isNumber:FU,inferDtype:L2,isFunction:Dl,nearestDivisor:E2,computeStrides:Wp,toNestedArray:Cp,makeOnesTypedArray:U4,makeZerosTypedArray:P2,makeZerosNestedTypedArray:qxe,assertNonNegativeIntegerDimensions:V4,locToIndex:$xe,indexToLoc:zxe,isPromise:W4,hexToLong:ty,fingerPrint64:xSe},kSe=function(){function t(e,r){this.backendTimer=e,this.logger=r,r==null&&(this.logger=new NSe)}return t.prototype.profileKernel=function(e,r,n){var a,s,o,u=function(){o=n()},l,h=Vg();if(this.backendTimer.timerAvailable())l=this.backendTimer.time(u);else{u();try{for(var p=$a(o),v=p.next();!v.done;v=p.next()){var y=v.value;y.dataSync()}}catch(I){a={error:I}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}l=Promise.resolve({kernelMs:Vg()-h})}if(Gt().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var S=function(I){var N=o[I];N.data().then(function(D){TSe(D,N.dtype,e)})},A=0;A<o.length;A++)S(A);var T={kernelName:e,outputs:o,inputs:r,timeMs:l.then(function(I){return I.kernelMs}),extraInfo:l.then(function(I){return I.getExtraProfileInfo!=null?I.getExtraProfileInfo():""})};return T},t.prototype.logKernelProfile=function(e){var r=this,n=e.kernelName,a=e.outputs,s=e.timeMs,o=e.inputs,u=e.extraInfo;a.forEach(function(l){Promise.all([l.data(),s,u]).then(function(h){r.logger.logKernelProfile(n,l,h[0],h[1],o,h[2])})})},t}();function TSe(t,e,r){if(e!=="float32")return!1;for(var n=0;n<t.length;n++){var a=t[n];if(isNaN(a)||!isFinite(a))return console.warn("Found "+a+" in the result of '"+r+"'"),!0}return!1}var NSe=function(){function t(){}return t.prototype.logKernelProfile=function(e,r,n,a,s,o){var u=typeof a=="number"?qg(a+"ms",9):a.error,l=qg(e,25),h=r.rank,p=r.size,v=qg(r.shape.toString(),14),y="";for(var S in s){var A=s[S];if(A!=null){var T=A.shape||r.shape,I=T.length;y+=S+": "+I+"D "+(I>0?T:"")+" "}}console.log("%c"+l+"	%c"+u+"	%c"+h+"D "+v+"	%c"+p+"	%c"+y+"	%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}();function ISe(t,e,r){for(var n={},a={},s=0;s<e.length;s++)n[e[s].id]=!0;for(var s=0;s<t.length;s++){var o=t[s],u=o.inputs;for(var l in u){for(var h=u[l],p=!1,v=0;v<e.length;v++)if(n[h.id]){o.outputs.forEach(function(C){return n[C.id]=!0}),p=!0,a[o.id]=!0;break}if(p)break}}var y={};y[r.id]=!0;for(var S={},s=t.length-1;s>=0;s--)for(var o=t[s],u=o.inputs,v=0;v<o.outputs.length;v++)if(y[o.outputs[v].id]){for(var l in u)y[u[l].id]=!0,S[o.id]=!0;break}for(var A=[],s=0;s<t.length;s++){var o=t[s];if(a[o.id]&&S[o.id]){var T={};for(var l in o.inputs){var I=o.inputs[l];n[I.id]&&(T[l]=I)}var N=Object.assign({},o);N.inputs=T,N.outputs=o.outputs,A.push(N)}}return A}function DSe(t,e,r,n){for(var a=function(o){var u=e[o],l=[];if(u.outputs.forEach(function(y){var S=t[y.id];S!=null?l.push(S):l.push(null)}),u.gradient==null)throw new Error("Cannot compute gradient: gradient function not found "+("for "+u.kernelName+"."));var h=u.gradient(l),p=function(y){if(!(y in h))throw new Error("Cannot backprop through input "+y+". "+("Available gradients found: "+Object.keys(h)+"."));var S=r(function(){return h[y]()});if(S.dtype!=="float32")throw new Error("Error in gradient for op "+u.kernelName+". The gradient of input "+(y+" must have 'float32' dtype, but has '"+S.dtype+"'"));var A=u.inputs[y];if(!Cl(S.shape,A.shape))throw new Error("Error in gradient for op "+u.kernelName+". The gradient of input "+("'"+y+"' has shape '"+S.shape+"', which does not match ")+("the shape of the input '"+A.shape+"'"));if(t[A.id]==null)t[A.id]=S;else{var T=t[A.id];t[A.id]=n(T,S),T.dispose()}};for(var v in u.inputs)p(v)},s=e.length-1;s>=0;s--)a(s)}var pU=20,Bg=3,h4=7;function OSe(t,e,r,n){var a=Wp(e),s=RSe(t,e,r,a),o=e.length,u=w2(t,e,r,a,s),l=["Tensor"];return n&&(l.push("  dtype: "+r),l.push("  rank: "+o),l.push("  shape: ["+e+"]"),l.push("  values:")),l.push(u.map(function(h){return"    "+h}).join(`
`)),l.join(`
`)}function RSe(t,e,r,n){var a=bn(e),s=n[n.length-1],o=new Array(s).fill(0),u=e.length,l=r==="complex64"?Pg(t):t;if(u>1)for(var h=0;h<a/s;h++)for(var p=h*s,v=0;v<s;v++)o[v]=Math.max(o[v],Lg(l[p+v],0,r).length);return o}function Lg(t,e,r){var n;return Array.isArray(t)?n=parseFloat(t[0].toFixed(h4))+" + "+(parseFloat(t[1].toFixed(h4))+"j"):Tl(t)?n="'"+t+"'":r==="bool"?n=NG(t):n=parseFloat(t.toFixed(h4)).toString(),qg(n,e)}function NG(t){return t===0?"false":"true"}function w2(t,e,r,n,a,s){s===void 0&&(s=!0);var o=r==="complex64"?2:1,u=e[0],l=e.length;if(l===0){if(r==="complex64"){var h=Pg(t);return[Lg(h[0],0,r)]}return r==="bool"?[NG(t[0])]:[t[0].toString()]}if(l===1){if(u>pU){var p=Bg*o,v=Array.from(t.slice(0,p)),y=Array.from(t.slice((u-Bg)*o,u*o));return r==="complex64"&&(v=Pg(v),y=Pg(y)),["["+v.map(function(G,j){return Lg(G,a[j],r)}).join(", ")+", ..., "+y.map(function(G,j){return Lg(G,a[u-Bg+j],r)}).join(", ")+"]"]}var S=r==="complex64"?Pg(t):Array.from(t);return["["+S.map(function(G,j){return Lg(G,a[j],r)}).join(", ")+"]"]}var A=e.slice(1),T=n.slice(1),I=n[0]*o,N=[];if(u>pU){for(var D=0;D<Bg;D++){var C=D*I,L=C+I;N.push.apply(N,Ir(w2(t.slice(C,L),A,r,T,a,!1)))}N.push("...");for(var D=u-Bg;D<u;D++){var C=D*I,L=C+I;N.push.apply(N,Ir(w2(t.slice(C,L),A,r,T,a,D===u-1)))}}else for(var D=0;D<u;D++){var C=D*I,L=C+I;N.push.apply(N,Ir(w2(t.slice(C,L),A,r,T,a,D===u-1)))}var z=l===2?",":"";N[0]="["+N[0]+z;for(var D=1;D<N.length-1;D++)N[D]=" "+N[D]+z;for(var $=`,
`,D=2;D<l;D++)$+=`
`;return N[N.length-1]=" "+N[N.length-1]+"]"+(s?"":$),N}function Pg(t){for(var e=[],r=0;r<t.length;r+=2)e.push([t[r],t[r+1]]);return e}var N2=function(){function t(e,r,n){var a=this;if(this.dtype=r,this.shape=e.slice(),this.size=bn(e),n!=null){var s=n.length;se(s===this.size,function(){return"Length of values '"+s+"' does not match the size "+("inferred by the shape '"+a.size+"'.")})}if(r==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||IU(r,this.size),this.strides=Wp(e)}return t.prototype.set=function(e){for(var r=this,n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];n.length===0&&(n=[0]),se(n.length===this.rank,function(){return"The number of provided coordinates ("+n.length+") must "+("match the rank ("+r.rank+")")});var s=this.locToIndex(n);this.values[s]=e},t.prototype.get=function(){for(var e,r,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];n.length===0&&(n=[0]);var s=0;try{for(var o=$a(n),u=o.next();!u.done;u=o.next()){var l=u.value;if(l<0||l>=this.shape[s]){var h="Requested out of range element at "+n+". "+("  Buffer shape="+this.shape);throw new Error(h)}s++}}catch(y){e={error:y}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}for(var p=n[n.length-1],v=0;v<n.length-1;++v)p+=this.strides[v]*n[v];return this.values[p]},t.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var r=e[e.length-1],n=0;n<e.length-1;++n)r+=this.strides[n]*e[n];return r},t.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var r=new Array(this.shape.length),n=0;n<r.length-1;++n)r[n]=Math.floor(e/this.strides[n]),e-=r[n]*this.strides[n];return r[r.length-1]=e,r},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return Po().makeTensor(this.values,this.shape,this.dtype)},t}(),Po=null,Dp=null;function CSe(t){Po=t}function FSe(t){Dp=t}var ui=function(){function t(e,r,n,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=r||"float32",this.size=bn(e),this.strides=Wp(e),this.dataId=n,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return xt(this,void 0,void 0,function(){var e;return St(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return e=r.sent(),[2,Dp.buffer(this.shape,this.dtype,e)]}})})},t.prototype.bufferSync=function(){return Dp.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return xt(this,void 0,void 0,function(){var e;return St(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return e=r.sent(),[2,Cp(this.shape,e,this.dtype==="complex64")]}})})},t.prototype.arraySync=function(){return Cp(this.shape,this.dataSync(),this.dtype==="complex64")},t.prototype.data=function(){return xt(this,void 0,void 0,function(){var e,r;return St(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),e=Po().read(this.dataId),this.dtype!=="string"?[3,2]:[4,e];case 1:r=n.sent();try{return[2,r.map(function(a){return T2(a)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,e]}})})},t.prototype.dataToGPU=function(e){return this.throwIfDisposed(),Po().readToGPU(this.dataId,e)},t.prototype.dataSync=function(){this.throwIfDisposed();var e=Po().readSync(this.dataId);if(this.dtype==="string")try{return e.map(function(r){return T2(r)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},t.prototype.bytes=function(){return xt(this,void 0,void 0,function(){var e;return St(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),[4,Po().read(this.dataId)];case 1:return e=r.sent(),this.dtype==="string"?[2,e]:[2,new Uint8Array(e.buffer)]}})})},t.prototype.dispose=function(){this.isDisposed||(Po().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.print=function(e){return e===void 0&&(e=!1),Dp.print(this,e)},t.prototype.clone=function(){return this.throwIfDisposed(),Dp.clone(this)},t.prototype.toString=function(e){e===void 0&&(e=!1);var r=this.dataSync();return OSe(r,this.shape,this.dtype,e)},t.prototype.cast=function(e){return this.throwIfDisposed(),Dp.cast(this,e)},t.prototype.variable=function(e,r,n){return e===void 0&&(e=!0),this.throwIfDisposed(),Po().makeVariable(this,e,r,n)},t}();Object.defineProperty(ui,Symbol.hasInstance,{value:function(t){return!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null}});function BSe(){return G4("Tensor",function(){return ui})}BSe();var Wg=function(t){gf(e,t);function e(r,n,a,s){var o=t.call(this,r.shape,r.dtype,r.dataId,s)||this;return o.trainable=n,o.name=a,o}return e.prototype.assign=function(r){if(r.dtype!==this.dtype)throw new Error("dtype of the new value ("+r.dtype+") and "+("previous value ("+this.dtype+") must match"));if(!Cl(r.shape,this.shape))throw new Error("shape of the new value ("+r.shape+") and "+("previous value ("+this.shape+") must match"));Po().disposeTensor(this),this.dataId=r.dataId,Po().incRef(this,null)},e.prototype.dispose=function(){Po().disposeVariable(this),this.isDisposedInternal=!0},e}(ui);Object.defineProperty(Wg,Symbol.hasInstance,{value:function(t){return t instanceof ui&&t.assign!=null&&t.assign instanceof Function}});W.Rank=void 0;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(W.Rank||(W.Rank={}));var k4;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(k4||(k4={}));var T4;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(T4||(T4={}));var N4;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(N4||(N4={}));var I4;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(I4||(I4={}));var LSe={float32:N4,int32:k4,bool:T4,complex64:I4};function $2(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error("Can not upcast "+t+" with "+e)}return LSe[t][e]}function PSe(t){return $2(t,"int32")}function Rn(t,e){if(t.dtype===e.dtype)return[t,e];var r=$2(t.dtype,e.dtype);return[t.cast(r),e.cast(r)]}function IG(t,e){se(t.dtype===e.dtype,function(){return"The dtypes of the first("+t.dtype+") and"+(" second("+e.dtype+") input must match")})}function qSe(t,e){return e.some(function(r){return r.id===t.id})}function Q4(t){var e=[],r=new Set;return DG(t,e,r),e}function DG(t,e,r){if(t!=null){if(t instanceof ui){e.push(t);return}if(!!$Se(t)){var n=t;for(var a in n){var s=n[a];r.has(s)||(r.add(s),DG(s,e,r))}}}}function $Se(t){return Array.isArray(t)||typeof t=="object"}var zSe={__proto__:null,makeTypesMatch:Rn,assertTypesMatch:IG,isTensorInList:qSe,getTensorsInContainer:Q4};function d4(t){return t.kernelName!=null}var mU=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(function(e){return e.name})))}}}return t.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},t}(),eN=function(){function t(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new mU}return t.prototype.ready=function(){return xt(this,void 0,void 0,function(){var e,r,n,a;return St(this,function(s){switch(s.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];e=this.getSortedBackends(),r=0,s.label=1;case 1:return r<e.length?(n=e[r],[4,this.initializeBackend(n).success]):[3,5];case 2:return a=s.sent(),a?[4,this.setBackend(n)]:[3,4];case 3:return s.sent(),[2];case 4:return r++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(t.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var e=this.initializeBackendsAndReturnBest(),r=e.name,n=e.asyncInit;if(n)throw new Error("The highest priority backend '"+r+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(r)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(e){if(!(e in this.registry))if(e in this.registryFactory){var r=this.initializeBackend(e).asyncInit;if(r)return null}else return null;return this.registry[e]},t.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},t.prototype.registerBackend=function(e,r,n){return n===void 0&&(n=1),e in this.registryFactory?(kl(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:r,priority:n},!0)},t.prototype.setBackend=function(e){return xt(this,void 0,void 0,function(){var r,n,a,s,o;return St(this,function(u){switch(u.label){case 0:if(this.registryFactory[e]==null)throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,this.registry[e]!=null?[3,4]:(this.backendInstance=null,r=this.initializeBackend(e),n=r.success,a=r.asyncInit,a?[4,n]:[3,2]);case 1:return o=u.sent(),[3,3];case 2:o=n,u.label=3;case 3:if(s=o,!s)return[2,!1];u.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new kSe(this.backendInstance),[2,!0]}})})},t.prototype.setupRegisteredKernels=function(){var e=this,r=A2(this.backendName);r.forEach(function(n){n.setupFunc!=null&&n.setupFunc(e.backendInstance)})},t.prototype.disposeRegisteredKernels=function(e){var r=this,n=A2(e);n.forEach(function(a){a.disposeFunc!=null&&a.disposeFunc(r.registry[e])})},t.prototype.initializeBackend=function(e){var r=this,n=this.registryFactory[e];if(n==null)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var a=n.factory();if(a&&!(a instanceof AU)&&typeof a.then=="function"){var s=++this.pendingBackendInitId,o=a.then(function(u){return s<r.pendingBackendInitId?!1:(r.registry[e]=u,r.pendingBackendInit=null,!0)}).catch(function(u){return s<r.pendingBackendInitId||(r.pendingBackendInit=null,kl("Initialization of backend "+e+" failed"),kl(u.stack||u.message)),!1});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}else return this.registry[e]=a,{success:!0,asyncInit:!1}}catch(u){return kl("Initialization of backend "+e+" failed"),kl(u.stack||u.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var e=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(r,n){return e.registryFactory[n].priority-e.registryFactory[r].priority})},t.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),r=0;r<e.length;r++){var n=e[r],a=this.initializeBackend(n),s=a.success,o=a.asyncInit;if(o||s)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(e,r){var n=this.state.tensorInfo.get(r),a=n.backend,s=this.readSync(r),o=a.refCount(r);a.disposeData(r,!0),n.backend=e,e.move(r,s,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(e,r){var n=this,a=null;if(r==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");r=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof r!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}var s;return this.scopedRun(function(){return n.startScope(a)},function(){return n.endScope(s)},function(){return s=r(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s})},t.prototype.scopedRun=function(e,r,n){e();try{var a=n();return r(),a}catch(s){throw r(),s}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(e){var r=ve.runKernel(Z4,{x:e}),n={x:e},a=function(o){return{x:function(){var u="float32",l={x:o},h={dtype:u};return ve.runKernel(K4,l,h)}}},s=[];return this.addTapeNode(this.state.activeScope.name,n,[r],a,s,{}),r},t.prototype.runKernel=function(e,r,n){this.backendName==null&&this.backend;var a=M2(e,this.backendName)!=null;if(!a)throw new Error("Kernel '"+e+"' not registered for backend '"+this.backendName+"'");return this.runKernelFunc({kernelName:e,inputs:r,attrs:n})},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(e,r,n){var a=this.backend.numDataIds(),s=0;n.forEach(function(l){s+=l.dtype==="complex64"?3:1});var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],u=a-r-s-o;if(u>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak "+("("+u+" data ids) after running '"+e+"'"))},t.prototype.runKernelFunc=function(e){var r=this,n,a=[],s=this.isTapeOn(),o=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var l;this.backendName==null&&this.backend;var h,p=d4(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(d4(e)){var v=e.kernelName,y=e.inputs,S=e.attrs;this.backendName==null&&this.backend;var A=M2(v,this.backendName);se(A!=null,function(){return"Cannot find registered kernel '"+v+"' for backend '"+r.backendName+"'"}),l=function(){var z=r.backend.numDataIds();h=A.kernelFunc({inputs:y,attrs:S,backend:r.backend});var $=Array.isArray(h)?h:[h];r.shouldCheckForMemLeaks()&&r.checkKernelForMemLeak(v,z,$);var G=$.map(function(K){return K.rank!=null?K:r.makeTensorFromTensorInfo(K)});if(s){var j=r.getTensorsForGradient(v,y,G);a=r.saveTensorsForBackwardMode(j)}return G}}else{var T=e.forwardFunc,I=function(z){!s||(a=z.map(function($){return r.keep(r.clone($))}))};l=function(){var z=r.backend.numDataIds();h=r.tidy(function(){return T(r.backend,I)});var $=Array.isArray(h)?h:[h];return r.shouldCheckForMemLeaks()&&r.checkKernelForMemLeak(p,z,$),$}}var N=e.inputs,D=e.attrs,C=d4(e)?null:e.backwardsFunc,L;return this.scopedRun(function(){return r.state.kernelDepth++},function(){return r.state.kernelDepth--},function(){!r.ENV.getBool("DEBUG")&&!r.state.profiling?n=l():(L=r.profiler.profileKernel(p,N,function(){return l()}),r.ENV.getBool("DEBUG")&&r.profiler.logKernelProfile(L),n=L.outputs)}),s&&this.addTapeNode(p,N,n,C,a,D),this.state.profiling&&this.state.activeProfile.kernels.push({name:p,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(N).map(function(z){return N[z]!=null?N[z].shape:null}),outputShapes:n.map(function(z){return z.shape}),kernelTimeMs:L.timeMs,extraInfo:L.extraInfo}),Array.isArray(h)?n:n[0]},t.prototype.saveTensorsForBackwardMode=function(e){var r=this,n=e.map(function(a){return r.keep(r.clone(a))});return n},t.prototype.getTensorsForGradient=function(e,r,n){var a=S4(e);if(a!=null){var s=a.inputsToSave||[],o=a.outputsToSave||[],u=void 0;a.saveAllInputs?(se(Array.isArray(r),function(){return"saveAllInputs is true, expected inputs to be an array."}),u=Object.keys(r).map(function(h){return r[h]})):u=s.map(function(h){return r[h]});var l=n.filter(function(h,p){return o[p]});return u.concat(l)}return[]},t.prototype.makeTensor=function(e,r,n,a){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",a=a||this.backend;var s=e;n==="string"&&Tl(e[0])&&(s=e.map(function(p){return ry(p)}));var o=a.write(s,r,n),u=new ui(r,n,o,this.nextTensorId());if(this.trackTensor(u,a),n==="string"){var l=this.state.tensorInfo.get(o),h=RU(s);this.state.numBytes+=h-l.bytes,l.bytes=h}return u},t.prototype.makeTensorFromDataId=function(e,r,n,a){n=n||"float32";var s={dataId:e,shape:r,dtype:n};return this.makeTensorFromTensorInfo(s,a)},t.prototype.makeTensorFromTensorInfo=function(e,r){var n=e.dataId,a=e.shape,s=e.dtype,o=new ui(a,s,n,this.nextTensorId());return this.trackTensor(o,r),o},t.prototype.makeVariable=function(e,r,n,a){r===void 0&&(r=!0),n=n||this.nextVariableId().toString(),a!=null&&a!==e.dtype&&(e=e.cast(a));var s=new Wg(e,r,n,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error("Variable with name "+s.name+" was already registered");return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s},t.prototype.trackTensor=function(e,r){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;var n=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(n=e.size*y4(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:r||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof Wg||this.track(e)},t.prototype.incRef=function(e,r){this.trackTensor(e,r),this.backend.incRef(e.dataId)},t.prototype.removeDataId=function(e,r){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===r&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)},t.prototype.disposeTensor=function(e){if(!!this.state.tensorInfo.has(e.dataId)){var r=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=r.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){var n=e.size*y4(e.dtype);this.state.numBytes-=n}r.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,r.backend)}},t.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var r=this.state.registeredVariables[e];this.disposeVariable(r)}},t.prototype.disposeVariable=function(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]},t.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},t.prototype.profile=function(e){return xt(this,void 0,void 0,function(){var r,n,a,s,o,u,l,h,p,v,y;return St(this,function(S){switch(S.label){case 0:return this.state.profiling=!0,r=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],a=this.state.activeProfile,[4,e()];case 1:a.result=S.sent(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,Ir(this.state.activeProfile.kernels.map(function(A){return A.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-r,this.state.activeProfile.newTensors=this.state.numTensors-n,S.label=2;case 2:S.trys.push([2,8,9,10]),s=$a(this.state.activeProfile.kernels),o=s.next(),S.label=3;case 3:return o.done?[3,7]:(u=o.value,l=u,[4,u.kernelTimeMs]);case 4:return l.kernelTimeMs=S.sent(),h=u,[4,u.extraInfo];case 5:h.extraInfo=S.sent(),S.label=6;case 6:return o=s.next(),[3,3];case 7:return[3,10];case 8:return p=S.sent(),v={error:p},[3,10];case 9:try{o&&!o.done&&(y=s.return)&&y.call(s)}finally{if(v)throw v.error}return[7];case 10:return[2,this.state.activeProfile]}})})},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},t.prototype.addTapeNode=function(e,r,n,a,s,o){var u=this,l={id:this.state.nextTapeNodeId++,kernelName:e,inputs:r,outputs:n,saved:s},h=S4(e);h!=null&&(a=h.gradFunc),a!=null&&(l.gradient=function(p){return p=p.map(function(v,y){if(v==null){var S=n[y],A=P2(S.size,S.dtype);return u.makeTensor(A,S.shape,S.dtype)}return v}),a(p.length>1?p:p[0],s,o)}),this.state.activeTape.push(l)},t.prototype.keep=function(e){return e.kept=!0,e},t.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(e){var r={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(r.name=e),this.state.scopeStack.push(r),this.state.activeScope=r},t.prototype.endScope=function(e){for(var r=this,n=Q4(e),a=new Set(n.map(function(l){return l.id})),s=0;s<this.state.activeScope.track.length;s++){var o=this.state.activeScope.track[s];!o.kept&&!a.has(o.id)&&o.dispose()}var u=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(function(l){!l.kept&&l.scopeId===u.id&&r.track(l)})},t.prototype.gradients=function(e,r,n,a){var s=this;if(a===void 0&&(a=!1),se(r.length>0,function(){return"gradients() received an empty list of xs."}),n!=null&&n.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var o=this.scopedRun(function(){return s.startTape()},function(){return s.endTape()},function(){return s.tidy("forward",e)});se(o instanceof ui,function(){return"The result y returned by f() must be a tensor."});var u=ISe(this.state.activeTape,r,o);if(!a&&u.length===0&&r.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var l={};l[o.id]=n==null?jSe(o.shape):n,DSe(l,u,function(p){return s.tidy(p)},USe);var h=r.map(function(p){return l[p.id]});return s.state.gradientDepth===0&&(s.state.activeTape.forEach(function(p){var v,y;try{for(var S=$a(p.saved),A=S.next();!A.done;A=S.next()){var T=A.value;T.dispose()}}catch(I){v={error:I}}finally{try{A&&!A.done&&(y=S.return)&&y.call(S)}finally{if(v)throw v.error}}}),s.state.activeTape=null),{value:o,grads:h}})},t.prototype.customGrad=function(e){var r=this;return se(Dl(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];se(n.every(function(h){return h instanceof ui}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var s,o={};n.forEach(function(h,p){o[p]=h});var u=function(h,p){return s=e.apply(void 0,Ir(n,[p])),se(s.value instanceof ui,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),se(Dl(s.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),s.value},l=function(h,p){var v=s.gradFunc(h,p),y=Array.isArray(v)?v:[v];se(y.length===n.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),se(y.every(function(A){return A instanceof ui}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var S={};return y.forEach(function(A,T){S[T]=function(){return A}}),S};return r.runKernelFunc({forwardFunc:u,backwardsFunc:l,inputs:o})}},t.prototype.readSync=function(e){var r=this.state.tensorInfo.get(e);return r.backend.readSync(e)},t.prototype.read=function(e){var r=this.state.tensorInfo.get(e);return r.backend.read(e)},t.prototype.readToGPU=function(e,r){var n=this.state.tensorInfo.get(e);return n.backend.readToGPU(e,r)},t.prototype.time=function(e){return xt(this,void 0,void 0,function(){var r,n;return St(this,function(a){switch(a.label){case 0:return r=Vg(),[4,this.backend.time(e)];case 1:return n=a.sent(),n.wallMs=Vg()-r,[2,n]}})})},t.prototype.track=function(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new mU;for(var e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t}();eN.nextTensorId=0;eN.nextVariableId=0;function jSe(t){var e=U4(bn(t),"float32");return ve.makeTensor(e,t,"float32")}function OG(){var t=PU();if(t._tfengine==null){var e=new LU(t);t._tfengine=new eN(e)}return Wxe(t._tfengine.ENV),CSe(function(){return t._tfengine}),t._tfengine}var ve=OG();function USe(t,e){var r={a:t,b:e};return ve.runKernel(H4,r)}function VSe(){return typeof navigator!="undefined"&&navigator!=null}var D4;function WSe(t){D4=t}function GSe(t){if(D4!==void 0)return D4;if(t||VSe()){if(t||(t=navigator),t.product==="ReactNative")return!0;var e=t.userAgent||t.vendor||(typeof window!="undefined"?window.opera:"");if(!e){var r=t;return r.userAgentData&&r.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function RG(){return typeof window!="undefined"&&window.document!=null||typeof WorkerGlobalScope!="undefined"}var HSe={__proto__:null,mockIsMobile:WSe,isMobile:GSe,isBrowser:RG};var Hs=Gt();Hs.registerFlag("DEBUG",function(){return!1},function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Hs.registerFlag("IS_BROWSER",function(){return RG()});Hs.registerFlag("IS_NODE",function(){return typeof process!="undefined"&&typeof process.versions!="undefined"&&typeof process.versions.node!="undefined"});Hs.registerFlag("IS_CHROME",function(){return typeof navigator!="undefined"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)});Hs.registerFlag("PROD",function(){return!1});Hs.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Hs.getBool("DEBUG")});Hs.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0});Hs.registerFlag("IS_TEST",function(){return!1});Hs.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",function(){return!0});Hs.registerFlag("WRAP_TO_IMAGEBITMAP",function(){return!1});Hs.registerFlag("ENGINE_COMPILE_ONLY",function(){return!1});function Iu(t,e){var r=t;if(Ji(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];for(var n=[];Array.isArray(r)||Ji(r)&&e!=="string";)n.push(r.length),r=r[0];return Array.isArray(t)&&Gt().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&CG(t,n,[]),n}function CG(t,e,r){if(r=r||[],!Array.isArray(t)&&!Ji(t)){se(e.length===0,function(){return"Element arr["+r.join("][")+"] is a primitive, "+("but should be an array/TypedArray of "+e[0]+" elements")});return}se(e.length>0,function(){return"Element arr["+r.join("][")+"] should be a primitive, "+("but is an array of "+t.length+" elements")}),se(t.length===e[0],function(){return"Element arr["+r.join("][")+"] should have "+e[0]+" "+("elements, but has "+t.length+" elements")});for(var n=e.slice(1),a=0;a<t.length;++a)CG(t[a],n,r.concat(a))}function vU(t,e,r,n){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error("Argument '"+r+"' passed to '"+n+"' must "+("be "+t+" tensor, but got "+e+" tensor"))}}function te(t,e,r,n){if(n===void 0&&(n="numeric"),t instanceof ui)return vU(n,t.dtype,e,r),t;var a=L2(t);if(a!=="string"&&["bool","int32","float32"].indexOf(n)>=0&&(a=n),vU(n,a,e,r),t==null||!Ji(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var s=t==null?"null":t.constructor.name;throw new Error("Argument '"+e+"' passed to '"+r+"' must be a "+("Tensor or TensorLike, but got '"+s+"'"))}var o=Iu(t,a);!Ji(t)&&!Array.isArray(t)&&(t=[t]);var u=!0,l=a!=="string"?q2(t,a):Sh(t,[],u);return ve.makeTensor(l,o,a)}function Gg(t,e,r,n){if(n===void 0&&(n="numeric"),!Array.isArray(t))throw new Error("Argument "+e+" passed to "+r+" must be a `Tensor[]` or `TensorLike[]`");var a=t;return a.map(function(s,o){return te(s,e+"["+o+"]",r,n)})}var FG="__op";function pe(t){var e=Object.keys(t);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+(e.length+" keys."));var r=e[0],n=t[r];r.endsWith("_")&&(r=r.substring(0,r.length-1)),r=r+FG;var a=function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];ve.startScope(r);try{var u=n.apply(void 0,Ir(s));return W4(u)&&console.error("Cannot return a Promise inside of tidy."),ve.endScope(u),u}catch(l){throw ve.endScope(null),l}};return Object.defineProperty(a,"name",{value:r,configurable:!0}),a}function KSe(t,e){var r=te(t,"real","complex"),n=te(e,"imag","complex");la(r.shape,n.shape,"real and imag shapes, "+r.shape+" and "+n.shape+", must match in call to tf.complex().");var a={real:r,imag:n};return ve.runKernel(sV,a)}var Ol=pe({complex_:KSe});function Fl(t,e,r,n){if(n==null&&(n=L2(t)),n==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Ji(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){V4(e);var a=bn(e),s=bn(r);se(a===s,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+(a+" values but has "+s)});for(var o=0;o<r.length;++o){var u=r[o],l=o===r.length-1?u!==bn(e.slice(o)):!0;se(r[o]===e[o]||!l,function(){return"Error creating a new Tensor. Inferred shape "+("("+r+") does not match the provided ")+("shape ("+e+"). ")})}}return!Ji(t)&&!Array.isArray(t)&&(t=[t]),e=e||r,t=n!=="string"?q2(t,n):Sh(t,[],!0),ve.makeTensor(t,e,n)}function Fp(t,e,r){var n=Iu(t,r);return Fl(t,e,n,r)}var O4={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},I2=4;function ZSe(t,e){return xt(this,void 0,void 0,function(){var r,n,a,s,o,u,l=this;return St(this,function(h){switch(h.label){case 0:for(r=[],n=[],a=Array.isArray(t)?t.map(function(p){return p.name}):Object.keys(t),s=function(p){var v=a[p],y=Array.isArray(t)?t[p].tensor:t[v];if(y.dtype!=="float32"&&y.dtype!=="int32"&&y.dtype!=="bool"&&y.dtype!=="string"&&y.dtype!=="complex64")throw new Error("Unsupported dtype in weight '"+v+"': "+y.dtype);var S={name:v,shape:y.shape,dtype:y.dtype};if(y.dtype==="string"){var A=new Promise(function(T){return xt(l,void 0,void 0,function(){var I,N,D,C,L,z,$;return St(this,function(G){switch(G.label){case 0:return[4,y.bytes()];case 1:for(I=G.sent(),N=I.reduce(function(j,K){return j+K.length},0)+I2*I.length,D=new Uint8Array(N),C=0,L=0;L<I.length;L++)z=I[L],$=new Uint8Array(new Uint32Array([z.length]).buffer),D.set($,C),C+=I2,D.set(z,C),C+=z.length;return T(D),[2]}})})});n.push(A)}else n.push(y.data());e!=null&&(S.group=e),r.push(S)},o=0;o<a.length;++o)s(o);return[4,Promise.all(n)];case 1:return u=h.sent(),[2,{data:JSe(u),specs:r}]}})})}function BG(t,e){var r,n,a={},s,o=0;try{for(var u=$a(e),l=u.next();!l.done;l=u.next()){var h=l.value,p=h.name,v=h.dtype,y=h.shape,S=bn(y),A=void 0;if("quantization"in h){var T=h.quantization;if(T.dtype==="uint8"||T.dtype==="uint16"){if(!("min"in T&&"scale"in T))throw new Error("Weight "+h.name+" with quantization "+T.dtype+" doesn't have corresponding metadata min and scale.")}else if(T.dtype==="float16"){if(v!=="float32")throw new Error("Weight "+h.name+" is quantized with "+T.dtype+" "+("which only supports weights of type float32 not "+v+"."))}else throw new Error("Weight "+h.name+" has unknown "+("quantization dtype "+T.dtype+". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");var I=O4[T.dtype],N=t.slice(o,o+S*I),D=T.dtype==="uint8"?new Uint8Array(N):new Uint16Array(N);if(v==="float32")if(T.dtype==="uint8"||T.dtype==="uint16"){A=new Float32Array(D.length);for(var C=0;C<D.length;C++){var L=D[C];A[C]=L*T.scale+T.min}}else if(T.dtype==="float16")s===void 0&&(s=rEe()),A=s(D);else throw new Error("Unsupported quantization type "+T.dtype+" for weight type float32.");else if(v==="int32"){if(T.dtype!=="uint8"&&T.dtype!=="uint16")throw new Error("Unsupported quantization type "+T.dtype+" for weight type int32.");A=new Int32Array(D.length);for(var C=0;C<D.length;C++){var L=D[C];A[C]=Math.round(L*T.scale+T.min)}}else throw new Error("Unsupported dtype in weight '"+p+"': "+v);o+=S*I}else if(v==="string"){var z=bn(h.shape);A=[];for(var C=0;C<z;C++){var $=new Uint32Array(t.slice(o,o+I2))[0];o+=I2;var G=new Uint8Array(t.slice(o,o+$));A.push(G),o+=$}}else{var j=O4[v],N=t.slice(o,o+S*j);if(v==="float32")A=new Float32Array(N);else if(v==="int32")A=new Int32Array(N);else if(v==="bool")A=new Uint8Array(N);else if(v==="complex64"){A=new Float32Array(N);for(var K=new Float32Array(A.length/2),M=new Float32Array(A.length/2),C=0;C<K.length;C++)K[C]=A[C*2],M[C]=A[C*2+1];var f=Fp(K,y,"float32"),d=Fp(M,y,"float32");a[p]=Ol(f,d),f.dispose(),d.dispose()}else throw new Error("Unsupported dtype in weight '"+p+"': "+v);o+=S*j}v!=="complex64"&&(a[p]=Fp(A,y,v))}}catch(g){r={error:g}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return a}function JSe(t){if(t===null)throw new Error("Invalid input value: "+JSON.stringify(t));var e=0,r=[];t.forEach(function(s){if(e+=s.byteLength,r.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+s.constructor.name)});var n=new Uint8Array(e),a=0;return r.forEach(function(s){n.set(new Uint8Array(s.buffer),a),a+=s.byteLength}),n.buffer}var tN=typeof Buffer!="undefined"&&(typeof Blob=="undefined"||typeof atob=="undefined"||typeof btoa=="undefined");function gU(t){return tN?Buffer.byteLength(t):new Blob([t]).size}function YSe(t){if(tN)return Buffer.from(t).toString("base64");for(var e=new Uint8Array(t),r="",n=0,a=e.length;n<a;n++)r+=String.fromCharCode(e[n]);return btoa(r)}function XSe(t){if(tN){var e=Buffer.from(t,"base64");return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}for(var r=atob(t),n=new Uint8Array(r.length),a=0;a<r.length;++a)n.set([r.charCodeAt(a)],a);return n.buffer}function rN(t){if(t.length===1)return t[0];var e=0;t.forEach(function(a){e+=a.byteLength});var r=new Uint8Array(e),n=0;return t.forEach(function(a){r.set(new Uint8Array(a),n),n+=a.byteLength}),r.buffer}function yU(t){var e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);var r=t.split(e);return r[r.length-1]}function LG(t,e){var r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),r}function nN(t,e){return xt(this,void 0,void 0,function(){var r,n,a,s;return St(this,function(o){switch(o.label){case 0:return r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest==null?[3,2]:[4,e(t.weightsManifest)];case 1:n=wt.apply(void 0,[o.sent(),2]),a=n[0],s=n[1],r.weightSpecs=a,r.weightData=s,o.label=2;case 2:return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),[2,r]}})})}function ny(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:gU(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:gU(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}function QSe(){var t=function(n){for(var a=n<<13,s=0;(a&8388608)===0;)s-=8388608,a<<=1;return a&=-8388609,s+=947912704,a|s},e=new Uint32Array(2048);e[0]=0;for(var r=1;r<1024;r++)e[r]=t(r);for(var r=1024;r<2048;r++)e[r]=939524096+(r-1024<<13);return e}function eEe(){var t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(var e=1;e<31;e++)t[e]=e<<23;for(var e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function tEe(){for(var t=new Uint32Array(64),e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function rEe(){var t=QSe(),e=eEe(),r=tEe();return function(n){for(var a=new ArrayBuffer(4*n.length),s=new Uint32Array(a),o=0;o<n.length;o++){var u=n[o],l=t[r[u>>10]+(u&1023)]+e[u>>10];s[o]=l}return new Float32Array(a)}}var ss=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e,r){return t.getHandlers(e,"load",r)},t.getHandlers=function(e,r,n){var a=[],s=r==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters;return s.forEach(function(o){var u=o(e,n);u!==null&&a.push(u)}),a},t}(),nEe=function(t){return ss.registerSaveRouter(t)},iEe=function(t){return ss.registerLoadRouter(t)},aEe=function(t){return ss.getSaveHandlers(t)},sEe=function(t,e){return ss.getLoadHandlers(t,e)},R4="tensorflowjs",C4=1,bh="models_store",Nl="model_info_store";function PG(){if(!Gt().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=typeof window=="undefined"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function F4(t){var e=t.result;e.createObjectStore(bh,{keyPath:"modelPath"}),e.createObjectStore(Nl,{keyPath:"modelPath"})}var Eh=function(){function t(e){if(this.indexedDB=PG(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return t.prototype.save=function(e){return xt(this,void 0,void 0,function(){return St(this,function(r){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},t.prototype.load=function(){return xt(this,void 0,void 0,function(){return St(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(e,r){var n=this;return new Promise(function(a,s){var o=n.indexedDB.open(R4,C4);o.onupgradeneeded=function(){return F4(o)},o.onsuccess=function(){var u=o.result;if(r==null){var l=u.transaction(bh,"readonly"),h=l.objectStore(bh),p=h.get(n.modelPath);p.onsuccess=function(){if(p.result==null)return u.close(),s(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));a(p.result.modelArtifacts)},p.onerror=function(I){return u.close(),s(p.error)},l.oncomplete=function(){return u.close()}}else{var v=ny(r),y=u.transaction(Nl,"readwrite"),S=y.objectStore(Nl),A=S.put({modelPath:n.modelPath,modelArtifactsInfo:v}),T;A.onsuccess=function(){T=u.transaction(bh,"readwrite");var I=T.objectStore(bh),N=I.put({modelPath:n.modelPath,modelArtifacts:r,modelArtifactsInfo:v});N.onsuccess=function(){return a({modelArtifactsInfo:v})},N.onerror=function(D){S=y.objectStore(Nl);var C=S.delete(n.modelPath);C.onsuccess=function(){return u.close(),s(N.error)},C.onerror=function(L){return u.close(),s(N.error)}}},A.onerror=function(I){return u.close(),s(A.error)},y.oncomplete=function(){T==null?u.close():T.oncomplete=function(){return u.close()}}}},o.onerror=function(u){return s(o.error)}})},t}();Eh.URL_SCHEME="indexeddb://";var qG=function(t){return Gt().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Eh.URL_SCHEME)?oEe(t.slice(Eh.URL_SCHEME.length)):null};ss.registerSaveRouter(qG);ss.registerLoadRouter(qG);function oEe(t){return new Eh(t)}function uEe(t){return t.startsWith(Eh.URL_SCHEME)?t.slice(Eh.URL_SCHEME.length):t}var fEe=function(){function t(){this.indexedDB=PG()}return t.prototype.listModels=function(){return xt(this,void 0,void 0,function(){var e=this;return St(this,function(r){return[2,new Promise(function(n,a){var s=e.indexedDB.open(R4,C4);s.onupgradeneeded=function(){return F4(s)},s.onsuccess=function(){var o=s.result,u=o.transaction(Nl,"readonly"),l=u.objectStore(Nl),h=l.getAll();h.onsuccess=function(){var p,v,y={};try{for(var S=$a(h.result),A=S.next();!A.done;A=S.next()){var T=A.value;y[T.modelPath]=T.modelArtifactsInfo}}catch(I){p={error:I}}finally{try{A&&!A.done&&(v=S.return)&&v.call(S)}finally{if(p)throw p.error}}n(y)},h.onerror=function(p){return o.close(),a(h.error)},u.oncomplete=function(){return o.close()}},s.onerror=function(o){return a(s.error)}})]})})},t.prototype.removeModel=function(e){return xt(this,void 0,void 0,function(){var r=this;return St(this,function(n){return e=uEe(e),[2,new Promise(function(a,s){var o=r.indexedDB.open(R4,C4);o.onupgradeneeded=function(){return F4(o)},o.onsuccess=function(){var u=o.result,l=u.transaction(Nl,"readwrite"),h=l.objectStore(Nl),p=h.get(e),v;p.onsuccess=function(){if(p.result==null)return u.close(),s(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var y=h.delete(e),S=function(){v=u.transaction(bh,"readwrite");var A=v.objectStore(bh),T=A.delete(e);T.onsuccess=function(){return a(p.result.modelArtifactsInfo)},T.onerror=function(I){return s(p.error)}};y.onsuccess=S,y.onerror=function(A){return S(),u.close(),s(p.error)}},p.onerror=function(y){return u.close(),s(p.error)},l.oncomplete=function(){v==null?u.close():v.oncomplete=function(){return u.close()}}},o.onerror=function(u){return s(o.error)}})]})})},t}(),df="/",Op="tensorflowjs_models",$G="info",lEe="model_topology",cEe="weight_specs",hEe="weight_data",dEe="model_metadata";function zG(t){return{info:[Op,t,$G].join(df),topology:[Op,t,lEe].join(df),weightSpecs:[Op,t,cEe].join(df),weightData:[Op,t,hEe].join(df),modelMetadata:[Op,t,dEe].join(df)}}function jG(t){var e,r;try{for(var n=$a(Object.values(t)),a=n.next();!a.done;a=n.next()){var s=a.value;window.localStorage.removeItem(s)}}catch(o){e={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}}function pEe(t){var e=t.split(df);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(df)}function mEe(t){return t.startsWith(Mh.URL_SCHEME)?t.slice(Mh.URL_SCHEME.length):t}var Mh=function(){function t(e){if(!Gt().getBool("IS_BROWSER")||typeof window=="undefined"||typeof window.localStorage=="undefined")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=zG(this.modelPath)}return t.prototype.save=function(e){return xt(this,void 0,void 0,function(){var r,n,a,s;return St(this,function(o){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");r=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),a=ny(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,YSe(e.weightData)),s={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(s)),[2,{modelArtifactsInfo:a}]}catch{throw jG(this.keys),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: "+("modelTopologyBytes="+a.modelTopologyBytes+", ")+("weightSpecsBytes="+a.weightSpecsBytes+", ")+("weightDataBytes="+a.weightDataBytes+"."))}return[2]})})},t.prototype.load=function(){return xt(this,void 0,void 0,function(){var e,r,n,a,s,o,u;return St(this,function(l){if(e=JSON.parse(this.LS.getItem(this.keys.info)),e==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(r={},n=JSON.parse(this.LS.getItem(this.keys.topology)),n==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(r.modelTopology=n,a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)),a==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(r.weightSpecs=a,s=this.LS.getItem(this.keys.modelMetadata),s!=null&&(o=JSON.parse(s),r.format=o.format,r.generatedBy=o.generatedBy,r.convertedBy=o.convertedBy,o.signature!=null&&(r.signature=o.signature),o.userDefinedMetadata!=null&&(r.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(r.modelInitializer=o.modelInitializer),o.trainingConfig!=null&&(r.trainingConfig=o.trainingConfig)),u=this.LS.getItem(this.keys.weightData),u==null)throw new Error("In local storage, the binary weight values of model "+("'"+this.modelPath+"' are missing."));return r.weightData=XSe(u),[2,r]})})},t}();Mh.URL_SCHEME="localstorage://";var UG=function(t){return Gt().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Mh.URL_SCHEME)?vEe(t.slice(Mh.URL_SCHEME.length)):null};ss.registerSaveRouter(UG);ss.registerLoadRouter(UG);function vEe(t){return new Mh(t)}var gEe=function(){function t(){se(Gt().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),se(typeof window=="undefined"||typeof window.localStorage!="undefined",function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return xt(this,void 0,void 0,function(){var e,r,n,a,s,o;return St(this,function(u){for(e={},r=Op+df,n=df+$G,a=0;a<this.LS.length;++a)s=this.LS.key(a),s.startsWith(r)&&s.endsWith(n)&&(o=pEe(s),e[o]=JSON.parse(this.LS.getItem(s)));return[2,e]})})},t.prototype.removeModel=function(e){return xt(this,void 0,void 0,function(){var r,n;return St(this,function(a){if(e=mEe(e),r=zG(e),this.LS.getItem(r.info)==null)throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(r.info)),jG(r),[2,n]})})},t}(),Bp="://",Rl=function(){function t(){this.managers={}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerManager=function(e,r){se(e!=null,function(){return"scheme must not be undefined or null."}),e.endsWith(Bp)&&(e=e.slice(0,e.indexOf(Bp))),se(e.length>0,function(){return"scheme must not be an empty string."});var n=t.getInstance();se(n.managers[e]==null,function(){return"A model store manager is already registered for scheme '"+e+"'."}),n.managers[e]=r},t.getManager=function(e){var r=t.getInstance().managers[e];if(r==null)throw new Error("Cannot find model manager for scheme '"+e+"'");return r},t.getSchemes=function(){return Object.keys(t.getInstance().managers)},t}();function _2(t){if(t.indexOf(Bp)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+(""+Rl.getSchemes().join(",")));return{scheme:t.split(Bp)[0],path:t.split(Bp)[1]}}function VG(t,e,r){return r===void 0&&(r=!1),xt(this,void 0,void 0,function(){var n,a,s,o,u,l,h,p,v;return St(this,function(y){switch(y.label){case 0:return se(t!==e,function(){return"Old path and new path are the same: '"+t+"'"}),n=ss.getLoadHandlers(t),se(n.length>0,function(){return"Copying failed because no load handler is found for source URL "+t+"."}),se(n.length<2,function(){return"Copying failed because more than one ("+n.length+") "+("load handlers for source URL "+t+".")}),a=n[0],s=ss.getSaveHandlers(e),se(s.length>0,function(){return"Copying failed because no save handler is found for destination "+("URL "+e+".")}),se(s.length<2,function(){return"Copying failed because more than one ("+n.length+") "+("save handlers for destination URL "+e+".")}),o=s[0],u=_2(t).scheme,l=_2(t).path,h=u===_2(t).scheme,[4,a.load()];case 1:return p=y.sent(),r&&h?[4,Rl.getManager(u).removeModel(l)]:[3,3];case 2:y.sent(),y.label=3;case 3:return[4,o.save(p)];case 4:return v=y.sent(),r&&!h?[4,Rl.getManager(u).removeModel(l)]:[3,6];case 5:y.sent(),y.label=6;case 6:return[2,v.modelArtifactsInfo]}})})}function yEe(){return xt(this,void 0,void 0,function(){var t,e,r,n,a,s,o,u,l,h,p;return St(this,function(v){switch(v.label){case 0:t=Rl.getSchemes(),e={},v.label=1;case 1:v.trys.push([1,6,7,8]),r=$a(t),n=r.next(),v.label=2;case 2:return n.done?[3,5]:(a=n.value,[4,Rl.getManager(a).listModels()]);case 3:s=v.sent();for(o in s)u=a+Bp+o,e[u]=s[o];v.label=4;case 4:return n=r.next(),[3,2];case 5:return[3,8];case 6:return l=v.sent(),h={error:l},[3,8];case 7:try{n&&!n.done&&(p=r.return)&&p.call(r)}finally{if(h)throw h.error}return[7];case 8:return[2,e]}})})}function bEe(t){return xt(this,void 0,void 0,function(){var e,r;return St(this,function(n){return e=_2(t),r=Rl.getManager(e.scheme),[2,r.removeModel(e.path)]})})}function wEe(t,e){return xt(this,void 0,void 0,function(){var r;return St(this,function(n){return r=!1,[2,VG(t,e,r)]})})}function _Ee(t,e){return xt(this,void 0,void 0,function(){var r;return St(this,function(n){return r=!0,[2,VG(t,e,r)]})})}var xEe=function(){function t(){}return t.prototype.fetch=function(e,r){return fetch(e,r)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(e,r){if(r!=="utf-8"&&r!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+r);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},t.prototype.decode=function(e,r){return new TextDecoder(r).decode(e)},t}();if(Gt().get("IS_BROWSER")){Gt().setPlatform("browser",new xEe);try{Rl.registerManager(Mh.URL_SCHEME,new gEe)}catch{}try{Rl.registerManager(Eh.URL_SCHEME,new fEe)}catch{}}var SEe={importFetch:function(){return sU()}},p4,EEe=function(){function t(){this.util=uu(),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(e,r){return Gt().global.fetch!=null?Gt().global.fetch(e,r):(p4==null&&(p4=SEe.importFetch()),p4(e,r))},t.prototype.now=function(){var e=process.hrtime();return e[0]*1e3+e[1]/1e6},t.prototype.encode=function(e,r){if(r!=="utf-8"&&r!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+r);return this.textEncoder.encode(e)},t.prototype.decode=function(e,r){return e.length===0?"":new this.util.TextDecoder(r).decode(e)},t}();Gt().get("IS_NODE")&&!Gt().get("IS_BROWSER")&&Gt().setPlatform("node",new EEe);function mf(t,e,r){return e===void 0&&(e="float32"),e=e||"float32",V4(t),new N2(t,e,r)}function MEe(t,e){var r=te(t,"x","cast");if(!OU(e))throw new Error("Failed to cast to unknown dtype "+e);if(e==="string"&&r.dtype!=="string"||e!=="string"&&r.dtype==="string")throw new Error("Only strings can be casted to strings");var n={x:r},a={dtype:e};return ve.runKernel(K4,n,a)}var Vn=pe({cast_:MEe});function AEe(t){var e=te(t,"x","clone","string_or_numeric"),r={x:e};return ve.runKernel(Z4,r)}var _h=pe({clone_:AEe});function WG(t,e){e===void 0&&(e=!1),console.log(t.toString(e))}OG();var kEe={buffer:mf,cast:Vn,clone:_h,print:WG};FSe(kEe);var TEe="model",NEe=".json",IEe=".weights.bin";function bU(t){return new Promise(function(e){return setTimeout(e)}).then(t)}var D2=function(){function t(e){if(!Gt().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),(e==null||e.length===0)&&(e=TEe),this.modelJsonFileName=e+NEe,this.weightDataFileName=e+IEe}return t.prototype.save=function(e){return xt(this,void 0,void 0,function(){var r,n,a,s,o,u;return St(this,function(l){switch(l.label){case 0:if(typeof document=="undefined")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(r=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a=LG(e,n),s=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor,o.download=this.modelJsonFileName,o.href=s,[4,bU(function(){return o.dispatchEvent(new MouseEvent("click"))})];case 2:return l.sent(),e.weightData==null?[3,4]:(u=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor,u.download=this.weightDataFileName,u.href=r,[4,bU(function(){return u.dispatchEvent(new MouseEvent("click"))})]);case 3:l.sent(),l.label=4;case 4:return[2,{modelArtifactsInfo:ny(e)}]}})})},t}();D2.URL_SCHEME="downloads://";var DEe=function(){function t(e){if(e==null||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+("but received "+e));this.jsonFile=e[0],this.weightsFiles=e.slice(1)}return t.prototype.load=function(){return xt(this,void 0,void 0,function(){var e=this;return St(this,function(r){return[2,new Promise(function(n,a){var s=new FileReader;s.onload=function(o){var u=JSON.parse(o.target.result),l=u.modelTopology;if(l==null){a(new Error("modelTopology field is missing from file "+e.jsonFile.name));return}var h=u.weightsManifest;if(h==null){a(new Error("weightManifest field is missing from file "+e.jsonFile.name));return}if(e.weightsFiles.length===0){n({modelTopology:l});return}var p=nN(u,function(v){return e.loadWeights(v)});n(p)},s.onerror=function(o){return a("Failed to read model topology and weights manifest JSON "+("from file '"+e.jsonFile.name+"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},s.readAsText(e.jsonFile)})]})})},t.prototype.loadWeights=function(e){var r,n,a=this,s=[],o=[];try{for(var u=$a(e),l=u.next();!l.done;l=u.next()){var h=l.value;s.push.apply(s,Ir(h.weights)),o.push.apply(o,Ir(h.paths))}}catch(y){r={error:y}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}var p=this.checkManifestAndWeightFiles(e),v=o.map(function(y){return a.loadWeightsFile(y,p[y])});return Promise.all(v).then(function(y){return[s,rN(y)]})},t.prototype.loadWeightsFile=function(e,r){return new Promise(function(n,a){var s=new FileReader;s.onload=function(o){var u=o.target.result;n(u)},s.onerror=function(o){return a("Failed to weights data from file of path '"+e+"'.")},s.readAsArrayBuffer(r)})},t.prototype.checkManifestAndWeightFiles=function(e){var r,n,a=this,s=[],o=this.weightsFiles.map(function(v){return yU(v.name)}),u={};try{for(var l=$a(e),h=l.next();!h.done;h=l.next()){var p=h.value;p.paths.forEach(function(v){var y=yU(v);if(s.indexOf(y)!==-1)throw new Error("Duplicate file basename found in weights manifest: "+("'"+y+"'"));if(s.push(y),o.indexOf(y)===-1)throw new Error("Weight file with basename '"+y+"' is not provided.");u[v]=a.weightsFiles[o.indexOf(y)]})}}catch(v){r={error:v}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}if(s.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+("("+s.length+") and the number of weight files provided ")+("("+this.weightsFiles.length+")."));return u},t}(),OEe=function(t){return Gt().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(D2.URL_SCHEME)?REe(t.slice(D2.URL_SCHEME.length)):null};ss.registerSaveRouter(OEe);function REe(t){return t===void 0&&(t="model"),new D2(t)}function CEe(t){return new DEe(t)}function wU(t,e,r,n){o(t),r=r==null?0:r,n=n==null?1:n,u(r,n);var a=0,s=function(l){return l.then(function(h){var p=r+ ++a/t.length*(n-r);return e(p),h}),l};function o(l){se(l!=null&&Array.isArray(l)&&l.length>0,function(){return"promises must be a none empty array"})}function u(l,h){se(l>=0&&l<=1,function(){return"Progress fraction must be in range [0, 1], but "+("got startFraction "+l)}),se(h>=0&&h<=1,function(){return"Progress fraction must be in range [0, 1], but "+("got endFraction "+h)}),se(h>=l,function(){return"startFraction must be no more than endFraction, but "+("got startFraction "+l+" and endFraction ")+(""+h)})}return Promise.all(t.map(s))}function GG(t,e){return xt(this,void 0,void 0,function(){var r,n,a,s,o,u,l,h,p,v,y;return St(this,function(S){switch(S.label){case 0:return e==null&&(e={}),r=e.fetchFunc==null?Gt().platform.fetch:e.fetchFunc,n=t.map(function(A){return r(A,e.requestInit,{isBinary:!0})}),a=0,s=.5,e.onProgress!=null?[3,2]:[4,Promise.all(n)];case 1:return u=S.sent(),[3,4];case 2:return[4,wU(n,e.onProgress,a,s)];case 3:u=S.sent(),S.label=4;case 4:return o=u,l=o.map(function(A){return A.arrayBuffer()}),h=.5,p=1,e.onProgress!=null?[3,6]:[4,Promise.all(l)];case 5:return y=S.sent(),[3,8];case 6:return[4,wU(l,e.onProgress,h,p)];case 7:y=S.sent(),S.label=8;case 8:return v=y,[2,v]}})})}function FEe(t,e,r,n){return e===void 0&&(e=""),xt(this,void 0,void 0,function(){var a,s;return St(this,function(o){return a=function(u){return GG(u,{requestInit:n})},s=HG(a),[2,s(t,e,r)]})})}function HG(t){var e=this;return function(r,n,a){return n===void 0&&(n=""),xt(e,void 0,void 0,function(){var s,o,u,l,h,p,v,y,S,A;return St(this,function(T){switch(T.label){case 0:if(s=r.map(function(){return!1}),o={},u=a!=null?a.map(function(){return!1}):[],l=[],r.forEach(function(I,N){var D=0;I.weights.forEach(function(C){var L="quantization"in C?C.quantization.dtype:C.dtype,z=O4[L]*bn(C.shape),$=function(){s[N]=!0,o[N]==null&&(o[N]=[]),o[N].push({manifestEntry:C,groupOffset:D,sizeBytes:z})};a!=null?a.forEach(function(G,j){G===C.name&&($(),u[j]=!0)}):$(),l.push(C.name),D+=z})}),!u.every(function(I){return I}))throw h=a.filter(function(I,N){return!u[N]}),new Error("Could not find weights in manifest with names: "+(h.join(", ")+`. 
`)+"Manifest JSON has weights with names: "+(l.join(", ")+"."));return p=s.reduce(function(I,N,D){return N&&I.push(D),I},[]),v=[],p.forEach(function(I){r[I].paths.forEach(function(N){var D=n+(n.endsWith("/")?"":"/")+N;v.push(D)})}),[4,t(v)];case 1:return y=T.sent(),S={},A=0,p.forEach(function(I){for(var N=r[I].paths.length,D=0,C=0;C<N;C++)D+=y[A+C].byteLength;for(var L=new ArrayBuffer(D),z=new Uint8Array(L),$=0,G=0;G<N;G++){var j=new Uint8Array(y[A+G]);z.set(j,$),$+=j.byteLength}var K=o[I];K.forEach(function(M){var f=L.slice(M.groupOffset,M.groupOffset+M.sizeBytes),d=BG(f,[M.manifestEntry]);for(var g in d)S[g]=d[g]}),A+=N}),[2,S]}})})}}var BEe="application/octet-stream",LEe="application/json",iN=function(){function t(e,r){if(this.DEFAULT_METHOD="POST",r==null&&(r={}),this.weightPathPrefix=r.weightPathPrefix,this.onProgress=r.onProgress,this.weightUrlConverter=r.weightUrlConverter,r.fetchFunc!=null?(se(typeof r.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=r.fetchFunc):this.fetch=Gt().platform.fetch,se(e!=null&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&se(e.length===2,function(){return"URL paths for http must have a length of 2, "+("(actual length is "+e.length+").")}),this.path=e,r.requestInit!=null&&r.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=r.requestInit||{}}return t.prototype.save=function(e){return xt(this,void 0,void 0,function(){var r,n,a,s;return St(this,function(o){switch(o.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return r=Object.assign({method:this.DEFAULT_METHOD},this.requestInit),r.body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],a=LG(e,n),r.body.append("model.json",new Blob([JSON.stringify(a)],{type:LEe}),"model.json"),e.weightData!=null&&r.body.append("model.weights.bin",new Blob([e.weightData],{type:BEe}),"model.weights.bin"),[4,this.fetch(this.path,r)];case 1:if(s=o.sent(),s.ok)return[2,{modelArtifactsInfo:ny(e),responses:[s]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+(s.status+"."))}})})},t.prototype.load=function(){return xt(this,void 0,void 0,function(){var e,r,n,a,s,o=this;return St(this,function(u){switch(u.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(e=u.sent(),!e.ok)throw new Error("Request to "+this.path+" failed with status code "+(e.status+". Please verify this URL points to ")+"the model JSON of the model to load.");u.label=2;case 2:return u.trys.push([2,4,,5]),[4,e.json()];case 3:return r=u.sent(),[3,5];case 4:throw u.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(a=r.modelTopology,s=r.weightsManifest,a==null&&s==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return[2,nN(r,function(l){return o.loadWeights(l)})]}})})},t.prototype.loadWeights=function(e){return xt(this,void 0,void 0,function(){var r,n,a,s,o,u,l,h,p,v,y,S,A,T,I,N,D,C,L,z,$,G,j,K,M,f,d;return St(this,function(g){switch(g.label){case 0:r=Array.isArray(this.path)?this.path[1]:this.path,n=wt(PEe(r),2),a=n[0],s=n[1],o=this.weightPathPrefix||a,u=[];try{for(l=$a(e),h=l.next();!h.done;h=l.next())p=h.value,u.push.apply(u,Ir(p.weights))}catch(m){G={error:m}}finally{try{h&&!h.done&&(j=l.return)&&j.call(l)}finally{if(G)throw G.error}}v=[],y=[];try{for(S=$a(e),A=S.next();!A.done;A=S.next()){T=A.value;try{for(I=(f=void 0,$a(T.paths)),N=I.next();!N.done;N=I.next())D=N.value,this.weightUrlConverter!=null?y.push(this.weightUrlConverter(D)):v.push(o+D+s)}catch(m){f={error:m}}finally{try{N&&!N.done&&(d=I.return)&&d.call(I)}finally{if(f)throw f.error}}}}catch(m){K={error:m}}finally{try{A&&!A.done&&(M=S.return)&&M.call(S)}finally{if(K)throw K.error}}return this.weightUrlConverter?(L=(C=v.push).apply,z=[v],[4,Promise.all(y)]):[3,2];case 1:L.apply(C,z.concat([Ir.apply(void 0,[g.sent()])])),g.label=2;case 2:return[4,GG(v,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 3:return $=g.sent(),[2,[u,rN($)]]}})})},t}();iN.URL_SCHEME_REGEX=/^https?:\/\//;function PEe(t){var e=t.lastIndexOf("/"),r=t.lastIndexOf("?"),n=t.substring(0,e),a=r>e?t.substring(r):"";return[n+"/",a]}function B4(t){return t.match(iN.URL_SCHEME_REGEX)!=null}var KG=function(t,e){if(typeof fetch=="undefined"&&(e==null||e.fetchFunc==null))return null;var r=!0;return Array.isArray(t)?r=t.every(function(n){return B4(n)}):r=B4(t),r?aN(t,e):null};ss.registerSaveRouter(KG);ss.registerLoadRouter(KG);function aN(t,e){return new iN(t,e)}function qEe(t,e){return aN(t,e)}var m4=function(){function t(e){this.modelArtifacts=e}return t.prototype.load=function(){return this.modelArtifacts},t}(),ZG=function(){function t(e){this.saveHandler=e}return t.prototype.save=function(e){return this.saveHandler(e)},t}(),$Ee=function(){function t(e){e.load&&(this.load=function(){return Promise.resolve(e.load())}),e.save&&(this.save=function(r){return Promise.resolve(e.save(r))})}return t}();function zEe(t,e,r,n){var a=arguments;return new $Ee(JG.apply(void 0,Ir(a)))}function JG(t,e,r,n){if(arguments.length===1){var a=t.modelTopology!=null||t.weightSpecs!=null;return a?new m4(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new m4({modelTopology:t}))}else return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new m4({modelTopology:t,weightSpecs:e,weightData:r,trainingConfig:n})}function jEe(t){return new ZG(t)}function UEe(t){return new ZG(t)}var VEe={__proto__:null,browserFiles:CEe,browserHTTPRequest:qEe,concatenateArrayBuffers:rN,decodeWeights:BG,encodeWeights:ZSe,fromMemory:zEe,fromMemorySync:JG,getLoadHandlers:sEe,getModelArtifactsForJSON:nN,getModelArtifactsInfoForJSON:ny,getSaveHandlers:aEe,http:aN,isHTTPScheme:B4,loadWeights:FEe,registerLoadRouter:iEe,registerSaveRouter:nEe,weightsLoaderFactory:HG,withSaveHandler:jEe,withSaveHandlerSync:UEe,copyModel:wEe,listModels:yEe,moveModel:_Ee,removeModel:bEe};function WEe(t,e,r,n){var a;r===void 0&&(r=!1),n===void 0&&(n=!1);var s=te(t,"a","matMul"),o=te(e,"b","matMul");a=wt(Rn(s,o),2),s=a[0],o=a[1];var u={a:s,b:o},l={transposeA:r,transposeB:n};return ve.runKernel(eV,u,l)}var Fr=pe({matMul_:WEe});function GEe(t,e,r,n){if(r===void 0&&(r=1),n===void 0&&(n=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var a=te(t,"indices","oneHot","int32"),s={indices:a},o={depth:e,onValue:r,offValue:n};return ve.runKernel(SW,s,o)}var L4=pe({oneHot_:GEe});function HEe(){Gt().set("PROD",!0)}function KEe(){Gt().set("DEBUG",!0)}function ZEe(){Gt().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function JEe(t){Gt().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function YEe(){ve.disposeVariables()}function XEe(){return ve}function QEe(){return ve.memory()}function e3e(t){return ve.profile(t)}function fi(t,e){return ve.tidy(t,e)}function Sa(t){var e=Q4(t);e.forEach(function(r){return r.dispose()})}function YG(t){return ve.keep(t)}function t3e(t){return ve.time(t)}function r3e(t){return ve.setBackend(t)}function n3e(){return ve.ready()}function i3e(){return ve.backendName}function a3e(t){ve.removeBackend(t)}function s3e(t){return ve.findBackend(t)}function o3e(t){return ve.findBackendFactory(t)}function u3e(t,e,r){return r===void 0&&(r=1),ve.registerBackend(t,e,r)}function f3e(){return ve.backend}function l3e(t,e){Gt().setPlatform(t,e)}function c3e(t){var e=te(t,"input","imag"),r={input:e};return ve.runKernel(WV,r)}var z2=pe({imag_:c3e});function h3e(t){var e=te(t,"x","neg"),r={x:e};return ve.runKernel(gW,r)}var pf=pe({neg_:h3e});function d3e(t){var e=te(t,"input","real"),r={input:e};return ve.runKernel(IW,r)}var Hg=pe({real_:d3e});function p3e(t,e,r){var n=te(t,"x","transpose");if(e==null&&(e=n.shape.map(function(o,u){return u}).reverse()),se(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" "+("must match length of perm "+e+".")}),e.forEach(function(o){se(o>=0&&o<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+(" but got "+e)})}),n.rank<=1)return n.clone();var a={x:n},s={perm:e};return n.dtype==="complex64"?fi(function(){var o=Hg(n),u=z2(n);return o=ve.runKernel(b2,{x:o},s),u=ve.runKernel(b2,{x:u},s),r&&(u=pf(u)),Ol(o,u)}):ve.runKernel(b2,a,s)}var O2=pe({transpose_:p3e});function m3e(t,e,r){var n=te(t,"labels","confusionMatrix"),a=te(e,"predictions","confusionMatrix");se(r==null||r>0&&Number.isInteger(r),function(){return"If provided, numClasses must be a positive integer, "+("but got "+r)}),se(n.rank===1,function(){return"Expected the rank of labels to be 1, but got "+n.rank}),se(a.rank===1,function(){return"Expected the rank of predictions to be 1, "+("but got "+a.rank)}),se(n.shape[0]===a.shape[0],function(){return"Mismatch in the number of examples: "+(n.shape[0]+" vs. "+a.shape[0]+". ")+"Labels and predictions should have the same number of elements."}),se(r>0&&Number.isInteger(r),function(){return"numClasses is required to be a positive integer, but got "+(""+r)});var s=L4(Vn(n,"int32"),r),o=L4(Vn(a,"int32"),r),u=O2(s),l=Fr(u,o);return Vn(l,"int32")}var v3e=pe({confusionMatrix_:m3e});var g3e={__proto__:null,confusionMatrix:v3e};function XG(t,e){for(var r=t.length,n=[],a=0;a<r;a++){var s=r-1-a,o=t[s]||1,u=e[e.length-1-a]||1;u>1&&o===1&&n.unshift(s)}return n}function sN(t,e){for(var r=[],n=0;n<e.length;n++){var a=t[t.length-n-1],s=e.length-n-1,o=e[s];(a==null||a===1&&o>1)&&r.unshift(s)}return r}function li(t,e){for(var r=[],n=Math.max(t.length,e.length),a=0;a<n;a++){var s=t[t.length-a-1];s==null&&(s=1);var o=e[e.length-a-1];if(o==null&&(o=1),s===1)r.unshift(o);else if(o===1)r.unshift(s);else if(s!==o){var u="Operands could not be broadcast together with shapes "+(t+" and "+e+".");throw Error(u)}else r.unshift(s)}return r}var y3e={__proto__:null,getBroadcastDims:XG,getReductionAxes:sN,assertAndGetBroadcastShape:li};function QG(t,e,r){if(Th(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var n=Iu(t,r);if(n.length!==3&&n.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(n.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Fl(t,e,n,r)}var ph;function eH(t,e){if(e===void 0&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var r=!1,n=!1,a=!1,s=!1,o=!1,u=!1;if(t.data instanceof Uint8Array)r=!0;else if(typeof ImageData!="undefined"&&t instanceof ImageData)n=!0;else if(typeof HTMLVideoElement!="undefined"&&t instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement!="undefined"&&t instanceof HTMLImageElement)s=!0;else if(t.getContext!=null)o=!0;else if(typeof ImageBitmap!="undefined"&&t instanceof ImageBitmap)u=!0;else throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+("but was "+t.constructor.name));if(a){var l=2;if(a&&t.readyState<l)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}var h=M2(b4,ve.backendName);if(h!=null){var p={pixels:t},v={numChannels:e};return ve.runKernel(b4,p,v)}var y=wt(a?[t.videoWidth,t.videoHeight]:[t.width,t.height],2),S=y[0],A=y[1],T;if(o)T=t.getContext("2d").getImageData(0,0,S,A).data;else if(n||r)T=t.data;else if(s||a||u){if(ph==null)if(typeof document=="undefined")if(typeof OffscreenCanvas!="undefined"&&typeof OffscreenCanvasRenderingContext2D!="undefined")ph=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else ph=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});ph.canvas.width=S,ph.canvas.height=A,ph.drawImage(t,0,0,S,A),T=ph.getImageData(0,0,S,A).data}var I;if(e===4)I=new Int32Array(T);else{var N=S*A;I=new Int32Array(N*e);for(var D=0;D<N;D++)for(var C=0;C<e;++C)I[D*e+C]=T[D*4+C]}var L=[A,S,e];return QG(I,L,"int32")}function b3e(t){return t!=null&&t.data instanceof Uint8Array}function w3e(){return typeof window!="undefined"&&typeof ImageBitmap!="undefined"&&window.hasOwnProperty("createImageBitmap")}function _3e(t){return t!=null&&t.width!==0&&t.height!==0}function x3e(t){return w3e()&&!(t instanceof ImageBitmap)&&_3e(t)&&!b3e(t)}function S3e(t,e){return e===void 0&&(e=3),xt(this,void 0,void 0,function(){var r,n;return St(this,function(a){switch(a.label){case 0:if(r=null,!(Gt().getBool("WRAP_TO_IMAGEBITMAP")&&x3e(t)))return[3,5];n=void 0,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,createImageBitmap(t,{premultiplyAlpha:"none"})];case 2:return n=a.sent(),[3,4];case 3:return a.sent(),n=null,[3,4];case 4:return n!=null&&n.width===t.width&&n.height===t.height?r=n:r=t,[3,6];case 5:r=t,a.label=6;case 6:return[2,eH(r,e)]}})})}function E3e(t,e){return xt(this,void 0,void 0,function(){var r,n,a,s,o,u,l,h,p,v,y,S,A,T,I,N;return St(this,function(D){switch(D.label){case 0:if(r=te(t,"img","toPixels"),t instanceof ui||(n=r,r=Vn(n,"int32"),n.dispose()),r.rank!==2&&r.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+r.rank+".");if(a=wt(r.shape.slice(0,2),2),s=a[0],o=a[1],u=r.rank===2?1:r.shape[2],u>4||u===2)throw new Error("toPixels only supports depth of size "+("1, 3 or 4 but got "+u));if(r.dtype!=="float32"&&r.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+r.dtype+". Please use float32 or int32 tensors.");return[4,r.data()];case 1:for(l=D.sent(),h=r.dtype==="float32"?255:1,p=new Uint8ClampedArray(o*s*4),v=0;v<s*o;++v){for(y=[0,0,0,255],S=0;S<u;S++){if(A=l[v*u+S],r.dtype==="float32"){if(A<0||A>1)throw new Error("Tensor values for a float32 Tensor must be in the "+("range [0 - 1] but encountered "+A+"."))}else if(r.dtype==="int32"&&(A<0||A>255))throw new Error("Tensor values for a int32 Tensor must be in the "+("range [0 - 255] but encountered "+A+"."));u===1?(y[0]=A*h,y[1]=A*h,y[2]=A*h):y[S]=A*h}T=v*4,p[T+0]=Math.round(y[0]),p[T+1]=Math.round(y[1]),p[T+2]=Math.round(y[2]),p[T+3]=Math.round(y[3])}return e!=null&&(e.width=o,e.height=s,I=e.getContext("2d"),N=new ImageData(p,o,s),I.putImageData(N,0,0)),r!==t&&r.dispose(),[2,p]}})})}var M3e=pe({fromPixels_:eH}),A3e={__proto__:null,fromPixelsAsync:S3e,toPixels:E3e,fromPixels:M3e};function tH(t,e){var r=t.shape.length,n=e.shape.length;if(r<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+(" but the rank was "+r+"."));if(n<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+(" but the rank was "+n+"."));if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type,"+(" but the dtype was "+e.dtype+"."));if(e.shape[n-1]>r)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+(e.shape[n-1]+" vs. "+r));if(bn(t.shape)===0)throw new Error("Requested more than 0 entries, but input is empty."+(" Input shape: "+t.shape+"."));for(var a=e.shape,s=a[a.length-1],o=1,u=0;u<a.length-1;++u)o*=a[u];var l=t.shape,h=a.slice();h.pop();for(var p=1,u=s;u<r;++u)p*=l[u],h.push(l[u]);var v=Ir(Wp(t.shape).map(function(y){return y/p}),[1]).slice(0,s);return[h,o,p,v]}var k3e={__proto__:null,prepareAndValidate:tH};function oN(t,e,r){var n=e.rank>1?e.shape[e.rank-1]:1,a=e.rank>1?e.rank-1:1,s="Must have updates.shape = indices.shape[:batchDim] + "+("shape[sliceDim:], got updates.shape: "+r.shape)+(", indices.shape: "+e.shape+", shape: "+t)+(", sliceDim: "+n+", and batchDim: "+a+".");if(r.rank<a)throw new Error(s+(" update.rank < "+a+". "));if(t.length<n+(r.rank-a))throw new Error(s+(" Output shape length < "+(n+(r.rank-a))));if(r.rank!==a+t.length-n)throw new Error(s+(" update.rank != "+(a+t.length-n)));for(var o=0;o<a;++o)if(r.shape[o]!==e.shape[o])throw new Error(s+(" updates.shape["+o+"] ("+r.shape[o]+") != indices.shape["+o+"] ("+e.shape[o]+")."));for(var o=0;o<r.rank-a;++o)if(r.shape[o+a]!==t[o+n])throw new Error(s+(" updates.shape["+(o+a)+"] ("+r.shape[o+a]+") != shape["+(o+a)+"] ("+t[o+a]+")"))}function uN(t,e,r){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+(" but the rank was "+e.rank+"."));if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+(" but the rank was "+t.rank+"."));if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(r.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+r);if(r.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}oN(r,e,t)}function rH(t,e,r){for(var n=e.shape.length,a=n>1?e.shape[n-1]:1,s=r.length,o=1,u=a;u<s;++u)o*=r[u];var l=a<1?1:a,h=bn(e.shape)/l,p=Ir(Wp(r.slice(0,a)),[1]),v=bn(r);return{sliceRank:a,numUpdates:h,sliceSize:o,strides:p,outputSize:v}}var T3e={__proto__:null,validateUpdateShape:oN,validateInput:uN,calculateShapes:rH},P4=-2,N3e=-1;function I3e(t,e,r){var n=t.shape.length;se(n===e.length,function(){return"Error in slice"+n+"D: Length of begin "+e+" must "+("match the rank of the array ("+n+").")}),se(n===r.length,function(){return"Error in slice"+n+"D: Length of size "+r+" must "+("match the rank of the array ("+n+").")});for(var a=function(o){se(e[o]+r[o]<=t.shape[o],function(){return"Error in slice"+n+"D: begin["+o+"] + size["+o+"] "+("("+(e[o]+r[o])+") would overflow input.shape["+o+"] ("+t.shape[o]+")")})},s=0;s<n;++s)a(s)}function D3e(t){for(var e=[],r=0;t>0;)t&1&&e.push(r),t/=2,r++;return e}function O3e(t,e,r){for(var n=[],a=0;a<t.length;a++)n[a]=Math.ceil((e[a]-t[a])/r[a]);return n}function nH(t,e,r,n){for(var a=Ir(t),s=a.length;s<n.length;s++)a.push(1);for(var s=0;s<r;s++)s===0?a[e]=1:(a.splice(e,0,1),a.pop());return a}function iH(t,e,r){return r<=t?r:r-(e-1)}function aH(t,e){for(var r=[],n=0;n<t;n++)r.push(e+n);return r}function R3e(t,e,r,n,a,s,o,u,l){var h=t.length,p=new Array(h),v=new Array(h),y=new Array(h);if(e.length&&r>0){var S=e[0],A=r+1;p=sH(o,S,A,n,t),v=oH(u,S,A,a,t),y=nH(s,S,A,t)}else for(var T=0;T<h;T++)p[T]=fH(o,n,s,t,T,l),v[T]=lH(u,a,s,t,T,l),y[T]=uH(s,T,l);return{begin:p,end:v,strides:y}}function sH(t,e,r,n,a){for(var s=Ir(a),o=aH(r,e),u=0;u<s.length;u++)if(o.indexOf(u)>-1)s[u]=0;else{var l=iH(e,r,u),h=n[l];t&1<<l&&(h=0),s[u]=h}return s}function oH(t,e,r,n,a){for(var s=Ir(a),o=aH(r,e),u=0;u<s.length;u++)if(o.indexOf(u)>-1)s[u]=Number.MAX_SAFE_INTEGER;else{var l=iH(e,r,u),h=n[l];t&1<<l&&(h=Number.MAX_SAFE_INTEGER),s[u]=h}for(var p=0;p<s.length;p++){var v=a[p];s[p]<0&&(s[p]+=v),s[p]=jg(0,s[p],a[p])}return s}function uH(t,e,r){var n=t[e];return(r&1<<e||n==null)&&(n=1),n}function fH(t,e,r,n,a,s){var o=e[a],u=r[a]||1;(t&1<<a||s&1<<a||o==null)&&(u>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);var l=n[a];return o<0&&(o+=l),o=jg(0,o,l-1),o}function lH(t,e,r,n,a,s){var o=e[a],u=r[a]||1;(t&1<<a||s&1<<a||o==null)&&(u>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);var l=n[a];return o<0&&(o+=l),u>0?o=jg(0,o,l):o=jg(-1,o,l-1),o}function C3e(t,e,r){for(var n=r.length,a=0;a<r.length;a++)if(r[a]>1){n=a;break}for(var a=n+1;a<r.length;a++)if(e[a]>0||r[a]!==t[a])return!1;return!0}function F3e(t,e){for(var r=t.length>0?t[t.length-1]:1,n=0;n<t.length-1;n++)r+=t[n]*e[n];return r}function B3e(t,e,r){var n,a=t.shape.length;typeof e=="number"?n=Ir([e],new Array(a-1).fill(0)):e.length<a?n=e.concat(new Array(a-e.length).fill(0)):n=e.slice(),n.forEach(function(o){se(o!==-1,function(){return"slice() does not support negative begin indexing."})});var s;return r==null?s=new Array(a).fill(-1):typeof r=="number"?s=Ir([r],new Array(a-1).fill(-1)):r.length<a?s=r.concat(new Array(a-r.length).fill(-1)):s=r,s=s.map(function(o,u){return o>=0?o:(se(o===-1,function(){return"Negative size values should be exactly -1 but got "+(o+" for the slice() size at index "+u+".")}),t.shape[u]-n[u])}),[n,s]}function L3e(t,e,r,n,a,s,o,u,l){var h;if(n==null?(h=new Array(e.length),h.fill(1)):h=n,o!=null&&(o&o-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");for(var p=!1,v={dims:h.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:r.slice(),strides:h.slice(),beginMask:a,endMask:s,ellipsisMask:o,newAxisMask:u,shrinkAxisMask:l},y=0;y<v.dims;y++)p&&(1<<y&u)!==0&&v.numAddAxisAfterEllipsis++,1<<y&o&&(p=!0);p||(v.ellipsisMask|=1<<v.dims,v.dims++);var S={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};P3e(v,S);for(var A=!0,T=!0,I=!0,N=[],D=[],y=0;y<t.length;++y){if(S.strides[y]===0)throw Error("strides["+y+"] must be non-zero");var C=!!(S.shrinkAxisMask&1<<y),L=t[y];if(L===-1){N.push(C?1:-1);continue}var z=[S.beginMask&1<<y,S.endMask&1<<y],$=[S.strides[y]>0?0:-1,S.strides[y]>0?L:L-1];if(C&&S.strides[y]<=0)throw Error("only stride 1 allowed on non-range indexing.");I=I&&S.strides[y]===1;var G=!!(S.beginMask&1<<y&&S.endMask&1<<y);if(S.beginValid&&S.endValid){if(C){var j=S.begin[y]<0?L+S.begin[y]:S.begin[y];if(S.begin[y]=j,S.end[y]=S.begin[y]+1,j<0||j>=L)throw Error("slice index "+S.begin[y]+" of dimension "+y+" out of bounds.")}else S.begin[y]=_U(S.begin[y],0,S.strides[y],L,z,$),S.end[y]=_U(S.end[y],1,S.strides[y],L,z,$);var K=S.strides[y]===1&&S.begin[y]===0&&S.end[y]===L;A=A&&K,T=T&&(y===0&&S.strides[y]===1||K)}else A=A&&S.strides[y]===1&&G,T=T&&(y===0&&S.strides[y]===1||G);var M=void 0,f=!1;if(S.beginValid&&S.endValid?(M=S.end[y]-S.begin[y],f=!0):C?(M=1,f=!0):G&&L>=0&&(S.strides[y]<0?M=-L:M=L,f=!0),f){var d=void 0;M===0||M<0!=S.strides[y]<0?d=0:d=Math.trunc(M/S.strides[y])+(M%S.strides[y]!==0?1:0),N.push(d)}else N.push(-1)}for(var g=0;g<S.finalShapeGatherIndices.length;++g){var m=S.finalShapeGatherIndices[g];m>=0?D.push(N[m]):m===P4&&D.push(1)}var b=D.filter(function(E,k){return S.finalShapeGatherIndices[k]!==P4});return{finalShapeSparse:b,finalShape:D,isIdentity:A,sliceDim0:T,isSimpleSlice:I,begin:S.begin,end:S.end,strides:S.strides}}function P3e(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;var r=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(var n=0;n<t.dims;n++)if(1<<n&t.ellipsisMask)for(var a=Math.min(e.dims-(t.dims-n)+1+t.numAddAxisAfterEllipsis,e.dims);r<a;r++)e.begin[r]=0,e.end[r]=0,e.strides[r]=1,e.beginMask|=1<<r,e.endMask|=1<<r,e.finalShapeGatherIndices.push(r),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[r]=n;else if(1<<n&t.newAxisMask)e.finalShapeGatherIndices.push(P4),e.finalShapeGatherIndicesSparse.push(-1);else{if(r===e.begin.length)throw Error("Index out of range using input dim "+r+"; input "+("has only "+e.dims+" dims, "+e.begin.length+"."));t.begin!=null&&(e.begin[r]=t.begin[n]),t.end!=null&&(e.end[r]=t.end[n]),e.strides[r]=t.strides[n],t.beginMask&1<<n&&(e.beginMask|=1<<r),t.endMask&1<<n&&(e.endMask|=1<<r),t.shrinkAxisMask&1<<n?(e.finalShapeGatherIndices.push(N3e),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<r):(e.finalShapeGatherIndices.push(r),e.finalShapeGatherIndicesSparse.push(n)),e.inputShapeGatherIndicesSparse[r]=n,r++}}function _U(t,e,r,n,a,s){if(a[e])return r>0?s[e]:s[e+1&1];var o=t<0?n+t:t;return o<s[0]?s[0]:o>s[1]?s[1]:o}var cH={__proto__:null,assertParamsValid:I3e,maskToAxes:D3e,computeOutShape:O3e,stridesWithElidedDims:nH,getNormalizedAxes:R3e,startIndicesWithElidedDims:sH,stopIndicesWithElidedDims:oH,stridesForAxis:uH,startForAxis:fH,stopForAxis:lH,isSliceContinous:C3e,computeFlatOffset:F3e,parseSliceParams:B3e,sliceInfo:L3e};var hH=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(e,r){return new e(r)},t}(),dH=function(){function t(){this.classNameMap={}}return t.getMap=function(){return t.instance==null&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t}();function Bl(t){se(t.className!=null,function(){return"Class being registered does not have the static className property defined."}),se(typeof t.className=="string",function(){return"className is required to be a string, but got type "+typeof t.className}),se(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),dH.register(t)}var q3e={__proto__:null,Serializable:hH,SerializationMap:dH,registerClass:Bl};var $3e=.001,pH=.1;function z3e(t,e,r){return r==null&&(r=fN()),q4(t,e,function(n,a){return lN(n,a,r)})}function fN(){return ve.backend.floatPrecision()===32?$3e:pH}function q4(t,e,r){var n=!0;if((Ji(t)||Ji(e))&&(n=!1),Ji(t)&&Ji(e)&&(n=!0),n){var a=t.constructor.name,s=e.constructor.name;if(a!==s)throw new Error("Arrays are of different type. Actual: "+a+". "+("Expected: "+s))}if(Array.isArray(t)&&Array.isArray(e)){var o=Iu(t),u=Iu(e);if(!Cl(o,u))throw new Error("Arrays have different shapes. "+("Actual: ["+o+"]. Expected: ["+u+"]"))}var l=Ji(t)?t:Sh(t),h=Ji(e)?e:Sh(e);if(l.length!==h.length)throw new Error("Arrays have different lengths actual: "+l.length+" vs "+("expected: "+h.length+`.
`)+("Actual:   "+l+`.
`)+("Expected: "+h+"."));for(var p=0;p<h.length;++p){var v=l[p],y=h[p];if(!r(v,y))throw new Error("Arrays differ: actual["+p+"] = "+v+", expected["+p+"] = "+y+`.
`+("Actual:   "+l+`.
`)+("Expected: "+h+"."))}}function j3e(t,e){t().then(function(){return e.fail()},function(){return e()})}function U3e(t,e){var r=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return Tl(t)||Tl(t[0])||Tl(e)||Tl(e[0])?q4(t,r,function(n,a){return n==a}):q4(t,e,function(n,a){return lN(n,a,0)})}function V3e(t,e,r){if(r==null&&(r=fN()),!lN(t,e,r))throw new Error("Numbers differ: actual === "+t+", expected === "+e)}function lN(t,e,r){return!isFinite(t)&&!isFinite(e)?!0:!(isNaN(t)||isNaN(e)||Math.abs(t-e)>r)}function W3e(t,e,r){for(var n=0;n<t.length;n++)if(t[n]<e||t[n]>r)throw new Error("Value out of range:"+t[n]+" low: "+e+", high: "+r)}function G3e(t,e){var r=new Float32Array(t),n=new Float32Array(e);if(r.length!==n.length)throw new Error("Expected ArrayBuffer to be of length "+(n.length+", but it was "+r.length));for(var a=0;a<n.length;a++)if(r[a]!==n[a])throw new Error("Expected ArrayBuffer value at "+a+" to be "+(n[a]+" but got "+r[a]+" instead"))}function mH(t){for(var e=0;e<t.length;e++){var r=t[e];Array.isArray(r)?mH(r):t[e]=ry(r)}return t}var H3e={__proto__:null,TEST_EPSILON_FLOAT16:pH,expectArraysClose:z3e,testEpsilon:fN,expectPromiseToFail:j3e,expectArraysEqual:U3e,expectNumbersClose:V3e,expectValuesInRange:W3e,expectArrayBuffersEqual:G3e,encodeStrings:mH};var K3e="3.19.0";function Z3e(t,e){var r,n=te(t,"a","add"),a=te(e,"b","add");r=wt(Rn(n,a),2),n=r[0],a=r[1];var s={a:n,b:a};return ve.runKernel(H4,s)}var It=pe({add_:Z3e});function J3e(t,e){var r,n=te(t,"a","floorDiv"),a=te(e,"b","floorDiv");r=wt(Rn(n,a),2),n=r[0],a=r[1];var s={a:n,b:a};return ve.runKernel(PV,s)}var vH=pe({floorDiv_:J3e});function Y3e(t,e){var r,n=te(t,"a","div"),a=te(e,"b","div");if(r=wt(Rn(n,a),2),n=r[0],a=r[1],n.dtype==="int32"&&a.dtype==="int32")return vH(n,a);var s={a:n,b:a},o={};return ve.runKernel(AV,s,o)}var yn=pe({div_:Y3e});function X3e(t,e){var r,n=te(t,"a","mul"),a=te(e,"b","mul");r=wt(Rn(n,a),2),n=r[0],a=r[1];var s={a:n,b:a};return ve.runKernel(vW,s)}var pt=pe({mul_:X3e});function Q3e(t){var e=te(t,"x","abs");if(e.dtype==="complex64"){var r={x:e};return ve.runKernel(oV,r)}else{var r={x:e};return ve.runKernel(qU,r)}}var is=pe({abs_:Q3e});function eMe(t){var e=te(t,"x","acos"),r={x:e};return ve.runKernel($U,r)}var tMe=pe({acos_:eMe});function rMe(t){var e=te(t,"x","acosh"),r={x:e};return ve.runKernel(zU,r)}var nMe=pe({acosh_:rMe});function iMe(t){se(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),se(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+(""+t.length)});var e=t.map(function(a,s){return te(a,"tensors"+s,"addN")}),r=e[0];e.forEach(function(a){if(a.dtype!==r.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(a){if(!Cl(a.shape,r.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var n=e;return ve.runKernel(jU,n)}var aMe=pe({addN_:iMe});function sMe(t,e,r){e===void 0&&(e=null),r===void 0&&(r=!1);var n=te(t,"x","all","bool"),a={x:n},s={axis:e,keepDims:r};return ve.runKernel(UU,a,s)}var oMe=pe({all_:sMe});function uMe(t,e,r){e===void 0&&(e=null),r===void 0&&(r=!1);var n=te(t,"x","any","bool"),a={x:n},s={axis:e,keepDims:r};return ve.runKernel(VU,a,s)}var fMe=pe({any_:uMe});function lMe(t,e){e===void 0&&(e=0);var r=te(t,"x","argMax"),n={x:r},a={axis:e};return ve.runKernel(WU,n,a)}var cMe=pe({argMax_:lMe});function hMe(t,e){e===void 0&&(e=0);var r=te(t,"x","argMin"),n={x:r},a={axis:e};return ve.runKernel(GU,n,a)}var dMe=pe({argMin_:hMe});function pMe(t){var e=te(t,"x","asin"),r={x:e};return ve.runKernel(HU,r)}var mMe=pe({asin_:pMe});function vMe(t){var e=te(t,"x","asinh"),r={x:e};return ve.runKernel(KU,r)}var gMe=pe({asinh_:vMe});function yMe(t){var e=te(t,"x","atan"),r={x:e};return ve.runKernel(ZU,r)}var bMe=pe({atan_:yMe});function wMe(t,e){var r,n=te(t,"a","atan2"),a=te(e,"b","atan2");r=wt(Rn(n,a),2),n=r[0],a=r[1];var s={a:n,b:a};return ve.runKernel(YU,s)}var _Me=pe({atan2_:wMe});function xMe(t){var e=te(t,"x","atanh"),r={x:e};return ve.runKernel(JU,r)}var SMe=pe({atanh_:xMe});function EMe(t,e,r,n,a,s){a===void 0&&(a="NHWC");var o=t[3],u=Ir(e,[o]),l=bH(a);return iy(t,u,r,s,n,null,null,l)}function gH(t,e,r,n,a,s,o){o===void 0&&(o="channelsLast");var u=wt(R2(e),2),l=u[0],h=u[1],p;if(o==="channelsLast")p=[l,h,t[3],t[3]];else if(o==="channelsFirst")p=[l,h,t[1],t[1]];else throw new Error("Unknown dataFormat "+o);return iy(t,p,r,n,a,s,!1,o)}function MMe(t,e,r,n,a,s,o){o===void 0&&(o="NDHWC");var u=wt($4(e),3),l=u[0],h=u[1],p=u[2],v,y;if(o==="NDHWC")y="channelsLast",v=[l,h,p,t[4],t[4]];else if(o==="NCDHW")y="channelsFirst",v=[l,h,p,t[1],t[1]];else throw new Error("Unknown dataFormat "+o);return yH(t,v,r,n,a,!1,y,s)}function iy(t,e,r,n,a,s,o,u){var l,h;o===void 0&&(o=!1),u===void 0&&(u="channelsLast");var p=wt([-1,-1,-1,-1],4),v=p[0],y=p[1],S=p[2],A=p[3];if(u==="channelsLast")l=wt(t,4),v=l[0],y=l[1],S=l[2],A=l[3];else if(u==="channelsFirst")h=wt(t,4),v=h[0],A=h[1],y=h[2],S=h[3];else throw new Error("Unknown dataFormat "+u);var T=wt(e,4),I=T[0],N=T[1],D=T[3],C=wt(R2(r),2),L=C[0],z=C[1],$=wt(R2(n),2),G=$[0],j=$[1],K=Lp(I,G),M=Lp(N,j),f=TMe(a,y,S,L,z,K,M,s,u),d=f.padInfo,g=f.outHeight,m=f.outWidth,b=o?D*A:D,E;return u==="channelsFirst"?E=[v,b,g,m]:u==="channelsLast"&&(E=[v,g,m,b]),{batchSize:v,dataFormat:u,inHeight:y,inWidth:S,inChannels:A,outHeight:g,outWidth:m,outChannels:b,padInfo:d,strideHeight:L,strideWidth:z,filterHeight:I,filterWidth:N,effectiveFilterHeight:K,effectiveFilterWidth:M,dilationHeight:G,dilationWidth:j,inShape:t,outShape:E,filterShape:e}}function yH(t,e,r,n,a,s,o,u){var l,h;s===void 0&&(s=!1),o===void 0&&(o="channelsLast");var p=wt([-1,-1,-1,-1,-1],5),v=p[0],y=p[1],S=p[2],A=p[3],T=p[4];if(o==="channelsLast")l=wt(t,5),v=l[0],y=l[1],S=l[2],A=l[3],T=l[4];else if(o==="channelsFirst")h=wt(t,5),v=h[0],T=h[1],y=h[2],S=h[3],A=h[4];else throw new Error("Unknown dataFormat "+o);var I=wt(e,5),N=I[0],D=I[1],C=I[2],L=I[4],z=wt($4(r),3),$=z[0],G=z[1],j=z[2],K=wt($4(n),3),M=K[0],f=K[1],d=K[2],g=Lp(N,M),m=Lp(D,f),b=Lp(C,d),E=NMe(a,y,S,A,$,G,j,g,m,b,u),k=E.padInfo,w=E.outDepth,c=E.outHeight,_=E.outWidth,R=s?L*T:L,O;return o==="channelsFirst"?O=[v,R,w,c,_]:o==="channelsLast"&&(O=[v,w,c,_,R]),{batchSize:v,dataFormat:o,inDepth:y,inHeight:S,inWidth:A,inChannels:T,outDepth:w,outHeight:c,outWidth:_,outChannels:R,padInfo:k,strideDepth:$,strideHeight:G,strideWidth:j,filterDepth:N,filterHeight:D,filterWidth:C,effectiveFilterDepth:g,effectiveFilterHeight:m,effectiveFilterWidth:b,dilationDepth:M,dilationHeight:f,dilationWidth:d,inShape:t,outShape:O,filterShape:e}}function AMe(t,e,r,n,a){n==null&&(n=cN(t,e,r));var s=t[0],o=t[1],u=xh((s-e+2*n)/r+1,a),l=xh((o-e+2*n)/r+1,a);return[u,l]}function kMe(t,e,r,n,a,s){a==null&&(a=cN(t,e,n));var o=t[0],u=t[1],l=t[2],h=xh((o-e+2*a)/n+1,s),p=xh((u-e+2*a)/n+1,s),v=xh((l-e+2*a)/n+1,s);return[h,p,v,r]}function cN(t,e,r,n){n===void 0&&(n=1);var a=Lp(e,n);return Math.floor((t[0]*(r-1)-r+a)/2)}function R2(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function $4(t){return typeof t=="number"?[t,t,t]:t}function Lp(t,e){return e<=1?t:t+(t-1)*(e-1)}function TMe(t,e,r,n,a,s,o,u,l){var h,p,v;if(typeof t=="number"){var y=t===0?"VALID":"NUMBER";h={top:t,bottom:t,left:t,right:t,type:y};var S=AMe([e,r],s,n,t,u);p=S[0],v=S[1]}else if(t==="same"){p=Math.ceil(e/n),v=Math.ceil(r/a);var A=Math.max(0,(p-1)*n+s-e),T=Math.max(0,(v-1)*a+o-r),I=Math.floor(A/2),N=A-I,D=Math.floor(T/2),C=T-D;h={top:I,bottom:N,left:D,right:C,type:"SAME"}}else if(t==="valid")h={top:0,bottom:0,left:0,right:0,type:"VALID"},p=Math.ceil((e-s+1)/n),v=Math.ceil((r-o+1)/a);else if(typeof t=="object"){var I=l==="channelsLast"?t[1][0]:t[2][0],N=l==="channelsLast"?t[1][1]:t[2][1],D=l==="channelsLast"?t[2][0]:t[3][0],C=l==="channelsLast"?t[2][1]:t[3][1],y=I===0&&N===0&&D===0&&C===0?"VALID":"EXPLICIT";h={top:I,bottom:N,left:D,right:C,type:y},p=xh((e-s+I+N)/n+1,u),v=xh((r-o+D+C)/a+1,u)}else throw Error("Unknown padding parameter: "+t);return{padInfo:h,outHeight:p,outWidth:v}}function NMe(t,e,r,n,a,s,o,u,l,h,p){var v,y,S,A;if(typeof t=="number"){var T=t===0?"VALID":"NUMBER";v={top:t,bottom:t,left:t,right:t,front:t,back:t,type:T};var I=kMe([e,r,n,1],u,1,a,t,p);y=I[0],S=I[1],A=I[2]}else if(t==="same"){y=Math.ceil(e/a),S=Math.ceil(r/s),A=Math.ceil(n/o);var N=(y-1)*a+u-e,D=(S-1)*s+l-r,C=(A-1)*o+h-n,L=Math.floor(N/2),z=N-L,$=Math.floor(D/2),G=D-$,j=Math.floor(C/2),K=C-j;v={top:$,bottom:G,left:j,right:K,front:L,back:z,type:"SAME"}}else if(t==="valid")v={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},y=Math.ceil((e-u+1)/a),S=Math.ceil((r-l+1)/s),A=Math.ceil((n-h+1)/o);else throw Error("Unknown padding parameter: "+t);return{padInfo:v,outDepth:y,outHeight:S,outWidth:A}}function xh(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function Kg(t){var e=wt(R2(t),3),r=e[0],n=e[1],a=e[2];return r===1&&n===1&&a===1}function yf(t,e){return Kg(t)||Kg(e)}function bH(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function Ks(t,e,r){if(r!=null){if(typeof e=="string")throw Error("Error in "+t+": pad must be an integer when using "+("dimRoundingMode "+r+" but got pad "+e+"."));if(typeof e=="number")se($p(e),function(){return"Error in "+t+": pad must be an integer when using "+("dimRoundingMode "+r+" but got pad "+e+".")});else if(typeof e=="object")e.forEach(function(n){n.forEach(function(a){se($p(a),function(){return"Error in "+t+": pad must be an integer when using "+("dimRoundingMode "+r+" but got pad "+a+".")})})});else throw Error("Error in "+t+": Unknown padding parameter: "+e)}}function IMe(t,e){var r=te(t,"x","reshape","string_or_numeric"),n={x:r},a={shape:e};return ve.runKernel(RW,n,a)}var nt=pe({reshape_:IMe});function DMe(t,e,r,n,a){var s=te(t,"x","avgPool","float32"),o=1;se(yf(r,o),function(){return"Error in avgPool: Either strides or dilations must be 1. "+("Got strides "+r+" and dilations '"+o+"'")});var u=s,l=!1;s.rank===3&&(l=!0,u=nt(s,[1,s.shape[0],s.shape[1],s.shape[2]])),se(u.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+u.rank+"."}),Ks("avgPool",n,a);var h={x:u},p={filterSize:e,strides:r,pad:n,dimRoundingMode:a},v=ve.runKernel(XU,h,p);return v=Vn(v,s.dtype),l?nt(v,[v.shape[1],v.shape[2],v.shape[3]]):v}var wH=pe({avgPool_:DMe});function OMe(t,e,r,n,a,s){s===void 0&&(s="NDHWC");var o=te(t,"x","avgPool3d","float32"),u=o,l=!1;o.rank===4&&(l=!0,u=nt(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),se(u.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),se(s==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+("but got dataFormat of "+s)}),Ks("avgPool3d",n,a);var h={x:u},p={filterSize:e,strides:r,pad:n,dimRoundingMode:a,dataFormat:s},v=ve.runKernel(QU,h,p);return v=Vn(v,u.dtype),l?nt(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}var RMe=pe({avgPool3d_:OMe});function CMe(t,e){e===void 0&&(e=0),se(t.length>=1,function(){return"Pass at least one tensor to concat"});var r=Gg(t,"tensors","concat","string_or_numeric");if(r[0].dtype==="complex64"&&r.forEach(function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")}),r.length===1)return _h(r[0]);var n=r,a={axis:e};return ve.runKernel(uV,n,a)}var za=pe({concat_:CMe});function FMe(t){var e=te(t,"x","sigmoid","float32"),r={x:e};return ve.runKernel(KW,r)}var Pp=pe({sigmoid_:FMe});function BMe(t,e,r){var n=te(t,"x","slice","string_or_numeric");if(n.rank===0)throw new Error("Slicing scalar is not possible");var a={x:n},s={begin:e,size:r};return ve.runKernel(VW,a,s)}var Tn=pe({slice_:BMe});function LMe(t){var e=te(t,"x","tanh","float32"),r={x:e};return ve.runKernel(dG,r)}var z4=pe({tanh_:LMe});function PMe(t,e,r,n,a,s){var o=te(t,"forgetBias","basicLSTMCell"),u=te(e,"lstmKernel","basicLSTMCell"),l=te(r,"lstmBias","basicLSTMCell"),h=te(n,"data","basicLSTMCell"),p=te(a,"c","basicLSTMCell"),v=te(s,"h","basicLSTMCell"),y=za([h,v],1),S=Fr(y,u),A=It(S,l),T=A.shape[0],I=A.shape[1]/4,N=[T,I],D=Tn(A,[0,0],N),C=Tn(A,[0,I],N),L=Tn(A,[0,I*2],N),z=Tn(A,[0,I*3],N),$=It(pt(Pp(D),z4(C)),pt(p,Pp(It(o,L)))),G=pt(z4($),Pp(z));return[$,G]}var qMe=pe({basicLSTMCell_:PMe});function $Me(t,e,r){var n=te(t,"x","batchToSpaceND"),a=e.reduce(function(u,l){return u*l});se(n.rank>=1+e.length,function(){return"input rank is "+n.rank+" but should be > than blockShape.length "+e.length}),se(r.length===e.length,function(){return"crops.length is "+r.length+" but should be equal to blockShape.length  "+e.length}),se(n.shape[0]%a===0,function(){return"input tensor batch is "+n.shape[0]+" but is not divisible by the product of "+("the elements of blockShape "+e.join(" * ")+" === "+a)});var s={x:n},o={blockShape:e,crops:r};return ve.runKernel(tV,s,o)}var _H=pe({batchToSpaceND_:$Me});function zMe(t){var e;return t.rank===0||t.rank===1?e=nt(t,[1,1,1,t.size]):t.rank===2?e=nt(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=nt(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}function jMe(t,e,r,n,a,s){s==null&&(s=.001);var o=te(t,"x","batchNorm"),u=te(e,"mean","batchNorm"),l=te(r,"variance","batchNorm"),h;a!=null&&(h=te(a,"scale","batchNorm"));var p;n!=null&&(p=te(n,"offset","batchNorm")),se(u.rank===l.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),se(p==null||u.rank===p.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),se(h==null||u.rank===h.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."});var v=zMe(o),y={x:v,scale:h,offset:p,mean:u,variance:l},S={varianceEpsilon:s},A=ve.runKernel(qV,y,S);return nt(A,o.shape)}var j2=pe({batchNorm_:jMe});function UMe(t,e,r,n,a,s){var o=te(t,"x","batchNorm"),u=te(e,"mean","batchNorm"),l=te(r,"variance","batchNorm"),h;a!=null&&(h=te(a,"scale","batchNorm"));var p;return n!=null&&(p=te(n,"offset","batchNorm")),se(o.rank===2,function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+(o.rank+".")}),se(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+("got rank "+u.rank+".")}),se(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+("but got rank "+l.rank+".")}),h!=null&&se(h.rank===2||h.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+("but got rank "+h.rank+".")}),p!=null&&se(p.rank===2||p.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+("but got rank "+p.rank+".")}),j2(o,u,l,p,h,s)}var VMe=pe({batchNorm2d_:UMe});function WMe(t,e,r,n,a,s){var o=te(t,"x","batchNorm"),u=te(e,"mean","batchNorm"),l=te(r,"variance","batchNorm"),h;a!=null&&(h=te(a,"scale","batchNorm"));var p;return n!=null&&(p=te(n,"offset","batchNorm")),se(o.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+(o.rank+".")}),se(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+("got rank "+u.rank+".")}),se(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+("but got rank "+l.rank+".")}),h!=null&&se(h.rank===3||h.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+("but got rank "+h.rank+".")}),p!=null&&se(p.rank===3||p.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+("but got rank "+p.rank+".")}),j2(o,u,l,p,h,s)}var GMe=pe({batchNorm3d_:WMe});function HMe(t,e,r,n,a,s){var o=te(t,"x","batchNorm"),u=te(e,"mean","batchNorm"),l=te(r,"variance","batchNorm"),h;a!=null&&(h=te(a,"scale","batchNorm"));var p;return n!=null&&(p=te(n,"offset","batchNorm")),se(o.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+(o.rank+".")}),se(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+("got rank "+u.rank+".")}),se(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+("but got rank "+l.rank+".")}),h!=null&&se(h.rank===4||h.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+("but got rank "+h.rank+".")}),p!=null&&se(p.rank===4||p.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+("but got rank "+p.rank+".")}),j2(o,u,l,p,h,s)}var KMe=pe({batchNorm4d_:HMe});function ZMe(t,e,r){var n=te(t,"x","bincount"),a=te(e,"weights","bincount");se(n.dtype==="int32",function(){return"Error in bincount: input "+("dtype must be int32, but got "+n.dtype)}),se(r>=0,function(){return"size must be non-negative, but got "+r+"."}),se(a.size===n.size||a.size===0,function(){return"Error in bincount: weights must have the same size as input or"+("0-length, but got input shape: "+n.shape+", weights shape: ")+(a.shape+".")});var s={x:n,weights:a},o={size:r};return ve.runKernel(rV,s,o)}var xH=pe({bincount_:ZMe});function JMe(t,e){var r=te(t,"s0","broadcastArgs","int32"),n=te(e,"s1","broadcastArgs","int32");if(r.rank!==1)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+("Has rank "+r.rank));if(n.rank!==1)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+("Has rank "+n.rank));var a={s0:r,s1:n};return ve.runKernel(nV,a)}var YMe=pe({broadcastArgs_:JMe});function XMe(t,e){var r=te(t,"broadcastTo","x"),n=r.shape;if(e.some(function(v){return!(v>0)||v%1!==0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<r.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+r.rank+".");if(e.length>r.rank){for(var a=r.shape.slice();a.length<e.length;)a.unshift(1);r=nt(r,a)}for(var s=r.shape,o=Array.from(e),u=e.length-1;u>=0;u--)if(s[u]===e[u])o[u]=1;else if(r.shape[u]!==1)throw new Error("broadcastTo(): ["+n+"] cannot be broadcast to ["+e+"].");var l=o.map(function(v,y){return v>1?y:-1}).filter(function(v){return v>=0});if(l.length===0)return _h(r);var h={x:r},p={reps:o};return ve.runKernel(J4,h,p)}var x2=pe({broadcastTo_:XMe});function QMe(t){var e=te(t,"x","ceil","float32"),r={x:e};return ve.runKernel(iV,r)}var eAe=pe({ceil_:QMe});function tAe(t,e,r){var n=te(t,"x","clipByValue");se(e<=r,function(){return"Error in clip: min ("+e+") must be "+("less than or equal to max ("+r+").")});var a={x:n},s={clipValueMin:e,clipValueMax:r};return ve.runKernel(aV,a,s)}var rAe=pe({clipByValue_:tAe});function nAe(t){return za(t,0)}var iAe=pe({concat1d_:nAe});function aAe(t,e){return za(t,e)}var sAe=pe({concat2d_:aAe});function oAe(t,e){return za(t,e)}var uAe=pe({concat3d_:oAe});function fAe(t,e){return za(t,e)}var lAe=pe({concat4d_:fAe});function cAe(t,e,r,n,a,s,o){a===void 0&&(a="NHWC"),s===void 0&&(s=[1,1]);var u=te(t,"x","conv2d","float32"),l=te(e,"filter","conv2d","float32"),h=u,p=!1;u.rank===3&&(p=!0,h=nt(u,[1,u.shape[0],u.shape[1],u.shape[2]])),se(h.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+h.rank+"."}),se(l.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+(l.rank+".")}),Ks("conv2d",n,o);var v=a==="NHWC"?h.shape[3]:h.shape[1];se(v===l.shape[2],function(){return"Error in conv2d: depth of input ("+v+") must match "+("input depth for filter "+l.shape[2]+".")}),se(yf(r,s),function(){return"Error in conv2D: Either strides or dilations must be 1. "+("Got strides "+r+" and dilations '"+s+"'")});var y={x:h,filter:l},S={strides:r,pad:n,dataFormat:a,dilations:s,dimRoundingMode:o},A=ve.runKernel(fV,y,S);return p?nt(A,[A.shape[1],A.shape[2],A.shape[3]]):A}var U2=pe({conv2d_:cAe});function hAe(t,e,r,n,a,s,o){a===void 0&&(a="NWC"),s===void 0&&(s=1);var u=te(t,"x","conv1d"),l=te(e,"filter","conv1d"),h=u,p=!1;u.rank===2&&(p=!0,h=nt(u,[1,u.shape[0],u.shape[1]])),se(h.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+h.rank+"."}),se(l.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+(l.rank+".")}),Ks("conv1d",n,o),se(h.shape[2]===l.shape[1],function(){return"Error in conv1d: depth of input ("+h.shape[2]+") must match "+("input depth for filter "+l.shape[1]+".")}),se(yf(r,s),function(){return"Error in conv1D: Either stride or dilation must be 1. "+("Got stride "+r+" and dilation '"+s+"'")}),se(a==="NWC",function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."});var v=nt(l,[1,l.shape[0],l.shape[1],l.shape[2]]),y=nt(h,[h.shape[0],1,h.shape[1],h.shape[2]]),S=[1,r],A=[1,s],T="NHWC",I=U2(y,v,S,n,T,A,o);return p?nt(I,[I.shape[2],I.shape[3]]):nt(I,[I.shape[0],I.shape[2],I.shape[3]])}var dAe=pe({conv1d_:hAe});function pAe(t,e,r,n,a,s,o){s===void 0&&(s="NHWC"),se(t.length===e.rank,function(){return"Length of inShape "+("("+t.length+") and rank of dy ("+e.rank+") must match")});var u=t,l=e,h=!1;e.rank===3&&(h=!0,l=nt(e,[1,e.shape[0],e.shape[1],e.shape[2]]),u=[1,t[0],t[1],t[2]]),se(u.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+(u.length+".")}),se(l.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+("rank "+l.rank)}),se(r.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+("rank "+r.rank)});var p=s==="NHWC"?u[3]:u[1],v=s==="NHWC"?l.shape[3]:l.shape[1];se(p===r.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+p+") must "+("match input depth for filter "+r.shape[2]+".")}),se(v===r.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+v+") must "+("match output depth for filter "+r.shape[3]+".")}),Ks("conv2dDerInput",a,o);var y={dy:l,filter:r},S={strides:n,pad:a,dataFormat:s,dimRoundingMode:o,inputShape:u},A=ve.runKernel(cV,y,S);return h?nt(A,[A.shape[1],A.shape[2],A.shape[3]]):A}var SH=pe({conv2DBackpropInput_:pAe});function mAe(t,e,r,n,a,s){var o=te(t,"x","conv2dTranspose"),u=te(e,"filter","conv2dTranspose");return SH(r,o,u,n,a,"NHWC",s)}var vAe=pe({conv2dTranspose_:mAe});function gAe(t,e,r,n,a,s){a===void 0&&(a="NDHWC"),s===void 0&&(s=[1,1,1]);var o=te(t,"x","conv3d"),u=te(e,"filter","conv3d"),l=o,h=!1;o.rank===4&&(h=!0,l=nt(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),se(l.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+l.rank+"."}),se(u.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+(u.rank+".")}),se(l.shape[4]===u.shape[3],function(){return"Error in conv3d: depth of input ("+l.shape[4]+") must match "+("input depth for filter "+u.shape[3]+".")}),se(yf(r,s),function(){return"Error in conv3D: Either strides or dilations must be 1. "+("Got strides "+r+" and dilations '"+s+"'")}),se(a==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."});var p={x:l,filter:u},v={strides:r,pad:n,dataFormat:a,dilations:s},y=ve.runKernel(hV,p,v);return h?nt(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}var yAe=pe({conv3d_:gAe});function bAe(t,e,r,n,a){se(t.length===e.rank,function(){return"Length of inShape "+("("+t.length+") and rank of dy ("+e.rank+") must match")});var s=t,o=e,u=!1;e.rank===4&&(u=!0,o=nt(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);var l=s[4],h=o.shape[4];se(s.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+(s.length+".")}),se(o.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+("rank "+o.rank)}),se(r.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+("rank "+r.rank)}),se(l===r.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+l+") must "+("match input depth for filter "+r.shape[3]+".")}),se(h===r.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+h+") must "+("match output depth for filter "+r.shape[4]+".")});var p={dy:o,filter:r},v={pad:a,strides:n,inputShape:s},y=ve.runKernel(dV,p,v);return u?nt(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}var wAe=pe({conv3DBackpropInput_:bAe});function _Ae(t,e,r,n,a){var s=te(t,"x","conv3dTranspose"),o=te(e,"filter","conv3dTranspose");return wAe(r,s,o,n,a)}var xAe=pe({conv3dTranspose_:_Ae});function SAe(t){var e=te(t,"x","cos","float32"),r={x:e};return ve.runKernel(pV,r)}var EAe=pe({cos_:SAe});function MAe(t){var e=te(t,"x","cosh","float32"),r={x:e};return ve.runKernel(mV,r)}var AAe=pe({cosh_:MAe});function kAe(t,e,r,n){e===void 0&&(e=0),r===void 0&&(r=!1),n===void 0&&(n=!1);var a=te(t,"x","cumprod"),s={x:a},o={axis:e,exclusive:r,reverse:n};return ve.runKernel(vV,s,o)}var TAe=pe({cumprod_:kAe});function NAe(t,e,r,n){e===void 0&&(e=0),r===void 0&&(r=!1),n===void 0&&(n=!1);var a=te(t,"x","cumsum"),s={x:a},o={axis:e,exclusive:r,reverse:n};return ve.runKernel(gV,s,o)}var IAe=pe({cumsum_:NAe});function DAe(t,e,r,n){n===void 0&&(n=!1);var a=te(t,"x","denseBincount"),s=te(e,"weights","denseBincount");se(a.dtype==="int32",function(){return"Error in denseBincount: input "+("dtype must be int32, but got "+a.dtype)}),se(a.rank<=2,function(){return"Error in denseBincount: input must be at most rank 2, but got "+("rank "+a.rank+".")}),se(r>=0,function(){return"size must be non-negative, but got "+r+"."}),se(s.size===a.size||s.size===0,function(){return"Error in denseBincount: weights must have the same shape as x or "+("0-length, but got x shape: "+a.shape+", weights shape: ")+(s.shape+".")});var o={x:a,weights:s},u={size:r,binaryOutput:n};return ve.runKernel(bV,o,u)}var OAe=pe({denseBincount_:DAe});function RAe(t,e,r){r===void 0&&(r="NHWC");var n=te(t,"x","depthToSpace","float32"),a=r==="NHWC"?n.shape[1]:n.shape[2],s=r==="NHWC"?n.shape[2]:n.shape[3],o=r==="NHWC"?n.shape[3]:n.shape[1];se(e>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+e}),se(a*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
    `+a+" and "+e+`  for depthToSpace with input shape
    `+n.shape}),se(s*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
    `+s+" and "+e+` for depthToSpace with input shape
        `+n.shape}),se(o%(e*e)===0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+o+" for depthToSpace with input shape "+n.shape});var u={x:n},l={blockSize:e,dataFormat:r};return ve.runKernel(wV,u,l)}var CAe=pe({depthToSpace_:RAe});function FAe(t,e,r,n,a,s,o){a===void 0&&(a="NHWC"),s===void 0&&(s=[1,1]);var u=te(t,"x","depthwiseConv2d","float32"),l=te(e,"filter","depthwiseConv2d","float32"),h=u,p=!1;u.rank===3&&(p=!0,h=nt(u,[1,u.shape[0],u.shape[1],u.shape[2]])),se(h.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+("rank "+h.rank+".")}),se(l.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+(l.rank+".")});var v=a==="NHWC"?h.shape[3]:h.shape[1];se(v===l.shape[2],function(){return"Error in depthwiseConv2d: number of input channels "+("("+v+") must match the inChannels dimension in ")+("filter "+l.shape[2]+".")}),Ks("depthwiseConv2d",n,o);var y={x:h,filter:l},S={strides:r,pad:n,dataFormat:a,dilations:s,dimRoundingMode:o},A=ve.runKernel(_V,y,S);return p?nt(A,[A.shape[1],A.shape[2],A.shape[3]]):A}var hN=pe({depthwiseConv2d_:FAe});function BAe(t){var e=te(t,"x","diag"),r={x:e};return ve.runKernel(EV,r)}var LAe=pe({diag_:BAe});function PAe(t,e,r,n,a,s){a===void 0&&(a=[1,1]),s===void 0&&(s="NHWC");var o=te(t,"x","dilation2d"),u=te(e,"filter","dilation2d");se(o.rank===3||o.rank===4,function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+(o.rank+".")}),se(u.rank===3,function(){return"Error in dilation2d: filter must be rank 3, but got rank "+(u.rank+".")}),se(s==="NHWC",function(){return"Error in dilation2d: Only NHWC is currently supported, "+("but got dataFormat of "+s)});var l=o,h=!1;o.rank===3&&(l=nt(o,[1,o.shape[0],o.shape[1],o.shape[2]]),h=!0);var p={x:l,filter:u},v={strides:r,pad:n,dilations:a},y=ve.runKernel(MV,p,v);return h?nt(y,[y.shape[1],y.shape[2],y.shape[3]]):y}var qAe=pe({dilation2d_:PAe});function $Ae(t,e){var r,n=te(t,"a","equal","string_or_numeric"),a=te(e,"b","equal","string_or_numeric");r=wt(Rn(n,a),2),n=r[0],a=r[1],li(n.shape,a.shape);var s={a:n,b:a};return ve.runKernel(IV,s)}var EH=pe({equal_:$Ae});function zAe(t,e,r){var n=te(e,"a","where"),a=te(r,"b","where"),s=te(t,"condition","where","bool"),o=li(li(s.shape,n.shape),a.shape),u=x2(s,o),l=x2(n,o),h=x2(a,o),p={condition:u,t:l,e:h};return ve.runKernel(jW,p)}var Up=pe({where_:zAe});function jAe(t){var e=te(t,"x","zerosLike"),r={x:e};return ve.runKernel(bG,r)}var as=pe({zerosLike_:jAe});function UAe(t,e){var r,n=te(t,"a","div"),a=te(e,"b","div");r=wt(Rn(n,a),2),n=r[0],a=r[1];var s=yn(n,a),o=as(s),u=EH(a,o);return Up(u,o,s)}var VAe=pe({divNoNan_:UAe});function WAe(t,e){var r=te(t,"t1","dot"),n=te(e,"t2","dot");se((r.rank===1||r.rank===2)&&(n.rank===1||n.rank===2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+(r.rank+" and "+n.rank+".")});var a=r.rank===1?r.size:r.shape[1],s=n.rank===1?n.size:n.shape[0];if(se(a===s,function(){return"Error in dot: inner dimensions of inputs must match, but got "+(a+" and "+s+".")}),r.rank===1&&n.rank===1){var o=nt(r,[1,-1]),u=nt(n,[-1,1]),l=Fr(o,u);return nt(l,[])}else if(r.rank===1&&n.rank===2){var o=nt(r,[1,-1]),u=nt(n,[n.shape[0],n.shape[1]]),l=Fr(o,u);return nt(l,[l.size])}else if(r.rank===2&&n.rank===1){var u=nt(n,[-1,1]),l=Fr(r,u);return nt(l,[l.size])}else{var u=nt(n,[n.shape[0],n.shape[1]]),l=Fr(r,u);return l}}var GAe=pe({dot_:WAe});function HAe(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=e.map(function(s,o){return te(s,"tensors"+o,"einsum")}),a={equation:t};return ve.runKernel(kV,n,a)}var KAe=pe({einsum_:HAe});function ZAe(t){var e=te(t,"x","elu","float32"),r={x:e};return ve.runKernel(TV,r)}var MH=pe({elu_:ZAe});function JAe(t){var e=te(t,"x","erf");se(e.dtype==="int32"||e.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),e.dtype==="int32"&&(e=Vn(e,"float32"));var r={x:e};return ve.runKernel(NV,r)}var YAe=pe({erf_:JAe});function dN(t,e){for(var r=0;r<t.length;++r)if(t[t.length-r-1]!==e-1-r)return!1;return!0}function AH(t,e,r){for(var n=t.length+e.length,a=[],s=0,o=0,u=0;u<n;u++)r.indexOf(u)===-1?a.push(t[s++]):a.push(e[o++]);return a}function XAe(t,e){for(var r=[],n=t.length,a=0;a<n;a++)e.indexOf(a)===-1&&r.push(t[a]);var s=e.map(function(o){return t[o]});return[r,s]}function ay(t,e){var r=e.map(function(n){return 1});return AH(t,r,e)}function QAe(t,e,r){se(dN(e,r),function(){return t+" supports only inner-most axes for now. "+("Got axes "+e+" and rank-"+r+" input.")})}function eke(t,e){if(dN(t,e))return null;for(var r=[],n=0;n<e;++n)t.indexOf(n)===-1&&r.push(n);return t.forEach(function(a){return r.push(a)}),r}function tke(t){return t.map(function(e,r){return[r,e]}).sort(function(e,r){return e[1]-r[1]}).map(function(e){return e[0]})}function rke(t,e){for(var r=[],n=e-t;n<e;++n)r.push(n);return r}function nke(t,e,r){e===void 0&&(e=null),r===void 0&&(r=!1);var n=te(t,"x","max"),a={x:n},s={reductionIndices:e,keepDims:r};return ve.runKernel(aW,a,s)}var qp=pe({max_:nke});function ike(t,e,r){e===void 0&&(e=null),r===void 0&&(r=!1);var n=te(t,"x","min"),a={x:n},s={axis:e,keepDims:r};return ve.runKernel(cW,a,s)}var j4=pe({min_:ike});function ake(t,e){var r,n=te(t,"base","pow"),a=te(e,"exp","pow");r=wt(Rn(n,a),2),n=r[0],a=r[1];var s={a:n,b:a};return ve.runKernel(AW,s)}var Zg=pe({pow_:ake});function Br(t,e){if((Ji(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Ji(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");var r=[],n=[];return Fl(t,r,n,e)}function ske(t){var e=te(t,"x","sqrt","float32"),r={x:e};return ve.runKernel(JW,r)}var vf=pe({sqrt_:ske});function oke(t){var e=te(t,"x","square"),r={};return ve.runKernel("Square",{x:e},r)}var $o=pe({square_:oke});function uke(t,e,r){e===void 0&&(e=null),r===void 0&&(r=!1);var n=te(t,"x","sum");n.dtype==="bool"&&(n=Vn(n,"int32"));var a={x:n},s={axis:e,keepDims:r};return ve.runKernel(YW,a,s)}var gn=pe({sum_:uke});function fke(t,e,r,n){e===void 0&&(e="euclidean"),r===void 0&&(r=null),n===void 0&&(n=!1),t=te(t,"x","norm");var a=kH(t,e,r),s=a.shape;if(n){var o=ey(r,t.shape);s=ay(a.shape,o)}return nt(a,s)}function kH(t,e,r){if(r===void 0&&(r=null),t.rank===0)return is(t);if(t.rank!==1&&r===null)return kH(nt(t,[-1]),e,r);if(t.rank===1||typeof r=="number"||Array.isArray(r)&&r.length===1){if(e===1)return gn(is(t),r);if(e===1/0)return qp(is(t),r);if(e===-1/0)return j4(is(t),r);if(e==="euclidean"||e===2)return vf(gn(Zg(is(t),Br(2,"int32")),r));throw new Error("Error in norm: invalid ord value: "+e)}if(Array.isArray(r)&&r.length===2){if(e===1)return qp(gn(is(t),r[0]),r[1]-1);if(e===1/0)return qp(gn(is(t),r[1]),r[0]);if(e===-1/0)return j4(gn(is(t),r[1]),r[0]);if(e==="fro"||e==="euclidean")return vf(gn($o(t),r));throw new Error("Error in norm: invalid ord value: "+e)}throw new Error("Error in norm: invalid axis: "+r)}var V2=pe({norm_:fke});function lke(t,e,r){return e===void 0&&(e=null),r===void 0&&(r=!1),V2(t,"euclidean",e,r)}var cke=pe({euclideanNorm_:lke});function hke(t){var e=te(t,"x","exp"),r={x:e};return ve.runKernel(DV,r)}var Ah=pe({exp_:hke});function dke(t,e){e===void 0&&(e=0);var r=te(t,"x","expandDims","string_or_numeric");se(e<=r.rank,function(){return"Axis must be <= rank of the tensor"});var n={input:r},a={dim:e};return ve.runKernel(OV,n,a)}var vh=pe({expandDims_:dke});function pke(t){var e=te(t,"x","expm1"),r={x:e};return ve.runKernel(RV,r)}var mke=pe({expm1_:pke});function vke(t,e){var r=te(t,"x","tile","string_or_numeric");se(r.rank===e.length,function(){return"Error in transpose: rank of input "+r.rank+" "+("must match length of reps "+e+".")});var n={x:r},a={reps:e};return ve.runKernel(J4,n,a)}var $g=pe({tile_:vke});function gke(t,e,r,n){n===void 0&&(n="float32"),e==null&&(e=t);for(var a=mf([t,e],n),s=t<=e?t:e,o=0;o<s;++o)a.set(1,o,o);var u=nt(a.toTensor(),[t,e]);if(r==null)return u;if(r.length===1)return $g(vh(u,0),[r[0],1,1]);if(r.length===2)return $g(vh(vh(u,0),0),[r[0],r[1],1,1]);if(r.length===3)return $g(vh(vh(vh(u,0),0),0),[r[0],r[1],r[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+("batchShapes, but received "+r.length+"D."))}var TH=pe({eye_:gke});function W2(t,e,r){var n={shape:t,value:e,dtype:r};return ve.runKernel(FV,{},n)}function yke(t){var e=te(t,"x","floor","float32"),r={x:e};return ve.runKernel(LV,r)}var NH=pe({floor_:yke});function bke(t,e,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var a=te(t,"x","gather"),s=te(e,"indices","gather","int32"),o={x:a,indices:s},u={axis:r,batchDims:n};return ve.runKernel($V,o,u)}var IH=pe({gather_:bke});function wke(t,e){var r,n=te(t,"a","greater","string_or_numeric"),a=te(e,"b","greater","string_or_numeric");r=wt(Rn(n,a),2),n=r[0],a=r[1],li(n.shape,a.shape);var s={a:n,b:a};return ve.runKernel(jV,s)}var G2=pe({greater_:wke});function _ke(t,e){var r,n=te(t,"a","greaterEqual","string_or_numeric"),a=te(e,"b","greaterEqual","string_or_numeric");r=wt(Rn(n,a),2),n=r[0],a=r[1],li(n.shape,a.shape);var s={a:n,b:a};return ve.runKernel(UV,s)}var DH=pe({greaterEqual_:_ke});function xke(t){var e=te(t,"x","isFinite"),r={x:e};return ve.runKernel(GV,r)}var Ske=pe({isFinite_:xke});function Eke(t){var e=te(t,"x","isInf"),r={x:e};return ve.runKernel(HV,r)}var Mke=pe({isInf_:Eke});function Ake(t){var e=te(t,"x","isNaN"),r={x:e};return ve.runKernel(KV,r)}var kke=pe({isNaN_:Ake});function Tke(t,e){e===void 0&&(e=.2);var r=te(t,"x","leakyRelu"),n={x:r},a={alpha:e};return ve.runKernel(ZV,n,a)}var OH=pe({leakyRelu_:Tke});function Nke(t,e){var r,n=te(t,"a","less","string_or_numeric"),a=te(e,"b","less","string_or_numeric");r=wt(Rn(n,a),2),n=r[0],a=r[1],li(n.shape,a.shape);var s={a:n,b:a};return ve.runKernel(JV,s)}var Ike=pe({less_:Nke});function Dke(t,e){var r,n=te(t,"a","lessEqual","string_or_numeric"),a=te(e,"b","lessEqual","string_or_numeric");r=wt(Rn(n,a),2),n=r[0],a=r[1],li(n.shape,a.shape);var s={a:n,b:a};return ve.runKernel(YV,s)}var pN=pe({lessEqual_:Dke});function Oke(t,e,r){if(r<=0)throw new Error("The number of values should be positive.");var n={start:t,stop:e,num:r};return ve.runKernel(XV,{},n)}function Rke(t,e,r,n,a){e===void 0&&(e=5),r===void 0&&(r=1),n===void 0&&(n=1),a===void 0&&(a=.5);var s=te(t,"x","localResponseNormalization");se(s.rank===4||s.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+s.rank+"."}),se($p(e),function(){return"Error in localResponseNormalization: depthRadius must be an "+("integer but got depthRadius "+e+".")});var o=s,u=!1;s.rank===3&&(u=!0,o=nt(s,[1,s.shape[0],s.shape[1],s.shape[2]]));var l={x:o},h={depthRadius:e,bias:r,alpha:n,beta:a},p=ve.runKernel(iW,l,h);return u?nt(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var Cke=pe({localResponseNormalization_:Rke});function Fke(t){var e=te(t,"x","log","float32"),r={x:e};return ve.runKernel(QV,r)}var Jg=pe({log_:Fke});function Bke(t){var e=te(t,"x","log1p"),r={x:e};return ve.runKernel(eW,r)}var RH=pe({log1p_:Bke});function Lke(t){return se(Dl(t),function(){return"The f passed in grad(f) must be a function"}),function(e,r){var n=te(e,"x","tf.grad","string_or_numeric"),a=r!=null?te(r,"dy","tf.grad"):null;return ve.tidy(function(){var s=ve.gradients(function(){return t(n)},[n],a),o=s.value,u=s.grads;return a!=null&&la(o.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),H2(u),u[0]})}}function Pke(t){return se(Dl(t),function(){return"The f passed in grads(f) must be a function"}),function(e,r){se(Array.isArray(e),function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"});var n=Gg(e,"args","tf.grads","string_or_numeric"),a=r!=null?te(r,"dy","tf.grads"):null;return ve.tidy(function(){var s=ve.gradients(function(){return t.apply(void 0,Ir(n))},n,a),o=s.value,u=s.grads;return a!=null&&la(o.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),H2(u),u})}}function qke(t){return se(Dl(t),function(){return"The f passed in valueAndGrad(f) must be a function"}),function(e,r){se(e instanceof ui,function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"}),se(r==null||r instanceof ui,function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"});var n=ve.gradients(function(){return t(e)},[e],r),a=n.grads,s=n.value;return H2(a),{grad:a[0],value:s}}}function $ke(t){return se(Dl(t),function(){return"The f passed in valueAndGrads(f) must be a function"}),function(e,r){se(Array.isArray(e)&&e.every(function(a){return a instanceof ui}),function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"}),se(r==null||r instanceof ui,function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"});var n=ve.gradients(function(){return t.apply(void 0,Ir(e))},e,r);return r!=null&&la(n.value.shape,r.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),H2(n.grads),n}}function CH(t,e){se(Dl(t),function(){return"The f passed in variableGrads(f) must be a function"}),se(e==null||Array.isArray(e)&&e.every(function(v){return v instanceof Wg}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var r=e!=null;if(!r){e=[];for(var n in ve.registeredVariables)e.push(ve.registeredVariables[n])}var a=r?e.filter(function(v){return!v.trainable}):null,s=e.length;e=e.filter(function(v){return v.trainable}),se(e.length>0,function(){return"variableGrads() expects at least one of the input variables to "+("be trainable, but none of the "+s+" variables is ")+"trainable."});var o=!0,u=ve.gradients(t,e,null,o),l=u.value,h=u.grads;se(h.some(function(v){return v!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),se(l.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it "+("returned a rank-"+l.rank+" tensor")});var p={};return e.forEach(function(v,y){h[y]!=null&&(p[v.name]=h[y])}),a!=null&&a.forEach(function(v){return p[v.name]=null}),{value:l,grads:p}}function Du(t){return ve.customGrad(t)}function H2(t){var e=t.filter(function(r){return r==null}).length;if(e>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}function zke(t){var e=te(t,"x","softplus"),r={x:e};return ve.runKernel(ZW,r)}var FH=pe({softplus_:zke});function jke(t){var e=te(t,"x","logSigmoid"),r=Du(function(n){var a=pf(FH(pf(n))),s=function(o){var u=pt(o,Pp(pf(n)));return u};return{value:a,gradFunc:s}});return r(e)}var Uke=pe({logSigmoid_:jke});function Vke(t,e){var r,n=te(t,"a","sub"),a=te(e,"b","sub");r=wt(Rn(n,a),2),n=r[0],a=r[1];var s={a:n,b:a};return ve.runKernel(cG,s)}var Jt=pe({sub_:Vke});function Wke(t,e){e===void 0&&(e=-1);var r=te(t,"logits","logSoftmax");if(e===-1&&(e=r.rank-1),e!==r.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+("Logits was rank "+r.rank+" and axis was "+e));var n=Du(function(a,s){var o=!0,u=qp(a,e,!0),l=Jt(a,u),h=Jt(Vn(l,"float32"),Jg(gn(Ah(l),e,o)));s([h]);var p=function(v,y){var S=wt(y,1),A=S[0],T=!0,I=Ah(A);return Jt(v,pt(gn(v,e,T),I))};return{value:h,gradFunc:p}});return n(r)}var Gke=pe({logSoftmax_:Wke});function Hke(t,e,r){e===void 0&&(e=null),r===void 0&&(r=!1);var n=te(t,"x","logSumExp"),a=ey(e,n.shape),s=qp(n,a,!0),o=Jt(n,s),u=Ah(o),l=gn(u,a),h=Jg(l),p=It(nt(s,h.shape),h);if(r){var v=ay(p.shape,a);return nt(p,v)}return p}var BH=pe({logSumExp_:Hke});function Kke(t,e){var r=te(t,"a","logicalAnd","bool"),n=te(e,"b","logicalAnd","bool");li(r.shape,n.shape);var a={a:r,b:n};return ve.runKernel(tW,a)}var C2=pe({logicalAnd_:Kke});function Zke(t){var e=te(t,"x","logicalNot","bool"),r={x:e};return ve.runKernel(rW,r)}var LH=pe({logicalNot_:Zke});function Jke(t,e){var r=te(t,"a","logicalOr","bool"),n=te(e,"b","logicalOr","bool");li(r.shape,n.shape);var a={a:r,b:n};return ve.runKernel(nW,a)}var PH=pe({logicalOr_:Jke});function Yke(t,e){var r=te(t,"a","logicalXor","bool"),n=te(e,"b","logicalXor","bool");return li(r.shape,n.shape),C2(PH(t,e),LH(C2(t,e)))}var Xke=pe({logicalXor_:Yke});var y2=2147483648;function Qke(t,e,r){r===void 0&&(r="left");var n=te(t,"sortedSequence","searchSorted"),a=te(e,"values","searchSorted"),s=n.shape[n.shape.length-1],o=a.shape[a.shape.length-1],u=nt(n,[-1,s]),l=nt(a,[-1,o]);if(u.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(u.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(bn(l.shape)>=y2)throw new Error("values tensor size must less than "+y2);if(u.shape[1]>=y2)throw new Error("trailing dim_size must less than "+y2+" for int32 output type, was "+u.shape[1]);var h={sortedSequence:u,values:l},p={side:r};return ve.runKernel(zW,h,p)}var mN=pe({searchSorted_:Qke});function eTe(t,e){return mN(t,e,"left")}function tTe(t,e,r,n,a){var s=te(t,"x","maxPool"),o=1,u=s,l=!1;s.rank===3&&(l=!0,u=nt(s,[1,s.shape[0],s.shape[1],s.shape[2]])),se(u.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+u.rank+"."}),se(yf(r,o),function(){return"Error in maxPool: Either strides or dilations must be 1. "+("Got strides "+r+" and dilations '"+o+"'")}),Ks("maxPool",n,a);var h={x:u},p={filterSize:e,strides:r,pad:n,dimRoundingMode:a},v=ve.runKernel(oW,h,p);return l?nt(v,[v.shape[1],v.shape[2],v.shape[3]]):v}var qH=pe({maxPool_:tTe});function rTe(t,e,r,n,a,s){e===void 0&&(e=[1,1,1]),s===void 0&&(s="NDHWC");var o=te(t,"x","maxPool3d"),u=o,l=!1;o.rank===4&&(l=!0,u=nt(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),se(u.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),se(s==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+("but got dataFormat of "+s)}),Ks("maxPool3d",n,a);var h={x:u},p={filterSize:e,strides:r,pad:n,dimRoundingMode:a,dataFormat:s},v=ve.runKernel(uW,h,p);return l?nt(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}var nTe=pe({maxPool3d_:rTe});function iTe(t,e,r,n,a){a===void 0&&(a=!1);var s=te(t,"x","maxPoolWithArgmax"),o={x:s},u={filterSize:e,strides:r,pad:n,includeBatchInIndex:a},l=ve.runKernel(fW,o,u);return{result:l[0],indexes:l[1]}}var aTe=pe({maxPoolWithArgmax_:iTe});function sTe(t,e){var r,n=te(t,"a","maximum"),a=te(e,"b","maximum");r=wt(Rn(n,a),2),n=r[0],a=r[1],n.dtype==="bool"&&(n=Vn(n,"int32"),a=Vn(a,"int32")),li(n.shape,a.shape);var s={a:n,b:a};return ve.runKernel(sW,s)}var $H=pe({maximum_:sTe});function oTe(t,e,r){e===void 0&&(e=null),r===void 0&&(r=!1);var n=te(t,"x","mean"),a={x:n},s={axis:e,keepDims:r};return ve.runKernel(lW,a,s)}var F2=pe({mean_:oTe});function Vp(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var r=Vp(t,"float32"),n=Vp(t,"float32");return Ol(r,n)}var a=P2(bn(t),e);return ve.makeTensor(a,t,e)}function wh(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var r=wh(t,"float32"),n=Vp(t,"float32");return Ol(r,n)}var a=U4(bn(t),e);return ve.makeTensor(a,t,e)}function uTe(t,e,r){var n=(r===void 0?{}:r).indexing,a=n===void 0?"xy":n;if(a!=="xy"&&a!=="ij")throw new TypeError(a+" is not a valid third argument to meshgrid");if(t===void 0)return[];var s=te(t,"x","meshgrid",t instanceof ui?t.dtype:"float32");if(e===void 0)return[s];var o=te(e,"y","meshgrid",e instanceof ui?e.dtype:"float32"),u=bn(s.shape),l=bn(o.shape);return a==="xy"?(s=nt(s,[1,-1]),o=nt(o,[-1,1]),[Fr(wh([l,1],s.dtype),s),Fr(o,wh([1,u],o.dtype))]):(s=nt(s,[-1,1]),o=nt(o,[1,-1]),[Fr(s,wh([1,l],s.dtype)),Fr(wh([u,1],o.dtype),o)])}function fTe(t,e){var r,n=te(t,"a","minimum"),a=te(e,"b","minimum");r=wt(Rn(n,a),2),n=r[0],a=r[1],n.dtype==="bool"&&(n=Vn(n,"int32"),a=Vn(a,"int32")),li(n.shape,a.shape);var s={a:n,b:a};return ve.runKernel(hW,s)}var zH=pe({minimum_:fTe});function lTe(t,e,r){se(r==="reflect"||r==="symmetric",function(){return"Invalid mode. Mode must be either reflect or symmetric. "+("Got "+r+".")});var n=te(t,"x","mirrorPad");if(n.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");se(e.length===n.rank,function(){return"Padding doesn't match input. Must be "+n.rank+". "+("Got "+e.length+".")});for(var a=r==="reflect"?1:0,s=function(h){se(e[h].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),se(e[h][0]>=0&&e[h][0]<=n.shape[h]-a&&e[h][1]>=0&&e[h][1]<=n.shape[h]-a,function(){return"Padding in dimension "+h+" cannot be greater than or equal "+("to "+(n.shape[h]-a)+" or less than 0 for input of ")+("shape "+n.shape)})},o=0;o<n.rank;o++)s(o);var u={paddings:e,mode:r},l={x:n};return ve.runKernel(dW,l,u)}var cTe=pe({mirrorPad_:lTe});function hTe(t,e){var r,n=te(t,"a","mod"),a=te(e,"b","mod");r=wt(Rn(n,a),2),n=r[0],a=r[1];var s={a:n,b:a};return ve.runKernel(pW,s)}var dTe=pe({mod_:hTe});function pTe(t,e,r){e===void 0&&(e=null),r===void 0&&(r=!1),t=te(t,"x","moments");var n=ey(e,t.shape),a=F2(t,n,r),s=a.shape;r||(s=ay(a.shape,n));var o=$o(Jt(Vn(t,"float32"),nt(a,s))),u=F2(o,n,r);return{mean:a,variance:u}}var mTe=pe({moments_:pTe});function vTe(t,e,r,n){for(var a=te(e,"data","multiRNNCell"),s=Gg(r,"c","multiRNNCell"),o=Gg(n,"h","multiRNNCell"),u=a,l=[],h=0;h<t.length;h++){var p=t[h](u,s[h],o[h]);l.push(p[0]),l.push(p[1]),u=p[1]}for(var v=[],y=[],h=0;h<l.length;h+=2)v.push(l[h]),y.push(l[h+1]);return[v,y]}var gTe=pe({multiRNNCell_:vTe});function yTe(t,e,r,n){n===void 0&&(n=!1);var a=te(t,"logits","multinomial"),s=a.size,o=a.rank;if(s<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+(s+"."));if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);r=r||Math.random();var u=o===1?nt(a,[1,-1]):a,l={logits:u},h={numSamples:e,seed:r,normalized:n},p=ve.runKernel(mW,l,h);return o===1?nt(p,[p.size]):p}var bTe=pe({multinomial_:yTe});function wTe(t,e){var r,n=te(t,"a","notEqual","string_or_numeric"),a=te(e,"b","notEqual","string_or_numeric");r=wt(Rn(n,a),2),n=r[0],a=r[1],li(n.shape,a.shape);var s={a:n,b:a};return ve.runKernel(yW,s)}var jH=pe({notEqual_:wTe});function _Te(t){var e=te(t,"x","onesLike"),r={x:e};return ve.runKernel(xW,r)}var xTe=pe({onesLike_:_Te});function STe(t,e){var r=te(t,"v1","outerProduct"),n=te(e,"v2","outerProduct");se(r.rank===1&&n.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+(r.rank+" and "+n.rank+".")});var a=nt(r,[-1,1]),s=nt(n,[1,-1]);return Fr(a,s)}var ETe=pe({outerProduct_:STe});function MTe(t,e,r){r===void 0&&(r=0);var n=te(t,"x","pad");if(n.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:e,constantValue:r},s={x:n};return ve.runKernel(MW,s,a)}var sy=pe({pad_:MTe});function ATe(t,e,r){return r===void 0&&(r=0),se(e.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),sy(t,[e],r)}var kTe=pe({pad1d_:ATe});function TTe(t,e,r){return r===void 0&&(r=0),se(e.length===2&&e[0].length===2&&e[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),sy(t,e,r)}var NTe=pe({pad2d_:TTe});function ITe(t,e,r){return r===void 0&&(r=0),se(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),sy(t,e,r)}var DTe=pe({pad3d_:ITe});function OTe(t,e,r){return r===void 0&&(r=0),se(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),sy(t,e,r)}var RTe=pe({pad4d_:OTe});function CTe(t,e,r){var n=te(t,"x","spaceToBatchND");se(n.rank>=1+e.length,function(){return"input rank "+n.rank+" should be > than [blockShape] "+e.length}),se(r.length===e.length,function(){return"paddings.shape[0] "+r.length+" must be equal to [blockShape] "+e.length}),se(n.shape.reduce(function(o,u,l){return l>0&&l<=e.length?o&&(u+r[l-1][0]+r[l-1][1])%e[l-1]===0:o},!0),function(){return"input spatial dimensions "+n.shape.slice(1)+" with paddings "+r.toString()+" must be divisible by blockShapes "+e.toString()});var a={x:n},s={blockShape:e,paddings:r};return ve.runKernel(XW,a,s)}var UH=pe({spaceToBatchND_:CTe});function FTe(t,e,r,n,a,s,o){a==null&&(a=[1,1]),s==null&&(s=1),n===0&&(n="valid");var u=te(t,"x","maxPool"),l=u,h=!1;u.rank===3&&(h=!0,l=nt(u,[1,u.shape[0],u.shape[1],u.shape[2]])),se(yf(s,a),function(){return"Error in pool: Either strides or dilations must be 1. "+("Got strides "+s+" and dilations '"+a+"'")});var p=gH(l.shape,e,s,a,n),v=[p.dilationHeight,p.dilationWidth],y;n==="same"?y=LTe([p.filterHeight,p.filterWidth],v):y=[[0,0],[0,0]];var S=v[0]===1&&v[1]===1,A=wt(BTe([p.inHeight,p.inWidth],v,y),2),T=A[0],I=A[1],N=S?n:"valid",D=S?l:UH(l,v,T),C=r==="avg"?function(){return wH(D,e,s,N,o)}:function(){return qH(D,e,s,N,o)},L=C(),z=S?L:_H(L,v,I);return h?nt(z,[z.shape[1],z.shape[2],z.shape[3]]):z}function BTe(t,e,r){var n=r.map(function(p){return p[0]}),a=r.map(function(p){return p[1]}),s=t.concat(n,a),o=e.map(function(p,v){return(p-s[v]%p)%p}),u=a.map(function(p,v){return p+o[v]}),l=e.map(function(p,v){return[n[v],u[v]]}),h=e.map(function(p,v){return[0,o[v]]});return[l,h]}function LTe(t,e){var r=t.map(function(o,u){return o+(o-1)*(e[u]-1)}),n=r.map(function(o){return o-1}),a=n.map(function(o){return Math.floor(o/2)}),s=n.map(function(o,u){return o-a[u]});return n.map(function(o,u){return[a[u],s[u]]})}var PTe=pe({pool_:FTe});function qTe(t,e){var r=te(t,"x","prelu"),n=te(e,"alpha","prelu"),a={x:r,alpha:n};return ve.runKernel(kW,a)}var VH=pe({prelu_:qTe});function $Te(t,e,r){e===void 0&&(e=null),r===void 0&&(r=!1);var n=te(t,"x","prod");n.dtype==="bool"&&(n=Vn(n,"int32"));var a={x:n},s={axis:e,keepDims:r};return ve.runKernel(TW,a,s)}var zTe=pe({prod_:$Te});function jTe(t,e,r){var n=bn(t),a=null;if(r==null||r==="float32")a=new Float32Array(n);else if(r==="int32")a=new Int32Array(n);else if(r==="bool")a=new Uint8Array(n);else throw new Error("Unknown data type "+r);for(var s=0;s<n;s++)a[s]=e();return ve.makeTensor(a,t,r)}var UTe=pe({rand_:jTe}),Ih=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Dh(t){var e={exports:{}};return t(e,e.exports),e.exports}var VTe=Dh(function(t){(function(e,r,n){function a(l){var h=this,p=u();h.next=function(){var v=2091639*h.s0+h.c*23283064365386963e-26;return h.s0=h.s1,h.s1=h.s2,h.s2=v-(h.c=v|0)},h.c=1,h.s0=p(" "),h.s1=p(" "),h.s2=p(" "),h.s0-=p(l),h.s0<0&&(h.s0+=1),h.s1-=p(l),h.s1<0&&(h.s1+=1),h.s2-=p(l),h.s2<0&&(h.s2+=1),p=null}function s(l,h){return h.c=l.c,h.s0=l.s0,h.s1=l.s1,h.s2=l.s2,h}function o(l,h){var p=new a(l),v=h&&h.state,y=p.next;return y.int32=function(){return p.next()*4294967296|0},y.double=function(){return y()+(y()*2097152|0)*11102230246251565e-32},y.quick=y,v&&(typeof v=="object"&&s(v,p),y.state=function(){return s(p,{})}),y}function u(){var l=4022871197,h=function(p){p=String(p);for(var v=0;v<p.length;v++){l+=p.charCodeAt(v);var y=.02519603282416938*l;l=y>>>0,y-=l,y*=l,l=y>>>0,y-=l,l+=y*4294967296}return(l>>>0)*23283064365386963e-26};return h}r&&r.exports?r.exports=o:n&&n.amd?n(function(){return o}):this.alea=o})(Ih,t,!1)}),WTe=Dh(function(t){(function(e,r,n){function a(u){var l=this,h="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var v=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^v^v>>>8},u===(u|0)?l.x=u:h+=u;for(var p=0;p<h.length+64;p++)l.x^=h.charCodeAt(p)|0,l.next()}function s(u,l){return l.x=u.x,l.y=u.y,l.z=u.z,l.w=u.w,l}function o(u,l){var h=new a(u),p=l&&l.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var y=h.next()>>>11,S=(h.next()>>>0)/4294967296,A=(y+S)/(1<<21);while(A===0);return A},v.int32=h.next,v.quick=v,p&&(typeof p=="object"&&s(p,h),v.state=function(){return s(h,{})}),v}r&&r.exports?r.exports=o:n&&n.amd?n(function(){return o}):this.xor128=o})(Ih,t,!1)}),GTe=Dh(function(t){(function(e,r,n){function a(u){var l=this,h="";l.next=function(){var v=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(v^v<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,u===(u|0)?l.x=u:h+=u;for(var p=0;p<h.length+64;p++)l.x^=h.charCodeAt(p)|0,p==h.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(u,l){return l.x=u.x,l.y=u.y,l.z=u.z,l.w=u.w,l.v=u.v,l.d=u.d,l}function o(u,l){var h=new a(u),p=l&&l.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var y=h.next()>>>11,S=(h.next()>>>0)/4294967296,A=(y+S)/(1<<21);while(A===0);return A},v.int32=h.next,v.quick=v,p&&(typeof p=="object"&&s(p,h),v.state=function(){return s(h,{})}),v}r&&r.exports?r.exports=o:n&&n.amd?n(function(){return o}):this.xorwow=o})(Ih,t,!1)}),HTe=Dh(function(t){(function(e,r,n){function a(u){var l=this;l.next=function(){var p=l.x,v=l.i,y,S;return y=p[v],y^=y>>>7,S=y^y<<24,y=p[v+1&7],S^=y^y>>>10,y=p[v+3&7],S^=y^y>>>3,y=p[v+4&7],S^=y^y<<7,y=p[v+7&7],y=y^y<<13,S^=y^y<<9,p[v]=S,l.i=v+1&7,S};function h(p,v){var y,S=[];if(v===(v|0))S[0]=v;else for(v=""+v,y=0;y<v.length;++y)S[y&7]=S[y&7]<<15^v.charCodeAt(y)+S[y+1&7]<<13;for(;S.length<8;)S.push(0);for(y=0;y<8&&S[y]===0;++y);for(y==8&&(S[7]=-1),p.x=S,p.i=0,y=256;y>0;--y)p.next()}h(l,u)}function s(u,l){return l.x=u.x.slice(),l.i=u.i,l}function o(u,l){u==null&&(u=+new Date);var h=new a(u),p=l&&l.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var y=h.next()>>>11,S=(h.next()>>>0)/4294967296,A=(y+S)/(1<<21);while(A===0);return A},v.int32=h.next,v.quick=v,p&&(p.x&&s(p,h),v.state=function(){return s(h,{})}),v}r&&r.exports?r.exports=o:n&&n.amd?n(function(){return o}):this.xorshift7=o})(Ih,t,!1)}),KTe=Dh(function(t){(function(e,r,n){function a(u){var l=this;l.next=function(){var p=l.w,v=l.X,y=l.i,S,A;return l.w=p=p+1640531527|0,A=v[y+34&127],S=v[y=y+1&127],A^=A<<13,S^=S<<17,A^=A>>>15,S^=S>>>12,A=v[y]=A^S,l.i=y,A+(p^p>>>16)|0};function h(p,v){var y,S,A,T,I,N=[],D=128;for(v===(v|0)?(S=v,v=null):(v=v+"\0",S=0,D=Math.max(D,v.length)),A=0,T=-32;T<D;++T)v&&(S^=v.charCodeAt((T+32)%v.length)),T===0&&(I=S),S^=S<<10,S^=S>>>15,S^=S<<4,S^=S>>>13,T>=0&&(I=I+1640531527|0,y=N[T&127]^=S+I,A=y==0?A+1:0);for(A>=128&&(N[(v&&v.length||0)&127]=-1),A=127,T=4*128;T>0;--T)S=N[A+34&127],y=N[A=A+1&127],S^=S<<13,y^=y<<17,S^=S>>>15,y^=y>>>12,N[A]=S^y;p.w=I,p.X=N,p.i=A}h(l,u)}function s(u,l){return l.i=u.i,l.w=u.w,l.X=u.X.slice(),l}function o(u,l){u==null&&(u=+new Date);var h=new a(u),p=l&&l.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var y=h.next()>>>11,S=(h.next()>>>0)/4294967296,A=(y+S)/(1<<21);while(A===0);return A},v.int32=h.next,v.quick=v,p&&(p.X&&s(p,h),v.state=function(){return s(h,{})}),v}r&&r.exports?r.exports=o:n&&n.amd?n(function(){return o}):this.xor4096=o})(Ih,t,!1)}),ZTe=Dh(function(t){(function(e,r,n){function a(u){var l=this,h="";l.next=function(){var v=l.b,y=l.c,S=l.d,A=l.a;return v=v<<25^v>>>7^y,y=y-S|0,S=S<<24^S>>>8^A,A=A-v|0,l.b=v=v<<20^v>>>12^y,l.c=y=y-S|0,l.d=S<<16^y>>>16^A,l.a=A-v|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,u===Math.floor(u)?(l.a=u/4294967296|0,l.b=u|0):h+=u;for(var p=0;p<h.length+20;p++)l.b^=h.charCodeAt(p)|0,l.next()}function s(u,l){return l.a=u.a,l.b=u.b,l.c=u.c,l.d=u.d,l}function o(u,l){var h=new a(u),p=l&&l.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var y=h.next()>>>11,S=(h.next()>>>0)/4294967296,A=(y+S)/(1<<21);while(A===0);return A},v.int32=h.next,v.quick=v,p&&(typeof p=="object"&&s(p,h),v.state=function(){return s(h,{})}),v}r&&r.exports?r.exports=o:n&&n.amd?n(function(){return o}):this.tychei=o})(Ih,t,!1)}),Oh=Dh(function(t){(function(e,r,n){var a=256,s=6,o=52,u="random",l=n.pow(a,s),h=n.pow(2,o),p=h*2,v=a-1,y;function S(L,z,$){var G=[];z=z==!0?{entropy:!0}:z||{};var j=N(I(z.entropy?[L,C(r)]:L==null?D():L,3),G),K=new A(G),M=function(){for(var f=K.g(s),d=l,g=0;f<h;)f=(f+g)*a,d*=a,g=K.g(1);for(;f>=p;)f/=2,d/=2,g>>>=1;return(f+g)/d};return M.int32=function(){return K.g(4)|0},M.quick=function(){return K.g(4)/4294967296},M.double=M,N(C(K.S),r),(z.pass||$||function(f,d,g,m){return m&&(m.S&&T(m,K),f.state=function(){return T(K,{})}),g?(n[u]=f,d):f})(M,j,"global"in z?z.global:this==n,z.state)}function A(L){var z,$=L.length,G=this,j=0,K=G.i=G.j=0,M=G.S=[];for($||(L=[$++]);j<a;)M[j]=j++;for(j=0;j<a;j++)M[j]=M[K=v&K+L[j%$]+(z=M[j])],M[K]=z;(G.g=function(f){for(var d,g=0,m=G.i,b=G.j,E=G.S;f--;)d=E[m=v&m+1],g=g*a+E[v&(E[m]=E[b=v&b+d])+(E[b]=d)];return G.i=m,G.j=b,g})(a)}function T(L,z){return z.i=L.i,z.j=L.j,z.S=L.S.slice(),z}function I(L,z){var $=[],G=typeof L,j;if(z&&G=="object")for(j in L)try{$.push(I(L[j],z-1))}catch{}return $.length?$:G=="string"?L:L+"\0"}function N(L,z){for(var $=L+"",G,j=0;j<$.length;)z[v&j]=v&(G^=z[v&j]*19)+$.charCodeAt(j++);return C(z)}function D(){try{var L;return y&&(L=y.randomBytes)?L=L(a):(L=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(L)),C(L)}catch{var z=e.navigator,$=z&&z.plugins;return[+new Date,e,$,e.screen,C(r)]}}function C(L){return String.fromCharCode.apply(0,L)}if(N(n.random(),r),t.exports){t.exports=S;try{y=i_()}catch{}}else n["seed"+u]=S})(typeof self!="undefined"?self:Ih,[],Math)});Oh.alea=VTe;Oh.xor128=WTe;Oh.xorwow=GTe;Oh.xorshift7=HTe;Oh.xor4096=KTe;Oh.tychei=ZTe;var vN=Oh;var gN=function(){function t(e,r,n,a,s){this.mean=e,this.stdDev=r,this.dtype=n,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);var o=s||Math.random();this.random=vN.alea(o.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var r,n,a=!1;!a;){var s=void 0,o=void 0,u=void 0;do s=2*this.random()-1,o=2*this.random()-1,u=s*s+o*o;while(u>=1||u===0);var l=Math.sqrt(-2*Math.log(u)/u);r=this.mean+this.stdDev*s*l,n=this.mean+this.stdDev*o*l,(!this.truncated||this.isValidTruncated(r))&&(a=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(r)},t.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},t.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},t}(),JTe=function(){function t(e,r,n,a){this.alpha=e,this.beta=1/r,this.dtype=n;var s=a||Math.random();this.randu=vN.alea(s.toString()),this.randn=new gN(0,1,n,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var e,r,n,a,s,o;;){do a=this.randn.nextValue(),o=1+this.c*a;while(o<=0);if(o*=o*o,e=a*a,r=1-.331*e*e,n=.5*e+this.d*(1-o+Math.log(o)),s=this.randu(),s<r||Math.log(s)<n)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},t.prototype.convertValue=function(e){return this.dtype==="float32"?e:Math.round(e)},t}(),YTe=function(){function t(e,r,n,a){var s=this;if(e===void 0&&(e=0),r===void 0&&(r=1),this.canReturnFloat=function(){return s.dtype==null||s.dtype==="float32"},this.min=e,this.range=r-e,this.dtype=n,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+r+" <= 1 and dtype is not float");this.random=vN.alea(a)}return t.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}();function XTe(t,e,r,n,a){if(r===void 0&&(r=1),n===void 0&&(n="float32"),r==null&&(r=1),n==null&&(n="float32"),n!=="float32"&&n!=="int32")throw new Error("Unsupported data type "+n);for(var s=new JTe(e,r,n,a),o=mf(t,n),u=0;u<o.values.length;u++)o.values[u]=s.nextValue();return o.toTensor()}var QTe=pe({randomGamma_:XTe});function e6e(t,e,r,n,a){if(e===void 0&&(e=0),r===void 0&&(r=1),n!=null&&n==="bool")throw new Error("Unsupported data type "+n);for(var s=new gN(e,r,n,!1,a),o=mf(t,n),u=0;u<o.values.length;u++)o.values[u]=s.nextValue();return o.toTensor()}var WH=pe({randomNormal_:e6e});function t6e(t,e,r){if(e!=null&&e==="bool")throw new Error("Unsupported data type "+e);return WH(t,0,1,e,r)}var r6e=pe({randomStandardNormal_:t6e});function n6e(t,e,r,n,a){e===void 0&&(e=0),r===void 0&&(r=1),n===void 0&&(n="float32");for(var s=mf(t,n),o=new YTe(e,r,null,a),u=0;u<s.values.length;u++)s.values[u]=o.nextValue();return s.toTensor()}var GH=pe({randomUniform_:n6e});function Yg(t,e,r,n){if(r===void 0&&(r=1),n===void 0&&(n="float32"),r===0)throw new Error("Cannot have a step of zero");var a={start:t,stop:e,step:r,dtype:n};return ve.runKernel(NW,{},a)}function i6e(t){var e=te(t,"x","reciprocal"),r={x:e};return ve.runKernel(DW,r)}var a6e=pe({reciprocal_:i6e});function s6e(t){var e=te(t,"x","relu"),r={x:e};return ve.runKernel(OW,r)}var K2=pe({relu_:s6e});function o6e(t){var e=te(t,"x","relu6"),r={x:e};return ve.runKernel(BW,r)}var HH=pe({relu6_:o6e});function u6e(t,e){var r=te(t,"x","reverse"),n={x:r},a={dims:e};return ve.runKernel(LW,n,a)}var kh=pe({reverse_:u6e});function f6e(t){var e=te(t,"x","reverse");return se(e.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),kh(e,0)}var l6e=pe({reverse1d_:f6e});function c6e(t,e){var r=te(t,"x","reverse");return se(r.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+r.rank+"."}),kh(r,e)}var h6e=pe({reverse2d_:c6e});function d6e(t,e){var r=te(t,"x","reverse");return se(r.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+r.rank+"."}),kh(r,e)}var p6e=pe({reverse3d_:d6e});function m6e(t,e){var r=te(t,"x","reverse");return se(r.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+r.rank+"."}),kh(r,e)}var v6e=pe({reverse4d_:m6e});function g6e(t){var e=te(t,"x","round"),r={x:e};return ve.runKernel(PW,r)}var KH=pe({round_:g6e});function y6e(t){var e=te(t,"x","rsqrt","float32"),r={x:e};return ve.runKernel(qW,r)}var b6e=pe({rsqrt_:y6e});function w6e(t){var e=te(t,"x","selu"),r={x:e};return ve.runKernel(UW,r)}var _6e=pe({selu_:w6e});function x6e(t,e,r,n,a,s,o){s===void 0&&(s=[1,1]),o===void 0&&(o="NHWC");var u=te(t,"x","separableConv2d"),l=te(e,"depthwiseFilter","separableConv2d"),h=te(r,"pointwiseFilter","separableConv2d"),p=u,v=!1;if(u.rank===3&&(v=!0,p=nt(u,[1,u.shape[0],u.shape[1],u.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");se(p.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got "+("rank "+p.rank+".")}),se(l.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+("got rank "+l.rank+".")}),se(h.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+("got rank "+l.rank+".")}),se(h.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter "+(" must be 1, but got "+h.shape[0]+".")}),se(h.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise "+("filter must be 1, but got "+h.shape[1]+".")});var y=l.shape[2],S=l.shape[3];se(h.shape[2]===y*S,function(){return"Error in separableConv2d: the third dimension of pointwise filter "+("must be "+y*S+", ")+("but got "+h.shape[2]+".")});var A=hN(p,l,n,a,o,s),T=1,I=U2(A,h,T,"valid",o);return v?nt(I,[I.shape[1],I.shape[2],I.shape[3]]):I}var S6e=pe({separableConv2d_:x6e});function E6e(t,e){return xt(this,void 0,void 0,function(){var r,n,a,s,o,u,p,l,h,p,v;return St(this,function(y){switch(y.label){case 0:return r=te(t,"x","setdiff1d"),n=te(e,"y","setdiff1d"),se(r.dtype===n.dtype,function(){return"x and y should have the same dtype, but got x ("+r.dtype+") and y ("+n.dtype+")."}),se(r.rank===1,function(){return"x should be 1D tensor, but got x ("+r.shape+")."}),se(n.rank===1,function(){return"y should be 1D tensor, but got y ("+n.shape+")."}),[4,r.data()];case 1:return a=y.sent(),[4,n.data()];case 2:for(s=y.sent(),o=new Set(s),u=0,p=0;p<a.length;p++)o.has(a[p])||u++;for(l=new N2([u],r.dtype),h=new N2([u],"int32"),p=0,v=0;p<a.length;p++)o.has(a[p])||(l.values[v]=a[p],h.values[v]=p,v++);return[2,[l.toTensor(),h.toTensor()]]}})})}var M6e=E6e;function A6e(t){var e=te(t,"x","sign"),r={x:e};return ve.runKernel(HW,r)}var k6e=pe({sign_:A6e});function T6e(t){var e=te(t,"x","sin","float32"),r={x:e};return ve.runKernel(WW,r)}var N6e=pe({sin_:T6e});function I6e(t){var e=te(t,"x","sinh"),r={x:e};return ve.runKernel(GW,r)}var D6e=pe({sinh_:I6e});function O6e(t,e,r){var n=te(t,"x","slice1d");return se(n.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+n.rank+" tensor"}),Tn(n,[e],[r])}var R6e=pe({slice1d_:O6e});function C6e(t,e,r){var n=te(t,"x","slice2d");return se(n.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+n.rank+" tensor"}),Tn(n,e,r)}var F6e=pe({slice2d_:C6e});function B6e(t,e,r){var n=te(t,"x","slice3d");return se(n.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+n.rank+" tensor"}),Tn(n,e,r)}var L6e=pe({slice3d_:B6e});function P6e(t,e,r){var n=te(t,"x","slice4d");return se(n.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+n.rank+" tensor"}),Tn(n,e,r)}var q6e=pe({slice4d_:P6e});function $6e(t,e){e===void 0&&(e=-1);var r=te(t,"logits","softmax","float32");if(e===-1&&(e=r.rank-1),e!==r.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+("Logits was rank "+r.rank+" and dim was "+e));var n={logits:r},a={dim:e};return ve.runKernel(eG,n,a)}var z6e=pe({softmax_:$6e});function j6e(t){se(t.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 "+("but got "+t.dtype+".")});var e={input:t};return ve.runKernel(CV,e)}var yN=pe({fft_:j6e});function U6e(t){se(t.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 "+("but got "+t.dtype+".")});var e={input:t};return ve.runKernel(VV,e)}var B2=pe({ifft_:U6e});function V6e(t){var e=t.shape[t.shape.length-1],r=t.size/e,n;if(e<=2){var a=nt(t,[r,e]);n=B2(a)}else{var s=[r,2*(e-1)],o=nt(Hg(t),[r,e]),u=nt(z2(t),[r,e]),l=kh(Tn(o,[0,1],[r,e-2]),1),h=pt(kh(Tn(u,[0,1],[r,e-2]),1),Br(-1)),p=za([o,l],1),v=za([u,h],1),a=nt(Ol(p,v),[s[0],s[1]]);n=B2(a)}if(n=Hg(n),t.rank===3&&t.shape[0]!==0){var y=n,S=t.shape[0];n=nt(n,[S,n.shape[0]/S,n.shape[1]]),y.dispose()}return n}var ZH=pe({irfft_:V6e});function W6e(t,e,r){r===void 0&&(r=0);var n=te(t,"x","split"),a={x:n},s={numOrSizeSplits:e,axis:r};return ve.runKernel(QW,a,s)}var Xg=pe({split_:W6e});function G6e(t,e){se(t.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+t.dtype});var r=t.shape[t.shape.length-1],n=t.size/r,a;if(e!=null&&e<r){var s=t.shape.map(function(N){return 0}),o=t.shape.map(function(N){return N});o[t.shape.length-1]=e,a=Tn(t,s,o),r=e}else if(e!=null&&e>r){var u=t.shape.map(function(N){return N});u[t.shape.length-1]=e-r,a=za([t,Vp(u)],t.shape.length-1),r=e}else a=t;var l=as(a),h=nt(Ol(a,l),[n,r]),p=yN(h),v=Math.floor(r/2)+1,y=Hg(p),S=z2(p),A=Xg(y,[v,r-v],y.shape.length-1),T=Xg(S,[v,r-v],S.shape.length-1),I=a.shape.slice();return I[a.shape.length-1]=v,nt(Ol(A[0],T[0]),I)}var bN=pe({rfft_:G6e});function H6e(t,e){var r,n=te(t,"a","squaredDifference"),a=te(e,"b","squaredDifference");r=wt(Rn(n,a),2),n=r[0],a=r[1],li(n.shape,a.shape);var s={a:n,b:a},o={};return ve.runKernel(sG,s,o)}var JH=pe({squaredDifference_:H6e});function K6e(t,e){var r=te(t,"x","squeeze","string_or_numeric");return nt(r,TU(r.shape,e).newShape)}var wN=pe({squeeze_:K6e});function Z6e(t,e){e===void 0&&(e=0);var r=Gg(t,"tensors","stack","string_or_numeric");se(r.length>=1,function(){return"Pass at least one tensor to tf.stack"}),r.length>0&&se(e<=r[0].rank,function(){return"Axis must be <= rank of the tensor"});var n=r,a={axis:e};return ve.runKernel(EW,n,a)}var Qg=pe({stack_:Z6e});function J6e(t,e){e===void 0&&(e=0);var r=te(t,"x","step"),n={x:r},a={alpha:e};return ve.runKernel(wG,n,a)}var YH=pe({step_:J6e});function Y6e(t,e,r,n,a,s,o,u,l){a===void 0&&(a=0),s===void 0&&(s=0),o===void 0&&(o=0),u===void 0&&(u=0),l===void 0&&(l=0);var h=te(t,"x","stridedSlice","string_or_numeric"),p={x:h},v={begin:e,end:r,strides:n,beginMask:a,endMask:s,ellipsisMask:o,newAxisMask:u,shrinkAxisMask:l};return ve.runKernel(oG,p,v)}var X6e=pe({stridedSlice_:Y6e});function Q6e(t){var e=te(t,"x","tan","float32"),r={x:e};return ve.runKernel(hG,r)}var e4e=pe({tan_:Q6e});function qo(t,e){Th(t);var r=Iu(t,e);if(r.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");var n=null;return Fl(t,n,r,e)}function zg(t,e,r){if(Th(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var n=Iu(t,r);if(n.length!==2&&n.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(n.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Fl(t,e,n,r)}function t4e(t,e,r){if(Th(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var n=Iu(t,r);if(n.length!==4&&n.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(n.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Fl(t,e,n,r)}function r4e(t,e,r){if(Th(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var n=Iu(t,r);if(n.length!==5&&n.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(n.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Fl(t,e,n,r)}function n4e(t,e,r){if(Th(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var n=Iu(t,r);if(n.length!==6&&n.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(n.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||n,Fl(t,e,n,r)}function i4e(t,e,r){e===void 0&&(e=1),r===void 0&&(r=!0);var n=te(t,"x","topk");if(n.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var a=n.shape[n.shape.length-1];if(e<0)throw new Error("'k' passed to topk() must be >= 0 but got "+e);if(e>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") "+("but got "+e));var s={x:n},o={k:e,sorted:r},u=wt(ve.runKernel(pG,s,o),2),l=u[0],h=u[1];return{values:l,indices:h}}var a4e=pe({topk_:i4e});function s4e(t,e,r,n,a){if(e===void 0&&(e=0),r===void 0&&(r=1),n!=null&&n==="bool")throw new Error("Unsupported data type $ { dtype }");for(var s=new gN(e,r,n,!0,a),o=mf(t,n),u=0;u<o.values.length;u++)o.values[u]=s.nextValue();return o.toTensor()}var o4e=pe({truncatedNormal_:s4e});function u4e(t,e){e===void 0&&(e=0);var r=te(t,"x","unique","string_or_numeric");se(r.rank>0,function(){return"The input tensor must be at least 1D"});var n={x:r},a={axis:e},s=wt(ve.runKernel(vG,n,a),2),o=s[0],u=s[1];return{values:o,indices:u}}var f4e=pe({unique_:u4e});function l4e(t,e,r){var n=te(t,"x","unsortedSegmentSum"),a=te(e,"segmentIds","unsortedSegmentSum","int32");se($p(r),function(){return"numSegments must be of dtype int"});var s={x:n,segmentIds:a},o={numSegments:r};return ve.runKernel(yG,s,o)}var c4e=pe({unsortedSegmentSum_:l4e});function h4e(t,e){e===void 0&&(e=0);var r=te(t,"x","unstack","string_or_numeric");se(e>=-r.shape.length&&e<r.shape.length,function(){return"Axis = "+e+" is not in [-"+r.shape.length+", "+r.shape.length+")"});var n={value:r},a={axis:e};return ve.runKernel(gG,n,a)}var _N=pe({unstack_:h4e});function d4e(t,e){return mN(t,e,"right")}function p4e(t,e,r,n){return e===void 0&&(e=!0),ve.makeVariable(t,e,r,n)}function XH(t,e){for(var r=[],n=0;n<e.length;n++)e[n]&&r.push(n);for(var a=mf(t,"int32"),s=mf([r.length,t.length],"int32"),n=0;n<r.length;n++){var o=a.indexToLoc(r[n]),u=n*t.length;s.values.set(o,u)}return s.toTensor()}function m4e(t){return xt(this,void 0,void 0,function(){var e,r,n;return St(this,function(a){switch(a.label){case 0:return e=te(t,"condition","whereAsync","bool"),[4,e.data()];case 1:return r=a.sent(),n=XH(e.shape,r),t!==e&&e.dispose(),[2,n]}})})}var QH=m4e;function v4e(t,e,r){return xt(this,void 0,void 0,function(){var n,a,s,o,u,l,h,p,v,y,S,A,T;return St(this,function(I){switch(I.label){case 0:for(n=te(t,"tensor","boolMask"),a=te(e,"mask","boolMask","bool"),s=r==null?0:r,o=a.rank,u=n.shape,se(o>0,function(){return"mask cannot be scalar"}),la(u.slice(s,s+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),l=1,h=s;h<s+o;h++)l*=u[h];return p=u.slice(0,s).concat([l],u.slice(s+o)),v=nt(n,p),y=nt(a,[-1]),[4,QH(y)];case 1:return S=I.sent(),A=wN(S,[1]),T=IH(v,A,s),t!==n&&n.dispose(),e!==a&&a.dispose(),A.dispose(),v.dispose(),y.dispose(),S.dispose(),[2,T]}})})}var g4e=v4e;function y4e(t,e,r,n,a){a===void 0&&(a=!0);var s=te(t,"v","movingAverage"),o=te(e,"x","movingAverage"),u=te(r,"decay","movingAverage");IG(s,o),se(Cl(s.shape,o.shape),function(){return"Shape mismatch in v and x"});var l=Br(1),h=Jt(l,u),p=pt(Jt(o,s),h);if(a){se(n!=null,function(){return"When using zeroDebias: true, step is required."});var v=te(n,"step","movingAverage");p=yn(p,Jt(l,Zg(u,v)))}return It(s,p)}var b4e=pe({movingAverage_:y4e});function w4e(t,e,r){var n=te(t,"indices","scatterND","int32"),a=te(e,"updates","scatterND");uN(a,n,r);var s={indices:n,updates:a},o={shape:r};return ve.runKernel($W,s,o)}var _4e=pe({scatterND_:w4e});function x4e(t,e,r,n){if(t.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+(" but the dtype was "+t.dtype+"."));if(t.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+(" but got shape "+t.shape+"."));var a=t.rank>0?t.shape[0]:1,s=t.rank>1?t.shape[1]:1;if(r.length!==s)throw new Error("outputShape has incorrect number of elements:,"+(" "+r.length+", should be: "+s+"."));var o=e.size;if(!(e.rank===0||e.rank===1&&o===a))throw new Error("sparseValues has incorrect shape "+(e.shape+", should be [] or ["+a+"]"));if(e.dtype!==n.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function S4e(t,e,r,n){n===void 0&&(n=0);var a=te(t,"sparseIndices","sparseToDense","int32"),s=te(e,"sparseValues","sparseToDense","string_or_numeric"),o=te(n,"defaultValue","sparseToDense",s.dtype);x4e(a,s,r,o);var u={sparseIndices:a,sparseValues:s,defaultValue:o},l={outputShape:r};return ve.runKernel(aG,u,l)}var E4e=pe({sparseToDense_:S4e});function M4e(t,e){var r=te(e,"indices","gatherND","int32"),n=te(t,"x","gatherND","string_or_numeric"),a={params:n,indices:r};return ve.runKernel(zV,a)}var A4e=pe({gatherND_:M4e});function k4e(t,e){if(e==null)return t.shape.slice();if(Cl(t.shape,e))return e;if(t.shape.length===e.length){for(var r=[],n=0;n<t.shape.length;n++)e[n]==null&&t.shape[n]!=null?r.push(t.shape[n]):r.push(e[n]);return r}return e}function T4e(t,e,r,n){var a=te(t,"x","dropout");if(se(a.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be "+("scaled, but got a "+a.dtype+" tensor instead.")}),se(e>=0&&e<1,function(){return"rate must be a float in the range [0, 1), but got "+e+"."}),e===0)return t instanceof ui?a.clone():a;var s=k4e(a,r),o=1-e,u=yn(NH(It(GH(s,0,1,"float32",n),o)),o);return pt(a,u)}var N4e=pe({dropout_:T4e});function eK(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function xN(t,e,r){for(var n=1-t%2,a=new Float32Array(t),s=0;s<t;++s){var o=2*Math.PI*s/(t+n-1);a[s]=e-r*Math.cos(o)}return qo(a,"float32")}function I4e(t,e,r){return r===void 0&&(r=1),xt(this,void 0,void 0,function(){var n,a,s,o,u,l,h,p,v,y,S,A,T,I,I;return St(this,function(N){switch(N.label){case 0:return n=te(t,"predictions","inTopK"),a=te(e,"targets","inTopK"),se(n.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+("but got "+n.rank)}),se(n.rank-1===a.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+(n.rank+" and targets rank "+a.rank)}),la(n.shape.slice(0,n.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),s=n.shape[n.shape.length-1],se(r>0&&r<=s,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+("dimension ("+s+"), but got "+r)}),[4,n.data()];case 1:return o=N.sent(),[4,a.data()];case 2:for(u=N.sent(),l=wt([o.length/s,s],2),h=l[0],p=l[1],v=NU("bool",h),y=0;y<h;y++){for(S=y*p,A=o.subarray(S,S+p),T=[],I=0;I<A.length;I++)T.push({value:A[I],index:I});for(T.sort(function(D,C){return C.value-D.value}),v[y]=0,I=0;I<r;I++)if(T[I].index===u[y]){v[y]=1;break}}return t!==n&&n.dispose(),e!==a&&a.dispose(),[2,Fp(v,a.shape,"bool")]}})})}var D4e=I4e;function O4e(t,e,r,n,a,s,o){s===void 0&&(s="NHWC");var u=t;t.rank===3&&(u=nt(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l=e;l.rank===3&&(l=nt(e,[1,e.shape[0],e.shape[1],e.shape[2]])),se(u.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+(u.shape+".")}),se(l.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+(l.shape+".")}),se(r.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+(r+".")});var h=s==="NHWC"?u.shape[3]:u.shape[1],p=s==="NHWC"?l.shape[3]:l.shape[1];se(h===r[2],function(){return"Error in conv2dDerFilter: depth of input "+h+") must "+("match input depth in filter ("+r[2]+".")}),se(p===r[3],function(){return"Error in conv2dDerFilter: depth of dy ("+p+") must "+("match output depth for filter ("+r[3]+").")}),Ks("conv2dDerFilter",a,o);var v={x:u,dy:l},y={strides:n,pad:a,dataFormat:s,dimRoundingMode:o,filterShape:r};return ve.runKernel(lV,v,y)}var R4e=pe({conv2DBackpropFilter_:O4e});function Z2(t,e,r){if(r==null||r==="linear")return t;if(r==="relu")return pt(t,YH(e));throw new Error("Cannot compute gradient for fused activation "+r+".")}function J2(t,e){var r=e,n=sN(t.shape,e.shape);return n.length>0&&(r=gn(r,n)),nt(r,t.shape)}function Y2(t,e,r,n){if(e==="linear")return t;if(e==="relu")return K2(t);if(e==="elu")return MH(t);if(e==="relu6")return HH(t);if(e==="prelu")return VH(t,r);if(e==="leakyrelu")return OH(t,n);if(e==="sigmoid")return Pp(t);throw new Error("Unknown fused activation "+e+".")}var X2=function(t,e){var r=t>0;return!r||e==="linear"};function C4e(t){var e,r=t.x,n=t.filter,a=t.strides,s=t.pad,o=t.dataFormat,u=o===void 0?"NHWC":o,l=t.dilations,h=l===void 0?[1,1]:l,p=t.dimRoundingMode,v=t.bias,y=t.activation,S=y===void 0?"linear":y,A=t.preluActivationWeights,T=t.leakyreluAlpha;if(S=S||"linear",X2(ve.state.gradientDepth,S)===!1){se(u==="NHWC",function(){return"Error in fused conv2d: got dataFormat of "+u+" but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."});var I=U2(r,n,a,s,u,h,p);return v!=null&&(I=It(I,v)),Y2(I,S,A,T)}var N=te(r,"x","conv2d","float32"),D=te(n,"filter","conv2d","float32"),C=N,L=!1;N.rank===3&&(L=!0,C=nt(N,[1,N.shape[0],N.shape[1],N.shape[2]])),se(C.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+(C.rank+".")}),se(D.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+(D.rank+".")}),Ks("fused conv2d",s,p);var z=u==="NHWC"?C.shape[3]:C.shape[1];se(D.shape[2]===z,function(){return"Error in conv2d: depth of input ("+z+") must match "+("input depth for filter "+D.shape[2]+".")}),se(yf(a,h),function(){return"Error in conv2D: Either strides or dilations must be 1. "+("Got strides "+a+" and dilations '"+h+"'")});var $=iy(C.shape,D.shape,a,h,s,p),G;v!=null&&(G=te(v,"bias","fused conv2d"),e=wt(Rn(G,N),1),G=e[0],u==="NHWC"?li($.outShape,G.shape):(se(G.shape.length<=1,function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+("rank-"+G.shape.length+".")}),se(G.shape.length===0||G.shape[0]===$.outChannels||G.shape[0]===1,function(){return"Error in fused conv2d: bias shape ("+G.shape+") is not compatible with the number of output channels "+("("+$.outChannels+")")})));var j;if(A!=null){var K=A.shape;if(se(K.length<=1||K.length===3,function(){return"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+("rank-"+K.length+".")}),K.length===1)se(K[0]===1||K[0]===$.outChannels,function(){return"Error in fused conv2d: PReLU activation weights "+("("+K+") is not compatible with the number of output ")+("channels ("+$.outChannels+").")});else if(K.length===3)try{li(K,$.outShape)}catch{var M="Error in fused conv2d: PReLU activation weights ("+K+") is not compatible with the output shape of the conv2d "+("("+$.outShape+").");throw Error(M)}j=te(A,"prelu weights","fused conv2d")}var f=function(E,k){se(u==="NHWC",function(){return"Error in gradient of fused conv2D: got dataFormat of "+u+" but only NHWC is currently supported."});var w=wt(k,4),c=w[0],_=w[1],R=w[2],O=w[3],F=Z2(E,R,S);se(Kg(h),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+("are not yet supported in gradients. Got dilations '"+h+"'")});var U=SH(_.shape,F,c,a,s),H=R4e(_,F,c.shape,a,s),J=[U,H];if(O!=null){var fe=J2(O,F);J.push(fe)}return J},d={x:C,filter:D,bias:G,preluActivationWeights:j},g={strides:a,pad:s,dataFormat:u,dilations:h,dimRoundingMode:p,activation:S,leakyreluAlpha:T};if(v==null){var m=Du(function(E,k,w){var c=ve.runKernel(_4,d,g);return w([k,E,c]),L&&(c=nt(c,[c.shape[1],c.shape[2],c.shape[3]])),{value:c,gradFunc:f}});return m(C,D)}else{var b=Du(function(E,k,w,c){var _=ve.runKernel(_4,d,g);return c([k,E,_,w]),L&&(_=nt(_,[_.shape[1],_.shape[2],_.shape[3]])),{value:_,gradFunc:f}});return b(C,D,G)}}var F4e=pe({fusedConv2d_:C4e});function B4e(t,e,r,n,a,s,o){s===void 0&&(s=[1,1]);var u=t;t.rank===3&&(u=nt(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l=e;l.rank===3&&(l=nt(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var h={x:u,dy:l},p={strides:n,pad:a,dimRoundingMode:o,dilations:s,filterShape:r};return ve.runKernel(xV,h,p)}var L4e=pe({depthwiseConv2dNativeBackpropFilter_:B4e});function P4e(t,e,r,n,a,s,o){s===void 0&&(s=[1,1]);var u=e,l=!1;e.rank===3&&(l=!0,u=nt(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var h={dy:u,filter:r},p={strides:n,pad:a,dimRoundingMode:o,dilations:s,inputShape:t},v=ve.runKernel(SV,h,p);return l?nt(v,[v.shape[1],v.shape[2],v.shape[3]]):v}var q4e=pe({depthwiseConv2dNativeBackpropInput_:P4e});function $4e(t){var e,r=t.x,n=t.filter,a=t.strides,s=t.pad,o=t.dataFormat,u=o===void 0?"NHWC":o,l=t.dilations,h=l===void 0?[1,1]:l,p=t.dimRoundingMode,v=t.bias,y=t.activation,S=y===void 0?"linear":y,A=t.preluActivationWeights,T=t.leakyreluAlpha;if(X2(ve.state.gradientDepth,S)===!1){var I=hN(r,n,a,s,u,h,p);return v!=null&&(I=It(I,v)),Y2(I,S,A,T)}var N=te(r,"x","depthwiseConv2d","float32"),D=te(n,"filter","depthwiseConv2d","float32"),C=N,L=!1;N.rank===3&&(L=!0,C=nt(N,[1,N.shape[0],N.shape[1],N.shape[2]])),se(C.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+("rank "+C.rank+".")}),se(D.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+("but got rank "+D.rank+".")}),se(C.shape[3]===D.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels "+("("+C.shape[3]+") must match the inChannels dimension in ")+("filter "+D.shape[2]+".")}),h==null&&(h=[1,1]),se(yf(a,h),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+("be 1. Got strides "+a+" and dilations '"+h+"'")}),Ks("fused depthwiseConv2d",s,p);var z=iy(C.shape,D.shape,a,h,s,p,!0),$;v!=null&&($=te(v,"bias","fused conv2d"),e=wt(Rn($,N),1),$=e[0],li(z.outShape,$.shape));var G;A!=null&&(G=te(A,"prelu weights","fused depthwiseConv2d"));var j=function(g,m){se(Kg(h),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+("'"+h+"'")});var b=wt(m,4),E=b[0],k=b[1],w=b[2],c=b[3],_=Z2(g,w,S),R=q4e(k.shape,_,E,a,s,h,p),O=L4e(k,_,E.shape,a,s,h,p);if(c!=null){var F=J2($,_);return[R,O,F]}return[R,O]},K={x:C,filter:D,bias:$,preluActivationWeights:G},M={strides:a,pad:s,dataFormat:u,dilations:h,dimRoundingMode:p,activation:S,leakyreluAlpha:T};if(v==null){var f=Du(function(g,m,b){var E=ve.runKernel(x4,K,M);return b([m,g,E]),L&&(E=nt(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:j}});return f(C,D)}else{var d=Du(function(g,m,b,E){var k=ve.runKernel(x4,K,M);return E([m,g,k,b]),L&&(k=nt(k,[k.shape[1],k.shape[2],k.shape[3]])),{value:k,gradFunc:j}});return d(C,D,$)}}var z4e=pe({fusedDepthwiseConv2d_:$4e});function j4e(t){var e,r,n=t.a,a=t.b,s=t.transposeA,o=s===void 0?!1:s,u=t.transposeB,l=u===void 0?!1:u,h=t.bias,p=t.activation,v=p===void 0?"linear":p,y=t.preluActivationWeights,S=t.leakyreluAlpha,A=S===void 0?.2:S;if(X2(ve.state.gradientDepth,v)===!1){var T=Fr(n,a,o,l);return h!=null&&(T=It(T,h)),Y2(T,v,y,A)}var I=te(n,"a","fused matMul"),N=te(a,"b","fused matMul");e=wt(Rn(I,N),2),I=e[0],N=e[1];var D=o?I.shape[I.rank-2]:I.shape[I.rank-1],C=l?N.shape[N.rank-1]:N.shape[N.rank-2],L=o?I.shape[I.rank-1]:I.shape[I.rank-2],z=l?N.shape[N.rank-2]:N.shape[N.rank-1],$=I.shape.slice(0,-2),G=N.shape.slice(0,-2),j=bn($),K=bn(G);se(D===C,function(){return"Error in fused matMul: inner shapes ("+D+") and ("+(C+") of Tensors with shapes "+I.shape+" and ")+(N.shape+" and transposeA="+o)+(" and transposeB="+l+" must match.")});var M=li(I.shape.slice(0,-2),N.shape.slice(0,-2)),f=M.concat([L,z]),d=o?nt(I,[j,D,L]):nt(I,[j,L,D]),g=l?nt(N,[K,z,C]):nt(N,[K,C,z]),m;h!=null&&(m=te(h,"bias","fused matMul"),r=wt(Rn(m,I),1),m=r[0],li(f,m.shape));var b;y!=null&&(b=te(y,"prelu weights","fused matMul"));var E=function(R,O){var F=wt(O,4),U=F[0],H=F[1],J=F[2],fe=F[3],B=Z2(nt(R,J.shape),J,v),q,Y;if(!o&&!l?(q=Fr(B,H,!1,!0),Y=Fr(U,B,!0,!1)):!o&&l?(q=Fr(B,H,!1,!1),Y=Fr(B,U,!0,!1)):o&&!l?(q=Fr(H,B,!1,!0),Y=Fr(U,B,!1,!1)):(q=Fr(H,B,!0,!0),Y=Fr(B,U,!0,!0)),h!=null){var X=J2(fe,B);return[q,Y,X]}else return[q,Y]},k={a:d,b:g,bias:m,preluActivationWeights:b},w={transposeA:o,transposeB:l,activation:v,leakyreluAlpha:A};if(h==null){var c=Du(function(R,O,F){var U=ve.runKernel(w4,k,w);return F([R,O,U]),{value:nt(U,f),gradFunc:E}});return c(d,g)}else{var _=Du(function(R,O,F,U){var H=ve.runKernel(w4,k,w);return U([R,O,H,F]),{value:nt(H,f),gradFunc:E}});return _(d,g,m)}}var U4e=pe({fusedMatMul_:j4e});var V4e={__proto__:null,conv2d:F4e,depthwiseConv2d:z4e,matMul:U4e};function W4e(t){return xN(t,.54,.46)}var G4e=pe({hammingWindow_:W4e});function H4e(t){return xN(t,.5,.5)}var tK=pe({hannWindow_:H4e});function K4e(t,e,r,n,a){n===void 0&&(n=!1),a===void 0&&(a=0);for(var s=0,o=[];s+e<=t.size;)o.push(Tn(t,s,e)),s+=r;if(n)for(;s<t.size;){var u=s+e-t.size,l=za([Tn(t,s,e-u),W2([u],a)]);o.push(l),s+=r}return o.length===0?zg([],[0,e]):nt(za(o),[o.length,e])}var rK=pe({frame_:K4e});function Z4e(t,e,r,n,a){a===void 0&&(a=tK),n==null&&(n=eK(e));var s=rK(t,e,r),o=pt(s,a(e));return bN(o,n)}var J4e=pe({stft_:Z4e});function Y4e(t,e,r,n,a,s){a===void 0&&(a="bilinear"),s===void 0&&(s=0);var o=te(t,"image","cropAndResize"),u=te(e,"boxes","cropAndResize","float32"),l=te(r,"boxInd","cropAndResize","int32"),h=u.shape[0];se(o.rank===4,function(){return"Error in cropAndResize: image must be rank 4,"+("but got rank "+o.rank+".")}),se(u.rank===2&&u.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+h+",4] "+("but had shape "+u.shape+".")}),se(l.rank===1&&l.shape[0]===h,function(){return"Error in cropAndResize: boxInd must be have size ["+h+"] "+("but had shape "+u.shape+".")}),se(n.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+("length "+n.length+".")}),se(n[0]>=1&&n[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+n}),se(a==="bilinear"||a==="nearest",function(){return"method must be bilinear or nearest, but was "+a});var p={image:o,boxes:u,boxInd:l},v={method:a,extrapolationValue:s,cropSize:n},y=ve.runKernel(yV,p,v);return y}var X4e=pe({cropAndResize_:Y4e});function Q4e(t){var e=te(t,"image","flipLeftRight","float32");se(e.rank===4,function(){return"Error in flipLeftRight: image must be rank 4,"+("but got rank "+e.rank+".")});var r={image:e},n=ve.runKernel(BV,r,{});return n}var eNe=pe({flipLeftRight_:Q4e});function tNe(t){var e=te(t,"image","grayscaleToRGB"),r=e.rank-1,n=e.shape[r];se(e.rank>=2,function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+("but got rank "+e.rank+".")}),se(n===1,function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+("should be size 1, but got size "+n+".")});var a=new Array(e.rank);return a.fill(1,0,r),a[r]=3,$g(e,a)}var rNe=pe({grayscaleToRGB_:tNe});function nNe(t,e,r,n){r===void 0&&(r=0),n===void 0&&(n=.5);var a=te(t,"image","rotateWithOffset","float32");se(a.rank===4,function(){return"Error in rotateWithOffset: image must be rank 4,"+("but got rank "+a.rank+".")});var s={image:a},o={radians:e,fillValue:r,center:n},u=ve.runKernel(_G,s,o);return u}var iNe=pe({rotateWithOffset_:nNe});function Gp(t,e,r,n,a,s){n==null&&(n=.5),a==null&&(a=Number.NEGATIVE_INFINITY),s==null&&(s=0);var o=t.shape[0];return r=Math.min(r,o),se(0<=n&&n<=1,function(){return"iouThreshold must be in [0, 1], but was '"+n+"'"}),se(t.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),se(t.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),se(e.rank===1,function(){return"scores must be a 1D tensor"}),se(e.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", "+("but was "+e.shape[0])}),se(0<=s&&s<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+s+"'"}),{maxOutputSize:r,iouThreshold:n,scoreThreshold:a,softNmsSigma:s}}function aNe(t,e,r,n,a){n===void 0&&(n=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY);var s=te(t,"boxes","nonMaxSuppression","float32"),o=te(e,"scores","nonMaxSuppression","float32"),u=Gp(s,o,r,n,a);r=u.maxOutputSize,n=u.iouThreshold,a=u.scoreThreshold;var l={maxOutputSize:r,iouThreshold:n,scoreThreshold:a};return ve.runKernel(bW,{boxes:s,scores:o},l)}var sNe=pe({nonMaxSuppression_:aNe});function oNe(t,e,r){var n=uNe(t,e,r),a=n<0?-(n+1):n;t.splice(a,0,e)}function uNe(t,e,r){return lNe(t,e,r||fNe)}function fNe(t,e){return t>e?1:t<e?-1:0}function lNe(t,e,r){for(var n=0,a=t.length,s=0,o=!1;n<a;){s=n+(a-n>>>1);var u=r(e,t[s]);u>0?n=s+1:(a=s,o=!u)}return o?n:-n-1}function nK(t,e,r,n,a){return SN(t,e,r,n,a,0)}function iK(t,e,r,n,a,s){return SN(t,e,r,n,a,0,!1,s,!0)}function aK(t,e,r,n,a,s){return SN(t,e,r,n,a,s,!0)}function SN(t,e,r,n,a,s,o,u,l){o===void 0&&(o=!1),u===void 0&&(u=!1),l===void 0&&(l=!1);for(var h=[],p=0;p<e.length;p++)e[p]>a&&h.push({score:e[p],boxIndex:p,suppressBeginIndex:0});h.sort(xU);for(var v=s>0?-.5/s:0,y=[],S=[];y.length<r&&h.length>0;){var A=h.pop(),T=A.score,I=A.boxIndex,N=A.suppressBeginIndex;if(T<a)break;for(var D=!1,C=y.length-1;C>=N;--C){var L=cNe(t,I,y[C]);if(L>=n){D=!0;break}if(A.score=A.score*hNe(n,v,L),A.score<=a)break}A.suppressBeginIndex=y.length,D||(A.score===T?(y.push(I),S.push(A.score)):A.score>a&&oNe(h,A,xU))}var z=y.length,$=r-z;u&&$>0&&(y.push.apply(y,Ir(new Array($).fill(0))),S.push.apply(S,Ir(new Array($).fill(0))));var G={selectedIndices:y};return o&&(G.selectedScores=S),l&&(G.validOutputs=z),G}function cNe(t,e,r){var n=t.subarray(e*4,e*4+4),a=t.subarray(r*4,r*4+4),s=Math.min(n[0],n[2]),o=Math.min(n[1],n[3]),u=Math.max(n[0],n[2]),l=Math.max(n[1],n[3]),h=Math.min(a[0],a[2]),p=Math.min(a[1],a[3]),v=Math.max(a[0],a[2]),y=Math.max(a[1],a[3]),S=(u-s)*(l-o),A=(v-h)*(y-p);if(S<=0||A<=0)return 0;var T=Math.max(s,h),I=Math.max(o,p),N=Math.min(u,v),D=Math.min(l,y),C=Math.max(N-T,0)*Math.max(D-I,0);return C/(S+A-C)}function hNe(t,e,r){var n=Math.exp(e*r*r);return r<=t?n:0}function xU(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}function dNe(t,e,r,n,a){return n===void 0&&(n=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),xt(this,void 0,void 0,function(){var s,o,u,l,h,p,v;return St(this,function(y){switch(y.label){case 0:return s=te(t,"boxes","nonMaxSuppressionAsync"),o=te(e,"scores","nonMaxSuppressionAsync"),u=Gp(s,o,r,n,a),r=u.maxOutputSize,n=u.iouThreshold,a=u.scoreThreshold,[4,Promise.all([s.data(),o.data()])];case 1:return l=y.sent(),h=l[0],p=l[1],v=nK(h,p,r,n,a).selectedIndices,s!==t&&s.dispose(),o!==e&&o.dispose(),[2,qo(v,"int32")]}})})}var pNe=dNe;function mNe(t,e,r,n,a,s){n===void 0&&(n=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),s===void 0&&(s=0);var o=te(t,"boxes","nonMaxSuppression"),u=te(e,"scores","nonMaxSuppression"),l=Gp(o,u,r,n,a,s);r=l.maxOutputSize,n=l.iouThreshold,a=l.scoreThreshold,s=l.softNmsSigma;var h={boxes:o,scores:u},p={maxOutputSize:r,iouThreshold:n,scoreThreshold:a,softNmsSigma:s},v=ve.runKernel(_W,h,p);return{selectedIndices:v[0],selectedScores:v[1]}}var vNe=pe({nonMaxSuppressionWithScore_:mNe});function gNe(t,e,r,n,a,s){return n===void 0&&(n=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),s===void 0&&(s=0),xt(this,void 0,void 0,function(){var o,u,l,h,p,v,y,S,A;return St(this,function(T){switch(T.label){case 0:return o=te(t,"boxes","nonMaxSuppressionAsync"),u=te(e,"scores","nonMaxSuppressionAsync"),l=Gp(o,u,r,n,a,s),r=l.maxOutputSize,n=l.iouThreshold,a=l.scoreThreshold,s=l.softNmsSigma,[4,Promise.all([o.data(),u.data()])];case 1:return h=T.sent(),p=h[0],v=h[1],y=aK(p,v,r,n,a,s),S=y.selectedIndices,A=y.selectedScores,o!==t&&o.dispose(),u!==e&&u.dispose(),[2,{selectedIndices:qo(S,"int32"),selectedScores:qo(A)}]}})})}var yNe=gNe;function bNe(t,e,r,n,a,s){n===void 0&&(n=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),s===void 0&&(s=!1);var o=te(t,"boxes","nonMaxSuppression"),u=te(e,"scores","nonMaxSuppression"),l=Gp(o,u,r,n,a,null),h=l.maxOutputSize,p=l.iouThreshold,v=l.scoreThreshold,y={boxes:o,scores:u},S={maxOutputSize:h,iouThreshold:p,scoreThreshold:v,padToMaxOutputSize:s},A=ve.runKernel(wW,y,S);return{selectedIndices:A[0],validOutputs:A[1]}}var wNe=pe({nonMaxSuppressionPadded_:bNe});function _Ne(t,e,r,n,a,s){return n===void 0&&(n=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),s===void 0&&(s=!1),xt(this,void 0,void 0,function(){var o,u,l,h,p,v,y,S,A,T,I,N;return St(this,function(D){switch(D.label){case 0:return o=te(t,"boxes","nonMaxSuppressionAsync"),u=te(e,"scores","nonMaxSuppressionAsync"),l=Gp(o,u,r,n,a,null),h=l.maxOutputSize,p=l.iouThreshold,v=l.scoreThreshold,[4,Promise.all([o.data(),u.data()])];case 1:return y=wt.apply(void 0,[D.sent(),2]),S=y[0],A=y[1],T=iK(S,A,h,p,v,s),I=T.selectedIndices,N=T.validOutputs,o!==t&&o.dispose(),u!==e&&u.dispose(),[2,{selectedIndices:qo(I,"int32"),validOutputs:Br(N,"int32")}]}})})}var xNe=_Ne;function SNe(t,e,r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var a=te(t,"images","resizeBilinear");se(a.rank===3||a.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+("rank "+a.rank+".")}),se(e.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+(e+".")}),se(n===!1||r===!1,function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."});var s=a,o=!1;a.rank===3&&(o=!0,s=nt(a,[1,a.shape[0],a.shape[1],a.shape[2]])),wt(e,0);var u={images:s},l={alignCorners:r,halfPixelCenters:n,size:e},h=ve.runKernel(FW,u,l);return o?nt(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var ENe=pe({resizeBilinear_:SNe});function MNe(t,e,r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var a=te(t,"images","resizeNearestNeighbor");se(a.rank===3||a.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+("rank "+a.rank+".")}),se(e.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+(e+".")}),se(a.dtype==="float32"||a.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"}),se(n===!1||r===!1,function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."});var s=a,o=!1;a.rank===3&&(o=!0,s=nt(a,[1,a.shape[0],a.shape[1],a.shape[2]])),wt(e,0);var u={images:s},l={alignCorners:r,halfPixelCenters:n,size:e},h=ve.runKernel(CW,u,l);return o?nt(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var ANe=pe({resizeNearestNeighbor_:MNe});function kNe(t,e,r,n){var a;e===void 0&&(e="binary"),r===void 0&&(r=!1),n===void 0&&(n=.5);var s=te(t,"image","threshold"),o=.2989,u=.587,l=.114,h=s.shape[0]*s.shape[1],p=pt(qo([n]),255),v,y,S,A;if(se(s.rank===3,function(){return"Error in threshold: image must be rank 3,"+("but got rank "+s.rank+".")}),se(s.shape[2]===3||s.shape[2]===1,function(){return"Error in threshold: image color channel must be equal to 3 or 1"+("but got "+s.shape[2]+".")}),se(s.dtype==="int32"||s.dtype==="float32",function(){return"Error in dtype: image dtype must be int32 or float32,"+("but got dtype "+s.dtype+".")}),se(e==="otsu"||e==="binary",function(){return"Method must be binary or otsu, but was "+e}),s.shape[2]===3){a=wt(Xg(s,[1,1,1],-1),3),v=a[0],y=a[1],S=a[2];var T=pt(v,o),I=pt(y,u),N=pt(S,l);A=It(It(T,I),N)}else A=t;if(e==="otsu"){var D=xH(Vn(KH(A),"int32"),Fp([]),256);p=TNe(D,h)}var C=r?pN(A,p):G2(A,p),L=Vn(pt(C,255),"int32");return L}function TNe(t,e){for(var r=qo([-1]),n=qo([0]),a=qo([0]),s,o,u,l,h,p,v=0;v<t.size-1;v++){s=Tn(t,0,v+1),o=Tn(t,v+1),h=yn(gn(s),e),p=yn(gn(o),e);var y=gn(pt(s,Yg(0,s.size)));u=yn(y,gn(s));var S=W2(o.shape,s.size),A=It(Yg(0,o.size),S),T=pt(o,A);l=yn(gn(T),gn(o));var I=Jt(u,l),N=Jt(u,l),D=pt(h,p);a=pt(pt(D,I),N);var C=G2(a,n);n=Up(C,a,n),r=Up(C,qo([v]),r)}return r}var NNe=pe({threshold_:kNe});function INe(t,e,r,n,a,s){r===void 0&&(r="nearest"),n===void 0&&(n="constant"),a===void 0&&(a=0);var o=te(t,"image","transform","float32"),u=te(e,"transforms","transform","float32");se(o.rank===4,function(){return"Error in transform: image must be rank 4,"+("but got rank "+o.rank+".")}),se(u.rank===2&&(u.shape[0]===o.shape[0]||u.shape[0]===1)&&u.shape[1]===8,function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"}),se(s==null||s.length===2,function(){return"Error in transform: outputShape must be [height, width] or null, "+("but got "+s+".")});var l={image:o,transforms:u},h={interpolation:r,fillMode:n,fillValue:a,outputShape:s};return ve.runKernel(mG,l,h)}var DNe=pe({transform_:INe});function ONe(t,e,r){se(e%1===0,function(){return"bandPart(): numLower must be an integer, got "+e+"."}),se(r%1===0,function(){return"bandPart(): numUpper must be an integer, got "+r+"."});var n=te(t,"a","bandPart");se(n.rank>=2,function(){return"bandPart(): Rank must be at least 2, got "+n.rank+"."});var a=n.shape,s=wt(n.shape.slice(-2),2),o=s[0],u=s[1];if(!(e<=o))throw new Error("bandPart(): numLower ("+e+")"+(" must not be greater than the number of rows ("+o+")."));if(!(r<=u))throw new Error("bandPart(): numUpper ("+r+")"+(" must not be greater than the number of columns ("+u+")."));e<0&&(e=o),r<0&&(r=u);var l=nt(Yg(0,o,1,"int32"),[-1,1]),h=Yg(0,u,1,"int32"),p=Jt(l,h),v=C2(pN(p,Br(+e,"int32")),DH(p,Br(-r,"int32"))),y=Vp([o,u],n.dtype);return nt(Qg(_N(nt(n,[-1,o,u])).map(function(S){return Up(v,S,y)})),a)}var RNe=pe({bandPart_:ONe});function CNe(t){var e;if(Array.isArray(t)){e=!1,se(t!=null&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var r=t[0].shape[0],n=function(l){se(t[l].shape[0]===r,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+("("+t[l].shape[0]+" vs. "+r+")")})},a=1;a<t.length;++a)n(a)}else e=!0,t=Xg(t,t.shape[0],0).map(function(l){return wN(l,[0])});se(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds "+("number of dimensions ("+t[0].shape[0]+").")});for(var s=[],o=t,u=function(l){s.push(ve.tidy(function(){var h=o[l];if(l>0)for(var p=0;p<l;++p){var v=pt(gn(pt(s[p],h)),s[p]);h=Jt(h,v)}return yn(h,V2(h,"euclidean"))}))},a=0;a<t.length;++a)u(a);return e?Qg(s,0):s}var FNe=pe({gramSchmidt_:CNe});function BNe(t,e){if(e===void 0&&(e=!1),se(t.rank>=2,function(){return"qr() requires input tensor to have a rank >= 2, but got rank "+t.rank}),t.rank===2)return SU(t,e);var r=t.shape.slice(0,t.shape.length-2).reduce(function(l,h){return l*h}),n=_N(nt(t,[r,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),a=[],s=[];n.forEach(function(l){var h=wt(SU(l,e),2),p=h[0],v=h[1];a.push(p),s.push(v)});var o=nt(Qg(a,0),t.shape),u=nt(Qg(s,0),t.shape);return[o,u]}function SU(t,e){return e===void 0&&(e=!1),ve.tidy(function(){se(t.shape.length===2,function(){return"qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor."});for(var r=t.shape[0],n=t.shape[1],a=TH(r),s=_h(t),o=zg([[1]],[1,1]),u=_h(o),l=r>=n?n:r,h=function(v){var y,S=s,A=u,T=a;y=wt(ve.tidy(function(){var I=Tn(s,[v,v],[r-v,1]),N=V2(I),D=Tn(s,[v,v],[1,1]),C=Up(G2(D,0),zg([[-1]]),zg([[1]])),L=Jt(D,pt(C,N)),z=yn(I,L);z.shape[0]===1?u=_h(o):u=za([o,Tn(z,[1,0],[z.shape[0]-1,z.shape[1]])],0);var $=pf(yn(Fr(C,L),N)),G=Tn(s,[v,0],[r-v,n]),j=pt($,u),K=O2(u);if(v===0)s=Jt(G,Fr(j,Fr(K,G)));else{var M=Jt(G,Fr(j,Fr(K,G)));s=za([Tn(s,[0,0],[v,n]),M],0)}var f=O2(j),d=Tn(a,[0,v],[r,a.shape[1]-v]);if(v===0)a=Jt(d,Fr(Fr(d,u),f));else{var g=Jt(d,Fr(Fr(d,u),f));a=za([Tn(a,[0,0],[r,v]),g],1)}return[u,s,a]}),3),u=y[0],s=y[1],a=y[2],Sa([S,A,T])},p=0;p<l;++p)h(p);return!e&&r>n&&(a=Tn(a,[0,0],[r,n]),s=Tn(s,[0,0],[n,n])),[a,s]})}var LNe=pe({qr_:BNe});W.Reduction=void 0;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(W.Reduction||(W.Reduction={}));function PNe(t,e,r){r===void 0&&(r=W.Reduction.SUM_BY_NONZERO_WEIGHTS);var n=te(t,"losses","computeWeightedLoss"),a=null;e!=null&&(a=te(e,"weights","computeWeightedLoss"));var s=a==null?n:pt(n,a);if(r===W.Reduction.NONE)return s;if(r===W.Reduction.SUM)return gn(s);if(r===W.Reduction.MEAN){if(a==null)return F2(s);var o=n.size/a.size,u=yn(gn(s),gn(a));return o>1?yn(u,Br(o)):u}if(r===W.Reduction.SUM_BY_NONZERO_WEIGHTS){if(a==null)return yn(gn(s),Br(n.size));var l=pt(a,wh(n.shape)),h=Vn(gn(jH(l,Br(0))),"float32");return yn(gn(s),h)}throw Error("Unknown reduction: "+r)}var bf=pe({computeWeightedLoss_:PNe});function qNe(t,e,r,n){n===void 0&&(n=W.Reduction.SUM_BY_NONZERO_WEIGHTS);var a=te(t,"labels","absoluteDifference"),s=te(e,"predictions","absoluteDifference"),o=null;r!=null&&(o=te(r,"weights","absoluteDifference")),la(a.shape,s.shape,"Error in absoluteDifference: ");var u=is(Jt(a,s));return bf(u,o,n)}var $Ne=pe({absoluteDifference_:qNe});function zNe(t,e,r,n,a){a===void 0&&(a=W.Reduction.SUM_BY_NONZERO_WEIGHTS);var s=te(t,"labels","cosineDistance"),o=te(e,"predictions","cosineDistance"),u=null;n!=null&&(u=te(n,"weights","cosineDistance")),la(s.shape,o.shape,"Error in cosineDistance: ");var l=Br(1),h=Jt(l,gn(pt(s,o),r,!0));return bf(h,u,a)}var jNe=pe({cosineDistance_:zNe});function UNe(t,e,r,n){n===void 0&&(n=W.Reduction.SUM_BY_NONZERO_WEIGHTS);var a=te(t,"labels","hingeLoss"),s=te(e,"predictions","hingeLoss"),o=null;r!=null&&(o=te(r,"weights","hingeLoss")),la(a.shape,s.shape,"Error in hingeLoss: ");var u=Br(1);a=Jt(pt(Br(2),a),u);var l=K2(Jt(u,pt(a,s)));return bf(l,o,n)}var VNe=pe({hingeLoss_:UNe});function WNe(t,e,r,n,a){n===void 0&&(n=1),a===void 0&&(a=W.Reduction.SUM_BY_NONZERO_WEIGHTS);var s=te(t,"labels","huberLoss"),o=te(e,"predictions","huberLoss"),u=null;r!=null&&(u=te(r,"weights","huberLoss")),la(s.shape,o.shape,"Error in huberLoss: ");var l=Br(n),h=is(Jt(o,s)),p=zH(h,l),v=Jt(h,p),y=It(pt(Br(.5),$o(p)),pt(l,v));return bf(y,u,a)}var GNe=pe({huberLoss_:WNe});function HNe(t,e,r,n,a){n===void 0&&(n=1e-7),a===void 0&&(a=W.Reduction.SUM_BY_NONZERO_WEIGHTS);var s=te(t,"labels","logLoss"),o=te(e,"predictions","logLoss"),u=null;r!=null&&(u=te(r,"weights","logLoss")),la(s.shape,o.shape,"Error in logLoss: ");var l=Br(1),h=Br(n),p=pf(pt(s,Jg(It(o,h)))),v=pt(Jt(l,s),Jg(It(Jt(l,o),h))),y=Jt(p,v);return bf(y,u,a)}var KNe=pe({logLoss_:HNe});function ZNe(t,e,r,n){n===void 0&&(n=W.Reduction.SUM_BY_NONZERO_WEIGHTS);var a=te(t,"labels","meanSquaredError"),s=te(e,"predictions","meanSquaredError"),o=null;r!=null&&(o=te(r,"weights","meanSquaredError")),la(a.shape,s.shape,"Error in meanSquaredError: ");var u=JH(a,s);return bf(u,o,n)}var JNe=pe({meanSquaredError_:ZNe});function YNe(t,e){var r=te(t,"labels","sigmoidCrossEntropyWithLogits"),n=te(e,"logits","sigmoidCrossEntropyWithLogits");la(r.shape,n.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=K2(n),s=pt(n,r),o=RH(Ah(pf(is(n))));return It(Jt(a,s),o)}function XNe(t,e,r,n,a){n===void 0&&(n=0),a===void 0&&(a=W.Reduction.SUM_BY_NONZERO_WEIGHTS);var s=te(t,"multiClassLabels","sigmoidCrossEntropy"),o=te(e,"logits","sigmoidCrossEntropy"),u=null;if(r!=null&&(u=te(r,"weights","sigmoidCrossEntropy")),la(s.shape,o.shape,"Error in sigmoidCrossEntropy: "),n>0){var l=Br(n),h=Br(1),p=Br(.5);s=It(pt(s,Jt(h,l)),pt(p,l))}var v=YNe(s,o);return bf(v,u,a)}var QNe=pe({sigmoidCrossEntropy_:XNe});function eIe(t,e,r){if(r===void 0&&(r=-1),r===-1&&(r=e.rank-1),r!==e.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+("supported. Labels / logits was rank "+e.rank+" ")+("and dim was "+r));var n=Du(function(a,s,o){var u=!0,l=BH(s,[r],u),h=Jt(Vn(s,"float32"),l);o([a,h]);var p=pf(pt(h,a)),v=gn(p,[r]),y=function(S,A){var T=wt(A,2),I=T[0],N=T[1],D=ay(S.shape,[r]);return[pt(nt(S,D),Jt(Vn(I,"float32"),Ah(N))),pt(nt(S,D),Jt(Ah(N),Vn(I,"float32")))]};return{value:v,gradFunc:y}});return n(t,e)}function tIe(t,e,r,n,a){n===void 0&&(n=0),a===void 0&&(a=W.Reduction.SUM_BY_NONZERO_WEIGHTS);var s=te(t,"onehotLabels","softmaxCrossEntropy"),o=te(e,"logits","softmaxCrossEntropy"),u=null;if(r!=null&&(u=te(r,"weights","softmaxCrossEntropy")),la(s.shape,o.shape,"Error in softmaxCrossEntropy: "),n>0){var l=Br(n),h=Br(1),p=Br(s.shape[1]);s=It(pt(s,Jt(h,l)),yn(l,p))}var v=eIe(s,o);return bf(v,u,a)}var rIe=pe({softmaxCrossEntropy_:tIe});function nIe(t,e,r,n){var a=te(t,"indices","sparseFillEmptyRows","int32"),s=te(e,"values","sparseFillEmptyRows"),o=te(r,"denseShape","sparseFillEmptyRows","int32"),u=te(n,"defaultValue","sparseFillEmptyRows",s.dtype);if(a.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        `+a.shape);if(s.rank!==1)throw new Error("Values should be Tensor1D but received shape "+s.shape);if(o.rank!==1)throw new Error("Dense shape should be Tensor1D but received shape "+o.shape);if(u.rank!==0)throw new Error("Default value should be a scalar but received shape "+u.shape);var l={indices:a,values:s,denseShape:o,defaultValue:u},h=ve.runKernel(tG,l);return{outputIndices:h[0],outputValues:h[1],emptyRowIndicator:h[2],reverseIndexMap:h[3]}}var iIe=pe({sparseFillEmptyRows_:nIe});function aIe(t,e,r){var n=te(t,"inputIndices","sparseReshape","int32"),a=te(e,"inputShape","sparseReshape","int32"),s=te(r,"newShape","sparseReshape","int32");if(n.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        `+n.shape);if(a.rank!==1)throw new Error("Input shape should be Tensor1D but received shape "+a.shape);if(s.rank!==1)throw new Error("New shape should be Tensor1D but received shape "+s.shape);var o={inputIndices:n,inputShape:a,newShape:s},u=ve.runKernel(rG,o);return{outputIndices:u[0],outputShape:u[1]}}var sIe=pe({sparseReshape_:aIe});function oIe(t,e,r){var n=te(t,"data","sparseSegmentMean"),a=te(e,"indices","sparseSegmentMean","int32"),s=te(r,"segmentIds","sparseSegmentMean","int32");if(n.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          `+a.shape);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          `+s.shape);var o={data:n,indices:a,segmentIds:s};return ve.runKernel(nG,o)}var uIe=pe({sparseSegmentMean_:oIe});function fIe(t,e,r){var n=te(t,"data","sparseSegmentSum"),a=te(e,"indices","sparseSegmentSum","int32"),s=te(r,"segmentIds","sparseSegmentSum","int32");if(n.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         `+a.shape);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         `+s.shape);var o={data:n,indices:a,segmentIds:s};return ve.runKernel(iG,o)}var lIe=pe({sparseSegmentSum_:fIe});function cIe(t,e,r,n,a,s,o,u){var l=te(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error("Data must be a vector, saw: "+l.shape);var h=te(e,"dataSplits","stringNGrams");if(h.dtype!=="int32")throw new Error("Data splits must be of datatype int32");var p={separator:r,nGramWidths:n,leftPad:a,rightPad:s,padWidth:o,preserveShortSequences:u},v={data:l,dataSplits:h},y=ve.runKernel(uG,v,p);return{nGrams:y[0],nGramsSplits:y[1]}}var hIe=pe({stringNGrams_:cIe});function dIe(t,e,r){r===void 0&&(r=!0);var n=te(t,"input","stringSplit","string"),a=te(e,"delimiter","stringSplit","string");if(n.rank!==1)throw new Error("Input should be Tensor1D but received shape "+n.shape);if(a.rank!==0)throw new Error("Delimiter should be a scalar but received shape "+a.shape);var s={skipEmpty:r},o={input:n,delimiter:a},u=ve.runKernel(fG,o,s);return{indices:u[0],values:u[1],shape:u[2]}}var pIe=pe({stringSplit_:dIe});function mIe(t,e){var r=te(t,"input","stringToHashBucketFast","string"),n={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");var a={input:r};return ve.runKernel(lG,a,n)}var vIe=pe({stringToHashBucketFast_:mIe});var gIe={fft:yN,ifft:B2,rfft:bN,irfft:ZH},yIe={hammingWindow:G4e,hannWindow:tK,frame:rK,stft:J4e},bIe={flipLeftRight:eNe,grayscaleToRGB:rNe,resizeNearestNeighbor:ANe,resizeBilinear:ENe,rotateWithOffset:iNe,cropAndResize:X4e,nonMaxSuppression:sNe,nonMaxSuppressionAsync:pNe,nonMaxSuppressionWithScore:vNe,nonMaxSuppressionWithScoreAsync:yNe,nonMaxSuppressionPadded:wNe,nonMaxSuppressionPaddedAsync:xNe,threshold:NNe,transform:DNe},wIe={bandPart:RNe,gramSchmidt:FNe,qr:LNe},_Ie={absoluteDifference:$Ne,computeWeightedLoss:bf,cosineDistance:jNe,hingeLoss:VNe,huberLoss:GNe,logLoss:KNe,meanSquaredError:JNe,sigmoidCrossEntropy:QNe,softmaxCrossEntropy:rIe},xIe={sparseFillEmptyRows:iIe,sparseReshape:sIe,sparseSegmentMean:uIe,sparseSegmentSum:lIe},SIe={stringNGrams:hIe,stringSplit:pIe,stringToHashBucketFast:vIe},Ll=function(t){gf(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.minimize=function(r,n,a){n===void 0&&(n=!1);var s=this.computeGradients(r,a),o=s.value,u=s.grads;if(a!=null){var l=a.map(function(h){return{name:h.name,tensor:u[h.name]}});this.applyGradients(l)}else this.applyGradients(u);return Sa(u),n?o:(o.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(r,n){return CH(r,n)},e.prototype.dispose=function(){this.iterations_!=null&&Sa(this.iterations_)},e.prototype.saveIterations=function(){return xt(this,void 0,void 0,function(){return St(this,function(r){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:Br(this.iterations_,"int32")}]})})},e.prototype.getWeights=function(){return xt(this,void 0,void 0,function(){return St(this,function(r){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},e.prototype.setWeights=function(r){return xt(this,void 0,void 0,function(){return St(this,function(n){throw new Error("setWeights() is not implemented for this optimizer class "+(""+this.getClassName()))})})},e.prototype.extractIterations=function(r){return xt(this,void 0,void 0,function(){var n;return St(this,function(a){switch(a.label){case 0:return n=this,[4,r[0].tensor.data()];case 1:return n.iterations_=a.sent()[0],[2,r.slice(1)]}})})},e}(hH);Object.defineProperty(Ll,Symbol.hasInstance,{value:function(t){return t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null}});var Q2=function(t){gf(e,t);function e(r,n,a){a===void 0&&(a=null);var s=t.call(this)||this;return s.learningRate=r,s.rho=n,s.epsilon=a,s.accumulatedGrads=[],s.accumulatedUpdates=[],a==null&&(s.epsilon=ve.backend.epsilon()),s}return e.prototype.applyGradients=function(r){var n=this,a=Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r);a.forEach(function(s,o){var u=ve.registeredVariables[s],l=!1;n.accumulatedGrads[o]==null&&(n.accumulatedGrads[o]={originalName:s+"/accum_grad",variable:fi(function(){return as(u).variable(l)})}),n.accumulatedUpdates[o]==null&&(n.accumulatedUpdates[o]={originalName:s+"/accum_var",variable:fi(function(){return as(u).variable(l)})});var h=Array.isArray(r)?r[o].tensor:r[s];if(h!=null){var p=n.accumulatedGrads[o].variable,v=n.accumulatedUpdates[o].variable;fi(function(){var y=It(pt(p,n.rho),pt($o(h),1-n.rho)),S=pt(yn(vf(It(v,n.epsilon)),vf(It(p,n.epsilon))),h),A=It(pt(v,n.rho),pt($o(S),1-n.rho));p.assign(y),v.assign(A);var T=It(pt(S,-n.learningRate),u);u.assign(T)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedUpdates!=null&&(Sa(this.accumulatedGrads.map(function(r){return r.variable})),Sa(this.accumulatedUpdates.map(function(r){return r.variable})))},e.prototype.getWeights=function(){return xt(this,void 0,void 0,function(){var r;return St(this,function(n){switch(n.label){case 0:return r=Ir(this.accumulatedGrads,this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(r.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},e.prototype.setWeights=function(r){return xt(this,void 0,void 0,function(){var n,a;return St(this,function(s){switch(s.label){case 0:return[4,this.extractIterations(r)];case 1:return r=s.sent(),n=r.length/2,a=!1,this.accumulatedGrads=r.slice(0,n).map(function(o){return{originalName:o.name,variable:o.tensor.variable(a)}}),this.accumulatedUpdates=r.slice(n,n*2).map(function(o){return{originalName:o.name,variable:o.tensor.variable(a)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(r,n){return new r(n.learningRate,n.rho,n.epsilon)},e}(Ll);Q2.className="Adadelta";Bl(Q2);var ex=function(t){gf(e,t);function e(r,n){n===void 0&&(n=.1);var a=t.call(this)||this;return a.learningRate=r,a.initialAccumulatorValue=n,a.accumulatedGrads=[],a}return e.prototype.applyGradients=function(r){var n=this,a=Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r);a.forEach(function(s,o){var u=ve.registeredVariables[s];if(n.accumulatedGrads[o]==null){var l=!1;n.accumulatedGrads[o]={originalName:s+"/accumulator",variable:fi(function(){return W2(u.shape,n.initialAccumulatorValue).variable(l)})}}var h=Array.isArray(r)?r[o].tensor:r[s];if(h!=null){var p=n.accumulatedGrads[o].variable;fi(function(){var v=It(p,$o(h));p.assign(v);var y=It(pt(yn(h,vf(It(v,ve.backend.epsilon()))),-n.learningRate),u);u.assign(y)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedGrads!=null&&Sa(this.accumulatedGrads.map(function(r){return r.variable}))},e.prototype.getWeights=function(){return xt(this,void 0,void 0,function(){return St(this,function(r){switch(r.label){case 0:return[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(this.accumulatedGrads.map(function(n){return{name:n.originalName,tensor:n.variable}}))]}})})},e.prototype.setWeights=function(r){return xt(this,void 0,void 0,function(){var n;return St(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(r)];case 1:return r=a.sent(),n=!1,this.accumulatedGrads=r.map(function(s){return{originalName:s.name,variable:s.tensor.variable(n)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(r,n){return new r(n.learningRate,n.initialAccumulatorValue)},e}(Ll);ex.className="Adagrad";Bl(ex);var tx=function(t){gf(e,t);function e(r,n,a,s){s===void 0&&(s=null);var o=t.call(this)||this;return o.learningRate=r,o.beta1=n,o.beta2=a,o.epsilon=s,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],fi(function(){o.accBeta1=Br(n).variable(),o.accBeta2=Br(a).variable()}),s==null&&(o.epsilon=ve.backend.epsilon()),o}return e.prototype.applyGradients=function(r){var n=this,a=Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r);fi(function(){var s=Jt(1,n.accBeta1),o=Jt(1,n.accBeta2);a.forEach(function(u,l){var h=ve.registeredVariables[u],p=!1;n.accumulatedFirstMoment[l]==null&&(n.accumulatedFirstMoment[l]={originalName:u+"/m",variable:fi(function(){return as(h).variable(p)})}),n.accumulatedSecondMoment[l]==null&&(n.accumulatedSecondMoment[l]={originalName:u+"/v",variable:fi(function(){return as(h).variable(p)})});var v=Array.isArray(r)?r[l].tensor:r[u];if(v!=null){var y=n.accumulatedFirstMoment[l].variable,S=n.accumulatedSecondMoment[l].variable,A=It(pt(y,n.beta1),pt(v,1-n.beta1)),T=It(pt(S,n.beta2),pt($o(v),1-n.beta2)),I=yn(A,s),N=yn(T,o);y.assign(A),S.assign(T);var D=It(pt(yn(I,It(vf(N),n.epsilon)),-n.learningRate),h);h.assign(D)}}),n.accBeta1.assign(pt(n.accBeta1,n.beta1)),n.accBeta2.assign(pt(n.accBeta2,n.beta2))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Sa(this.accumulatedFirstMoment.map(function(r){return r.variable})),this.accumulatedSecondMoment!=null&&Sa(this.accumulatedSecondMoment.map(function(r){return r.variable}))},e.prototype.getWeights=function(){return xt(this,void 0,void 0,function(){var r;return St(this,function(n){switch(n.label){case 0:return r=Ir(this.accumulatedFirstMoment,this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(r.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},e.prototype.setWeights=function(r){return xt(this,void 0,void 0,function(){var n,a,s=this;return St(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(r)];case 1:return r=o.sent(),fi(function(){s.accBeta1.assign(Zg(s.beta1,s.iterations_+1)),s.accBeta2.assign(Zg(s.beta2,s.iterations_+1))}),n=r.length/2,a=!1,this.accumulatedFirstMoment=r.slice(0,n).map(function(u){return{originalName:u.name,variable:u.tensor.variable(a)}}),this.accumulatedSecondMoment=r.slice(n,n*2).map(function(u){return{originalName:u.name,variable:u.tensor.variable(a)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(r,n){return new r(n.learningRate,n.beta1,n.beta2,n.epsilon)},e}(Ll);tx.className="Adam";Bl(tx);var rx=function(t){gf(e,t);function e(r,n,a,s,o){s===void 0&&(s=null),o===void 0&&(o=0);var u=t.call(this)||this;return u.learningRate=r,u.beta1=n,u.beta2=a,u.epsilon=s,u.decay=o,u.accumulatedFirstMoment=[],u.accumulatedWeightedInfNorm=[],fi(function(){u.iteration=Br(0).variable(),u.accBeta1=Br(n).variable()}),s==null&&(u.epsilon=ve.backend.epsilon()),u}return e.prototype.applyGradients=function(r){var n=this,a=Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r);fi(function(){var s=Jt(1,n.accBeta1),o=yn(-n.learningRate,It(pt(n.iteration,n.decay),1));a.forEach(function(u,l){var h=ve.registeredVariables[u],p=!1;n.accumulatedFirstMoment[l]==null&&(n.accumulatedFirstMoment[l]={originalName:u+"/m",variable:as(h).variable(p)}),n.accumulatedWeightedInfNorm[l]==null&&(n.accumulatedWeightedInfNorm[l]={originalName:u+"/v",variable:as(h).variable(p)});var v=Array.isArray(r)?r[l].tensor:r[u];if(v!=null){var y=n.accumulatedFirstMoment[l].variable,S=n.accumulatedWeightedInfNorm[l].variable,A=It(pt(y,n.beta1),pt(v,1-n.beta1)),T=pt(S,n.beta2),I=is(v),N=$H(T,I);y.assign(A),S.assign(N);var D=It(pt(yn(o,s),yn(A,It(N,n.epsilon))),h);h.assign(D)}}),n.iteration.assign(It(n.iteration,1)),n.accBeta1.assign(pt(n.accBeta1,n.beta1))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Sa(this.accumulatedFirstMoment.map(function(r){return r.variable})),this.accumulatedWeightedInfNorm!=null&&Sa(this.accumulatedWeightedInfNorm.map(function(r){return r.variable}))},e.prototype.getWeights=function(){return xt(this,void 0,void 0,function(){return St(this,function(r){throw new Error("getWeights() is not implemented for Adamax yet.")})})},e.prototype.setWeights=function(r){return xt(this,void 0,void 0,function(){return St(this,function(n){throw new Error("setWeights() is not implemented for Adamax yet.")})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(r,n){return new r(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)},e}(Ll);rx.className="Adamax";Bl(rx);var oy=function(t){gf(e,t);function e(r){var n=t.call(this)||this;return n.learningRate=r,n.setLearningRate(r),n}return e.prototype.applyGradients=function(r){var n=this,a=Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r);a.forEach(function(s,o){var u=Array.isArray(r)?r[o].tensor:r[s];if(u!=null){var l=ve.registeredVariables[s];fi(function(){var h=It(pt(n.c,u),l);l.assign(h)})}}),this.incrementIterations()},e.prototype.setLearningRate=function(r){this.learningRate=r,this.c!=null&&this.c.dispose(),this.c=YG(Br(-r))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return xt(this,void 0,void 0,function(){return St(this,function(r){switch(r.label){case 0:return[4,this.saveIterations()];case 1:return[2,[r.sent()]]}})})},e.prototype.setWeights=function(r){return xt(this,void 0,void 0,function(){return St(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(r)];case 1:if(r=n.sent(),r.length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(r,n){return new r(n.learningRate)},e}(Ll);oy.className="SGD";Bl(oy);var nx=function(t){gf(e,t);function e(r,n,a){a===void 0&&(a=!1);var s=t.call(this,r)||this;return s.learningRate=r,s.momentum=n,s.useNesterov=a,s.accumulations=[],s.m=Br(s.momentum),s}return e.prototype.applyGradients=function(r){var n=this,a=Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r);a.forEach(function(s,o){var u=ve.registeredVariables[s];if(n.accumulations[o]==null){var l=!1;n.accumulations[o]={originalName:s+"/momentum",variable:fi(function(){return as(u).variable(l)})}}var h=n.accumulations[o].variable,p=Array.isArray(r)?r[o].tensor:r[s];p!=null&&fi(function(){var v,y=It(pt(n.m,h),p);n.useNesterov?v=It(pt(n.c,It(p,pt(y,n.m))),u):v=It(pt(n.c,y),u),h.assign(y),u.assign(v)})}),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&Sa(this.accumulations.map(function(r){return r.variable}))},e.prototype.setMomentum=function(r){this.momentum=r},e.prototype.getWeights=function(){return xt(this,void 0,void 0,function(){return St(this,function(r){switch(r.label){case 0:return[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(this.accumulations.map(function(n){return{name:n.originalName,tensor:n.variable}}))]}})})},e.prototype.setWeights=function(r){return xt(this,void 0,void 0,function(){var n;return St(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(r)];case 1:return r=a.sent(),n=!1,this.accumulations=r.map(function(s){return{originalName:s.name,variable:s.tensor.variable(n)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(r,n){return new r(n.learningRate,n.momentum,n.useNesterov)},e}(oy);nx.className="Momentum";Bl(nx);var ix=function(t){gf(e,t);function e(r,n,a,s,o){n===void 0&&(n=.9),a===void 0&&(a=0),s===void 0&&(s=null),o===void 0&&(o=!1);var u=t.call(this)||this;if(u.learningRate=r,u.decay=n,u.momentum=a,u.epsilon=s,u.accumulatedMeanSquares=[],u.accumulatedMoments=[],u.accumulatedMeanGrads=[],u.centered=o,s==null&&(u.epsilon=ve.backend.epsilon()),r==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return u}return e.prototype.applyGradients=function(r){var n=this,a=Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r);a.forEach(function(s,o){var u=ve.registeredVariables[s],l=!1;n.accumulatedMeanSquares[o]==null&&(n.accumulatedMeanSquares[o]={originalName:s+"/rms",variable:fi(function(){return as(u).variable(l)})}),n.accumulatedMoments[o]==null&&(n.accumulatedMoments[o]={originalName:s+"/momentum",variable:fi(function(){return as(u).variable(l)})}),n.accumulatedMeanGrads[o]==null&&n.centered&&(n.accumulatedMeanGrads[o]={originalName:s+"/mg",variable:fi(function(){return as(u).variable(l)})});var h=Array.isArray(r)?r[o].tensor:r[s];if(h!=null){var p=n.accumulatedMeanSquares[o].variable,v=n.accumulatedMoments[o].variable;fi(function(){var y=It(pt(p,n.decay),pt($o(h),1-n.decay));if(n.centered){var S=n.accumulatedMeanGrads[o].variable,A=It(pt(S,n.decay),pt(h,1-n.decay)),T=yn(pt(h,n.learningRate),vf(Jt(y,It($o(A),n.epsilon)))),I=It(pt(v,n.momentum),T);p.assign(y),S.assign(A),v.assign(I);var N=Jt(u,I);u.assign(N)}else{var D=It(pt(p,n.decay),pt($o(h),1-n.decay)),I=It(pt(v,n.momentum),yn(pt(h,n.learningRate),vf(It(D,n.epsilon))));p.assign(D),v.assign(I);var N=Jt(u,I);u.assign(N)}})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&Sa(this.accumulatedMeanSquares.map(function(r){return r.variable})),this.accumulatedMeanGrads!=null&&this.centered&&Sa(this.accumulatedMeanGrads.map(function(r){return r.variable})),this.accumulatedMoments!=null&&Sa(this.accumulatedMoments.map(function(r){return r.variable}))},e.prototype.getWeights=function(){return xt(this,void 0,void 0,function(){var r;return St(this,function(n){switch(n.label){case 0:return r=Ir(this.accumulatedMeanSquares,this.accumulatedMoments),this.centered&&r.push.apply(r,Ir(this.accumulatedMeanGrads)),[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(r.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},e.prototype.setWeights=function(r){return xt(this,void 0,void 0,function(){var n,a;return St(this,function(s){switch(s.label){case 0:return[4,this.extractIterations(r)];case 1:return r=s.sent(),n=this.centered?r.length/3:r.length/2,a=!1,this.accumulatedMeanSquares=r.slice(0,n).map(function(o){return{originalName:o.name,variable:o.tensor.variable(a)}}),this.accumulatedMoments=r.slice(n,n*2).map(function(o){return{originalName:o.name,variable:o.tensor.variable(a)}}),this.centered&&(this.accumulatedMeanGrads=r.slice(n*2,n*3).map(function(o){return{originalName:o.name,variable:o.tensor.variable(a)}})),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(r,n){return new r(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)},e}(Ll);ix.className="RMSProp";Bl(ix);var Al=function(){function t(){}return t.sgd=function(e){return new oy(e)},t.momentum=function(e,r,n){return n===void 0&&(n=!1),new nx(e,r,n)},t.rmsprop=function(e,r,n,a,s){return r===void 0&&(r=.9),n===void 0&&(n=0),a===void 0&&(a=null),s===void 0&&(s=!1),new ix(e,r,n,a,s)},t.adam=function(e,r,n,a){return e===void 0&&(e=.001),r===void 0&&(r=.9),n===void 0&&(n=.999),a===void 0&&(a=null),new tx(e,r,n,a)},t.adadelta=function(e,r,n){return e===void 0&&(e=.001),r===void 0&&(r=.95),n===void 0&&(n=null),new Q2(e,r,n)},t.adamax=function(e,r,n,a,s){return e===void 0&&(e=.002),r===void 0&&(r=.9),n===void 0&&(n=.999),a===void 0&&(a=null),s===void 0&&(s=0),new rx(e,r,n,a,s)},t.adagrad=function(e,r){return r===void 0&&(r=.1),new ex(e,r)},t}();var EIe={sgd:Al.sgd,momentum:Al.momentum,adadelta:Al.adadelta,adagrad:Al.adagrad,rmsprop:Al.rmsprop,adamax:Al.adamax,adam:Al.adam};var MIe=function(){return typeof requestAnimationFrame!="undefined"?requestAnimationFrame:typeof setImmediate!="undefined"?setImmediate:function(t){return t()}}();function AIe(){return new Promise(function(t){return MIe(function(){return t()})})}function kIe(t,e){var r=t[0].length;t.forEach(function(a,s){se(a.length===r,function(){return"Error in concat"+r+"D: rank of tensors["+s+"] must be the same "+("as the rank of the rest ("+r+")")})}),se(e>=0&&e<r,function(){return"Error in concat"+r+"D: axis must be between 0 and "+(r-1)+"."});var n=t[0];t.forEach(function(a,s){for(var o=0;o<r;o++)se(o===e||a[o]===n[o],function(){return"Error in concat"+r+"D: Shape of tensors["+s+"] ("+a+") "+("does not match the shape of the rest ("+n+") ")+("along the non-concatenated axis "+s+".")})})}function TIe(t,e){for(var r=t[0].slice(),n=1;n<t.length;n++)r[e]+=t[n][e];return r}var EN=30;function NIe(t){return t<=EN?t:E2(t,Math.floor(Math.sqrt(t)))}function IIe(t,e,r){var n=r*(typeof t=="number"?t:t[0]),a=e*(typeof t=="number"?t:t[1]);return[n,a]}function DIe(t,e,r,n){n===void 0&&(n=!0);var a=[];if(n)a=a.concat(e.slice(0)),a.push(t[0]/r),a=a.concat(t.slice(1));else{a=a.concat(t[0]);for(var s=e.length,o=0;o<s;++o)a=a.concat([t[o+1]/e[o],e[o]]);a=a.concat(t.slice(s+1))}return a}function OIe(t,e,r){r===void 0&&(r=!0);var n=[];if(r){n.push(e);for(var a=e+1;a<t;++a)a<=2*e?(n.push(a),n.push(a-(e+1))):n.push(a)}else{for(var s=[],o=[],a=1;a<t;++a)a>=e*2+1||a%2===1?o.push(a):s.push(a);n.push.apply(n,Ir(s)),n.push(0),n.push.apply(n,Ir(o))}return n}function RIe(t,e,r,n){n===void 0&&(n=!0);var a=[];n?a.push(t[0]/r):a.push(t[0]*r);for(var s=1;s<t.length;++s)s<=e.length?n?a.push(e[s-1]*t[s]):a.push(t[s]/e[s-1]):a.push(t[s]);return a}function CIe(t,e){for(var r=[0],n=0;n<e;++n)r.push(t[n][0]);return r}function FIe(t,e,r){for(var n=t.slice(0,1),a=0;a<r;++a)n.push(t[a+1]-e[a][0]-e[a][1]);return n}var BIe=1.7580993408473768,LIe=1.0507009873554805;var PIe=.3275911,qIe=.254829592,$Ie=-.284496736,zIe=1.421413741,jIe=-1.453152027,UIe=1.061405429;function VIe(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+(t.length+", imag: "+e.length+"."));for(var r=new Float32Array(t.length*2),n=0;n<r.length;n+=2)r[n]=t[n/2],r[n+1]=e[n/2];return r}function WIe(t){for(var e=new Float32Array(t.length/2),r=new Float32Array(t.length/2),n=0;n<t.length;n+=2)e[n/2]=t[n],r[n/2]=t[n+1];return{real:e,imag:r}}function GIe(t){for(var e=Math.ceil(t.length/4),r=new Float32Array(e),n=new Float32Array(e),a=0;a<t.length;a+=4)r[Math.floor(a/4)]=t[a],n[Math.floor(a/4)]=t[a+1];return{real:r,imag:n}}function HIe(t){for(var e=Math.floor(t.length/4),r=new Float32Array(e),n=new Float32Array(e),a=2;a<t.length;a+=4)r[Math.floor(a/4)]=t[a],n[Math.floor(a/4)]=t[a+1];return{real:r,imag:n}}function KIe(t,e){var r=t[e*2],n=t[e*2+1];return{real:r,imag:n}}function ZIe(t,e,r,n){t[n*2]=e,t[n*2+1]=r}function JIe(t,e){for(var r=new Float32Array(t/2),n=new Float32Array(t/2),a=0;a<Math.ceil(t/2);a++){var s=(e?2:-2)*Math.PI*(a/t);r[a]=Math.cos(s),n[a]=Math.sin(s)}return{real:r,imag:n}}function YIe(t,e,r){var n=(r?2:-2)*Math.PI*(t/e),a=Math.cos(n),s=Math.sin(n);return{real:a,imag:s}}var v4="->",XIe=/->/g,EU=",",MU="...";function QIe(t,e){t=t.replace(/\s/g,"");var r=(t.length-t.replace(XIe,"").length)/v4.length;if(r<1)throw new Error("Equations without an arrow are not supported.");if(r>1)throw new Error('Equation must contain exactly one arrow ("'+v4+'").');var n=wt(t.split(v4),2),a=n[0],s=n[1];se(a.indexOf(MU)===-1,function(){return'The ellipsis notation ("'+MU+'") is not supported yet.'});var o=a.split(EU),u=o.length;if(e!==u)throw new Error("Expected "+u+" input tensors, received "+e);if(u>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var l=[],h=function(N){var D=s[N];if(!o.some(function(C){return C.indexOf(D)!==-1}))throw new Error("Output subscripts contain the label "+D+" not present in the input subscripts.");l.indexOf(D)===-1&&l.push(D)},p=0;p<s.length;++p)h(p);for(var p=0;p<a.length;++p){var v=a[p];l.indexOf(v)===-1&&v!==EU&&l.push(v)}for(var y=new Array(o.length),p=0;p<u;++p){if(new Set(o[p].split("")).size!==o[p].length)throw new Error("Found duplicate axes in input component "+o[p]+". Support for duplicate axes in input is not implemented yet.");y[p]=[];for(var S=0;S<o[p].length;++S)y[p].push(l.indexOf(o[p][S]))}for(var A=l.length,T=s.length,I=[],p=T;p<A;++p)I.push(p);return{allDims:l,summedDims:I,idDims:y}}function eDe(t,e){var r=new Array(t);r.fill(-1);for(var n=0;n<e.length;++n)r[e[n]]=n;for(var a=[],n=0;n<t;++n)r[n]===-1&&a.push(n);return r=r.filter(function(s){return s!==-1}),{permutationIndices:r,expandDims:a}}function tDe(t,e,r){for(var n=new Array(t),a=function(o){for(var u=r[o].shape,l=function(p){n[e[o][p]]===void 0?n[e[o][p]]=u[p]:se(n[e[o][p]]===u[p],function(){return"Expected dimension "+n[e[o][p]]+" at axis "+p+" "+("of input shaped "+JSON.stringify(u)+", ")+("but got dimension "+u[p])})},h=0;h<e[o].length;++h)l(h)},s=0;s<r.length;++s)a(s)}function rDe(t,e){var r,n,a=t,s=[],o=0;t.length===0&&a.push(-1),o=t.length+1;for(var u=0;u<o;++u)s.push([]);for(var l=[],u=0;u<a.length;++u){var h=a[u],p=iDe(e,h);try{for(var v=(r=void 0,$a(p)),y=v.next();!y.done;y=v.next()){var S=y.value;l.indexOf(S)===-1&&(s[u].push(S),l.push(S))}}catch(T){r={error:T}}finally{try{y&&!y.done&&(n=v.return)&&n.call(v)}finally{if(r)throw r.error}}}return{path:a,steps:s}}function nDe(t){return t.every(function(e,r){return e===r})}function iDe(t,e){for(var r=[],n=0;n<t.length;++n)(t[n].length===0||t[n].indexOf(e)!==-1||e===-1)&&r.push(n);return r}function aDe(t,e,r){r===void 0&&(r=0);var n=[];if(typeof e=="number")se(t.shape[r]%e===0,function(){return"Number of splits must evenly divide the axis."}),n=new Array(e).fill(t.shape[r]/e);else{var a=e.reduce(function(u,l){return l===-1&&(u+=1),u},0);se(a<=1,function(){return"There should be only one negative value in split array."});var s=e.indexOf(-1);if(s!==-1){var o=e.reduce(function(u,l){return l>0?u+l:u});e[s]=t.shape[r]-o}se(t.shape[r]===e.reduce(function(u,l){return u+l}),function(){return"The sum of sizes must match the size of the axis dimension."}),n=e}return n}function sDe(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = `+t}function oDe(t,e){return"indices("+t+", 0) is invalid: "+e+" < 0"}function uDe(t,e,r){return"indices("+t+", 0) is invalid: "+e+" >= "+r}function fDe(t,e){return"only one output dimension may be -1, not both "+t+" and "+e}function lDe(t,e){return"size "+t+" must be non-negative, not "+e}function cDe(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function hDe(t,e){var r=bn(t),n=bn(e);return"Input to reshape is a SparseTensor with "+r+`
  dense values, but the requested shape requires a multiple of `+n+". inputShape="+t+" outputShape= "+e}function dDe(t,e){var r=bn(t),n=bn(e);return"Input to reshape is a tensor with "+r+" dense values, but the requested shape has "+n+". inputShape="+t+" outputShape="+e}function pDe(){return"segment ids must be >= 0"}function mDe(){return"segment ids are not increasing"}function vDe(t,e){return"Segment id "+t+" out of range [0, "+e+"), possibly because segmentIds input is not sorted."}function gDe(t,e,r){return"Bad: indices["+t+"] == "+e+" out of range [0, "+r+")"}function yDe(t,e){var r=!1,n;for(t<=EN?(n=t,r=!0):n=E2(t,Math.floor(Math.sqrt(t)));!r;)n>e||n===t?r=!0:n=E2(t,n+1);return n}function bDe(t,e,r){for(var n=[],a=t.length,s=0;s<a;s++)s!==e?n.push(t[s]):n.push(r);return n}function wDe(t,e,r,n){var a=e.shape.length,s=t.shape.length;if(n!==0&&(n<-a||n>a))throw new Error("Expect batchDims in the range of [-"+a+", "+a+"], but got "+n);if(n<0&&(n+=a),n>s)throw new Error("batchDims ("+n+`) must be less than rank(x) (
    `+s+").");if(r<n)throw new Error("batchDims ("+n+") must be less than or equal to axis ("+r+").");for(var o=0;o<n;++o)if(t.shape[o]!==e.shape[o])throw new Error("x.shape["+o+"]: "+t.shape[o]+" should be equal to indices.shape["+o+"]: "+e.shape[o]+".");for(var u=t.shape[r],l=[],h=1,p=1,v=1,o=0;o<n;++o)l.push(t.shape[o]),h*=t.shape[o];for(var o=n;o<r;o++)l.push(t.shape[o]),p*=t.shape[o];for(var o=n;o<a;o++)l.push(e.shape[o]);for(var o=r+1;o<s;o++)l.push(t.shape[o]),v*=t.shape[o];return{batchSize:h,sliceSize:v,outerSize:p,dimSize:u,outputShape:l}}var _De={__proto__:null,segOpComputeOptimalWindowSize:yDe,computeOutShape:bDe,collectGatherOpShapeInfo:wDe};function xDe(t){try{return t.map(function(e){return T2(e)})}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8, error: "+e)}}function SDe(t){return t.map(function(e){return ry(e)})}var EDe={__proto__:null,slice_util:cH,segment_util:_De,fromUint8ToStringArray:xDe,fromStringArrayToUint8:SDe,upcastType:$2,axesAreInnerMostDims:dN,combineLocations:AH,computeOutAndReduceShapes:XAe,expandShapeToKeepDim:ay,assertAxesAreInnerMostDims:QAe,getAxesPermutation:eke,getUndoAxesPermutation:tke,getInnerMostAxes:rke,getBroadcastDims:XG,getReductionAxes:sN,assertAndGetBroadcastShape:li,assertParamsConsistent:kIe,computeOutShape:TIe,computeDilation2DInfo:EMe,computePool2DInfo:gH,computePool3DInfo:MMe,computeConv2DInfo:iy,computeConv3DInfo:yH,computeDefaultPad:cN,tupleValuesAreOne:Kg,eitherStridesOrDilationsAreOne:yf,convertConv2DDataFormat:bH,checkPadOnDimRoundingMode:Ks,getFusedDyActivation:Z2,getFusedBiasGradient:J2,applyActivation:Y2,shouldFuse:X2,PARALLELIZE_THRESHOLD:EN,computeOptimalWindowSize:NIe,getImageCenter:IIe,getReshaped:DIe,getPermuted:OIe,getReshapedPermuted:RIe,getSliceBeginCoords:CIe,getSliceSize:FIe,prepareAndValidate:tH,validateUpdateShape:oN,validateInput:uN,calculateShapes:rH,SELU_SCALEALPHA:BIe,SELU_SCALE:LIe,ERF_P:PIe,ERF_A1:qIe,ERF_A2:$Ie,ERF_A3:zIe,ERF_A4:jIe,ERF_A5:UIe,warn:kl,log:cSe,mergeRealAndImagArrays:VIe,splitRealAndImagArrays:WIe,complexWithEvenIndex:GIe,complexWithOddIndex:HIe,getComplexWithIndex:KIe,assignToTypedArray:ZIe,exponents:JIe,exponent:YIe,decodeEinsumEquation:QIe,getEinsumPermutation:eDe,checkEinsumDimSizes:tDe,getEinsumComputePath:rDe,isIdentityPermutation:nDe,prepareSplitSize:aDe,getSparseFillEmptyRowsIndicesDenseShapeMismatch:sDe,getSparseFillEmptyRowsNegativeIndexErrorMessage:oDe,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:uDe,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:fDe,getSparseReshapeNegativeOutputDimErrorMessage:lDe,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:cDe,getSparseReshapeInputOutputMultipleErrorMessage:hDe,getSparseReshapeInputOutputMismatchErrorMessage:dDe,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:pDe,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:mDe,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:vDe,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:gDe};var MDe={__proto__:null,nonMaxSuppressionV3Impl:nK,nonMaxSuppressionV4Impl:iK,nonMaxSuppressionV5Impl:aK,whereImpl:XH};W.Abs=qU;W.Acos=$U;W.Acosh=zU;W.AdadeltaOptimizer=Q2;W.AdagradOptimizer=ex;W.AdamOptimizer=tx;W.AdamaxOptimizer=rx;W.Add=H4;W.AddN=jU;W.All=UU;W.Any=VU;W.ArgMax=WU;W.ArgMin=GU;W.Asin=HU;W.Asinh=KU;W.Atan=ZU;W.Atan2=YU;W.Atanh=JU;W.AvgPool=XU;W.AvgPool3D=QU;W.AvgPool3DGrad=Kxe;W.AvgPoolGrad=Hxe;W.BatchMatMul=eV;W.BatchToSpaceND=tV;W.Bincount=rV;W.BroadcastArgs=nV;W.BroadcastTo=Zxe;W.Cast=K4;W.Ceil=iV;W.ClipByValue=aV;W.Complex=sV;W.ComplexAbs=oV;W.Concat=uV;W.Conv2D=fV;W.Conv2DBackpropFilter=lV;W.Conv2DBackpropInput=cV;W.Conv3D=hV;W.Conv3DBackpropFilterV2=Jxe;W.Conv3DBackpropInputV2=dV;W.Cos=pV;W.Cosh=mV;W.CropAndResize=yV;W.Cumprod=vV;W.Cumsum=gV;W.DataStorage=Axe;W.DenseBincount=bV;W.DepthToSpace=wV;W.DepthwiseConv2dNative=_V;W.DepthwiseConv2dNativeBackpropFilter=xV;W.DepthwiseConv2dNativeBackpropInput=SV;W.Diag=EV;W.Dilation2D=MV;W.Dilation2DBackpropFilter=Xxe;W.Dilation2DBackpropInput=Yxe;W.Einsum=kV;W.Elu=TV;W.EluGrad=Qxe;W.Environment=LU;W.Equal=IV;W.Erf=NV;W.Exp=DV;W.ExpandDims=OV;W.Expm1=RV;W.FFT=CV;W.Fill=FV;W.FlipLeftRight=BV;W.Floor=LV;W.FloorDiv=PV;W.FromPixels=b4;W.FusedBatchNorm=qV;W.FusedConv2D=_4;W.FusedDepthwiseConv2D=x4;W.GatherNd=zV;W.GatherV2=$V;W.Greater=jV;W.GreaterEqual=UV;W.IFFT=VV;W.Identity=Z4;W.Imag=WV;W.IsFinite=GV;W.IsInf=HV;W.IsNan=KV;W.KernelBackend=AU;W.LRN=iW;W.LRNGrad=nSe;W.LeakyRelu=ZV;W.Less=JV;W.LessEqual=YV;W.LinSpace=XV;W.Log=QV;W.Log1p=eW;W.LogSoftmax=tSe;W.LogicalAnd=tW;W.LogicalNot=rW;W.LogicalOr=nW;W.LogicalXor=eSe;W.LowerBound=rSe;W.Max=aW;W.MaxPool=oW;W.MaxPool3D=uW;W.MaxPool3DGrad=aSe;W.MaxPoolGrad=iSe;W.MaxPoolWithArgmax=fW;W.Maximum=sW;W.Mean=lW;W.Min=cW;W.Minimum=hW;W.MirrorPad=dW;W.Mod=pW;W.MomentumOptimizer=nx;W.Multinomial=mW;W.Multiply=vW;W.Neg=gW;W.NonMaxSuppressionV3=bW;W.NonMaxSuppressionV4=wW;W.NonMaxSuppressionV5=_W;W.NotEqual=yW;W.OP_SCOPE_SUFFIX=FG;W.OneHot=SW;W.OnesLike=xW;W.Optimizer=Ll;W.OptimizerConstructors=Al;W.Pack=EW;W.PadV2=MW;W.Pool=sSe;W.Pow=AW;W.Prelu=kW;W.Prod=TW;W.RMSPropOptimizer=ix;W.Range=NW;W.Real=IW;W.RealDiv=AV;W.Reciprocal=DW;W.Relu=OW;W.Relu6=BW;W.Reshape=RW;W.ResizeBilinear=FW;W.ResizeBilinearGrad=uSe;W.ResizeNearestNeighbor=CW;W.ResizeNearestNeighborGrad=oSe;W.Reverse=LW;W.RotateWithOffset=_G;W.Round=PW;W.Rsqrt=qW;W.SGDOptimizer=oy;W.ScatterNd=$W;W.SearchSorted=zW;W.Select=jW;W.Selu=UW;W.Sigmoid=KW;W.Sign=HW;W.Sin=WW;W.Sinh=GW;W.Slice=VW;W.Softmax=eG;W.Softplus=ZW;W.SpaceToBatchND=XW;W.SparseFillEmptyRows=tG;W.SparseReshape=rG;W.SparseSegmentMean=nG;W.SparseSegmentSum=iG;W.SparseToDense=aG;W.SplitV=QW;W.Sqrt=JW;W.Square=fSe;W.SquaredDifference=sG;W.Step=wG;W.StridedSlice=oG;W.StringNGrams=uG;W.StringSplit=fG;W.StringToHashBucketFast=lG;W.Sub=cG;W.Sum=YW;W.Tan=hG;W.Tanh=dG;W.Tensor=ui;W.TensorBuffer=N2;W.Tile=J4;W.TopK=pG;W.Transform=mG;W.Transpose=b2;W.Unique=vG;W.Unpack=gG;W.UnsortedSegmentSum=yG;W.UpperBound=lSe;W.Variable=Wg;W.ZerosLike=bG;W._FusedMatMul=w4;W.abs=is;W.acos=tMe;W.acosh=nMe;W.add=It;W.addN=aMe;W.all=oMe;W.any=fMe;W.argMax=cMe;W.argMin=dMe;W.asin=mMe;W.asinh=gMe;W.atan=bMe;W.atan2=_Me;W.atanh=SMe;W.avgPool=wH;W.avgPool3d=RMe;W.backend=f3e;W.backend_util=EDe;W.basicLSTMCell=qMe;W.batchNorm=j2;W.batchNorm2d=VMe;W.batchNorm3d=GMe;W.batchNorm4d=KMe;W.batchToSpaceND=_H;W.bincount=xH;W.booleanMaskAsync=g4e;W.broadcastArgs=YMe;W.broadcastTo=x2;W.broadcast_util=y3e;W.browser=A3e;W.buffer=mf;W.cast=Vn;W.ceil=eAe;W.clipByValue=rAe;W.clone=_h;W.complex=Ol;W.concat=za;W.concat1d=iAe;W.concat2d=sAe;W.concat3d=uAe;W.concat4d=lAe;W.conv1d=dAe;W.conv2d=U2;W.conv2dTranspose=vAe;W.conv3d=yAe;W.conv3dTranspose=xAe;W.copyRegisteredKernels=mSe;W.cos=EAe;W.cosh=AAe;W.cosineWindow=xN;W.cumprod=TAe;W.cumsum=IAe;W.customGrad=Du;W.denseBincount=OAe;W.deprecationWarn=JEe;W.depthToSpace=CAe;W.depthwiseConv2d=hN;W.device_util=HSe;W.diag=LAe;W.dilation2d=qAe;W.disableDeprecationWarnings=ZEe;W.dispose=Sa;W.disposeVariables=YEe;W.div=yn;W.divNoNan=VAe;W.dot=GAe;W.dropout=N4e;W.einsum=KAe;W.elu=MH;W.enableDebugMode=KEe;W.enableProdMode=HEe;W.enclosingPowerOfTwo=eK;W.engine=XEe;W.env=Gt;W.equal=EH;W.erf=YAe;W.euclideanNorm=cke;W.exp=Ah;W.expandDims=vh;W.expm1=mke;W.eye=TH;W.fft=yN;W.fill=W2;W.findBackend=s3e;W.findBackendFactory=o3e;W.floor=NH;W.floorDiv=vH;W.fused=V4e;W.gather=IH;W.gatherND=A4e;W.gather_util=k3e;W.getBackend=i3e;W.getGradient=S4;W.getKernel=M2;W.getKernelsForBackend=A2;W.grad=Lke;W.grads=Pke;W.greater=G2;W.greaterEqual=DH;W.ifft=B2;W.imag=z2;W.image=bIe;W.inTopKAsync=D4e;W.io=VEe;W.irfft=ZH;W.isFinite=Ske;W.isInf=Mke;W.isNaN=kke;W.keep=YG;W.kernel_impls=MDe;W.leakyRelu=OH;W.less=Ike;W.lessEqual=pN;W.linalg=wIe;W.linspace=Oke;W.localResponseNormalization=Cke;W.log=Jg;W.log1p=RH;W.logSigmoid=Uke;W.logSoftmax=Gke;W.logSumExp=BH;W.logicalAnd=C2;W.logicalNot=LH;W.logicalOr=PH;W.logicalXor=Xke;W.losses=_Ie;W.lowerBound=eTe;W.matMul=Fr;W.math=g3e;W.max=qp;W.maxPool=qH;W.maxPool3d=nTe;W.maxPoolWithArgmax=aTe;W.maximum=$H;W.mean=F2;W.memory=QEe;W.meshgrid=uTe;W.min=j4;W.minimum=zH;W.mirrorPad=cTe;W.mod=dTe;W.moments=mTe;W.movingAverage=b4e;W.mul=pt;W.multiRNNCell=gTe;W.multinomial=bTe;W.neg=pf;W.nextFrame=AIe;W.norm=V2;W.notEqual=jH;W.oneHot=L4;W.ones=wh;W.onesLike=xTe;W.op=pe;W.outerProduct=ETe;W.pad=sy;W.pad1d=kTe;W.pad2d=NTe;W.pad3d=DTe;W.pad4d=RTe;W.pool=PTe;W.pow=Zg;W.prelu=VH;W.print=WG;W.prod=zTe;W.profile=e3e;W.rand=UTe;W.randomGamma=QTe;W.randomNormal=WH;W.randomStandardNormal=r6e;W.randomUniform=GH;W.range=Yg;W.ready=n3e;W.real=Hg;W.reciprocal=a6e;W.registerBackend=u3e;W.registerGradient=hSe;W.registerKernel=xG;W.relu=K2;W.relu6=HH;W.removeBackend=a3e;W.reshape=nt;W.reverse=kh;W.reverse1d=l6e;W.reverse2d=h6e;W.reverse3d=p6e;W.reverse4d=v6e;W.rfft=bN;W.round=KH;W.rsqrt=b6e;W.scalar=Br;W.scatterND=_4e;W.scatter_util=T3e;W.searchSorted=mN;W.selu=_6e;W.separableConv2d=S6e;W.serialization=q3e;W.setBackend=r3e;W.setPlatform=l3e;W.setdiff1dAsync=M6e;W.sigmoid=Pp;W.sign=k6e;W.signal=yIe;W.sin=N6e;W.sinh=D6e;W.slice=Tn;W.slice1d=R6e;W.slice2d=F6e;W.slice3d=L6e;W.slice4d=q6e;W.slice_util=cH;W.softmax=z6e;W.softplus=FH;W.spaceToBatchND=UH;W.sparse=xIe;W.sparseToDense=E4e;W.spectral=gIe;W.split=Xg;W.sqrt=vf;W.square=$o;W.squaredDifference=JH;W.squeeze=wN;W.stack=Qg;W.step=YH;W.stridedSlice=X6e;W.string=SIe;W.sub=Jt;W.sum=gn;W.sumOutType=PSe;W.tan=e4e;W.tanh=z4;W.tensor=Fp;W.tensor1d=qo;W.tensor2d=zg;W.tensor3d=QG;W.tensor4d=t4e;W.tensor5d=r4e;W.tensor6d=n4e;W.tensor_util=zSe;W.test_util=H3e;W.tidy=fi;W.tile=$g;W.time=t3e;W.topk=a4e;W.train=EIe;W.transpose=O2;W.truncatedNormal=o4e;W.unique=f4e;W.unregisterGradient=pSe;W.unregisterKernel=dSe;W.unsortedSegmentSum=c4e;W.unstack=_N;W.upcastType=$2;W.upperBound=d4e;W.util=ASe;W.valueAndGrad=qke;W.valueAndGrads=$ke;W.variable=p4e;W.variableGrads=CH;W.version_core=K3e;W.where=Up;W.whereAsync=QH;W.zeros=Vp;W.zerosLike=as});var Xte=ne(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});var yt=Mt();function CFe(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}}),e.default=t,e}var mee=CFe(yt);var FFe=yt.env();FFe.registerFlag("KEEP_INTERMEDIATE_TENSORS",function(){return!1},function(t){t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var jI=function(t,e){return jI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},jI(t,e)};function BFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");jI(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function on(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(p){try{h(n.next(p))}catch(v){o(v)}}function l(p){try{h(n.throw(p))}catch(v){o(v)}}function h(p){p.done?s(p.value):a(p.value).then(u,l)}h((n=n.apply(t,e||[])).next())})}function en(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(h){return function(p){return l([h,p])}}function l(h){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=h[0]&2?a.return:h[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,h[1])).done)return s;switch(a=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,a=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){r.label=h[1];break}if(h[0]===6&&r.label<s[1]){r.label=s[1],s=h;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(h);break}s[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(p){h=[6,p],a=0}finally{n=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function CE(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gt(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,s=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)s.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function $i(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(gt(arguments[e]));return t}var fo;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(fo||(fo={}));var vee;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(vee||(vee={}));var dD={};function LFe(t,e){var r={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:e};dD[t]=r}function Hee(t){return dD[t]}function PFe(t){delete dD[t]}function V(t,e,r,n,a){var s=e.inputParams[t];if(s&&s.inputIndexStart!==void 0){var o=s.inputIndexStart,u=s.inputIndexEnd===0?void 0:s.inputIndexEnd===void 0?o+1:s.inputIndexEnd;if(s.type==="tensor")return ba(e.inputNames[s.inputIndexStart],r,n,a);if(s.type==="tensors"){var l=e.inputNames.slice(o,u);return l.map(function(y){return ba(y,r,n,a)})}var h=ba(e.inputNames.slice(o)[0],r,n,a),p=h.dataSync();return s.type==="number"?p[0]:yt.util.toNestedArray(h.shape,p)}var v=e.attrParams[t];return v&&v.value}function ba(t,e,r,n){var a=gt(Ha(t),2),s=a[0],o=a[1];if(n!=null){var u=n.getHashTableHandleByName(s);if(u!=null)return u}var l=r.currentContextIds.find(function(h){return!!e[FE(s,h)]});return l!==void 0?e[FE(s,l)][o]:void 0}function qFe(t,e,r){return e[FE(t,r.currentContextId)]}function Pu(t,e){var r=gt(Ha(t),3),n=r[0],a=r[1],s=r[2];return[FE(n,e&&e.currentContextId),a,s]}function FE(t,e){return e?t+"-"+e:t}function Ha(t){var e=t.split(":");if(e.length===1)return[t,0,void 0];var r=e[0],n=e.length===3?e[1]:void 0,a=Number(e[e.length-1]);return[r,a,n]}function IE(t,e,r){var n=V("pad",t,e,r);if(n==="explicit"){n=V("explicitPaddings",t,e,r);for(var a=[[0,0],[0,0],[0,0],[0,0]],s=0;s<4;s++)a[s][0]=n[s*2],a[s][1]=n[s*2+1];return a}return n}function qf(t){return t.kept?t:yt.clone(t)}var $Fe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],zFe={__proto__:null,json:$Fe};var jFe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],UFe={__proto__:null,json:jFe};var VFe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],WFe={__proto__:null,json:VFe};var GFe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],HFe={__proto__:null,json:GFe};var KFe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],ZFe={__proto__:null,json:KFe};var JFe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],YFe={__proto__:null,json:JFe};var XFe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],QFe={__proto__:null,json:XFe};var e7e=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],t7e={__proto__:null,json:e7e};var r7e=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],n7e={__proto__:null,json:r7e};var i7e=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],a7e={__proto__:null,json:i7e};var s7e=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],o7e={__proto__:null,json:s7e};var u7e=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],f7e={__proto__:null,json:u7e};var l7e=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],c7e={__proto__:null,json:l7e};var h7e=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],d7e={__proto__:null,json:h7e};var p7e=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],m7e={__proto__:null,json:p7e};var v7e=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],g7e={__proto__:null,json:v7e};var y7e=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],b7e={__proto__:null,json:y7e};var w7e=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],_7e={__proto__:null,json:w7e};var x7e=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],S7e={__proto__:null,json:x7e},gee=function(){function t(){var e=[zFe,UFe,WFe,HFe,ZFe,YFe,QFe,t7e,n7e,a7e,o7e,f7e,c7e,d7e,m7e,g7e,b7e,_7e,S7e],r=[].concat.apply([],$i(e.map(function(n){return n.json})));this.opMappers=r.reduce(function(n,a){return n[a.tfOpName]=a,n},{})}return Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),t.prototype.transformGraph=function(e,r){var n=this;r===void 0&&(r={});var a=e.node,s=[],o=[],u=[],l=a.reduce(function(I,N){return I[N.name]=n.mapNode(N),N.op.startsWith("Placeholder")?s.push(I[N.name]):N.op==="Const"?o.push(I[N.name]):(N.input==null||N.input.length===0)&&u.push(I[N.name]),I},{}),h=[],p=[],v={},y={};r!=null&&(v=this.mapSignatureEntries(r.inputs),y=this.mapSignatureEntries(r.outputs));var S=Object.keys(l);S.forEach(function(I){var N=l[I];N.inputNames.forEach(function(D,C){var L=gt(Pu(D),3),z=L[0],$=L[2],G=l[z];if(G.outputs!=null){var j=G.outputs.indexOf($);if(j!==-1){var K=z+":"+j;N.inputNames[C]=K}}N.inputs.push(G),G.children.push(N)})}),Object.keys(y).length===0?S.forEach(function(I){var N=l[I];N.children.length===0&&p.push(N)}):Object.keys(y).forEach(function(I){var N=gt(Pu(I),1),D=N[0],C=l[D];C!=null&&(C.signatureKey=y[I],p.push(C))}),Object.keys(v).length>0?Object.keys(v).forEach(function(I){var N=gt(Pu(I),1),D=N[0],C=l[D];C&&(C.signatureKey=v[I],h.push(C))}):h=s;var A={};e.library!=null&&e.library.function!=null&&(A=e.library.function.reduce(function(I,N){return I[N.signature.name]=n.mapFunction(N),I},{}));var T={nodes:l,inputs:h,outputs:p,weights:o,placeholders:s,signature:r,functions:A};return u.length>0&&(T.initNodes=u),T},t.prototype.mapSignatureEntries=function(e){return Object.keys(e||{}).reduce(function(r,n){return r[e[n].name]=n,r},{})},t.prototype.mapNode=function(e){var r=Hee(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});var n={name:e.name,op:e.op,category:r.category,inputNames:(e.input||[]).map(function(a){return a.startsWith("^")?a.slice(1):a}),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:r.outputs};return r.inputs!=null&&(n.inputParams=r.inputs.reduce(function(a,s){return a[s.name]={type:s.type,inputIndexStart:s.start,inputIndexEnd:s.end},a},{})),r.attrs!=null&&(n.attrParams=r.attrs.reduce(function(a,s){var o=s.type,u=void 0;switch(s.type){case"string":u=UI(e.attr,s.tfName,s.defaultValue),u===void 0&&!!s.tfDeprecatedName&&(u=UI(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"string[]":u=JI(e.attr,s.tfName,s.defaultValue),u===void 0&&!!s.tfDeprecatedName&&(u=JI(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"number":u=WI(e.attr,s.tfName,s.defaultValue||0),u===void 0&&!!s.tfDeprecatedName&&(u=WI(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"number[]":u=ZI(e.attr,s.tfName,s.defaultValue),u===void 0&&!!s.tfDeprecatedName&&(u=ZI(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool":u=VI(e.attr,s.tfName,s.defaultValue),u===void 0&&!!s.tfDeprecatedName&&(u=VI(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool[]":u=XI(e.attr,s.tfName,s.defaultValue),u===void 0&&!!s.tfDeprecatedName&&(u=XI(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape":u=KI(e.attr,s.tfName,s.defaultValue),u===void 0&&!!s.tfDeprecatedName&&(u=KI(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape[]":u=YI(e.attr,s.tfName,s.defaultValue),u===void 0&&!!s.tfDeprecatedName&&(u=YI(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype":u=GI(e.attr,s.tfName,s.defaultValue),u===void 0&&!!s.tfDeprecatedName&&(u=GI(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype[]":u=HI(e.attr,s.tfName,s.defaultValue),u===void 0&&!!s.tfDeprecatedName&&(u=HI(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"func":u=yee(e.attr,s.tfName,s.defaultValue),u===void 0&&!!s.tfDeprecatedName&&(u=yee(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: "+s.type+" for op: "+e.op)}return a[s.name]={value:u,type:o},a},{})),n},t.prototype.mapFunction=function(e){var r=this,n=e.nodeDef,a=[],s=[],o={};n!=null&&(o=n.reduce(function(y,S){return y[S.name]=r.mapNode(S),S.op==="Const"&&s.push(y[S.name]),y},{}));var u=[],l=[];e.signature.inputArg.forEach(function(y){var S=gt(Pu(y.name),1),A=S[0],T={name:A,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:pD(y.type),type:"dtype"}},children:[]};T.signatureKey=y.name,u.push(T),o[A]=T});var h=Object.keys(o);h.forEach(function(y){var S=o[y];S.inputNames.forEach(function(A,T){var I=gt(Pu(A),3),N=I[0],D=I[2],C=o[N];if(C.outputs!=null){var L=C.outputs.indexOf(D);if(L!==-1){var z=N+":"+L;S.inputNames[T]=z}}S.inputs.push(C),C.children.push(S)})});var p=e.ret;e.signature.outputArg.forEach(function(y){var S=gt(Pu(p[y.name]),2),A=S[0],T=S[1],I=o[A];I!=null&&(I.defaultOutput=T,l.push(I))});var v=this.mapArgsToSignature(e);return{nodes:o,inputs:u,outputs:l,weights:s,placeholders:a,signature:v}},t.prototype.mapArgsToSignature=function(e){var r=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce(function(n,a){return n[a.name]=r.mapArgToTensorInfo(a),n},{}),outputs:e.signature.outputArg.reduce(function(n,a){return n[a.name]=r.mapArgToTensorInfo(a,e.ret),n},{})}},t.prototype.mapArgToTensorInfo=function(e,r){var n=e.name;return r!=null&&(n=r[n]),{name:n,dtype:e.type}},t}();function E7e(t){var e=yt.env().global;if(typeof e.atob!="undefined")return e.atob(t);if(typeof Buffer!="undefined")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function Kee(t,e){var r=Array.isArray(t)?String.fromCharCode.apply(null,t):E7e(t);return e?r:r.toLowerCase()}function UI(t,e,r,n){n===void 0&&(n=!1);var a=t[e];return a!=null?Kee(a.s,n):r}function VI(t,e,r){var n=t[e];return n?n.b:r}function WI(t,e,r){var n=t[e]||{},a=n.i!=null?n.i:n.f!=null?n.f:r;return typeof a=="number"?a:parseInt(a,10)}function pD(t){switch(typeof t=="string"&&(t=fo[t]),t){case fo.DT_FLOAT:case fo.DT_HALF:return"float32";case fo.DT_INT32:case fo.DT_INT64:case fo.DT_INT8:case fo.DT_UINT8:return"int32";case fo.DT_BOOL:return"bool";case fo.DT_DOUBLE:return"float32";case fo.DT_STRING:return"string";default:return null}}function yee(t,e,r){var n=t[e];return n&&n.func?n.func.name:r}function GI(t,e,r){var n=t[e];return n&&n.type?pD(n.type):r}function HI(t,e,r){var n=t[e];return n&&n.list&&n.list.type?n.list.type.map(function(a){return pD(a)}):r}function Zee(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(function(e){return typeof e.size=="number"?e.size:parseInt(e.size,10)}):[]}function KI(t,e,r){var n=t[e];return n&&n.shape?Zee(n.shape):r}function ZI(t,e,r){var n=t[e];return n?((n.list.f&&n.list.f.length?n.list.f:n.list.i)||[]).map(function(a){return typeof a=="number"?a:parseInt(a,10)}):r}function JI(t,e,r,n){n===void 0&&(n=!1);var a=t[e];return a&&a.list&&a.list.s?a.list.s.map(function(s){return Kee(s,n)}):r}function YI(t,e,r){var n=t[e];return n&&n.list&&n.list.shape?n.list.shape.map(function(a){return Zee(a)}):r}function XI(t,e,r){var n=t[e];return n&&n.list&&n.list.b?n.list.b:r}var M7e=function(){function t(e,r,n){var a=this;this.node=e,this.tensorMap=r,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(function(s){return a.getInput(s)}),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce(function(s,o){return s[o]=a.getAttr(o),s},{}))}return t.prototype.getInput=function(e){return ba(e,this.tensorMap,this.context)},t.prototype.getAttr=function(e,r){var n=this.node.rawAttrs[e];if(n.tensor!=null)return ba(e,this.tensorMap,this.context);if(n.i!=null||n.f!=null)return WI(this.node.rawAttrs,e,r);if(n.s!=null)return UI(this.node.rawAttrs,e,r);if(n.b!=null)return VI(this.node.rawAttrs,e,r);if(n.shape!=null)return KI(this.node.rawAttrs,e,r);if(n.type!=null)return GI(this.node.rawAttrs,e,r);if(n.list!=null){if(n.list.i!=null||n.list.f!=null)return ZI(this.node.rawAttrs,e,r);if(n.list.s!=null)return JI(this.node.rawAttrs,e,r);if(n.list.shape!=null)return YI(this.node.rawAttrs,e,r);if(n.list.b!=null)return XI(this.node.rawAttrs,e,r);if(n.list.type!=null)return HI(this.node.rawAttrs,e,r)}return r},t}();var A7e=1e-7,k7e=1e-4,T7e=function(){function t(){}return t.prototype.refCount=function(e){return hs("refCount")},t.prototype.incRef=function(e){return hs("incRef")},t.prototype.timerAvailable=function(){return!0},t.prototype.time=function(e){return hs("time")},t.prototype.read=function(e){return hs("read")},t.prototype.readSync=function(e){return hs("readSync")},t.prototype.readToGPU=function(e,r){return hs("readToGPU")},t.prototype.numDataIds=function(){return hs("numDataIds")},t.prototype.disposeData=function(e,r){return hs("disposeData")},t.prototype.write=function(e,r,n){return hs("write")},t.prototype.move=function(e,r,n,a,s){return hs("move")},t.prototype.memory=function(){return hs("memory")},t.prototype.floatPrecision=function(){return hs("floatPrecision")},t.prototype.epsilon=function(){return this.floatPrecision()===32?A7e:k7e},t.prototype.dispose=function(){return hs("dispose")},t}();function hs(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen")}function ye(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function go(t,e,r){r===void 0&&(r=""),ye(zm(t,e),function(){return r+(" Shapes "+t+" and "+e+" must match")})}function $m(t){ye(t!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function WE(t,e,r){if(e===void 0&&(e=[]),r===void 0&&(r=!1),e==null&&(e=[]),Array.isArray(t)||qu(t)&&!r)for(var n=0;n<t.length;++n)WE(t[n],e,r);else e.push(t);return e}function Oa(t){if(t.length===0)return 1;for(var e=t[0],r=1;r<t.length;r++)e*=t[r];return e}function zm(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function m1(t){return t%1===0}function DE(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function GE(t,e){var r=e.length;return t=t==null?e.map(function(n,a){return a}):[].concat(t),ye(t.every(function(n){return n>=-r&&n<r}),function(){return"All values in axis param must be in range [-"+r+", "+r+") but "+("got axis "+t)}),ye(t.every(function(n){return m1(n)}),function(){return"All values in axis param must be integers but "+("got axis "+t)}),t.map(function(n){return n<0?r+n:n})}function N7e(t,e){for(var r=[],n=[],a=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||a?null:GE(e,t).sort(),o=0,u=0;u<t.length;++u){if(s!=null){if(s[o]===u&&t[u]!==1)throw new Error("Can't squeeze axis "+u+" since its dim '"+t[u]+"' is not 1");(s[o]==null||s[o]>u)&&t[u]===1&&(r.push(t[u]),n.push(u)),s[o]<=u&&o++}t[u]!==1&&(r.push(t[u]),n.push(u))}return{newShape:r,keptDims:n}}function I7e(t,e){var r=null;if(t==null||t==="float32")r=new Float32Array(e);else if(t==="int32")r=new Int32Array(e);else if(t==="bool")r=new Uint8Array(e);else throw new Error("Unknown data type "+t);return r}function D7e(t,e){var r=null;if(t==null||t==="float32")r=new Float32Array(e);else if(t==="int32")r=new Int32Array(e);else if(t==="bool")r=new Uint8Array(e);else if(t==="string")r=new Array(e);else throw new Error("Unknown data type "+t);return r}function O7e(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(isNaN(n)||!isFinite(n))throw Error("A tensor of type "+e+" being uploaded contains "+n+".")}}function R7e(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function qu(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}function bee(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function C7e(t){if(t==null)return 0;var e=0;return t.forEach(function(r){return e+=r.length}),e}function mD(t){return typeof t=="string"||t instanceof String}function F7e(t){return typeof t=="boolean"}function B7e(t){return typeof t=="number"}function vD(t){return Array.isArray(t)?vD(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":B7e(t)?"float32":mD(t)?"string":F7e(t)?"bool":"float32"}function wee(t){return!!(t&&t.constructor&&t.call&&t.apply)}function gD(t){var e=t.length;if(e<2)return[];var r=new Array(e-1);r[e-2]=t[e-1];for(var n=e-3;n>=0;--n)r[n]=r[n+1]*t[n+1];return r}function Jee(t,e,r,n){n===void 0&&(n=!1);var a=new Array;if(e.length===1)for(var s=e[0]*(n?2:1),o=0;o<s;o++)a[o]=r[t+o];else for(var s=e[0],u=e.slice(1),l=u.reduce(function(p,v){return p*v})*(n?2:1),o=0;o<s;o++)a[o]=Jee(t+o*l,u,r,n);return a}function _ee(t,e,r){if(r===void 0&&(r=!1),t.length===0)return e[0];var n=t.reduce(function(a,s){return a*s})*(r?2:1);if(n===0)return[];if(n!==e.length)throw new Error("["+t+"] does not match the input size "+e.length+(r?" for a complex tensor":"")+".");return Jee(0,t,e,r)}function Yee(t,e){for(var r=yD(t,e),n=0;n<r.length;n++)r[n]=1;return r}function yD(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+e)}function Xee(t){t.forEach(function(e){ye(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got "+("shape ["+t+"].")})})}function Qee(t){return t&&t.then&&typeof t.then=="function"}var xee="tfjsflags",L7e=function(){function t(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=P7e,this.populateURLFlags()}return t.prototype.setPlatform=function(e,r){this.platform!=null&&(ho().getBool("IS_TEST")||ho().getBool("PROD")||console.warn("Platform "+this.platformName+" has already been set. "+("Overwriting the platform with "+e+"."))),this.platformName=e,this.platform=r},t.prototype.registerFlag=function(e,r,n){if(this.flagRegistry[e]={evaluationFn:r,setHook:n},this.urlFlags[e]!=null){var a=this.urlFlags[e];ho().getBool("IS_TEST")||ho().getBool("PROD")||console.warn("Setting feature override from URL "+e+": "+a+"."),this.set(e,a)}},t.prototype.getAsync=function(e){return on(this,void 0,void 0,function(){var r,n;return en(this,function(a){switch(a.label){case 0:return e in this.flags?[2,this.flags[e]]:(r=this.flags,n=e,[4,this.evaluateFlag(e)]);case 1:return r[n]=a.sent(),[2,this.flags[e]]}})})},t.prototype.get=function(e){if(e in this.flags)return this.flags[e];var r=this.evaluateFlag(e);if(Qee(r))throw new Error("Flag "+e+" cannot be synchronously evaluated. Please use getAsync() instead.");return this.flags[e]=r,this.flags[e]},t.prototype.getNumber=function(e){return this.get(e)},t.prototype.getBool=function(e){return this.get(e)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(e,r){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=r,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(r)},t.prototype.evaluateFlag=function(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},t.prototype.setFlags=function(e){this.flags=Object.assign({},e)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var e=this;if(!(typeof this.global=="undefined"||typeof this.global.location=="undefined"||typeof this.global.location.search=="undefined")){var r=this.getQueryParams(this.global.location.search);if(xee in r){var n=r[xee].split(",");n.forEach(function(a){var s=gt(a.split(":"),2),o=s[0],u=s[1];e.urlFlags[o]=$7e(o,u)})}}},t}();function P7e(t){var e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(r){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return q7e(e,n[0],n[1]),n.join("=")}),e}function q7e(t,e,r){t[decodeURIComponent(e)]=decodeURIComponent(r||"")}function $7e(t,e){if(e=e.toLowerCase(),e==="true"||e==="false")return e==="true";if(""+ +e===e)return+e;throw new Error("Could not parse value flag value "+e+" for flag "+t+".")}function ho(){return ete}var ete=null;function z7e(t){ete=t}var BI;function tte(){if(BI==null){var t=void 0;if(typeof window!="undefined")t=window;else if(typeof global!="undefined")t=global;else if(typeof process!="undefined")t=process;else if(typeof self!="undefined")t=self;else throw new Error("Could not find a global object");BI=t}return BI}function j7e(){var t=tte();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function bD(t,e){var r=j7e();if(r.has(t))return r.get(t);var n=e();return r.set(t,n),r.get(t)}var U7e="Abs",V7e="Acos",W7e="Acosh",rte="Add",G7e="AddN",H7e="All",K7e="Any",Z7e="ArgMax",J7e="ArgMin",Y7e="Asin",X7e="Asinh",Q7e="Atan",e9e="Atanh",t9e="Atan2",r9e="AvgPool",n9e="AvgPool3D",i9e="BatchMatMul",a9e="BatchToSpaceND",s9e="Bincount",o9e="BroadcastArgs",nte="Cast",u9e="Ceil",f9e="ClipByValue",l9e="Complex",c9e="ComplexAbs",h9e="Concat",d9e="Conv2D",p9e="Conv2DBackpropFilter",m9e="Conv2DBackpropInput",v9e="Conv3D",g9e="Conv3DBackpropInputV2",y9e="Cos",b9e="Cosh",w9e="Cumprod",_9e="Cumsum",x9e="CropAndResize",S9e="DenseBincount",E9e="DepthToSpace",M9e="DepthwiseConv2dNative",A9e="DepthwiseConv2dNativeBackpropFilter",k9e="DepthwiseConv2dNativeBackpropInput",T9e="Diag",N9e="Dilation2D",I9e="RealDiv",D9e="Einsum",O9e="Elu",R9e="Erf",C9e="Equal",F9e="Exp",B9e="ExpandDims",L9e="Expm1",P9e="FFT",q9e="Fill",$9e="FlipLeftRight",z9e="Floor",j9e="FloorDiv",U9e="FusedBatchNorm",V9e="GatherV2",W9e="GatherNd",G9e="Greater",H9e="GreaterEqual",ite="Identity",K9e="IFFT",Z9e="Imag",J9e="IsFinite",Y9e="IsInf",X9e="IsNan",Q9e="LeakyRelu",eBe="Less",tBe="LessEqual",rBe="LinSpace",nBe="Log",iBe="Log1p",aBe="LogicalAnd",sBe="LogicalNot",oBe="LogicalOr",uBe="LRN",fBe="Max",lBe="Maximum",cBe="MaxPool",hBe="MaxPool3D",dBe="MaxPoolWithArgmax",pBe="Mean",mBe="Min",vBe="Minimum",gBe="MirrorPad",yBe="Mod",bBe="Multinomial",wBe="Multiply",_Be="Neg",xBe="NotEqual",SBe="NonMaxSuppressionV3",EBe="NonMaxSuppressionV4",MBe="NonMaxSuppressionV5",ABe="OnesLike",kBe="OneHot",TBe="Pack",NBe="PadV2",IBe="Pow",DBe="Prelu",OBe="Prod",RBe="Range",CBe="Real",FBe="Reciprocal",BBe="Relu",LBe="Reshape",PBe="ResizeNearestNeighbor",qBe="ResizeBilinear",$Be="Relu6",zBe="Reverse",jBe="Round",UBe="Rsqrt",VBe="ScatterNd",WBe="SearchSorted",GBe="Select",HBe="Selu",KBe="Slice",ZBe="Sin",JBe="Sinh",YBe="Sign",XBe="Sigmoid",QBe="Softplus",eLe="Sqrt",tLe="Sum",rLe="SpaceToBatchND",nLe="SplitV",iLe="Softmax",aLe="SparseFillEmptyRows",sLe="SparseReshape",oLe="SparseSegmentMean",uLe="SparseSegmentSum",fLe="SparseToDense",lLe="SquaredDifference",cLe="StridedSlice",hLe="StringNGrams",dLe="StringSplit",pLe="StringToHashBucketFast",mLe="Sub",vLe="Tan",gLe="Tanh",ate="Tile",yLe="TopK",bLe="Transform",LI="Transpose",wLe="Unique",_Le="Unpack",xLe="UnsortedSegmentSum",SLe="ZerosLike",ELe="Step",MLe="RotateWithOffset",See="_FusedMatMul",Eee="FusedConv2D",Mee="FusedDepthwiseConv2D";function o1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ho().getBool("IS_TEST")||ho().getBool("PROD")||console.warn.apply(console,$i(t))}var ste=bD("kernelRegistry",function(){return new Map}),ALe=bD("gradRegistry",function(){return new Map});function Aee(t,e){var r=kLe(t,e);return ste.get(r)}function kee(t){return ALe.get(t)}function Tee(t){for(var e=ste.entries(),r=[];;){var n=e.next(),a=n.done,s=n.value;if(a)break;var o=gt(s,2),u=o[0],l=o[1],h=gt(u.split("_"),1),p=h[0];p===t&&r.push(l)}return r}function kLe(t,e){return e+"_"+t}var QI=Mn,po=null;try{po=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Mn(t,e,r){this.low=t|0,this.high=e|0,this.unsigned=!!r}Mn.prototype.__isLong__;Object.defineProperty(Mn.prototype,"__isLong__",{value:!0});function Ja(t){return(t&&t.__isLong__)===!0}Mn.isLong=Ja;var Nee={},Iee={};function ad(t,e){var r,n,a;return e?(t>>>=0,(a=0<=t&&t<256)&&(n=Iee[t],n)?n:(r=An(t,(t|0)<0?-1:0,!0),a&&(Iee[t]=r),r)):(t|=0,(a=-128<=t&&t<128)&&(n=Nee[t],n)?n:(r=An(t,t<0?-1:0,!1),a&&(Nee[t]=r),r))}Mn.fromInt=ad;function mo(t,e){if(isNaN(t))return e?ed:vo;if(e){if(t<0)return ed;if(t>=ote)return lte}else{if(t<=-Oee)return Ka;if(t+1>=Oee)return fte}return t<0?mo(-t,e).neg():An(t%Lm|0,t/Lm|0,e)}Mn.fromNumber=mo;function An(t,e,r){return new Mn(t,e,r)}Mn.fromBits=An;var BE=Math.pow;function wD(t,e,r){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return vo;if(typeof e=="number"?(r=e,e=!1):e=!!e,r=r||10,r<2||36<r)throw RangeError("radix");var n;if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return wD(t.substring(1),e,r).neg();for(var a=mo(BE(r,8)),s=vo,o=0;o<t.length;o+=8){var u=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+u),r);if(u<8){var h=mo(BE(r,u));s=s.mul(h).add(mo(l))}else s=s.mul(a),s=s.add(mo(l))}return s.unsigned=e,s}Mn.fromString=wD;function Yo(t,e){return typeof t=="number"?mo(t,e):typeof t=="string"?wD(t,e):An(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Mn.fromValue=Yo;var Dee=1<<16,TLe=1<<24,Lm=Dee*Dee,ote=Lm*Lm,Oee=ote/2,Ree=ad(TLe),vo=ad(0);Mn.ZERO=vo;var ed=ad(0,!0);Mn.UZERO=ed;var Rm=ad(1);Mn.ONE=Rm;var ute=ad(1,!0);Mn.UONE=ute;var eD=ad(-1);Mn.NEG_ONE=eD;var fte=An(-1,2147483647,!1);Mn.MAX_VALUE=fte;var lte=An(-1,-1,!0);Mn.MAX_UNSIGNED_VALUE=lte;var Ka=An(0,-2147483648,!1);Mn.MIN_VALUE=Ka;var ht=Mn.prototype;ht.toInt=function(){return this.unsigned?this.low>>>0:this.low};ht.toNumber=function(){return this.unsigned?(this.high>>>0)*Lm+(this.low>>>0):this.high*Lm+(this.low>>>0)};ht.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Ka)){var r=mo(e),n=this.div(r),a=n.mul(r).sub(this);return n.toString(e)+a.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=mo(BE(e,6),this.unsigned),o=this,u="";;){var l=o.div(s),h=o.sub(l.mul(s)).toInt()>>>0,p=h.toString(e);if(o=l,o.isZero())return p+u;for(;p.length<6;)p="0"+p;u=""+p+u}};ht.getHighBits=function(){return this.high};ht.getHighBitsUnsigned=function(){return this.high>>>0};ht.getLowBits=function(){return this.low};ht.getLowBitsUnsigned=function(){return this.low>>>0};ht.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Ka)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,r=31;r>0&&(e&1<<r)==0;r--);return this.high!=0?r+33:r+1};ht.isZero=function(){return this.high===0&&this.low===0};ht.eqz=ht.isZero;ht.isNegative=function(){return!this.unsigned&&this.high<0};ht.isPositive=function(){return this.unsigned||this.high>=0};ht.isOdd=function(){return(this.low&1)===1};ht.isEven=function(){return(this.low&1)===0};ht.equals=function(e){return Ja(e)||(e=Yo(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};ht.eq=ht.equals;ht.notEquals=function(e){return!this.eq(e)};ht.neq=ht.notEquals;ht.ne=ht.notEquals;ht.lessThan=function(e){return this.comp(e)<0};ht.lt=ht.lessThan;ht.lessThanOrEqual=function(e){return this.comp(e)<=0};ht.lte=ht.lessThanOrEqual;ht.le=ht.lessThanOrEqual;ht.greaterThan=function(e){return this.comp(e)>0};ht.gt=ht.greaterThan;ht.greaterThanOrEqual=function(e){return this.comp(e)>=0};ht.gte=ht.greaterThanOrEqual;ht.ge=ht.greaterThanOrEqual;ht.compare=function(e){if(Ja(e)||(e=Yo(e)),this.eq(e))return 0;var r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};ht.comp=ht.compare;ht.negate=function(){return!this.unsigned&&this.eq(Ka)?Ka:this.not().add(Rm)};ht.neg=ht.negate;ht.add=function(e){Ja(e)||(e=Yo(e));var r=this.high>>>16,n=this.high&65535,a=this.low>>>16,s=this.low&65535,o=e.high>>>16,u=e.high&65535,l=e.low>>>16,h=e.low&65535,p=0,v=0,y=0,S=0;return S+=s+h,y+=S>>>16,S&=65535,y+=a+l,v+=y>>>16,y&=65535,v+=n+u,p+=v>>>16,v&=65535,p+=r+o,p&=65535,An(y<<16|S,p<<16|v,this.unsigned)};ht.subtract=function(e){return Ja(e)||(e=Yo(e)),this.add(e.neg())};ht.sub=ht.subtract;ht.multiply=function(e){if(this.isZero())return vo;if(Ja(e)||(e=Yo(e)),po){var r=po.mul(this.low,this.high,e.low,e.high);return An(r,po.get_high(),this.unsigned)}if(e.isZero())return vo;if(this.eq(Ka))return e.isOdd()?Ka:vo;if(e.eq(Ka))return this.isOdd()?Ka:vo;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Ree)&&e.lt(Ree))return mo(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=this.high&65535,s=this.low>>>16,o=this.low&65535,u=e.high>>>16,l=e.high&65535,h=e.low>>>16,p=e.low&65535,v=0,y=0,S=0,A=0;return A+=o*p,S+=A>>>16,A&=65535,S+=s*p,y+=S>>>16,S&=65535,S+=o*h,y+=S>>>16,S&=65535,y+=a*p,v+=y>>>16,y&=65535,y+=s*h,v+=y>>>16,y&=65535,y+=o*l,v+=y>>>16,y&=65535,v+=n*p+a*h+s*l+o*u,v&=65535,An(S<<16|A,v<<16|y,this.unsigned)};ht.mul=ht.multiply;ht.divide=function(e){if(Ja(e)||(e=Yo(e)),e.isZero())throw Error("division by zero");if(po){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var r=(this.unsigned?po.div_u:po.div_s)(this.low,this.high,e.low,e.high);return An(r,po.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?ed:vo;var n,a,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return ed;if(e.gt(this.shru(1)))return ute;s=ed}else{if(this.eq(Ka)){if(e.eq(Rm)||e.eq(eD))return Ka;if(e.eq(Ka))return Rm;var o=this.shr(1);return n=o.div(e).shl(1),n.eq(vo)?e.isNegative()?Rm:eD:(a=this.sub(e.mul(n)),s=n.add(a.div(e)),s)}else if(e.eq(Ka))return this.unsigned?ed:vo;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=vo}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var u=Math.ceil(Math.log(n)/Math.LN2),l=u<=48?1:BE(2,u-48),h=mo(n),p=h.mul(e);p.isNegative()||p.gt(a);)n-=l,h=mo(n,this.unsigned),p=h.mul(e);h.isZero()&&(h=Rm),s=s.add(h),a=a.sub(p)}return s};ht.div=ht.divide;ht.modulo=function(e){if(Ja(e)||(e=Yo(e)),po){var r=(this.unsigned?po.rem_u:po.rem_s)(this.low,this.high,e.low,e.high);return An(r,po.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};ht.mod=ht.modulo;ht.rem=ht.modulo;ht.not=function(){return An(~this.low,~this.high,this.unsigned)};ht.and=function(e){return Ja(e)||(e=Yo(e)),An(this.low&e.low,this.high&e.high,this.unsigned)};ht.or=function(e){return Ja(e)||(e=Yo(e)),An(this.low|e.low,this.high|e.high,this.unsigned)};ht.xor=function(e){return Ja(e)||(e=Yo(e)),An(this.low^e.low,this.high^e.high,this.unsigned)};ht.shiftLeft=function(e){return Ja(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?An(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):An(0,this.low<<e-32,this.unsigned)};ht.shl=ht.shiftLeft;ht.shiftRight=function(e){return Ja(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?An(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):An(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};ht.shr=ht.shiftRight;ht.shiftRightUnsigned=function(e){if(Ja(e)&&(e=e.toInt()),e&=63,e===0)return this;var r=this.high;if(e<32){var n=this.low;return An(n>>>e|r<<32-e,r>>>e,this.unsigned)}else return e===32?An(r,0,this.unsigned):An(r>>>e-32,0,this.unsigned)};ht.shru=ht.shiftRightUnsigned;ht.shr_u=ht.shiftRightUnsigned;ht.toSigned=function(){return this.unsigned?An(this.low,this.high,!1):this};ht.toUnsigned=function(){return this.unsigned?this:An(this.low,this.high,!0)};ht.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};ht.toBytesLE=function(){var e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};ht.toBytesBE=function(){var e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]};Mn.fromBytes=function(e,r,n){return n?Mn.fromBytesLE(e,r):Mn.fromBytesBE(e,r)};Mn.fromBytesLE=function(e,r){return new Mn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)};Mn.fromBytesBE=function(e,r){return new Mn(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)};var NLe=Object.assign(Object.create(null),QI,{default:QI}),ILe=QI||NLe;function _D(t){return ILe.fromString(t,!0,16)}_D("c3a5c85c97cb3127");_D("b492b66fbe98f273");_D("9ae16a3b2f90404f");function DLe(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function cte(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=WE(t)),ho().getBool("DEBUG")&&O7e(t,e),DLe(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){for(var r=new Uint8Array(t.length),n=0;n<r.length;++n)Math.round(t[n])!==0&&(r[n]=1);return r}else throw new Error("Unknown data type "+e)}function LE(){return ho().platform.now()}function OLe(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",ho().platform.encode(t,e)}function Cee(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",ho().platform.decode(t,e)}var RLe=function(){function t(e,r){this.backendTimer=e,this.logger=r,r==null&&(this.logger=new FLe)}return t.prototype.profileKernel=function(e,r,n){var a,s,o,u=function(){o=n()},l,h=LE();if(this.backendTimer.timerAvailable())l=this.backendTimer.time(u);else{u();try{for(var p=CE(o),v=p.next();!v.done;v=p.next()){var y=v.value;y.dataSync()}}catch(I){a={error:I}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}l=Promise.resolve({kernelMs:LE()-h})}if(ho().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var S=function(I){var N=o[I];N.data().then(function(D){CLe(D,N.dtype,e)})},A=0;A<o.length;A++)S(A);var T={kernelName:e,outputs:o,inputs:r,timeMs:l.then(function(I){return I.kernelMs}),extraInfo:l.then(function(I){return I.getExtraProfileInfo!=null?I.getExtraProfileInfo():""})};return T},t.prototype.logKernelProfile=function(e){var r=this,n=e.kernelName,a=e.outputs,s=e.timeMs,o=e.inputs,u=e.extraInfo;a.forEach(function(l){Promise.all([l.data(),s,u]).then(function(h){r.logger.logKernelProfile(n,l,h[0],h[1],o,h[2])})})},t}();function CLe(t,e,r){if(e!=="float32")return!1;for(var n=0;n<t.length;n++){var a=t[n];if(isNaN(a)||!isFinite(a))return console.warn("Found "+a+" in the result of '"+r+"'"),!0}return!1}var FLe=function(){function t(){}return t.prototype.logKernelProfile=function(e,r,n,a,s,o){var u=typeof a=="number"?DE(a+"ms",9):a.error,l=DE(e,25),h=r.rank,p=r.size,v=DE(r.shape.toString(),14),y="";for(var S in s){var A=s[S];if(A!=null){var T=A.shape||r.shape,I=T.length;y+=S+": "+I+"D "+(I>0?T:"")+" "}}console.log("%c"+l+"	%c"+u+"	%c"+h+"D "+v+"	%c"+p+"	%c"+y+"	%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}();function BLe(t,e,r){for(var n={},a={},s=0;s<e.length;s++)n[e[s].id]=!0;for(var s=0;s<t.length;s++){var o=t[s],u=o.inputs;for(var l in u){for(var h=u[l],p=!1,v=0;v<e.length;v++)if(n[h.id]){o.outputs.forEach(function(C){return n[C.id]=!0}),p=!0,a[o.id]=!0;break}if(p)break}}var y={};y[r.id]=!0;for(var S={},s=t.length-1;s>=0;s--)for(var o=t[s],u=o.inputs,v=0;v<o.outputs.length;v++)if(y[o.outputs[v].id]){for(var l in u)y[u[l].id]=!0,S[o.id]=!0;break}for(var A=[],s=0;s<t.length;s++){var o=t[s];if(a[o.id]&&S[o.id]){var T={};for(var l in o.inputs){var I=o.inputs[l];n[I.id]&&(T[l]=I)}var N=Object.assign({},o);N.inputs=T,N.outputs=o.outputs,A.push(N)}}return A}function LLe(t,e,r,n){for(var a=function(o){var u=e[o],l=[];if(u.outputs.forEach(function(y){var S=t[y.id];S!=null?l.push(S):l.push(null)}),u.gradient==null)throw new Error("Cannot compute gradient: gradient function not found "+("for "+u.kernelName+"."));var h=u.gradient(l),p=function(y){if(!(y in h))throw new Error("Cannot backprop through input "+y+". "+("Available gradients found: "+Object.keys(h)+"."));var S=r(function(){return h[y]()});if(S.dtype!=="float32")throw new Error("Error in gradient for op "+u.kernelName+". The gradient of input "+(y+" must have 'float32' dtype, but has '"+S.dtype+"'"));var A=u.inputs[y];if(!zm(S.shape,A.shape))throw new Error("Error in gradient for op "+u.kernelName+". The gradient of input "+("'"+y+"' has shape '"+S.shape+"', which does not match ")+("the shape of the input '"+A.shape+"'"));if(t[A.id]==null)t[A.id]=S;else{var T=t[A.id];t[A.id]=n(T,S),T.dispose()}};for(var v in u.inputs)p(v)},s=e.length-1;s>=0;s--)a(s)}var Fee=20,u1=3,qI=7;function PLe(t,e,r,n){var a=gD(e),s=qLe(t,e,r,a),o=e.length,u=OE(t,e,r,a,s),l=["Tensor"];return n&&(l.push("  dtype: "+r),l.push("  rank: "+o),l.push("  shape: ["+e+"]"),l.push("  values:")),l.push(u.map(function(h){return"    "+h}).join(`
`)),l.join(`
`)}function qLe(t,e,r,n){var a=Oa(e),s=n[n.length-1],o=new Array(s).fill(0),u=e.length,l=r==="complex64"?h1(t):t;if(u>1)for(var h=0;h<a/s;h++)for(var p=h*s,v=0;v<s;v++)o[v]=Math.max(o[v],c1(l[p+v],0,r).length);return o}function c1(t,e,r){var n;return Array.isArray(t)?n=parseFloat(t[0].toFixed(qI))+" + "+(parseFloat(t[1].toFixed(qI))+"j"):mD(t)?n="'"+t+"'":r==="bool"?n=hte(t):n=parseFloat(t.toFixed(qI)).toString(),DE(n,e)}function hte(t){return t===0?"false":"true"}function OE(t,e,r,n,a,s){s===void 0&&(s=!0);var o=r==="complex64"?2:1,u=e[0],l=e.length;if(l===0){if(r==="complex64"){var h=h1(t);return[c1(h[0],0,r)]}return r==="bool"?[hte(t[0])]:[t[0].toString()]}if(l===1){if(u>Fee){var p=u1*o,v=Array.from(t.slice(0,p)),y=Array.from(t.slice((u-u1)*o,u*o));return r==="complex64"&&(v=h1(v),y=h1(y)),["["+v.map(function(G,j){return c1(G,a[j],r)}).join(", ")+", ..., "+y.map(function(G,j){return c1(G,a[u-u1+j],r)}).join(", ")+"]"]}var S=r==="complex64"?h1(t):Array.from(t);return["["+S.map(function(G,j){return c1(G,a[j],r)}).join(", ")+"]"]}var A=e.slice(1),T=n.slice(1),I=n[0]*o,N=[];if(u>Fee){for(var D=0;D<u1;D++){var C=D*I,L=C+I;N.push.apply(N,$i(OE(t.slice(C,L),A,r,T,a,!1)))}N.push("...");for(var D=u-u1;D<u;D++){var C=D*I,L=C+I;N.push.apply(N,$i(OE(t.slice(C,L),A,r,T,a,D===u-1)))}}else for(var D=0;D<u;D++){var C=D*I,L=C+I;N.push.apply(N,$i(OE(t.slice(C,L),A,r,T,a,D===u-1)))}var z=l===2?",":"";N[0]="["+N[0]+z;for(var D=1;D<N.length-1;D++)N[D]=" "+N[D]+z;for(var $=`,
`,D=2;D<l;D++)$+=`
`;return N[N.length-1]=" "+N[N.length-1]+"]"+(s?"":$),N}function h1(t){for(var e=[],r=0;r<t.length;r+=2)e.push([t[r],t[r+1]]);return e}var tD=function(){function t(e,r,n){var a=this;if(this.dtype=r,this.shape=e.slice(),this.size=Oa(e),n!=null){var s=n.length;ye(s===this.size,function(){return"Length of values '"+s+"' does not match the size "+("inferred by the shape '"+a.size+"'.")})}if(r==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||D7e(r,this.size),this.strides=gD(e)}return t.prototype.set=function(e){for(var r=this,n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];n.length===0&&(n=[0]),ye(n.length===this.rank,function(){return"The number of provided coordinates ("+n.length+") must "+("match the rank ("+r.rank+")")});var s=this.locToIndex(n);this.values[s]=e},t.prototype.get=function(){for(var e,r,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];n.length===0&&(n=[0]);var s=0;try{for(var o=CE(n),u=o.next();!u.done;u=o.next()){var l=u.value;if(l<0||l>=this.shape[s]){var h="Requested out of range element at "+n+". "+("  Buffer shape="+this.shape);throw new Error(h)}s++}}catch(y){e={error:y}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}for(var p=n[n.length-1],v=0;v<n.length-1;++v)p+=this.strides[v]*n[v];return this.values[p]},t.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var r=e[e.length-1],n=0;n<e.length-1;++n)r+=this.strides[n]*e[n];return r},t.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var r=new Array(this.shape.length),n=0;n<r.length-1;++n)r[n]=Math.floor(e/this.strides[n]),e-=r[n]*this.strides[n];return r[r.length-1]=e,r},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return Zo().makeTensor(this.values,this.shape,this.dtype)},t}(),Zo=null,f1=null;function $Le(t){Zo=t}var Ia=function(){function t(e,r,n,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=r||"float32",this.size=Oa(e),this.strides=gD(e),this.dataId=n,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return on(this,void 0,void 0,function(){var e;return en(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return e=r.sent(),[2,f1.buffer(this.shape,this.dtype,e)]}})})},t.prototype.bufferSync=function(){return f1.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return on(this,void 0,void 0,function(){var e;return en(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return e=r.sent(),[2,_ee(this.shape,e,this.dtype==="complex64")]}})})},t.prototype.arraySync=function(){return _ee(this.shape,this.dataSync(),this.dtype==="complex64")},t.prototype.data=function(){return on(this,void 0,void 0,function(){var e,r;return en(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),e=Zo().read(this.dataId),this.dtype!=="string"?[3,2]:[4,e];case 1:r=n.sent();try{return[2,r.map(function(a){return Cee(a)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,e]}})})},t.prototype.dataToGPU=function(e){return this.throwIfDisposed(),Zo().readToGPU(this.dataId,e)},t.prototype.dataSync=function(){this.throwIfDisposed();var e=Zo().readSync(this.dataId);if(this.dtype==="string")try{return e.map(function(r){return Cee(r)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},t.prototype.bytes=function(){return on(this,void 0,void 0,function(){var e;return en(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),[4,Zo().read(this.dataId)];case 1:return e=r.sent(),this.dtype==="string"?[2,e]:[2,new Uint8Array(e.buffer)]}})})},t.prototype.dispose=function(){this.isDisposed||(Zo().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.print=function(e){return e===void 0&&(e=!1),f1.print(this,e)},t.prototype.clone=function(){return this.throwIfDisposed(),f1.clone(this)},t.prototype.toString=function(e){e===void 0&&(e=!1);var r=this.dataSync();return PLe(r,this.shape,this.dtype,e)},t.prototype.cast=function(e){return this.throwIfDisposed(),f1.cast(this,e)},t.prototype.variable=function(e,r,n){return e===void 0&&(e=!0),this.throwIfDisposed(),Zo().makeVariable(this,e,r,n)},t}();Object.defineProperty(Ia,Symbol.hasInstance,{value:function(t){return!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null}});function zLe(){return bD("Tensor",function(){return Ia})}zLe();var rD=function(t){BFe(e,t);function e(r,n,a,s){var o=t.call(this,r.shape,r.dtype,r.dataId,s)||this;return o.trainable=n,o.name=a,o}return e.prototype.assign=function(r){if(r.dtype!==this.dtype)throw new Error("dtype of the new value ("+r.dtype+") and "+("previous value ("+this.dtype+") must match"));if(!zm(r.shape,this.shape))throw new Error("shape of the new value ("+r.shape+") and "+("previous value ("+this.shape+") must match"));Zo().disposeTensor(this),this.dataId=r.dataId,Zo().incRef(this,null)},e.prototype.dispose=function(){Zo().disposeVariable(this),this.isDisposedInternal=!0},e}(Ia);Object.defineProperty(rD,Symbol.hasInstance,{value:function(t){return t instanceof Ia&&t.assign!=null&&t.assign instanceof Function}});var Bee;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(Bee||(Bee={}));var nD;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(nD||(nD={}));var iD;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(iD||(iD={}));var aD;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(aD||(aD={}));var sD;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(sD||(sD={}));var jLe={float32:aD,int32:nD,bool:iD,complex64:sD};function ULe(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error("Can not upcast "+t+" with "+e)}return jLe[t][e]}function Jn(t,e){if(t.dtype===e.dtype)return[t,e];var r=ULe(t.dtype,e.dtype);return[t.cast(r),e.cast(r)]}function VLe(t,e){ye(t.dtype===e.dtype,function(){return"The dtypes of the first("+t.dtype+") and"+(" second("+e.dtype+") input must match")})}function dte(t){var e=[],r=new Set;return pte(t,e,r),e}function pte(t,e,r){if(t!=null){if(t instanceof Ia){e.push(t);return}if(!!WLe(t)){var n=t;for(var a in n){var s=n[a];r.has(s)||(r.add(s),pte(s,e,r))}}}}function WLe(t){return Array.isArray(t)||typeof t=="object"}function $I(t){return t.kernelName!=null}var Lee=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(function(e){return e.name})))}}}return t.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},t}(),xD=function(){function t(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Lee}return t.prototype.ready=function(){return on(this,void 0,void 0,function(){var e,r,n,a;return en(this,function(s){switch(s.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];e=this.getSortedBackends(),r=0,s.label=1;case 1:return r<e.length?(n=e[r],[4,this.initializeBackend(n).success]):[3,5];case 2:return a=s.sent(),a?[4,this.setBackend(n)]:[3,4];case 3:return s.sent(),[2];case 4:return r++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(t.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var e=this.initializeBackendsAndReturnBest(),r=e.name,n=e.asyncInit;if(n)throw new Error("The highest priority backend '"+r+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(r)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(e){if(!(e in this.registry))if(e in this.registryFactory){var r=this.initializeBackend(e).asyncInit;if(r)return null}else return null;return this.registry[e]},t.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},t.prototype.registerBackend=function(e,r,n){return n===void 0&&(n=1),e in this.registryFactory?(o1(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:r,priority:n},!0)},t.prototype.setBackend=function(e){return on(this,void 0,void 0,function(){var r,n,a,s,o;return en(this,function(u){switch(u.label){case 0:if(this.registryFactory[e]==null)throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,this.registry[e]!=null?[3,4]:(this.backendInstance=null,r=this.initializeBackend(e),n=r.success,a=r.asyncInit,a?[4,n]:[3,2]);case 1:return o=u.sent(),[3,3];case 2:o=n,u.label=3;case 3:if(s=o,!s)return[2,!1];u.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new RLe(this.backendInstance),[2,!0]}})})},t.prototype.setupRegisteredKernels=function(){var e=this,r=Tee(this.backendName);r.forEach(function(n){n.setupFunc!=null&&n.setupFunc(e.backendInstance)})},t.prototype.disposeRegisteredKernels=function(e){var r=this,n=Tee(e);n.forEach(function(a){a.disposeFunc!=null&&a.disposeFunc(r.registry[e])})},t.prototype.initializeBackend=function(e){var r=this,n=this.registryFactory[e];if(n==null)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var a=n.factory();if(a&&!(a instanceof T7e)&&typeof a.then=="function"){var s=++this.pendingBackendInitId,o=a.then(function(u){return s<r.pendingBackendInitId?!1:(r.registry[e]=u,r.pendingBackendInit=null,!0)}).catch(function(u){return s<r.pendingBackendInitId||(r.pendingBackendInit=null,o1("Initialization of backend "+e+" failed"),o1(u.stack||u.message)),!1});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}else return this.registry[e]=a,{success:!0,asyncInit:!1}}catch(u){return o1("Initialization of backend "+e+" failed"),o1(u.stack||u.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var e=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(r,n){return e.registryFactory[n].priority-e.registryFactory[r].priority})},t.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),r=0;r<e.length;r++){var n=e[r],a=this.initializeBackend(n),s=a.success,o=a.asyncInit;if(o||s)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(e,r){var n=this.state.tensorInfo.get(r),a=n.backend,s=this.readSync(r),o=a.refCount(r);a.disposeData(r,!0),n.backend=e,e.move(r,s,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(e,r){var n=this,a=null;if(r==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");r=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof r!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}var s;return this.scopedRun(function(){return n.startScope(a)},function(){return n.endScope(s)},function(){return s=r(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s})},t.prototype.scopedRun=function(e,r,n){e();try{var a=n();return r(),a}catch(s){throw r(),s}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(e){var r=Ee.runKernel(ite,{x:e}),n={x:e},a=function(o){return{x:function(){var u="float32",l={x:o},h={dtype:u};return Ee.runKernel(nte,l,h)}}},s=[];return this.addTapeNode(this.state.activeScope.name,n,[r],a,s,{}),r},t.prototype.runKernel=function(e,r,n){this.backendName==null&&this.backend;var a=Aee(e,this.backendName)!=null;if(!a)throw new Error("Kernel '"+e+"' not registered for backend '"+this.backendName+"'");return this.runKernelFunc({kernelName:e,inputs:r,attrs:n})},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(e,r,n){var a=this.backend.numDataIds(),s=0;n.forEach(function(l){s+=l.dtype==="complex64"?3:1});var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],u=a-r-s-o;if(u>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak "+("("+u+" data ids) after running '"+e+"'"))},t.prototype.runKernelFunc=function(e){var r=this,n,a=[],s=this.isTapeOn(),o=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var l;this.backendName==null&&this.backend;var h,p=$I(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if($I(e)){var v=e.kernelName,y=e.inputs,S=e.attrs;this.backendName==null&&this.backend;var A=Aee(v,this.backendName);ye(A!=null,function(){return"Cannot find registered kernel '"+v+"' for backend '"+r.backendName+"'"}),l=function(){var z=r.backend.numDataIds();h=A.kernelFunc({inputs:y,attrs:S,backend:r.backend});var $=Array.isArray(h)?h:[h];r.shouldCheckForMemLeaks()&&r.checkKernelForMemLeak(v,z,$);var G=$.map(function(K){return K.rank!=null?K:r.makeTensorFromTensorInfo(K)});if(s){var j=r.getTensorsForGradient(v,y,G);a=r.saveTensorsForBackwardMode(j)}return G}}else{var T=e.forwardFunc,I=function(z){!s||(a=z.map(function($){return r.keep(r.clone($))}))};l=function(){var z=r.backend.numDataIds();h=r.tidy(function(){return T(r.backend,I)});var $=Array.isArray(h)?h:[h];return r.shouldCheckForMemLeaks()&&r.checkKernelForMemLeak(p,z,$),$}}var N=e.inputs,D=e.attrs,C=$I(e)?null:e.backwardsFunc,L;return this.scopedRun(function(){return r.state.kernelDepth++},function(){return r.state.kernelDepth--},function(){!r.ENV.getBool("DEBUG")&&!r.state.profiling?n=l():(L=r.profiler.profileKernel(p,N,function(){return l()}),r.ENV.getBool("DEBUG")&&r.profiler.logKernelProfile(L),n=L.outputs)}),s&&this.addTapeNode(p,N,n,C,a,D),this.state.profiling&&this.state.activeProfile.kernels.push({name:p,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(N).map(function(z){return N[z]!=null?N[z].shape:null}),outputShapes:n.map(function(z){return z.shape}),kernelTimeMs:L.timeMs,extraInfo:L.extraInfo}),Array.isArray(h)?n:n[0]},t.prototype.saveTensorsForBackwardMode=function(e){var r=this,n=e.map(function(a){return r.keep(r.clone(a))});return n},t.prototype.getTensorsForGradient=function(e,r,n){var a=kee(e);if(a!=null){var s=a.inputsToSave||[],o=a.outputsToSave||[],u=void 0;a.saveAllInputs?(ye(Array.isArray(r),function(){return"saveAllInputs is true, expected inputs to be an array."}),u=Object.keys(r).map(function(h){return r[h]})):u=s.map(function(h){return r[h]});var l=n.filter(function(h,p){return o[p]});return u.concat(l)}return[]},t.prototype.makeTensor=function(e,r,n,a){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",a=a||this.backend;var s=e;n==="string"&&mD(e[0])&&(s=e.map(function(p){return OLe(p)}));var o=a.write(s,r,n),u=new Ia(r,n,o,this.nextTensorId());if(this.trackTensor(u,a),n==="string"){var l=this.state.tensorInfo.get(o),h=C7e(s);this.state.numBytes+=h-l.bytes,l.bytes=h}return u},t.prototype.makeTensorFromDataId=function(e,r,n,a){n=n||"float32";var s={dataId:e,shape:r,dtype:n};return this.makeTensorFromTensorInfo(s,a)},t.prototype.makeTensorFromTensorInfo=function(e,r){var n=e.dataId,a=e.shape,s=e.dtype,o=new Ia(a,s,n,this.nextTensorId());return this.trackTensor(o,r),o},t.prototype.makeVariable=function(e,r,n,a){r===void 0&&(r=!0),n=n||this.nextVariableId().toString(),a!=null&&a!==e.dtype&&(e=e.cast(a));var s=new rD(e,r,n,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error("Variable with name "+s.name+" was already registered");return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s},t.prototype.trackTensor=function(e,r){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;var n=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(n=e.size*bee(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:r||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof rD||this.track(e)},t.prototype.incRef=function(e,r){this.trackTensor(e,r),this.backend.incRef(e.dataId)},t.prototype.removeDataId=function(e,r){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===r&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)},t.prototype.disposeTensor=function(e){if(!!this.state.tensorInfo.has(e.dataId)){var r=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=r.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){var n=e.size*bee(e.dtype);this.state.numBytes-=n}r.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,r.backend)}},t.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var r=this.state.registeredVariables[e];this.disposeVariable(r)}},t.prototype.disposeVariable=function(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]},t.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},t.prototype.profile=function(e){return on(this,void 0,void 0,function(){var r,n,a,s,o,u,l,h,p,v,y;return en(this,function(S){switch(S.label){case 0:return this.state.profiling=!0,r=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],a=this.state.activeProfile,[4,e()];case 1:a.result=S.sent(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,$i(this.state.activeProfile.kernels.map(function(A){return A.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-r,this.state.activeProfile.newTensors=this.state.numTensors-n,S.label=2;case 2:S.trys.push([2,8,9,10]),s=CE(this.state.activeProfile.kernels),o=s.next(),S.label=3;case 3:return o.done?[3,7]:(u=o.value,l=u,[4,u.kernelTimeMs]);case 4:return l.kernelTimeMs=S.sent(),h=u,[4,u.extraInfo];case 5:h.extraInfo=S.sent(),S.label=6;case 6:return o=s.next(),[3,3];case 7:return[3,10];case 8:return p=S.sent(),v={error:p},[3,10];case 9:try{o&&!o.done&&(y=s.return)&&y.call(s)}finally{if(v)throw v.error}return[7];case 10:return[2,this.state.activeProfile]}})})},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},t.prototype.addTapeNode=function(e,r,n,a,s,o){var u=this,l={id:this.state.nextTapeNodeId++,kernelName:e,inputs:r,outputs:n,saved:s},h=kee(e);h!=null&&(a=h.gradFunc),a!=null&&(l.gradient=function(p){return p=p.map(function(v,y){if(v==null){var S=n[y],A=yD(S.size,S.dtype);return u.makeTensor(A,S.shape,S.dtype)}return v}),a(p.length>1?p:p[0],s,o)}),this.state.activeTape.push(l)},t.prototype.keep=function(e){return e.kept=!0,e},t.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(e){var r={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(r.name=e),this.state.scopeStack.push(r),this.state.activeScope=r},t.prototype.endScope=function(e){for(var r=this,n=dte(e),a=new Set(n.map(function(l){return l.id})),s=0;s<this.state.activeScope.track.length;s++){var o=this.state.activeScope.track[s];!o.kept&&!a.has(o.id)&&o.dispose()}var u=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(function(l){!l.kept&&l.scopeId===u.id&&r.track(l)})},t.prototype.gradients=function(e,r,n,a){var s=this;if(a===void 0&&(a=!1),ye(r.length>0,function(){return"gradients() received an empty list of xs."}),n!=null&&n.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var o=this.scopedRun(function(){return s.startTape()},function(){return s.endTape()},function(){return s.tidy("forward",e)});ye(o instanceof Ia,function(){return"The result y returned by f() must be a tensor."});var u=BLe(this.state.activeTape,r,o);if(!a&&u.length===0&&r.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var l={};l[o.id]=n==null?GLe(o.shape):n,LLe(l,u,function(p){return s.tidy(p)},KLe);var h=r.map(function(p){return l[p.id]});return s.state.gradientDepth===0&&(s.state.activeTape.forEach(function(p){var v,y;try{for(var S=CE(p.saved),A=S.next();!A.done;A=S.next()){var T=A.value;T.dispose()}}catch(I){v={error:I}}finally{try{A&&!A.done&&(y=S.return)&&y.call(S)}finally{if(v)throw v.error}}}),s.state.activeTape=null),{value:o,grads:h}})},t.prototype.customGrad=function(e){var r=this;return ye(wee(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];ye(n.every(function(h){return h instanceof Ia}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var s,o={};n.forEach(function(h,p){o[p]=h});var u=function(h,p){return s=e.apply(void 0,$i(n,[p])),ye(s.value instanceof Ia,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),ye(wee(s.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),s.value},l=function(h,p){var v=s.gradFunc(h,p),y=Array.isArray(v)?v:[v];ye(y.length===n.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),ye(y.every(function(A){return A instanceof Ia}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var S={};return y.forEach(function(A,T){S[T]=function(){return A}}),S};return r.runKernelFunc({forwardFunc:u,backwardsFunc:l,inputs:o})}},t.prototype.readSync=function(e){var r=this.state.tensorInfo.get(e);return r.backend.readSync(e)},t.prototype.read=function(e){var r=this.state.tensorInfo.get(e);return r.backend.read(e)},t.prototype.readToGPU=function(e,r){var n=this.state.tensorInfo.get(e);return n.backend.readToGPU(e,r)},t.prototype.time=function(e){return on(this,void 0,void 0,function(){var r,n;return en(this,function(a){switch(a.label){case 0:return r=LE(),[4,this.backend.time(e)];case 1:return n=a.sent(),n.wallMs=LE()-r,[2,n]}})})},t.prototype.track=function(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Lee;for(var e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t}();xD.nextTensorId=0;xD.nextVariableId=0;function GLe(t){var e=Yee(Oa(t),"float32");return Ee.makeTensor(e,t,"float32")}function HLe(){var t=tte();if(t._tfengine==null){var e=new L7e(t);t._tfengine=new xD(e)}return z7e(t._tfengine.ENV),$Le(function(){return t._tfengine}),t._tfengine}var Ee=HLe();function KLe(t,e){var r={a:t,b:e};return Ee.runKernel(rte,r)}function Xl(t,e){var r=t;if(qu(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];for(var n=[];Array.isArray(r)||qu(r)&&e!=="string";)n.push(r.length),r=r[0];return Array.isArray(t)&&ho().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&mte(t,n,[]),n}function mte(t,e,r){if(r=r||[],!Array.isArray(t)&&!qu(t)){ye(e.length===0,function(){return"Element arr["+r.join("][")+"] is a primitive, "+("but should be an array/TypedArray of "+e[0]+" elements")});return}ye(e.length>0,function(){return"Element arr["+r.join("][")+"] should be a primitive, "+("but is an array of "+t.length+" elements")}),ye(t.length===e[0],function(){return"Element arr["+r.join("][")+"] should have "+e[0]+" "+("elements, but has "+t.length+" elements")});for(var n=e.slice(1),a=0;a<t.length;++a)mte(t[a],n,r.concat(a))}function Pee(t,e,r,n){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error("Argument '"+r+"' passed to '"+n+"' must "+("be "+t+" tensor, but got "+e+" tensor"))}}function re(t,e,r,n){if(n===void 0&&(n="numeric"),t instanceof Ia)return Pee(n,t.dtype,e,r),t;var a=vD(t);if(a!=="string"&&["bool","int32","float32"].indexOf(n)>=0&&(a=n),Pee(n,a,e,r),t==null||!qu(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var s=t==null?"null":t.constructor.name;throw new Error("Argument '"+e+"' passed to '"+r+"' must be a "+("Tensor or TensorLike, but got '"+s+"'"))}var o=Xl(t,a);!qu(t)&&!Array.isArray(t)&&(t=[t]);var u=!0,l=a!=="string"?cte(t,a):WE(t,[],u);return Ee.makeTensor(l,o,a)}function PE(t,e,r,n){if(n===void 0&&(n="numeric"),!Array.isArray(t))throw new Error("Argument "+e+" passed to "+r+" must be a `Tensor[]` or `TensorLike[]`");var a=t;return a.map(function(s,o){return re(s,e+"["+o+"]",r,n)})}var vte="__op";function ge(t){var e=Object.keys(t);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+(e.length+" keys."));var r=e[0],n=t[r];r.endsWith("_")&&(r=r.substring(0,r.length-1)),r=r+vte;var a=function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];Ee.startScope(r);try{var u=n.apply(void 0,$i(s));return Qee(u)&&console.error("Cannot return a Promise inside of tidy."),Ee.endScope(u),u}catch(l){throw Ee.endScope(null),l}};return Object.defineProperty(a,"name",{value:r,configurable:!0}),a}function ZLe(t){var e=re(t,"x","abs");if(e.dtype==="complex64"){var r={x:e};return Ee.runKernel(c9e,r)}else{var r={x:e};return Ee.runKernel(U7e,r)}}var lo=ge({abs_:ZLe});function JLe(t){var e=re(t,"x","acos"),r={x:e};return Ee.runKernel(V7e,r)}var YLe=ge({acos_:JLe});function XLe(t){var e=re(t,"x","acosh"),r={x:e};return Ee.runKernel(W7e,r)}var QLe=ge({acosh_:XLe});function ePe(t,e){var r,n=re(t,"a","add"),a=re(e,"b","add");r=gt(Jn(n,a),2),n=r[0],a=r[1];var s={a:n,b:a};return Ee.runKernel(rte,s)}var Mi=ge({add_:ePe});function tPe(t){ye(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),ye(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+(""+t.length)});var e=t.map(function(a,s){return re(a,"tensors"+s,"addN")}),r=e[0];e.forEach(function(a){if(a.dtype!==r.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(a){if(!zm(a.shape,r.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var n=e;return Ee.runKernel(G7e,n)}var rPe=ge({addN_:tPe});function nPe(t,e,r){e===void 0&&(e=null),r===void 0&&(r=!1);var n=re(t,"x","all","bool"),a={x:n},s={axis:e,keepDims:r};return Ee.runKernel(H7e,a,s)}var iPe=ge({all_:nPe});function aPe(t,e,r){e===void 0&&(e=null),r===void 0&&(r=!1);var n=re(t,"x","any","bool"),a={x:n},s={axis:e,keepDims:r};return Ee.runKernel(K7e,a,s)}var sPe=ge({any_:aPe});function oPe(t,e){e===void 0&&(e=0);var r=re(t,"x","argMax"),n={x:r},a={axis:e};return Ee.runKernel(Z7e,n,a)}var uPe=ge({argMax_:oPe});function fPe(t,e){e===void 0&&(e=0);var r=re(t,"x","argMin"),n={x:r},a={axis:e};return Ee.runKernel(J7e,n,a)}var lPe=ge({argMin_:fPe});function cPe(t){var e=re(t,"x","asin"),r={x:e};return Ee.runKernel(Y7e,r)}var hPe=ge({asin_:cPe});function dPe(t){var e=re(t,"x","asinh"),r={x:e};return Ee.runKernel(X7e,r)}var pPe=ge({asinh_:dPe});function mPe(t){var e=re(t,"x","atan"),r={x:e};return Ee.runKernel(Q7e,r)}var vPe=ge({atan_:mPe});function gPe(t,e){var r,n=re(t,"a","atan2"),a=re(e,"b","atan2");r=gt(Jn(n,a),2),n=r[0],a=r[1];var s={a:n,b:a};return Ee.runKernel(t9e,s)}var yPe=ge({atan2_:gPe});function bPe(t){var e=re(t,"x","atanh"),r={x:e};return Ee.runKernel(e9e,r)}var wPe=ge({atanh_:bPe});function _Pe(t,e){var r=re(t,"x","cast");if(!R7e(e))throw new Error("Failed to cast to unknown dtype "+e);if(e==="string"&&r.dtype!=="string"||e!=="string"&&r.dtype==="string")throw new Error("Only strings can be casted to strings");var n={x:r},a={dtype:e};return Ee.runKernel(nte,n,a)}var zi=ge({cast_:_Pe});function xPe(t,e,r,n,a,s,o){o===void 0&&(o="channelsLast");var u=gt(qE(e),2),l=u[0],h=u[1],p;if(o==="channelsLast")p=[l,h,t[3],t[3]];else if(o==="channelsFirst")p=[l,h,t[1],t[1]];else throw new Error("Unknown dataFormat "+o);return SD(t,p,r,n,a,s,!1,o)}function SD(t,e,r,n,a,s,o,u){var l,h;o===void 0&&(o=!1),u===void 0&&(u="channelsLast");var p=gt([-1,-1,-1,-1],4),v=p[0],y=p[1],S=p[2],A=p[3];if(u==="channelsLast")l=gt(t,4),v=l[0],y=l[1],S=l[2],A=l[3];else if(u==="channelsFirst")h=gt(t,4),v=h[0],A=h[1],y=h[2],S=h[3];else throw new Error("Unknown dataFormat "+u);var T=gt(e,4),I=T[0],N=T[1],D=T[3],C=gt(qE(r),2),L=C[0],z=C[1],$=gt(qE(n),2),G=$[0],j=$[1],K=oD(I,G),M=oD(N,j),f=MPe(a,y,S,L,z,K,M,s,u),d=f.padInfo,g=f.outHeight,m=f.outWidth,b=o?D*A:D,E;return u==="channelsFirst"?E=[v,b,g,m]:u==="channelsLast"&&(E=[v,g,m,b]),{batchSize:v,dataFormat:u,inHeight:y,inWidth:S,inChannels:A,outHeight:g,outWidth:m,outChannels:b,padInfo:d,strideHeight:L,strideWidth:z,filterHeight:I,filterWidth:N,effectiveFilterHeight:K,effectiveFilterWidth:M,dilationHeight:G,dilationWidth:j,inShape:t,outShape:E,filterShape:e}}function SPe(t,e,r,n,a){n==null&&(n=EPe(t,e,r));var s=t[0],o=t[1],u=$E((s-e+2*n)/r+1,a),l=$E((o-e+2*n)/r+1,a);return[u,l]}function EPe(t,e,r,n){n===void 0&&(n=1);var a=oD(e,n);return Math.floor((t[0]*(r-1)-r+a)/2)}function qE(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function oD(t,e){return e<=1?t:t+(t-1)*(e-1)}function MPe(t,e,r,n,a,s,o,u,l){var h,p,v;if(typeof t=="number"){var y=t===0?"VALID":"NUMBER";h={top:t,bottom:t,left:t,right:t,type:y};var S=SPe([e,r],s,n,t,u);p=S[0],v=S[1]}else if(t==="same"){p=Math.ceil(e/n),v=Math.ceil(r/a);var A=Math.max(0,(p-1)*n+s-e),T=Math.max(0,(v-1)*a+o-r),I=Math.floor(A/2),N=A-I,D=Math.floor(T/2),C=T-D;h={top:I,bottom:N,left:D,right:C,type:"SAME"}}else if(t==="valid")h={top:0,bottom:0,left:0,right:0,type:"VALID"},p=Math.ceil((e-s+1)/n),v=Math.ceil((r-o+1)/a);else if(typeof t=="object"){var I=l==="channelsLast"?t[1][0]:t[2][0],N=l==="channelsLast"?t[1][1]:t[2][1],D=l==="channelsLast"?t[2][0]:t[3][0],C=l==="channelsLast"?t[2][1]:t[3][1],y=I===0&&N===0&&D===0&&C===0?"VALID":"EXPLICIT";h={top:I,bottom:N,left:D,right:C,type:y},p=$E((e-s+I+N)/n+1,u),v=$E((r-o+D+C)/a+1,u)}else throw Error("Unknown padding parameter: "+t);return{padInfo:h,outHeight:p,outWidth:v}}function $E(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function zE(t){var e=gt(qE(t),3),r=e[0],n=e[1],a=e[2];return r===1&&n===1&&a===1}function Ql(t,e){return zE(t)||zE(e)}function Xo(t,e,r){if(r!=null){if(typeof e=="string")throw Error("Error in "+t+": pad must be an integer when using "+("dimRoundingMode "+r+" but got pad "+e+"."));if(typeof e=="number")ye(m1(e),function(){return"Error in "+t+": pad must be an integer when using "+("dimRoundingMode "+r+" but got pad "+e+".")});else if(typeof e=="object")e.forEach(function(n){n.forEach(function(a){ye(m1(a),function(){return"Error in "+t+": pad must be an integer when using "+("dimRoundingMode "+r+" but got pad "+a+".")})})});else throw Error("Error in "+t+": Unknown padding parameter: "+e)}}function APe(t,e){var r=re(t,"x","reshape","string_or_numeric"),n={x:r},a={shape:e};return Ee.runKernel(LBe,n,a)}var it=ge({reshape_:APe});function kPe(t,e,r,n,a){var s=re(t,"x","avgPool","float32"),o=1;ye(Ql(r,o),function(){return"Error in avgPool: Either strides or dilations must be 1. "+("Got strides "+r+" and dilations '"+o+"'")});var u=s,l=!1;s.rank===3&&(l=!0,u=it(s,[1,s.shape[0],s.shape[1],s.shape[2]])),ye(u.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+u.rank+"."}),Xo("avgPool",n,a);var h={x:u},p={filterSize:e,strides:r,pad:n,dimRoundingMode:a},v=Ee.runKernel(r9e,h,p);return v=zi(v,s.dtype),l?it(v,[v.shape[1],v.shape[2],v.shape[3]]):v}var gte=ge({avgPool_:kPe});function TPe(t,e,r,n,a,s){s===void 0&&(s="NDHWC");var o=re(t,"x","avgPool3d","float32"),u=o,l=!1;o.rank===4&&(l=!0,u=it(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),ye(u.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),ye(s==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+("but got dataFormat of "+s)}),Xo("avgPool3d",n,a);var h={x:u},p={filterSize:e,strides:r,pad:n,dimRoundingMode:a,dataFormat:s},v=Ee.runKernel(n9e,h,p);return v=zi(v,u.dtype),l?it(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}var NPe=ge({avgPool3d_:TPe});function IPe(t){var e=re(t,"x","clone","string_or_numeric"),r={x:e};return Ee.runKernel(ite,r)}var Cm=ge({clone_:IPe});function DPe(t,e){e===void 0&&(e=0),ye(t.length>=1,function(){return"Pass at least one tensor to concat"});var r=PE(t,"tensors","concat","string_or_numeric");if(r[0].dtype==="complex64"&&r.forEach(function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")}),r.length===1)return Cm(r[0]);var n=r,a={axis:e};return Ee.runKernel(h9e,n,a)}var Za=ge({concat_:DPe});function OPe(t,e,r,n){var a;r===void 0&&(r=!1),n===void 0&&(n=!1);var s=re(t,"a","matMul"),o=re(e,"b","matMul");a=gt(Jn(s,o),2),s=a[0],o=a[1];var u={a:s,b:o},l={transposeA:r,transposeB:n};return Ee.runKernel(i9e,u,l)}var Qr=ge({matMul_:OPe});function RPe(t,e){var r,n=re(t,"a","mul"),a=re(e,"b","mul");r=gt(Jn(n,a),2),n=r[0],a=r[1];var s={a:n,b:a};return Ee.runKernel(wBe,s)}var jt=ge({mul_:RPe});function CPe(t){var e=re(t,"x","sigmoid","float32"),r={x:e};return Ee.runKernel(XBe,r)}var Fm=ge({sigmoid_:CPe});function FPe(t,e,r){var n=re(t,"x","slice","string_or_numeric");if(n.rank===0)throw new Error("Slicing scalar is not possible");var a={x:n},s={begin:e,size:r};return Ee.runKernel(KBe,a,s)}var Dn=ge({slice_:FPe});function BPe(t){var e=re(t,"x","tanh","float32"),r={x:e};return Ee.runKernel(gLe,r)}var uD=ge({tanh_:BPe});function LPe(t,e,r,n,a,s){var o=re(t,"forgetBias","basicLSTMCell"),u=re(e,"lstmKernel","basicLSTMCell"),l=re(r,"lstmBias","basicLSTMCell"),h=re(n,"data","basicLSTMCell"),p=re(a,"c","basicLSTMCell"),v=re(s,"h","basicLSTMCell"),y=Za([h,v],1),S=Qr(y,u),A=Mi(S,l),T=A.shape[0],I=A.shape[1]/4,N=[T,I],D=Dn(A,[0,0],N),C=Dn(A,[0,I],N),L=Dn(A,[0,I*2],N),z=Dn(A,[0,I*3],N),$=Mi(jt(Fm(D),uD(C)),jt(p,Fm(Mi(o,L)))),G=jt(uD($),Fm(z));return[$,G]}var PPe=ge({basicLSTMCell_:LPe});function qPe(t,e,r){var n=re(t,"x","batchToSpaceND"),a=e.reduce(function(u,l){return u*l});ye(n.rank>=1+e.length,function(){return"input rank is "+n.rank+" but should be > than blockShape.length "+e.length}),ye(r.length===e.length,function(){return"crops.length is "+r.length+" but should be equal to blockShape.length  "+e.length}),ye(n.shape[0]%a===0,function(){return"input tensor batch is "+n.shape[0]+" but is not divisible by the product of "+("the elements of blockShape "+e.join(" * ")+" === "+a)});var s={x:n},o={blockShape:e,crops:r};return Ee.runKernel(a9e,s,o)}var yte=ge({batchToSpaceND_:qPe});function $Pe(t){var e;return t.rank===0||t.rank===1?e=it(t,[1,1,1,t.size]):t.rank===2?e=it(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=it(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}function zPe(t,e,r,n,a,s){s==null&&(s=.001);var o=re(t,"x","batchNorm"),u=re(e,"mean","batchNorm"),l=re(r,"variance","batchNorm"),h;a!=null&&(h=re(a,"scale","batchNorm"));var p;n!=null&&(p=re(n,"offset","batchNorm")),ye(u.rank===l.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),ye(p==null||u.rank===p.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),ye(h==null||u.rank===h.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."});var v=$Pe(o),y={x:v,scale:h,offset:p,mean:u,variance:l},S={varianceEpsilon:s},A=Ee.runKernel(U9e,y,S);return it(A,o.shape)}var HE=ge({batchNorm_:zPe});function jPe(t,e,r,n,a,s){var o=re(t,"x","batchNorm"),u=re(e,"mean","batchNorm"),l=re(r,"variance","batchNorm"),h;a!=null&&(h=re(a,"scale","batchNorm"));var p;return n!=null&&(p=re(n,"offset","batchNorm")),ye(o.rank===2,function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+(o.rank+".")}),ye(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+("got rank "+u.rank+".")}),ye(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+("but got rank "+l.rank+".")}),h!=null&&ye(h.rank===2||h.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+("but got rank "+h.rank+".")}),p!=null&&ye(p.rank===2||p.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+("but got rank "+p.rank+".")}),HE(o,u,l,p,h,s)}var UPe=ge({batchNorm2d_:jPe});function VPe(t,e,r,n,a,s){var o=re(t,"x","batchNorm"),u=re(e,"mean","batchNorm"),l=re(r,"variance","batchNorm"),h;a!=null&&(h=re(a,"scale","batchNorm"));var p;return n!=null&&(p=re(n,"offset","batchNorm")),ye(o.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+(o.rank+".")}),ye(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+("got rank "+u.rank+".")}),ye(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+("but got rank "+l.rank+".")}),h!=null&&ye(h.rank===3||h.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+("but got rank "+h.rank+".")}),p!=null&&ye(p.rank===3||p.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+("but got rank "+p.rank+".")}),HE(o,u,l,p,h,s)}var WPe=ge({batchNorm3d_:VPe});function GPe(t,e,r,n,a,s){var o=re(t,"x","batchNorm"),u=re(e,"mean","batchNorm"),l=re(r,"variance","batchNorm"),h;a!=null&&(h=re(a,"scale","batchNorm"));var p;return n!=null&&(p=re(n,"offset","batchNorm")),ye(o.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+(o.rank+".")}),ye(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+("got rank "+u.rank+".")}),ye(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+("but got rank "+l.rank+".")}),h!=null&&ye(h.rank===4||h.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+("but got rank "+h.rank+".")}),p!=null&&ye(p.rank===4||p.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+("but got rank "+p.rank+".")}),HE(o,u,l,p,h,s)}var HPe=ge({batchNorm4d_:GPe});function KPe(t,e,r){var n=re(t,"x","bincount"),a=re(e,"weights","bincount");ye(n.dtype==="int32",function(){return"Error in bincount: input "+("dtype must be int32, but got "+n.dtype)}),ye(r>=0,function(){return"size must be non-negative, but got "+r+"."}),ye(a.size===n.size||a.size===0,function(){return"Error in bincount: weights must have the same size as input or"+("0-length, but got input shape: "+n.shape+", weights shape: ")+(a.shape+".")});var s={x:n,weights:a},o={size:r};return Ee.runKernel(s9e,s,o)}var bte=ge({bincount_:KPe});function ZPe(t,e){var r=re(t,"s0","broadcastArgs","int32"),n=re(e,"s1","broadcastArgs","int32");if(r.rank!==1)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+("Has rank "+r.rank));if(n.rank!==1)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+("Has rank "+n.rank));var a={s0:r,s1:n};return Ee.runKernel(o9e,a)}var JPe=ge({broadcastArgs_:ZPe});function YPe(t,e){var r=re(t,"broadcastTo","x"),n=r.shape;if(e.some(function(v){return!(v>0)||v%1!==0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<r.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+r.rank+".");if(e.length>r.rank){for(var a=r.shape.slice();a.length<e.length;)a.unshift(1);r=it(r,a)}for(var s=r.shape,o=Array.from(e),u=e.length-1;u>=0;u--)if(s[u]===e[u])o[u]=1;else if(r.shape[u]!==1)throw new Error("broadcastTo(): ["+n+"] cannot be broadcast to ["+e+"].");var l=o.map(function(v,y){return v>1?y:-1}).filter(function(v){return v>=0});if(l.length===0)return Cm(r);var h={x:r},p={reps:o};return Ee.runKernel(ate,h,p)}var RE=ge({broadcastTo_:YPe});function Yl(t,e,r){return e===void 0&&(e="float32"),e=e||"float32",Xee(t),new tD(t,e,r)}function XPe(t){var e=re(t,"x","ceil","float32"),r={x:e};return Ee.runKernel(u9e,r)}var QPe=ge({ceil_:XPe});function eqe(t,e,r){var n=re(t,"x","clipByValue");ye(e<=r,function(){return"Error in clip: min ("+e+") must be "+("less than or equal to max ("+r+").")});var a={x:n},s={clipValueMin:e,clipValueMax:r};return Ee.runKernel(f9e,a,s)}var tqe=ge({clipByValue_:eqe});function rqe(t,e){var r=re(t,"real","complex"),n=re(e,"imag","complex");go(r.shape,n.shape,"real and imag shapes, "+r.shape+" and "+n.shape+", must match in call to tf.complex().");var a={real:r,imag:n};return Ee.runKernel(l9e,a)}var rd=ge({complex_:rqe});function nqe(t){return Za(t,0)}var iqe=ge({concat1d_:nqe});function aqe(t,e){return Za(t,e)}var sqe=ge({concat2d_:aqe});function oqe(t,e){return Za(t,e)}var uqe=ge({concat3d_:oqe});function fqe(t,e){return Za(t,e)}var lqe=ge({concat4d_:fqe});function cqe(t,e,r,n,a,s,o){a===void 0&&(a="NHWC"),s===void 0&&(s=[1,1]);var u=re(t,"x","conv2d","float32"),l=re(e,"filter","conv2d","float32"),h=u,p=!1;u.rank===3&&(p=!0,h=it(u,[1,u.shape[0],u.shape[1],u.shape[2]])),ye(h.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+h.rank+"."}),ye(l.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+(l.rank+".")}),Xo("conv2d",n,o);var v=a==="NHWC"?h.shape[3]:h.shape[1];ye(v===l.shape[2],function(){return"Error in conv2d: depth of input ("+v+") must match "+("input depth for filter "+l.shape[2]+".")}),ye(Ql(r,s),function(){return"Error in conv2D: Either strides or dilations must be 1. "+("Got strides "+r+" and dilations '"+s+"'")});var y={x:h,filter:l},S={strides:r,pad:n,dataFormat:a,dilations:s,dimRoundingMode:o},A=Ee.runKernel(d9e,y,S);return p?it(A,[A.shape[1],A.shape[2],A.shape[3]]):A}var KE=ge({conv2d_:cqe});function hqe(t,e,r,n,a,s,o){a===void 0&&(a="NWC"),s===void 0&&(s=1);var u=re(t,"x","conv1d"),l=re(e,"filter","conv1d"),h=u,p=!1;u.rank===2&&(p=!0,h=it(u,[1,u.shape[0],u.shape[1]])),ye(h.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+h.rank+"."}),ye(l.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+(l.rank+".")}),Xo("conv1d",n,o),ye(h.shape[2]===l.shape[1],function(){return"Error in conv1d: depth of input ("+h.shape[2]+") must match "+("input depth for filter "+l.shape[1]+".")}),ye(Ql(r,s),function(){return"Error in conv1D: Either stride or dilation must be 1. "+("Got stride "+r+" and dilation '"+s+"'")}),ye(a==="NWC",function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."});var v=it(l,[1,l.shape[0],l.shape[1],l.shape[2]]),y=it(h,[h.shape[0],1,h.shape[1],h.shape[2]]),S=[1,r],A=[1,s],T="NHWC",I=KE(y,v,S,n,T,A,o);return p?it(I,[I.shape[2],I.shape[3]]):it(I,[I.shape[0],I.shape[2],I.shape[3]])}var dqe=ge({conv1d_:hqe});function pqe(t,e,r,n,a,s,o){s===void 0&&(s="NHWC"),ye(t.length===e.rank,function(){return"Length of inShape "+("("+t.length+") and rank of dy ("+e.rank+") must match")});var u=t,l=e,h=!1;e.rank===3&&(h=!0,l=it(e,[1,e.shape[0],e.shape[1],e.shape[2]]),u=[1,t[0],t[1],t[2]]),ye(u.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+(u.length+".")}),ye(l.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+("rank "+l.rank)}),ye(r.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+("rank "+r.rank)});var p=s==="NHWC"?u[3]:u[1],v=s==="NHWC"?l.shape[3]:l.shape[1];ye(p===r.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+p+") must "+("match input depth for filter "+r.shape[2]+".")}),ye(v===r.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+v+") must "+("match output depth for filter "+r.shape[3]+".")}),Xo("conv2dDerInput",a,o);var y={dy:l,filter:r},S={strides:n,pad:a,dataFormat:s,dimRoundingMode:o,inputShape:u},A=Ee.runKernel(m9e,y,S);return h?it(A,[A.shape[1],A.shape[2],A.shape[3]]):A}var wte=ge({conv2DBackpropInput_:pqe});function mqe(t,e,r,n,a,s){var o=re(t,"x","conv2dTranspose"),u=re(e,"filter","conv2dTranspose");return wte(r,o,u,n,a,"NHWC",s)}var vqe=ge({conv2dTranspose_:mqe});function gqe(t,e,r,n,a,s){a===void 0&&(a="NDHWC"),s===void 0&&(s=[1,1,1]);var o=re(t,"x","conv3d"),u=re(e,"filter","conv3d"),l=o,h=!1;o.rank===4&&(h=!0,l=it(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),ye(l.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+l.rank+"."}),ye(u.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+(u.rank+".")}),ye(l.shape[4]===u.shape[3],function(){return"Error in conv3d: depth of input ("+l.shape[4]+") must match "+("input depth for filter "+u.shape[3]+".")}),ye(Ql(r,s),function(){return"Error in conv3D: Either strides or dilations must be 1. "+("Got strides "+r+" and dilations '"+s+"'")}),ye(a==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."});var p={x:l,filter:u},v={strides:r,pad:n,dataFormat:a,dilations:s},y=Ee.runKernel(v9e,p,v);return h?it(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}var yqe=ge({conv3d_:gqe});function bqe(t,e,r,n,a){ye(t.length===e.rank,function(){return"Length of inShape "+("("+t.length+") and rank of dy ("+e.rank+") must match")});var s=t,o=e,u=!1;e.rank===4&&(u=!0,o=it(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);var l=s[4],h=o.shape[4];ye(s.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+(s.length+".")}),ye(o.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+("rank "+o.rank)}),ye(r.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+("rank "+r.rank)}),ye(l===r.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+l+") must "+("match input depth for filter "+r.shape[3]+".")}),ye(h===r.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+h+") must "+("match output depth for filter "+r.shape[4]+".")});var p={dy:o,filter:r},v={pad:a,strides:n,inputShape:s},y=Ee.runKernel(g9e,p,v);return u?it(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}var wqe=ge({conv3DBackpropInput_:bqe});function _qe(t,e,r,n,a){var s=re(t,"x","conv3dTranspose"),o=re(e,"filter","conv3dTranspose");return wqe(r,s,o,n,a)}var xqe=ge({conv3dTranspose_:_qe});function Sqe(t){var e=re(t,"x","cos","float32"),r={x:e};return Ee.runKernel(y9e,r)}var Eqe=ge({cos_:Sqe});function Mqe(t){var e=re(t,"x","cosh","float32"),r={x:e};return Ee.runKernel(b9e,r)}var Aqe=ge({cosh_:Mqe});function kqe(t,e,r,n){e===void 0&&(e=0),r===void 0&&(r=!1),n===void 0&&(n=!1);var a=re(t,"x","cumprod"),s={x:a},o={axis:e,exclusive:r,reverse:n};return Ee.runKernel(w9e,s,o)}var Tqe=ge({cumprod_:kqe});function Nqe(t,e,r,n){e===void 0&&(e=0),r===void 0&&(r=!1),n===void 0&&(n=!1);var a=re(t,"x","cumsum"),s={x:a},o={axis:e,exclusive:r,reverse:n};return Ee.runKernel(_9e,s,o)}var Iqe=ge({cumsum_:Nqe});function Dqe(t,e,r,n){n===void 0&&(n=!1);var a=re(t,"x","denseBincount"),s=re(e,"weights","denseBincount");ye(a.dtype==="int32",function(){return"Error in denseBincount: input "+("dtype must be int32, but got "+a.dtype)}),ye(a.rank<=2,function(){return"Error in denseBincount: input must be at most rank 2, but got "+("rank "+a.rank+".")}),ye(r>=0,function(){return"size must be non-negative, but got "+r+"."}),ye(s.size===a.size||s.size===0,function(){return"Error in denseBincount: weights must have the same shape as x or "+("0-length, but got x shape: "+a.shape+", weights shape: ")+(s.shape+".")});var o={x:a,weights:s},u={size:r,binaryOutput:n};return Ee.runKernel(S9e,o,u)}var Oqe=ge({denseBincount_:Dqe});function Rqe(t,e,r){r===void 0&&(r="NHWC");var n=re(t,"x","depthToSpace","float32"),a=r==="NHWC"?n.shape[1]:n.shape[2],s=r==="NHWC"?n.shape[2]:n.shape[3],o=r==="NHWC"?n.shape[3]:n.shape[1];ye(e>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+e}),ye(a*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
    `+a+" and "+e+`  for depthToSpace with input shape
    `+n.shape}),ye(s*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
    `+s+" and "+e+` for depthToSpace with input shape
        `+n.shape}),ye(o%(e*e)===0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+o+" for depthToSpace with input shape "+n.shape});var u={x:n},l={blockSize:e,dataFormat:r};return Ee.runKernel(E9e,u,l)}var Cqe=ge({depthToSpace_:Rqe});function Fqe(t,e,r,n,a,s,o){a===void 0&&(a="NHWC"),s===void 0&&(s=[1,1]);var u=re(t,"x","depthwiseConv2d","float32"),l=re(e,"filter","depthwiseConv2d","float32"),h=u,p=!1;u.rank===3&&(p=!0,h=it(u,[1,u.shape[0],u.shape[1],u.shape[2]])),ye(h.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+("rank "+h.rank+".")}),ye(l.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+(l.rank+".")});var v=a==="NHWC"?h.shape[3]:h.shape[1];ye(v===l.shape[2],function(){return"Error in depthwiseConv2d: number of input channels "+("("+v+") must match the inChannels dimension in ")+("filter "+l.shape[2]+".")}),Xo("depthwiseConv2d",n,o);var y={x:h,filter:l},S={strides:r,pad:n,dataFormat:a,dilations:s,dimRoundingMode:o},A=Ee.runKernel(M9e,y,S);return p?it(A,[A.shape[1],A.shape[2],A.shape[3]]):A}var ED=ge({depthwiseConv2d_:Fqe});function Bqe(t){var e=re(t,"x","diag"),r={x:e};return Ee.runKernel(T9e,r)}var Lqe=ge({diag_:Bqe});function Pqe(t,e,r,n,a,s){a===void 0&&(a=[1,1]),s===void 0&&(s="NHWC");var o=re(t,"x","dilation2d"),u=re(e,"filter","dilation2d");ye(o.rank===3||o.rank===4,function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+(o.rank+".")}),ye(u.rank===3,function(){return"Error in dilation2d: filter must be rank 3, but got rank "+(u.rank+".")}),ye(s==="NHWC",function(){return"Error in dilation2d: Only NHWC is currently supported, "+("but got dataFormat of "+s)});var l=o,h=!1;o.rank===3&&(l=it(o,[1,o.shape[0],o.shape[1],o.shape[2]]),h=!0);var p={x:l,filter:u},v={strides:r,pad:n,dilations:a},y=Ee.runKernel(N9e,p,v);return h?it(y,[y.shape[1],y.shape[2],y.shape[3]]):y}var qqe=ge({dilation2d_:Pqe});function $qe(t,e){var r,n=re(t,"a","floorDiv"),a=re(e,"b","floorDiv");r=gt(Jn(n,a),2),n=r[0],a=r[1];var s={a:n,b:a};return Ee.runKernel(j9e,s)}var _te=ge({floorDiv_:$qe});function zqe(t,e){var r,n=re(t,"a","div"),a=re(e,"b","div");if(r=gt(Jn(n,a),2),n=r[0],a=r[1],n.dtype==="int32"&&a.dtype==="int32")return _te(n,a);var s={a:n,b:a},o={};return Ee.runKernel(I9e,s,o)}var wa=ge({div_:zqe});function jqe(t,e){for(var r=[],n=0;n<e.length;n++){var a=t[t.length-n-1],s=e.length-n-1,o=e[s];(a==null||a===1&&o>1)&&r.unshift(s)}return r}function Ai(t,e){for(var r=[],n=Math.max(t.length,e.length),a=0;a<n;a++){var s=t[t.length-a-1];s==null&&(s=1);var o=e[e.length-a-1];if(o==null&&(o=1),s===1)r.unshift(o);else if(o===1)r.unshift(s);else if(s!==o){var u="Operands could not be broadcast together with shapes "+(t+" and "+e+".");throw Error(u)}else r.unshift(s)}return r}function Uqe(t,e){var r,n=re(t,"a","equal","string_or_numeric"),a=re(e,"b","equal","string_or_numeric");r=gt(Jn(n,a),2),n=r[0],a=r[1],Ai(n.shape,a.shape);var s={a:n,b:a};return Ee.runKernel(C9e,s)}var xte=ge({equal_:Uqe});function Vqe(t,e,r){var n=re(e,"a","where"),a=re(r,"b","where"),s=re(t,"condition","where","bool"),o=Ai(Ai(s.shape,n.shape),a.shape),u=RE(s,o),l=RE(n,o),h=RE(a,o),p={condition:u,t:l,e:h};return Ee.runKernel(GBe,p)}var Pm=ge({where_:Vqe});function Wqe(t){var e=re(t,"x","zerosLike"),r={x:e};return Ee.runKernel(SLe,r)}var MD=ge({zerosLike_:Wqe});function Gqe(t,e){var r,n=re(t,"a","div"),a=re(e,"b","div");r=gt(Jn(n,a),2),n=r[0],a=r[1];var s=wa(n,a),o=MD(s),u=xte(a,o);return Pm(u,o,s)}var Hqe=ge({divNoNan_:Gqe});function Kqe(t,e){var r=re(t,"t1","dot"),n=re(e,"t2","dot");ye((r.rank===1||r.rank===2)&&(n.rank===1||n.rank===2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+(r.rank+" and "+n.rank+".")});var a=r.rank===1?r.size:r.shape[1],s=n.rank===1?n.size:n.shape[0];if(ye(a===s,function(){return"Error in dot: inner dimensions of inputs must match, but got "+(a+" and "+s+".")}),r.rank===1&&n.rank===1){var o=it(r,[1,-1]),u=it(n,[-1,1]),l=Qr(o,u);return it(l,[])}else if(r.rank===1&&n.rank===2){var o=it(r,[1,-1]),u=it(n,[n.shape[0],n.shape[1]]),l=Qr(o,u);return it(l,[l.size])}else if(r.rank===2&&n.rank===1){var u=it(n,[-1,1]),l=Qr(r,u);return it(l,[l.size])}else{var u=it(n,[n.shape[0],n.shape[1]]),l=Qr(r,u);return l}}var Zqe=ge({dot_:Kqe});function Jqe(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=e.map(function(s,o){return re(s,"tensors"+o,"einsum")}),a={equation:t};return Ee.runKernel(D9e,n,a)}var Yqe=ge({einsum_:Jqe});function Xqe(t){var e=re(t,"x","elu","float32"),r={x:e};return Ee.runKernel(O9e,r)}var Ste=ge({elu_:Xqe});function Qqe(t){var e=re(t,"x","erf");ye(e.dtype==="int32"||e.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),e.dtype==="int32"&&(e=zi(e,"float32"));var r={x:e};return Ee.runKernel(R9e,r)}var e$e=ge({erf_:Qqe});function t$e(t,e,r){for(var n=t.length+e.length,a=[],s=0,o=0,u=0;u<n;u++)r.indexOf(u)===-1?a.push(t[s++]):a.push(e[o++]);return a}function ZE(t,e){var r=e.map(function(n){return 1});return t$e(t,r,e)}function r$e(t,e,r){e===void 0&&(e=null),r===void 0&&(r=!1);var n=re(t,"x","max"),a={x:n},s={reductionIndices:e,keepDims:r};return Ee.runKernel(fBe,a,s)}var Bm=ge({max_:r$e});function n$e(t,e,r){e===void 0&&(e=null),r===void 0&&(r=!1);var n=re(t,"x","min"),a={x:n},s={axis:e,keepDims:r};return Ee.runKernel(mBe,a,s)}var fD=ge({min_:n$e});function i$e(t,e){var r,n=re(t,"base","pow"),a=re(e,"exp","pow");r=gt(Jn(n,a),2),n=r[0],a=r[1];var s={a:n,b:a};return Ee.runKernel(IBe,s)}var AD=ge({pow_:i$e});function ec(t,e,r,n){if(n==null&&(n=vD(t)),n==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!qu(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Xee(e);var a=Oa(e),s=Oa(r);ye(a===s,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+(a+" values but has "+s)});for(var o=0;o<r.length;++o){var u=r[o],l=o===r.length-1?u!==Oa(e.slice(o)):!0;ye(r[o]===e[o]||!l,function(){return"Error creating a new Tensor. Inferred shape "+("("+r+") does not match the provided ")+("shape ("+e+"). ")})}}return!qu(t)&&!Array.isArray(t)&&(t=[t]),e=e||r,t=n!=="string"?cte(t,n):WE(t,[],!0),Ee.makeTensor(t,e,n)}function Pn(t,e){if((qu(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&qu(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");var r=[],n=[];return ec(t,r,n,e)}function a$e(t){var e=re(t,"x","sqrt","float32"),r={x:e};return Ee.runKernel(eLe,r)}var lD=ge({sqrt_:a$e});function s$e(t){var e=re(t,"x","square"),r={};return Ee.runKernel("Square",{x:e},r)}var JE=ge({square_:s$e});function o$e(t,e,r){e===void 0&&(e=null),r===void 0&&(r=!1);var n=re(t,"x","sum");n.dtype==="bool"&&(n=zi(n,"int32"));var a={x:n},s={axis:e,keepDims:r};return Ee.runKernel(tLe,a,s)}var En=ge({sum_:o$e});function u$e(t,e,r,n){e===void 0&&(e="euclidean"),r===void 0&&(r=null),n===void 0&&(n=!1),t=re(t,"x","norm");var a=Ete(t,e,r),s=a.shape;if(n){var o=GE(r,t.shape);s=ZE(a.shape,o)}return it(a,s)}function Ete(t,e,r){if(r===void 0&&(r=null),t.rank===0)return lo(t);if(t.rank!==1&&r===null)return Ete(it(t,[-1]),e,r);if(t.rank===1||typeof r=="number"||Array.isArray(r)&&r.length===1){if(e===1)return En(lo(t),r);if(e===1/0)return Bm(lo(t),r);if(e===-1/0)return fD(lo(t),r);if(e==="euclidean"||e===2)return lD(En(AD(lo(t),Pn(2,"int32")),r));throw new Error("Error in norm: invalid ord value: "+e)}if(Array.isArray(r)&&r.length===2){if(e===1)return Bm(En(lo(t),r[0]),r[1]-1);if(e===1/0)return Bm(En(lo(t),r[1]),r[0]);if(e===-1/0)return fD(En(lo(t),r[1]),r[0]);if(e==="fro"||e==="euclidean")return lD(En(JE(t),r));throw new Error("Error in norm: invalid ord value: "+e)}throw new Error("Error in norm: invalid axis: "+r)}var YE=ge({norm_:u$e});function f$e(t,e,r){return e===void 0&&(e=null),r===void 0&&(r=!1),YE(t,"euclidean",e,r)}var l$e=ge({euclideanNorm_:f$e});function c$e(t){var e=re(t,"x","exp"),r={x:e};return Ee.runKernel(F9e,r)}var nd=ge({exp_:c$e});function h$e(t,e){e===void 0&&(e=0);var r=re(t,"x","expandDims","string_or_numeric");ye(e<=r.rank,function(){return"Axis must be <= rank of the tensor"});var n={input:r},a={dim:e};return Ee.runKernel(B9e,n,a)}var Qh=ge({expandDims_:h$e});function d$e(t){var e=re(t,"x","expm1"),r={x:e};return Ee.runKernel(L9e,r)}var p$e=ge({expm1_:d$e});function m$e(t,e){var r=re(t,"x","tile","string_or_numeric");ye(r.rank===e.length,function(){return"Error in transpose: rank of input "+r.rank+" "+("must match length of reps "+e+".")});var n={x:r},a={reps:e};return Ee.runKernel(ate,n,a)}var d1=ge({tile_:m$e});function v$e(t,e,r,n){n===void 0&&(n="float32"),e==null&&(e=t);for(var a=Yl([t,e],n),s=t<=e?t:e,o=0;o<s;++o)a.set(1,o,o);var u=it(a.toTensor(),[t,e]);if(r==null)return u;if(r.length===1)return d1(Qh(u,0),[r[0],1,1]);if(r.length===2)return d1(Qh(Qh(u,0),0),[r[0],r[1],1,1]);if(r.length===3)return d1(Qh(Qh(Qh(u,0),0),0),[r[0],r[1],r[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+("batchShapes, but received "+r.length+"D."))}var Mte=ge({eye_:v$e});function kD(t,e,r){var n={shape:t,value:e,dtype:r};return Ee.runKernel(q9e,{},n)}function g$e(t){var e=re(t,"x","floor","float32"),r={x:e};return Ee.runKernel(z9e,r)}var Ate=ge({floor_:g$e});function y$e(t,e,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var a=re(t,"x","gather"),s=re(e,"indices","gather","int32"),o={x:a,indices:s},u={axis:r,batchDims:n};return Ee.runKernel(V9e,o,u)}var kte=ge({gather_:y$e});function b$e(t,e){var r,n=re(t,"a","greater","string_or_numeric"),a=re(e,"b","greater","string_or_numeric");r=gt(Jn(n,a),2),n=r[0],a=r[1],Ai(n.shape,a.shape);var s={a:n,b:a};return Ee.runKernel(G9e,s)}var XE=ge({greater_:b$e});function w$e(t,e){var r,n=re(t,"a","greaterEqual","string_or_numeric"),a=re(e,"b","greaterEqual","string_or_numeric");r=gt(Jn(n,a),2),n=r[0],a=r[1],Ai(n.shape,a.shape);var s={a:n,b:a};return Ee.runKernel(H9e,s)}var Tte=ge({greaterEqual_:w$e});function _$e(t){var e=re(t,"input","imag"),r={input:e};return Ee.runKernel(Z9e,r)}var QE=ge({imag_:_$e});function x$e(t){var e=re(t,"x","isFinite"),r={x:e};return Ee.runKernel(J9e,r)}var S$e=ge({isFinite_:x$e});function E$e(t){var e=re(t,"x","isInf"),r={x:e};return Ee.runKernel(Y9e,r)}var M$e=ge({isInf_:E$e});function A$e(t){var e=re(t,"x","isNaN"),r={x:e};return Ee.runKernel(X9e,r)}var k$e=ge({isNaN_:A$e});function T$e(t,e){e===void 0&&(e=.2);var r=re(t,"x","leakyRelu"),n={x:r},a={alpha:e};return Ee.runKernel(Q9e,n,a)}var Nte=ge({leakyRelu_:T$e});function N$e(t,e){var r,n=re(t,"a","less","string_or_numeric"),a=re(e,"b","less","string_or_numeric");r=gt(Jn(n,a),2),n=r[0],a=r[1],Ai(n.shape,a.shape);var s={a:n,b:a};return Ee.runKernel(eBe,s)}var I$e=ge({less_:N$e});function D$e(t,e){var r,n=re(t,"a","lessEqual","string_or_numeric"),a=re(e,"b","lessEqual","string_or_numeric");r=gt(Jn(n,a),2),n=r[0],a=r[1],Ai(n.shape,a.shape);var s={a:n,b:a};return Ee.runKernel(tBe,s)}var TD=ge({lessEqual_:D$e});function O$e(t,e,r){if(r<=0)throw new Error("The number of values should be positive.");var n={start:t,stop:e,num:r};return Ee.runKernel(rBe,{},n)}function R$e(t,e,r,n,a){e===void 0&&(e=5),r===void 0&&(r=1),n===void 0&&(n=1),a===void 0&&(a=.5);var s=re(t,"x","localResponseNormalization");ye(s.rank===4||s.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+s.rank+"."}),ye(m1(e),function(){return"Error in localResponseNormalization: depthRadius must be an "+("integer but got depthRadius "+e+".")});var o=s,u=!1;s.rank===3&&(u=!0,o=it(s,[1,s.shape[0],s.shape[1],s.shape[2]]));var l={x:o},h={depthRadius:e,bias:r,alpha:n,beta:a},p=Ee.runKernel(uBe,l,h);return u?it(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var C$e=ge({localResponseNormalization_:R$e});function F$e(t){var e=re(t,"x","log","float32"),r={x:e};return Ee.runKernel(nBe,r)}var v1=ge({log_:F$e});function B$e(t){var e=re(t,"x","log1p"),r={x:e};return Ee.runKernel(iBe,r)}var Ite=ge({log1p_:B$e});function zf(t){return Ee.customGrad(t)}function L$e(t){var e=re(t,"x","neg"),r={x:e};return Ee.runKernel(_Be,r)}var $f=ge({neg_:L$e});function P$e(t){var e=re(t,"x","softplus"),r={x:e};return Ee.runKernel(QBe,r)}var Dte=ge({softplus_:P$e});function q$e(t){var e=re(t,"x","logSigmoid"),r=zf(function(n){var a=$f(Dte($f(n))),s=function(o){var u=jt(o,Fm($f(n)));return u};return{value:a,gradFunc:s}});return r(e)}var $$e=ge({logSigmoid_:q$e});function z$e(t,e){var r,n=re(t,"a","sub"),a=re(e,"b","sub");r=gt(Jn(n,a),2),n=r[0],a=r[1];var s={a:n,b:a};return Ee.runKernel(mLe,s)}var _r=ge({sub_:z$e});function j$e(t,e){e===void 0&&(e=-1);var r=re(t,"logits","logSoftmax");if(e===-1&&(e=r.rank-1),e!==r.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+("Logits was rank "+r.rank+" and axis was "+e));var n=zf(function(a,s){var o=!0,u=Bm(a,e,!0),l=_r(a,u),h=_r(zi(l,"float32"),v1(En(nd(l),e,o)));s([h]);var p=function(v,y){var S=gt(y,1),A=S[0],T=!0,I=nd(A);return _r(v,jt(En(v,e,T),I))};return{value:h,gradFunc:p}});return n(r)}var U$e=ge({logSoftmax_:j$e});function V$e(t,e,r){e===void 0&&(e=null),r===void 0&&(r=!1);var n=re(t,"x","logSumExp"),a=GE(e,n.shape),s=Bm(n,a,!0),o=_r(n,s),u=nd(o),l=En(u,a),h=v1(l),p=Mi(it(s,h.shape),h);if(r){var v=ZE(p.shape,a);return it(p,v)}return p}var Ote=ge({logSumExp_:V$e});function W$e(t,e){var r=re(t,"a","logicalAnd","bool"),n=re(e,"b","logicalAnd","bool");Ai(r.shape,n.shape);var a={a:r,b:n};return Ee.runKernel(aBe,a)}var jE=ge({logicalAnd_:W$e});function G$e(t){var e=re(t,"x","logicalNot","bool"),r={x:e};return Ee.runKernel(sBe,r)}var Rte=ge({logicalNot_:G$e});function H$e(t,e){var r=re(t,"a","logicalOr","bool"),n=re(e,"b","logicalOr","bool");Ai(r.shape,n.shape);var a={a:r,b:n};return Ee.runKernel(oBe,a)}var Cte=ge({logicalOr_:H$e});function K$e(t,e){var r=re(t,"a","logicalXor","bool"),n=re(e,"b","logicalXor","bool");return Ai(r.shape,n.shape),jE(Cte(t,e),Rte(jE(t,e)))}var Z$e=ge({logicalXor_:K$e});var NE=2147483648;function J$e(t,e,r){r===void 0&&(r="left");var n=re(t,"sortedSequence","searchSorted"),a=re(e,"values","searchSorted"),s=n.shape[n.shape.length-1],o=a.shape[a.shape.length-1],u=it(n,[-1,s]),l=it(a,[-1,o]);if(u.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(u.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Oa(l.shape)>=NE)throw new Error("values tensor size must less than "+NE);if(u.shape[1]>=NE)throw new Error("trailing dim_size must less than "+NE+" for int32 output type, was "+u.shape[1]);var h={sortedSequence:u,values:l},p={side:r};return Ee.runKernel(WBe,h,p)}var ND=ge({searchSorted_:J$e});function Y$e(t,e){return ND(t,e,"left")}function X$e(t,e,r,n,a){var s=re(t,"x","maxPool"),o=1,u=s,l=!1;s.rank===3&&(l=!0,u=it(s,[1,s.shape[0],s.shape[1],s.shape[2]])),ye(u.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+u.rank+"."}),ye(Ql(r,o),function(){return"Error in maxPool: Either strides or dilations must be 1. "+("Got strides "+r+" and dilations '"+o+"'")}),Xo("maxPool",n,a);var h={x:u},p={filterSize:e,strides:r,pad:n,dimRoundingMode:a},v=Ee.runKernel(cBe,h,p);return l?it(v,[v.shape[1],v.shape[2],v.shape[3]]):v}var Fte=ge({maxPool_:X$e});function Q$e(t,e,r,n,a,s){e===void 0&&(e=[1,1,1]),s===void 0&&(s="NDHWC");var o=re(t,"x","maxPool3d"),u=o,l=!1;o.rank===4&&(l=!0,u=it(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),ye(u.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),ye(s==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+("but got dataFormat of "+s)}),Xo("maxPool3d",n,a);var h={x:u},p={filterSize:e,strides:r,pad:n,dimRoundingMode:a,dataFormat:s},v=Ee.runKernel(hBe,h,p);return l?it(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}var eze=ge({maxPool3d_:Q$e});function tze(t,e,r,n,a){a===void 0&&(a=!1);var s=re(t,"x","maxPoolWithArgmax"),o={x:s},u={filterSize:e,strides:r,pad:n,includeBatchInIndex:a},l=Ee.runKernel(dBe,o,u);return{result:l[0],indexes:l[1]}}var rze=ge({maxPoolWithArgmax_:tze});function nze(t,e){var r,n=re(t,"a","maximum"),a=re(e,"b","maximum");r=gt(Jn(n,a),2),n=r[0],a=r[1],n.dtype==="bool"&&(n=zi(n,"int32"),a=zi(a,"int32")),Ai(n.shape,a.shape);var s={a:n,b:a};return Ee.runKernel(lBe,s)}var ize=ge({maximum_:nze});function aze(t,e,r){e===void 0&&(e=null),r===void 0&&(r=!1);var n=re(t,"x","mean"),a={x:n},s={axis:e,keepDims:r};return Ee.runKernel(pBe,a,s)}var UE=ge({mean_:aze});function qm(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var r=qm(t,"float32"),n=qm(t,"float32");return rd(r,n)}var a=yD(Oa(t),e);return Ee.makeTensor(a,t,e)}function td(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var r=td(t,"float32"),n=qm(t,"float32");return rd(r,n)}var a=Yee(Oa(t),e);return Ee.makeTensor(a,t,e)}function sze(t,e,r){var n=(r===void 0?{}:r).indexing,a=n===void 0?"xy":n;if(a!=="xy"&&a!=="ij")throw new TypeError(a+" is not a valid third argument to meshgrid");if(t===void 0)return[];var s=re(t,"x","meshgrid",t instanceof Ia?t.dtype:"float32");if(e===void 0)return[s];var o=re(e,"y","meshgrid",e instanceof Ia?e.dtype:"float32"),u=Oa(s.shape),l=Oa(o.shape);return a==="xy"?(s=it(s,[1,-1]),o=it(o,[-1,1]),[Qr(td([l,1],s.dtype),s),Qr(o,td([1,u],o.dtype))]):(s=it(s,[-1,1]),o=it(o,[1,-1]),[Qr(s,td([1,l],s.dtype)),Qr(td([u,1],o.dtype),o)])}function oze(t,e){var r,n=re(t,"a","minimum"),a=re(e,"b","minimum");r=gt(Jn(n,a),2),n=r[0],a=r[1],n.dtype==="bool"&&(n=zi(n,"int32"),a=zi(a,"int32")),Ai(n.shape,a.shape);var s={a:n,b:a};return Ee.runKernel(vBe,s)}var Bte=ge({minimum_:oze});function uze(t,e,r){ye(r==="reflect"||r==="symmetric",function(){return"Invalid mode. Mode must be either reflect or symmetric. "+("Got "+r+".")});var n=re(t,"x","mirrorPad");if(n.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");ye(e.length===n.rank,function(){return"Padding doesn't match input. Must be "+n.rank+". "+("Got "+e.length+".")});for(var a=r==="reflect"?1:0,s=function(h){ye(e[h].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ye(e[h][0]>=0&&e[h][0]<=n.shape[h]-a&&e[h][1]>=0&&e[h][1]<=n.shape[h]-a,function(){return"Padding in dimension "+h+" cannot be greater than or equal "+("to "+(n.shape[h]-a)+" or less than 0 for input of ")+("shape "+n.shape)})},o=0;o<n.rank;o++)s(o);var u={paddings:e,mode:r},l={x:n};return Ee.runKernel(gBe,l,u)}var fze=ge({mirrorPad_:uze});function lze(t,e){var r,n=re(t,"a","mod"),a=re(e,"b","mod");r=gt(Jn(n,a),2),n=r[0],a=r[1];var s={a:n,b:a};return Ee.runKernel(yBe,s)}var cze=ge({mod_:lze});function hze(t,e,r){e===void 0&&(e=null),r===void 0&&(r=!1),t=re(t,"x","moments");var n=GE(e,t.shape),a=UE(t,n,r),s=a.shape;r||(s=ZE(a.shape,n));var o=JE(_r(zi(t,"float32"),it(a,s))),u=UE(o,n,r);return{mean:a,variance:u}}var dze=ge({moments_:hze});function pze(t,e,r,n){for(var a=re(e,"data","multiRNNCell"),s=PE(r,"c","multiRNNCell"),o=PE(n,"h","multiRNNCell"),u=a,l=[],h=0;h<t.length;h++){var p=t[h](u,s[h],o[h]);l.push(p[0]),l.push(p[1]),u=p[1]}for(var v=[],y=[],h=0;h<l.length;h+=2)v.push(l[h]),y.push(l[h+1]);return[v,y]}var mze=ge({multiRNNCell_:pze});function vze(t,e,r,n){n===void 0&&(n=!1);var a=re(t,"logits","multinomial"),s=a.size,o=a.rank;if(s<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+(s+"."));if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);r=r||Math.random();var u=o===1?it(a,[1,-1]):a,l={logits:u},h={numSamples:e,seed:r,normalized:n},p=Ee.runKernel(bBe,l,h);return o===1?it(p,[p.size]):p}var gze=ge({multinomial_:vze});function yze(t,e){var r,n=re(t,"a","notEqual","string_or_numeric"),a=re(e,"b","notEqual","string_or_numeric");r=gt(Jn(n,a),2),n=r[0],a=r[1],Ai(n.shape,a.shape);var s={a:n,b:a};return Ee.runKernel(xBe,s)}var Lte=ge({notEqual_:yze});function bze(t,e,r,n){if(r===void 0&&(r=1),n===void 0&&(n=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var a=re(t,"indices","oneHot","int32"),s={indices:a},o={depth:e,onValue:r,offValue:n};return Ee.runKernel(kBe,s,o)}var wze=ge({oneHot_:bze});function _ze(t){var e=re(t,"x","onesLike"),r={x:e};return Ee.runKernel(ABe,r)}var xze=ge({onesLike_:_ze});function Sze(t,e){var r=re(t,"v1","outerProduct"),n=re(e,"v2","outerProduct");ye(r.rank===1&&n.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+(r.rank+" and "+n.rank+".")});var a=it(r,[-1,1]),s=it(n,[1,-1]);return Qr(a,s)}var Eze=ge({outerProduct_:Sze});function Mze(t,e,r){r===void 0&&(r=0);var n=re(t,"x","pad");if(n.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:e,constantValue:r},s={x:n};return Ee.runKernel(NBe,s,a)}var _1=ge({pad_:Mze});function Aze(t,e,r){return r===void 0&&(r=0),ye(e.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),_1(t,[e],r)}var kze=ge({pad1d_:Aze});function Tze(t,e,r){return r===void 0&&(r=0),ye(e.length===2&&e[0].length===2&&e[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),_1(t,e,r)}var Nze=ge({pad2d_:Tze});function Ize(t,e,r){return r===void 0&&(r=0),ye(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),_1(t,e,r)}var Dze=ge({pad3d_:Ize});function Oze(t,e,r){return r===void 0&&(r=0),ye(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),_1(t,e,r)}var Rze=ge({pad4d_:Oze});function Cze(t,e,r){var n=re(t,"x","spaceToBatchND");ye(n.rank>=1+e.length,function(){return"input rank "+n.rank+" should be > than [blockShape] "+e.length}),ye(r.length===e.length,function(){return"paddings.shape[0] "+r.length+" must be equal to [blockShape] "+e.length}),ye(n.shape.reduce(function(o,u,l){return l>0&&l<=e.length?o&&(u+r[l-1][0]+r[l-1][1])%e[l-1]===0:o},!0),function(){return"input spatial dimensions "+n.shape.slice(1)+" with paddings "+r.toString()+" must be divisible by blockShapes "+e.toString()});var a={x:n},s={blockShape:e,paddings:r};return Ee.runKernel(rLe,a,s)}var Pte=ge({spaceToBatchND_:Cze});function Fze(t,e,r,n,a,s,o){a==null&&(a=[1,1]),s==null&&(s=1),n===0&&(n="valid");var u=re(t,"x","maxPool"),l=u,h=!1;u.rank===3&&(h=!0,l=it(u,[1,u.shape[0],u.shape[1],u.shape[2]])),ye(Ql(s,a),function(){return"Error in pool: Either strides or dilations must be 1. "+("Got strides "+s+" and dilations '"+a+"'")});var p=xPe(l.shape,e,s,a,n),v=[p.dilationHeight,p.dilationWidth],y;n==="same"?y=Lze([p.filterHeight,p.filterWidth],v):y=[[0,0],[0,0]];var S=v[0]===1&&v[1]===1,A=gt(Bze([p.inHeight,p.inWidth],v,y),2),T=A[0],I=A[1],N=S?n:"valid",D=S?l:Pte(l,v,T),C=r==="avg"?function(){return gte(D,e,s,N,o)}:function(){return Fte(D,e,s,N,o)},L=C(),z=S?L:yte(L,v,I);return h?it(z,[z.shape[1],z.shape[2],z.shape[3]]):z}function Bze(t,e,r){var n=r.map(function(p){return p[0]}),a=r.map(function(p){return p[1]}),s=t.concat(n,a),o=e.map(function(p,v){return(p-s[v]%p)%p}),u=a.map(function(p,v){return p+o[v]}),l=e.map(function(p,v){return[n[v],u[v]]}),h=e.map(function(p,v){return[0,o[v]]});return[l,h]}function Lze(t,e){var r=t.map(function(o,u){return o+(o-1)*(e[u]-1)}),n=r.map(function(o){return o-1}),a=n.map(function(o){return Math.floor(o/2)}),s=n.map(function(o,u){return o-a[u]});return n.map(function(o,u){return[a[u],s[u]]})}var Pze=ge({pool_:Fze});function qze(t,e){var r=re(t,"x","prelu"),n=re(e,"alpha","prelu"),a={x:r,alpha:n};return Ee.runKernel(DBe,a)}var qte=ge({prelu_:qze});function $ze(t,e){e===void 0&&(e=!1),console.log(t.toString(e))}function zze(t,e,r){e===void 0&&(e=null),r===void 0&&(r=!1);var n=re(t,"x","prod");n.dtype==="bool"&&(n=zi(n,"int32"));var a={x:n},s={axis:e,keepDims:r};return Ee.runKernel(OBe,a,s)}var jze=ge({prod_:zze});function Uze(t,e,r){var n=Oa(t),a=null;if(r==null||r==="float32")a=new Float32Array(n);else if(r==="int32")a=new Int32Array(n);else if(r==="bool")a=new Uint8Array(n);else throw new Error("Unknown data type "+r);for(var s=0;s<n;s++)a[s]=e();return Ee.makeTensor(a,t,r)}var Vze=ge({rand_:Uze}),sd=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Wze(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}),e}function od(t){var e={exports:{}};return t(e,e.exports),e.exports}var Gze=od(function(t){(function(e,r,n){function a(l){var h=this,p=u();h.next=function(){var v=2091639*h.s0+h.c*23283064365386963e-26;return h.s0=h.s1,h.s1=h.s2,h.s2=v-(h.c=v|0)},h.c=1,h.s0=p(" "),h.s1=p(" "),h.s2=p(" "),h.s0-=p(l),h.s0<0&&(h.s0+=1),h.s1-=p(l),h.s1<0&&(h.s1+=1),h.s2-=p(l),h.s2<0&&(h.s2+=1),p=null}function s(l,h){return h.c=l.c,h.s0=l.s0,h.s1=l.s1,h.s2=l.s2,h}function o(l,h){var p=new a(l),v=h&&h.state,y=p.next;return y.int32=function(){return p.next()*4294967296|0},y.double=function(){return y()+(y()*2097152|0)*11102230246251565e-32},y.quick=y,v&&(typeof v=="object"&&s(v,p),y.state=function(){return s(p,{})}),y}function u(){var l=4022871197,h=function(p){p=String(p);for(var v=0;v<p.length;v++){l+=p.charCodeAt(v);var y=.02519603282416938*l;l=y>>>0,y-=l,y*=l,l=y>>>0,y-=l,l+=y*4294967296}return(l>>>0)*23283064365386963e-26};return h}r&&r.exports?r.exports=o:n&&n.amd?n(function(){return o}):this.alea=o})(sd,t,!1)}),Hze=od(function(t){(function(e,r,n){function a(u){var l=this,h="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var v=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^v^v>>>8},u===(u|0)?l.x=u:h+=u;for(var p=0;p<h.length+64;p++)l.x^=h.charCodeAt(p)|0,l.next()}function s(u,l){return l.x=u.x,l.y=u.y,l.z=u.z,l.w=u.w,l}function o(u,l){var h=new a(u),p=l&&l.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var y=h.next()>>>11,S=(h.next()>>>0)/4294967296,A=(y+S)/(1<<21);while(A===0);return A},v.int32=h.next,v.quick=v,p&&(typeof p=="object"&&s(p,h),v.state=function(){return s(h,{})}),v}r&&r.exports?r.exports=o:n&&n.amd?n(function(){return o}):this.xor128=o})(sd,t,!1)}),Kze=od(function(t){(function(e,r,n){function a(u){var l=this,h="";l.next=function(){var v=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(v^v<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,u===(u|0)?l.x=u:h+=u;for(var p=0;p<h.length+64;p++)l.x^=h.charCodeAt(p)|0,p==h.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(u,l){return l.x=u.x,l.y=u.y,l.z=u.z,l.w=u.w,l.v=u.v,l.d=u.d,l}function o(u,l){var h=new a(u),p=l&&l.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var y=h.next()>>>11,S=(h.next()>>>0)/4294967296,A=(y+S)/(1<<21);while(A===0);return A},v.int32=h.next,v.quick=v,p&&(typeof p=="object"&&s(p,h),v.state=function(){return s(h,{})}),v}r&&r.exports?r.exports=o:n&&n.amd?n(function(){return o}):this.xorwow=o})(sd,t,!1)}),Zze=od(function(t){(function(e,r,n){function a(u){var l=this;l.next=function(){var p=l.x,v=l.i,y,S;return y=p[v],y^=y>>>7,S=y^y<<24,y=p[v+1&7],S^=y^y>>>10,y=p[v+3&7],S^=y^y>>>3,y=p[v+4&7],S^=y^y<<7,y=p[v+7&7],y=y^y<<13,S^=y^y<<9,p[v]=S,l.i=v+1&7,S};function h(p,v){var y,S=[];if(v===(v|0))S[0]=v;else for(v=""+v,y=0;y<v.length;++y)S[y&7]=S[y&7]<<15^v.charCodeAt(y)+S[y+1&7]<<13;for(;S.length<8;)S.push(0);for(y=0;y<8&&S[y]===0;++y);for(y==8&&(S[7]=-1),p.x=S,p.i=0,y=256;y>0;--y)p.next()}h(l,u)}function s(u,l){return l.x=u.x.slice(),l.i=u.i,l}function o(u,l){u==null&&(u=+new Date);var h=new a(u),p=l&&l.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var y=h.next()>>>11,S=(h.next()>>>0)/4294967296,A=(y+S)/(1<<21);while(A===0);return A},v.int32=h.next,v.quick=v,p&&(p.x&&s(p,h),v.state=function(){return s(h,{})}),v}r&&r.exports?r.exports=o:n&&n.amd?n(function(){return o}):this.xorshift7=o})(sd,t,!1)}),Jze=od(function(t){(function(e,r,n){function a(u){var l=this;l.next=function(){var p=l.w,v=l.X,y=l.i,S,A;return l.w=p=p+1640531527|0,A=v[y+34&127],S=v[y=y+1&127],A^=A<<13,S^=S<<17,A^=A>>>15,S^=S>>>12,A=v[y]=A^S,l.i=y,A+(p^p>>>16)|0};function h(p,v){var y,S,A,T,I,N=[],D=128;for(v===(v|0)?(S=v,v=null):(v=v+"\0",S=0,D=Math.max(D,v.length)),A=0,T=-32;T<D;++T)v&&(S^=v.charCodeAt((T+32)%v.length)),T===0&&(I=S),S^=S<<10,S^=S>>>15,S^=S<<4,S^=S>>>13,T>=0&&(I=I+1640531527|0,y=N[T&127]^=S+I,A=y==0?A+1:0);for(A>=128&&(N[(v&&v.length||0)&127]=-1),A=127,T=4*128;T>0;--T)S=N[A+34&127],y=N[A=A+1&127],S^=S<<13,y^=y<<17,S^=S>>>15,y^=y>>>12,N[A]=S^y;p.w=I,p.X=N,p.i=A}h(l,u)}function s(u,l){return l.i=u.i,l.w=u.w,l.X=u.X.slice(),l}function o(u,l){u==null&&(u=+new Date);var h=new a(u),p=l&&l.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var y=h.next()>>>11,S=(h.next()>>>0)/4294967296,A=(y+S)/(1<<21);while(A===0);return A},v.int32=h.next,v.quick=v,p&&(p.X&&s(p,h),v.state=function(){return s(h,{})}),v}r&&r.exports?r.exports=o:n&&n.amd?n(function(){return o}):this.xor4096=o})(sd,t,!1)}),Yze=od(function(t){(function(e,r,n){function a(u){var l=this,h="";l.next=function(){var v=l.b,y=l.c,S=l.d,A=l.a;return v=v<<25^v>>>7^y,y=y-S|0,S=S<<24^S>>>8^A,A=A-v|0,l.b=v=v<<20^v>>>12^y,l.c=y=y-S|0,l.d=S<<16^y>>>16^A,l.a=A-v|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,u===Math.floor(u)?(l.a=u/4294967296|0,l.b=u|0):h+=u;for(var p=0;p<h.length+20;p++)l.b^=h.charCodeAt(p)|0,l.next()}function s(u,l){return l.a=u.a,l.b=u.b,l.c=u.c,l.d=u.d,l}function o(u,l){var h=new a(u),p=l&&l.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var y=h.next()>>>11,S=(h.next()>>>0)/4294967296,A=(y+S)/(1<<21);while(A===0);return A},v.int32=h.next,v.quick=v,p&&(typeof p=="object"&&s(p,h),v.state=function(){return s(h,{})}),v}r&&r.exports?r.exports=o:n&&n.amd?n(function(){return o}):this.tychei=o})(sd,t,!1)}),Xze={},Qze={__proto__:null,default:Xze},eje=Wze(Qze),ud=od(function(t){(function(e,r,n){var a=256,s=6,o=52,u="random",l=n.pow(a,s),h=n.pow(2,o),p=h*2,v=a-1,y;function S(L,z,$){var G=[];z=z==!0?{entropy:!0}:z||{};var j=N(I(z.entropy?[L,C(r)]:L==null?D():L,3),G),K=new A(G),M=function(){for(var f=K.g(s),d=l,g=0;f<h;)f=(f+g)*a,d*=a,g=K.g(1);for(;f>=p;)f/=2,d/=2,g>>>=1;return(f+g)/d};return M.int32=function(){return K.g(4)|0},M.quick=function(){return K.g(4)/4294967296},M.double=M,N(C(K.S),r),(z.pass||$||function(f,d,g,m){return m&&(m.S&&T(m,K),f.state=function(){return T(K,{})}),g?(n[u]=f,d):f})(M,j,"global"in z?z.global:this==n,z.state)}function A(L){var z,$=L.length,G=this,j=0,K=G.i=G.j=0,M=G.S=[];for($||(L=[$++]);j<a;)M[j]=j++;for(j=0;j<a;j++)M[j]=M[K=v&K+L[j%$]+(z=M[j])],M[K]=z;(G.g=function(f){for(var d,g=0,m=G.i,b=G.j,E=G.S;f--;)d=E[m=v&m+1],g=g*a+E[v&(E[m]=E[b=v&b+d])+(E[b]=d)];return G.i=m,G.j=b,g})(a)}function T(L,z){return z.i=L.i,z.j=L.j,z.S=L.S.slice(),z}function I(L,z){var $=[],G=typeof L,j;if(z&&G=="object")for(j in L)try{$.push(I(L[j],z-1))}catch{}return $.length?$:G=="string"?L:L+"\0"}function N(L,z){for(var $=L+"",G,j=0;j<$.length;)z[v&j]=v&(G^=z[v&j]*19)+$.charCodeAt(j++);return C(z)}function D(){try{var L;return y&&(L=y.randomBytes)?L=L(a):(L=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(L)),C(L)}catch{var z=e.navigator,$=z&&z.plugins;return[+new Date,e,$,e.screen,C(r)]}}function C(L){return String.fromCharCode.apply(0,L)}if(N(n.random(),r),t.exports){t.exports=S;try{y=eje}catch{}}else n["seed"+u]=S})(typeof self!="undefined"?self:sd,[],Math)});ud.alea=Gze;ud.xor128=Hze;ud.xorwow=Kze;ud.xorshift7=Zze;ud.xor4096=Jze;ud.tychei=Yze;var ID=ud;var DD=function(){function t(e,r,n,a,s){this.mean=e,this.stdDev=r,this.dtype=n,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);var o=s||Math.random();this.random=ID.alea(o.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var r,n,a=!1;!a;){var s=void 0,o=void 0,u=void 0;do s=2*this.random()-1,o=2*this.random()-1,u=s*s+o*o;while(u>=1||u===0);var l=Math.sqrt(-2*Math.log(u)/u);r=this.mean+this.stdDev*s*l,n=this.mean+this.stdDev*o*l,(!this.truncated||this.isValidTruncated(r))&&(a=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(r)},t.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},t.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},t}(),tje=function(){function t(e,r,n,a){this.alpha=e,this.beta=1/r,this.dtype=n;var s=a||Math.random();this.randu=ID.alea(s.toString()),this.randn=new DD(0,1,n,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var e,r,n,a,s,o;;){do a=this.randn.nextValue(),o=1+this.c*a;while(o<=0);if(o*=o*o,e=a*a,r=1-.331*e*e,n=.5*e+this.d*(1-o+Math.log(o)),s=this.randu(),s<r||Math.log(s)<n)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},t.prototype.convertValue=function(e){return this.dtype==="float32"?e:Math.round(e)},t}(),rje=function(){function t(e,r,n,a){var s=this;if(e===void 0&&(e=0),r===void 0&&(r=1),this.canReturnFloat=function(){return s.dtype==null||s.dtype==="float32"},this.min=e,this.range=r-e,this.dtype=n,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+r+" <= 1 and dtype is not float");this.random=ID.alea(a)}return t.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}();function nje(t,e,r,n,a){if(r===void 0&&(r=1),n===void 0&&(n="float32"),r==null&&(r=1),n==null&&(n="float32"),n!=="float32"&&n!=="int32")throw new Error("Unsupported data type "+n);for(var s=new tje(e,r,n,a),o=Yl(t,n),u=0;u<o.values.length;u++)o.values[u]=s.nextValue();return o.toTensor()}var ije=ge({randomGamma_:nje});function aje(t,e,r,n,a){if(e===void 0&&(e=0),r===void 0&&(r=1),n!=null&&n==="bool")throw new Error("Unsupported data type "+n);for(var s=new DD(e,r,n,!1,a),o=Yl(t,n),u=0;u<o.values.length;u++)o.values[u]=s.nextValue();return o.toTensor()}var $te=ge({randomNormal_:aje});function sje(t,e,r){if(e!=null&&e==="bool")throw new Error("Unsupported data type "+e);return $te(t,0,1,e,r)}var oje=ge({randomStandardNormal_:sje});function uje(t,e,r,n,a){e===void 0&&(e=0),r===void 0&&(r=1),n===void 0&&(n="float32");for(var s=Yl(t,n),o=new rje(e,r,null,a),u=0;u<s.values.length;u++)s.values[u]=o.nextValue();return s.toTensor()}var zte=ge({randomUniform_:uje});function g1(t,e,r,n){if(r===void 0&&(r=1),n===void 0&&(n="float32"),r===0)throw new Error("Cannot have a step of zero");var a={start:t,stop:e,step:r,dtype:n};return Ee.runKernel(RBe,{},a)}function fje(t){var e=re(t,"input","real"),r={input:e};return Ee.runKernel(CBe,r)}var y1=ge({real_:fje});function lje(t){var e=re(t,"x","reciprocal"),r={x:e};return Ee.runKernel(FBe,r)}var cje=ge({reciprocal_:lje});function hje(t){var e=re(t,"x","relu"),r={x:e};return Ee.runKernel(BBe,r)}var e3=ge({relu_:hje});function dje(t){var e=re(t,"x","relu6"),r={x:e};return Ee.runKernel($Be,r)}var jte=ge({relu6_:dje});function pje(t,e){var r=re(t,"x","reverse"),n={x:r},a={dims:e};return Ee.runKernel(zBe,n,a)}var id=ge({reverse_:pje});function mje(t){var e=re(t,"x","reverse");return ye(e.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),id(e,0)}var vje=ge({reverse1d_:mje});function gje(t,e){var r=re(t,"x","reverse");return ye(r.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+r.rank+"."}),id(r,e)}var yje=ge({reverse2d_:gje});function bje(t,e){var r=re(t,"x","reverse");return ye(r.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+r.rank+"."}),id(r,e)}var wje=ge({reverse3d_:bje});function _je(t,e){var r=re(t,"x","reverse");return ye(r.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+r.rank+"."}),id(r,e)}var xje=ge({reverse4d_:_je});function Sje(t){var e=re(t,"x","round"),r={x:e};return Ee.runKernel(jBe,r)}var Ute=ge({round_:Sje});function Eje(t){var e=re(t,"x","rsqrt","float32"),r={x:e};return Ee.runKernel(UBe,r)}var Mje=ge({rsqrt_:Eje});function Aje(t){var e=re(t,"x","selu"),r={x:e};return Ee.runKernel(HBe,r)}var kje=ge({selu_:Aje});function Tje(t,e,r,n,a,s,o){s===void 0&&(s=[1,1]),o===void 0&&(o="NHWC");var u=re(t,"x","separableConv2d"),l=re(e,"depthwiseFilter","separableConv2d"),h=re(r,"pointwiseFilter","separableConv2d"),p=u,v=!1;if(u.rank===3&&(v=!0,p=it(u,[1,u.shape[0],u.shape[1],u.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");ye(p.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got "+("rank "+p.rank+".")}),ye(l.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+("got rank "+l.rank+".")}),ye(h.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+("got rank "+l.rank+".")}),ye(h.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter "+(" must be 1, but got "+h.shape[0]+".")}),ye(h.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise "+("filter must be 1, but got "+h.shape[1]+".")});var y=l.shape[2],S=l.shape[3];ye(h.shape[2]===y*S,function(){return"Error in separableConv2d: the third dimension of pointwise filter "+("must be "+y*S+", ")+("but got "+h.shape[2]+".")});var A=ED(p,l,n,a,o,s),T=1,I=KE(A,h,T,"valid",o);return v?it(I,[I.shape[1],I.shape[2],I.shape[3]]):I}var Nje=ge({separableConv2d_:Tje});function Ije(t,e){return on(this,void 0,void 0,function(){var r,n,a,s,o,u,p,l,h,p,v;return en(this,function(y){switch(y.label){case 0:return r=re(t,"x","setdiff1d"),n=re(e,"y","setdiff1d"),ye(r.dtype===n.dtype,function(){return"x and y should have the same dtype, but got x ("+r.dtype+") and y ("+n.dtype+")."}),ye(r.rank===1,function(){return"x should be 1D tensor, but got x ("+r.shape+")."}),ye(n.rank===1,function(){return"y should be 1D tensor, but got y ("+n.shape+")."}),[4,r.data()];case 1:return a=y.sent(),[4,n.data()];case 2:for(s=y.sent(),o=new Set(s),u=0,p=0;p<a.length;p++)o.has(a[p])||u++;for(l=new tD([u],r.dtype),h=new tD([u],"int32"),p=0,v=0;p<a.length;p++)o.has(a[p])||(l.values[v]=a[p],h.values[v]=p,v++);return[2,[l.toTensor(),h.toTensor()]]}})})}var Dje=Ije;function Oje(t){var e=re(t,"x","sign"),r={x:e};return Ee.runKernel(YBe,r)}var Rje=ge({sign_:Oje});function Cje(t){var e=re(t,"x","sin","float32"),r={x:e};return Ee.runKernel(ZBe,r)}var Fje=ge({sin_:Cje});function Bje(t){var e=re(t,"x","sinh"),r={x:e};return Ee.runKernel(JBe,r)}var Lje=ge({sinh_:Bje});function Pje(t,e,r){var n=re(t,"x","slice1d");return ye(n.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+n.rank+" tensor"}),Dn(n,[e],[r])}var qje=ge({slice1d_:Pje});function $je(t,e,r){var n=re(t,"x","slice2d");return ye(n.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+n.rank+" tensor"}),Dn(n,e,r)}var zje=ge({slice2d_:$je});function jje(t,e,r){var n=re(t,"x","slice3d");return ye(n.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+n.rank+" tensor"}),Dn(n,e,r)}var Uje=ge({slice3d_:jje});function Vje(t,e,r){var n=re(t,"x","slice4d");return ye(n.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+n.rank+" tensor"}),Dn(n,e,r)}var Wje=ge({slice4d_:Vje});function Gje(t,e){e===void 0&&(e=-1);var r=re(t,"logits","softmax","float32");if(e===-1&&(e=r.rank-1),e!==r.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+("Logits was rank "+r.rank+" and dim was "+e));var n={logits:r},a={dim:e};return Ee.runKernel(iLe,n,a)}var Hje=ge({softmax_:Gje});function Kje(t){ye(t.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 "+("but got "+t.dtype+".")});var e={input:t};return Ee.runKernel(P9e,e)}var OD=ge({fft_:Kje});function Zje(t){ye(t.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 "+("but got "+t.dtype+".")});var e={input:t};return Ee.runKernel(K9e,e)}var VE=ge({ifft_:Zje});function Jje(t){var e=t.shape[t.shape.length-1],r=t.size/e,n;if(e<=2){var a=it(t,[r,e]);n=VE(a)}else{var s=[r,2*(e-1)],o=it(y1(t),[r,e]),u=it(QE(t),[r,e]),l=id(Dn(o,[0,1],[r,e-2]),1),h=jt(id(Dn(u,[0,1],[r,e-2]),1),Pn(-1)),p=Za([o,l],1),v=Za([u,h],1),a=it(rd(p,v),[s[0],s[1]]);n=VE(a)}if(n=y1(n),t.rank===3&&t.shape[0]!==0){var y=n,S=t.shape[0];n=it(n,[S,n.shape[0]/S,n.shape[1]]),y.dispose()}return n}var Vte=ge({irfft_:Jje});function Yje(t,e,r){r===void 0&&(r=0);var n=re(t,"x","split"),a={x:n},s={numOrSizeSplits:e,axis:r};return Ee.runKernel(nLe,a,s)}var b1=ge({split_:Yje});function Xje(t,e){ye(t.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+t.dtype});var r=t.shape[t.shape.length-1],n=t.size/r,a;if(e!=null&&e<r){var s=t.shape.map(function(N){return 0}),o=t.shape.map(function(N){return N});o[t.shape.length-1]=e,a=Dn(t,s,o),r=e}else if(e!=null&&e>r){var u=t.shape.map(function(N){return N});u[t.shape.length-1]=e-r,a=Za([t,qm(u)],t.shape.length-1),r=e}else a=t;var l=MD(a),h=it(rd(a,l),[n,r]),p=OD(h),v=Math.floor(r/2)+1,y=y1(p),S=QE(p),A=b1(y,[v,r-v],y.shape.length-1),T=b1(S,[v,r-v],S.shape.length-1),I=a.shape.slice();return I[a.shape.length-1]=v,it(rd(A[0],T[0]),I)}var RD=ge({rfft_:Xje});function Qje(t,e){var r,n=re(t,"a","squaredDifference"),a=re(e,"b","squaredDifference");r=gt(Jn(n,a),2),n=r[0],a=r[1],Ai(n.shape,a.shape);var s={a:n,b:a},o={};return Ee.runKernel(lLe,s,o)}var Wte=ge({squaredDifference_:Qje});function eUe(t,e){var r=re(t,"x","squeeze","string_or_numeric");return it(r,N7e(r.shape,e).newShape)}var CD=ge({squeeze_:eUe});function tUe(t,e){e===void 0&&(e=0);var r=PE(t,"tensors","stack","string_or_numeric");ye(r.length>=1,function(){return"Pass at least one tensor to tf.stack"}),r.length>0&&ye(e<=r[0].rank,function(){return"Axis must be <= rank of the tensor"});var n=r,a={axis:e};return Ee.runKernel(TBe,n,a)}var w1=ge({stack_:tUe});function rUe(t,e){e===void 0&&(e=0);var r=re(t,"x","step"),n={x:r},a={alpha:e};return Ee.runKernel(ELe,n,a)}var Gte=ge({step_:rUe});function nUe(t,e,r,n,a,s,o,u,l){a===void 0&&(a=0),s===void 0&&(s=0),o===void 0&&(o=0),u===void 0&&(u=0),l===void 0&&(l=0);var h=re(t,"x","stridedSlice","string_or_numeric"),p={x:h},v={begin:e,end:r,strides:n,beginMask:a,endMask:s,ellipsisMask:o,newAxisMask:u,shrinkAxisMask:l};return Ee.runKernel(cLe,p,v)}var iUe=ge({stridedSlice_:nUe});function aUe(t){var e=re(t,"x","tan","float32"),r={x:e};return Ee.runKernel(vLe,r)}var sUe=ge({tan_:aUe});function FD(t,e,r){var n=Xl(t,r);return ec(t,e,n,r)}function Jo(t,e){$m(t);var r=Xl(t,e);if(r.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");var n=null;return ec(t,n,r,e)}function p1(t,e,r){if($m(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var n=Xl(t,r);if(n.length!==2&&n.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(n.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return ec(t,e,n,r)}function oUe(t,e,r){if($m(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var n=Xl(t,r);if(n.length!==3&&n.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(n.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return ec(t,e,n,r)}function uUe(t,e,r){if($m(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var n=Xl(t,r);if(n.length!==4&&n.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(n.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return ec(t,e,n,r)}function fUe(t,e,r){if($m(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var n=Xl(t,r);if(n.length!==5&&n.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(n.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return ec(t,e,n,r)}function lUe(t,e,r){if($m(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var n=Xl(t,r);if(n.length!==6&&n.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(n.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||n,ec(t,e,n,r)}function cUe(t,e,r){e===void 0&&(e=1),r===void 0&&(r=!0);var n=re(t,"x","topk");if(n.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var a=n.shape[n.shape.length-1];if(e<0)throw new Error("'k' passed to topk() must be >= 0 but got "+e);if(e>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") "+("but got "+e));var s={x:n},o={k:e,sorted:r},u=gt(Ee.runKernel(yLe,s,o),2),l=u[0],h=u[1];return{values:l,indices:h}}var hUe=ge({topk_:cUe});function dUe(t,e,r,n,a){if(e===void 0&&(e=0),r===void 0&&(r=1),n!=null&&n==="bool")throw new Error("Unsupported data type $ { dtype }");for(var s=new DD(e,r,n,!0,a),o=Yl(t,n),u=0;u<o.values.length;u++)o.values[u]=s.nextValue();return o.toTensor()}var pUe=ge({truncatedNormal_:dUe});function mUe(t,e){e===void 0&&(e=0);var r=re(t,"x","unique","string_or_numeric");ye(r.rank>0,function(){return"The input tensor must be at least 1D"});var n={x:r},a={axis:e},s=gt(Ee.runKernel(wLe,n,a),2),o=s[0],u=s[1];return{values:o,indices:u}}var vUe=ge({unique_:mUe});function gUe(t,e,r){var n=re(t,"x","unsortedSegmentSum"),a=re(e,"segmentIds","unsortedSegmentSum","int32");ye(m1(r),function(){return"numSegments must be of dtype int"});var s={x:n,segmentIds:a},o={numSegments:r};return Ee.runKernel(xLe,s,o)}var yUe=ge({unsortedSegmentSum_:gUe});function bUe(t,e){e===void 0&&(e=0);var r=re(t,"x","unstack","string_or_numeric");ye(e>=-r.shape.length&&e<r.shape.length,function(){return"Axis = "+e+" is not in [-"+r.shape.length+", "+r.shape.length+")"});var n={value:r},a={axis:e};return Ee.runKernel(_Le,n,a)}var BD=ge({unstack_:bUe});function wUe(t,e){return ND(t,e,"right")}function _Ue(t,e,r,n){return e===void 0&&(e=!0),Ee.makeVariable(t,e,r,n)}function xUe(t,e){for(var r=[],n=0;n<e.length;n++)e[n]&&r.push(n);for(var a=Yl(t,"int32"),s=Yl([r.length,t.length],"int32"),n=0;n<r.length;n++){var o=a.indexToLoc(r[n]),u=n*t.length;s.values.set(o,u)}return s.toTensor()}function SUe(t){return on(this,void 0,void 0,function(){var e,r,n;return en(this,function(a){switch(a.label){case 0:return e=re(t,"condition","whereAsync","bool"),[4,e.data()];case 1:return r=a.sent(),n=xUe(e.shape,r),t!==e&&e.dispose(),[2,n]}})})}var Hte=SUe;function EUe(t,e,r){return on(this,void 0,void 0,function(){var n,a,s,o,u,l,h,p,v,y,S,A,T;return en(this,function(I){switch(I.label){case 0:for(n=re(t,"tensor","boolMask"),a=re(e,"mask","boolMask","bool"),s=r==null?0:r,o=a.rank,u=n.shape,ye(o>0,function(){return"mask cannot be scalar"}),go(u.slice(s,s+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),l=1,h=s;h<s+o;h++)l*=u[h];return p=u.slice(0,s).concat([l],u.slice(s+o)),v=it(n,p),y=it(a,[-1]),[4,Hte(y)];case 1:return S=I.sent(),A=CD(S,[1]),T=kte(v,A,s),t!==n&&n.dispose(),e!==a&&a.dispose(),A.dispose(),v.dispose(),y.dispose(),S.dispose(),[2,T]}})})}var MUe=EUe;function AUe(t,e){return Ee.tidy(t,e)}function kUe(t){var e=dte(t);e.forEach(function(r){return r.dispose()})}function TUe(t,e,r){var n=re(t,"x","transpose");if(e==null&&(e=n.shape.map(function(o,u){return u}).reverse()),ye(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" "+("must match length of perm "+e+".")}),e.forEach(function(o){ye(o>=0&&o<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+(" but got "+e)})}),n.rank<=1)return n.clone();var a={x:n},s={perm:e};return n.dtype==="complex64"?AUe(function(){var o=y1(n),u=QE(n);return o=Ee.runKernel(LI,{x:o},s),u=Ee.runKernel(LI,{x:u},s),r&&(u=$f(u)),rd(o,u)}):Ee.runKernel(LI,a,s)}var cD=ge({transpose_:TUe});function NUe(t,e,r,n,a){a===void 0&&(a=!0);var s=re(t,"v","movingAverage"),o=re(e,"x","movingAverage"),u=re(r,"decay","movingAverage");VLe(s,o),ye(zm(s.shape,o.shape),function(){return"Shape mismatch in v and x"});var l=Pn(1),h=_r(l,u),p=jt(_r(o,s),h);if(a){ye(n!=null,function(){return"When using zeroDebias: true, step is required."});var v=re(n,"step","movingAverage");p=wa(p,_r(l,AD(u,v)))}return Mi(s,p)}var IUe=ge({movingAverage_:NUe});function DUe(t,e,r){var n=e.rank>1?e.shape[e.rank-1]:1,a=e.rank>1?e.rank-1:1,s="Must have updates.shape = indices.shape[:batchDim] + "+("shape[sliceDim:], got updates.shape: "+r.shape)+(", indices.shape: "+e.shape+", shape: "+t)+(", sliceDim: "+n+", and batchDim: "+a+".");if(r.rank<a)throw new Error(s+(" update.rank < "+a+". "));if(t.length<n+(r.rank-a))throw new Error(s+(" Output shape length < "+(n+(r.rank-a))));if(r.rank!==a+t.length-n)throw new Error(s+(" update.rank != "+(a+t.length-n)));for(var o=0;o<a;++o)if(r.shape[o]!==e.shape[o])throw new Error(s+(" updates.shape["+o+"] ("+r.shape[o]+") != indices.shape["+o+"] ("+e.shape[o]+")."));for(var o=0;o<r.rank-a;++o)if(r.shape[o+a]!==t[o+n])throw new Error(s+(" updates.shape["+(o+a)+"] ("+r.shape[o+a]+") != shape["+(o+a)+"] ("+t[o+a]+")"))}function OUe(t,e,r){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+(" but the rank was "+e.rank+"."));if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+(" but the rank was "+t.rank+"."));if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(r.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+r);if(r.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}DUe(r,e,t)}function RUe(t,e,r){var n=re(t,"indices","scatterND","int32"),a=re(e,"updates","scatterND");OUe(a,n,r);var s={indices:n,updates:a},o={shape:r};return Ee.runKernel(VBe,s,o)}var CUe=ge({scatterND_:RUe});function FUe(t,e,r,n){if(t.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+(" but the dtype was "+t.dtype+"."));if(t.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+(" but got shape "+t.shape+"."));var a=t.rank>0?t.shape[0]:1,s=t.rank>1?t.shape[1]:1;if(r.length!==s)throw new Error("outputShape has incorrect number of elements:,"+(" "+r.length+", should be: "+s+"."));var o=e.size;if(!(e.rank===0||e.rank===1&&o===a))throw new Error("sparseValues has incorrect shape "+(e.shape+", should be [] or ["+a+"]"));if(e.dtype!==n.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function BUe(t,e,r,n){n===void 0&&(n=0);var a=re(t,"sparseIndices","sparseToDense","int32"),s=re(e,"sparseValues","sparseToDense","string_or_numeric"),o=re(n,"defaultValue","sparseToDense",s.dtype);FUe(a,s,r,o);var u={sparseIndices:a,sparseValues:s,defaultValue:o},l={outputShape:r};return Ee.runKernel(fLe,u,l)}var LUe=ge({sparseToDense_:BUe});function PUe(t,e){var r=re(e,"indices","gatherND","int32"),n=re(t,"x","gatherND","string_or_numeric"),a={params:n,indices:r};return Ee.runKernel(W9e,a)}var qUe=ge({gatherND_:PUe});function $Ue(t,e){if(e==null)return t.shape.slice();if(zm(t.shape,e))return e;if(t.shape.length===e.length){for(var r=[],n=0;n<t.shape.length;n++)e[n]==null&&t.shape[n]!=null?r.push(t.shape[n]):r.push(e[n]);return r}return e}function zUe(t,e,r,n){var a=re(t,"x","dropout");if(ye(a.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be "+("scaled, but got a "+a.dtype+" tensor instead.")}),ye(e>=0&&e<1,function(){return"rate must be a float in the range [0, 1), but got "+e+"."}),e===0)return t instanceof Ia?a.clone():a;var s=$Ue(a,r),o=1-e,u=wa(Ate(Mi(zte(s,0,1,"float32",n),o)),o);return jt(a,u)}var jUe=ge({dropout_:zUe});function Kte(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function LD(t,e,r){for(var n=1-t%2,a=new Float32Array(t),s=0;s<t;++s){var o=2*Math.PI*s/(t+n-1);a[s]=e-r*Math.cos(o)}return Jo(a,"float32")}function UUe(t,e,r){return r===void 0&&(r=1),on(this,void 0,void 0,function(){var n,a,s,o,u,l,h,p,v,y,S,A,T,I,I;return en(this,function(N){switch(N.label){case 0:return n=re(t,"predictions","inTopK"),a=re(e,"targets","inTopK"),ye(n.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+("but got "+n.rank)}),ye(n.rank-1===a.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+(n.rank+" and targets rank "+a.rank)}),go(n.shape.slice(0,n.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),s=n.shape[n.shape.length-1],ye(r>0&&r<=s,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+("dimension ("+s+"), but got "+r)}),[4,n.data()];case 1:return o=N.sent(),[4,a.data()];case 2:for(u=N.sent(),l=gt([o.length/s,s],2),h=l[0],p=l[1],v=I7e("bool",h),y=0;y<h;y++){for(S=y*p,A=o.subarray(S,S+p),T=[],I=0;I<A.length;I++)T.push({value:A[I],index:I});for(T.sort(function(D,C){return C.value-D.value}),v[y]=0,I=0;I<r;I++)if(T[I].index===u[y]){v[y]=1;break}}return t!==n&&n.dispose(),e!==a&&a.dispose(),[2,FD(v,a.shape,"bool")]}})})}var VUe=UUe;function WUe(t,e,r,n,a,s,o){s===void 0&&(s="NHWC");var u=t;t.rank===3&&(u=it(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l=e;l.rank===3&&(l=it(e,[1,e.shape[0],e.shape[1],e.shape[2]])),ye(u.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+(u.shape+".")}),ye(l.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+(l.shape+".")}),ye(r.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+(r+".")});var h=s==="NHWC"?u.shape[3]:u.shape[1],p=s==="NHWC"?l.shape[3]:l.shape[1];ye(h===r[2],function(){return"Error in conv2dDerFilter: depth of input "+h+") must "+("match input depth in filter ("+r[2]+".")}),ye(p===r[3],function(){return"Error in conv2dDerFilter: depth of dy ("+p+") must "+("match output depth for filter ("+r[3]+").")}),Xo("conv2dDerFilter",a,o);var v={x:u,dy:l},y={strides:n,pad:a,dataFormat:s,dimRoundingMode:o,filterShape:r};return Ee.runKernel(p9e,v,y)}var GUe=ge({conv2DBackpropFilter_:WUe});function PD(t,e,r){if(r==null||r==="linear")return t;if(r==="relu")return jt(t,Gte(e));throw new Error("Cannot compute gradient for fused activation "+r+".")}function qD(t,e){var r=e,n=jqe(t.shape,e.shape);return n.length>0&&(r=En(r,n)),it(r,t.shape)}function $D(t,e,r,n){if(e==="linear")return t;if(e==="relu")return e3(t);if(e==="elu")return Ste(t);if(e==="relu6")return jte(t);if(e==="prelu")return qte(t,r);if(e==="leakyrelu")return Nte(t,n);if(e==="sigmoid")return Fm(t);throw new Error("Unknown fused activation "+e+".")}var zD=function(t,e){var r=t>0;return!r||e==="linear"};function HUe(t){var e,r=t.x,n=t.filter,a=t.strides,s=t.pad,o=t.dataFormat,u=o===void 0?"NHWC":o,l=t.dilations,h=l===void 0?[1,1]:l,p=t.dimRoundingMode,v=t.bias,y=t.activation,S=y===void 0?"linear":y,A=t.preluActivationWeights,T=t.leakyreluAlpha;if(S=S||"linear",zD(Ee.state.gradientDepth,S)===!1){ye(u==="NHWC",function(){return"Error in fused conv2d: got dataFormat of "+u+" but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."});var I=KE(r,n,a,s,u,h,p);return v!=null&&(I=Mi(I,v)),$D(I,S,A,T)}var N=re(r,"x","conv2d","float32"),D=re(n,"filter","conv2d","float32"),C=N,L=!1;N.rank===3&&(L=!0,C=it(N,[1,N.shape[0],N.shape[1],N.shape[2]])),ye(C.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+(C.rank+".")}),ye(D.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+(D.rank+".")}),Xo("fused conv2d",s,p);var z=u==="NHWC"?C.shape[3]:C.shape[1];ye(D.shape[2]===z,function(){return"Error in conv2d: depth of input ("+z+") must match "+("input depth for filter "+D.shape[2]+".")}),ye(Ql(a,h),function(){return"Error in conv2D: Either strides or dilations must be 1. "+("Got strides "+a+" and dilations '"+h+"'")});var $=SD(C.shape,D.shape,a,h,s,p),G;v!=null&&(G=re(v,"bias","fused conv2d"),e=gt(Jn(G,N),1),G=e[0],u==="NHWC"?Ai($.outShape,G.shape):(ye(G.shape.length<=1,function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+("rank-"+G.shape.length+".")}),ye(G.shape.length===0||G.shape[0]===$.outChannels||G.shape[0]===1,function(){return"Error in fused conv2d: bias shape ("+G.shape+") is not compatible with the number of output channels "+("("+$.outChannels+")")})));var j;if(A!=null){var K=A.shape;if(ye(K.length<=1||K.length===3,function(){return"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+("rank-"+K.length+".")}),K.length===1)ye(K[0]===1||K[0]===$.outChannels,function(){return"Error in fused conv2d: PReLU activation weights "+("("+K+") is not compatible with the number of output ")+("channels ("+$.outChannels+").")});else if(K.length===3)try{Ai(K,$.outShape)}catch{var M="Error in fused conv2d: PReLU activation weights ("+K+") is not compatible with the output shape of the conv2d "+("("+$.outShape+").");throw Error(M)}j=re(A,"prelu weights","fused conv2d")}var f=function(E,k){ye(u==="NHWC",function(){return"Error in gradient of fused conv2D: got dataFormat of "+u+" but only NHWC is currently supported."});var w=gt(k,4),c=w[0],_=w[1],R=w[2],O=w[3],F=PD(E,R,S);ye(zE(h),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+("are not yet supported in gradients. Got dilations '"+h+"'")});var U=wte(_.shape,F,c,a,s),H=GUe(_,F,c.shape,a,s),J=[U,H];if(O!=null){var fe=qD(O,F);J.push(fe)}return J},d={x:C,filter:D,bias:G,preluActivationWeights:j},g={strides:a,pad:s,dataFormat:u,dilations:h,dimRoundingMode:p,activation:S,leakyreluAlpha:T};if(v==null){var m=zf(function(E,k,w){var c=Ee.runKernel(Eee,d,g);return w([k,E,c]),L&&(c=it(c,[c.shape[1],c.shape[2],c.shape[3]])),{value:c,gradFunc:f}});return m(C,D)}else{var b=zf(function(E,k,w,c){var _=Ee.runKernel(Eee,d,g);return c([k,E,_,w]),L&&(_=it(_,[_.shape[1],_.shape[2],_.shape[3]])),{value:_,gradFunc:f}});return b(C,D,G)}}var KUe=ge({fusedConv2d_:HUe});function ZUe(t,e,r,n,a,s,o){s===void 0&&(s=[1,1]);var u=t;t.rank===3&&(u=it(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l=e;l.rank===3&&(l=it(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var h={x:u,dy:l},p={strides:n,pad:a,dimRoundingMode:o,dilations:s,filterShape:r};return Ee.runKernel(A9e,h,p)}var JUe=ge({depthwiseConv2dNativeBackpropFilter_:ZUe});function YUe(t,e,r,n,a,s,o){s===void 0&&(s=[1,1]);var u=e,l=!1;e.rank===3&&(l=!0,u=it(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var h={dy:u,filter:r},p={strides:n,pad:a,dimRoundingMode:o,dilations:s,inputShape:t},v=Ee.runKernel(k9e,h,p);return l?it(v,[v.shape[1],v.shape[2],v.shape[3]]):v}var XUe=ge({depthwiseConv2dNativeBackpropInput_:YUe});function QUe(t){var e,r=t.x,n=t.filter,a=t.strides,s=t.pad,o=t.dataFormat,u=o===void 0?"NHWC":o,l=t.dilations,h=l===void 0?[1,1]:l,p=t.dimRoundingMode,v=t.bias,y=t.activation,S=y===void 0?"linear":y,A=t.preluActivationWeights,T=t.leakyreluAlpha;if(zD(Ee.state.gradientDepth,S)===!1){var I=ED(r,n,a,s,u,h,p);return v!=null&&(I=Mi(I,v)),$D(I,S,A,T)}var N=re(r,"x","depthwiseConv2d","float32"),D=re(n,"filter","depthwiseConv2d","float32"),C=N,L=!1;N.rank===3&&(L=!0,C=it(N,[1,N.shape[0],N.shape[1],N.shape[2]])),ye(C.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+("rank "+C.rank+".")}),ye(D.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+("but got rank "+D.rank+".")}),ye(C.shape[3]===D.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels "+("("+C.shape[3]+") must match the inChannels dimension in ")+("filter "+D.shape[2]+".")}),h==null&&(h=[1,1]),ye(Ql(a,h),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+("be 1. Got strides "+a+" and dilations '"+h+"'")}),Xo("fused depthwiseConv2d",s,p);var z=SD(C.shape,D.shape,a,h,s,p,!0),$;v!=null&&($=re(v,"bias","fused conv2d"),e=gt(Jn($,N),1),$=e[0],Ai(z.outShape,$.shape));var G;A!=null&&(G=re(A,"prelu weights","fused depthwiseConv2d"));var j=function(g,m){ye(zE(h),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+("'"+h+"'")});var b=gt(m,4),E=b[0],k=b[1],w=b[2],c=b[3],_=PD(g,w,S),R=XUe(k.shape,_,E,a,s,h,p),O=JUe(k,_,E.shape,a,s,h,p);if(c!=null){var F=qD($,_);return[R,O,F]}return[R,O]},K={x:C,filter:D,bias:$,preluActivationWeights:G},M={strides:a,pad:s,dataFormat:u,dilations:h,dimRoundingMode:p,activation:S,leakyreluAlpha:T};if(v==null){var f=zf(function(g,m,b){var E=Ee.runKernel(Mee,K,M);return b([m,g,E]),L&&(E=it(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:j}});return f(C,D)}else{var d=zf(function(g,m,b,E){var k=Ee.runKernel(Mee,K,M);return E([m,g,k,b]),L&&(k=it(k,[k.shape[1],k.shape[2],k.shape[3]])),{value:k,gradFunc:j}});return d(C,D,$)}}var eVe=ge({fusedDepthwiseConv2d_:QUe});function tVe(t){var e,r,n=t.a,a=t.b,s=t.transposeA,o=s===void 0?!1:s,u=t.transposeB,l=u===void 0?!1:u,h=t.bias,p=t.activation,v=p===void 0?"linear":p,y=t.preluActivationWeights,S=t.leakyreluAlpha,A=S===void 0?.2:S;if(zD(Ee.state.gradientDepth,v)===!1){var T=Qr(n,a,o,l);return h!=null&&(T=Mi(T,h)),$D(T,v,y,A)}var I=re(n,"a","fused matMul"),N=re(a,"b","fused matMul");e=gt(Jn(I,N),2),I=e[0],N=e[1];var D=o?I.shape[I.rank-2]:I.shape[I.rank-1],C=l?N.shape[N.rank-1]:N.shape[N.rank-2],L=o?I.shape[I.rank-1]:I.shape[I.rank-2],z=l?N.shape[N.rank-2]:N.shape[N.rank-1],$=I.shape.slice(0,-2),G=N.shape.slice(0,-2),j=Oa($),K=Oa(G);ye(D===C,function(){return"Error in fused matMul: inner shapes ("+D+") and ("+(C+") of Tensors with shapes "+I.shape+" and ")+(N.shape+" and transposeA="+o)+(" and transposeB="+l+" must match.")});var M=Ai(I.shape.slice(0,-2),N.shape.slice(0,-2)),f=M.concat([L,z]),d=o?it(I,[j,D,L]):it(I,[j,L,D]),g=l?it(N,[K,z,C]):it(N,[K,C,z]),m;h!=null&&(m=re(h,"bias","fused matMul"),r=gt(Jn(m,I),1),m=r[0],Ai(f,m.shape));var b;y!=null&&(b=re(y,"prelu weights","fused matMul"));var E=function(R,O){var F=gt(O,4),U=F[0],H=F[1],J=F[2],fe=F[3],B=PD(it(R,J.shape),J,v),q,Y;if(!o&&!l?(q=Qr(B,H,!1,!0),Y=Qr(U,B,!0,!1)):!o&&l?(q=Qr(B,H,!1,!1),Y=Qr(B,U,!0,!1)):o&&!l?(q=Qr(H,B,!1,!0),Y=Qr(U,B,!1,!1)):(q=Qr(H,B,!0,!0),Y=Qr(B,U,!0,!0)),h!=null){var X=qD(fe,B);return[q,Y,X]}else return[q,Y]},k={a:d,b:g,bias:m,preluActivationWeights:b},w={transposeA:o,transposeB:l,activation:v,leakyreluAlpha:A};if(h==null){var c=zf(function(R,O,F){var U=Ee.runKernel(See,k,w);return F([R,O,U]),{value:it(U,f),gradFunc:E}});return c(d,g)}else{var _=zf(function(R,O,F,U){var H=Ee.runKernel(See,k,w);return U([R,O,H,F]),{value:it(H,f),gradFunc:E}});return _(d,g,m)}}var rVe=ge({fusedMatMul_:tVe});var nVe={__proto__:null,conv2d:KUe,depthwiseConv2d:eVe,matMul:rVe};function iVe(t){return LD(t,.54,.46)}var aVe=ge({hammingWindow_:iVe});function sVe(t){return LD(t,.5,.5)}var Zte=ge({hannWindow_:sVe});function oVe(t,e,r,n,a){n===void 0&&(n=!1),a===void 0&&(a=0);for(var s=0,o=[];s+e<=t.size;)o.push(Dn(t,s,e)),s+=r;if(n)for(;s<t.size;){var u=s+e-t.size,l=Za([Dn(t,s,e-u),kD([u],a)]);o.push(l),s+=r}return o.length===0?p1([],[0,e]):it(Za(o),[o.length,e])}var Jte=ge({frame_:oVe});function uVe(t,e,r,n,a){a===void 0&&(a=Zte),n==null&&(n=Kte(e));var s=Jte(t,e,r),o=jt(s,a(e));return RD(o,n)}var fVe=ge({stft_:uVe});function lVe(t,e,r,n,a,s){a===void 0&&(a="bilinear"),s===void 0&&(s=0);var o=re(t,"image","cropAndResize"),u=re(e,"boxes","cropAndResize","float32"),l=re(r,"boxInd","cropAndResize","int32"),h=u.shape[0];ye(o.rank===4,function(){return"Error in cropAndResize: image must be rank 4,"+("but got rank "+o.rank+".")}),ye(u.rank===2&&u.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+h+",4] "+("but had shape "+u.shape+".")}),ye(l.rank===1&&l.shape[0]===h,function(){return"Error in cropAndResize: boxInd must be have size ["+h+"] "+("but had shape "+u.shape+".")}),ye(n.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+("length "+n.length+".")}),ye(n[0]>=1&&n[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+n}),ye(a==="bilinear"||a==="nearest",function(){return"method must be bilinear or nearest, but was "+a});var p={image:o,boxes:u,boxInd:l},v={method:a,extrapolationValue:s,cropSize:n},y=Ee.runKernel(x9e,p,v);return y}var cVe=ge({cropAndResize_:lVe});function hVe(t){var e=re(t,"image","flipLeftRight","float32");ye(e.rank===4,function(){return"Error in flipLeftRight: image must be rank 4,"+("but got rank "+e.rank+".")});var r={image:e},n=Ee.runKernel($9e,r,{});return n}var dVe=ge({flipLeftRight_:hVe});function pVe(t){var e=re(t,"image","grayscaleToRGB"),r=e.rank-1,n=e.shape[r];ye(e.rank>=2,function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+("but got rank "+e.rank+".")}),ye(n===1,function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+("should be size 1, but got size "+n+".")});var a=new Array(e.rank);return a.fill(1,0,r),a[r]=3,d1(e,a)}var mVe=ge({grayscaleToRGB_:pVe});function vVe(t,e,r,n){r===void 0&&(r=0),n===void 0&&(n=.5);var a=re(t,"image","rotateWithOffset","float32");ye(a.rank===4,function(){return"Error in rotateWithOffset: image must be rank 4,"+("but got rank "+a.rank+".")});var s={image:a},o={radians:e,fillValue:r,center:n},u=Ee.runKernel(MLe,s,o);return u}var gVe=ge({rotateWithOffset_:vVe});function jm(t,e,r,n,a,s){n==null&&(n=.5),a==null&&(a=Number.NEGATIVE_INFINITY),s==null&&(s=0);var o=t.shape[0];return r=Math.min(r,o),ye(0<=n&&n<=1,function(){return"iouThreshold must be in [0, 1], but was '"+n+"'"}),ye(t.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),ye(t.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),ye(e.rank===1,function(){return"scores must be a 1D tensor"}),ye(e.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", "+("but was "+e.shape[0])}),ye(0<=s&&s<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+s+"'"}),{maxOutputSize:r,iouThreshold:n,scoreThreshold:a,softNmsSigma:s}}function yVe(t,e,r,n,a){n===void 0&&(n=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY);var s=re(t,"boxes","nonMaxSuppression","float32"),o=re(e,"scores","nonMaxSuppression","float32"),u=jm(s,o,r,n,a);r=u.maxOutputSize,n=u.iouThreshold,a=u.scoreThreshold;var l={maxOutputSize:r,iouThreshold:n,scoreThreshold:a};return Ee.runKernel(SBe,{boxes:s,scores:o},l)}var bVe=ge({nonMaxSuppression_:yVe});function wVe(t,e,r){var n=_Ve(t,e,r),a=n<0?-(n+1):n;t.splice(a,0,e)}function _Ve(t,e,r){return SVe(t,e,r||xVe)}function xVe(t,e){return t>e?1:t<e?-1:0}function SVe(t,e,r){for(var n=0,a=t.length,s=0,o=!1;n<a;){s=n+(a-n>>>1);var u=r(e,t[s]);u>0?n=s+1:(a=s,o=!u)}return o?n:-n-1}function EVe(t,e,r,n,a){return jD(t,e,r,n,a,0)}function MVe(t,e,r,n,a,s){return jD(t,e,r,n,a,0,!1,s,!0)}function AVe(t,e,r,n,a,s){return jD(t,e,r,n,a,s,!0)}function jD(t,e,r,n,a,s,o,u,l){o===void 0&&(o=!1),u===void 0&&(u=!1),l===void 0&&(l=!1);for(var h=[],p=0;p<e.length;p++)e[p]>a&&h.push({score:e[p],boxIndex:p,suppressBeginIndex:0});h.sort(qee);for(var v=s>0?-.5/s:0,y=[],S=[];y.length<r&&h.length>0;){var A=h.pop(),T=A.score,I=A.boxIndex,N=A.suppressBeginIndex;if(T<a)break;for(var D=!1,C=y.length-1;C>=N;--C){var L=kVe(t,I,y[C]);if(L>=n){D=!0;break}if(A.score=A.score*TVe(n,v,L),A.score<=a)break}A.suppressBeginIndex=y.length,D||(A.score===T?(y.push(I),S.push(A.score)):A.score>a&&wVe(h,A,qee))}var z=y.length,$=r-z;u&&$>0&&(y.push.apply(y,$i(new Array($).fill(0))),S.push.apply(S,$i(new Array($).fill(0))));var G={selectedIndices:y};return o&&(G.selectedScores=S),l&&(G.validOutputs=z),G}function kVe(t,e,r){var n=t.subarray(e*4,e*4+4),a=t.subarray(r*4,r*4+4),s=Math.min(n[0],n[2]),o=Math.min(n[1],n[3]),u=Math.max(n[0],n[2]),l=Math.max(n[1],n[3]),h=Math.min(a[0],a[2]),p=Math.min(a[1],a[3]),v=Math.max(a[0],a[2]),y=Math.max(a[1],a[3]),S=(u-s)*(l-o),A=(v-h)*(y-p);if(S<=0||A<=0)return 0;var T=Math.max(s,h),I=Math.max(o,p),N=Math.min(u,v),D=Math.min(l,y),C=Math.max(N-T,0)*Math.max(D-I,0);return C/(S+A-C)}function TVe(t,e,r){var n=Math.exp(e*r*r);return r<=t?n:0}function qee(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}function NVe(t,e,r,n,a){return n===void 0&&(n=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),on(this,void 0,void 0,function(){var s,o,u,l,h,p,v;return en(this,function(y){switch(y.label){case 0:return s=re(t,"boxes","nonMaxSuppressionAsync"),o=re(e,"scores","nonMaxSuppressionAsync"),u=jm(s,o,r,n,a),r=u.maxOutputSize,n=u.iouThreshold,a=u.scoreThreshold,[4,Promise.all([s.data(),o.data()])];case 1:return l=y.sent(),h=l[0],p=l[1],v=EVe(h,p,r,n,a).selectedIndices,s!==t&&s.dispose(),o!==e&&o.dispose(),[2,Jo(v,"int32")]}})})}var IVe=NVe;function DVe(t,e,r,n,a,s){n===void 0&&(n=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),s===void 0&&(s=0);var o=re(t,"boxes","nonMaxSuppression"),u=re(e,"scores","nonMaxSuppression"),l=jm(o,u,r,n,a,s);r=l.maxOutputSize,n=l.iouThreshold,a=l.scoreThreshold,s=l.softNmsSigma;var h={boxes:o,scores:u},p={maxOutputSize:r,iouThreshold:n,scoreThreshold:a,softNmsSigma:s},v=Ee.runKernel(MBe,h,p);return{selectedIndices:v[0],selectedScores:v[1]}}var OVe=ge({nonMaxSuppressionWithScore_:DVe});function RVe(t,e,r,n,a,s){return n===void 0&&(n=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),s===void 0&&(s=0),on(this,void 0,void 0,function(){var o,u,l,h,p,v,y,S,A;return en(this,function(T){switch(T.label){case 0:return o=re(t,"boxes","nonMaxSuppressionAsync"),u=re(e,"scores","nonMaxSuppressionAsync"),l=jm(o,u,r,n,a,s),r=l.maxOutputSize,n=l.iouThreshold,a=l.scoreThreshold,s=l.softNmsSigma,[4,Promise.all([o.data(),u.data()])];case 1:return h=T.sent(),p=h[0],v=h[1],y=AVe(p,v,r,n,a,s),S=y.selectedIndices,A=y.selectedScores,o!==t&&o.dispose(),u!==e&&u.dispose(),[2,{selectedIndices:Jo(S,"int32"),selectedScores:Jo(A)}]}})})}var CVe=RVe;function FVe(t,e,r,n,a,s){n===void 0&&(n=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),s===void 0&&(s=!1);var o=re(t,"boxes","nonMaxSuppression"),u=re(e,"scores","nonMaxSuppression"),l=jm(o,u,r,n,a,null),h=l.maxOutputSize,p=l.iouThreshold,v=l.scoreThreshold,y={boxes:o,scores:u},S={maxOutputSize:h,iouThreshold:p,scoreThreshold:v,padToMaxOutputSize:s},A=Ee.runKernel(EBe,y,S);return{selectedIndices:A[0],validOutputs:A[1]}}var BVe=ge({nonMaxSuppressionPadded_:FVe});function LVe(t,e,r,n,a,s){return n===void 0&&(n=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),s===void 0&&(s=!1),on(this,void 0,void 0,function(){var o,u,l,h,p,v,y,S,A,T,I,N;return en(this,function(D){switch(D.label){case 0:return o=re(t,"boxes","nonMaxSuppressionAsync"),u=re(e,"scores","nonMaxSuppressionAsync"),l=jm(o,u,r,n,a,null),h=l.maxOutputSize,p=l.iouThreshold,v=l.scoreThreshold,[4,Promise.all([o.data(),u.data()])];case 1:return y=gt.apply(void 0,[D.sent(),2]),S=y[0],A=y[1],T=MVe(S,A,h,p,v,s),I=T.selectedIndices,N=T.validOutputs,o!==t&&o.dispose(),u!==e&&u.dispose(),[2,{selectedIndices:Jo(I,"int32"),validOutputs:Pn(N,"int32")}]}})})}var PVe=LVe;function qVe(t,e,r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var a=re(t,"images","resizeBilinear");ye(a.rank===3||a.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+("rank "+a.rank+".")}),ye(e.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+(e+".")}),ye(n===!1||r===!1,function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."});var s=a,o=!1;a.rank===3&&(o=!0,s=it(a,[1,a.shape[0],a.shape[1],a.shape[2]])),gt(e,0);var u={images:s},l={alignCorners:r,halfPixelCenters:n,size:e},h=Ee.runKernel(qBe,u,l);return o?it(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var $Ve=ge({resizeBilinear_:qVe});function zVe(t,e,r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var a=re(t,"images","resizeNearestNeighbor");ye(a.rank===3||a.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+("rank "+a.rank+".")}),ye(e.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+(e+".")}),ye(a.dtype==="float32"||a.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"}),ye(n===!1||r===!1,function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."});var s=a,o=!1;a.rank===3&&(o=!0,s=it(a,[1,a.shape[0],a.shape[1],a.shape[2]])),gt(e,0);var u={images:s},l={alignCorners:r,halfPixelCenters:n,size:e},h=Ee.runKernel(PBe,u,l);return o?it(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var jVe=ge({resizeNearestNeighbor_:zVe});function UVe(t,e,r,n){var a;e===void 0&&(e="binary"),r===void 0&&(r=!1),n===void 0&&(n=.5);var s=re(t,"image","threshold"),o=.2989,u=.587,l=.114,h=s.shape[0]*s.shape[1],p=jt(Jo([n]),255),v,y,S,A;if(ye(s.rank===3,function(){return"Error in threshold: image must be rank 3,"+("but got rank "+s.rank+".")}),ye(s.shape[2]===3||s.shape[2]===1,function(){return"Error in threshold: image color channel must be equal to 3 or 1"+("but got "+s.shape[2]+".")}),ye(s.dtype==="int32"||s.dtype==="float32",function(){return"Error in dtype: image dtype must be int32 or float32,"+("but got dtype "+s.dtype+".")}),ye(e==="otsu"||e==="binary",function(){return"Method must be binary or otsu, but was "+e}),s.shape[2]===3){a=gt(b1(s,[1,1,1],-1),3),v=a[0],y=a[1],S=a[2];var T=jt(v,o),I=jt(y,u),N=jt(S,l);A=Mi(Mi(T,I),N)}else A=t;if(e==="otsu"){var D=bte(zi(Ute(A),"int32"),FD([]),256);p=VVe(D,h)}var C=r?TD(A,p):XE(A,p),L=zi(jt(C,255),"int32");return L}function VVe(t,e){for(var r=Jo([-1]),n=Jo([0]),a=Jo([0]),s,o,u,l,h,p,v=0;v<t.size-1;v++){s=Dn(t,0,v+1),o=Dn(t,v+1),h=wa(En(s),e),p=wa(En(o),e);var y=En(jt(s,g1(0,s.size)));u=wa(y,En(s));var S=kD(o.shape,s.size),A=Mi(g1(0,o.size),S),T=jt(o,A);l=wa(En(T),En(o));var I=_r(u,l),N=_r(u,l),D=jt(h,p);a=jt(jt(D,I),N);var C=XE(a,n);n=Pm(C,a,n),r=Pm(C,Jo([v]),r)}return r}var WVe=ge({threshold_:UVe});function GVe(t,e,r,n,a,s){r===void 0&&(r="nearest"),n===void 0&&(n="constant"),a===void 0&&(a=0);var o=re(t,"image","transform","float32"),u=re(e,"transforms","transform","float32");ye(o.rank===4,function(){return"Error in transform: image must be rank 4,"+("but got rank "+o.rank+".")}),ye(u.rank===2&&(u.shape[0]===o.shape[0]||u.shape[0]===1)&&u.shape[1]===8,function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"}),ye(s==null||s.length===2,function(){return"Error in transform: outputShape must be [height, width] or null, "+("but got "+s+".")});var l={image:o,transforms:u},h={interpolation:r,fillMode:n,fillValue:a,outputShape:s};return Ee.runKernel(bLe,l,h)}var HVe=ge({transform_:GVe});function KVe(t,e,r){ye(e%1===0,function(){return"bandPart(): numLower must be an integer, got "+e+"."}),ye(r%1===0,function(){return"bandPart(): numUpper must be an integer, got "+r+"."});var n=re(t,"a","bandPart");ye(n.rank>=2,function(){return"bandPart(): Rank must be at least 2, got "+n.rank+"."});var a=n.shape,s=gt(n.shape.slice(-2),2),o=s[0],u=s[1];if(!(e<=o))throw new Error("bandPart(): numLower ("+e+")"+(" must not be greater than the number of rows ("+o+")."));if(!(r<=u))throw new Error("bandPart(): numUpper ("+r+")"+(" must not be greater than the number of columns ("+u+")."));e<0&&(e=o),r<0&&(r=u);var l=it(g1(0,o,1,"int32"),[-1,1]),h=g1(0,u,1,"int32"),p=_r(l,h),v=jE(TD(p,Pn(+e,"int32")),Tte(p,Pn(-r,"int32"))),y=qm([o,u],n.dtype);return it(w1(BD(it(n,[-1,o,u])).map(function(S){return Pm(v,S,y)})),a)}var ZVe=ge({bandPart_:KVe});function JVe(t){var e;if(Array.isArray(t)){e=!1,ye(t!=null&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var r=t[0].shape[0],n=function(l){ye(t[l].shape[0]===r,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+("("+t[l].shape[0]+" vs. "+r+")")})},a=1;a<t.length;++a)n(a)}else e=!0,t=b1(t,t.shape[0],0).map(function(l){return CD(l,[0])});ye(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds "+("number of dimensions ("+t[0].shape[0]+").")});for(var s=[],o=t,u=function(l){s.push(Ee.tidy(function(){var h=o[l];if(l>0)for(var p=0;p<l;++p){var v=jt(En(jt(s[p],h)),s[p]);h=_r(h,v)}return wa(h,YE(h,"euclidean"))}))},a=0;a<t.length;++a)u(a);return e?w1(s,0):s}var YVe=ge({gramSchmidt_:JVe});function XVe(t,e){if(e===void 0&&(e=!1),ye(t.rank>=2,function(){return"qr() requires input tensor to have a rank >= 2, but got rank "+t.rank}),t.rank===2)return $ee(t,e);var r=t.shape.slice(0,t.shape.length-2).reduce(function(l,h){return l*h}),n=BD(it(t,[r,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),a=[],s=[];n.forEach(function(l){var h=gt($ee(l,e),2),p=h[0],v=h[1];a.push(p),s.push(v)});var o=it(w1(a,0),t.shape),u=it(w1(s,0),t.shape);return[o,u]}function $ee(t,e){return e===void 0&&(e=!1),Ee.tidy(function(){ye(t.shape.length===2,function(){return"qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor."});for(var r=t.shape[0],n=t.shape[1],a=Mte(r),s=Cm(t),o=p1([[1]],[1,1]),u=Cm(o),l=r>=n?n:r,h=function(v){var y,S=s,A=u,T=a;y=gt(Ee.tidy(function(){var I=Dn(s,[v,v],[r-v,1]),N=YE(I),D=Dn(s,[v,v],[1,1]),C=Pm(XE(D,0),p1([[-1]]),p1([[1]])),L=_r(D,jt(C,N)),z=wa(I,L);z.shape[0]===1?u=Cm(o):u=Za([o,Dn(z,[1,0],[z.shape[0]-1,z.shape[1]])],0);var $=$f(wa(Qr(C,L),N)),G=Dn(s,[v,0],[r-v,n]),j=jt($,u),K=cD(u);if(v===0)s=_r(G,Qr(j,Qr(K,G)));else{var M=_r(G,Qr(j,Qr(K,G)));s=Za([Dn(s,[0,0],[v,n]),M],0)}var f=cD(j),d=Dn(a,[0,v],[r,a.shape[1]-v]);if(v===0)a=_r(d,Qr(Qr(d,u),f));else{var g=_r(d,Qr(Qr(d,u),f));a=Za([Dn(a,[0,0],[r,v]),g],1)}return[u,s,a]}),3),u=y[0],s=y[1],a=y[2],kUe([S,A,T])},p=0;p<l;++p)h(p);return!e&&r>n&&(a=Dn(a,[0,0],[r,n]),s=Dn(s,[0,0],[n,n])),[a,s]})}var QVe=ge({qr_:XVe});var Da;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Da||(Da={}));function eWe(t,e,r){r===void 0&&(r=Da.SUM_BY_NONZERO_WEIGHTS);var n=re(t,"losses","computeWeightedLoss"),a=null;e!=null&&(a=re(e,"weights","computeWeightedLoss"));var s=a==null?n:jt(n,a);if(r===Da.NONE)return s;if(r===Da.SUM)return En(s);if(r===Da.MEAN){if(a==null)return UE(s);var o=n.size/a.size,u=wa(En(s),En(a));return o>1?wa(u,Pn(o)):u}if(r===Da.SUM_BY_NONZERO_WEIGHTS){if(a==null)return wa(En(s),Pn(n.size));var l=jt(a,td(n.shape)),h=zi(En(Lte(l,Pn(0))),"float32");return wa(En(s),h)}throw Error("Unknown reduction: "+r)}var jf=ge({computeWeightedLoss_:eWe});function tWe(t,e,r,n){n===void 0&&(n=Da.SUM_BY_NONZERO_WEIGHTS);var a=re(t,"labels","absoluteDifference"),s=re(e,"predictions","absoluteDifference"),o=null;r!=null&&(o=re(r,"weights","absoluteDifference")),go(a.shape,s.shape,"Error in absoluteDifference: ");var u=lo(_r(a,s));return jf(u,o,n)}var rWe=ge({absoluteDifference_:tWe});function nWe(t,e,r,n,a){a===void 0&&(a=Da.SUM_BY_NONZERO_WEIGHTS);var s=re(t,"labels","cosineDistance"),o=re(e,"predictions","cosineDistance"),u=null;n!=null&&(u=re(n,"weights","cosineDistance")),go(s.shape,o.shape,"Error in cosineDistance: ");var l=Pn(1),h=_r(l,En(jt(s,o),r,!0));return jf(h,u,a)}var iWe=ge({cosineDistance_:nWe});function aWe(t,e,r,n){n===void 0&&(n=Da.SUM_BY_NONZERO_WEIGHTS);var a=re(t,"labels","hingeLoss"),s=re(e,"predictions","hingeLoss"),o=null;r!=null&&(o=re(r,"weights","hingeLoss")),go(a.shape,s.shape,"Error in hingeLoss: ");var u=Pn(1);a=_r(jt(Pn(2),a),u);var l=e3(_r(u,jt(a,s)));return jf(l,o,n)}var sWe=ge({hingeLoss_:aWe});function oWe(t,e,r,n,a){n===void 0&&(n=1),a===void 0&&(a=Da.SUM_BY_NONZERO_WEIGHTS);var s=re(t,"labels","huberLoss"),o=re(e,"predictions","huberLoss"),u=null;r!=null&&(u=re(r,"weights","huberLoss")),go(s.shape,o.shape,"Error in huberLoss: ");var l=Pn(n),h=lo(_r(o,s)),p=Bte(h,l),v=_r(h,p),y=Mi(jt(Pn(.5),JE(p)),jt(l,v));return jf(y,u,a)}var uWe=ge({huberLoss_:oWe});function fWe(t,e,r,n,a){n===void 0&&(n=1e-7),a===void 0&&(a=Da.SUM_BY_NONZERO_WEIGHTS);var s=re(t,"labels","logLoss"),o=re(e,"predictions","logLoss"),u=null;r!=null&&(u=re(r,"weights","logLoss")),go(s.shape,o.shape,"Error in logLoss: ");var l=Pn(1),h=Pn(n),p=$f(jt(s,v1(Mi(o,h)))),v=jt(_r(l,s),v1(Mi(_r(l,o),h))),y=_r(p,v);return jf(y,u,a)}var lWe=ge({logLoss_:fWe});function cWe(t,e,r,n){n===void 0&&(n=Da.SUM_BY_NONZERO_WEIGHTS);var a=re(t,"labels","meanSquaredError"),s=re(e,"predictions","meanSquaredError"),o=null;r!=null&&(o=re(r,"weights","meanSquaredError")),go(a.shape,s.shape,"Error in meanSquaredError: ");var u=Wte(a,s);return jf(u,o,n)}var hWe=ge({meanSquaredError_:cWe});function dWe(t,e){var r=re(t,"labels","sigmoidCrossEntropyWithLogits"),n=re(e,"logits","sigmoidCrossEntropyWithLogits");go(r.shape,n.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=e3(n),s=jt(n,r),o=Ite(nd($f(lo(n))));return Mi(_r(a,s),o)}function pWe(t,e,r,n,a){n===void 0&&(n=0),a===void 0&&(a=Da.SUM_BY_NONZERO_WEIGHTS);var s=re(t,"multiClassLabels","sigmoidCrossEntropy"),o=re(e,"logits","sigmoidCrossEntropy"),u=null;if(r!=null&&(u=re(r,"weights","sigmoidCrossEntropy")),go(s.shape,o.shape,"Error in sigmoidCrossEntropy: "),n>0){var l=Pn(n),h=Pn(1),p=Pn(.5);s=Mi(jt(s,_r(h,l)),jt(p,l))}var v=dWe(s,o);return jf(v,u,a)}var mWe=ge({sigmoidCrossEntropy_:pWe});function vWe(t,e,r){if(r===void 0&&(r=-1),r===-1&&(r=e.rank-1),r!==e.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+("supported. Labels / logits was rank "+e.rank+" ")+("and dim was "+r));var n=zf(function(a,s,o){var u=!0,l=Ote(s,[r],u),h=_r(zi(s,"float32"),l);o([a,h]);var p=$f(jt(h,a)),v=En(p,[r]),y=function(S,A){var T=gt(A,2),I=T[0],N=T[1],D=ZE(S.shape,[r]);return[jt(it(S,D),_r(zi(I,"float32"),nd(N))),jt(it(S,D),_r(nd(N),zi(I,"float32")))]};return{value:v,gradFunc:y}});return n(t,e)}function gWe(t,e,r,n,a){n===void 0&&(n=0),a===void 0&&(a=Da.SUM_BY_NONZERO_WEIGHTS);var s=re(t,"onehotLabels","softmaxCrossEntropy"),o=re(e,"logits","softmaxCrossEntropy"),u=null;if(r!=null&&(u=re(r,"weights","softmaxCrossEntropy")),go(s.shape,o.shape,"Error in softmaxCrossEntropy: "),n>0){var l=Pn(n),h=Pn(1),p=Pn(s.shape[1]);s=Mi(jt(s,_r(h,l)),wa(l,p))}var v=vWe(s,o);return jf(v,u,a)}var yWe=ge({softmaxCrossEntropy_:gWe});function bWe(t,e,r,n){var a=re(t,"indices","sparseFillEmptyRows","int32"),s=re(e,"values","sparseFillEmptyRows"),o=re(r,"denseShape","sparseFillEmptyRows","int32"),u=re(n,"defaultValue","sparseFillEmptyRows",s.dtype);if(a.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        `+a.shape);if(s.rank!==1)throw new Error("Values should be Tensor1D but received shape "+s.shape);if(o.rank!==1)throw new Error("Dense shape should be Tensor1D but received shape "+o.shape);if(u.rank!==0)throw new Error("Default value should be a scalar but received shape "+u.shape);var l={indices:a,values:s,denseShape:o,defaultValue:u},h=Ee.runKernel(aLe,l);return{outputIndices:h[0],outputValues:h[1],emptyRowIndicator:h[2],reverseIndexMap:h[3]}}var wWe=ge({sparseFillEmptyRows_:bWe});function _We(t,e,r){var n=re(t,"inputIndices","sparseReshape","int32"),a=re(e,"inputShape","sparseReshape","int32"),s=re(r,"newShape","sparseReshape","int32");if(n.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        `+n.shape);if(a.rank!==1)throw new Error("Input shape should be Tensor1D but received shape "+a.shape);if(s.rank!==1)throw new Error("New shape should be Tensor1D but received shape "+s.shape);var o={inputIndices:n,inputShape:a,newShape:s},u=Ee.runKernel(sLe,o);return{outputIndices:u[0],outputShape:u[1]}}var xWe=ge({sparseReshape_:_We});function SWe(t,e,r){var n=re(t,"data","sparseSegmentMean"),a=re(e,"indices","sparseSegmentMean","int32"),s=re(r,"segmentIds","sparseSegmentMean","int32");if(n.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          `+a.shape);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          `+s.shape);var o={data:n,indices:a,segmentIds:s};return Ee.runKernel(oLe,o)}var EWe=ge({sparseSegmentMean_:SWe});function MWe(t,e,r){var n=re(t,"data","sparseSegmentSum"),a=re(e,"indices","sparseSegmentSum","int32"),s=re(r,"segmentIds","sparseSegmentSum","int32");if(n.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         `+a.shape);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         `+s.shape);var o={data:n,indices:a,segmentIds:s};return Ee.runKernel(uLe,o)}var AWe=ge({sparseSegmentSum_:MWe});function kWe(t,e,r,n,a,s,o,u){var l=re(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error("Data must be a vector, saw: "+l.shape);var h=re(e,"dataSplits","stringNGrams");if(h.dtype!=="int32")throw new Error("Data splits must be of datatype int32");var p={separator:r,nGramWidths:n,leftPad:a,rightPad:s,padWidth:o,preserveShortSequences:u},v={data:l,dataSplits:h},y=Ee.runKernel(hLe,v,p);return{nGrams:y[0],nGramsSplits:y[1]}}var TWe=ge({stringNGrams_:kWe});function NWe(t,e,r){r===void 0&&(r=!0);var n=re(t,"input","stringSplit","string"),a=re(e,"delimiter","stringSplit","string");if(n.rank!==1)throw new Error("Input should be Tensor1D but received shape "+n.shape);if(a.rank!==0)throw new Error("Delimiter should be a scalar but received shape "+a.shape);var s={skipEmpty:r},o={input:n,delimiter:a},u=Ee.runKernel(dLe,o,s);return{indices:u[0],values:u[1],shape:u[2]}}var IWe=ge({stringSplit_:NWe});function DWe(t,e){var r=re(t,"input","stringToHashBucketFast","string"),n={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");var a={input:r};return Ee.runKernel(pLe,a,n)}var OWe=ge({stringToHashBucketFast_:DWe});var RWe={fft:OD,ifft:VE,rfft:RD,irfft:Vte},CWe={hammingWindow:aVe,hannWindow:Zte,frame:Jte,stft:fVe},FWe={flipLeftRight:dVe,grayscaleToRGB:mVe,resizeNearestNeighbor:jVe,resizeBilinear:$Ve,rotateWithOffset:gVe,cropAndResize:cVe,nonMaxSuppression:bVe,nonMaxSuppressionAsync:IVe,nonMaxSuppressionWithScore:OVe,nonMaxSuppressionWithScoreAsync:CVe,nonMaxSuppressionPadded:BVe,nonMaxSuppressionPaddedAsync:PVe,threshold:WVe,transform:HVe},BWe={bandPart:ZVe,gramSchmidt:YVe,qr:QVe},LWe={absoluteDifference:rWe,computeWeightedLoss:jf,cosineDistance:iWe,hingeLoss:sWe,huberLoss:uWe,logLoss:lWe,meanSquaredError:hWe,sigmoidCrossEntropy:mWe,softmaxCrossEntropy:yWe},PWe={sparseFillEmptyRows:wWe,sparseReshape:xWe,sparseSegmentMean:EWe,sparseSegmentSum:AWe},qWe={stringNGrams:TWe,stringSplit:IWe,stringToHashBucketFast:OWe};var ta={__proto__:null,abs:lo,acos:YLe,acosh:QLe,add:Mi,addN:rPe,all:iPe,any:sPe,argMax:uPe,argMin:lPe,asin:hPe,asinh:pPe,atan:vPe,atan2:yPe,atanh:wPe,avgPool:gte,avgPool3d:NPe,basicLSTMCell:PPe,batchToSpaceND:yte,batchNorm:HE,batchNorm2d:UPe,batchNorm3d:WPe,batchNorm4d:HPe,bincount:bte,broadcastArgs:JPe,broadcastTo:RE,buffer:Yl,cast:zi,ceil:QPe,clipByValue:tqe,clone:Cm,complex:rd,concat:Za,concat1d:iqe,concat2d:sqe,concat3d:uqe,concat4d:lqe,conv1d:dqe,conv2d:KE,conv2dTranspose:vqe,conv3d:yqe,conv3dTranspose:xqe,cos:Eqe,cosh:Aqe,cumprod:Tqe,cumsum:Iqe,denseBincount:Oqe,depthToSpace:Cqe,depthwiseConv2d:ED,diag:Lqe,dilation2d:qqe,div:wa,divNoNan:Hqe,dot:Zqe,einsum:Yqe,elu:Ste,equal:xte,erf:e$e,euclideanNorm:l$e,exp:nd,expandDims:Qh,expm1:p$e,eye:Mte,fill:kD,floor:Ate,floorDiv:_te,gather:kte,greater:XE,greaterEqual:Tte,imag:QE,isFinite:S$e,isInf:M$e,isNaN:k$e,leakyRelu:Nte,less:I$e,lessEqual:TD,linspace:O$e,localResponseNormalization:C$e,log:v1,log1p:Ite,logSigmoid:$$e,logSoftmax:U$e,logSumExp:Ote,logicalAnd:jE,logicalNot:Rte,logicalOr:Cte,logicalXor:Z$e,lowerBound:Y$e,matMul:Qr,max:Bm,maxPool:Fte,maxPool3d:eze,maxPoolWithArgmax:rze,maximum:ize,mean:UE,meshgrid:sze,min:fD,minimum:Bte,mirrorPad:fze,mod:cze,moments:dze,mul:jt,multiRNNCell:mze,multinomial:gze,neg:$f,notEqual:Lte,oneHot:wze,ones:td,onesLike:xze,outerProduct:Eze,pad:_1,pad1d:kze,pad2d:Nze,pad3d:Dze,pad4d:Rze,pool:Pze,pow:AD,prelu:qte,print:$ze,prod:jze,rand:Vze,randomGamma:ije,randomNormal:$te,randomStandardNormal:oje,randomUniform:zte,range:g1,real:y1,reciprocal:cje,relu:e3,relu6:jte,reshape:it,reverse:id,reverse1d:vje,reverse2d:yje,reverse3d:wje,reverse4d:xje,round:Ute,rsqrt:Mje,scalar:Pn,selu:kje,separableConv2d:Nje,setdiff1dAsync:Dje,sigmoid:Fm,sign:Rje,sin:Fje,sinh:Lje,slice:Dn,slice1d:qje,slice2d:zje,slice3d:Uje,slice4d:Wje,softmax:Hje,softplus:Dte,spaceToBatchND:Pte,fft:OD,ifft:VE,irfft:Vte,rfft:RD,split:b1,sqrt:lD,square:JE,squaredDifference:Wte,squeeze:CD,stack:w1,step:Gte,stridedSlice:iUe,sub:_r,sum:En,tan:sUe,tanh:uD,tensor:FD,tensor1d:Jo,tensor2d:p1,tensor3d:oUe,tensor4d:uUe,tensor5d:fUe,tensor6d:lUe,tile:d1,topk:hUe,truncatedNormal:pUe,unique:vUe,unsortedSegmentSum:yUe,unstack:BD,upperBound:wUe,variable:_Ue,where:Pm,whereAsync:Hte,zeros:qm,zerosLike:MD,op:ge,OP_SCOPE_SUFFIX:vte,booleanMaskAsync:MUe,transpose:cD,norm:YE,movingAverage:IUe,scatterND:CUe,searchSorted:ND,sparseToDense:LUe,gatherND:qUe,dropout:jUe,enclosingPowerOfTwo:Kte,cosineWindow:LD,inTopKAsync:VUe,image:FWe,linalg:BWe,losses:LWe,spectral:RWe,fused:nVe,signal:CWe,sparse:PWe,string:qWe};var $We=function(t,e,r,n){switch(n===void 0&&(n=ta),t.op){case"BiasAdd":case"AddV2":case"Add":return[n.add(V("a",t,e,r),V("b",t,e,r))];case"AddN":return[n.addN(V("tensors",t,e,r))];case"FloorMod":case"Mod":return[n.mod(V("a",t,e,r),V("b",t,e,r))];case"Mul":return[n.mul(V("a",t,e,r),V("b",t,e,r))];case"RealDiv":case"Div":return[n.div(V("a",t,e,r),V("b",t,e,r))];case"DivNoNan":return[n.divNoNan(V("a",t,e,r),V("b",t,e,r))];case"FloorDiv":return[n.floorDiv(V("a",t,e,r),V("b",t,e,r))];case"Sub":return[n.sub(V("a",t,e,r),V("b",t,e,r))];case"Minimum":return[n.minimum(V("a",t,e,r),V("b",t,e,r))];case"Maximum":return[n.maximum(V("a",t,e,r),V("b",t,e,r))];case"Pow":return[n.pow(V("a",t,e,r),V("b",t,e,r))];case"SquaredDifference":return[n.squaredDifference(V("a",t,e,r),V("b",t,e,r))];default:throw TypeError("Node type "+t.op+" is not implemented")}};var zWe=function(t,e,r,n){switch(n===void 0&&(n=ta),t.op){case"Abs":case"ComplexAbs":return[n.abs(V("x",t,e,r))];case"Acos":return[n.acos(V("x",t,e,r))];case"Acosh":return[n.acosh(V("x",t,e,r))];case"Asin":return[n.asin(V("x",t,e,r))];case"Asinh":return[n.asinh(V("x",t,e,r))];case"Atan":return[n.atan(V("x",t,e,r))];case"Atan2":return[n.atan2(V("x",t,e,r),V("y",t,e,r))];case"Atanh":return[n.atanh(V("x",t,e,r))];case"Ceil":return[n.ceil(V("x",t,e,r))];case"Complex":return[n.complex(V("real",t,e,r),V("imag",t,e,r))];case"Cos":return[n.cos(V("x",t,e,r))];case"Cosh":return[n.cosh(V("x",t,e,r))];case"Elu":return[n.elu(V("x",t,e,r))];case"Erf":return[n.erf(V("x",t,e,r))];case"Exp":return[n.exp(V("x",t,e,r))];case"Expm1":return[n.expm1(V("x",t,e,r))];case"Floor":return[n.floor(V("x",t,e,r))];case"Log":return[n.log(V("x",t,e,r))];case"Log1p":return[n.log1p(V("x",t,e,r))];case"Imag":return[n.imag(V("x",t,e,r))];case"Neg":return[n.neg(V("x",t,e,r))];case"Reciprocal":return[n.reciprocal(V("x",t,e,r))];case"Real":return[n.real(V("x",t,e,r))];case"Relu":return[n.relu(V("x",t,e,r))];case"Round":return[n.round(V("x",t,e,r))];case"Selu":return[n.selu(V("x",t,e,r))];case"Sigmoid":return[n.sigmoid(V("x",t,e,r))];case"Sin":return[n.sin(V("x",t,e,r))];case"Sign":return[n.sign(V("x",t,e,r))];case"Sinh":return[n.sinh(V("x",t,e,r))];case"Softplus":return[n.softplus(V("x",t,e,r))];case"Sqrt":return[n.sqrt(V("x",t,e,r))];case"Square":return[n.square(V("x",t,e,r))];case"Tanh":return[n.tanh(V("x",t,e,r))];case"Tan":return[n.tan(V("x",t,e,r))];case"ClipByValue":return[n.clipByValue(V("x",t,e,r),V("clipValueMin",t,e,r),V("clipValueMax",t,e,r))];case"Relu6":return[n.relu6(V("x",t,e,r))];case"Rsqrt":return[n.rsqrt(ba(t.inputNames[0],e,r))];case"Prod":return[n.prod(V("x",t,e,r),V("axes",t,e,r))];case"LeakyRelu":return[n.leakyRelu(V("x",t,e,r),V("alpha",t,e,r))];case"Prelu":return[n.prelu(V("x",t,e,r),V("alpha",t,e,r))];case"IsNan":return[n.isNaN(ba(t.inputNames[0],e,r))];default:throw TypeError("Node type "+t.op+" is not implemented")}};function co(t,e,r){if(r===void 0&&(r=""),!(typeof t=="number"||typeof e=="number")){yt.util.assert(t.length===e.length,function(){return r+(" Shapes "+t+" and "+e+" must match")});for(var n=0;n<t.length;n++){var a=t[n],s=e[n];yt.util.assert(a<0||s<0||a===s,function(){return r+(" Shapes "+t+" and "+e+" must match")})}}}function zee(t){return!(typeof t=="number"||t.some(function(e){return e<0}))}function l1(t,e,r){var n=hD(t,r),a=!zee(n);if(a&&e.length===0)throw new Error("Tried to calculate elements of an empty list"+(" with non-fully-defined elementShape: "+n));if(a&&e.forEach(function(s){n=hD(s.shape,n)}),!zee(n))throw new Error("Non-fully-defined elementShape: "+n);return n}function hD(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error("Incompatible ranks during merge: "+t+" vs. "+e);for(var r=[],n=0;n<t.length;++n){var a=t[n],s=e[n];if(a>=0&&s>=0&&a!==s)throw new Error("Incompatible shape during merge: "+t+" vs. "+e);r[n]=a>=0?a:s}return r}var jWe=function(){function t(e,r,n,a,s,o,u){this.name=e,this.dtype=r,this.maxSize=n,this.elementShape=a,this.identicalElementShapes=s,this.dynamicSize=o,this.clearAfterRead=u,this.tensors=[],this.closed_=!1,this.idTensor=yt.scalar(0),yt.keep(this.idTensor)}return Object.defineProperty(t.prototype,"id",{get:function(){return this.idTensor.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closed",{get:function(){return this.closed_},enumerable:!0,configurable:!0}),t.prototype.clearAndClose=function(e){this.tensors.forEach(function(r){(e==null||!e.has(r.tensor.id))&&r.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()},t.prototype.size=function(){return this.tensors.length},t.prototype.read=function(e){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||e>=this.size())throw new Error("Tried to read from index "+e+", but array size is: "+this.size());var r=this.tensors[e];if(r.cleared)throw new Error("TensorArray "+this.name+": Could not read index "+e+" twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(r.cleared=!0),r.read=!0,r.tensor},t.prototype.readMany=function(e){var r=this;return e.map(function(n){return r.read(n)})},t.prototype.write=function(e,r){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index "+e+", but array is not resizeable and size is: "+this.maxSize);var n=this.tensors[e]||{};if(r.dtype!==this.dtype)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+`,
          because the value dtype is `+r.dtype+", but TensorArray dtype is "+this.dtype+".");if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=r.shape),co(this.elementShape,r.shape,"TensorArray "+this.name+": Could not write to TensorArray index "+e+"."),n.read)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been read.");if(n.written)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been written.");n.tensor=r,yt.keep(r),n.written=!0,this.tensors[e]=n},t.prototype.writeMany=function(e,r){var n=this;if(e.length!==r.length)throw new Error("TensorArray "+this.name+": could not write multiple tensors,"+("because the index size: "+e.length+" is not the same as tensors size: "+r.length+"."));e.forEach(function(a,s){return n.write(a,r[s])})},t.prototype.gather=function(e,r){if(!!r&&r!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but gather requested dtype "+r);if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(e.length===0)return yt.tensor([],[0].concat(this.elementShape));var a=this.readMany(e);return co(this.elementShape,a[0].shape,"TensorArray shape mismatch: "),yt.stack(a,0)},t.prototype.concat=function(e){if(!!e&&e!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but concat requested dtype "+e);if(this.size()===0)return yt.tensor([],[0].concat(this.elementShape));for(var r=[],n=0;n<this.size();n++)r.push(n);var a=this.readMany(r);return co(this.elementShape,a[0].shape,"TensorArray shape mismatch: tensor array shape ("+this.elementShape+") vs first tensor shape ("+a[0].shape+")"),yt.concat(a,0)},t.prototype.scatter=function(e,r){if(r.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+r.dtype);if(e.length!==r.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+e.length+" vs. "+r.shape[0]);var n=Math.max.apply(Math,$i(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size ("+n+"  vs. "+this.maxSize+")");this.writeMany(e,yt.unstack(r,0))},t.prototype.split=function(e,r){var n=this;if(r.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+r.dtype);var a=0,s=e.map(function(p){return a+=p,a});if(a!==r.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        `+a+", and tensor's shape is: "+r.shape);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths ("+this.maxSize+" vs. "+e.length+"), and the TensorArray is not marked as dynamically resizeable");var o=a===0?0:r.size/a,u=[];yt.tidy(function(){r=yt.reshape(r,[1,a,o]);for(var p=0;p<e.length;++p){var v=p===0?0:s[p-1],y=[0,v,0],S=[1,e[p],o];u[p]=yt.reshape(yt.slice(r,y,S),n.elementShape)}return u});for(var l=[],h=0;h<e.length;h++)l[h]=h;this.writeMany(l,u)},t}(),t3=function(){function t(e,r,n,a){a===void 0&&(a=-1),this.tensors=e,this.elementShape=r,this.elementDtype=n,e!=null&&e.forEach(function(s){if(n!==s.dtype)throw new Error("Invalid data types; op elements "+n+", but list elements "+s.dtype);co(r,s.shape,"TensorList shape mismatch: "),yt.keep(s)}),this.idTensor=yt.scalar(0),this.maxNumElements=a,yt.keep(this.idTensor)}return Object.defineProperty(t.prototype,"id",{get:function(){return this.idTensor.id},enumerable:!0,configurable:!0}),t.prototype.copy=function(){return new t($i(this.tensors),this.elementShape,this.elementDtype)},t.prototype.clearAndClose=function(e){this.tensors.forEach(function(r){(e==null||!e.has(r.id))&&r.dispose()}),this.tensors.length=0,this.idTensor.dispose()},t.prototype.size=function(){return this.tensors.length},t.prototype.stack=function(e,r,n){var a=this;if(n===void 0&&(n=-1),r!==this.elementDtype)throw new Error("Invalid data types; op elements "+r+", but list elements "+this.elementDtype);if(n!==-1&&this.tensors.length!==n)throw new Error("Operation expected a list with "+n+" elements but got a list with "+this.tensors.length+" elements.");co(e,this.elementShape,"TensorList shape mismatch: ");var s=l1(this.elementShape,this.tensors,e);return yt.tidy(function(){var o=a.tensors.map(function(u){return yt.reshape(u,s)});return yt.stack(o,0)})},t.prototype.popBack=function(e,r){if(r!==this.elementDtype)throw new Error("Invalid data types; op elements "+r+", but list elements "+this.elementDtype);if(this.size()===0)throw new Error("Trying to pop from an empty list.");var n=l1(this.elementShape,this.tensors,e),a=this.tensors.pop();return co(a.shape,e,"TensorList shape mismatch: "),yt.reshape(a,n)},t.prototype.pushBack=function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements "+e.dtype+", but list elements "+this.elementDtype);if(co(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");yt.keep(e),this.tensors.push(e)},t.prototype.resize=function(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: "+e);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error("TensorListResize input size "+e+" is greater maxNumElement "+this.maxNumElements+".");var r=new t([],this.elementShape,this.elementDtype,this.maxNumElements);r.tensors.length=e;for(var n=0;n<Math.min(this.tensors.length,e);++n)r.tensors[n]=this.tensors[n];return r},t.prototype.getItem=function(e,r,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements "+n+", but list elements "+this.elementDtype);if(e<0||e>this.tensors.length)throw new Error("Trying to access element "+e+" in a list with "+this.tensors.length+" elements.");if(this.tensors[e]==null)throw new Error("element at index "+e+" is null.");co(this.tensors[e].shape,r,"TensorList shape mismatch: ");var a=l1(this.elementShape,this.tensors,r);return yt.reshape(this.tensors[e],a)},t.prototype.setItem=function(e,r){if(r.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements "+r.dtype+", but list elements "+this.elementDtype);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error("Trying to set element "+e+" in a list with max "+this.maxNumElements+" elements.");co(this.elementShape,r.shape,"TensorList shape mismatch: "),yt.keep(r),this.tensors[e]=r},t.prototype.gather=function(e,r,n){var a=this;if(r!==this.elementDtype)throw new Error("Invalid data types; op elements "+r+", but list elements "+this.elementDtype);co(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var s=l1(this.elementShape,this.tensors,n);return e.length===0?yt.tensor([],[0].concat(s)):yt.tidy(function(){var o=e.map(function(u){return yt.reshape(a.tensors[u],s)});return yt.stack(o,0)})},t.prototype.concat=function(e,r){var n=this;if(!!e&&e!==this.elementDtype)throw new Error("TensorList dtype is "+this.elementDtype+" but concat requested dtype "+e);co(this.elementShape,r,"TensorList shape mismatch: ");var a=l1(this.elementShape,this.tensors,r);return this.size()===0?yt.tensor([],[0].concat(a)):yt.tidy(function(){var s=n.tensors.map(function(o){return yt.reshape(o,a)});return yt.concat(s,0)})},t}();function UWe(t,e,r){var n=t.dtype;if(t.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: "+t.shape);if(t.dtype!==r)throw new Error("Invalid data types; op elements "+t.dtype+", but list elements "+r);var a=t.shape.slice(1);co(a,e,"TensorList shape mismatch: ");var s=yt.unstack(t);return new t3(s,e,n)}function VWe(t,e,r,n){return new t3([],t,e,n)}function WWe(t,e,r,n){if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+e.length+" vs. "+t.shape[0]);var a=Math.max.apply(Math,$i(e));if(n!=null&&n!==-1&&a>=n)throw new Error("Max index must be < array size ("+a+"  vs. "+n+")");var s=new t3([],r,t.dtype,n),o=yt.unstack(t,0);return e.forEach(function(u,l){s.setItem(u,o[l])}),s}function GWe(t,e,r){var n=0,a=e.map(function(v){return n+=v,n});if(n!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        `+n+", and tensor's shape is: "+t.shape);for(var s=t.shape.slice(1),o=hD(s,r),u=n===0?0:t.size/n,l=yt.tidy(function(){var v=[];t=yt.reshape(t,[1,n,u]);for(var y=0;y<e.length;++y){var S=y===0?0:a[y-1],A=[0,S,0],T=[1,e[y],u];v[y]=yt.reshape(yt.slice(t,A,T),o)}return t.dispose(),v}),h=new t3([],r,t.dtype,e.length),p=0;p<l.length;p++)h.setItem(p,l[p]);return h}var HWe=void 0,KWe=function(t,e,r){return on(HWe,void 0,void 0,function(){var n,a,s,o,h,y,u,l,h,p,v,y,S,A,T,T,D,I,D,N,D,D,D,ie,C,we,L,z,$,G,j,K,U,xe,M,f,H,d,Y,X,g,m,b,J,fe,E,me,k,vt,w,qt,Te,c,_,R,O,F,ee,U,xe,at,ee,H,we,le,at,J,fe,we,Q,at,we,ue,B,Q,q,at,Y,X,we,ue,at,ee,we,ue,Q,at,be,we,ue,at,me,at,vt,we,ee,xe,at,ee,we,le,at,qt,we,Te,at,ee,at,ee,ie,tt,ae;return en(this,function(de){switch(de.label){case 0:switch(n=t.op,n){case"If":return[3,1];case"StatelessIf":return[3,1];case"While":return[3,3];case"StatelessWhile":return[3,3];case"LoopCond":return[3,9];case"Switch":return[3,10];case"Merge":return[3,12];case"Enter":return[3,13];case"Exit":return[3,14];case"NextIteration":return[3,15];case"TensorArrayV3":return[3,16];case"TensorArrayWriteV3":return[3,17];case"TensorArrayReadV3":return[3,18];case"TensorArrayGatherV3":return[3,19];case"TensorArrayScatterV3":return[3,20];case"TensorArrayConcatV3":return[3,21];case"TensorArraySplitV3":return[3,22];case"TensorArraySizeV3":return[3,23];case"TensorArrayCloseV3":return[3,24];case"TensorListSetItem":return[3,25];case"TensorListGetItem":return[3,26];case"TensorListScatterV2":return[3,27];case"TensorListScatter":return[3,27];case"TensorListReserve":return[3,28];case"EmptyTensorList":return[3,28];case"TensorListGather":return[3,29];case"TensorListStack":return[3,30];case"TensorListFromTensor":return[3,31];case"TensorListConcat":return[3,32];case"TensorListConcatV2":return[3,32];case"TensorListPushBack":return[3,33];case"TensorListPopBack":return[3,34];case"TensorListSplit":return[3,35];case"TensorListLength":return[3,36];case"TensorListResize":return[3,37]}return[3,38];case 1:return a=V("thenBranch",t,e,r),s=V("elseBranch",t,e,r),o=V("cond",t,e,r),h=V("args",t,e,r),[4,o.data()];case 2:return y=de.sent(),y[0]?[2,r.functionMap[a].executeFunctionAsync(h,r.tensorArrayMap,r.tensorListMap)]:[2,r.functionMap[s].executeFunctionAsync(h,r.tensorArrayMap,r.tensorListMap)];case 3:return u=V("body",t,e,r),l=V("cond",t,e,r),h=V("args",t,e,r),[4,r.functionMap[l].executeFunctionAsync(h,r.tensorArrayMap,r.tensorListMap)];case 4:return p=de.sent(),v=h.map(function(Ze){return Ze.id}),[4,p[0].data()];case 5:y=de.sent(),p.forEach(function(Ze){!Ze.kept&&v.indexOf(Ze.id)===-1&&Ze.dispose()}),S=h,A=function(){var Ze,he,Se;return en(this,function(At){switch(At.label){case 0:return Ze=S,[4,r.functionMap[u].executeFunctionAsync(S,r.tensorArrayMap,r.tensorListMap)];case 1:return S=At.sent(),he=S.map(function(_e){return _e.id}),Ze.forEach(function(_e){!_e.kept&&v.indexOf(_e.id)===-1&&he.indexOf(_e.id)===-1&&_e.dispose()}),[4,r.functionMap[l].executeFunctionAsync(S,r.tensorArrayMap,r.tensorListMap)];case 2:return Se=At.sent(),[4,Se[0].data()];case 3:return y=At.sent(),Se.forEach(function(_e){!_e.kept&&v.indexOf(_e.id)===-1&&he.indexOf(_e.id)===-1&&_e.dispose()}),[2]}})},de.label=6;case 6:return y[0]?[5,A()]:[3,8];case 7:return de.sent(),[3,6];case 8:return[2,S];case 9:return T=V("pred",t,e,r),[2,[qf(T)]];case 10:return T=V("pred",t,e,r),D=V("data",t,e,r),D.kept||(D=qf(D)),[4,T.data()];case 11:return[2,de.sent()[0]?[void 0,D]:[D,void 0]];case 12:return I=t.inputNames.find(function(Ze){return ba(Ze,e,r)!==void 0}),I?(D=ba(I,e,r),[2,[qf(D)]]):[2,void 0];case 13:return N=V("frameName",t,e,r),D=V("tensor",t,e,r),r.enterFrame(N),[2,[qf(D)]];case 14:return D=V("tensor",t,e,r),r.exitFrame(),[2,[qf(D)]];case 15:return D=V("tensor",t,e,r),r.nextIteration(),[2,[qf(D)]];case 16:return ie=V("size",t,e,r),C=V("dtype",t,e,r),we=V("elementShape",t,e,r),L=V("dynamicSize",t,e,r),z=V("clearAfterRead",t,e,r),$=V("identicalElementShapes",t,e,r),G=V("name",t,e,r),j=new jWe(G,C,ie,we,$,L,z),r.addTensorArray(j),[2,[j.idTensor,yt.scalar(1)]];case 17:return K=V("tensorArrayId",t,e,r),U=V("index",t,e,r),xe=V("tensor",t,e,r),M=r.getTensorArray(K.id),M.write(U,xe),[2,[M.idTensor]];case 18:return f=V("tensorArrayId",t,e,r),H=V("index",t,e,r),d=r.getTensorArray(f.id),[2,[d.read(H)]];case 19:return Y=V("tensorArrayId",t,e,r),X=V("indices",t,e,r),g=V("dtype",t,e,r),m=r.getTensorArray(Y.id),[2,[m.gather(X,g)]];case 20:return b=V("tensorArrayId",t,e,r),J=V("indices",t,e,r),fe=V("tensor",t,e,r),E=r.getTensorArray(b.id),E.scatter(J,fe),[2,[E.idTensor]];case 21:return me=V("tensorArrayId",t,e,r),k=r.getTensorArray(me.id),vt=V("dtype",t,e,r),[2,[k.concat(vt)]];case 22:return w=V("tensorArrayId",t,e,r),qt=V("tensor",t,e,r),Te=V("lengths",t,e,r),c=r.getTensorArray(w.id),c.split(Te,qt),[2,[c.idTensor]];case 23:return _=V("tensorArrayId",t,e,r),R=r.getTensorArray(_.id),[2,[yt.scalar(R.size(),"int32")]];case 24:return O=V("tensorArrayId",t,e,r),F=r.getTensorArray(O.id),F.clearAndClose(),[2,[F.idTensor]];case 25:return ee=V("tensorListId",t,e,r),U=V("index",t,e,r),xe=V("tensor",t,e,r),at=r.getTensorList(ee.id),at.setItem(U,xe),[2,[at.idTensor]];case 26:return ee=V("tensorListId",t,e,r),H=V("index",t,e,r),we=V("elementShape",t,e,r),le=V("elementDType",t,e,r),at=r.getTensorList(ee.id),[2,[at.getItem(H,we,le)]];case 27:return J=V("indices",t,e,r),fe=V("tensor",t,e,r),we=V("elementShape",t,e,r),Q=V("numElements",t,e,r),at=WWe(fe,J,we,Q),r.addTensorList(at),[2,[at.idTensor]];case 28:return we=V("elementShape",t,e,r),ue=V("elementDType",t,e,r),B=void 0,t.op==="TensorListReserve"?B="numElements":B="maxNumElements",Q=V(B,t,e,r),q=t.op==="TensorListReserve"?-1:Q,at=VWe(we,ue,Q,q),r.addTensorList(at),[2,[at.idTensor]];case 29:return Y=V("tensorListId",t,e,r),X=V("indices",t,e,r),we=V("elementShape",t,e,r),ue=V("elementDType",t,e,r),at=r.getTensorList(Y.id),[2,[at.gather(X,ue,we)]];case 30:return ee=V("tensorListId",t,e,r),we=V("elementShape",t,e,r),ue=V("elementDType",t,e,r),Q=V("numElements",t,e,r),at=r.getTensorList(ee.id),[2,[at.stack(we,ue,Q)]];case 31:return be=V("tensor",t,e,r),we=V("elementShape",t,e,r),ue=V("elementDType",t,e,r),at=UWe(be,we,ue),r.addTensorList(at),[2,[at.idTensor]];case 32:return me=V("tensorListId",t,e,r),at=r.getTensorList(me.id),vt=V("dtype",t,e,r),we=V("elementShape",t,e,r),[2,[at.concat(vt,we)]];case 33:return ee=V("tensorListId",t,e,r),xe=V("tensor",t,e,r),at=r.getTensorList(ee.id),at.pushBack(xe),[2,[at.idTensor]];case 34:return ee=V("tensorListId",t,e,r),we=V("elementShape",t,e,r),le=V("elementDType",t,e,r),at=r.getTensorList(ee.id),[2,[at.popBack(we,le)]];case 35:return qt=V("tensor",t,e,r),we=V("elementShape",t,e,r),Te=V("lengths",t,e,r),at=GWe(qt,Te,we),r.addTensorList(at),[2,[at.idTensor]];case 36:return ee=V("tensorListId",t,e,r),at=r.getTensorList(ee.id),[2,[yt.scalar(at.size(),"int32")]];case 37:return ee=V("tensorListId",t,e,r),ie=V("size",t,e,r),tt=r.getTensorList(ee.id),ae=tt.resize(ie),r.addTensorList(ae),[2,[ae.idTensor]];case 38:throw TypeError("Node type "+t.op+" is not implemented")}})})};function jee(t,e,r){var n=gt(V("fusedOps",t,e,r),2),a=n[0],s=n[1],o=a==="biasadd",u=!o,l=s==="prelu",h=a==="fusedbatchnorm",p=V("numArgs",t,e,r);if(o){if(l&&p!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!l&&o&&p!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(h)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");var v=V("strides",t,e,r),y=IE(t,e,r),S=V("dataFormat",t,e,r).toUpperCase(),A=V("dilations",t,e,r),T=gt(V("args",t,e,r),2),I=T[0],N=T[1];u&&(N=I,I=void 0);var D=V("leakyreluAlpha",t,e,r);return{stride:v,pad:y,dataFormat:S,dilations:A,biasArg:I,preluArg:N,activationFunc:s,leakyreluAlpha:D}}var ZWe=function(t,e,r,n){switch(n===void 0&&(n=ta),t.op){case"Conv1D":{var a=V("stride",t,e,r),s=V("pad",t,e,r),o=V("dataFormat",t,e,r).toUpperCase(),u=V("dilation",t,e,r);return[n.conv1d(V("x",t,e,r),V("filter",t,e,r),a,s,o,u)]}case"Conv2D":{var a=V("strides",t,e,r),s=IE(t,e,r),o=V("dataFormat",t,e,r).toUpperCase(),l=V("dilations",t,e,r);return[n.conv2d(V("x",t,e,r),V("filter",t,e,r),[a[1],a[2]],s,o,[l[1],l[2]])]}case"_FusedConv2D":{var h=jee(t,e,r),a=h.stride,s=h.pad,o=h.dataFormat,l=h.dilations,p=h.biasArg,v=h.preluArg,y=h.activationFunc,S=h.leakyreluAlpha;return[n.fused.conv2d({x:V("x",t,e,r),filter:V("filter",t,e,r),strides:[a[1],a[2]],pad:s,dataFormat:o,dilations:[l[1],l[2]],bias:p,activation:y,preluActivationWeights:v,leakyreluAlpha:S})]}case"FusedDepthwiseConv2dNative":{var A=jee(t,e,r),a=A.stride,s=A.pad,o=A.dataFormat,l=A.dilations,p=A.biasArg,v=A.preluArg,y=A.activationFunc,S=A.leakyreluAlpha;return[n.fused.depthwiseConv2d({x:V("x",t,e,r),filter:V("filter",t,e,r),strides:[a[1],a[2]],pad:s,dataFormat:o,dilations:[l[1],l[2]],bias:p,activation:y,preluActivationWeights:v,leakyreluAlpha:S})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{var T=V("outputShape",t,e,r),a=V("strides",t,e,r),s=IE(t,e,r);return[n.conv2dTranspose(V("x",t,e,r),V("filter",t,e,r),T,[a[1],a[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{var a=V("strides",t,e,r),s=IE(t,e,r),l=V("dilations",t,e,r),o=V("dataFormat",t,e,r).toUpperCase();return[n.depthwiseConv2d(V("input",t,e,r),V("filter",t,e,r),[a[1],a[2]],s,o,[l[1],l[2]])]}case"Conv3D":{var a=V("strides",t,e,r),s=V("pad",t,e,r),o=V("dataFormat",t,e,r).toUpperCase(),l=V("dilations",t,e,r);return[n.conv3d(V("x",t,e,r),V("filter",t,e,r),[a[1],a[2],a[3]],s,o,[l[1],l[2],l[3]])]}case"AvgPool":{var a=V("strides",t,e,r),s=V("pad",t,e,r),I=V("kernelSize",t,e,r);return[n.avgPool(V("x",t,e,r),[I[1],I[2]],[a[1],a[2]],s)]}case"MaxPool":{var a=V("strides",t,e,r),s=V("pad",t,e,r),I=V("kernelSize",t,e,r);return[n.maxPool(V("x",t,e,r),[I[1],I[2]],[a[1],a[2]],s)]}case"MaxPoolWithArgmax":{var a=V("strides",t,e,r),s=V("pad",t,e,r),I=V("kernelSize",t,e,r),N=V("includeBatchInIndex",t,e,r),D=n.maxPoolWithArgmax(V("x",t,e,r),[I[1],I[2]],[a[1],a[2]],s,N),C=D.result,L=D.indexes;return[C,L]}case"AvgPool3D":{var a=V("strides",t,e,r),s=V("pad",t,e,r),I=V("kernelSize",t,e,r);return[n.avgPool3d(V("x",t,e,r),[I[1],I[2],I[3]],[a[1],a[2],a[3]],s)]}case"MaxPool3D":{var a=V("strides",t,e,r),s=V("pad",t,e,r),I=V("kernelSize",t,e,r);return[n.maxPool3d(V("x",t,e,r),[I[1],I[2],I[3]],[a[1],a[2],a[3]],s)]}case"Dilation2D":{var z=V("strides",t,e,r),s=V("pad",t,e,r),l=V("dilations",t,e,r),$=z[1],G=z[2],j=l[1],K=l[2];return[n.dilation2d(V("x",t,e,r),V("filter",t,e,r),[$,G],s,[j,K],"NHWC")]}default:throw TypeError("Node type "+t.op+" is not implemented")}};var JWe=function(t,e,r,n){switch(n===void 0&&(n=ta),t.op){case"Fill":{var a=V("shape",t,e,r),s=V("dtype",t,e,r),o=V("value",t,e,r);return[n.fill(a,o,s)]}case"LinSpace":{var u=V("start",t,e,r),l=V("stop",t,e,r),h=V("num",t,e,r);return[n.linspace(u,l,h)]}case"Multinomial":{var p=V("logits",t,e,r),v=V("numSamples",t,e,r),y=V("seed",t,e,r);return[n.multinomial(p,v,y)]}case"OneHot":{var S=V("indices",t,e,r),A=V("depth",t,e,r),T=V("onValue",t,e,r),I=V("offValue",t,e,r);return[n.oneHot(S,A,T,I)]}case"Ones":return[n.ones(V("shape",t,e,r),V("dtype",t,e,r))];case"OnesLike":return[n.onesLike(V("x",t,e,r))];case"RandomStandardNormal":return[n.randomStandardNormal(V("shape",t,e,r),V("dtype",t,e,r),V("seed",t,e,r))];case"RandomUniform":return[n.randomUniform(V("shape",t,e,r),V("minval",t,e,r),V("maxval",t,e,r),V("dtype",t,e,r))];case"Range":{var u=V("start",t,e,r),l=V("stop",t,e,r),N=V("step",t,e,r);return[n.range(u,l,N,V("dtype",t,e,r))]}case"TruncatedNormal":{var a=V("shape",t,e,r),D=V("mean",t,e,r),C=V("stdDev",t,e,r),y=V("seed",t,e,r);return[n.truncatedNormal(a,D,C,V("dtype",t,e,r),y)]}case"Zeros":return[n.zeros(V("shape",t,e,r),V("dtype",t,e,r))];case"ZerosLike":return[n.zerosLike(V("x",t,e,r))];default:throw TypeError("Node type "+t.op+" is not implemented")}},YWe=void 0;function zI(t,e,r){var n=V("boxes",t,e,r),a=V("scores",t,e,r),s=V("maxOutputSize",t,e,r),o=V("iouThreshold",t,e,r),u=V("scoreThreshold",t,e,r),l=V("softNmsSigma",t,e,r);return{boxes:n,scores:a,maxOutputSize:s,iouThreshold:o,scoreThreshold:u,softNmsSigma:l}}var XWe=function(t,e,r,n,a){return a===void 0&&(a=ta),on(YWe,void 0,void 0,function(){var s,o,v,y,S,A,T,u,N,l,v,y,S,A,T,h,N,p,v,y,S,A,T,I,N;return en(this,function(D){switch(D.label){case 0:switch(s=t.op,s){case"NonMaxSuppressionV5":return[3,1];case"NonMaxSuppressionV4":return[3,3];case"NonMaxSuppressionV3":return[3,5];case"NonMaxSuppressionV2":return[3,5];case"Where":return[3,7];case"ListDiff":return[3,9]}return[3,10];case 1:return o=zI(t,e,r),v=o.boxes,y=o.scores,S=o.maxOutputSize,A=o.iouThreshold,T=o.scoreThreshold,u=o.softNmsSigma,[4,a.image.nonMaxSuppressionWithScoreAsync(v,y,S,A,T,u)];case 2:return N=D.sent(),[2,[N.selectedIndices,N.selectedScores]];case 3:return l=zI(t,e,r),v=l.boxes,y=l.scores,S=l.maxOutputSize,A=l.iouThreshold,T=l.scoreThreshold,h=V("padToMaxOutputSize",t,e,r),[4,a.image.nonMaxSuppressionPaddedAsync(v,y,S,A,T,h)];case 4:return N=D.sent(),[2,[N.selectedIndices,N.validOutputs]];case 5:return p=zI(t,e,r),v=p.boxes,y=p.scores,S=p.maxOutputSize,A=p.iouThreshold,T=p.scoreThreshold,[4,a.image.nonMaxSuppressionAsync(v,y,S,A,T)];case 6:return[2,[D.sent()]];case 7:return I=a.cast(V("condition",t,e,r),"bool"),[4,a.whereAsync(I)];case 8:return N=[D.sent()],I.dispose(),[2,N];case 9:return[2,a.setdiff1dAsync(V("x",t,e,r),V("y",t,e,r))];case 10:throw TypeError("Node type "+t.op+" is not implemented")}})})};var QWe=function(t,e,r,n){switch(n===void 0&&(n=ta),t.op){case"LowerBound":{var a=V("sortedSequence",t,e,r),s=V("values",t,e,r);return[n.lowerBound(a,s)]}case"TopKV2":{var o=V("x",t,e,r),u=V("k",t,e,r),l=V("sorted",t,e,r),h=n.topk(o,u,l);return[h.values,h.indices]}case"UpperBound":{var a=V("sortedSequence",t,e,r),s=V("values",t,e,r);return[n.upperBound(a,s)]}case"Unique":{var o=V("x",t,e,r),h=n.unique(o);return[h.values,h.indices]}case"UniqueV2":{var o=V("x",t,e,r),p=V("axis",t,e,r),h=n.unique(o,p);return[h.values,h.indices]}default:throw TypeError("Node type "+t.op+" is not implemented")}};var eGe=function(t,e,r,n){switch(n===void 0&&(n=ta),t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":var a=V("default",t,e,r);return[ba(t.name,e,r)||a];case"Placeholder":return[ba(t.name,e,r)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{var s=V("x",t,e,r);return[qf(s)]}case"IdentityN":return V("x",t,e,r).map(function(y){return qf(y)});case"Snapshot":var o=V("x",t,e,r);return[qf(o)];case"Shape":return[n.tensor1d(V("x",t,e,r).shape,"int32")];case"ShapeN":return V("x",t,e,r).map(function(y){return n.tensor1d(y.shape)});case"Size":return[n.scalar(V("x",t,e,r).size,"int32")];case"Rank":return[n.scalar(V("x",t,e,r).rank,"int32")];case"NoOp":return[n.scalar(1)];case"Print":var u=V("x",t,e,r),l=V("data",t,e,r),h=V("message",t,e,r),p=V("summarize",t,e,r);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(h);for(var v=0;v<l.length;v++)console.log(Array.prototype.slice.call(l[v].dataSync()).slice(0,p));return[u];default:throw TypeError("Node type "+t.op+" is not implemented")}},tGe=function(){function t(e,r){this.keyDType=e,this.valueDType=r,this.handle=yt.scalar(0),this.tensorMap=new Map,yt.keep(this.handle)}return Object.defineProperty(t.prototype,"id",{get:function(){return this.handle.id},enumerable:!0,configurable:!0}),t.prototype.clearAndClose=function(){this.tensorMap.forEach(function(e){return e.dispose()}),this.tensorMap.clear(),this.handle.dispose()},t.prototype.size=function(){return this.tensorMap.size},t.prototype.tensorSize=function(){return Pn(this.size(),"int32")},t.prototype.import=function(e,r){return on(this,void 0,void 0,function(){var n,a=this;return en(this,function(s){switch(s.label){case 0:return this.checkKeyAndValueTensor(e,r),[4,e.data()];case 1:return n=s.sent(),this.tensorMap.forEach(function(o){return o.dispose()}),this.tensorMap.clear(),[2,yt.tidy(function(){var o=yt.unstack(r),u=n.length,l=o.length;yt.util.assert(u===l,function(){return"The number of elements doesn't match, keys has "+(u+" elements, the values has "+l+" ")+"elements."});for(var h=0;h<u;h++){var p=n[h],v=o[h];yt.keep(v),a.tensorMap.set(p,v)}return a.handle})]}})})},t.prototype.find=function(e,r){return on(this,void 0,void 0,function(){var n,a=this;return en(this,function(s){switch(s.label){case 0:return this.checkKeyAndValueTensor(e,r),[4,e.data()];case 1:return n=s.sent(),[2,yt.tidy(function(){for(var o=[],u=0;u<n.length;u++){var l=n[u],h=a.findWithDefault(l,r);o.push(h)}return yt.stack(o)})]}})})},t.prototype.findWithDefault=function(e,r){var n=this.tensorMap.get(e);return n!=null?n:r},t.prototype.checkKeyAndValueTensor=function(e,r){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype "+this.keyDType+", but got "+(""+e.dtype));if(r.dtype!==this.valueDType)throw new Error("Expect value dtype "+this.valueDType+", but got "+(""+r.dtype))},t}(),rGe=void 0,nGe=function(t,e,r,n){return on(rGe,void 0,void 0,function(){var a,s,o,v,p,l,u,v,p,l,h,v,p,v;return en(this,function(y){switch(y.label){case 0:switch(a=t.op,a){case"HashTable":return[3,1];case"HashTableV2":return[3,1];case"LookupTableImport":return[3,2];case"LookupTableImportV2":return[3,2];case"LookupTableFind":return[3,4];case"LookupTableFindV2":return[3,4];case"LookupTableSize":return[3,6];case"LookupTableSizeV2":return[3,6]}return[3,7];case 1:return s=V("keyDType",t,e,r),o=V("valueDType",t,e,r),v=new tGe(s,o),n.addHashTable(t.name,v),[2,[v.handle]];case 2:return p=V("tableHandle",t,e,r,n),l=V("keys",t,e,r),u=V("values",t,e,r),v=n.getHashTableById(p.id),[4,v.import(l,u)];case 3:return[2,[y.sent()]];case 4:return p=V("tableHandle",t,e,r,n),l=V("keys",t,e,r),h=V("defaultValue",t,e,r),v=n.getHashTableById(p.id),[4,v.find(l,h)];case 5:return[2,[y.sent()]];case 6:return p=V("tableHandle",t,e,r,n),v=n.getHashTableById(p.id),[2,[v.tensorSize()]];case 7:throw TypeError("Node type "+t.op+" is not implemented")}})})};var iGe=function(t,e,r,n){switch(n===void 0&&(n=ta),t.op){case"ResizeBilinear":{var a=V("images",t,e,r),s=V("size",t,e,r),o=V("alignCorners",t,e,r),u=V("halfPixelCenters",t,e,r);return[n.image.resizeBilinear(a,[s[0],s[1]],o,u)]}case"ResizeNearestNeighbor":{var a=V("images",t,e,r),s=V("size",t,e,r),o=V("alignCorners",t,e,r),u=V("halfPixelCenters",t,e,r);return[n.image.resizeNearestNeighbor(a,[s[0],s[1]],o,u)]}case"CropAndResize":{var l=V("image",t,e,r),h=V("boxes",t,e,r),p=V("boxInd",t,e,r),v=V("cropSize",t,e,r),y=V("method",t,e,r),S=V("extrapolationValue",t,e,r);return[n.image.cropAndResize(l,h,p,v,y,S)]}case"ImageProjectiveTransformV3":{var a=V("images",t,e,r),A=V("transforms",t,e,r),T=V("outputShape",t,e,r),I=V("fillValue",t,e,r),N=V("interpolation",t,e,r),D=V("fillMode",t,e,r);return[n.image.transform(a,A,N.toLowerCase(),D.toLowerCase(),I,T)]}default:throw TypeError("Node type "+t.op+" is not implemented")}};var aGe=function(t,e,r,n){switch(n===void 0&&(n=ta),t.op){case"Equal":return[n.equal(V("a",t,e,r),V("b",t,e,r))];case"NotEqual":return[n.notEqual(V("a",t,e,r),V("b",t,e,r))];case"Greater":return[n.greater(V("a",t,e,r),V("b",t,e,r))];case"GreaterEqual":return[n.greaterEqual(V("a",t,e,r),V("b",t,e,r))];case"Less":return[n.less(V("a",t,e,r),V("b",t,e,r))];case"LessEqual":return[n.lessEqual(V("a",t,e,r),V("b",t,e,r))];case"LogicalAnd":return[n.logicalAnd(V("a",t,e,r),V("b",t,e,r))];case"LogicalNot":return[n.logicalNot(V("a",t,e,r))];case"LogicalOr":return[n.logicalOr(V("a",t,e,r),V("b",t,e,r))];case"Select":case"SelectV2":return[n.where(V("condition",t,e,r),V("a",t,e,r),V("b",t,e,r))];default:throw TypeError("Node type "+t.op+" is not implemented")}},sGe=function(t,e,r,n){switch(n===void 0&&(n=ta),t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[n.matMul(V("a",t,e,r),V("b",t,e,r),V("transposeA",t,e,r),V("transposeB",t,e,r))];case"Einsum":return[n.einsum.apply(n,$i([V("equation",t,e,r)],V("tensors",t,e,r)))];case"Transpose":return[n.transpose(V("x",t,e,r),V("perm",t,e,r))];case"_FusedMatMul":var a=gt(V("fusedOps",t,e,r),2),s=a[0],o=a[1],u=s==="biasadd",l=o==="prelu",h=V("numArgs",t,e,r),p=V("leakyreluAlpha",t,e,r);if(u){if(l&&h!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!l&&h!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var v=gt(V("args",t,e,r),2),y=v[0],S=v[1];return[n.fused.matMul({a:V("a",t,e,r),b:V("b",t,e,r),transposeA:V("transposeA",t,e,r),transposeB:V("transposeB",t,e,r),bias:y,activation:o,preluActivationWeights:S,leakyreluAlpha:p})];default:throw TypeError("Node type "+t.op+" is not implemented")}};var oGe=function(t,e,r,n){switch(n===void 0&&(n=ta),t.op){case"EuclideanNorm":return[n.euclideanNorm(V("x",t,e,r),V("axis",t,e,r),V("keepDims",t,e,r))];case"FusedBatchNorm":case"FusedBatchNormV2":return[n.batchNorm(V("x",t,e,r),V("mean",t,e,r),V("variance",t,e,r),V("offset",t,e,r),V("scale",t,e,r),V("epsilon",t,e,r))];case"FusedBatchNormV3":return[n.batchNorm(V("x",t,e,r),V("mean",t,e,r),V("variance",t,e,r),V("offset",t,e,r),V("scale",t,e,r),V("epsilon",t,e,r))];case"LRN":return[n.localResponseNormalization(V("x",t,e,r),V("radius",t,e,r),V("bias",t,e,r),V("alpha",t,e,r),V("beta",t,e,r))];case"Softmax":return[n.softmax(V("x",t,e,r))];case"LogSoftmax":return[n.logSoftmax(V("x",t,e,r))];case"SparseToDense":return[n.sparseToDense(V("sparseIndices",t,e,r),V("outputShape",t,e,r),V("sparseValues",t,e,r),V("defaultValue",t,e,r))];default:throw TypeError("Node type "+t.op+" is not implemented")}};var uGe=function(t,e,r,n){switch(n===void 0&&(n=ta),t.op){case"Max":{var a=V("axis",t,e,r),s=V("keepDims",t,e,r);return[n.max(V("x",t,e,r),a,s)]}case"Mean":{var a=V("axis",t,e,r),s=V("keepDims",t,e,r);return[n.mean(V("x",t,e,r),a,s)]}case"Min":{var a=V("axis",t,e,r),s=V("keepDims",t,e,r);return[n.min(V("x",t,e,r),a,s)]}case"Sum":{var a=V("axis",t,e,r),s=V("keepDims",t,e,r);return[n.sum(V("x",t,e,r),a,s)]}case"All":{var a=V("axis",t,e,r),s=V("keepDims",t,e,r);return[n.all(V("x",t,e,r),a,s)]}case"Any":{var a=V("axis",t,e,r),s=V("keepDims",t,e,r);return[n.any(V("x",t,e,r),a,s)]}case"ArgMax":{var a=V("axis",t,e,r);return[n.argMax(V("x",t,e,r),a)]}case"ArgMin":{var a=V("axis",t,e,r);return[n.argMin(V("x",t,e,r),a)]}case"Prod":{var a=V("axis",t,e,r),s=V("keepDims",t,e,r);return[n.prod(V("x",t,e,r),a,s)]}case"Cumprod":{var a=V("axis",t,e,r),o=V("exclusive",t,e,r),u=V("reverse",t,e,r);return[n.cumprod(V("x",t,e,r),a,o,u)]}case"Cumsum":{var a=V("axis",t,e,r),o=V("exclusive",t,e,r),u=V("reverse",t,e,r);return[n.cumsum(V("x",t,e,r),a,o,u)]}case"Bincount":var l=V("x",t,e,r),h=V("weights",t,e,r),p=V("size",t,e,r);return[n.bincount(l,h,p)];case"DenseBincount":{var v=V("x",t,e,r),y=V("weights",t,e,r),S=V("size",t,e,r),A=V("binaryOutput",t,e,r);return[n.denseBincount(v,y,S,A)]}default:throw TypeError("Node type "+t.op+" is not implemented")}};var fGe=function(t,e,r,n){switch(n===void 0&&(n=ta),t.op){case"ConcatV2":case"Concat":{var a=V("n",t,e,r),s=V("axis",t,e,r),o=V("tensors",t,e,r);return o=o.slice(0,a),[n.concat(o,s)]}case"Gather":{var u=V("x",t,e,r),l=V("indices",t,e,r);return[n.gather(u,n.cast(l,"int32"),0)]}case"GatherV2":{var s=V("axis",t,e,r),h=V("batchDims",t,e,r),u=V("x",t,e,r),l=V("indices",t,e,r);return[n.gather(u,n.cast(l,"int32"),s,h)]}case"Reverse":{for(var p=V("dims",t,e,r),s=[],v=0;v<p.length;v++)p[v]&&s.push(v);var u=V("x",t,e,r);return[n.reverse(u,s)]}case"ReverseV2":{var s=V("axis",t,e,r),u=V("x",t,e,r);return[n.reverse(u,s)]}case"Slice":{var y=V("begin",t,e,r),S=V("size",t,e,r);return[n.slice(V("x",t,e,r),y,S)]}case"StridedSlice":{var y=V("begin",t,e,r),A=V("end",t,e,r),T=V("strides",t,e,r),I=V("beginMask",t,e,r),N=V("endMask",t,e,r),D=V("ellipsisMask",t,e,r),C=V("newAxisMask",t,e,r),L=V("shrinkAxisMask",t,e,r),z=V("x",t,e,r);return[n.stridedSlice(z,y,A,T,I,N,D,C,L)]}case"Pack":return yt.tidy(function(){var g=V("axis",t,e,r),m=V("tensors",t,e,r),b=m[0].shape,E=n.squeeze(m[0]).shape,k=m.map(function(w){var c=yt.util.arraysEqual(w.shape,b);if(!c&&!yt.util.arraysEqual(n.squeeze(w).shape,E))throw new Error("the input tensors shape does not match");return c?w:n.reshape(w,b)});return[n.stack(k,g)]});case"Unpack":{var s=V("axis",t,e,r),z=V("tensor",t,e,r);return n.unstack(z,s)}case"Tile":{var $=V("reps",t,e,r);return[n.tile(V("x",t,e,r),$)]}case"Split":case"SplitV":{var s=V("axis",t,e,r),G=V("numOrSizeSplits",t,e,r),z=V("x",t,e,r);return n.split(z,G,s)}case"ScatterNd":{var l=V("indices",t,e,r),j=V("values",t,e,r),K=V("shape",t,e,r);return[n.scatterND(l,j,K)]}case"GatherNd":{var M=V("x",t,e,r),l=V("indices",t,e,r);return[n.gatherND(M,l)]}case"SparseToDense":{var l=V("sparseIndices",t,e,r),K=V("outputShape",t,e,r),f=V("sparseValues",t,e,r),d=V("defaultValue",t,e,r);return[n.sparseToDense(l,f,K,f.dtype===d.dtype?d:n.cast(d,f.dtype))]}default:throw TypeError("Node type "+t.op+" is not implemented")}};var lGe=function(t,e,r,n){switch(n===void 0&&(n=ta),t.op){case"SparseFillEmptyRows":{var a=n.sparse.sparseFillEmptyRows(V("indices",t,e,r),V("values",t,e,r),V("denseShape",t,e,r),V("defaultValue",t,e,r)),s=a.outputIndices,o=a.outputValues,u=a.emptyRowIndicator,l=a.reverseIndexMap;return[s,o,u,l]}case"SparseReshape":{var h=n.sparse.sparseReshape(V("inputIndices",t,e,r),V("inputShape",t,e,r),V("newShape",t,e,r)),s=h.outputIndices,p=h.outputShape;return[s,p]}case"SparseSegmentMean":{var v=n.sparse.sparseSegmentMean(V("data",t,e,r),V("indices",t,e,r),V("segmentIds",t,e,r));return[v]}case"SparseSegmentSum":{var v=n.sparse.sparseSegmentSum(V("data",t,e,r),V("indices",t,e,r),V("segmentIds",t,e,r));return[v]}default:throw TypeError("Node type "+t.op+" is not implemented")}};var cGe=function(t,e,r,n){switch(n===void 0&&(n=ta),t.op){case"FFT":return[n.fft(V("x",t,e,r))];case"IFFT":return[n.ifft(V("x",t,e,r))];case"RFFT":return[n.rfft(V("x",t,e,r))];case"IRFFT":return[n.irfft(V("x",t,e,r))];default:throw TypeError("Node type "+t.op+" is not implemented")}};var hGe=function(t,e,r,n){switch(n===void 0&&(n=ta),t.op){case"StringNGrams":{var a=n.string.stringNGrams(V("data",t,e,r),V("dataSplits",t,e,r),V("separator",t,e,r),V("nGramWidths",t,e,r),V("leftPad",t,e,r),V("rightPad",t,e,r),V("padWidth",t,e,r),V("preserveShortSequences",t,e,r)),s=a.nGrams,o=a.nGramsSplits;return[s,o]}case"StringSplit":{var u=n.string.stringSplit(V("input",t,e,r),V("delimiter",t,e,r),V("skipEmpty",t,e,r)),l=u.indices,h=u.values,p=u.shape;return[l,h,p]}case"StringToHashBucketFast":{var v=n.string.stringToHashBucketFast(V("input",t,e,r),V("numBuckets",t,e,r));return[v]}default:throw TypeError("Node type "+t.op+" is not implemented")}};var dGe=function(t,e,r,n){switch(n===void 0&&(n=ta),t.op){case"Cast":return[n.cast(V("x",t,e,r),V("dtype",t,e,r))];case"ExpandDims":{var a=V("axis",t,e,r);return[n.expandDims(V("x",t,e,r),a)]}case"Squeeze":{var a=V("axis",t,e,r);return[n.squeeze(V("x",t,e,r),a)]}case"Reshape":return[n.reshape(V("x",t,e,r),V("shape",t,e,r))];case"MirrorPad":return[n.mirrorPad(V("x",t,e,r),V("padding",t,e,r),V("mode",t,e,r))];case"PadV2":case"Pad":return[n.pad(V("x",t,e,r),V("padding",t,e,r),V("constantValue",t,e,r))];case"SpaceToBatchND":{var s=V("blockShape",t,e,r),o=V("paddings",t,e,r);return[n.spaceToBatchND(V("x",t,e,r),s,o)]}case"BatchToSpaceND":{var s=V("blockShape",t,e,r),u=V("crops",t,e,r);return[n.batchToSpaceND(V("x",t,e,r),s,u)]}case"DepthToSpace":{var l=V("blockSize",t,e,r),h=V("dataFormat",t,e,r).toUpperCase();return[n.depthToSpace(V("x",t,e,r),l,h)]}case"BroadcastTo":return[n.broadcastTo(V("x",t,e,r),V("shape",t,e,r))];case"BroadcastArgs":return[n.broadcastArgs(V("s0",t,e,r),V("s1",t,e,r))];default:throw TypeError("Node type "+t.op+" is not implemented")}};function Uee(t,e,r,n,a){a===void 0&&(a=mee.tidy);var s=function(o,u,l){switch(o.category){case"arithmetic":return a(function(){return $We(o,u,l)});case"basic_math":return a(function(){return zWe(o,u,l)});case"control":return KWe(o,u,l);case"convolution":return a(function(){return ZWe(o,u,l)});case"creation":return a(function(){return JWe(o,u,l)});case"dynamic":return XWe(o,u,l);case"evaluation":return a(function(){return QWe(o,u,l)});case"image":return a(function(){return iGe(o,u,l)});case"graph":return a(function(){return eGe(o,u,l)});case"logical":return a(function(){return aGe(o,u,l)});case"matrices":return a(function(){return sGe(o,u,l)});case"normalization":return a(function(){return oGe(o,u,l)});case"reduction":return a(function(){return uGe(o,u,l)});case"slice_join":return a(function(){return fGe(o,u,l)});case"sparse":return a(function(){return lGe(o,u,l)});case"spectral":return a(function(){return cGe(o,u,l)});case"string":return a(function(){return hGe(o,u,l)});case"transformation":return a(function(){return dGe(o,u,l)});case"hash_table":return nGe(o,u,l,n);case"custom":var h=Hee(o.op);if(h&&h.customExecutor)return h.customExecutor(new M7e(o,u,l));throw TypeError("Custom op "+o.op+" is not registered.");default:throw TypeError("Unknown op '"+o.op+"'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(t,e,r);return mee.util.isPromise(s)?s.then(function(o){return[].concat(o)}):[].concat(s)}var Vee=function(){function t(e,r,n,a){e===void 0&&(e={}),r===void 0&&(r={}),n===void 0&&(n={}),a===void 0&&(a={}),this.weightMap=e,this.tensorArrayMap=r,this.tensorListMap=n,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return t.prototype.newFrame=function(e,r){return{id:e,frameName:r,iterationId:0}},Object.defineProperty(t.prototype,"currentContext",{get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentContextId",{get:function(){return this._currentContextIds[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentContextIds",{get:function(){return this._currentContextIds},enumerable:!0,configurable:!0}),t.prototype.generateCurrentContextIds=function(){for(var e=[],r=0;r<this.contexts.length-1;r++){var n=this.contexts.slice(0,this.contexts.length-r);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e},t.prototype.contextIdforContexts=function(e){return e?e.map(function(r){return r.id===0&&r.iterationId===0?"":r.frameName+"-"+r.iterationId}).join("/"):""},t.prototype.enterFrame=function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},t.prototype.exitFrame=function(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")},t.prototype.nextIteration=function(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")},t.prototype.getWeight=function(e){return this.weightMap[e]},t.prototype.addTensorArray=function(e){this.tensorArrayMap[e.id]=e},t.prototype.getTensorArray=function(e){return this.tensorArrayMap[e]},t.prototype.addTensorList=function(e){this.tensorListMap[e.id]=e},t.prototype.getTensorList=function(e){return this.tensorListMap[e]},t.prototype.dispose=function(e){for(var r in this.tensorArrayMap)this.tensorArrayMap[r].clearAndClose(e);for(var r in this.tensorListMap)this.tensorListMap[r].clearAndClose(e)},t}();function Wee(t,e,r,n){var a=new Set,s=[],o=null,u=null,l=new Set,h=Object.keys(t).map(function(S){return Ha(S)[0]}),p=[];n!=null&&(p=n.map(function(S){return Ha(S.name)[0]}));for(var v=$i(e);v.length>0;){var y=v.pop();if((Yte(y)||yGe(y)||bGe(y))&&o==null&&(o=y,u=o.children.map(function(S){return S.name}).filter(function(S){return a.has(S)})),a.add(y.name),r[y.name]==null&&h.indexOf(y.name)===-1&&p.indexOf(y.name)===-1){if(y.inputs.length===0){s.push(y.name);continue}y.inputs.forEach(function(S){l.has(S.name)||(l.add(S.name),v.push(S))})}}return{inputs:t,outputs:e,usedNodes:a,missingInputs:s,dynamicNode:o,syncInputs:u}}function pGe(t,e,r){var n=r.usedNodes,a=r.inputs,s=[],o=Object.keys(a).map(function(v){return Ha(v)[0]}).map(function(v){return t.nodes[v]}),u=t.initNodes;o.forEach(function(v){n.has(v.name)&&s.push(v)}),t.weights.forEach(function(v){n.has(v.name)&&s.push(v)}),u!=null&&u.forEach(function(v){n.has(v.name)&&s.push(v)});for(var l=new Set,h=[];s.length>0;){var p=s.pop();l.add(p.name),e[p.name]||h.push(p),p.children.forEach(function(v){!l.has(v.name)&&n.has(v.name)&&v.inputs.every(function(y){return l.has(y.name)})&&s.push(v)})}return h}var mGe=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],vGe=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],gGe=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function Yte(t){return mGe.indexOf(t.op)>=0}function yGe(t){return vGe.indexOf(t.op)>=0}function bGe(t){return gGe.indexOf(t.op)>=0}var Gee=function(){function t(e,r){var n=this;this.graph=e,this.parent=r,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(function(a){n._functionExecutorMap[a]=new t(e.functions[a],n)})}return Object.defineProperty(t.prototype,"weightIds",{get:function(){return this.parent?this.parent.weightIds:this._weightIds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"functionExecutorMap",{get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weightMap",{get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var r=Object.keys(e).map(function(n){return e[n].map(function(a){return a.id})});this._weightIds=[].concat.apply([],$i(r)),this._weightMap=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resourceManager",{set:function(e){this._resourceManager=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputs",{get:function(){return this._inputs.map(function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return this._outputs.map(function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputNodes",{get:function(){return this._inputs.map(function(e){return e.signatureKey||e.name})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputNodes",{get:function(){return this._outputs.map(function(e){var r=e.signatureKey||e.name;return e.defaultOutput?r+":"+e.defaultOutput:r})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"functions",{get:function(){var e=this;return Object.keys(this._functions).reduce(function(r,n){return r[n]=e._functions[n].signature,r},{})},enumerable:!0,configurable:!0}),t.prototype.getCompilationKey=function(e,r){var n=e.map(function(s){return s.name}).sort(),a=r.map(function(s){return s.name}).sort();return n.join(this.SEPERATOR)+"--"+a.join(this.SEPERATOR)},t.prototype.compile=function(e,r){var n=Wee(e,r,this.weightMap,this._initNodes),a=n.missingInputs,s=n.dynamicNode,o=n.syncInputs;if(s!=null)throw new Error("This execution contains the node '"+s.name+"', which has "+("the dynamic op '"+s.op+"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+("dynamic ops, specify the inputs ["+o+"]"));if(a.length>0){var u=r.map(function(h){return h.name}),l=Object.keys(e);throw new Error("Cannot compute the outputs ["+u+"] from the provided inputs "+("["+l+"]. Missing the following inputs: ["+a+"]"))}return pGe(this.graph,this.weightMap,n)},t.prototype.execute=function(e,r){var n=this;e=this.mapInputs(e);var a=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),r=this.mapOutputs(r),this.checkOutputs(r);var s=a.map(function(y){return n.graph.nodes[Ha(y)[0]]}),o=r.map(function(y){return Ha(y)[0]}),u=o.map(function(y){return n.graph.nodes[y]});this.resetIntermediateTensors(),u.length===0&&(u=this._outputs);var l=this.getCompilationKey(s,u),h=this.compiledMap.get(l);h==null&&(h=this.compile(e,u),this.compiledMap.set(l,h));var p={},v={};return yt.tidy(function(){var y=new Vee(n.weightMap,p,v,n.functionExecutorMap),S=Object.assign({},n.weightMap);Object.keys(e).forEach(function(C){var L=gt(Ha(C),2),z=L[0],$=L[1],G=[];G[$]=e[C],S[z]=G});for(var A=n.getFrozenTensorIds(S),T={},I=0;I<h.length;I++){var N=h[I];if(!S[N.name]){var D=Uee(N,S,y,n._resourceManager);if(yt.util.isPromise(D))throw new Error("The execution of the op '"+N.op+"' returned a promise. Please use model.executeAsync() instead.");S[N.name]=D,n.checkTensorForDisposal(N.name,N,S,y,A,o,T)}}return n.parent==null&&y.dispose(A),r.map(function(C){return ba(C,S,y)})})},t.prototype.getFrozenTensorIds=function(e){var r=[].concat.apply([],Object.keys(e).map(function(n){return e[n]}).map(function(n){return n.map(function(a){return a.id})}));return new Set(r)},t.prototype.checkTensorForDisposal=function(e,r,n,a,s,o,u){var l=this;r.category==="control"||o.indexOf(e)!==-1||(n[e].forEach(function(h){h!=null&&(u[h.id]=(u[h.id]||0)+r.children.length)}),r.inputs.forEach(function(h){if(h.category!=="control"){var p=qFe(h.name,n,a);p!=null&&p.forEach(function(v){if(v&&!v.kept&&!s.has(v.id)){var y=u[v.id];if(y===1){if(!l.keepTensorForDebug)v.dispose();else{var S=gt(Pu(r.name,a),2),A=S[0],T=S[1];l.intermediateTensors[A]||(l.intermediateTensors[A]=[]),l.intermediateTensors[A][T]=v}delete u[v.id]}else y!=null&&u[v.id]--}})}}))},t.prototype.executeAsync=function(e,r){return on(this,void 0,void 0,function(){return en(this,function(n){return[2,this._executeAsync(e,r)]})})},t.prototype.disposeIntermediateTensors=function(){var e=this;!this.intermediateTensors||(Object.keys(this.intermediateTensors).forEach(function(r){return e.intermediateTensors[r].forEach(function(n){return n.dispose()})}),this.disposeTensorsMap())},t.prototype.disposeTensorsMap=function(){var e=this;!this.tensorsMap||Object.keys(this.tensorsMap).forEach(function(r){var n=e.tensorsMap[r];n.forEach(function(a){a&&!a.kept&&!a.isDisposed&&!e.keepIds.has(a.id)&&a.dispose()})})},t.prototype.getIntermediateTensors=function(){return this.tensorsMap},t.prototype.resetIntermediateTensors=function(){for(var e in this.intermediateTensors)this.intermediateTensors[e].forEach(function(r){return r.dispose()}),delete this.intermediateTensors[e]},t.prototype._executeAsync=function(e,r,n,a,s){return n===void 0&&(n=!1),a===void 0&&(a={}),s===void 0&&(s={}),on(this,void 0,void 0,function(){var o,u,l,h,p,v=this;return en(this,function(y){switch(y.label){case 0:n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),r=this.mapOutputs(r),this.checkOutputs(r));try{this.keepTensorForDebug=yt.env().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(S){console.warn(S.message)}return this.resetIntermediateTensors(),o=new Vee(this.weightMap,a,s,this.functionExecutorMap),u=this,[4,this.executeWithControlFlow(e,o,r,n)];case 1:return u.tensorsMap=y.sent(),l=r.map(function(S){return ba(S,v.tensorsMap,o)}),h=l.map(function(S){return S.id}),p=Object.keys(e).map(function(S){return e[S].id}),this.keepIds=new Set($i(h,p,this.weightIds)),this.keepTensorForDebug||this.disposeTensorsMap(),this.parent==null&&o.dispose(this.keepIds),[2,l]}})})},t.prototype.executeFunctionAsync=function(e,r,n){return on(this,void 0,void 0,function(){var a,s=this;return en(this,function(o){return a=e.reduce(function(u,l,h){return u[s.inputs[h].name]=l,u},{}),[2,this._executeAsync(a,this.outputNodes,!0,r,n)]})})},t.prototype.executeWithControlFlow=function(e,r,n,a){return on(this,void 0,void 0,function(){var s,o,u,l,h,p,v,y,S,A,T,I,N,D,C,L,z,$=this;return en(this,function(G){switch(G.label){case 0:s=Object.keys(e),o=s.map(function(j){return $.graph.nodes[Ha(j)[0]]}),u=n.map(function(j){return Ha(j)[0]}),l=u.map(function(j){return $.graph.nodes[j]}),l.length===0&&(l=this._outputs),h=Wee(e,l,this.weightMap,this._initNodes),p=h.usedNodes,v=h.missingInputs,y=h.dynamicNode,S=h.syncInputs,A=$i(o,this.graph.weights,this._initNodes||[]).map(function(j){return{node:j,contexts:r.currentContext}}),T=Object.assign({},this.weightMap),Object.keys(e).forEach(function(j){var K=gt(Ha(j),2),M=K[0],f=K[1],d=[];d[f]=e[j],T[M]=d}),I={},N=this.getFrozenTensorIds(T),D={},G.label=1;case 1:return A.length>0?(C=this.processStack(o,A,r,T,D,N,u,I,p),[4,Promise.all(C)]):[3,3];case 2:return G.sent(),[3,1];case 3:if(y==null&&!a&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),L=l.filter(function(j){return!Yte(j)&&!ba(j.name,T,r)}).map(function(j){return j.name}),L.length>0)throw z="",y!=null&&(z="Alternatively, to avoid the dynamic ops, use model.execute() "+("and specify the inputs ["+S+"]")),new Error("Cannot compute the outputs ["+L+"] from the provided "+("inputs ["+s+"]. Consider providing the following inputs: ")+("["+v+"]. "+z));return[2,T]}})})},t.prototype.processStack=function(e,r,n,a,s,o,u,l,h){for(var p=this,v=[],y=function(){var A,T,I=r.pop();n.currentContext=I.contexts;var N="";if(I.node.op==="Enter"&&V("isConstant",I.node,a,n)&&(A=gt(Pu(I.node.name,n),1),N=A[0]),a[I.node.name]==null){var D=Uee(I.node,a,n,S._resourceManager);N||(T=gt(Pu(I.node.name,n),1),N=T[0]);var C=n.currentContext;yt.util.isPromise(D)?v.push(D.then(function(L){return a[N]=L,n.currentContext=C,p.checkTensorForDisposal(N,I.node,a,n,o,u,l),p.processChildNodes(I.node,r,n,a,s,h),L})):(a[N]=D,S.checkTensorForDisposal(N,I.node,a,n,o,u,l),S.processChildNodes(I.node,r,n,a,s,h))}else S.processChildNodes(I.node,r,n,a,s,h)},S=this;r.length>0;)y();return v},t.prototype.processChildNodes=function(e,r,n,a,s,o){e.children.forEach(function(u){var l=gt(Pu(u.name,n),1),h=l[0];s[h]||!o.has(u.name)||(u.op==="Merge"?u.inputNames.some(function(p){return!!ba(p,a,n)})&&(s[h]=!0,r.push({contexts:n.currentContext,node:u})):u.inputNames.every(function(p){return!!ba(p,a,n)})&&(s[h]=!0,r.push({contexts:n.currentContext,node:u})))})},t.prototype.dispose=function(){var e=this;Object.keys(this.weightMap).forEach(function(r){return e.weightMap[r].forEach(function(n){return n.dispose()})})},t.prototype.checkInputShapeAndType=function(e){var r=this;Object.keys(e).forEach(function(n){var a=e[n],s=gt(Ha(n),1),o=s[0],u=r.graph.nodes[o];if(u.attrParams.shape&&u.attrParams.shape.value){var l=u.attrParams.shape.value,h=l.length===a.shape.length&&a.shape.every(function(p,v){return l[v]===-1||l[v]===p});yt.util.assert(h,function(){return"The shape of dict['"+u.name+"'] provided in "+("model.execute(dict) must be ["+l+"], but was ")+("["+a.shape+"]")})}u.attrParams.dtype&&u.attrParams.dtype.value&&yt.util.assert(a.dtype===u.attrParams.dtype.value,function(){return"The dtype of dict['"+u.name+"'] provided in model.execute(dict) must be "+(u.attrParams.dtype.value+", but was "+a.dtype)})})},t.prototype.mapInputs=function(e){var r={};for(var n in e)if(this._signature!=null&&this._signature.inputs!=null&&this._signature.inputs[n]!=null){var a=this._signature.inputs[n];r[a.name]=e[n]}else r[n]=e[n];return r},t.prototype.checkInputs=function(e){var r=this,n=Object.keys(e).filter(function(a){var s=gt(Ha(a),1),o=s[0];return r.graph.nodes[o]==null});if(n.length>0)throw new Error("The dict provided in model.execute(dict) has "+("keys: ["+n+"] that are not part of graph"))},t.prototype.mapOutputs=function(e){var r=this;return e.map(function(n){if(r._signature!=null&&r._signature.outputs!=null&&r._signature.outputs[n]!=null){var a=r._signature.outputs[n];return a.name}return n},{})},t.prototype.checkOutputs=function(e){var r=this;e.forEach(function(n){var a=gt(Ha(n),1),s=a[0];if(!r.graph.nodes[s])throw new Error("The output '"+n+"' is not found in the graph")})},t}(),wGe=function(){function t(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.hashTableNameToHandle=e,this.hashTableMap=r}return t.prototype.addHashTable=function(e,r){this.hashTableNameToHandle[e]=r.handle,this.hashTableMap[r.id]=r},t.prototype.getHashTableHandleByName=function(e){return this.hashTableNameToHandle[e]},t.prototype.getHashTableById=function(e){return this.hashTableMap[e]},t.prototype.dispose=function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var r in this.hashTableNameToHandle)this.hashTableNameToHandle[r].dispose(),delete this.hashTableNameToHandle[r]},t}(),_Ge="?tfjs-format=file",xGe="model.json",UD=function(){function t(e,r,n){r===void 0&&(r={}),n===void 0&&(n=yt.io),this.modelUrl=e,this.loadOptions=r,this.version="n/a",this.io=n,r==null&&(this.loadOptions={}),this.resourceManager=new wGe}return Object.defineProperty(t.prototype,"modelVersion",{get:function(){return this.version},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this.artifacts.userDefinedMetadata},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modelSignature",{get:function(){return this.signature},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modelStructuredOutputKeys",{get:function(){return this.structuredOutputKeys},enumerable:!0,configurable:!0}),t.prototype.findIOHandler=function(){var e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{var r=this.io.getLoadHandlers(e,this.loadOptions);if(r.length===0)r.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(r.length>1)throw new Error("Found more than one ("+r.length+") load handlers for "+("URL '"+[e]+"'"));this.handler=r[0]}},t.prototype.load=function(){var e=this;if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");var r=this.handler.load();return yt.util.isPromise(r)?r.then(function(n){return e.loadSync(n)}):this.loadSync(r)},t.prototype.loadSync=function(e){this.artifacts=e;var r=this.artifacts.modelTopology,n=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){var a=this.artifacts.userDefinedMetadata;a.signature!=null&&(n=a.signature),a.structuredOutputKeys!=null&&(this.structuredOutputKeys=a.structuredOutputKeys)}this.signature=n,this.version=r.versions.producer+"."+r.versions.minConsumer;var s=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new Gee(gee.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(s),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){var o=gee.Instance.transformGraph(e.modelInitializer);this.initializer=new Gee(o),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0},t.prototype.save=function(e,r){return on(this,void 0,void 0,function(){var n;return en(this,function(a){if(typeof e=="string"){if(n=this.io.getSaveHandlers(e),n.length===0)throw new Error("Cannot find any save handlers for URL '"+e+"'");if(n.length>1)throw new Error("Found more than one ("+n.length+") save handlers for "+("URL '"+e+"'"));e=n[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[2,e.save(this.artifacts)]})})},t.prototype.predict=function(e,r){var n=this,a=this.execute(e,this.outputNodes);if(this.structuredOutputKeys){var s=a instanceof yt.Tensor?[a]:a,o={};return s.forEach(function(u,l){return o[n.structuredOutputKeys[l]]=u}),o}return a},t.prototype.normalizeInputs=function(e){if(!(e instanceof yt.Tensor)&&!Array.isArray(e))return e;if(e=Array.isArray(e)?e:[e],e.length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+("the graph model has "+this.inputNodes.length+" placeholders, ")+("while there are "+e.length+" input tensors."));return this.inputNodes.reduce(function(r,n,a){return r[n]=e[a],r},{})},t.prototype.normalizeOutputs=function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]},t.prototype.execute=function(e,r){e=this.normalizeInputs(e),r=this.normalizeOutputs(r);var n=this.executor.execute(e,r);return n.length>1?n:n[0]},t.prototype.executeAsync=function(e,r){return on(this,void 0,void 0,function(){var n;return en(this,function(a){switch(a.label){case 0:return e=this.normalizeInputs(e),r=this.normalizeOutputs(r),[4,this.executor.executeAsync(e,r)];case 1:return n=a.sent(),[2,n.length>1?n:n[0]]}})})},t.prototype.getIntermediateTensors=function(){return this.executor.getIntermediateTensors()},t.prototype.disposeIntermediateTensors=function(){this.executor.disposeIntermediateTensors()},t.prototype.convertTensorMapToTensorsMap=function(e){return Object.keys(e).reduce(function(r,n){return r[n]=[e[n]],r},{})},t.prototype.dispose=function(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()},t}();function SGe(t,e,r){return e===void 0&&(e={}),r===void 0&&(r=yt.io),on(this,void 0,void 0,function(){var n;return en(this,function(a){switch(a.label){case 0:if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");return e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=MGe(t)),n=new UD(t,e,r),[4,n.load()];case 1:return a.sent(),[2,n]}})})}function EGe(t){if(t==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide a url or an IOHandler that loads the model");if(!t.load)throw new Error("modelUrl IO Handler "+t+" has no load function");var e=new UD(t);return e.load(),e}function MGe(t){return t.endsWith("/")||(t=t+"/"),""+t+xGe+_Ge}var AGe="3.19.0";tc.GraphModel=UD;tc.deregisterOp=PFe;tc.loadGraphModel=SGe;tc.loadGraphModelSync=EGe;tc.registerOp=LFe;tc.version_converter=AGe});var ere=ne((r3,Qte)=>{(function(t,e){typeof r3=="object"&&typeof Qte!="undefined"?e(r3,Mt(),Xte()):typeof define=="function"&&define.amd?define(["exports","@tensorflow/tfjs-core","@tensorflow/tfjs-converter"],e):e(t.use={},t.tf,t.tf)})(r3,function(t,e,r){"use strict";function n(E,k,w,c){function _(R){return R instanceof w?R:new w(function(O){O(R)})}return new(w||(w=Promise))(function(R,O){function F(J){try{H(c.next(J))}catch(fe){O(fe)}}function U(J){try{H(c.throw(J))}catch(fe){O(fe)}}function H(J){J.done?R(J.value):_(J.value).then(F,U)}H((c=c.apply(E,k||[])).next())})}function a(E,k){var w={label:0,sent:function(){if(R[0]&1)throw R[1];return R[1]},trys:[],ops:[]},c,_,R,O;return O={next:F(0),throw:F(1),return:F(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function F(H){return function(J){return U([H,J])}}function U(H){if(c)throw new TypeError("Generator is already executing.");for(;w;)try{if(c=1,_&&(R=H[0]&2?_.return:H[0]?_.throw||((R=_.return)&&R.call(_),0):_.next)&&!(R=R.call(_,H[1])).done)return R;switch(_=0,R&&(H=[H[0]&2,R.value]),H[0]){case 0:case 1:R=H;break;case 4:return w.label++,{value:H[1],done:!1};case 5:w.label++,_=H[1],H=[0];continue;case 7:H=w.ops.pop(),w.trys.pop();continue;default:if(R=w.trys,!(R=R.length>0&&R[R.length-1])&&(H[0]===6||H[0]===2)){w=0;continue}if(H[0]===3&&(!R||H[1]>R[0]&&H[1]<R[3])){w.label=H[1];break}if(H[0]===6&&w.label<R[1]){w.label=R[1],R=H;break}if(R&&w.label<R[2]){w.label=R[2],w.ops.push(H);break}R[2]&&w.ops.pop(),w.trys.pop();continue}H=k.call(E,w)}catch(J){H=[6,J],_=0}finally{c=R=0}if(H[0]&5)throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}}var s=function(E){for(var k=[],w=0,c=E;w<c.length;w++){var _=c[w];k.push(_)}return k};var o=function(){function E(){this.parent=null,this.children={},this.end=!1,this.word=[[],0,0]}return E}(),u=function(){function E(){this.root=new o}return E.prototype.insert=function(k,w,c){for(var _=this.root,R=s(k),O=0;O<R.length;O++)_.children[R[O]]||(_.children[R[O]]=new o,_.children[R[O]].parent=_,_.children[R[O]].word[0]=_.word[0].concat(R[O])),_=_.children[R[O]],O===R.length-1&&(_.end=!0,_.word[1]=w,_.word[2]=c)},E.prototype.commonPrefixSearch=function(k){for(var w=[],c=this.root.children[k[0]],_=0;_<k.length&&c;_++)c.end&&w.push(c.word),c=c.children[k[_+1]];return w.length||w.push([[k[0]],0,0]),w},E}();var l="\u2581";function h(E){var k=E.normalize("NFKC");return k.length>0?l+k.replace(/ /g,l):k}var p=6,v=function(){function E(k,w){w===void 0&&(w=p),this.vocabulary=k,this.reservedSymbolsCount=w,this.trie=new u;for(var c=this.reservedSymbolsCount;c<this.vocabulary.length;c++)this.trie.insert(this.vocabulary[c][0],this.vocabulary[c][1],c)}return E.prototype.encode=function(k){var w=[],c=[],_=[];k=h(k);for(var R=s(k),O=0;O<=R.length;O++)w.push({}),c.push(0),_.push(0);for(var O=0;O<R.length;O++)for(var F=this.trie.commonPrefixSearch(R.slice(O)),U=0;U<F.length;U++){var H=F[U],J={key:H[0],score:H[1],index:H[2]},fe=H[0].length;w[O+fe][O]==null&&(w[O+fe][O]=[]),w[O+fe][O].push(J)}for(var fe=0;fe<=R.length;fe++)for(var B in w[fe])for(var q=w[fe][B],U=0;U<q.length;U++){var Y=q[U],X=Y.score+_[fe-Y.key.length];(_[fe]===0||X>=_[fe])&&(_[fe]=X,c[fe]=q[U].index)}for(var Q=[],be=c.length-1;be>0;)Q.push(c[be]),be-=this.vocabulary[c[be]][0].length;for(var ue=[],me=!1,O=0;O<Q.length;O++){var vt=Q[O];me&&vt===0||ue.push(vt),me=vt===0}return ue.reverse()},E}();function y(E){return n(this,void 0,void 0,function(){var k,w;return a(this,function(c){switch(c.label){case 0:return[4,S(E)];case 1:return k=c.sent(),w=new v(k),[2,w]}})})}function S(E){return n(this,void 0,void 0,function(){var k;return a(this,function(w){switch(w.label){case 0:return[4,e.util.fetch(E)];case 1:return k=w.sent(),[2,k.json()]}})})}var A="1.3.3";var T="https://tfhub.dev/google/tfjs-model/universal-sentence-encoder-qa-ondevice/1",I=[0,1,2],N=3,D=192,C="input_inp_text",L="input_res_context",z="input_res_text",$="Final/EncodeResult/mul",G="Final/EncodeQuery/mul",j=3,K=2,M=1;function f(){return n(this,void 0,void 0,function(){var E;return a(this,function(k){switch(k.label){case 0:return E=new d,[4,E.load()];case 1:return k.sent(),[2,E]}})})}var d=function(){function E(){}return E.prototype.loadModel=function(){return n(this,void 0,void 0,function(){return a(this,function(k){return[2,r.loadGraphModel(T,{fromTFHub:!0})]})})},E.prototype.load=function(){return n(this,void 0,void 0,function(){var k,w,c;return a(this,function(_){switch(_.label){case 0:return[4,Promise.all([this.loadModel(),S(T+"/vocab.json?tfjs-format=file")])];case 1:return k=_.sent(),w=k[0],c=k[1],this.model=w,this.tokenizer=new v(c,j),[2]}})})},E.prototype.embed=function(k){var w=this,c=e.tidy(function(){var O=w.tokenizeStrings(k.queries,D),F=w.tokenizeStrings(k.responses,D);if(k.contexts!=null&&k.contexts.length!==k.responses.length)throw new Error("The length of response strings and context strings need to match.");var U=k.contexts||[];k.contexts==null&&(U.length=k.responses.length,U.fill(""));var H=w.tokenizeStrings(U,D),J={};return J[C]=O,J[z]=F,J[L]=H,w.model.execute(J,[G,$])}),_=c[0],R=c[1];return{queryEmbedding:_,responseEmbedding:R}},E.prototype.tokenizeStrings=function(k,w){var c=this,_=k.map(function(R){return c.shiftTokens(c.tokenizer.encode(R),D)});return e.tensor2d(_,[k.length,D],"int32")},E.prototype.shiftTokens=function(k,w){k.unshift(M);for(var c=0;c<w;c++)c>=k.length?k[c]=K:I.includes(k[c])||(k[c]+=N);return k.slice(0,w)},E}();var g="https://storage.googleapis.com/tfjs-models/savedmodel/universal_sentence_encoder";function m(E){return n(this,void 0,void 0,function(){var k;return a(this,function(w){switch(w.label){case 0:return k=new b,[4,k.load(E)];case 1:return w.sent(),[2,k]}})})}var b=function(){function E(){}return E.prototype.loadModel=function(k){return n(this,void 0,void 0,function(){return a(this,function(w){return[2,k?r.loadGraphModel(k):r.loadGraphModel("https://tfhub.dev/tensorflow/tfjs-model/universal-sentence-encoder-lite/1/default/1",{fromTFHub:!0})]})})},E.prototype.load=function(k){return k===void 0&&(k={}),n(this,void 0,void 0,function(){var w,c,_;return a(this,function(R){switch(R.label){case 0:return[4,Promise.all([this.loadModel(k.modelUrl),S(k.vocabUrl||g+"/vocab.json")])];case 1:return w=R.sent(),c=w[0],_=w[1],this.model=c,this.tokenizer=new v(_),[2]}})})},E.prototype.embed=function(k){return n(this,void 0,void 0,function(){var w,c,_,R,O,F,U,H,J=this;return a(this,function(fe){switch(fe.label){case 0:for(typeof k=="string"&&(k=[k]),w=k.map(function(B){return J.tokenizer.encode(B)}),c=w.map(function(B,q){return B.map(function(Y,X){return[q,X]})}),_=[],R=0;R<c.length;R++)_=_.concat(c[R]);return O=e.tensor2d(_,[_.length,2],"int32"),F=e.tensor1d(e.util.flatten(w),"int32"),U={indices:O,values:F},[4,this.model.executeAsync(U)];case 1:return H=fe.sent(),O.dispose(),F.dispose(),[2,H]}})})},E}();t.load=m,t.UniversalSentenceEncoder=b,t.Tokenizer=v,t.loadTokenizer=y,t.loadQnA=f,t.version=A,Object.defineProperty(t,"__esModule",{value:!0})})});var VD=ne((GMt,tre)=>{"use strict";tre.exports=function(e,r){return function(){for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];return e.apply(r,a)}}});var ji=ne((HMt,ire)=>{"use strict";var kGe=VD(),GD=Object.prototype.toString,HD=function(t){return function(e){var r=GD.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function fd(t){return t=t.toLowerCase(),function(r){return HD(r)===t}}function KD(t){return Array.isArray(t)}function i3(t){return typeof t=="undefined"}function TGe(t){return t!==null&&!i3(t)&&t.constructor!==null&&!i3(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var rre=fd("ArrayBuffer");function NGe(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&rre(t.buffer),e}function IGe(t){return typeof t=="string"}function DGe(t){return typeof t=="number"}function nre(t){return t!==null&&typeof t=="object"}function n3(t){if(HD(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var OGe=fd("Date"),RGe=fd("File"),CGe=fd("Blob"),FGe=fd("FileList");function ZD(t){return GD.call(t)==="[object Function]"}function BGe(t){return nre(t)&&ZD(t.pipe)}function LGe(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||GD.call(t)===e||ZD(t.toString)&&t.toString()===e)}var PGe=fd("URLSearchParams");function qGe(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function $Ge(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function JD(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),KD(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.call(null,t[a],a,t)}function WD(){var t={};function e(a,s){n3(t[s])&&n3(a)?t[s]=WD(t[s],a):n3(a)?t[s]=WD({},a):KD(a)?t[s]=a.slice():t[s]=a}for(var r=0,n=arguments.length;r<n;r++)JD(arguments[r],e);return t}function zGe(t,e,r){return JD(e,function(a,s){r&&typeof a=="function"?t[s]=kGe(a,r):t[s]=a}),t}function jGe(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function UGe(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,r&&Object.assign(t.prototype,r)}function VGe(t,e,r){var n,a,s,o={};e=e||{};do{for(n=Object.getOwnPropertyNames(t),a=n.length;a-- >0;)s=n[a],o[s]||(e[s]=t[s],o[s]=!0);t=Object.getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e}function WGe(t,e,r){t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return n!==-1&&n===r}function GGe(t){if(!t)return null;var e=t.length;if(i3(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r}var HGe=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array!="undefined"&&Object.getPrototypeOf(Uint8Array));ire.exports={isArray:KD,isArrayBuffer:rre,isBuffer:TGe,isFormData:LGe,isArrayBufferView:NGe,isString:IGe,isNumber:DGe,isObject:nre,isPlainObject:n3,isUndefined:i3,isDate:OGe,isFile:RGe,isBlob:CGe,isFunction:ZD,isStream:BGe,isURLSearchParams:PGe,isStandardBrowserEnv:$Ge,forEach:JD,merge:WD,extend:zGe,trim:qGe,stripBOM:jGe,inherits:UGe,toFlatObject:VGe,kindOf:HD,kindOfTest:fd,endsWith:WGe,toArray:GGe,isTypedArray:HGe,isFileList:FGe}});var YD=ne((KMt,sre)=>{"use strict";var Um=ji();function are(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}sre.exports=function(e,r,n){if(!r)return e;var a;if(n)a=n(r);else if(Um.isURLSearchParams(r))a=r.toString();else{var s=[];Um.forEach(r,function(l,h){l===null||typeof l=="undefined"||(Um.isArray(l)?h=h+"[]":l=[l],Um.forEach(l,function(v){Um.isDate(v)?v=v.toISOString():Um.isObject(v)&&(v=JSON.stringify(v)),s.push(are(h)+"="+are(v))}))}),a=s.join("&")}if(a){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}});var ure=ne((ZMt,ore)=>{"use strict";var KGe=ji();function a3(){this.handlers=[]}a3.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};a3.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};a3.prototype.forEach=function(e){KGe.forEach(this.handlers,function(n){n!==null&&e(n)})};ore.exports=a3});var lre=ne((JMt,fre)=>{"use strict";var ZGe=ji();fre.exports=function(e,r){ZGe.forEach(e,function(a,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=a,delete e[s])})}});var ld=ne((YMt,pre)=>{"use strict";var cre=ji();function Vm(t,e,r,n,a){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a)}cre.inherits(Vm,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var hre=Vm.prototype,dre={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){dre[t]={value:t}});Object.defineProperties(Vm,dre);Object.defineProperty(hre,"isAxiosError",{value:!0});Vm.from=function(t,e,r,n,a,s){var o=Object.create(hre);return cre.toFlatObject(t,o,function(l){return l!==Error.prototype}),Vm.call(o,t.message,e,r,n,a),o.name=t.name,s&&Object.assign(o,s),o};pre.exports=Vm});var XD=ne((XMt,mre)=>{"use strict";mre.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}});var QD=ne((QMt,vre)=>{"use strict";var Qo=ji();function JGe(t,e){e=e||new FormData;var r=[];function n(s){return s===null?"":Qo.isDate(s)?s.toISOString():Qo.isArrayBuffer(s)||Qo.isTypedArray(s)?typeof Blob=="function"?new Blob([s]):Buffer.from(s):s}function a(s,o){if(Qo.isPlainObject(s)||Qo.isArray(s)){if(r.indexOf(s)!==-1)throw Error("Circular reference detected in "+o);r.push(s),Qo.forEach(s,function(l,h){if(!Qo.isUndefined(l)){var p=o?o+"."+h:h,v;if(l&&!o&&typeof l=="object"){if(Qo.endsWith(h,"{}"))l=JSON.stringify(l);else if(Qo.endsWith(h,"[]")&&(v=Qo.toArray(l))){v.forEach(function(y){!Qo.isUndefined(y)&&e.append(p,n(y))});return}}a(l,p)}}),r.pop()}else e.append(o,n(s))}return a(t),e}vre.exports=JGe});var yre=ne((eAt,gre)=>{"use strict";var e8=ld();gre.exports=function(e,r,n){var a=n.config.validateStatus;!n.status||!a||a(n.status)?e(n):r(new e8("Request failed with status code "+n.status,[e8.ERR_BAD_REQUEST,e8.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}});var wre=ne((tAt,bre)=>{"use strict";var s3=ji();bre.exports=s3.isStandardBrowserEnv()?function(){return{write:function(r,n,a,s,o,u){var l=[];l.push(r+"="+encodeURIComponent(n)),s3.isNumber(a)&&l.push("expires="+new Date(a).toGMTString()),s3.isString(s)&&l.push("path="+s),s3.isString(o)&&l.push("domain="+o),u===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var xre=ne((rAt,_re)=>{"use strict";_re.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}});var Ere=ne((nAt,Sre)=>{"use strict";Sre.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}});var t8=ne((iAt,Mre)=>{"use strict";var YGe=xre(),XGe=Ere();Mre.exports=function(e,r){return e&&!YGe(r)?XGe(e,r):r}});var kre=ne((aAt,Are)=>{"use strict";var r8=ji(),QGe=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Are.exports=function(e){var r={},n,a,s;return e&&r8.forEach(e.split(`
`),function(u){if(s=u.indexOf(":"),n=r8.trim(u.substr(0,s)).toLowerCase(),a=r8.trim(u.substr(s+1)),n){if(r[n]&&QGe.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([a]):r[n]=r[n]?r[n]+", "+a:a}}),r}});var Ire=ne((sAt,Nre)=>{"use strict";var Tre=ji();Nre.exports=Tre.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function a(s){var o=s;return e&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=a(window.location.href),function(o){var u=Tre.isString(o)?a(o):o;return u.protocol===n.protocol&&u.host===n.host}}():function(){return function(){return!0}}()});var x1=ne((oAt,Ore)=>{"use strict";var n8=ld(),eHe=ji();function Dre(t){n8.call(this,t==null?"canceled":t,n8.ERR_CANCELED),this.name="CanceledError"}eHe.inherits(Dre,n8,{__CANCEL__:!0});Ore.exports=Dre});var Cre=ne((uAt,Rre)=>{"use strict";Rre.exports=function(e){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}});var i8=ne((fAt,Fre)=>{"use strict";var S1=ji(),tHe=yre(),rHe=wre(),nHe=YD(),iHe=t8(),aHe=kre(),sHe=Ire(),oHe=XD(),Uf=ld(),uHe=x1(),fHe=Cre();Fre.exports=function(e){return new Promise(function(n,a){var s=e.data,o=e.headers,u=e.responseType,l;function h(){e.cancelToken&&e.cancelToken.unsubscribe(l),e.signal&&e.signal.removeEventListener("abort",l)}S1.isFormData(s)&&S1.isStandardBrowserEnv()&&delete o["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var v=e.auth.username||"",y=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(v+":"+y)}var S=iHe(e.baseURL,e.url);p.open(e.method.toUpperCase(),nHe(S,e.params,e.paramsSerializer),!0),p.timeout=e.timeout;function A(){if(!!p){var N="getAllResponseHeaders"in p?aHe(p.getAllResponseHeaders()):null,D=!u||u==="text"||u==="json"?p.responseText:p.response,C={data:D,status:p.status,statusText:p.statusText,headers:N,config:e,request:p};tHe(function(z){n(z),h()},function(z){a(z),h()},C),p=null}}if("onloadend"in p?p.onloadend=A:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(A)},p.onabort=function(){!p||(a(new Uf("Request aborted",Uf.ECONNABORTED,e,p)),p=null)},p.onerror=function(){a(new Uf("Network Error",Uf.ERR_NETWORK,e,p,p)),p=null},p.ontimeout=function(){var D=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",C=e.transitional||oHe;e.timeoutErrorMessage&&(D=e.timeoutErrorMessage),a(new Uf(D,C.clarifyTimeoutError?Uf.ETIMEDOUT:Uf.ECONNABORTED,e,p)),p=null},S1.isStandardBrowserEnv()){var T=(e.withCredentials||sHe(S))&&e.xsrfCookieName?rHe.read(e.xsrfCookieName):void 0;T&&(o[e.xsrfHeaderName]=T)}"setRequestHeader"in p&&S1.forEach(o,function(D,C){typeof s=="undefined"&&C.toLowerCase()==="content-type"?delete o[C]:p.setRequestHeader(C,D)}),S1.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),u&&u!=="json"&&(p.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&p.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(l=function(N){!p||(a(!N||N&&N.type?new uHe:N),p.abort(),p=null)},e.cancelToken&&e.cancelToken.subscribe(l),e.signal&&(e.signal.aborted?l():e.signal.addEventListener("abort",l))),s||(s=null);var I=fHe(S);if(I&&["http","https","file"].indexOf(I)===-1){a(new Uf("Unsupported protocol "+I+":",Uf.ERR_BAD_REQUEST,e));return}p.send(s)})}});var Lre=ne((lAt,Bre)=>{Bre.exports=null});var u3=ne((cAt,zre)=>{"use strict";var Ui=ji(),Pre=lre(),qre=ld(),lHe=XD(),cHe=QD(),hHe={"Content-Type":"application/x-www-form-urlencoded"};function $re(t,e){!Ui.isUndefined(t)&&Ui.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function dHe(){var t;return typeof XMLHttpRequest!="undefined"?t=i8():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(t=i8()),t}function pHe(t,e,r){if(Ui.isString(t))try{return(e||JSON.parse)(t),Ui.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var o3={transitional:lHe,adapter:dHe(),transformRequest:[function(e,r){if(Pre(r,"Accept"),Pre(r,"Content-Type"),Ui.isFormData(e)||Ui.isArrayBuffer(e)||Ui.isBuffer(e)||Ui.isStream(e)||Ui.isFile(e)||Ui.isBlob(e))return e;if(Ui.isArrayBufferView(e))return e.buffer;if(Ui.isURLSearchParams(e))return $re(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n=Ui.isObject(e),a=r&&r["Content-Type"],s;if((s=Ui.isFileList(e))||n&&a==="multipart/form-data"){var o=this.env&&this.env.FormData;return cHe(s?{"files[]":e}:e,o&&new o)}else if(n||a==="application/json")return $re(r,"application/json"),pHe(e);return e}],transformResponse:[function(e){var r=this.transitional||o3.transitional,n=r&&r.silentJSONParsing,a=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||a&&Ui.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?qre.from(o,qre.ERR_BAD_RESPONSE,this,null,this.response):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Lre()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ui.forEach(["delete","get","head"],function(e){o3.headers[e]={}});Ui.forEach(["post","put","patch"],function(e){o3.headers[e]=Ui.merge(hHe)});zre.exports=o3});var Ure=ne((hAt,jre)=>{"use strict";var mHe=ji(),vHe=u3();jre.exports=function(e,r,n){var a=this||vHe;return mHe.forEach(n,function(o){e=o.call(a,e,r)}),e}});var a8=ne((dAt,Vre)=>{"use strict";Vre.exports=function(e){return!!(e&&e.__CANCEL__)}});var Hre=ne((pAt,Gre)=>{"use strict";var Wre=ji(),s8=Ure(),gHe=a8(),yHe=u3(),bHe=x1();function o8(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new bHe}Gre.exports=function(e){o8(e),e.headers=e.headers||{},e.data=s8.call(e,e.data,e.headers,e.transformRequest),e.headers=Wre.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Wre.forEach(["delete","get","head","post","put","patch","common"],function(a){delete e.headers[a]});var r=e.adapter||yHe.adapter;return r(e).then(function(a){return o8(e),a.data=s8.call(e,a.data,a.headers,e.transformResponse),a},function(a){return gHe(a)||(o8(e),a&&a.response&&(a.response.data=s8.call(e,a.response.data,a.response.headers,e.transformResponse))),Promise.reject(a)})}});var u8=ne((mAt,Kre)=>{"use strict";var ds=ji();Kre.exports=function(e,r){r=r||{};var n={};function a(p,v){return ds.isPlainObject(p)&&ds.isPlainObject(v)?ds.merge(p,v):ds.isPlainObject(v)?ds.merge({},v):ds.isArray(v)?v.slice():v}function s(p){if(ds.isUndefined(r[p])){if(!ds.isUndefined(e[p]))return a(void 0,e[p])}else return a(e[p],r[p])}function o(p){if(!ds.isUndefined(r[p]))return a(void 0,r[p])}function u(p){if(ds.isUndefined(r[p])){if(!ds.isUndefined(e[p]))return a(void 0,e[p])}else return a(void 0,r[p])}function l(p){if(p in r)return a(e[p],r[p]);if(p in e)return a(void 0,e[p])}var h={url:o,method:o,data:o,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:l};return ds.forEach(Object.keys(e).concat(Object.keys(r)),function(v){var y=h[v]||s,S=y(v);ds.isUndefined(S)&&y!==l||(n[v]=S)}),n}});var f8=ne((vAt,Zre)=>{Zre.exports={version:"0.27.2"}});var Xre=ne((gAt,Yre)=>{"use strict";var wHe=f8().version,rc=ld(),l8={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){l8[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Jre={};l8.transitional=function(e,r,n){function a(s,o){return"[Axios v"+wHe+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,u){if(e===!1)throw new rc(a(o," has been removed"+(r?" in "+r:"")),rc.ERR_DEPRECATED);return r&&!Jre[o]&&(Jre[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,u):!0}};function _He(t,e,r){if(typeof t!="object")throw new rc("options must be an object",rc.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),a=n.length;a-- >0;){var s=n[a],o=e[s];if(o){var u=t[s],l=u===void 0||o(u,s,t);if(l!==!0)throw new rc("option "+s+" must be "+l,rc.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new rc("Unknown option "+s,rc.ERR_BAD_OPTION)}}Yre.exports={assertOptions:_He,validators:l8}});var ine=ne((yAt,nne)=>{"use strict";var tne=ji(),xHe=YD(),Qre=ure(),ene=Hre(),f3=u8(),SHe=t8(),rne=Xre(),Wm=rne.validators;function Gm(t){this.defaults=t,this.interceptors={request:new Qre,response:new Qre}}Gm.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=f3(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&rne.assertOptions(n,{silentJSONParsing:Wm.transitional(Wm.boolean),forcedJSONParsing:Wm.transitional(Wm.boolean),clarifyTimeoutError:Wm.transitional(Wm.boolean)},!1);var a=[],s=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(r)===!1||(s=s&&S.synchronous,a.unshift(S.fulfilled,S.rejected))});var o=[];this.interceptors.response.forEach(function(S){o.push(S.fulfilled,S.rejected)});var u;if(!s){var l=[ene,void 0];for(Array.prototype.unshift.apply(l,a),l=l.concat(o),u=Promise.resolve(r);l.length;)u=u.then(l.shift(),l.shift());return u}for(var h=r;a.length;){var p=a.shift(),v=a.shift();try{h=p(h)}catch(y){v(y);break}}try{u=ene(h)}catch(y){return Promise.reject(y)}for(;o.length;)u=u.then(o.shift(),o.shift());return u};Gm.prototype.getUri=function(e){e=f3(this.defaults,e);var r=SHe(e.baseURL,e.url);return xHe(r,e.params,e.paramsSerializer)};tne.forEach(["delete","get","head","options"],function(e){Gm.prototype[e]=function(r,n){return this.request(f3(n||{},{method:e,url:r,data:(n||{}).data}))}});tne.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,u){return this.request(f3(u||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Gm.prototype[e]=r(),Gm.prototype[e+"Form"]=r(!0)});nne.exports=Gm});var sne=ne((bAt,ane)=>{"use strict";var EHe=x1();function Hm(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(a){e=a});var r=this;this.promise.then(function(n){if(!!r._listeners){var a,s=r._listeners.length;for(a=0;a<s;a++)r._listeners[a](n);r._listeners=null}}),this.promise.then=function(n){var a,s=new Promise(function(o){r.subscribe(o),a=o}).then(n);return s.cancel=function(){r.unsubscribe(a)},s},t(function(a){r.reason||(r.reason=new EHe(a),e(r.reason))})}Hm.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Hm.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Hm.prototype.unsubscribe=function(e){if(!!this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};Hm.source=function(){var e,r=new Hm(function(a){e=a});return{token:r,cancel:e}};ane.exports=Hm});var une=ne((wAt,one)=>{"use strict";one.exports=function(e){return function(n){return e.apply(null,n)}}});var lne=ne((_At,fne)=>{"use strict";var MHe=ji();fne.exports=function(e){return MHe.isObject(e)&&e.isAxiosError===!0}});var dne=ne((xAt,c8)=>{"use strict";var cne=ji(),AHe=VD(),l3=ine(),kHe=u8(),THe=u3();function hne(t){var e=new l3(t),r=AHe(l3.prototype.request,e);return cne.extend(r,l3.prototype,e),cne.extend(r,e),r.create=function(a){return hne(kHe(t,a))},r}var Ya=hne(THe);Ya.Axios=l3;Ya.CanceledError=x1();Ya.CancelToken=sne();Ya.isCancel=a8();Ya.VERSION=f8().version;Ya.toFormData=QD();Ya.AxiosError=ld();Ya.Cancel=Ya.CanceledError;Ya.all=function(e){return Promise.all(e)};Ya.spread=une();Ya.isAxiosError=lne();c8.exports=Ya;c8.exports.default=Ya});var h8=ne((SAt,pne)=>{pne.exports=dne()});var gne=ne((AAt,vne)=>{"use strict";function OHe(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}vne.exports=OHe});var wne=ne((kAt,bne)=>{bne.exports=function(t){return t!=null&&(yne(t)||RHe(t)||!!t._isBuffer)};function yne(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function RHe(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&yne(t.slice(0,0))}});var cd=ne((TAt,_ne)=>{var CHe=gne(),FHe=wne(),BHe=typeof Float64Array!="undefined";function LHe(t,e){return t[0]-e[0]}function PHe(){var t=this.stride,e=new Array(t.length),r;for(r=0;r<e.length;++r)e[r]=[Math.abs(t[r]),r];e.sort(LHe);var n=new Array(e.length);for(r=0;r<n.length;++r)n[r]=e[r][1];return n}function qHe(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var n=t==="generic";if(e===-1){var a="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",T=new Function(a);return T()}else if(e===0){var a="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",T=new Function("TrivialArray",a);return T(d3[t][0])}var a=["'use strict'"],s=CHe(e),o=s.map(function(I){return"i"+I}),u="this.offset+"+s.map(function(I){return"this.stride["+I+"]*i"+I}).join("+"),l=s.map(function(I){return"b"+I}).join(","),h=s.map(function(I){return"c"+I}).join(",");a.push("function "+r+"(a,"+l+","+h+",d){this.data=a","this.shape=["+l+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),a.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+s.map(function(I){return"this.shape["+I+"]"}).join("*"),"}})"),e===1?a.push("proto.order=[0]"):(a.push("Object.defineProperty(proto,'order',{get:"),e<4?(a.push("function "+r+"_order(){"),e===2?a.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):e===3&&a.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):a.push("ORDER})")),a.push("proto.set=function "+r+"_set("+o.join(",")+",v){"),n?a.push("return this.data.set("+u+",v)}"):a.push("return this.data["+u+"]=v}"),a.push("proto.get=function "+r+"_get("+o.join(",")+"){"),n?a.push("return this.data.get("+u+")}"):a.push("return this.data["+u+"]}"),a.push("proto.index=function "+r+"_index(",o.join(),"){return "+u+"}"),a.push("proto.hi=function "+r+"_hi("+o.join(",")+"){return new "+r+"(this.data,"+s.map(function(I){return["(typeof i",I,"!=='number'||i",I,"<0)?this.shape[",I,"]:i",I,"|0"].join("")}).join(",")+","+s.map(function(I){return"this.stride["+I+"]"}).join(",")+",this.offset)}");var p=s.map(function(I){return"a"+I+"=this.shape["+I+"]"}),v=s.map(function(I){return"c"+I+"=this.stride["+I+"]"});a.push("proto.lo=function "+r+"_lo("+o.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+v.join(","));for(var y=0;y<e;++y)a.push("if(typeof i"+y+"==='number'&&i"+y+">=0){d=i"+y+"|0;b+=c"+y+"*d;a"+y+"-=d}");a.push("return new "+r+"(this.data,"+s.map(function(I){return"a"+I}).join(",")+","+s.map(function(I){return"c"+I}).join(",")+",b)}"),a.push("proto.step=function "+r+"_step("+o.join(",")+"){var "+s.map(function(I){return"a"+I+"=this.shape["+I+"]"}).join(",")+","+s.map(function(I){return"b"+I+"=this.stride["+I+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var y=0;y<e;++y)a.push("if(typeof i"+y+"==='number'){d=i"+y+"|0;if(d<0){c+=b"+y+"*(a"+y+"-1);a"+y+"=ceil(-a"+y+"/d)}else{a"+y+"=ceil(a"+y+"/d)}b"+y+"*=d}");a.push("return new "+r+"(this.data,"+s.map(function(I){return"a"+I}).join(",")+","+s.map(function(I){return"b"+I}).join(",")+",c)}");for(var S=new Array(e),A=new Array(e),y=0;y<e;++y)S[y]="a[i"+y+"]",A[y]="b[i"+y+"]";a.push("proto.transpose=function "+r+"_transpose("+o+"){"+o.map(function(I,N){return I+"=("+I+"===undefined?"+N+":"+I+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+S.join(",")+","+A.join(",")+",this.offset)}"),a.push("proto.pick=function "+r+"_pick("+o+"){var a=[],b=[],c=this.offset");for(var y=0;y<e;++y)a.push("if(typeof i"+y+"==='number'&&i"+y+">=0){c=(c+this.stride["+y+"]*i"+y+")|0}else{a.push(this.shape["+y+"]);b.push(this.stride["+y+"])}");a.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),a.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+s.map(function(I){return"shape["+I+"]"}).join(",")+","+s.map(function(I){return"stride["+I+"]"}).join(",")+",offset)}");var T=new Function("CTOR_LIST","ORDER",a.join(`
`));return T(d3[t],PHe)}function $He(t){if(FHe(t))return"buffer";if(BHe)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}var d3={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function zHe(t,e,r,n){if(t===void 0){var h=d3.array[0];return h([])}else typeof t=="number"&&(t=[t]);e===void 0&&(e=[t.length]);var a=e.length;if(r===void 0){r=new Array(a);for(var s=a-1,o=1;s>=0;--s)r[s]=o,o*=e[s]}if(n===void 0){n=0;for(var s=0;s<a;++s)r[s]<0&&(n-=(e[s]-1)*r[s])}for(var u=$He(t),l=d3[u];l.length<=a+1;)l.push(qHe(u,l.length-1));var h=l[a+1];return h(t,e,r,n)}_ne.exports=zHe});var d8=ne((NAt,xne)=>{"use strict";function jHe(t,e){for(var r=1,n=t.length,a=t[0],s=t[0],o=1;o<n;++o)if(s=a,a=t[o],e(a,s)){if(o===r){r++;continue}t[r++]=a}return t.length=r,t}function UHe(t){for(var e=1,r=t.length,n=t[0],a=t[0],s=1;s<r;++s,a=n)if(a=n,n=t[s],n!==a){if(s===e){e++;continue}t[e++]=n}return t.length=e,t}function VHe(t,e,r){return t.length===0?t:e?(r||t.sort(e),jHe(t,e)):(r||t.sort(),UHe(t))}xne.exports=VHe});var Mne=ne((IAt,Ene)=>{"use strict";var WHe=d8();function Sne(t,e,r){var n=t.length,a=e.arrayArgs.length,s=e.indexArgs.length>0,o=[],u=[],l=0,h=0,p,v;for(p=0;p<n;++p)u.push(["i",p,"=0"].join(""));for(v=0;v<a;++v)for(p=0;p<n;++p)h=l,l=t[p],p===0?u.push(["d",v,"s",p,"=t",v,"p",l].join("")):u.push(["d",v,"s",p,"=(t",v,"p",l,"-s",h,"*t",v,"p",h,")"].join(""));for(u.length>0&&o.push("var "+u.join(",")),p=n-1;p>=0;--p)l=t[p],o.push(["for(i",p,"=0;i",p,"<s",l,";++i",p,"){"].join(""));for(o.push(r),p=0;p<n;++p){for(h=l,l=t[p],v=0;v<a;++v)o.push(["p",v,"+=d",v,"s",p].join(""));s&&(p>0&&o.push(["index[",h,"]-=s",h].join("")),o.push(["++index[",l,"]"].join(""))),o.push("}")}return o.join(`
`)}function GHe(t,e,r,n){for(var a=e.length,s=r.arrayArgs.length,o=r.blockSize,u=r.indexArgs.length>0,l=[],h=0;h<s;++h)l.push(["var offset",h,"=p",h].join(""));for(var h=t;h<a;++h)l.push(["for(var j"+h+"=SS[",e[h],"]|0;j",h,">0;){"].join("")),l.push(["if(j",h,"<",o,"){"].join("")),l.push(["s",e[h],"=j",h].join("")),l.push(["j",h,"=0"].join("")),l.push(["}else{s",e[h],"=",o].join("")),l.push(["j",h,"-=",o,"}"].join("")),u&&l.push(["index[",e[h],"]=j",h].join(""));for(var h=0;h<s;++h){for(var p=["offset"+h],v=t;v<a;++v)p.push(["j",v,"*t",h,"p",e[v]].join(""));l.push(["p",h,"=(",p.join("+"),")"].join(""))}l.push(Sne(e,r,n));for(var h=t;h<a;++h)l.push("}");return l.join(`
`)}function HHe(t){for(var e=0,r=t[0].length;e<r;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}function p8(t,e,r){for(var n=t.body,a=[],s=[],o=0;o<t.args.length;++o){var u=t.args[o];if(!(u.count<=0)){var l=new RegExp(u.name,"g"),h="",p=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var v=e.offsetArgIndex.indexOf(o),y=e.offsetArgs[v];p=y.array,h="+q"+v;case"array":h="p"+p+h;var S="l"+o,A="a"+p;if(e.arrayBlockIndices[p]===0)u.count===1?r[p]==="generic"?u.lvalue?(a.push(["var ",S,"=",A,".get(",h,")"].join("")),n=n.replace(l,S),s.push([A,".set(",h,",",S,")"].join(""))):n=n.replace(l,[A,".get(",h,")"].join("")):n=n.replace(l,[A,"[",h,"]"].join("")):r[p]==="generic"?(a.push(["var ",S,"=",A,".get(",h,")"].join("")),n=n.replace(l,S),u.lvalue&&s.push([A,".set(",h,",",S,")"].join(""))):(a.push(["var ",S,"=",A,"[",h,"]"].join("")),n=n.replace(l,S),u.lvalue&&s.push([A,"[",h,"]=",S].join("")));else{for(var T=[u.name],I=[h],N=0;N<Math.abs(e.arrayBlockIndices[p]);N++)T.push("\\s*\\[([^\\]]+)\\]"),I.push("$"+(N+1)+"*t"+p+"b"+N);if(l=new RegExp(T.join(""),"g"),h=I.join("+"),r[p]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(l,[A,"[",h,"]"].join(""))}break;case"scalar":n=n.replace(l,"Y"+e.scalarArgs.indexOf(o));break;case"index":n=n.replace(l,"index");break;case"shape":n=n.replace(l,"shape");break}}}return[a.join(`
`),n,s.join(`
`)].join(`
`).trim()}function KHe(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var a=t[n],s=a.match(/\d+/);s?s=s[0]:s="",a.charAt(0)===0?e[n]="u"+a.charAt(1)+s:e[n]=a.charAt(0)+s,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}function ZHe(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,n=new Array(t.arrayArgs.length),a=new Array(t.arrayArgs.length),s=0;s<t.arrayArgs.length;++s)a[s]=e[2*s],n[s]=e[2*s+1];for(var o=[],u=[],l=[],h=[],p=[],s=0;s<t.arrayArgs.length;++s){t.arrayBlockIndices[s]<0?(l.push(0),h.push(r),o.push(r),u.push(r+t.arrayBlockIndices[s])):(l.push(t.arrayBlockIndices[s]),h.push(t.arrayBlockIndices[s]+r),o.push(0),u.push(t.arrayBlockIndices[s]));for(var v=[],y=0;y<n[s].length;y++)l[s]<=n[s][y]&&n[s][y]<h[s]&&v.push(n[s][y]-l[s]);p.push(v)}for(var S=["SS"],A=["'use strict'"],T=[],y=0;y<r;++y)T.push(["s",y,"=SS[",y,"]"].join(""));for(var s=0;s<t.arrayArgs.length;++s){S.push("a"+s),S.push("t"+s),S.push("p"+s);for(var y=0;y<r;++y)T.push(["t",s,"p",y,"=t",s,"[",l[s]+y,"]"].join(""));for(var y=0;y<Math.abs(t.arrayBlockIndices[s]);++y)T.push(["t",s,"b",y,"=t",s,"[",o[s]+y,"]"].join(""))}for(var s=0;s<t.scalarArgs.length;++s)S.push("Y"+s);if(t.shapeArgs.length>0&&T.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var I=new Array(r),s=0;s<r;++s)I[s]="0";T.push(["index=[",I.join(","),"]"].join(""))}for(var s=0;s<t.offsetArgs.length;++s){for(var N=t.offsetArgs[s],D=[],y=0;y<N.offset.length;++y)N.offset[y]!==0&&(N.offset[y]===1?D.push(["t",N.array,"p",y].join("")):D.push([N.offset[y],"*t",N.array,"p",y].join("")));D.length===0?T.push("q"+s+"=0"):T.push(["q",s,"=",D.join("+")].join(""))}var C=WHe([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));T=T.concat(C),T.length>0&&A.push("var "+T.join(","));for(var s=0;s<t.arrayArgs.length;++s)A.push("p"+s+"|=0");t.pre.body.length>3&&A.push(p8(t.pre,t,a));var L=p8(t.body,t,a),z=HHe(p);z<r?A.push(GHe(z,p[0],t,L)):A.push(Sne(p[0],t,L)),t.post.body.length>3&&A.push(p8(t.post,t,a)),t.debug&&console.log("-----Generated cwise routine for ",e,`:
`+A.join(`
`)+`
----------`);var $=[t.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",z,KHe(a)].join(""),G=new Function(["function ",$,"(",S.join(","),"){",A.join(`
`),"} return ",$].join(""));return G()}Ene.exports=ZHe});var kne=ne((DAt,Ane)=>{"use strict";var JHe=Mne();function YHe(t){var e=["'use strict'","var CACHED={}"],r=[],n=t.funcName+"_cwise_thunk";e.push(["return function ",n,"(",t.shimArgs.join(","),"){"].join(""));for(var a=[],s=[],o=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],u=[],l=[],h=0;h<t.arrayArgs.length;++h){var p=t.arrayArgs[h];r.push(["t",p,"=array",p,".dtype,","r",p,"=array",p,".order"].join("")),a.push("t"+p),a.push("r"+p),s.push("t"+p),s.push("r"+p+".join()"),o.push("array"+p+".data"),o.push("array"+p+".stride"),o.push("array"+p+".offset|0"),h>0&&(u.push("array"+t.arrayArgs[0]+".shape.length===array"+p+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[h]))),l.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+p+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[h])+"]"))}t.arrayArgs.length>1&&(e.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(var h=0;h<t.scalarArgs.length;++h)o.push("scalar"+t.scalarArgs[h]);r.push(["type=[",s.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",a.join(","),"])}","return proc(",o.join(","),")}"].join("")),t.debug&&console.log(`-----Generated thunk:
`+e.join(`
`)+`
----------`);var v=new Function("compile",e.join(`
`));return v(JHe.bind(void 0,t))}Ane.exports=YHe});var p3=ne((OAt,Tne)=>{"use strict";var XHe=kne();function QHe(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function eKe(t){var e=new QHe;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var n=0;n<r.length;++n){var a=r[n];if(a==="array"||typeof a=="object"&&a.blockIndices){if(e.argTypes[n]="array",e.arrayArgs.push(n),e.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),e.shimArgs.push("array"+n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if(a==="scalar")e.scalarArgs.push(n),e.shimArgs.push("scalar"+n);else if(a==="index"){if(e.indexArgs.push(n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if(a==="shape"){if(e.shapeArgs.push(n),n<e.pre.args.length&&e.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<e.post.args.length&&e.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof a=="object"&&a.offset)e.argTypes[n]="offset",e.offsetArgs.push({array:a.array,offset:a.offset}),e.offsetArgIndex.push(n);else throw new Error("cwise: Unknown argument type "+r[n])}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,XHe(e)}Tne.exports=eKe});var v3=ne(ur=>{"use strict";var Xa=p3(),m3={body:"",args:[],thisVars:[],localVars:[]};function m8(t){if(!t)return m3;for(var e=0;e<t.args.length;++e){var r=t.args[e];e===0?t.args[e]={name:r,lvalue:!0,rvalue:!!t.rvalue,count:t.count||1}:t.args[e]={name:r,lvalue:!1,rvalue:!0,count:1}}return t.thisVars||(t.thisVars=[]),t.localVars||(t.localVars=[]),t}function tKe(t){return Xa({args:t.args,pre:m8(t.pre),body:m8(t.body),post:m8(t.proc),funcName:t.funcName})}function Yn(t){for(var e=[],r=0;r<t.args.length;++r)e.push("a"+r);var n=new Function("P",["return function ",t.funcName,"_ndarrayops(",e.join(","),") {P(",e.join(","),");return a0}"].join(""));return n(tKe(t))}var Nne={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var t in Nne){var e=Nne[t];ur[t]=Yn({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),ur[t+"eq"]=Yn({args:["array","array"],body:{args:["a","b"],body:"a"+e+"=b"},rvalue:!0,funcName:t+"eq"}),ur[t+"s"]=Yn({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),ur[t+"seq"]=Yn({args:["array","scalar"],body:{args:["a","s"],body:"a"+e+"=s"},rvalue:!0,funcName:t+"seq"})}})();var Ine={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var t in Ine){var e=Ine[t];ur[t]=Yn({args:["array","array"],body:{args:["a","b"],body:"a="+e+"b"},funcName:t}),ur[t+"eq"]=Yn({args:["array"],body:{args:["a"],body:"a="+e+"a"},rvalue:!0,count:2,funcName:t+"eq"})}})();var Dne={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var t in Dne){var e=Dne[t];ur[t]=Yn({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),ur[t+"s"]=Yn({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),ur[t+"eq"]=Yn({args:["array","array"],body:{args:["a","b"],body:"a=a"+e+"b"},rvalue:!0,count:2,funcName:t+"eq"}),ur[t+"seq"]=Yn({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+e+"s"},rvalue:!0,count:2,funcName:t+"seq"})}})();var One=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var t=0;t<One.length;++t){var e=One[t];ur[e]=Yn({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:e}),ur[e+"eq"]=Yn({args:["array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"})}})();var Rne=["max","min","atan2","pow"];(function(){for(var t=0;t<Rne.length;++t){var e=Rne[t];ur[e]=Yn({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e}),ur[e+"s"]=Yn({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e+"s"}),ur[e+"eq"]=Yn({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"}),ur[e+"seq"]=Yn({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"seq"})}})();var Cne=["atan2","pow"];(function(){for(var t=0;t<Cne.length;++t){var e=Cne[t];ur[e+"op"]=Yn({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"op"}),ur[e+"ops"]=Yn({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"ops"}),ur[e+"opeq"]=Yn({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opeq"}),ur[e+"opseq"]=Yn({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opseq"})}})();ur.any=Xa({args:["array"],pre:m3,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});ur.all=Xa({args:["array"],pre:m3,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"});ur.sum=Xa({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});ur.prod=Xa({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"});ur.norm2squared=Xa({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});ur.norm2=Xa({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"});ur.norminf=Xa({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"});ur.norm1=Xa({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});ur.sup=Xa({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});ur.inf=Xa({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});ur.argmin=Xa({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});ur.argmax=Xa({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});ur.random=Yn({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"});ur.assign=Yn({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"});ur.assigns=Yn({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"});ur.equals=Xa({args:["array","array"],pre:m3,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})});var Bne=ne((CAt,Fne)=>{Fne.exports=p3()({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
var _inline_1_v=_inline_1_arg1_,_inline_1_i
for(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {
_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]
}
_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]
}`,args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})});var qne=ne((FAt,Pne)=>{"use strict";var Lne=cd(),rKe=Bne();Pne.exports=function(e,r){for(var n=[],a=e,s=1;Array.isArray(a);)n.push(a.length),s*=a.length,a=a[0];return n.length===0?Lne():(r||(r=Lne(new Float64Array(s),n)),rKe(r,e),r)}});var jne=ne((BAt,zne)=>{"use strict";function $ne(t,e,r){var n=t[r]|0;if(n<=0)return[];var a=new Array(n),s;if(r===t.length-1)for(s=0;s<n;++s)a[s]=e;else for(s=0;s<n;++s)a[s]=$ne(t,e,r+1);return a}function nKe(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}function iKe(t,e){switch(typeof e=="undefined"&&(e=0),typeof t){case"number":if(t>0)return nKe(t|0,e);break;case"object":if(typeof t.length=="number")return $ne(t,e,0);break}return[]}zne.exports=iKe});var Une=ne(g3=>{(function(t,e){"use strict";typeof define=="function"&&define.amd?define(["exports"],e):e(typeof g3!="undefined"?g3:t.esprima={})})(g3,function(t){"use strict";var e,r,n,a,s,o,u,l,h,p,v,y,S,A,T,I,N,D;e={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},r={},r[e.BooleanLiteral]="Boolean",r[e.EOF]="<end>",r[e.Identifier]="Identifier",r[e.Keyword]="Keyword",r[e.NullLiteral]="Null",r[e.NumericLiteral]="Numeric",r[e.Punctuator]="Punctuator",r[e.StringLiteral]="String",r[e.RegularExpression]="RegularExpression",n=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],a={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},s={Data:1,Get:2,Set:4},o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},u={NonAsciiIdentifierStart:new RegExp("[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]"),NonAsciiIdentifierPart:new RegExp("[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0\u08A2-\u08AC\u08E4-\u08FE\u0900-\u0963\u0966-\u096F\u0971-\u0977\u0979-\u097F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1D00-\u1DE6\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA697\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7B\uAA80-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]")};function C(P,Z){if(!P)throw new Error("ASSERT: "+Z)}function L(P){return P>=48&&P<=57}function z(P){return"0123456789abcdefABCDEF".indexOf(P)>=0}function $(P){return"01234567".indexOf(P)>=0}function G(P){return P===32||P===9||P===11||P===12||P===160||P>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(P)>=0}function j(P){return P===10||P===13||P===8232||P===8233}function K(P){return P===36||P===95||P>=65&&P<=90||P>=97&&P<=122||P===92||P>=128&&u.NonAsciiIdentifierStart.test(String.fromCharCode(P))}function M(P){return P===36||P===95||P>=65&&P<=90||P>=97&&P<=122||P>=48&&P<=57||P===92||P>=128&&u.NonAsciiIdentifierPart.test(String.fromCharCode(P))}function f(P){switch(P){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function d(P){switch(P){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function g(P){return P==="eval"||P==="arguments"}function m(P){if(p&&d(P))return!0;switch(P.length){case 2:return P==="if"||P==="in"||P==="do";case 3:return P==="var"||P==="for"||P==="new"||P==="try"||P==="let";case 4:return P==="this"||P==="else"||P==="case"||P==="void"||P==="with"||P==="enum";case 5:return P==="while"||P==="break"||P==="catch"||P==="throw"||P==="const"||P==="yield"||P==="class"||P==="super";case 6:return P==="return"||P==="typeof"||P==="delete"||P==="switch"||P==="export"||P==="import";case 7:return P==="default"||P==="finally"||P==="extends";case 8:return P==="function"||P==="continue"||P==="debugger";case 10:return P==="instanceof";default:return!1}}function b(P,Z,oe,Me,Qe){var dt,Zt;C(typeof oe=="number","Comment must have valid position"),!(N.lastCommentStart>=oe)&&(N.lastCommentStart=oe,dt={type:P,value:Z},D.range&&(dt.range=[oe,Me]),D.loc&&(dt.loc=Qe),D.comments.push(dt),D.attachComment&&(D.leadingComments.push(dt),D.trailingComments.push(dt)))}function E(P){var Z,oe,Me,Qe;for(Z=v-P,oe={start:{line:y,column:v-S-P}};v<A;)if(Me=h.charCodeAt(v),++v,j(Me)){D.comments&&(Qe=h.slice(Z+P,v-1),oe.end={line:y,column:v-S-1},b("Line",Qe,Z,v-1,oe)),Me===13&&h.charCodeAt(v)===10&&++v,++y,S=v;return}D.comments&&(Qe=h.slice(Z+P,v),oe.end={line:y,column:v-S},b("Line",Qe,Z,v,oe))}function k(){var P,Z,oe,Me;for(D.comments&&(P=v-2,Z={start:{line:y,column:v-S-2}});v<A;)if(oe=h.charCodeAt(v),j(oe))oe===13&&h.charCodeAt(v+1)===10&&++v,++y,++v,S=v,v>=A&&ee({},o.UnexpectedToken,"ILLEGAL");else if(oe===42){if(h.charCodeAt(v+1)===47){++v,++v,D.comments&&(Me=h.slice(P+2,v-2),Z.end={line:y,column:v-S},b("Block",Me,P,v,Z));return}++v}else++v;ee({},o.UnexpectedToken,"ILLEGAL")}function w(){var P,Z;for(Z=v===0;v<A;)if(P=h.charCodeAt(v),G(P))++v;else if(j(P))++v,P===13&&h.charCodeAt(v)===10&&++v,++y,S=v,Z=!0;else if(P===47)if(P=h.charCodeAt(v+1),P===47)++v,++v,E(2),Z=!0;else if(P===42)++v,++v,k();else break;else if(Z&&P===45)if(h.charCodeAt(v+1)===45&&h.charCodeAt(v+2)===62)v+=3,E(3);else break;else if(P===60)if(h.slice(v+1,v+4)==="!--")++v,++v,++v,++v,E(4);else break;else break}function c(P){var Z,oe,Me,Qe=0;for(oe=P==="u"?4:2,Z=0;Z<oe;++Z)if(v<A&&z(h[v]))Me=h[v++],Qe=Qe*16+"0123456789abcdef".indexOf(Me.toLowerCase());else return"";return String.fromCharCode(Qe)}function _(){var P,Z;for(P=h.charCodeAt(v++),Z=String.fromCharCode(P),P===92&&(h.charCodeAt(v)!==117&&ee({},o.UnexpectedToken,"ILLEGAL"),++v,P=c("u"),(!P||P==="\\"||!K(P.charCodeAt(0)))&&ee({},o.UnexpectedToken,"ILLEGAL"),Z=P);v<A&&(P=h.charCodeAt(v),!!M(P));)++v,Z+=String.fromCharCode(P),P===92&&(Z=Z.substr(0,Z.length-1),h.charCodeAt(v)!==117&&ee({},o.UnexpectedToken,"ILLEGAL"),++v,P=c("u"),(!P||P==="\\"||!M(P.charCodeAt(0)))&&ee({},o.UnexpectedToken,"ILLEGAL"),Z+=P);return Z}function R(){var P,Z;for(P=v++;v<A;){if(Z=h.charCodeAt(v),Z===92)return v=P,_();if(M(Z))++v;else break}return h.slice(P,v)}function O(){var P,Z,oe;return P=v,Z=h.charCodeAt(v)===92?_():R(),Z.length===1?oe=e.Identifier:m(Z)?oe=e.Keyword:Z==="null"?oe=e.NullLiteral:Z==="true"||Z==="false"?oe=e.BooleanLiteral:oe=e.Identifier,{type:oe,value:Z,lineNumber:y,lineStart:S,start:P,end:v}}function F(){var P=v,Z=h.charCodeAt(v),oe,Me=h[v],Qe,dt,Zt;switch(Z){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++v,D.tokenize&&(Z===40?D.openParenToken=D.tokens.length:Z===123&&(D.openCurlyToken=D.tokens.length)),{type:e.Punctuator,value:String.fromCharCode(Z),lineNumber:y,lineStart:S,start:P,end:v};default:if(oe=h.charCodeAt(v+1),oe===61)switch(Z){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return v+=2,{type:e.Punctuator,value:String.fromCharCode(Z)+String.fromCharCode(oe),lineNumber:y,lineStart:S,start:P,end:v};case 33:case 61:return v+=2,h.charCodeAt(v)===61&&++v,{type:e.Punctuator,value:h.slice(P,v),lineNumber:y,lineStart:S,start:P,end:v}}}if(Zt=h.substr(v,4),Zt===">>>=")return v+=4,{type:e.Punctuator,value:Zt,lineNumber:y,lineStart:S,start:P,end:v};if(dt=Zt.substr(0,3),dt===">>>"||dt==="<<="||dt===">>=")return v+=3,{type:e.Punctuator,value:dt,lineNumber:y,lineStart:S,start:P,end:v};if(Qe=dt.substr(0,2),Me===Qe[1]&&"+-<>&|".indexOf(Me)>=0||Qe==="=>")return v+=2,{type:e.Punctuator,value:Qe,lineNumber:y,lineStart:S,start:P,end:v};if("<>=!+-*%&|^/".indexOf(Me)>=0)return++v,{type:e.Punctuator,value:Me,lineNumber:y,lineStart:S,start:P,end:v};ee({},o.UnexpectedToken,"ILLEGAL")}function U(P){for(var Z="";v<A&&z(h[v]);)Z+=h[v++];return Z.length===0&&ee({},o.UnexpectedToken,"ILLEGAL"),K(h.charCodeAt(v))&&ee({},o.UnexpectedToken,"ILLEGAL"),{type:e.NumericLiteral,value:parseInt("0x"+Z,16),lineNumber:y,lineStart:S,start:P,end:v}}function H(P){for(var Z="0"+h[v++];v<A&&$(h[v]);)Z+=h[v++];return(K(h.charCodeAt(v))||L(h.charCodeAt(v)))&&ee({},o.UnexpectedToken,"ILLEGAL"),{type:e.NumericLiteral,value:parseInt(Z,8),octal:!0,lineNumber:y,lineStart:S,start:P,end:v}}function J(){var P,Z;for(P=v+1;P<A;++P){if(Z=h[P],Z==="8"||Z==="9")return!1;if(!$(Z))return!0}return!0}function fe(){var P,Z,oe;if(oe=h[v],C(L(oe.charCodeAt(0))||oe===".","Numeric literal must start with a decimal digit or a decimal point"),Z=v,P="",oe!=="."){if(P=h[v++],oe=h[v],P==="0"){if(oe==="x"||oe==="X")return++v,U(Z);if($(oe)&&J())return H(Z)}for(;L(h.charCodeAt(v));)P+=h[v++];oe=h[v]}if(oe==="."){for(P+=h[v++];L(h.charCodeAt(v));)P+=h[v++];oe=h[v]}if(oe==="e"||oe==="E")if(P+=h[v++],oe=h[v],(oe==="+"||oe==="-")&&(P+=h[v++]),L(h.charCodeAt(v)))for(;L(h.charCodeAt(v));)P+=h[v++];else ee({},o.UnexpectedToken,"ILLEGAL");return K(h.charCodeAt(v))&&ee({},o.UnexpectedToken,"ILLEGAL"),{type:e.NumericLiteral,value:parseFloat(P),lineNumber:y,lineStart:S,start:Z,end:v}}function B(){var P="",Z,oe,Me,Qe,dt,Zt,Nr=!1,Gi,Ti;for(Gi=y,Ti=S,Z=h[v],C(Z==="'"||Z==='"',"String literal must starts with a quote"),oe=v,++v;v<A;)if(Me=h[v++],Me===Z){Z="";break}else if(Me==="\\")if(Me=h[v++],!Me||!j(Me.charCodeAt(0)))switch(Me){case"u":case"x":Zt=v,dt=c(Me),dt?P+=dt:(v=Zt,P+=Me);break;case"n":P+=`
`;break;case"r":P+="\r";break;case"t":P+="	";break;case"b":P+="\b";break;case"f":P+="\f";break;case"v":P+="\v";break;default:$(Me)?(Qe="01234567".indexOf(Me),Qe!==0&&(Nr=!0),v<A&&$(h[v])&&(Nr=!0,Qe=Qe*8+"01234567".indexOf(h[v++]),"0123".indexOf(Me)>=0&&v<A&&$(h[v])&&(Qe=Qe*8+"01234567".indexOf(h[v++]))),P+=String.fromCharCode(Qe)):P+=Me;break}else++y,Me==="\r"&&h[v]===`
`&&++v,S=v;else{if(j(Me.charCodeAt(0)))break;P+=Me}return Z!==""&&ee({},o.UnexpectedToken,"ILLEGAL"),{type:e.StringLiteral,value:P,octal:Nr,startLineNumber:Gi,startLineStart:Ti,lineNumber:y,lineStart:S,start:oe,end:v}}function q(P,Z){var oe;try{oe=new RegExp(P,Z)}catch{ee({},o.InvalidRegExp)}return oe}function Y(){var P,Z,oe,Me,Qe;for(P=h[v],C(P==="/","Regular expression literal must start with a slash"),Z=h[v++],oe=!1,Me=!1;v<A;)if(P=h[v++],Z+=P,P==="\\")P=h[v++],j(P.charCodeAt(0))&&ee({},o.UnterminatedRegExp),Z+=P;else if(j(P.charCodeAt(0)))ee({},o.UnterminatedRegExp);else if(oe)P==="]"&&(oe=!1);else if(P==="/"){Me=!0;break}else P==="["&&(oe=!0);return Me||ee({},o.UnterminatedRegExp),Qe=Z.substr(1,Z.length-2),{value:Qe,literal:Z}}function X(){var P,Z,oe,Me;for(Z="",oe="";v<A&&(P=h[v],!!M(P.charCodeAt(0)));)if(++v,P==="\\"&&v<A)if(P=h[v],P==="u"){if(++v,Me=v,P=c("u"),P)for(oe+=P,Z+="\\u";Me<v;++Me)Z+=h[Me];else v=Me,oe+="u",Z+="\\u";ie({},o.UnexpectedToken,"ILLEGAL")}else Z+="\\",ie({},o.UnexpectedToken,"ILLEGAL");else oe+=P,Z+=P;return{value:oe,literal:Z}}function Q(){var P,Z,oe,Me,Qe;return I=null,w(),P=v,Z=Y(),oe=X(),Qe=q(Z.value,oe.value),D.tokenize?{type:e.RegularExpression,value:Qe,lineNumber:y,lineStart:S,start:P,end:v}:{literal:Z.literal+oe.literal,value:Qe,start:P,end:v}}function be(){var P,Z,oe,Me;return w(),P=v,Z={start:{line:y,column:v-S}},oe=Q(),Z.end={line:y,column:v-S},D.tokenize||(D.tokens.length>0&&(Me=D.tokens[D.tokens.length-1],Me.range[0]===P&&Me.type==="Punctuator"&&(Me.value==="/"||Me.value==="/=")&&D.tokens.pop()),D.tokens.push({type:"RegularExpression",value:oe.literal,range:[P,v],loc:Z})),oe}function ue(P){return P.type===e.Identifier||P.type===e.Keyword||P.type===e.BooleanLiteral||P.type===e.NullLiteral}function me(){var P,Z;if(P=D.tokens[D.tokens.length-1],!P)return be();if(P.type==="Punctuator"){if(P.value==="]")return F();if(P.value===")")return Z=D.tokens[D.openParenToken-1],Z&&Z.type==="Keyword"&&(Z.value==="if"||Z.value==="while"||Z.value==="for"||Z.value==="with")?be():F();if(P.value==="}"){if(D.tokens[D.openCurlyToken-3]&&D.tokens[D.openCurlyToken-3].type==="Keyword"){if(Z=D.tokens[D.openCurlyToken-4],!Z)return F()}else if(D.tokens[D.openCurlyToken-4]&&D.tokens[D.openCurlyToken-4].type==="Keyword"){if(Z=D.tokens[D.openCurlyToken-5],!Z)return be()}else return F();return n.indexOf(Z.value)>=0?F():be()}return be()}return P.type==="Keyword"&&P.value!=="this"?be():F()}function vt(){var P;return w(),v>=A?{type:e.EOF,lineNumber:y,lineStart:S,start:v,end:v}:(P=h.charCodeAt(v),K(P)?O():P===40||P===41||P===59?F():P===39||P===34?B():P===46?L(h.charCodeAt(v+1))?fe():F():L(P)?fe():D.tokenize&&P===47?me():F())}function xe(){var P,Z,oe,Me;return w(),P={start:{line:y,column:v-S}},Z=vt(),P.end={line:y,column:v-S},Z.type!==e.EOF&&(Me=h.slice(Z.start,Z.end),D.tokens.push({type:r[Z.type],value:Me,range:[Z.start,Z.end],loc:P})),Z}function le(){var P;return P=I,v=P.end,y=P.lineNumber,S=P.lineStart,I=typeof D.tokens!="undefined"?xe():vt(),v=P.end,y=P.lineNumber,S=P.lineStart,P}function qt(){var P,Z,oe;P=v,Z=y,oe=S,I=typeof D.tokens!="undefined"?xe():vt(),v=P,y=Z,S=oe}function we(P,Z){this.line=P,this.column=Z}function Te(P,Z,oe,Me){this.start=new we(P,Z),this.end=new we(oe,Me)}l={name:"SyntaxTree",processComment:function(P){var Z,oe;if(!(P.type===a.Program&&P.body.length>0)){for(D.trailingComments.length>0?D.trailingComments[0].range[0]>=P.range[1]?(oe=D.trailingComments,D.trailingComments=[]):D.trailingComments.length=0:D.bottomRightStack.length>0&&D.bottomRightStack[D.bottomRightStack.length-1].trailingComments&&D.bottomRightStack[D.bottomRightStack.length-1].trailingComments[0].range[0]>=P.range[1]&&(oe=D.bottomRightStack[D.bottomRightStack.length-1].trailingComments,delete D.bottomRightStack[D.bottomRightStack.length-1].trailingComments);D.bottomRightStack.length>0&&D.bottomRightStack[D.bottomRightStack.length-1].range[0]>=P.range[0];)Z=D.bottomRightStack.pop();Z?Z.leadingComments&&Z.leadingComments[Z.leadingComments.length-1].range[1]<=P.range[0]&&(P.leadingComments=Z.leadingComments,delete Z.leadingComments):D.leadingComments.length>0&&D.leadingComments[D.leadingComments.length-1].range[1]<=P.range[0]&&(P.leadingComments=D.leadingComments,D.leadingComments=[]),oe&&(P.trailingComments=oe),D.bottomRightStack.push(P)}},markEnd:function(P,Z){return D.range&&(P.range=[Z.start,v]),D.loc&&(P.loc=new Te(Z.startLineNumber===void 0?Z.lineNumber:Z.startLineNumber,Z.start-(Z.startLineStart===void 0?Z.lineStart:Z.startLineStart),y,v-S),this.postProcess(P)),D.attachComment&&this.processComment(P),P},postProcess:function(P){return D.source&&(P.loc.source=D.source),P},createArrayExpression:function(P){return{type:a.ArrayExpression,elements:P}},createAssignmentExpression:function(P,Z,oe){return{type:a.AssignmentExpression,operator:P,left:Z,right:oe}},createBinaryExpression:function(P,Z,oe){var Me=P==="||"||P==="&&"?a.LogicalExpression:a.BinaryExpression;return{type:Me,operator:P,left:Z,right:oe}},createBlockStatement:function(P){return{type:a.BlockStatement,body:P}},createBreakStatement:function(P){return{type:a.BreakStatement,label:P}},createCallExpression:function(P,Z){return{type:a.CallExpression,callee:P,arguments:Z}},createCatchClause:function(P,Z){return{type:a.CatchClause,param:P,body:Z}},createConditionalExpression:function(P,Z,oe){return{type:a.ConditionalExpression,test:P,consequent:Z,alternate:oe}},createContinueStatement:function(P){return{type:a.ContinueStatement,label:P}},createDebuggerStatement:function(){return{type:a.DebuggerStatement}},createDoWhileStatement:function(P,Z){return{type:a.DoWhileStatement,body:P,test:Z}},createEmptyStatement:function(){return{type:a.EmptyStatement}},createExpressionStatement:function(P){return{type:a.ExpressionStatement,expression:P}},createForStatement:function(P,Z,oe,Me){return{type:a.ForStatement,init:P,test:Z,update:oe,body:Me}},createForInStatement:function(P,Z,oe){return{type:a.ForInStatement,left:P,right:Z,body:oe,each:!1}},createFunctionDeclaration:function(P,Z,oe,Me){return{type:a.FunctionDeclaration,id:P,params:Z,defaults:oe,body:Me,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(P,Z,oe,Me){return{type:a.FunctionExpression,id:P,params:Z,defaults:oe,body:Me,rest:null,generator:!1,expression:!1}},createIdentifier:function(P){return{type:a.Identifier,name:P}},createIfStatement:function(P,Z,oe){return{type:a.IfStatement,test:P,consequent:Z,alternate:oe}},createLabeledStatement:function(P,Z){return{type:a.LabeledStatement,label:P,body:Z}},createLiteral:function(P){return{type:a.Literal,value:P.value,raw:h.slice(P.start,P.end)}},createMemberExpression:function(P,Z,oe){return{type:a.MemberExpression,computed:P==="[",object:Z,property:oe}},createNewExpression:function(P,Z){return{type:a.NewExpression,callee:P,arguments:Z}},createObjectExpression:function(P){return{type:a.ObjectExpression,properties:P}},createPostfixExpression:function(P,Z){return{type:a.UpdateExpression,operator:P,argument:Z,prefix:!1}},createProgram:function(P){return{type:a.Program,body:P}},createProperty:function(P,Z,oe){return{type:a.Property,key:Z,value:oe,kind:P}},createReturnStatement:function(P){return{type:a.ReturnStatement,argument:P}},createSequenceExpression:function(P){return{type:a.SequenceExpression,expressions:P}},createSwitchCase:function(P,Z){return{type:a.SwitchCase,test:P,consequent:Z}},createSwitchStatement:function(P,Z){return{type:a.SwitchStatement,discriminant:P,cases:Z}},createThisExpression:function(){return{type:a.ThisExpression}},createThrowStatement:function(P){return{type:a.ThrowStatement,argument:P}},createTryStatement:function(P,Z,oe,Me){return{type:a.TryStatement,block:P,guardedHandlers:Z,handlers:oe,finalizer:Me}},createUnaryExpression:function(P,Z){return P==="++"||P==="--"?{type:a.UpdateExpression,operator:P,argument:Z,prefix:!0}:{type:a.UnaryExpression,operator:P,argument:Z,prefix:!0}},createVariableDeclaration:function(P,Z){return{type:a.VariableDeclaration,declarations:P,kind:Z}},createVariableDeclarator:function(P,Z){return{type:a.VariableDeclarator,id:P,init:Z}},createWhileStatement:function(P,Z){return{type:a.WhileStatement,test:P,body:Z}},createWithStatement:function(P,Z){return{type:a.WithStatement,object:P,body:Z}}};function at(){var P,Z,oe,Me;return P=v,Z=y,oe=S,w(),Me=y!==Z,v=P,y=Z,S=oe,Me}function ee(P,Z){var oe,Me=Array.prototype.slice.call(arguments,2),Qe=Z.replace(/%(\d)/g,function(dt,Zt){return C(Zt<Me.length,"Message reference must be in range"),Me[Zt]});throw typeof P.lineNumber=="number"?(oe=new Error("Line "+P.lineNumber+": "+Qe),oe.index=P.start,oe.lineNumber=P.lineNumber,oe.column=P.start-S+1):(oe=new Error("Line "+y+": "+Qe),oe.index=v,oe.lineNumber=y,oe.column=v-S+1),oe.description=Qe,oe}function ie(){try{ee.apply(null,arguments)}catch(P){if(D.errors)D.errors.push(P);else throw P}}function tt(P){if(P.type===e.EOF&&ee(P,o.UnexpectedEOS),P.type===e.NumericLiteral&&ee(P,o.UnexpectedNumber),P.type===e.StringLiteral&&ee(P,o.UnexpectedString),P.type===e.Identifier&&ee(P,o.UnexpectedIdentifier),P.type===e.Keyword){if(f(P.value))ee(P,o.UnexpectedReserved);else if(p&&d(P.value)){ie(P,o.StrictReservedWord);return}ee(P,o.UnexpectedToken,P.value)}ee(P,o.UnexpectedToken,P.value)}function ae(P){var Z=le();(Z.type!==e.Punctuator||Z.value!==P)&&tt(Z)}function de(P){var Z=le();(Z.type!==e.Keyword||Z.value!==P)&&tt(Z)}function Ze(P){return I.type===e.Punctuator&&I.value===P}function he(P){return I.type===e.Keyword&&I.value===P}function Se(){var P;return I.type!==e.Punctuator?!1:(P=I.value,P==="="||P==="*="||P==="/="||P==="%="||P==="+="||P==="-="||P==="<<="||P===">>="||P===">>>="||P==="&="||P==="^="||P==="|=")}function At(){var P,Z=v,oe=y,Me=S,Qe=I;if(h.charCodeAt(v)===59||Ze(";")){le();return}if(P=y,w(),y!==P){v=Z,y=oe,S=Me,I=Qe;return}I.type!==e.EOF&&!Ze("}")&&tt(I)}function _e(P){return P.type===a.Identifier||P.type===a.MemberExpression}function Ie(){var P=[],Z;for(Z=I,ae("[");!Ze("]");)Ze(",")?(le(),P.push(null)):(P.push(xr()),Ze("]")||ae(","));return le(),T.markEnd(T.createArrayExpression(P),Z)}function nr(P,Z){var oe,Me,Qe;return oe=p,Qe=I,Me=Tr(),Z&&p&&g(P[0].name)&&ie(Z,o.StrictParamName),p=oe,T.markEnd(T.createFunctionExpression(null,P,[],Me),Qe)}function Ne(){var P,Z;return Z=I,P=le(),P.type===e.StringLiteral||P.type===e.NumericLiteral?(p&&P.octal&&ie(P,o.StrictOctalLiteral),T.markEnd(T.createLiteral(P),Z)):T.markEnd(T.createIdentifier(P.value),Z)}function Re(){var P,Z,oe,Me,Qe,dt;if(P=I,dt=I,P.type===e.Identifier)return oe=Ne(),P.value==="get"&&!Ze(":")?(Z=Ne(),ae("("),ae(")"),Me=nr([]),T.markEnd(T.createProperty("get",Z,Me),dt)):P.value==="set"&&!Ze(":")?(Z=Ne(),ae("("),P=I,P.type!==e.Identifier?(ae(")"),ie(P,o.UnexpectedToken,P.value),Me=nr([])):(Qe=[De()],ae(")"),Me=nr(Qe,P)),T.markEnd(T.createProperty("set",Z,Me),dt)):(ae(":"),Me=xr(),T.markEnd(T.createProperty("init",oe,Me),dt));if(P.type===e.EOF||P.type===e.Punctuator)tt(P);else return Z=Ne(),ae(":"),Me=xr(),T.markEnd(T.createProperty("init",Z,Me),dt)}function Qn(){var P=[],Z,oe,Me,Qe,dt={},Zt=String,Nr;for(Nr=I,ae("{");!Ze("}");)Z=Re(),Z.key.type===a.Identifier?oe=Z.key.name:oe=Zt(Z.key.value),Qe=Z.kind==="init"?s.Data:Z.kind==="get"?s.Get:s.Set,Me="$"+oe,Object.prototype.hasOwnProperty.call(dt,Me)?(dt[Me]===s.Data?p&&Qe===s.Data?ie({},o.StrictDuplicateProperty):Qe!==s.Data&&ie({},o.AccessorDataProperty):Qe===s.Data?ie({},o.AccessorDataProperty):dt[Me]&Qe&&ie({},o.AccessorGetSet),dt[Me]|=Qe):dt[Me]=Qe,P.push(Z),Ze("}")||ae(",");return ae("}"),T.markEnd(T.createObjectExpression(P),Nr)}function qe(){var P;return ae("("),P=ke(),ae(")"),P}function Fe(){var P,Z,oe,Me;if(Ze("("))return qe();if(Ze("["))return Ie();if(Ze("{"))return Qn();if(P=I.type,Me=I,P===e.Identifier)oe=T.createIdentifier(le().value);else if(P===e.StringLiteral||P===e.NumericLiteral)p&&I.octal&&ie(I,o.StrictOctalLiteral),oe=T.createLiteral(le());else if(P===e.Keyword){if(he("function"))return hv();he("this")?(le(),oe=T.createThisExpression()):tt(le())}else P===e.BooleanLiteral?(Z=le(),Z.value=Z.value==="true",oe=T.createLiteral(Z)):P===e.NullLiteral?(Z=le(),Z.value=null,oe=T.createLiteral(Z)):Ze("/")||Ze("/=")?(typeof D.tokens!="undefined"?oe=T.createLiteral(be()):oe=T.createLiteral(Q()),qt()):tt(le());return T.markEnd(oe,Me)}function $n(){var P=[];if(ae("("),!Ze(")"))for(;v<A&&(P.push(xr()),!Ze(")"));)ae(",");return ae(")"),P}function $e(){var P,Z;return Z=I,P=le(),ue(P)||tt(P),T.markEnd(T.createIdentifier(P.value),Z)}function Be(){return ae("."),$e()}function zn(){var P;return ae("["),P=ke(),ae("]"),P}function Le(){var P,Z,oe;return oe=I,de("new"),P=ei(),Z=Ze("(")?$n():[],T.markEnd(T.createNewExpression(P,Z),oe)}function ze(){var P,Z,oe,Me,Qe=N.allowIn;for(Me=I,N.allowIn=!0,P=he("new")?Le():Fe();;){if(Ze("."))oe=Be(),P=T.createMemberExpression(".",P,oe);else if(Ze("("))Z=$n(),P=T.createCallExpression(P,Z);else if(Ze("["))oe=zn(),P=T.createMemberExpression("[",P,oe);else break;T.markEnd(P,Me)}return N.allowIn=Qe,P}function ei(){var P,Z,oe;for(C(N.allowIn,"callee of new expression always allow in keyword."),oe=I,P=he("new")?Le():Fe();Ze(".")||Ze("[");)Ze("[")?(Z=zn(),P=T.createMemberExpression("[",P,Z)):(Z=Be(),P=T.createMemberExpression(".",P,Z)),T.markEnd(P,oe);return P}function Pe(){var P,Z,oe=I;return P=ze(),I.type===e.Punctuator&&(Ze("++")||Ze("--"))&&!at()&&(p&&P.type===a.Identifier&&g(P.name)&&ie({},o.StrictLHSPostfix),_e(P)||ie({},o.InvalidLHSInAssignment),Z=le(),P=T.markEnd(T.createPostfixExpression(Z.value,P),oe)),P}function Oe(){var P,Z,oe;return I.type!==e.Punctuator&&I.type!==e.Keyword?Z=Pe():Ze("++")||Ze("--")?(oe=I,P=le(),Z=Oe(),p&&Z.type===a.Identifier&&g(Z.name)&&ie({},o.StrictLHSPrefix),_e(Z)||ie({},o.InvalidLHSInAssignment),Z=T.createUnaryExpression(P.value,Z),Z=T.markEnd(Z,oe)):Ze("+")||Ze("-")||Ze("~")||Ze("!")?(oe=I,P=le(),Z=Oe(),Z=T.createUnaryExpression(P.value,Z),Z=T.markEnd(Z,oe)):he("delete")||he("void")||he("typeof")?(oe=I,P=le(),Z=Oe(),Z=T.createUnaryExpression(P.value,Z),Z=T.markEnd(Z,oe),p&&Z.operator==="delete"&&Z.argument.type===a.Identifier&&ie({},o.StrictDelete)):Z=Pe(),Z}function jn(P,Z){var oe=0;if(P.type!==e.Punctuator&&P.type!==e.Keyword)return 0;switch(P.value){case"||":oe=1;break;case"&&":oe=2;break;case"|":oe=3;break;case"^":oe=4;break;case"&":oe=5;break;case"==":case"!=":case"===":case"!==":oe=6;break;case"<":case">":case"<=":case">=":case"instanceof":oe=7;break;case"in":oe=Z?7:0;break;case"<<":case">>":case">>>":oe=8;break;case"+":case"-":oe=9;break;case"*":case"/":case"%":oe=11;break;default:break}return oe}function je(){var P,Z,oe,Me,Qe,dt,Zt,Nr,Gi,Ti;if(P=I,Gi=Oe(),Me=I,Qe=jn(Me,N.allowIn),Qe===0)return Gi;for(Me.prec=Qe,le(),Z=[P,I],Zt=Oe(),dt=[Gi,Me,Zt];(Qe=jn(I,N.allowIn))>0;){for(;dt.length>2&&Qe<=dt[dt.length-2].prec;)Zt=dt.pop(),Nr=dt.pop().value,Gi=dt.pop(),oe=T.createBinaryExpression(Nr,Gi,Zt),Z.pop(),P=Z[Z.length-1],T.markEnd(oe,P),dt.push(oe);Me=le(),Me.prec=Qe,dt.push(Me),Z.push(I),oe=Oe(),dt.push(oe)}for(Ti=dt.length-1,oe=dt[Ti],Z.pop();Ti>1;)oe=T.createBinaryExpression(dt[Ti-1].value,dt[Ti-2],oe),Ti-=2,P=Z.pop(),T.markEnd(oe,P);return oe}function Ue(){var P,Z,oe,Me,Qe;return Qe=I,P=je(),Ze("?")&&(le(),Z=N.allowIn,N.allowIn=!0,oe=xr(),N.allowIn=Z,ae(":"),Me=xr(),P=T.createConditionalExpression(P,oe,Me),T.markEnd(P,Qe)),P}function xr(){var P,Z,oe,Me,Qe;return P=I,Qe=I,Me=Z=Ue(),Se()&&(_e(Z)||ie({},o.InvalidLHSInAssignment),p&&Z.type===a.Identifier&&g(Z.name)&&ie(P,o.StrictLHSAssignment),P=le(),oe=xr(),Me=T.markEnd(T.createAssignmentExpression(P.value,Z,oe),Qe)),Me}function ke(){var P,Z=I;if(P=xr(),Ze(",")){for(P=T.createSequenceExpression([P]);v<A&&Ze(",");)le(),P.expressions.push(xr());T.markEnd(P,Z)}return P}function Ve(){for(var P=[],Z;v<A&&!(Ze("}")||(Z=dv(),typeof Z=="undefined"));)P.push(Z);return P}function kn(){var P,Z;return Z=I,ae("{"),P=Ve(),ae("}"),T.markEnd(T.createBlockStatement(P),Z)}function De(){var P,Z;return Z=I,P=le(),P.type!==e.Identifier&&tt(P),T.markEnd(T.createIdentifier(P.value),Z)}function We(P){var Z=null,oe,Me;return Me=I,oe=De(),p&&g(oe.name)&&ie({},o.StrictVarName),P==="const"?(ae("="),Z=xr()):Ze("=")&&(le(),Z=xr()),T.markEnd(T.createVariableDeclarator(oe,Z),Me)}function On(P){var Z=[];do{if(Z.push(We(P)),!Ze(","))break;le()}while(v<A);return Z}function Ge(){var P;return de("var"),P=On(),At(),T.createVariableDeclaration(P,"var")}function He(P){var Z,oe;return oe=I,de(P),Z=On(P),At(),T.markEnd(T.createVariableDeclaration(Z,P),oe)}function rn(){return ae(";"),T.createEmptyStatement()}function Ot(){var P=ke();return At(),T.createExpressionStatement(P)}function Rt(){var P,Z,oe;return de("if"),ae("("),P=ke(),ae(")"),Z=Xt(),he("else")?(le(),oe=Xt()):oe=null,T.createIfStatement(P,Z,oe)}function Lr(){var P,Z,oe;return de("do"),oe=N.inIteration,N.inIteration=!0,P=Xt(),N.inIteration=oe,de("while"),ae("("),Z=ke(),ae(")"),Ze(";")&&le(),T.createDoWhileStatement(P,Z)}function Pr(){var P,Z,oe;return de("while"),ae("("),P=ke(),ae(")"),oe=N.inIteration,N.inIteration=!0,Z=Xt(),N.inIteration=oe,T.createWhileStatement(P,Z)}function qr(){var P,Z,oe;return oe=I,P=le(),Z=On(),T.markEnd(T.createVariableDeclaration(Z,P.value),oe)}function $r(){var P,Z,oe,Me,Qe,dt,Zt,Nr=N.allowIn;return P=Z=oe=null,de("for"),ae("("),Ze(";")?le():(he("var")||he("let")?(N.allowIn=!1,P=qr(),N.allowIn=Nr,P.declarations.length===1&&he("in")&&(le(),Me=P,Qe=ke(),P=null)):(N.allowIn=!1,P=ke(),N.allowIn=Nr,he("in")&&(_e(P)||ie({},o.InvalidLHSInForIn),le(),Me=P,Qe=ke(),P=null)),typeof Me=="undefined"&&ae(";")),typeof Me=="undefined"&&(Ze(";")||(Z=ke()),ae(";"),Ze(")")||(oe=ke())),ae(")"),Zt=N.inIteration,N.inIteration=!0,dt=Xt(),N.inIteration=Zt,typeof Me=="undefined"?T.createForStatement(P,Z,oe,dt):T.createForInStatement(Me,Qe,dt)}function zr(){var P=null,Z;return de("continue"),h.charCodeAt(v)===59?(le(),N.inIteration||ee({},o.IllegalContinue),T.createContinueStatement(null)):at()?(N.inIteration||ee({},o.IllegalContinue),T.createContinueStatement(null)):(I.type===e.Identifier&&(P=De(),Z="$"+P.name,Object.prototype.hasOwnProperty.call(N.labelSet,Z)||ee({},o.UnknownLabel,P.name)),At(),P===null&&!N.inIteration&&ee({},o.IllegalContinue),T.createContinueStatement(P))}function jr(){var P=null,Z;return de("break"),h.charCodeAt(v)===59?(le(),N.inIteration||N.inSwitch||ee({},o.IllegalBreak),T.createBreakStatement(null)):at()?(N.inIteration||N.inSwitch||ee({},o.IllegalBreak),T.createBreakStatement(null)):(I.type===e.Identifier&&(P=De(),Z="$"+P.name,Object.prototype.hasOwnProperty.call(N.labelSet,Z)||ee({},o.UnknownLabel,P.name)),At(),P===null&&!(N.inIteration||N.inSwitch)&&ee({},o.IllegalBreak),T.createBreakStatement(P))}function Ur(){var P=null;return de("return"),N.inFunctionBody||ie({},o.IllegalReturn),h.charCodeAt(v)===32&&K(h.charCodeAt(v+1))?(P=ke(),At(),T.createReturnStatement(P)):at()?T.createReturnStatement(null):(Ze(";")||!Ze("}")&&I.type!==e.EOF&&(P=ke()),At(),T.createReturnStatement(P))}function Vr(){var P,Z;return p&&(w(),ie({},o.StrictModeWith)),de("with"),ae("("),P=ke(),ae(")"),Z=Xt(),T.createWithStatement(P,Z)}function Wr(){var P,Z=[],oe,Me;for(Me=I,he("default")?(le(),P=null):(de("case"),P=ke()),ae(":");v<A&&!(Ze("}")||he("default")||he("case"));)oe=Xt(),Z.push(oe);return T.markEnd(T.createSwitchCase(P,Z),Me)}function Gr(){var P,Z,oe,Me,Qe;if(de("switch"),ae("("),P=ke(),ae(")"),ae("{"),Z=[],Ze("}"))return le(),T.createSwitchStatement(P,Z);for(Me=N.inSwitch,N.inSwitch=!0,Qe=!1;v<A&&!Ze("}");)oe=Wr(),oe.test===null&&(Qe&&ee({},o.MultipleDefaultsInSwitch),Qe=!0),Z.push(oe);return N.inSwitch=Me,ae("}"),T.createSwitchStatement(P,Z)}function Hr(){var P;return de("throw"),at()&&ee({},o.NewlineAfterThrow),P=ke(),At(),T.createThrowStatement(P)}function Kr(){var P,Z,oe;return oe=I,de("catch"),ae("("),Ze(")")&&tt(I),P=De(),p&&g(P.name)&&ie({},o.StrictCatchVariable),ae(")"),Z=kn(),T.markEnd(T.createCatchClause(P,Z),oe)}function Zr(){var P,Z=[],oe=null;return de("try"),P=kn(),he("catch")&&Z.push(Kr()),he("finally")&&(le(),oe=kn()),Z.length===0&&!oe&&ee({},o.NoCatchOrFinally),T.createTryStatement(P,[],Z,oe)}function Jr(){return de("debugger"),At(),T.createDebuggerStatement()}function Xt(){var P=I.type,Z,oe,Me,Qe;if(P===e.EOF&&tt(I),P===e.Punctuator&&I.value==="{")return kn();if(Qe=I,P===e.Punctuator)switch(I.value){case";":return T.markEnd(rn(),Qe);case"(":return T.markEnd(Ot(),Qe);default:break}if(P===e.Keyword)switch(I.value){case"break":return T.markEnd(jr(),Qe);case"continue":return T.markEnd(zr(),Qe);case"debugger":return T.markEnd(Jr(),Qe);case"do":return T.markEnd(Lr(),Qe);case"for":return T.markEnd($r(),Qe);case"function":return T.markEnd(bd(),Qe);case"if":return T.markEnd(Rt(),Qe);case"return":return T.markEnd(Ur(),Qe);case"switch":return T.markEnd(Gr(),Qe);case"throw":return T.markEnd(Hr(),Qe);case"try":return T.markEnd(Zr(),Qe);case"var":return T.markEnd(Ge(),Qe);case"while":return T.markEnd(Pr(),Qe);case"with":return T.markEnd(Vr(),Qe);default:break}return Z=ke(),Z.type===a.Identifier&&Ze(":")?(le(),Me="$"+Z.name,Object.prototype.hasOwnProperty.call(N.labelSet,Me)&&ee({},o.Redeclaration,"Label",Z.name),N.labelSet[Me]=!0,oe=Xt(),delete N.labelSet[Me],T.markEnd(T.createLabeledStatement(Z,oe),Qe)):(At(),T.markEnd(T.createExpressionStatement(Z),Qe))}function Tr(){var P,Z=[],oe,Me,Qe,dt,Zt,Nr,Gi,Ti;for(Ti=I,ae("{");v<A&&!(I.type!==e.StringLiteral||(oe=I,P=dv(),Z.push(P),P.expression.type!==a.Literal));)Me=h.slice(oe.start+1,oe.end-1),Me==="use strict"?(p=!0,Qe&&ie(Qe,o.StrictOctalLiteral)):!Qe&&oe.octal&&(Qe=oe);for(dt=N.labelSet,Zt=N.inIteration,Nr=N.inSwitch,Gi=N.inFunctionBody,N.labelSet={},N.inIteration=!1,N.inSwitch=!1,N.inFunctionBody=!0;v<A&&!(Ze("}")||(P=dv(),typeof P=="undefined"));)Z.push(P);return ae("}"),N.labelSet=dt,N.inIteration=Zt,N.inSwitch=Nr,N.inFunctionBody=Gi,T.markEnd(T.createBlockStatement(Z),Ti)}function yd(P){var Z,oe=[],Me,Qe,dt,Zt,Nr;if(ae("("),!Ze(")"))for(dt={};v<A&&(Me=I,Z=De(),Zt="$"+Me.value,p?(g(Me.value)&&(Qe=Me,Nr=o.StrictParamName),Object.prototype.hasOwnProperty.call(dt,Zt)&&(Qe=Me,Nr=o.StrictParamDupe)):P||(g(Me.value)?(P=Me,Nr=o.StrictParamName):d(Me.value)?(P=Me,Nr=o.StrictReservedWord):Object.prototype.hasOwnProperty.call(dt,Zt)&&(P=Me,Nr=o.StrictParamDupe)),oe.push(Z),dt[Zt]=!0,!Ze(")"));)ae(",");return ae(")"),{params:oe,stricted:Qe,firstRestricted:P,message:Nr}}function bd(){var P,Z=[],oe,Me,Qe,dt,Zt,Nr,Gi,Ti;return Ti=I,de("function"),Me=I,P=De(),p?g(Me.value)&&ie(Me,o.StrictFunctionName):g(Me.value)?(Zt=Me,Nr=o.StrictFunctionName):d(Me.value)&&(Zt=Me,Nr=o.StrictReservedWord),dt=yd(Zt),Z=dt.params,Qe=dt.stricted,Zt=dt.firstRestricted,dt.message&&(Nr=dt.message),Gi=p,oe=Tr(),p&&Zt&&ee(Zt,Nr),p&&Qe&&ie(Qe,Nr),p=Gi,T.markEnd(T.createFunctionDeclaration(P,Z,[],oe),Ti)}function hv(){var P,Z=null,oe,Me,Qe,dt,Zt=[],Nr,Gi,Ti;return Ti=I,de("function"),Ze("(")||(P=I,Z=De(),p?g(P.value)&&ie(P,o.StrictFunctionName):g(P.value)?(Me=P,Qe=o.StrictFunctionName):d(P.value)&&(Me=P,Qe=o.StrictReservedWord)),dt=yd(Me),Zt=dt.params,oe=dt.stricted,Me=dt.firstRestricted,dt.message&&(Qe=dt.message),Gi=p,Nr=Tr(),p&&Me&&ee(Me,Qe),p&&oe&&ie(oe,Qe),p=Gi,T.markEnd(T.createFunctionExpression(Z,Zt,[],Nr),Ti)}function dv(){if(I.type===e.Keyword)switch(I.value){case"const":case"let":return He(I.value);case"function":return bd();default:return Xt()}if(I.type!==e.EOF)return Xt()}function ese(){for(var P,Z=[],oe,Me,Qe;v<A&&(oe=I,!(oe.type!==e.StringLiteral||(P=dv(),Z.push(P),P.expression.type!==a.Literal)));)Me=h.slice(oe.start+1,oe.end-1),Me==="use strict"?(p=!0,Qe&&ie(Qe,o.StrictOctalLiteral)):!Qe&&oe.octal&&(Qe=oe);for(;v<A&&(P=dv(),typeof P!="undefined");)Z.push(P);return Z}function tse(){var P,Z;return w(),qt(),Z=I,p=!1,P=ese(),T.markEnd(T.createProgram(P),Z)}function TO(){var P,Z,oe,Me=[];for(P=0;P<D.tokens.length;++P)Z=D.tokens[P],oe={type:Z.type,value:Z.value},D.range&&(oe.range=Z.range),D.loc&&(oe.loc=Z.loc),Me.push(oe);D.tokens=Me}function rse(P,Z){var oe,Me,Qe;oe=String,typeof P!="string"&&!(P instanceof String)&&(P=oe(P)),T=l,h=P,v=0,y=h.length>0?1:0,S=0,A=h.length,I=null,N={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},D={},Z=Z||{},Z.tokens=!0,D.tokens=[],D.tokenize=!0,D.openParenToken=-1,D.openCurlyToken=-1,D.range=typeof Z.range=="boolean"&&Z.range,D.loc=typeof Z.loc=="boolean"&&Z.loc,typeof Z.comment=="boolean"&&Z.comment&&(D.comments=[]),typeof Z.tolerant=="boolean"&&Z.tolerant&&(D.errors=[]);try{if(qt(),I.type===e.EOF)return D.tokens;for(Me=le();I.type!==e.EOF;)try{Me=le()}catch(dt){if(Me=I,D.errors){D.errors.push(dt);break}else throw dt}TO(),Qe=D.tokens,typeof D.comments!="undefined"&&(Qe.comments=D.comments),typeof D.errors!="undefined"&&(Qe.errors=D.errors)}catch(dt){throw dt}finally{D={}}return Qe}function nse(P,Z){var oe,Me;Me=String,typeof P!="string"&&!(P instanceof String)&&(P=Me(P)),T=l,h=P,v=0,y=h.length>0?1:0,S=0,A=h.length,I=null,N={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},D={},typeof Z!="undefined"&&(D.range=typeof Z.range=="boolean"&&Z.range,D.loc=typeof Z.loc=="boolean"&&Z.loc,D.attachComment=typeof Z.attachComment=="boolean"&&Z.attachComment,D.loc&&Z.source!==null&&Z.source!==void 0&&(D.source=Me(Z.source)),typeof Z.tokens=="boolean"&&Z.tokens&&(D.tokens=[]),typeof Z.comment=="boolean"&&Z.comment&&(D.comments=[]),typeof Z.tolerant=="boolean"&&Z.tolerant&&(D.errors=[]),D.attachComment&&(D.range=!0,D.comments=[],D.bottomRightStack=[],D.trailingComments=[],D.leadingComments=[]));try{oe=tse(),typeof D.comments!="undefined"&&(oe.comments=D.comments),typeof D.tokens!="undefined"&&(TO(),oe.tokens=D.tokens),typeof D.errors!="undefined"&&(oe.errors=D.errors)}catch(Qe){throw Qe}finally{D={}}return oe}t.version="1.2.5",t.tokenize=rse,t.parse=nse,t.Syntax=function(){var P,Z={};typeof Object.create=="function"&&(Z=Object.create(null));for(P in a)a.hasOwnProperty(P)&&(Z[P]=a[P]);return typeof Object.freeze=="function"&&Object.freeze(Z),Z}()})});var Gne=ne((PAt,Wne)=>{"use strict";var aKe=Une(),Vne=d8(),sKe=0;function oKe(t,e,r){this.name=t,this.lvalue=e,this.rvalue=r,this.count=0}function uKe(t,e,r,n){this.body=t,this.args=e,this.thisVars=r,this.localVars=n}function fKe(t){if(t==="eval")throw new Error("cwise-parser: eval() not allowed");return typeof window!="undefined"?t in window:typeof global!="undefined"?t in global:typeof self!="undefined"?t in self:!1}function lKe(t){for(var e=t.body[0].expression.callee.params,r=new Array(e.length),n=0;n<e.length;++n)r[n]=e[n].name;return r}function cKe(t){for(var e=["(",t,")()"].join(""),r=aKe.parse(e,{range:!0}),n="_inline_"+sKe+++"_",a=lKe(r),s=new Array(a.length),o=0;o<a.length;++o)s[o]=new oKe([n,"arg",o,"_"].join(""),!1,!1);for(var u=new Array(e.length),o=0,l=e.length;o<l;++o)u[o]=e.charAt(o);var h=[],p=[],v=!1;function y(z){var $=n+z.replace(/\_/g,"__");return h.push($),$}function S(z){var $="this_"+z.replace(/\_/g,"__");return p.push($),$}function A(z,$){for(var G=z.range[0],j=z.range[1],K=G+1;K<j;++K)u[K]="";u[G]=$}function T(z){return"'"+z.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function I(z){return u.slice(z.range[0],z.range[1]).join("")}var N=1,D=2;function C(z){return z.parent.type==="AssignmentExpression"&&z.parent.left===z?z.parent.operator==="="?N:N|D:z.parent.type==="UpdateExpression"?N|D:D}(function z($,G){if($.parent=G,$.type==="MemberExpression")$.computed?(z($.object,$),z($.property,$)):$.object.type==="ThisExpression"?A($,S($.property.name)):z($.object,$);else{if($.type==="ThisExpression")throw new Error("cwise-parser: Computed this is not allowed");if($.type==="Identifier"){var j=$.name,K=a.indexOf(j);if(K>=0){var M=s[K],f=C($);f&N&&(M.lvalue=!0),f&D&&(M.rvalue=!0),++M.count,A($,M.name)}else fKe(j)||A($,y(j))}else if($.type==="Literal")typeof $.value=="string"&&A($,T($.value));else{if($.type==="WithStatement")throw new Error("cwise-parser: with() statements not allowed");for(var d=Object.keys($),g=0,m=d.length;g<m;++g)if(d[g]!=="parent"){var b=$[d[g]];if(b)if(b instanceof Array)for(var E=0;E<b.length;++E)b[E]&&typeof b[E].type=="string"&&z(b[E],$);else typeof b.type=="string"&&z(b,$)}}}})(r.body[0].expression.callee.body,void 0),Vne(h),Vne(p);var L=new uKe(I(r.body[0].expression.callee.body),s,p,h);return L}Wne.exports=cKe});var A1=ne((qAt,Hne)=>{"use strict";var v8=Gne(),hKe=p3(),y3=["args","body"],dKe=["pre","post","printCode","funcName","blockSize"];function pKe(t){for(var e in t)y3.indexOf(e)<0&&dKe.indexOf(e)<0&&console.warn("cwise: Unknown argument '"+e+"' passed to expression compiler");for(var r=0;r<y3.length;++r)if(!t[y3[r]])throw new Error("cwise: Missing argument: "+y3[r]);return hKe({args:t.args,pre:v8(t.pre||function(){}),body:v8(t.body),post:v8(t.post||function(){}),debug:!!t.printCode,funcName:t.funcName||t.body.name||"cwise",blockSize:t.blockSize||64})}Hne.exports=pKe});var Zne=ne(($At,Kne)=>{"use strict";var mKe=jne(),vKe=A1(),gKe=vKe({args:["array","scalar","index"],body:function(e,r,n){var a=r,s;for(s=0;s<n.length-1;++s)a=a[n[s]];a[n[n.length-1]]=e}});Kne.exports=function(e){var r=mKe(e.shape);return gKe(e,r),r}});var Xne=ne((b3,Yne)=>{"use strict";Object.defineProperty(b3,"__esModule",{value:!0});b3.default=function(t,e){for(var r=new Float64Array(t*e),n=0;n<r.length;n++)r[n]=Jne()*1e-4;return(0,bKe.default)(r,[t,e])};var yKe=cd(),bKe=wKe(yKe);function wKe(t){return t&&t.__esModule?t:{default:t}}function Jne(){var t=2*Math.random()-1,e=2*Math.random()-1,r=t*t+e*e;return r==0||r>1?Jne():t*Math.sqrt(-2*Math.log(r)/r)}Yne.exports=b3.default});var g8=ne((_3,eie)=>{"use strict";Object.defineProperty(_3,"__esModule",{value:!0});_3.default=function(t,e){var r=t.shape[0],n=(0,xKe.default)(new Float64Array(r*r),[r,r]);switch(e){case"euclidean":for(var a=0;a<r;a++)for(var s=a+1;s<r;s++){var o=EKe(t.pick(a,null),t.pick(s,null));n.set(a,s,o),n.set(s,a,o)}break;case"manhattan":for(var a=0;a<r;a++)for(var s=a+1;s<r;s++){var o=MKe(t.pick(a,null),t.pick(s,null));n.set(a,s,o),n.set(s,a,o)}break;case"jaccard":for(var a=0;a<r;a++)for(var s=a+1;s<r;s++){var o=AKe(t.pick(a,null),t.pick(s,null));n.set(a,s,o),n.set(s,a,o)}break;case"dice":for(var a=0;a<r;a++)for(var s=a+1;s<r;s++){var o=kKe(t.pick(a,null),t.pick(s,null));n.set(a,s,o),n.set(s,a,o)}break;default:}return n};var _Ke=cd(),xKe=Qne(_Ke),SKe=A1(),w3=Qne(SKe);function Qne(t){return t&&t.__esModule?t:{default:t}}var EKe=(0,w3.default)({args:["array","array"],pre:function(e,r){this.sum=0},body:function(e,r){var n=e-r;this.sum+=n*n},post:function(e,r){return Math.sqrt(this.sum)}}),MKe=(0,w3.default)({args:["array","array"],pre:function(e,r){this.sum=0},body:function(e,r){this.sum+=Math.abs(e-r)},post:function(e,r){return this.sum}}),AKe=(0,w3.default)({args:["array","array"],pre:function(e,r){this.tf=0,this.tt=0},body:function(e,r){var n=Math.round(e),a=Math.round(r);this.tf+=+(n!=a),this.tt+=+(n==1&&a==1)},post:function(e,r){return this.tf+this.tt===0?1:this.tf/(this.tf+this.tt)}}),kKe=(0,w3.default)({args:["array","array"],pre:function(e,r){this.tf=0,this.tt=0},body:function(e,r){var n=Math.round(e),a=Math.round(r);this.tf+=+(n!=a),this.tt+=+(n==1&&a==1)},post:function(e,r){return this.tf+this.tt===0?1:this.tf/(this.tf+2*this.tt)}});eie.exports=_3.default});var aie=ne((S3,iie)=>{"use strict";Object.defineProperty(S3,"__esModule",{value:!0});S3.default=function(t,e){for(var r=100,n=t.shape[0],a=(0,tie.default)(new Float64Array(n*n),[n,n]),s=(0,tie.default)(new Float64Array(n*n),[n,n]),o=void 0,u=void 0,l=1/0,h=0,p=Math.log(e),v=void 0,y=void 0,S=void 0,A=void 0,T=0;T<n;T++){o=1,u=-1/0,l=1/0;for(var I=0;I<r;I++){for(var N=0;N<n;N++)a.set(T,N,Math.exp(-t.get(T,N)*o));a.set(T,T,0),S=0;for(var N=0;N<n;N++)S+=a.get(T,N);S==0&&(S=IKe),A=0;for(var N=0;N<n;N++)a.set(T,N,a.get(T,N)/S),A+=t.get(T,N)*a.get(T,N);if(y=Math.log(S)+o*A,v=y-p,Math.abs(v)<=DKe)break;v>0?(u=o,l==1/0?o=o*2:o=(o+l)/2):(l=o,u==-1/0?o=o/2:o=(o+u)/2)}h+=o}x3.default.add(s,a,a.transpose(1,0));var D=Math.max(x3.default.sum(s),rie);return x3.default.divseq(s,D),x3.default.maxseq(s,rie),s};var TKe=cd(),tie=nie(TKe),NKe=v3(),x3=nie(NKe);function nie(t){return t&&t.__esModule?t:{default:t}}var IKe=1e-7,rie=Number.EPSILON||2220446049250313e-31,DKe=1e-5;iie.exports=S3.default});var uie=ne((M3,oie)=>{"use strict";Object.defineProperty(M3,"__esModule",{value:!0});M3.default=function(t,e,r){var n=t.shape[0],a=t.shape[1],s=(0,Km.default)(new Float64Array(n*n),[n,n]),o=(0,LKe.default)(t,"euclidean");PKe(o);var u=(r+1)/-2;ki.default.powseq(ki.default.divseq(ki.default.addseq(o,1),r),u);for(var l=0;l<n;l++)o.set(l,l,0);var h=Math.max(ki.default.sum(o),sie);ki.default.divs(s,o,h),ki.default.maxseq(s,sie);var p=(0,Km.default)(new Float64Array(n*n),[n,n]),v=(0,Km.default)(new Float64Array(n*n),[n,n]);ki.default.div(p,e,s),ki.default.logeq(p),ki.default.assign(v,e);var y=ki.default.sum(ki.default.muleq(p,v)),S=(0,Km.default)(new Float64Array(t.size),t.shape),A=(0,Km.default)(new Float64Array(n*n),[n,n]);ki.default.sub(A,e,s),ki.default.muleq(A,o);for(var l=0;l<n;l++)for(var T=0;T<a;T++){var I=(0,Km.default)(new Float64Array(t.shape[0]),[t.shape[0]]);ki.default.assign(I,t.pick(null,T)),ki.default.addseq(ki.default.negeq(I),t.get(l,T)),ki.default.muleq(I,A.pick(l,null)),S.set(l,T,ki.default.sum(I))}var N=2*(r+1)/r;return ki.default.mulseq(S,N),[y,S]};var OKe=cd(),Km=E3(OKe),RKe=v3(),ki=E3(RKe),CKe=A1(),FKe=E3(CKe),BKe=g8(),LKe=E3(BKe);function E3(t){return t&&t.__esModule?t:{default:t}}var sie=Number.EPSILON||2220446049250313e-31,PKe=(0,FKe.default)({args:["array"],body:function(e){e=e*e}});oie.exports=M3.default});var die=ne((A3,hie)=>{"use strict";Object.defineProperty(A3,"__esModule",{value:!0});var k1=function(){function t(e,r){var n=[],a=!0,s=!1,o=void 0;try{for(var u=e[Symbol.iterator](),l;!(a=(l=u.next()).done)&&(n.push(l.value),!(r&&n.length===r));a=!0);}catch(h){s=!0,o=h}finally{try{!a&&u.return&&u.return()}finally{if(s)throw o}}return n}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),qKe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),$Ke=vs(),zKe=cd(),Zm=Vf(zKe),jKe=v3(),$u=Vf(jKe),UKe=qne(),VKe=Vf(UKe),WKe=Zne(),fie=Vf(WKe),GKe=A1(),lie=Vf(GKe),HKe=Xne(),cie=Vf(HKe),KKe=g8(),ZKe=Vf(KKe),JKe=aie(),YKe=Vf(JKe),XKe=uie(),QKe=Vf(XKe);function Vf(t){return t&&t.__esModule?t:{default:t}}function eZe(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}else return Array.from(t)}function tZe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rZe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function nZe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var iZe=function(t){nZe(e,t);function e(r){tZe(this,e);var n=rZe(this,Object.getPrototypeOf(e).call(this));return r=r||{},n.dim=r.dim||2,n.perplexity=r.perplexity||30,n.earlyExaggeration=r.earlyExaggeration||4,n.learningRate=r.learningRate||1e3,n.nIter=r.nIter||1e3,n.metric=r.metric||"euclidean",n.barneshut=r.barneshut||!1,n.inputData=null,n.outputEmbedding=null,n}return qKe(e,[{key:"init",value:function(n){n=n||{};var a=n.data||[],s=n.type||"dense";if(s==="dense")this.inputData=(0,VKe.default)(a);else if(s==="sparse"){for(var o=[],u=1,l=function(D){var C=Math.max.apply(null,a.map(function(L){return L[D]}))+1;o.push(C),u*=C},h=0;h<a[0].length;h++)l(h);this.inputData=(0,Zm.default)(new Float64Array(u),o);var p=!0,v=!1,y=void 0;try{for(var S=a[Symbol.iterator](),A;!(p=(A=S.next()).done);p=!0){var T,I=A.value;(T=this.inputData).set.apply(T,eZe(I).concat([1]))}}catch(N){v=!0,y=N}finally{try{!p&&S.return&&S.return()}finally{if(v)throw y}}}else throw new Error("input data type must be dense or sparse");this.outputEmbedding=(0,cie.default)(this.inputData.shape[0],this.dim)}},{key:"run",value:function(){this.emit("progressStatus","Calculating pairwise distances"),this.distances=(0,ZKe.default)(this.inputData,this.metric),this.emit("progressStatus","Calculating joint probabilities"),this.alpha=Math.max(this.dim-1,1),this.P=(0,YKe.default)(this.distances,this.perplexity);var n=Number.MAX_VALUE,a=0;this.emit("progressStatus","Early exaggeration with momentum 0.5"),$u.default.mulseq(this.P,this.earlyExaggeration);var s=this._gradDesc(a,50,.5,0,0),o=k1(s,2);n=o[0],a=o[1],this.emit("progressStatus","Early exaggeration with momentum 0.8");var u=this._gradDesc(a+1,100,.8,0,0),l=k1(u,2);n=l[0],a=l[1],this.emit("progressStatus","Final optimization with momentum 0.8"),$u.default.divseq(this.P,this.earlyExaggeration);var h=this._gradDesc(a+1,this.nIter,.8,1e-6,1e-6),p=k1(h,2);return n=p[0],a=p[1],this.emit("progressStatus","Optimization end"),[n,a]}},{key:"rerun",value:function(){this.outputEmbedding=(0,cie.default)(this.inputData.shape[0],this.dim);var n=this.run(),a=k1(n,2),s=a[0],o=a[1];return[s,o]}},{key:"getOutput",value:function(){return(0,fie.default)(this.outputEmbedding)}},{key:"getOutputScaled",value:function(){for(var n=(0,Zm.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),a=(0,Zm.default)(new Float64Array(this.outputEmbedding.shape[0]),[this.outputEmbedding.shape[0]]),s=0;s<this.outputEmbedding.shape[1];s++){var o=$u.default.sup($u.default.abs(a,this.outputEmbedding.pick(null,s)));$u.default.divs(n.pick(null,s),this.outputEmbedding.pick(null,s),o)}return(0,fie.default)(n)}},{key:"_gradDesc",value:function(n,a,s){for(var o=arguments.length<=3||arguments[3]===void 0?1e-6:arguments[3],u=arguments.length<=4||arguments[4]===void 0?1e-6:arguments[4],l=30,h=(0,Zm.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),p=new Float64Array(this.outputEmbedding.size),v=0;v<p.length;v++)p[v]=1;var y=(0,Zm.default)(p,this.outputEmbedding.shape),S=Number.MAX_VALUE,A=Number.MAX_VALUE,T=0,I=(0,lie.default)({args:["array"],pre:function(f){this.sum=0},body:function(f){this.sum+=f*f},post:function(f){return Math.sqrt(this.sum)}}),N=(0,lie.default)({args:["array","array","array"],body:function(f,d,g){d*g>=0?f+=.05:f*=.95,f=Math.max(f,.01)}}),D=void 0;for(D=n;D<a;D++){var C=(0,QKe.default)(this.outputEmbedding,this.P,this.alpha),L=k1(C,2),z=L[0],$=L[1],G=Math.abs(z-S);S=z;var j=I($);if(this.emit("progressIter",[D,S,j]),S<A)A=S,T=D;else if(D-T>l)break;if(o>=j||u>=G)break;N(y,h,$),$u.default.muleq($,y);var K=(0,Zm.default)(new Float64Array($.size),$.shape);$u.default.muls(K,$,this.learningRate),$u.default.mulseq(h,s),$u.default.subeq(h,K),$u.default.addeq(this.outputEmbedding,h),this.emit("progressData",this.getOutputScaled())}return[S,D]}}]),e}($Ke.EventEmitter);A3.default=iZe;hie.exports=A3.default});var Mae=ne((B6t,Eae)=>{"use strict";var _o=function(t){(!t||!(t instanceof Array))&&(t=[]),t=t.slice(0),t.sort(function(e,r){return e-r}),this.array=t};_o.prototype.clone=function(){return new _o(this.array.slice(0))};_o.prototype.q1=function(){var t=this.clone();return t.slice(0,Math.floor(t.size()/2)).median()};_o.prototype.q3=function(){var t=this.clone();return t.slice(Math.ceil(t.size()/2)).median()};_o.prototype.iqr=function(){return this.q3()-this.q1()};_o.prototype.median=function(){var t=Math.floor(this.size()/2);return this.size()%2?this.array[t]:(this.array[t-1]+this.array[t])/2};_o.prototype.slice=function(){return this.array=Array.prototype.slice.apply(this.array,arguments),this};_o.prototype.each=function(t){for(var e=0,r=this.size();e<r;e++)t.call(this.array[e],this.array[e],e,this.array);return this};_o.prototype.findOutliers=function(){var t=this.median(),e=this.iqr()*1.5,r=[];return this.each(function(n){Math.abs(n-t)>e&&r.push(n)}),r};_o.prototype.size=function(){return this.array.length};_o.prototype.testOutlier=function(t){return Math.abs(t-this.median())>this.iqr()*1.5};Eae.exports=function(t){return new _o(t)}});var Uae=ne((W6t,jae)=>{jae.exports=ab;ab.flatten=ab;ab.unflatten=zae;function qae(t){return t&&t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function $ae(t){return t}function ab(t,e){e=e||{};let r=e.delimiter||".",n=e.maxDepth,a=e.transformKey||$ae,s={};function o(u,l,h){h=h||1,Object.keys(u).forEach(function(p){let v=u[p],y=e.safe&&Array.isArray(v),S=Object.prototype.toString.call(v),A=qae(v),T=S==="[object Object]"||S==="[object Array]",I=l?l+r+a(p):a(p);if(!y&&!A&&T&&Object.keys(v).length&&(!e.maxDepth||h<n))return o(v,I,h+1);s[I]=v})}return o(t),s}function zae(t,e){e=e||{};let r=e.delimiter||".",n=e.overwrite||!1,a=e.transformKey||$ae,s={};if(qae(t)||Object.prototype.toString.call(t)!=="[object Object]")return t;function u(p){let v=Number(p);return isNaN(v)||p.indexOf(".")!==-1||e.object?p:v}function l(p,v,y){return Object.keys(y).reduce(function(S,A){return S[p+r+A]=y[A],S},v)}function h(p){let v=Object.prototype.toString.call(p),y=v==="[object Array]",S=v==="[object Object]";if(p){if(y)return!p.length;if(S)return!Object.keys(p).length}else return!0}return t=Object.keys(t).reduce(function(p,v){let y=Object.prototype.toString.call(t[v]);return!(y==="[object Object]"||y==="[object Array]")||h(t[v])?(p[v]=t[v],p):l(v,p,ab(t[v],e))},{}),Object.keys(t).forEach(function(p){let v=p.split(r).map(a),y=u(v.shift()),S=u(v[0]),A=s;for(;S!==void 0;){if(y==="__proto__")return;let T=Object.prototype.toString.call(A[y]),I=T==="[object Object]"||T==="[object Array]";if(!n&&!I&&typeof A[y]!="undefined")return;(n&&!I||!n&&A[y]==null)&&(A[y]=typeof S=="number"&&!e.object?[]:{}),A=A[y],v.length>0&&(y=u(v.shift()),S=u(v[0]))}A[y]=zae(t[p],e)}),s}});var fYe={};Zf(fYe,{Data:()=>Tp,JSONModel:()=>au,Model:()=>T1,ModelCategories:()=>wO,ModelTypes:()=>bO,ModelX:()=>au,autoAssignFeatureColumns:()=>J3,createModelFitCallback:()=>Wae,getAutoFeatures:()=>K3,getBackend:()=>sb,getDataSet:()=>ob,getGeneratedStatefulFunction:()=>_O,getModel:()=>Qae,getModelFromJSONM:()=>AO,getModelTrainingOptions:()=>kO,getScikit:()=>Y3,setBackend:()=>Vae,setScikit:()=>Gae,sumPreviousRows:()=>xO});var Tp={};Zf(Tp,{DataSet:()=>vi,PD:()=>qj.default,calc:()=>fxe,cross_validation:()=>o4,csv:()=>lxe,nlp:()=>f2,util:()=>Sr});var Cj=ut(Yb()),Fj=ut(EA()),Bj=ut(MA()),a4=ut(AA()),qj=ut(kz()),$j=ut(Dg()),Ap=ut(Dg()),zj=ut(oh()),jj=ut(W6());function t2e(t){return t.next()|0}function uh(t,e){return e===0?t:r=>t(r)+e}function qz(t){let e=t.next()|0,r=t.next()>>>0;return(e&2097151)*4294967296+r+(e&2097152?-9007199254740992:0)}function r2e(t){for(;;){let e=t.next()|0;if(e&4194304){if((e&8388607)===4194304&&(t.next()|0)===0)return 9007199254740992}else{let r=t.next()>>>0;return(e&2097151)*4294967296+r+(e&2097152?-9007199254740992:0)}}}function n2e(t){return t.next()>>>0}function i2e(t){let e=t.next()&2097151,r=t.next()>>>0;return e*4294967296+r}function a2e(t){for(;;){let e=t.next()|0;if(e&2097152){if((e&2097151)===0&&(t.next()|0)===0)return 9007199254740992}else{let r=t.next()>>>0;return(e&2097151)*4294967296+r}}}function jz(t){return(t+1&t)===0}function s2e(t){return e=>e.next()&t}function o2e(t){let e=t+1,r=e*Math.floor(4294967296/e);return n=>{let a=0;do a=n.next()>>>0;while(a>=r);return a%e}}function u2e(t){return jz(t)?s2e(t):o2e(t)}function f2e(t){return(t|0)===0}function l2e(t){return e=>{let r=e.next()&t,n=e.next()>>>0;return r*4294967296+n}}function c2e(t){let e=t*Math.floor(9007199254740992/t);return r=>{let n=0;do{let a=r.next()&2097151,s=r.next()>>>0;n=a*4294967296+s}while(n>=e);return n%t}}function h2e(t){let e=t+1;if(f2e(e)){let r=(e/4294967296|0)-1;if(jz(r))return l2e(r)}return c2e(e)}function $z(t,e){return r=>{let n=0;do{let a=r.next()|0,s=r.next()>>>0;n=(a&2097151)*4294967296+s+(a&2097152?-9007199254740992:0)}while(n<t||n>e);return n}}function s2(t,e){if(t=Math.floor(t),e=Math.floor(e),t<-9007199254740992||!isFinite(t))throw new RangeError(`Expected min to be at least ${-9007199254740992}`);if(e>9007199254740992||!isFinite(e))throw new RangeError(`Expected max to be at most ${9007199254740992}`);let r=e-t;return r<=0||!isFinite(r)?()=>t:r===4294967295?t===0?n2e:uh(t2e,t+2147483648):r<4294967295?uh(u2e(r),t):r===9007199254740991?uh(i2e,t):r<9007199254740991?uh(h2e(r),t):e-1-t===9007199254740991?uh(a2e,t):t===-9007199254740992&&e===9007199254740992?r2e:t===-9007199254740992&&e===9007199254740991?qz:t===-9007199254740991&&e===9007199254740992?uh(qz,1):e===9007199254740992?uh($z(t-1,e-1),1):$z(t,e)}var d2e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-";function Uz(t=d2e){let e=t.length;if(!e)throw new Error("Expected pool not to be an empty string");let r=s2(0,e-1);return(n,a)=>{let s="";for(let o=0;o<a;++o){let u=r(n);s+=t.charAt(u)}return s}}var Vz="0123456789abcdef",Rtt=Uz(Vz),Ctt=Uz(Vz.toUpperCase());var Ftt=Array.prototype.slice;var Btt=(()=>{try{if("x".repeat(3)==="xxx")return(t,e)=>t.repeat(e)}catch{}return(t,e)=>{let r="";for(;e>0;)e&1&&(r+=t),e>>=1,t+=t;return r}})();var p2e={next(){return Math.random()*4294967296|0}};var m2e=(()=>{try{let t=new ArrayBuffer(4),e=new Int32Array(t);if(e[0]=2147483648,e[0]===-2147483648)return Int32Array}catch{}return Array})();function v2e(t=p2e,e=16){let r=[];r.push(new Date().getTime()|0);for(let n=1;n<e;++n)r[n]=t.next()|0;return r}var K6=(()=>{try{if(Math.imul(4294967295,5)===-5)return Math.imul}catch{}let t=65535;return(e,r)=>{let n=e>>>16&t,a=e&t,s=r>>>16&t,o=r&t;return a*o+(n*o+a*s<<16>>>0)|0}})(),Nu=624,Ml=Nu-1,Z6=397,zz=Nu-Z6,G6=2567483615,cf=class{constructor(){this.data=new m2e(Nu),this.index=0,this.uses=0}static seed(e){return new cf().seed(e)}static seedWithArray(e){return new cf().seedWithArray(e)}static autoSeed(){return cf.seedWithArray(v2e())}next(){(this.index|0)>=Nu&&(H6(this.data),this.index=0);let e=this.data[this.index];return this.index=this.index+1|0,this.uses+=1,g2e(e)|0}getUseCount(){return this.uses}discard(e){if(e<=0)return this;for(this.uses+=e,(this.index|0)>=Nu&&(H6(this.data),this.index=0);e+this.index>Nu;)e-=Nu-this.index,H6(this.data),this.index=0;return this.index=this.index+e|0,this}seed(e){let r=0;this.data[0]=r=e|0;for(let n=1;n<Nu;n=n+1|0)this.data[n]=r=K6(r^r>>>30,1812433253)+n|0;return this.index=Nu,this.uses=0,this}seedWithArray(e){return this.seed(19650218),y2e(this.data,e),this}};function H6(t){let e=0,r=0;for(;(e|0)<zz;e=e+1|0)r=t[e]&2147483648|t[e+1|0]&2147483647,t[e]=t[e+Z6|0]^r>>>1^(r&1?G6:0);for(;(e|0)<Ml;e=e+1|0)r=t[e]&2147483648|t[e+1|0]&2147483647,t[e]=t[e-zz|0]^r>>>1^(r&1?G6:0);r=t[Ml]&2147483648|t[0]&2147483647,t[Ml]=t[Z6-1]^r>>>1^(r&1?G6:0)}function g2e(t){return t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,t^t>>>18}function y2e(t,e){let r=1,n=0,a=e.length,s=Math.max(a,Nu)|0,o=t[0]|0;for(;(s|0)>0;--s)t[r]=o=(t[r]^K6(o^o>>>30,1664525))+(e[n]|0)+(n|0)|0,r=r+1|0,++n,(r|0)>Ml&&(t[0]=t[Ml],r=1),n>=a&&(n=0);for(s=Ml;(s|0)>0;--s)t[r]=o=(t[r]^K6(o^o>>>30,1566083941))-r|0,r=r+1|0,(r|0)>Ml&&(t[0]=t[Ml],r=1);t[0]=2147483648}var Wj=ut(oh());var b2e=Object.prototype.toString;function Ci(t){return b2e.call(t).endsWith("Array]")}function Wz(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Ci(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");var r=e.fromIndex,n=r===void 0?0:r,a=e.toIndex,s=a===void 0?t.length:a;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=n||s>t.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=t[n],u=n+1;u<s;u++)t[u]>o&&(o=t[u]);return o}function Gz(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Ci(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");var r=e.fromIndex,n=r===void 0?0:r,a=e.toIndex,s=a===void 0?t.length:a;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=n||s>t.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=t[n],u=n+1;u<s;u++)t[u]<o&&(o=t[u]);return o}function J6(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ci(t)){if(t.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var r;if(e.output!==void 0){if(!Ci(e.output))throw new TypeError("output option must be an array if specified");r=e.output}else r=new Array(t.length);var n=Gz(t),a=Wz(t);if(n===a)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var s=e.min,o=s===void 0?e.autoMinMax?n:0:s,u=e.max,l=u===void 0?e.autoMinMax?a:1:u;if(o>=l)throw new RangeError("min option must be smaller than max option");for(var h=(l-o)/(a-n),p=0;p<t.length;p++)r[p]=(t[p]-n)*h+o;return r}var o2=" ".repeat(2),Hz=" ".repeat(4);function Kz(){return Y6(this)}function Y6(t,e={}){let{maxRows:r=15,maxColumns:n=10,maxNumSize:a=8}=e;return`${t.constructor.name} {
${o2}[
${Hz}${w2e(t,r,n,a)}
${o2}]
${o2}rows: ${t.rows}
${o2}columns: ${t.columns}
}`}function w2e(t,e,r,n){let{rows:a,columns:s}=t,o=Math.min(a,e),u=Math.min(s,r),l=[];for(let h=0;h<o;h++){let p=[];for(let v=0;v<u;v++)p.push(_2e(t.get(h,v),n));l.push(`${p.join(" ")}`)}return u!==s&&(l[l.length-1]+=` ... ${s-r} more columns`),o!==a&&l.push(`... ${a-e} more rows`),l.join(`
${Hz}`)}function _2e(t,e){let r=String(t);if(r.length<=e)return r.padEnd(e," ");let n=t.toPrecision(e-2);if(n.length<=e)return n;let a=t.toExponential(e-2),s=a.indexOf("e"),o=a.slice(s);return a.slice(0,e-o.length)+o}function Zz(t,e){t.prototype.add=function(n){return typeof n=="number"?this.addS(n):this.addM(n)},t.prototype.addS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)+n);return this},t.prototype.addM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)+n.get(a,s));return this},t.add=function(n,a){return new e(n).add(a)},t.prototype.sub=function(n){return typeof n=="number"?this.subS(n):this.subM(n)},t.prototype.subS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)-n);return this},t.prototype.subM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)-n.get(a,s));return this},t.sub=function(n,a){return new e(n).sub(a)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(n){return typeof n=="number"?this.mulS(n):this.mulM(n)},t.prototype.mulS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)*n);return this},t.prototype.mulM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)*n.get(a,s));return this},t.mul=function(n,a){return new e(n).mul(a)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(n){return typeof n=="number"?this.divS(n):this.divM(n)},t.prototype.divS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)/n);return this},t.prototype.divM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)/n.get(a,s));return this},t.div=function(n,a){return new e(n).div(a)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(n){return typeof n=="number"?this.modS(n):this.modM(n)},t.prototype.modS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)%n);return this},t.prototype.modM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)%n.get(a,s));return this},t.mod=function(n,a){return new e(n).mod(a)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(n){return typeof n=="number"?this.andS(n):this.andM(n)},t.prototype.andS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)&n);return this},t.prototype.andM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)&n.get(a,s));return this},t.and=function(n,a){return new e(n).and(a)},t.prototype.or=function(n){return typeof n=="number"?this.orS(n):this.orM(n)},t.prototype.orS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)|n);return this},t.prototype.orM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)|n.get(a,s));return this},t.or=function(n,a){return new e(n).or(a)},t.prototype.xor=function(n){return typeof n=="number"?this.xorS(n):this.xorM(n)},t.prototype.xorS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)^n);return this},t.prototype.xorM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)^n.get(a,s));return this},t.xor=function(n,a){return new e(n).xor(a)},t.prototype.leftShift=function(n){return typeof n=="number"?this.leftShiftS(n):this.leftShiftM(n)},t.prototype.leftShiftS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)<<n);return this},t.prototype.leftShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)<<n.get(a,s));return this},t.leftShift=function(n,a){return new e(n).leftShift(a)},t.prototype.signPropagatingRightShift=function(n){return typeof n=="number"?this.signPropagatingRightShiftS(n):this.signPropagatingRightShiftM(n)},t.prototype.signPropagatingRightShiftS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)>>n);return this},t.prototype.signPropagatingRightShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)>>n.get(a,s));return this},t.signPropagatingRightShift=function(n,a){return new e(n).signPropagatingRightShift(a)},t.prototype.rightShift=function(n){return typeof n=="number"?this.rightShiftS(n):this.rightShiftM(n)},t.prototype.rightShiftS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)>>>n);return this},t.prototype.rightShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)>>>n.get(a,s));return this},t.rightShift=function(n,a){return new e(n).rightShift(a)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,~this.get(n,a));return this},t.not=function(n){return new e(n).not()},t.prototype.abs=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.abs(this.get(n,a)));return this},t.abs=function(n){return new e(n).abs()},t.prototype.acos=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.acos(this.get(n,a)));return this},t.acos=function(n){return new e(n).acos()},t.prototype.acosh=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.acosh(this.get(n,a)));return this},t.acosh=function(n){return new e(n).acosh()},t.prototype.asin=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.asin(this.get(n,a)));return this},t.asin=function(n){return new e(n).asin()},t.prototype.asinh=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.asinh(this.get(n,a)));return this},t.asinh=function(n){return new e(n).asinh()},t.prototype.atan=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.atan(this.get(n,a)));return this},t.atan=function(n){return new e(n).atan()},t.prototype.atanh=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.atanh(this.get(n,a)));return this},t.atanh=function(n){return new e(n).atanh()},t.prototype.cbrt=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.cbrt(this.get(n,a)));return this},t.cbrt=function(n){return new e(n).cbrt()},t.prototype.ceil=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.ceil(this.get(n,a)));return this},t.ceil=function(n){return new e(n).ceil()},t.prototype.clz32=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.clz32(this.get(n,a)));return this},t.clz32=function(n){return new e(n).clz32()},t.prototype.cos=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.cos(this.get(n,a)));return this},t.cos=function(n){return new e(n).cos()},t.prototype.cosh=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.cosh(this.get(n,a)));return this},t.cosh=function(n){return new e(n).cosh()},t.prototype.exp=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.exp(this.get(n,a)));return this},t.exp=function(n){return new e(n).exp()},t.prototype.expm1=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.expm1(this.get(n,a)));return this},t.expm1=function(n){return new e(n).expm1()},t.prototype.floor=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.floor(this.get(n,a)));return this},t.floor=function(n){return new e(n).floor()},t.prototype.fround=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.fround(this.get(n,a)));return this},t.fround=function(n){return new e(n).fround()},t.prototype.log=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.log(this.get(n,a)));return this},t.log=function(n){return new e(n).log()},t.prototype.log1p=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.log1p(this.get(n,a)));return this},t.log1p=function(n){return new e(n).log1p()},t.prototype.log10=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.log10(this.get(n,a)));return this},t.log10=function(n){return new e(n).log10()},t.prototype.log2=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.log2(this.get(n,a)));return this},t.log2=function(n){return new e(n).log2()},t.prototype.round=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.round(this.get(n,a)));return this},t.round=function(n){return new e(n).round()},t.prototype.sign=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.sign(this.get(n,a)));return this},t.sign=function(n){return new e(n).sign()},t.prototype.sin=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.sin(this.get(n,a)));return this},t.sin=function(n){return new e(n).sin()},t.prototype.sinh=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.sinh(this.get(n,a)));return this},t.sinh=function(n){return new e(n).sinh()},t.prototype.sqrt=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.sqrt(this.get(n,a)));return this},t.sqrt=function(n){return new e(n).sqrt()},t.prototype.tan=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.tan(this.get(n,a)));return this},t.tan=function(n){return new e(n).tan()},t.prototype.tanh=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.tanh(this.get(n,a)));return this},t.tanh=function(n){return new e(n).tanh()},t.prototype.trunc=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.trunc(this.get(n,a)));return this},t.trunc=function(n){return new e(n).trunc()},t.pow=function(n,a){return new e(n).pow(a)},t.prototype.pow=function(n){return typeof n=="number"?this.powS(n):this.powM(n)},t.prototype.powS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,Math.pow(this.get(a,s),n));return this},t.prototype.powM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,Math.pow(this.get(a,s),n.get(a,s)));return this}}function $s(t,e,r){let n=r?t.rows:t.rows-1;if(e<0||e>n)throw new RangeError("Row index out of range")}function zs(t,e,r){let n=r?t.columns:t.columns-1;if(e<0||e>n)throw new RangeError("Column index out of range")}function fh(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function lh(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function Jz(t,e){if(!Ci(e))throw new TypeError("row indices must be an array");for(let r=0;r<e.length;r++)if(e[r]<0||e[r]>=t.rows)throw new RangeError("row indices are out of range")}function Yz(t,e){if(!Ci(e))throw new TypeError("column indices must be an array");for(let r=0;r<e.length;r++)if(e[r]<0||e[r]>=t.columns)throw new RangeError("column indices are out of range")}function X6(t,e,r,n,a){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(u2("startRow",e),u2("endRow",r),u2("startColumn",n),u2("endColumn",a),e>r||n>a||e<0||e>=t.rows||r<0||r>=t.rows||n<0||n>=t.columns||a<0||a>=t.columns)throw new RangeError("Submatrix indices are out of range")}function Og(t,e=0){let r=[];for(let n=0;n<t;n++)r.push(e);return r}function u2(t,e){if(typeof e!="number")throw new TypeError(`${t} must be a number`)}function ch(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}function Xz(t){let e=Og(t.rows);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[r]+=t.get(r,n);return e}function Qz(t){let e=Og(t.columns);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[n]+=t.get(r,n);return e}function ej(t){let e=0;for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)e+=t.get(r,n);return e}function tj(t){let e=Og(t.rows,1);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[r]*=t.get(r,n);return e}function rj(t){let e=Og(t.columns,1);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[n]*=t.get(r,n);return e}function nj(t){let e=1;for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)e*=t.get(r,n);return e}function ij(t,e,r){let n=t.rows,a=t.columns,s=[];for(let o=0;o<n;o++){let u=0,l=0,h=0;for(let p=0;p<a;p++)h=t.get(o,p)-r[o],u+=h,l+=h*h;e?s.push((l-u*u/a)/(a-1)):s.push((l-u*u/a)/a)}return s}function aj(t,e,r){let n=t.rows,a=t.columns,s=[];for(let o=0;o<a;o++){let u=0,l=0,h=0;for(let p=0;p<n;p++)h=t.get(p,o)-r[o],u+=h,l+=h*h;e?s.push((l-u*u/n)/(n-1)):s.push((l-u*u/n)/n)}return s}function sj(t,e,r){let n=t.rows,a=t.columns,s=n*a,o=0,u=0,l=0;for(let h=0;h<n;h++)for(let p=0;p<a;p++)l=t.get(h,p)-r,o+=l,u+=l*l;return e?(u-o*o/s)/(s-1):(u-o*o/s)/s}function oj(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[r])}function uj(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[n])}function fj(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e)}function lj(t){let e=[];for(let r=0;r<t.rows;r++){let n=0;for(let a=0;a<t.columns;a++)n+=Math.pow(t.get(r,a),2)/(t.columns-1);e.push(Math.sqrt(n))}return e}function cj(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[r])}function hj(t){let e=[];for(let r=0;r<t.columns;r++){let n=0;for(let a=0;a<t.rows;a++)n+=Math.pow(t.get(a,r),2)/(t.rows-1);e.push(Math.sqrt(n))}return e}function dj(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[n])}function pj(t){let e=t.size-1,r=0;for(let n=0;n<t.columns;n++)for(let a=0;a<t.rows;a++)r+=Math.pow(t.get(a,n),2)/e;return Math.sqrt(r)}function mj(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e)}var Wt=class{static from1DArray(e,r,n){if(e*r!==n.length)throw new RangeError("data length does not match given dimensions");let s=new Lt(e,r);for(let o=0;o<e;o++)for(let u=0;u<r;u++)s.set(o,u,n[o*r+u]);return s}static rowVector(e){let r=new Lt(1,e.length);for(let n=0;n<e.length;n++)r.set(0,n,e[n]);return r}static columnVector(e){let r=new Lt(e.length,1);for(let n=0;n<e.length;n++)r.set(n,0,e[n]);return r}static zeros(e,r){return new Lt(e,r)}static ones(e,r){return new Lt(e,r).fill(1)}static rand(e,r,n={}){if(typeof n!="object")throw new TypeError("options must be an object");let{random:a=Math.random}=n,s=new Lt(e,r);for(let o=0;o<e;o++)for(let u=0;u<r;u++)s.set(o,u,a());return s}static randInt(e,r,n={}){if(typeof n!="object")throw new TypeError("options must be an object");let{min:a=0,max:s=1e3,random:o=Math.random}=n;if(!Number.isInteger(a))throw new TypeError("min must be an integer");if(!Number.isInteger(s))throw new TypeError("max must be an integer");if(a>=s)throw new RangeError("min must be smaller than max");let u=s-a,l=new Lt(e,r);for(let h=0;h<e;h++)for(let p=0;p<r;p++){let v=a+Math.round(o()*u);l.set(h,p,v)}return l}static eye(e,r,n){r===void 0&&(r=e),n===void 0&&(n=1);let a=Math.min(e,r),s=this.zeros(e,r);for(let o=0;o<a;o++)s.set(o,o,n);return s}static diag(e,r,n){let a=e.length;r===void 0&&(r=a),n===void 0&&(n=r);let s=Math.min(a,r,n),o=this.zeros(r,n);for(let u=0;u<s;u++)o.set(u,u,e[u]);return o}static min(e,r){e=this.checkMatrix(e),r=this.checkMatrix(r);let n=e.rows,a=e.columns,s=new Lt(n,a);for(let o=0;o<n;o++)for(let u=0;u<a;u++)s.set(o,u,Math.min(e.get(o,u),r.get(o,u)));return s}static max(e,r){e=this.checkMatrix(e),r=this.checkMatrix(r);let n=e.rows,a=e.columns,s=new this(n,a);for(let o=0;o<n;o++)for(let u=0;u<a;u++)s.set(o,u,Math.max(e.get(o,u),r.get(o,u)));return s}static checkMatrix(e){return Wt.isMatrix(e)?e:new Lt(e)}static isMatrix(e){return e!=null&&e.klass==="Matrix"}get size(){return this.rows*this.columns}apply(e){if(typeof e!="function")throw new TypeError("callback must be a function");for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)e.call(this,r,n);return this}to1DArray(){let e=[];for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)e.push(this.get(r,n));return e}to2DArray(){let e=[];for(let r=0;r<this.rows;r++){e.push([]);for(let n=0;n<this.columns;n++)e[r].push(this.get(r,n))}return e}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let e=0;e<this.rows;e++)for(let r=0;r<=e;r++)if(this.get(e,r)!==this.get(r,e))return!1;return!0}return!1}isEchelonForm(){let e=0,r=0,n=-1,a=!0,s=!1;for(;e<this.rows&&a;){for(r=0,s=!1;r<this.columns&&s===!1;)this.get(e,r)===0?r++:this.get(e,r)===1&&r>n?(s=!0,n=r):(a=!1,s=!0);e++}return a}isReducedEchelonForm(){let e=0,r=0,n=-1,a=!0,s=!1;for(;e<this.rows&&a;){for(r=0,s=!1;r<this.columns&&s===!1;)this.get(e,r)===0?r++:this.get(e,r)===1&&r>n?(s=!0,n=r):(a=!1,s=!0);for(let o=r+1;o<this.rows;o++)this.get(e,o)!==0&&(a=!1);e++}return a}echelonForm(){let e=this.clone(),r=0,n=0;for(;r<e.rows&&n<e.columns;){let a=r;for(let s=r;s<e.rows;s++)e.get(s,n)>e.get(a,n)&&(a=s);if(e.get(a,n)===0)n++;else{e.swapRows(r,a);let s=e.get(r,n);for(let o=n;o<e.columns;o++)e.set(r,o,e.get(r,o)/s);for(let o=r+1;o<e.rows;o++){let u=e.get(o,n)/e.get(r,n);e.set(o,n,0);for(let l=n+1;l<e.columns;l++)e.set(o,l,e.get(o,l)-e.get(r,l)*u)}r++,n++}}return e}reducedEchelonForm(){let e=this.echelonForm(),r=e.columns,n=e.rows,a=n-1;for(;a>=0;)if(e.maxRow(a)===0)a--;else{let s=0,o=!1;for(;s<n&&o===!1;)e.get(a,s)===1?o=!0:s++;for(let u=0;u<a;u++){let l=e.get(u,s);for(let h=s;h<r;h++){let p=e.get(u,h)-l*e.get(a,h);e.set(u,h,p)}}a--}return e}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(e={}){if(typeof e!="object")throw new TypeError("options must be an object");let{rows:r=1,columns:n=1}=e;if(!Number.isInteger(r)||r<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let a=new Lt(this.rows*r,this.columns*n);for(let s=0;s<r;s++)for(let o=0;o<n;o++)a.setSubMatrix(this,this.rows*s,this.columns*o);return a}fill(e){for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,e);return this}neg(){return this.mulS(-1)}getRow(e){$s(this,e);let r=[];for(let n=0;n<this.columns;n++)r.push(this.get(e,n));return r}getRowVector(e){return Lt.rowVector(this.getRow(e))}setRow(e,r){$s(this,e),r=fh(this,r);for(let n=0;n<this.columns;n++)this.set(e,n,r[n]);return this}swapRows(e,r){$s(this,e),$s(this,r);for(let n=0;n<this.columns;n++){let a=this.get(e,n);this.set(e,n,this.get(r,n)),this.set(r,n,a)}return this}getColumn(e){zs(this,e);let r=[];for(let n=0;n<this.rows;n++)r.push(this.get(n,e));return r}getColumnVector(e){return Lt.columnVector(this.getColumn(e))}setColumn(e,r){zs(this,e),r=lh(this,r);for(let n=0;n<this.rows;n++)this.set(n,e,r[n]);return this}swapColumns(e,r){zs(this,e),zs(this,r);for(let n=0;n<this.rows;n++){let a=this.get(n,e);this.set(n,e,this.get(n,r)),this.set(n,r,a)}return this}addRowVector(e){e=fh(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)+e[n]);return this}subRowVector(e){e=fh(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)-e[n]);return this}mulRowVector(e){e=fh(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)*e[n]);return this}divRowVector(e){e=fh(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)/e[n]);return this}addColumnVector(e){e=lh(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)+e[r]);return this}subColumnVector(e){e=lh(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)-e[r]);return this}mulColumnVector(e){e=lh(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)*e[r]);return this}divColumnVector(e){e=lh(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)/e[r]);return this}mulRow(e,r){$s(this,e);for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*r);return this}mulColumn(e,r){zs(this,e);for(let n=0;n<this.rows;n++)this.set(n,e,this.get(n,e)*r);return this}max(e){if(this.isEmpty())return NaN;switch(e){case"row":{let r=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)>r[n]&&(r[n]=this.get(n,a));return r}case"column":{let r=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)>r[a]&&(r[a]=this.get(n,a));return r}case void 0:{let r=this.get(0,0);for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)>r&&(r=this.get(n,a));return r}default:throw new Error(`invalid option: ${e}`)}}maxIndex(){ch(this);let e=this.get(0,0),r=[0,0];for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)>e&&(e=this.get(n,a),r[0]=n,r[1]=a);return r}min(e){if(this.isEmpty())return NaN;switch(e){case"row":{let r=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)<r[n]&&(r[n]=this.get(n,a));return r}case"column":{let r=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)<r[a]&&(r[a]=this.get(n,a));return r}case void 0:{let r=this.get(0,0);for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)<r&&(r=this.get(n,a));return r}default:throw new Error(`invalid option: ${e}`)}}minIndex(){ch(this);let e=this.get(0,0),r=[0,0];for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)<e&&(e=this.get(n,a),r[0]=n,r[1]=a);return r}maxRow(e){if($s(this,e),this.isEmpty())return NaN;let r=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)>r&&(r=this.get(e,n));return r}maxRowIndex(e){$s(this,e),ch(this);let r=this.get(e,0),n=[e,0];for(let a=1;a<this.columns;a++)this.get(e,a)>r&&(r=this.get(e,a),n[1]=a);return n}minRow(e){if($s(this,e),this.isEmpty())return NaN;let r=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)<r&&(r=this.get(e,n));return r}minRowIndex(e){$s(this,e),ch(this);let r=this.get(e,0),n=[e,0];for(let a=1;a<this.columns;a++)this.get(e,a)<r&&(r=this.get(e,a),n[1]=a);return n}maxColumn(e){if(zs(this,e),this.isEmpty())return NaN;let r=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)>r&&(r=this.get(n,e));return r}maxColumnIndex(e){zs(this,e),ch(this);let r=this.get(0,e),n=[0,e];for(let a=1;a<this.rows;a++)this.get(a,e)>r&&(r=this.get(a,e),n[0]=a);return n}minColumn(e){if(zs(this,e),this.isEmpty())return NaN;let r=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)<r&&(r=this.get(n,e));return r}minColumnIndex(e){zs(this,e),ch(this);let r=this.get(0,e),n=[0,e];for(let a=1;a<this.rows;a++)this.get(a,e)<r&&(r=this.get(a,e),n[0]=a);return n}diag(){let e=Math.min(this.rows,this.columns),r=[];for(let n=0;n<e;n++)r.push(this.get(n,n));return r}norm(e="frobenius"){let r=0;if(e==="max")return this.max();if(e==="frobenius"){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)r=r+this.get(n,a)*this.get(n,a);return Math.sqrt(r)}else throw new RangeError(`unknown norm type: ${e}`)}cumulativeSum(){let e=0;for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)e+=this.get(r,n),this.set(r,n,e);return this}dot(e){Wt.isMatrix(e)&&(e=e.to1DArray());let r=this.to1DArray();if(r.length!==e.length)throw new RangeError("vectors do not have the same size");let n=0;for(let a=0;a<r.length;a++)n+=r[a]*e[a];return n}mmul(e){e=Lt.checkMatrix(e);let r=this.rows,n=this.columns,a=e.columns,s=new Lt(r,a),o=new Float64Array(n);for(let u=0;u<a;u++){for(let l=0;l<n;l++)o[l]=e.get(l,u);for(let l=0;l<r;l++){let h=0;for(let p=0;p<n;p++)h+=this.get(l,p)*o[p];s.set(l,u,h)}}return s}strassen2x2(e){e=Lt.checkMatrix(e);let r=new Lt(2,2),n=this.get(0,0),a=e.get(0,0),s=this.get(0,1),o=e.get(0,1),u=this.get(1,0),l=e.get(1,0),h=this.get(1,1),p=e.get(1,1),v=(n+h)*(a+p),y=(u+h)*a,S=n*(o-p),A=h*(l-a),T=(n+s)*p,I=(u-n)*(a+o),N=(s-h)*(l+p),D=v+A-T+N,C=S+T,L=y+A,z=v-y+S+I;return r.set(0,0,D),r.set(0,1,C),r.set(1,0,L),r.set(1,1,z),r}strassen3x3(e){e=Lt.checkMatrix(e);let r=new Lt(3,3),n=this.get(0,0),a=this.get(0,1),s=this.get(0,2),o=this.get(1,0),u=this.get(1,1),l=this.get(1,2),h=this.get(2,0),p=this.get(2,1),v=this.get(2,2),y=e.get(0,0),S=e.get(0,1),A=e.get(0,2),T=e.get(1,0),I=e.get(1,1),N=e.get(1,2),D=e.get(2,0),C=e.get(2,1),L=e.get(2,2),z=(n+a+s-o-u-p-v)*I,$=(n-o)*(-S+I),G=u*(-y+S+T-I-N-D+L),j=(-n+o+u)*(y-S+I),K=(o+u)*(-y+S),M=n*y,f=(-n+h+p)*(y-A+N),d=(-n+h)*(A-N),g=(h+p)*(-y+A),m=(n+a+s-u-l-h-p)*N,b=p*(-y+A+T-I-N-D+C),E=(-s+p+v)*(I+D-C),k=(s-v)*(I-C),w=s*D,c=(p+v)*(-D+C),_=(-s+u+l)*(N+D-L),R=(s-l)*(N-L),O=(u+l)*(-D+L),F=a*T,U=l*C,H=o*A,J=h*S,fe=v*L,B=M+w+F,q=z+j+K+M+E+w+c,Y=M+f+g+m+w+_+O,X=$+G+j+M+w+_+R,Q=$+j+K+M+U,be=w+_+R+O+H,ue=M+f+d+b+E+k+w,me=E+k+w+c+J,vt=M+f+d+g+fe;return r.set(0,0,B),r.set(0,1,q),r.set(0,2,Y),r.set(1,0,X),r.set(1,1,Q),r.set(1,2,be),r.set(2,0,ue),r.set(2,1,me),r.set(2,2,vt),r}mmulStrassen(e){e=Lt.checkMatrix(e);let r=this.clone(),n=r.rows,a=r.columns,s=e.rows,o=e.columns;a!==s&&console.warn(`Multiplying ${n} x ${a} and ${s} x ${o} matrix: dimensions do not match.`);function u(v,y,S){let A=v.rows,T=v.columns;if(A===y&&T===S)return v;{let I=Wt.zeros(y,S);return I=I.setSubMatrix(v,0,0),I}}let l=Math.max(n,s),h=Math.max(a,o);r=u(r,l,h),e=u(e,l,h);function p(v,y,S,A){if(S<=512||A<=512)return v.mmul(y);S%2===1&&A%2===1?(v=u(v,S+1,A+1),y=u(y,S+1,A+1)):S%2===1?(v=u(v,S+1,A),y=u(y,S+1,A)):A%2===1&&(v=u(v,S,A+1),y=u(y,S,A+1));let T=parseInt(v.rows/2,10),I=parseInt(v.columns/2,10),N=v.subMatrix(0,T-1,0,I-1),D=y.subMatrix(0,T-1,0,I-1),C=v.subMatrix(0,T-1,I,v.columns-1),L=y.subMatrix(0,T-1,I,y.columns-1),z=v.subMatrix(T,v.rows-1,0,I-1),$=y.subMatrix(T,y.rows-1,0,I-1),G=v.subMatrix(T,v.rows-1,I,v.columns-1),j=y.subMatrix(T,y.rows-1,I,y.columns-1),K=p(Wt.add(N,G),Wt.add(D,j),T,I),M=p(Wt.add(z,G),D,T,I),f=p(N,Wt.sub(L,j),T,I),d=p(G,Wt.sub($,D),T,I),g=p(Wt.add(N,C),j,T,I),m=p(Wt.sub(z,N),Wt.add(D,L),T,I),b=p(Wt.sub(C,G),Wt.add($,j),T,I),E=Wt.add(K,d);E.sub(g),E.add(b);let k=Wt.add(f,g),w=Wt.add(M,d),c=Wt.sub(K,M);c.add(f),c.add(m);let _=Wt.zeros(2*E.rows,2*E.columns);return _=_.setSubMatrix(E,0,0),_=_.setSubMatrix(k,E.rows,0),_=_.setSubMatrix(w,0,E.columns),_=_.setSubMatrix(c,E.rows,E.columns),_.subMatrix(0,S-1,0,A-1)}return p(r,e,l,h)}scaleRows(e={}){if(typeof e!="object")throw new TypeError("options must be an object");let{min:r=0,max:n=1}=e;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(r>=n)throw new RangeError("min must be smaller than max");let a=new Lt(this.rows,this.columns);for(let s=0;s<this.rows;s++){let o=this.getRow(s);o.length>0&&J6(o,{min:r,max:n,output:o}),a.setRow(s,o)}return a}scaleColumns(e={}){if(typeof e!="object")throw new TypeError("options must be an object");let{min:r=0,max:n=1}=e;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(r>=n)throw new RangeError("min must be smaller than max");let a=new Lt(this.rows,this.columns);for(let s=0;s<this.columns;s++){let o=this.getColumn(s);o.length&&J6(o,{min:r,max:n,output:o}),a.setColumn(s,o)}return a}flipRows(){let e=Math.ceil(this.columns/2);for(let r=0;r<this.rows;r++)for(let n=0;n<e;n++){let a=this.get(r,n),s=this.get(r,this.columns-1-n);this.set(r,n,s),this.set(r,this.columns-1-n,a)}return this}flipColumns(){let e=Math.ceil(this.rows/2);for(let r=0;r<this.columns;r++)for(let n=0;n<e;n++){let a=this.get(n,r),s=this.get(this.rows-1-n,r);this.set(n,r,s),this.set(this.rows-1-n,r,a)}return this}kroneckerProduct(e){e=Lt.checkMatrix(e);let r=this.rows,n=this.columns,a=e.rows,s=e.columns,o=new Lt(r*a,n*s);for(let u=0;u<r;u++)for(let l=0;l<n;l++)for(let h=0;h<a;h++)for(let p=0;p<s;p++)o.set(a*u+h,s*l+p,this.get(u,l)*e.get(h,p));return o}kroneckerSum(e){if(e=Lt.checkMatrix(e),!this.isSquare()||!e.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let r=this.rows,n=e.rows,a=this.kroneckerProduct(Lt.eye(n,n)),s=Lt.eye(r,r).kroneckerProduct(e);return a.add(s)}transpose(){let e=new Lt(this.columns,this.rows);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)e.set(n,r,this.get(r,n));return e}sortRows(e=vj){for(let r=0;r<this.rows;r++)this.setRow(r,this.getRow(r).sort(e));return this}sortColumns(e=vj){for(let r=0;r<this.columns;r++)this.setColumn(r,this.getColumn(r).sort(e));return this}subMatrix(e,r,n,a){X6(this,e,r,n,a);let s=new Lt(r-e+1,a-n+1);for(let o=e;o<=r;o++)for(let u=n;u<=a;u++)s.set(o-e,u-n,this.get(o,u));return s}subMatrixRow(e,r,n){if(r===void 0&&(r=0),n===void 0&&(n=this.columns-1),r>n||r<0||r>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let a=new Lt(e.length,n-r+1);for(let s=0;s<e.length;s++)for(let o=r;o<=n;o++){if(e[s]<0||e[s]>=this.rows)throw new RangeError(`Row index out of range: ${e[s]}`);a.set(s,o-r,this.get(e[s],o))}return a}subMatrixColumn(e,r,n){if(r===void 0&&(r=0),n===void 0&&(n=this.rows-1),r>n||r<0||r>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let a=new Lt(n-r+1,e.length);for(let s=0;s<e.length;s++)for(let o=r;o<=n;o++){if(e[s]<0||e[s]>=this.columns)throw new RangeError(`Column index out of range: ${e[s]}`);a.set(o-r,s,this.get(o,e[s]))}return a}setSubMatrix(e,r,n){if(e=Lt.checkMatrix(e),e.isEmpty())return this;let a=r+e.rows-1,s=n+e.columns-1;X6(this,r,a,n,s);for(let o=0;o<e.rows;o++)for(let u=0;u<e.columns;u++)this.set(r+o,n+u,e.get(o,u));return this}selection(e,r){Jz(this,e),Yz(this,r);let n=new Lt(e.length,r.length);for(let a=0;a<e.length;a++){let s=e[a];for(let o=0;o<r.length;o++){let u=r[o];n.set(a,o,this.get(s,u))}}return n}trace(){let e=Math.min(this.rows,this.columns),r=0;for(let n=0;n<e;n++)r+=this.get(n,n);return r}clone(){let e=new Lt(this.rows,this.columns);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)e.set(r,n,this.get(r,n));return e}sum(e){switch(e){case"row":return Xz(this);case"column":return Qz(this);case void 0:return ej(this);default:throw new Error(`invalid option: ${e}`)}}product(e){switch(e){case"row":return tj(this);case"column":return rj(this);case void 0:return nj(this);default:throw new Error(`invalid option: ${e}`)}}mean(e){let r=this.sum(e);switch(e){case"row":{for(let n=0;n<this.rows;n++)r[n]/=this.columns;return r}case"column":{for(let n=0;n<this.columns;n++)r[n]/=this.rows;return r}case void 0:return r/this.size;default:throw new Error(`invalid option: ${e}`)}}variance(e,r={}){if(typeof e=="object"&&(r=e,e=void 0),typeof r!="object")throw new TypeError("options must be an object");let{unbiased:n=!0,mean:a=this.mean(e)}=r;if(typeof n!="boolean")throw new TypeError("unbiased must be a boolean");switch(e){case"row":{if(!Ci(a))throw new TypeError("mean must be an array");return ij(this,n,a)}case"column":{if(!Ci(a))throw new TypeError("mean must be an array");return aj(this,n,a)}case void 0:{if(typeof a!="number")throw new TypeError("mean must be a number");return sj(this,n,a)}default:throw new Error(`invalid option: ${e}`)}}standardDeviation(e,r){typeof e=="object"&&(r=e,e=void 0);let n=this.variance(e,r);if(e===void 0)return Math.sqrt(n);for(let a=0;a<n.length;a++)n[a]=Math.sqrt(n[a]);return n}center(e,r={}){if(typeof e=="object"&&(r=e,e=void 0),typeof r!="object")throw new TypeError("options must be an object");let{center:n=this.mean(e)}=r;switch(e){case"row":{if(!Ci(n))throw new TypeError("center must be an array");return oj(this,n),this}case"column":{if(!Ci(n))throw new TypeError("center must be an array");return uj(this,n),this}case void 0:{if(typeof n!="number")throw new TypeError("center must be a number");return fj(this,n),this}default:throw new Error(`invalid option: ${e}`)}}scale(e,r={}){if(typeof e=="object"&&(r=e,e=void 0),typeof r!="object")throw new TypeError("options must be an object");let n=r.scale;switch(e){case"row":{if(n===void 0)n=lj(this);else if(!Ci(n))throw new TypeError("scale must be an array");return cj(this,n),this}case"column":{if(n===void 0)n=hj(this);else if(!Ci(n))throw new TypeError("scale must be an array");return dj(this,n),this}case void 0:{if(n===void 0)n=pj(this);else if(typeof n!="number")throw new TypeError("scale must be a number");return mj(this,n),this}default:throw new Error(`invalid option: ${e}`)}}toString(e){return Y6(this,e)}};Wt.prototype.klass="Matrix";typeof Symbol!="undefined"&&(Wt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Kz);function vj(t,e){return t-e}function x2e(t){return t.every(e=>typeof e=="number")}Wt.random=Wt.rand;Wt.randomInt=Wt.randInt;Wt.diagonal=Wt.diag;Wt.prototype.diagonal=Wt.prototype.diag;Wt.identity=Wt.eye;Wt.prototype.negate=Wt.prototype.neg;Wt.prototype.tensorProduct=Wt.prototype.kroneckerProduct;var Lt=class extends Wt{constructor(e,r){if(super(),Lt.isMatrix(e))return e.clone();if(Number.isInteger(e)&&e>=0)if(this.data=[],Number.isInteger(r)&&r>=0)for(let n=0;n<e;n++)this.data.push(new Float64Array(r));else throw new TypeError("nColumns must be a positive integer");else if(Ci(e)){let n=e;if(e=n.length,r=e?n[0].length:0,typeof r!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let a=0;a<e;a++){if(n[a].length!==r)throw new RangeError("Inconsistent array dimensions");if(!x2e(n[a]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(n[a]))}}else throw new TypeError("First argument must be a positive number or an array");this.rows=e,this.columns=r}set(e,r,n){return this.data[e][r]=n,this}get(e,r){return this.data[e][r]}removeRow(e){return $s(this,e),this.data.splice(e,1),this.rows-=1,this}addRow(e,r){return r===void 0&&(r=e,e=this.rows),$s(this,e,!0),r=Float64Array.from(fh(this,r)),this.data.splice(e,0,r),this.rows+=1,this}removeColumn(e){zs(this,e);for(let r=0;r<this.rows;r++){let n=new Float64Array(this.columns-1);for(let a=0;a<e;a++)n[a]=this.data[r][a];for(let a=e+1;a<this.columns;a++)n[a-1]=this.data[r][a];this.data[r]=n}return this.columns-=1,this}addColumn(e,r){typeof r=="undefined"&&(r=e,e=this.columns),zs(this,e,!0),r=lh(this,r);for(let n=0;n<this.rows;n++){let a=new Float64Array(this.columns+1),s=0;for(;s<e;s++)a[s]=this.data[n][s];for(a[s++]=r[n];s<this.columns+1;s++)a[s]=this.data[n][s-1];this.data[n]=a}return this.columns+=1,this}};Zz(Wt,Lt);var hf=class{constructor(e,r){if(e.length!==e[0].length)throw new Error("Confusion matrix must be square");if(r.length!==e.length)throw new Error("Confusion matrix and labels should have the same length");this.labels=r,this.matrix=e}static fromLabels(e,r,n={}){if(r.length!==e.length)throw new Error("predicted and actual must have the same length");let a;n.labels?a=new Set(n.labels):a=new Set([...e,...r]),a=Array.from(a),n.sort&&a.sort(n.sort);let s=Array.from({length:a.length});for(let o=0;o<s.length;o++)s[o]=new Array(s.length),s[o].fill(0);for(let o=0;o<r.length;o++){let u=a.indexOf(e[o]),l=a.indexOf(r[o]);u>=0&&l>=0&&s[u][l]++}return new hf(s,a)}getMatrix(){return this.matrix}getLabels(){return this.labels}getTotalCount(){let e=0;for(let r=0;r<this.matrix.length;r++)for(let n=0;n<this.matrix.length;n++)e+=this.matrix[r][n];return e}getTrueCount(){let e=0;for(let r=0;r<this.matrix.length;r++)e+=this.matrix[r][r];return e}getFalseCount(){return this.getTotalCount()-this.getTrueCount()}getTruePositiveCount(e){let r=this.getIndex(e);return this.matrix[r][r]}getTrueNegativeCount(e){let r=this.getIndex(e),n=0;for(let a=0;a<this.matrix.length;a++)for(let s=0;s<this.matrix.length;s++)a!==r&&s!==r&&(n+=this.matrix[a][s]);return n}getFalsePositiveCount(e){let r=this.getIndex(e),n=0;for(let a=0;a<this.matrix.length;a++)a!==r&&(n+=this.matrix[a][r]);return n}getFalseNegativeCount(e){let r=this.getIndex(e),n=0;for(let a=0;a<this.matrix.length;a++)a!==r&&(n+=this.matrix[r][a]);return n}getPositiveCount(e){return this.getTruePositiveCount(e)+this.getFalseNegativeCount(e)}getNegativeCount(e){return this.getTrueNegativeCount(e)+this.getFalsePositiveCount(e)}getIndex(e){let r=this.labels.indexOf(e);if(r===-1)throw new Error("The label does not exist");return r}getTruePositiveRate(e){return this.getTruePositiveCount(e)/this.getPositiveCount(e)}getTrueNegativeRate(e){return this.getTrueNegativeCount(e)/this.getNegativeCount(e)}getPositivePredictiveValue(e){let r=this.getTruePositiveCount(e);return r/(r+this.getFalsePositiveCount(e))}getNegativePredictiveValue(e){let r=this.getTrueNegativeCount(e);return r/(r+this.getFalseNegativeCount(e))}getFalseNegativeRate(e){return 1-this.getTruePositiveRate(e)}getFalsePositiveRate(e){return 1-this.getTrueNegativeRate(e)}getFalseDiscoveryRate(e){let r=this.getFalsePositiveCount(e);return r/(r+this.getTruePositiveCount(e))}getFalseOmissionRate(e){let r=this.getFalseNegativeCount(e);return r/(r+this.getTruePositiveCount(e))}getF1Score(e){let r=this.getTruePositiveCount(e);return 2*r/(2*r+this.getFalsePositiveCount(e)+this.getFalseNegativeCount(e))}getMatthewsCorrelationCoefficient(e){let r=this.getTruePositiveCount(e),n=this.getTrueNegativeCount(e),a=this.getFalsePositiveCount(e),s=this.getFalseNegativeCount(e);return(r*n-a*s)/Math.sqrt((r+a)*(r+s)*(n+a)*(n+s))}getInformedness(e){return this.getTruePositiveRate(e)+this.getTrueNegativeRate(e)-1}getMarkedness(e){return this.getPositivePredictiveValue(e)+this.getNegativePredictiveValue(e)-1}getConfusionTable(e){return[[this.getTruePositiveCount(e),this.getFalseNegativeCount(e)],[this.getFalsePositiveCount(e),this.getTrueNegativeCount(e)]]}getAccuracy(){let e=0,r=0;for(let n=0;n<this.matrix.length;n++)for(let a=0;a<this.matrix.length;a++)n===a?e+=this.matrix[n][a]:r+=this.matrix[n][a];return e/(e+r)}getCount(e,r){let n=this.getIndex(e),a=this.getIndex(r);return this.matrix[n][a]}get accuracy(){return this.getAccuracy()}get total(){return this.getTotalCount()}};var Gj=ut(_j()),axe=ut(Ej()),I2e=Object.create,c2=Object.defineProperty,D2e=Object.getOwnPropertyDescriptor,Dj=Object.getOwnPropertyNames,O2e=Object.getPrototypeOf,R2e=Object.prototype.hasOwnProperty,C2e=(t,e,r)=>e in t?c2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,F2e=(t,e)=>function(){return e||(0,t[Dj(t)[0]])((e={exports:{}}).exports,e),e.exports},B2e=(t,e)=>{for(var r in e)c2(t,r,{get:e[r],enumerable:!0})},L2e=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of Dj(e))!R2e.call(t,a)&&a!==r&&c2(t,a,{get:()=>e[a],enumerable:!(n=D2e(e,a))||n.enumerable});return t},P2e=(t,e,r)=>(r=t!=null?I2e(O2e(t)):{},L2e(e||!t||!t.__esModule?c2(r,"default",{value:t,enumerable:!0}):r,t)),Oj=(t,e,r)=>(C2e(t,typeof e!="symbol"?e+"":e,r),r),q2e=F2e({"node_modules/stemmer/index.js"(t,e){"use strict";e.exports=M;var r={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},n={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},a="[^aeiou]",s="[aeiouy]",o="("+a+"[^aeiouy]*)",u="("+s+"[aeiou]*)",l=new RegExp("^"+o+"?"+u+o),h=new RegExp("^"+o+"?"+u+o+u+"?$"),p=new RegExp("^"+o+"?("+u+o+"){2,}"),v=new RegExp("^"+o+"?"+s),y=new RegExp("^"+o+s+"[^aeiouwxy]$"),S=/ll$/,A=/^(.+?)e$/,T=/^(.+?)y$/,I=/^(.+?(s|t))(ion)$/,N=/^(.+?)(ed|ing)$/,D=/(at|bl|iz)$/,C=/^(.+?)eed$/,L=/^.+?[^s]s$/,z=/^.+?(ss|i)es$/,$=/([^aeiouylsz])\1$/,G=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,j=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,K=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/;function M(f){var d,g;return f=String(f).toLowerCase(),f.length<3||(f.charCodeAt(0)===121&&(d=!0,f="Y"+f.slice(1)),z.test(f)?f=f.slice(0,f.length-2):L.test(f)&&(f=f.slice(0,f.length-1)),(g=C.exec(f))?l.test(g[1])&&(f=f.slice(0,f.length-1)):(g=N.exec(f))&&v.test(g[1])&&(f=g[1],D.test(f)?f+="e":$.test(f)?f=f.slice(0,f.length-1):y.test(f)&&(f+="e")),(g=T.exec(f))&&v.test(g[1])&&(f=g[1]+"i"),(g=G.exec(f))&&l.test(g[1])&&(f=g[1]+r[g[2]]),(g=j.exec(f))&&l.test(g[1])&&(f=g[1]+n[g[2]]),(g=K.exec(f))?p.test(g[1])&&(f=g[1]):(g=I.exec(f))&&p.test(g[1])&&(f=g[1]),(g=A.exec(f))&&(p.test(g[1])||h.test(g[1])&&!y.test(g[1]))&&(f=g[1]),S.test(f)&&p.test(f)&&(f=f.slice(0,f.length-1)),d&&(f="y"+f.slice(1))),f}}}),Rj={};B2e(Rj,{loadCSV:()=>Pj,loadCSVURI:()=>Lj,loadTSV:()=>$2e});async function Lj(t,e){let r=t.search(/https/gi)>-1?Fj.get:Cj.get;return new Promise((n,a)=>{let s=[],o=Object.assign({checkType:!0},e);r(t,l=>{(0,a4.default)(o).fromStream(l).subscribe(h=>{s.push(h)},h=>a(h),h=>h?a(h):n(s))}).on("error",a)})}async function Pj(t,e){return Bj.default.isUri(t)?Lj(t,e):new Promise((r,n)=>{let a=[],s=Object.assign({checkType:!0},e);(0,a4.default)(s).fromFile(t).subscribe((o,u)=>{a.push(o)},o=>n(o),o=>o?n(o):r(a))})}async function $2e(t,e){let r=Object.assign({checkType:!0},e,{delimiter:"	"});return Pj(t,r)}var z2e=P2e(q2e(),1),j2e={PorterStemmer:{tokenizeAndStem:(t="")=>t.split(" ").map(r=>r.trim()).filter(r=>r).map(z2e.default)}},U2e=j2e,js=Ap.array.mean,V2e=js,hh=Ap.array.sum,s4=(t,e)=>t.map(r=>(r-js(t))/e),h2=Ap.array.max,d2=Ap.array.min,Cg=Ap.array.standardDeviation;function Uj(t,e){return t.reduce((r,n,a,s)=>(r.push(Math.pow(e[a]-n,2)),r),[])}function W2e(t=[],e=[]){if(t.length!==e.length)throw new RangeError("arrays must have the same length");let r=Uj(t,e);return Math.sqrt(hh(r)/(t.length-2))}function Mj(t=[]){let e=js(t),r=Cg(t);return t.map(n=>(n-e)/r)}function Vj(t=[],e=[]){if(t.length!==e.length)throw new RangeError("arrays must have the same length");let r=V2e(t),n=hh(t.reduce((o,u,l)=>(o.push(Math.pow(t[l]-r,2)),o),[])),a=hh(t.reduce((o,u,l)=>(o.push(Math.pow(t[l]-e[l],2)),o),[]));return(n-a)/n}function r4(t){let{actuals:e,estimates:r,rSquared:n,independentVariables:a,sampleSize:s}=t,o=n||Vj(e,r),u=s||e.length,l=a;return 1-(1-o)*((u-1)/(u-(l+1)))}function n4(t=[],e=[]){if(t.length!==e.length)throw new RangeError("arrays must have the same length");let r=hh(t),n=hh(e),a=t.reduce((h,p,v)=>(h=h+t[v]*e[v],h),0),s=t.reduce((h,p)=>(h=h+p*p,h),0),o=e.reduce((h,p)=>(h=h+p*p,h),0),u=t.length;return(u*a-r*n)/Math.sqrt((u*s-Math.pow(r,2))*(u*o-Math.pow(n,2)))}function G2e(t=[],e=[]){return Math.pow(n4(t,e),2)}function H2e(t=[]){return t.reduce((e,r,n)=>(r.forEach((a,s)=>{n===0?e.push([a]):e[s].push(a)}),e),[])}function K2e(t=[]){return t.length?t[0].map((e,r)=>{let n=[];return t.forEach((a,s)=>{n.push(t[s][r])}),n}):t}var Z2e=t=>s4(t,Cg(t));function J2e(t=[],e=-1,r=!1,n={}){let a=typeof n.average!="undefined"?n.average:js(t),s=typeof n.standard_dev!="undefined"?n.standard_dev:Cg(t),o=typeof n.maximum!="undefined"?n.maximum:h2(t),u=typeof n.minimum!="undefined"?n.minimum:d2(t),l=v=>{let y=(v-a)/s;return isNaN(y)&&r?y:isNaN(y)&&r===!1?isNaN(s)?v:s:y},h=v=>{let y=v*s+a;return isNaN(y)&&r?y:isNaN(y)&&r===!1?isNaN(s)?v:s:y},p=t.map(l).map(v=>isNaN(v)?e:v);return{components:{average:a,standard_dev:s,maximum:o,minimum:u},scale:l,descale:h,values:p}}var Y2e=t=>s4(t,h2(t)-d2(t));function X2e(t=[],e=-1,r=!1,n={}){let a=typeof n.average!="undefined"?n.average:js(t),s=typeof n.standard_dev!="undefined"?n.standard_dev:Cg(t),o=typeof n.maximum!="undefined"?n.maximum:h2(t),u=typeof n.minimum!="undefined"?n.minimum:d2(t),l=v=>{let y=(v-a)/(o-u);return isNaN(y)&&r?y:isNaN(y)&&r===!1?isNaN(s)?v:s:y},h=v=>{let y=v*(o-u)+a;return isNaN(y)&&r?y:isNaN(y)&&r===!1?isNaN(s)?v:s:y},p=t.map(l).map(v=>isNaN(v)?e:v);return{components:{average:a,standard_dev:s,maximum:o,minimum:u},scale:l,descale:h,values:p}}function Q2e(t,e=!0){if(t<-6.5)return 0;if(t>6.5)return 1;let r=1,n=0,a=1,s=0,o=Math.exp(-23);for(;Math.abs(a)>o;)a=.3989422804*Math.pow(-1,s)*Math.pow(t,s)/(2*s+1)/Math.pow(2,s)*Math.pow(t,s+1)/r,n+=a,s++,r*=s;return n+=.5,e?1-n:n}function exe(t){return t.replace(/[^\w\s]/gi,"_")}function kp(t,e){if(t.length!==e.length)throw new Error(`Actuals length (${t.length}) must equal Estimates length (${e.length})`);return t.map((r,n)=>r-e[n])}function Aj(t,e){let r=kp(t,e);return js(r)}function l2(t,e){let r=kp(t,e).map(n=>Math.abs(n));return js(r)}function kj(t,e){let r=hh(kp(t,e)),n=l2(t,e);return r/n}function Tj(t,e){let r=kp(t,e).map(n=>n*n);return js(r)}function Nj(t,e){let r=l2(t,e),n=js(t);return r/n}function Ij(t,e){let n=kp(t,e).map(a=>Math.abs(a)).map((a,s)=>a/t[s]);return js(n)}var Sr={range:zj.default,rangeRight:jj.default,scale:s4,avg:js,mean:js,sum:hh,max:h2,min:d2,sd:Cg,StandardScaler:Z2e,StandardScalerTransforms:J2e,MinMaxScaler:Y2e,MinMaxScalerTransforms:X2e,LogScaler:t=>t.map(Math.log),ExpScaler:t=>t.map(Math.exp),squaredDifference:Uj,standardError:W2e,coefficientOfDetermination:Vj,coefficientOfCorrelation:n4,r:n4,rSquared:G2e,adjustedCoefficentOfDetermination:r4,rBarSquared:r4,adjustedRSquared:r4,pivotVector:H2e,pivotArrays:K2e,standardScore:Mj,zScore:Mj,approximateZPercentile:Q2e,getSafePropertyName:exe,forecastErrors:kp,meanForecastError:Aj,MFE:Aj,meanAbsoluteDeviation:l2,MAD:l2,trackingSignal:kj,TS:kj,meanSquaredError:Tj,MSE:Tj,MADMeanRatio:Nj,MMR:Nj,meanAbsolutePercentageError:Ij,MAPE:Ij},txe={scale:"scaleOptions",descale:"descaleOptions",label:"labelOptions",labelEncoder:"labelOptions",labeldecode:"labelOptions",labelDecode:"labelOptions",labelDecoder:"labelOptions",onehot:"oneHotOptions",oneHot:"oneHotOptions",oneHotEncode:"oneHotOptions",oneHotEncoder:"oneHotOptions",reducer:"reducerOptions",reduce:"reducerOptions",merge:"mergeData"},_i=class{constructor(t=[],e={}){Ye(this,"config");Ye(this,"data");Ye(this,"labels");Ye(this,"encoders");Ye(this,"scalers");Ye(this,"selectColumns");Ye(this,"columnArray");Ye(this,"encodeObject");Ye(this,"oneHotEncoder");Ye(this,"oneHotDecoder");Ye(this,"columnMatrix");Ye(this,"reverseColumnMatrix");Ye(this,"reverseColumnVector");Ye(this,"getTransforms");return this.config=Object.assign({debug:!0},e),this.data=[...t],this.labels=new Map,this.encoders=new Map,this.scalers=new Map,this.selectColumns=_i.selectColumns,this.columnArray=_i.columnArray,this.encodeObject=_i.encodeObject,this.oneHotEncoder=_i.oneHotEncoder,this.oneHotDecoder=_i.oneHotDecoder,this.columnMatrix=_i.columnMatrix,this.reverseColumnMatrix=_i.reverseColumnMatrix,this.reverseColumnVector=_i.reverseColumnVector,this.getTransforms=_i.getTransforms,(this.config.labels||this.config.encoders||this.config.scalers)&&this.importFeatures({labels:this.config.labels,encoders:this.config.encoders,scalers:this.config.scalers}),this}static getTransforms(t={}){return Object.keys(t).reduce((e,r)=>{let n=t[r],a={name:r,options:{strategy:Array.isArray(n)?n[0]:n}};return Array.isArray(n)&&n.length>1&&(a.options[txe[n[0]]]=n[1]),e.push(a),e},[])}static reverseColumnMatrix(t={}){let{vectors:e=[],labels:r=[]}=t,n=Array.isArray(r)&&Array.isArray(r[0])?r:r.map(a=>[a]);return e.reduce((a,s)=>(a.push(s.reduce((o,u,l)=>(o[n[l][0]]=s[l],o),{})),a),[])}static reverseColumnVector(t={}){let{vector:e=[],labels:r=[]}=t,n=Array.isArray(r)&&Array.isArray(r[0])?r:r.map(a=>[a]);return e.reduce((a,s)=>(a.push({[n[0][0]]:s}),a),[])}static encodeObject(t,e){let{labels:r,prefix:n,name:a}=e;return r.reduce((o,u)=>{let l=`${n}${u}`;return o[l]=u&&t[a]&&t[a].toString()===u.toString()?1:0,o},{})}static oneHotEncoder(t,e){let r=Object.assign({merge:!0},e),n=r.data||this.columnArray(t,r.columnArrayOptions),a=Array.from(new Set(n).values()),s=r.prefix||`${t}_`,o=n.reduce((u,l,h,p)=>(a.forEach(v=>{let y=`${s}${v}`,S=l===v?1:0;Array.isArray(u[y])?u[y].push(S):u[y]=[S]}),u),{});return this.encoders.has(t)&&r.merge?this.encoders.get(t).labels=Array.from(new Set(a.concat(this.encoders.get(t).labels))):this.encoders.set(t,{name:t,labels:a,prefix:s}),o}static oneHotDecoder(t,e){let r=Object.assign({},e),n=r.encoders||this.encoders,a=r.prefix||n.get(t).prefix,s=r.labels||n.get(t).labels;return(r.data||this.oneHotColumnArray(t,r.oneHotColumnArrayOptions)).reduce((u,l)=>{let p=Object.keys(l).filter(y=>l[y]===1&&(s.indexOf(y.replace(a,""))!==-1||s.map(S=>String(S)).indexOf(y.replace(a,""))!==-1))[0]||"",v={[t]:p.replace(a,"")};return u.push(v),u},[])}static oneHotColumnArray(t,e){throw new Error("Method not implemented.")}static selectColumns(t,e={}){return(Object.assign({},e).data||this.data).reduce((a,s)=>{let o={};return t.forEach(u=>{o[u]=s[u]}),a.push(o),a},[])}static columnArray(t,e={}){let r=Object.assign({prefilter:()=>!0,filter:()=>!0,replace:{test:void 0,value:void 0},parseInt:!1,parseIntBase:10,parseFloat:!!e.scale,scale:!1},e),a=(r.data||this.data).filter(r.prefilter).reduce((s,o,u,l)=>{let h=o[t],p=typeof r.replace.test=="function"&&r.replace.test(h)?typeof r.replace.value=="function"?r.replace.value(s,o,u,l,t):r.replace.value:h;return r.filter(p)&&(r.parseInt?s.push(parseInt(p,r.parseIntBase)):r.parseFloat?s.push(parseFloat(p)):s.push(p)),s},[]);if(typeof r.scale=="function")return a.map(r.scale);if(r.scale)switch(r.scale){case"standard":return Sr.StandardScaler(a);case"log":return Sr.LogScaler(a);case"exp":return Sr.ExpScaler(a);case"normalize":default:return Sr.MinMaxScaler(a)}else return a}static columnMatrix(t=[],e=[]){let r=e.length?{data:e}:{},a=(Array.isArray(t)&&Array.isArray(t[0])?t:t.map(s=>[s,r])).map(s=>_i.columnArray.call(this,...s));return Sr.pivotArrays(a)}static mapToObject(t=new Map){return Array.from(t.keys()).reduce((e,r)=>{let n=t.get(r);return n instanceof Map?e[r]=_i.mapToObject(n):typeof n=="function"?e[r]=`[Function ${n.name}]`:e[r]=JSON.parse(JSON.stringify(n)),e},{})}static getBinaryValue(t=""){if(!t)return 0;switch(t){case!1:case"N":case"n":case"NO":case"No":case"no":case"False":case"FALSE":case"F":case"f":return 0;default:return 1}}exportFeatures(t={}){let e=Object.assign({},t);return{encoders:_i.mapToObject(this.encoders),labels:_i.mapToObject(this.labels),scalers:_i.mapToObject(this.scalers)}}importFeatures(t={}){Object.keys(t.encoders||{}).forEach(e=>{let r=t.encoders[e];this.encoders.set(e,r)}),Object.keys(t.labels||{}).forEach(e=>{let r=t.labels[e],n=Object.keys(r).map(a=>[a,r[a]]);typeof r[0]!="undefined"&&typeof r[1]!="undefined"&&n.push([0,!1],[!1,0],[null,0],["no",0],["No",0],["NO",0],["FALSE",0],["F",0],["f",0],["null",0],["",0],[void 0,0],["undefined",0],["TRUE",1],["true",1],[1,!0],[!0,1]),this.labels.set(e,new Map(n))}),Object.keys(t.scalers||{}).forEach(e=>{let r,n=t.scalers[e],{config:a}=n;switch(a.strategy){case"standard":r=Sr.StandardScalerTransforms(void 0,a.nan_value,a.return_nan,n.components),n.scale=r.scale,n.descale=r.descale;break;case"normalize":case"minmax":r=Sr.MinMaxScalerTransforms(void 0,a.nan_value,a.return_nan,n.components),n.scale=r.scale,n.descale=r.descale;break;case"log":default:n.scale=Math.log,n.descale=Math.exp;break}this.scalers.set(e,n)})}filterColumn(t=()=>!0){return this.data.filter(t)}columnScale(t,e={}){let n=Object.assign({strategy:"log",forced_coercion:!1},typeof e=="string"?{strategy:e}:e),a=n.data||this.columnArray(t,n.columnArrayOptions),s,o;switch(a=a.filter(u=>typeof u!="undefined").map((u,l)=>{if(typeof u!="number"){this.config.debug&&n.forced_coercion===!1&&console.error(TypeError(`Each value must be a number, error at index [${t}][${l}]: <${typeof u}>${u}`));let h=Number(u);if(isNaN(h)&&n.forced_coercion)return 0;if(isNaN(h))throw TypeError(`Only numerical values in (${t}) can be scaled i: ${l} datum: ${u}`);return h}else return u}),n.strategy){case"standard":o=Sr.StandardScalerTransforms(a,n.nan_value,n.return_nan),this.scalers.set(t,{name:t,scale:o.scale,descale:o.descale,components:o.components}),s=o.values;break;case"normalize":case"minmax":o=Sr.MinMaxScalerTransforms(a,n.nan_value,n.return_nan),this.scalers.set(t,{name:t,scale:o.scale,descale:o.descale,components:o.components}),s=o.values;break;case"log":default:this.scalers.set(t,{name:t,scale:Math.log,descale:Math.exp,components:{average:Sr.avg(a),standard_dev:Sr.sd(a),maximum:Sr.max(a),minimum:Sr.min(a)}}),s=Sr.LogScaler(a);break}return this.scalers.get(t).config=n,s}columnDescale(t,e){let r=Object.assign({},e),n=r.data||this.columnArray(t,r.columnArrayOptions),a=this.scalers.get(t).descale;return n.map(a)}labelEncoder(t,e){let r=Object.assign({binary:!1,merge:!0},e),n=r.data||this.columnArray(t,r.columnArrayOptions),a=Array.from(new Set(n).values()).sort(r.sortFunction),s=new Map(a.reduce((u,l,h)=>(r.binary?(h===0&&u.push([0,!1],["0",!1],["FALSE",0],["false",0],[1,!0],["1",!0],["TRUE",1],["true",1]),u.push([l,_i.getBinaryValue(l)])):(u.push([l,h]),u.push([h,l])),u),[]));return this.labels.has(t)&&r.merge?this.labels.set(t,new Map([...this.labels.get(t),...s])):this.labels.set(t,s),r.binary?n.map(_i.getBinaryValue):n.map(u=>s.get(u))}labelDecode(t,e={}){let r=Object.assign({},e);return(r.data||this.columnArray(t,r.columnArrayOptions)).map(a=>this.labels.get(t).get(a))}oneHotColumnArray(t,e){let r=Object.assign({},e),n=r.labels||this.encoders.get(t).labels,a=r.prefix||this.encoders.get(t).prefix;return this.selectColumns(n.map(s=>`${a}${s}`))}columnReducer(t,e){return{[t]:this.columnArray(e.columnName,e.columnOptions).reduce(e.reducer,[])}}columnMerge(t,e=[]){if(this.data.length!==e.length)throw new RangeError(`Merged data column must have the same length(${e.length}) as the DataSet's length (${this.data.length})`);return{[t]:e}}inverseTransformObject(t,e){let r=Object.assign({removeValues:!1},e),n=[],a=Object.assign({},t),s=Object.keys(this.data[0]),o=s.reduce((h,p)=>(this.scalers.has(p)&&(h[p]=this.scalers.get(p).descale(t[p])),h),{}),u=s.reduce((h,p)=>(this.labels.has(p)&&(h[p]=this.labels.get(p).get(t[p])),h),{}),l=s.reduce((h,p)=>{if(this.encoders.has(p)){let v=this.oneHotDecoder(p,{data:[t]});h=Object.assign({},h,v[0]),r.removeValues&&n.push(...this.encoders.get(p).labels.map(y=>`${this.encoders.get(p).prefix}${y}`))}return h},{});return a=Object.assign(a,o,u,l),r.removeValues&&n.length&&(a=Object.keys(a).reduce((h,p)=>(n.indexOf(p)===-1&&(h[p]=a[p]),h),{})),a}transformObject(t,e){let r=Object.assign({removeValues:!1,checkColumnLength:!0},e),n=[],a=new Array().concat(...Array.from(this.encoders.keys()).map(h=>this.encoders.get(h).labels.map(p=>`${this.encoders.get(h).prefix}${p}`))),s=this.data.length?Object.keys(this.data[0]):Object.keys(t),o=Object.keys(t).concat(a),u=o.reduce((h,p)=>(s.indexOf(p)===-1&&a.indexOf(p)===-1&&h.push(p),h),[]),l=Object.assign({},t);if(r.checkColumnLength&&s.length!==o.length&&s.length+a.length!==o.length)throw new RangeError(`Object must have the same number of keys (${o.length}) as data in your dataset(${s.length})`);if(r.checkColumnLength&&u.length)throw new ReferenceError(`Object must have identical keys as data in your DataSet. Invalid keys: ${u.join(",")}`);{let h=o.reduce((y,S)=>(this.scalers.has(S)&&(y[S]=this.scalers.get(S).scale(t[S])),y),{}),p=o.reduce((y,S)=>(this.labels.has(S)&&(y[S]=this.labels.get(S).get(t[S])),y),{}),v=o.reduce((y,S)=>(this.encoders.has(S)&&(y=Object.assign({},y,this.encodeObject(t,this.encoders.get(S))),r.removeValues&&n.push(S)),y),{});l=Object.assign(l,h,p,v),r.removeValues&&n.length&&(l=Object.keys(l).reduce((y,S)=>(n.indexOf(S)===-1&&(y[S]=l[S]),y),{}))}return l}columnReplace(t,e={}){let r=Object.assign({strategy:"mean",empty:!0,arrayOptions:{parseFloat:!0,filter:s=>s},labelOptions:{}},e),n,a={test:s=>!s,value:n};switch(r.strategy){case"scale":n=this.columnScale(t,r.scaleOptions),a={test:s=>!0,value:(s,o,u,l)=>n[u]};break;case"descale":n=this.columnDescale(t,r.descaleOptions),a={test:s=>!0,value:(s,o,u,l)=>n[u]};break;case"label":case"labelEncoder":n=this.labelEncoder(t,r.labelOptions),a={test:s=>!0,value:(s,o,u,l)=>n[u]};break;case"labeldecode":case"labelDecode":case"labelDecoder":n=this.labelDecode(t,r.labelOptions),a={test:s=>!0,value:(s,o,u,l)=>n[u]};break;case"onehot":case"oneHot":case"oneHotEncode":case"oneHotEncoder":return n=this.oneHotEncoder(t,r.oneHotOptions),a={test:s=>!0,value:(s,o,u,l)=>n[u]},n;case"reducer":case"reduce":return n=this.columnReducer(t,r.reducerOptions),n;case"merge":return n=this.columnMerge(t,r.mergeData),n;case"parseNumber":return n=this.columnArray(t).map(s=>Number(s)),n;default:n=$j.array[r.strategy](this.columnArray(t,r.arrayOptions)),a.value=n;break}return this.columnArray(t,Object.assign({},{replace:a,scale:e.scale},e.columnOptions))}fitColumns(t={},e={}){let r=Object.assign({returnData:!0,columns:[]},t);(!t.columns||Array.isArray(t.columns)===!1)&&(r.columns=t.columns?_i.getTransforms(t.columns):_i.getTransforms(t));let n=r.columns.reduce((a,s,o,u)=>{let l=this.columnReplace(s.name,s.options);return Array.isArray(l)?(l=l.map(h=>({[s.name]:h})),a[s.name]=l):Object.keys(l).forEach(h=>{a[h]=l[h].map(p=>({[h]:p}))}),a},{});if(Object.keys(n)&&Object.keys(n).length){let a=Object.keys(n),s=n[a[0]].reduce((o,u,l,h)=>{let p={};return a.forEach(v=>{p[v]=n[v][l][v]}),o.push(p),o},[]);this.data=this.data.map((o,u)=>Object.assign({},o,s[u]))}return r.returnData?this.data:this}fitInverseTransforms(t={}){let e=Object.assign({returnData:!0},t);return this.data=this.data.map(r=>t.removeValues?this.inverseTransformObject(r,t):Object.assign({},r,this.inverseTransformObject(r,t))),e.returnData?this.data:this}fitTransforms(t={}){let e=Object.assign({returnData:!0},t);return this.data=this.data.map(r=>t.removeValues?this.transformObject(r,t):Object.assign({},r,this.transformObject(r,t))),e.returnData?this.data:this}},vi=_i;Oj(vi,"encoders");Oj(vi,"data");var rxe=class{constructor(t={}){Ye(this,"data");Ye(this,"tokens");Ye(this,"vectors");Ye(this,"wordMap");Ye(this,"wordCountMap");Ye(this,"maxFeatures");Ye(this,"sortedWordCount");Ye(this,"limitedFeatures");Ye(this,"matrix");Ye(this,"replacer");try{typeof f2.PorterStemmer=="undefined"&&Object.assign(f2,U2e)}catch(e){console.error({E:e})}return this.data=t.data||[],this.tokens=new Set,this.vectors=[],this.wordMap={},this.wordCountMap={},this.maxFeatures=t.maxFeatures,this.sortedWordCount=[],this.limitedFeatures=[],this.matrix=[],this.replacer=(e="")=>{let r=e.toLowerCase().replace(/[^a-zA-Z]/gi," ");return f2.PorterStemmer.tokenizeAndStem(r).join(" ")},this}get_tokens(){return Array.from(this.tokens)}get_vector_array(){return this.get_tokens().map(t=>[t])}fit_transform(t={}){(t.data||this.data).forEach(n=>{let a={};this.replacer(n).split(" ").forEach(s=>{let o=s.toLowerCase();a[o]=a[o]?a[o]+1:1,this.wordCountMap[o]=this.wordCountMap[o]?this.wordCountMap[o]+1:1,this.tokens.add(o)}),this.vectors.push(a)}),this.wordMap=Array.from(this.tokens).reduce((n,a)=>(n[a]=0,n),{}),this.sortedWordCount=Object.keys(this.wordCountMap).sort((n,a)=>this.wordCountMap[a]-this.wordCountMap[n]),this.vectors=this.vectors.map(n=>Object.assign({},this.wordMap,n));let r=new vi(this.vectors);return this.limitedFeatures=this.get_limited_features(t),this.matrix=r.columnMatrix(this.limitedFeatures),this.matrix}get_limited_features(t={}){let e=t.maxFeatures||this.maxFeatures||this.tokens.size;return this.sortedWordCount.slice(0,e).map(r=>[r])}evaluateString(t=""){let r=this.replacer(t).split(" ").reduce((n,a)=>(this.tokens.has(a)&&(n[a]=n[a]!==void 0?n[a]+1:1),n),{});return{...this.wordMap,...r}}evaluate(t="",e){let r=this.evaluateString(t),n=this.get_limited_features(e);return new vi([r]).columnMatrix(n)}},f2=Object.assign({ColumnVectorizer:rxe}),{GridSearch:Hj}=Gj.default;function nxe(t=[],e={test_size:.2,train_size:.8,random_state:0,return_array:!1,parse_int_train_size:!0}){let r=cf.seed(e.random_state||0),n=[],a=typeof e.parse_int_train_size=="boolean"?e.parse_int_train_size:!0,s=e.train_size?e.train_size*t.length:(1-(e.test_size||.2))*t.length,o=a?parseInt(s.toString(),10):s,u=new Array().concat(t);for(;n.length<o;){let l=s2(0,u.length-1)(r);n.push(u.splice(l,1)[0])}return e.return_array?[n,u]:{train:n,test:u}}function i4(t=[],e={folds:3,random_state:0}){let r=cf.seed(e.random_state||0),n=e.folds||3,a=[],s=[].concat(t),o=t.length/(n||3),u=Math.floor(o);for(let l in(0,Wj.default)(n)){let h=[];for(;h.length<u;){let p=s2(0,s.length-1)(r);h.push(s.splice(p,1)[0])}a.push(h)}return a}function Kj(t={}){let e={dependentFeatures:[["X"]],independentFeatures:[["Y"]],folds:10,accuracy:"standardError",use_train_x_matrix:!0,use_train_y_matrix:!1,use_train_y_vector:!1,use_estimates_y_vector:!1,...t},r=e.classifier,n=e.regression,a=i4(e.dataset,{folds:e.folds,random_state:e.random_state}),s=new vi(e.testingset),o=s.columnMatrix(e.independentFeatures),u=s.columnMatrix(e.dependentFeatures),l=Sr.pivotVector(o)[0];return a.map(p=>{let v=new vi(p),y=v.columnMatrix(e.dependentFeatures),S=v.columnMatrix(e.independentFeatures),A=e.use_train_x_matrix?new Lt(y):y,T=e.use_train_y_matrix?new Lt(S):e.use_train_y_vector?Sr.pivotVector(S)[0]:S;if(n){let I,N;typeof n.train=="function"?(I=n.train(A,T,e.modelOptions),N=n.predict(u)):(I=new n(A,T,e.modelOptions),N=I.predict(u));let D=N;return e.accuracy==="standardError"?Sr.standardError(l,D):Sr.rSquared(l,D)}else{let I,N;typeof r.train=="function"?(r.train(A,T,e.modelOptions),N=r.predict(u)):(I=new r(A,T,e.modelOptions),N=I.predict(u));let D=e.use_estimates_y_vector?Sr.pivotVector(N)[0]:N;return hf.fromLabels(l,D).getAccuracy()}})}function ixe(t={}){let e={return_parameters:!1,compare_score:"mean",sortAccuracyScore:"desc",parameters:{},...t},r=e.regression,n=e.classifier,a=!t.sortAccuracyScore&&e.regression?"asc":e.sortAccuracyScore,s=new Hj({params:e.parameters,run_callback:l=>{e.regression?e.regression=new r(l):e.classifier=new n(l);let h=Kj(e);return e.compare_score?Sr[e.compare_score](h):h}});s.run();let o=a==="desc"?(l,h)=>h.results-l.results:(l,h)=>l.results-h.results,u=s._results.sort(o);return e.return_parameters?u:u[0]}var o4={train_test_split:nxe,cross_validation_split:i4,kfolds:i4,cross_validate_score:Kj,grid_search:ixe,GridSearch:Hj},{FPGrowth:sxe}=axe;function oxe(t,e){let r=Object.assign({},{exludeEmptyTranscations:!0},e),n=new Set,a=new Map,s=t.map(o=>([...Object.values(o)].forEach(u=>{n.add(u)}),n.forEach(u=>{if(!a.get(u)){let l=a.size<0?0:Math.round(a.size/2);a.set(u,l.toString()),a.set(l.toString(),u)}}),Object.values(o).map(u=>a.get(u)).filter(u=>u!==void 0)));return{values:n,valuesMap:a,transactions:r.exludeEmptyTranscations?s.filter(o=>o.length):s}}function uxe(t=[],e){return new Promise((r,n)=>{try{let a=Object.assign({},{support:.4,minLength:2,summary:!0,valuesMap:new Map},e);new sxe(a.support).exec(t).then(o=>{let u=o.itemsets?o.itemsets:o;a.summary?r(u.map(l=>({items_labels:l.items.map(h=>a.valuesMap.get(h)),items:l.items,support:l.support,support_percent:l.support/t.length})).filter(l=>l.items.length>1).sort((l,h)=>h.support-l.support)):r(o)}).catch(n)}catch(a){n(a)}})}var fxe={getTransactions:oxe,assocationRuleLearning:uxe},lxe=Rj;var aU=ut(Dg(),1);var Np=ut(Dg(),1),tU=ut(oh(),1),rU=ut(W6(),1),Us=Np.array.mean,cxe=Us,dh=Np.array.sum,l4=(t,e)=>t.map(r=>(r-Us(t))/e),m2=Np.array.max,v2=Np.array.min,Fg=Np.array.standardDeviation;function nU(t,e){return t.reduce((r,n,a,s)=>(r.push(Math.pow(e[a]-n,2)),r),[])}function hxe(t=[],e=[]){if(t.length!==e.length)throw new RangeError("arrays must have the same length");let r=nU(t,e);return Math.sqrt(dh(r)/(t.length-2))}function Zj(t=[]){let e=Us(t),r=Fg(t);return t.map(n=>(n-e)/r)}function iU(t=[],e=[]){if(t.length!==e.length)throw new RangeError("arrays must have the same length");let r=cxe(t),n=dh(t.reduce((o,u,l)=>(o.push(Math.pow(t[l]-r,2)),o),[])),a=dh(t.reduce((o,u,l)=>(o.push(Math.pow(t[l]-e[l],2)),o),[]));return(n-a)/n}function u4(t){let{actuals:e,estimates:r,rSquared:n,independentVariables:a,sampleSize:s}=t,o=n||iU(e,r),u=s||e.length,l=a;return 1-(1-o)*((u-1)/(u-(l+1)))}function f4(t=[],e=[]){if(t.length!==e.length)throw new RangeError("arrays must have the same length");let r=dh(t),n=dh(e),a=t.reduce((h,p,v)=>(h=h+t[v]*e[v],h),0),s=t.reduce((h,p)=>(h=h+p*p,h),0),o=e.reduce((h,p)=>(h=h+p*p,h),0),u=t.length;return(u*a-r*n)/Math.sqrt((u*s-Math.pow(r,2))*(u*o-Math.pow(n,2)))}function dxe(t=[],e=[]){return Math.pow(f4(t,e),2)}function pxe(t=[]){return t.reduce((e,r,n)=>(r.forEach((a,s)=>{n===0?e.push([a]):e[s].push(a)}),e),[])}function mxe(t=[]){return t.length?t[0].map((e,r)=>{let n=[];return t.forEach((a,s)=>{n.push(t[s][r])}),n}):t}var vxe=t=>l4(t,Fg(t));function gxe(t=[],e=-1,r=!1,n={}){let a=typeof n.average!="undefined"?n.average:Us(t),s=typeof n.standard_dev!="undefined"?n.standard_dev:Fg(t),o=typeof n.maximum!="undefined"?n.maximum:m2(t),u=typeof n.minimum!="undefined"?n.minimum:v2(t),l=v=>{let y=(v-a)/s;return isNaN(y)&&r?y:isNaN(y)&&r===!1?isNaN(s)?v:s:y},h=v=>{let y=v*s+a;return isNaN(y)&&r?y:isNaN(y)&&r===!1?isNaN(s)?v:s:y},p=t.map(l).map(v=>isNaN(v)?e:v);return{components:{average:a,standard_dev:s,maximum:o,minimum:u},scale:l,descale:h,values:p}}var yxe=t=>l4(t,m2(t)-v2(t));function bxe(t=[],e=-1,r=!1,n={}){let a=typeof n.average!="undefined"?n.average:Us(t),s=typeof n.standard_dev!="undefined"?n.standard_dev:Fg(t),o=typeof n.maximum!="undefined"?n.maximum:m2(t),u=typeof n.minimum!="undefined"?n.minimum:v2(t),l=v=>{let y=(v-a)/(o-u);return isNaN(y)&&r?y:isNaN(y)&&r===!1?isNaN(s)?v:s:y},h=v=>{let y=v*(o-u)+a;return isNaN(y)&&r?y:isNaN(y)&&r===!1?isNaN(s)?v:s:y},p=t.map(l).map(v=>isNaN(v)?e:v);return{components:{average:a,standard_dev:s,maximum:o,minimum:u},scale:l,descale:h,values:p}}function wxe(t,e=!0){if(t<-6.5)return 0;if(t>6.5)return 1;let r=1,n=0,a=1,s=0,o=Math.exp(-23);for(;Math.abs(a)>o;)a=.3989422804*Math.pow(-1,s)*Math.pow(t,s)/(2*s+1)/Math.pow(2,s)*Math.pow(t,s+1)/r,n+=a,s++,r*=s;return n+=.5,e?1-n:n}function _xe(t){return t.replace(/[^\w\s]/gi,"_")}function Ip(t,e){if(t.length!==e.length)throw new Error(`Actuals length (${t.length}) must equal Estimates length (${e.length})`);return t.map((r,n)=>r-e[n])}function Jj(t,e){let r=Ip(t,e);return Us(r)}function p2(t,e){let r=Ip(t,e).map(n=>Math.abs(n));return Us(r)}function Yj(t,e){let r=dh(Ip(t,e)),n=p2(t,e);return r/n}function Xj(t,e){let r=Ip(t,e).map(n=>n*n);return Us(r)}function Qj(t,e){let r=p2(t,e),n=Us(t);return r/n}function eU(t,e){let n=Ip(t,e).map(a=>Math.abs(a)).map((a,s)=>a/t[s]);return Us(n)}var xa={range:tU.default,rangeRight:rU.default,scale:l4,avg:Us,mean:Us,sum:dh,max:m2,min:v2,sd:Fg,StandardScaler:vxe,StandardScalerTransforms:gxe,MinMaxScaler:yxe,MinMaxScalerTransforms:bxe,LogScaler:t=>t.map(Math.log),ExpScaler:t=>t.map(Math.exp),squaredDifference:nU,standardError:hxe,coefficientOfDetermination:iU,coefficientOfCorrelation:f4,r:f4,rSquared:dxe,adjustedCoefficentOfDetermination:u4,rBarSquared:u4,adjustedRSquared:u4,pivotVector:pxe,pivotArrays:mxe,standardScore:Zj,zScore:Zj,approximateZPercentile:wxe,getSafePropertyName:_xe,forecastErrors:Ip,meanForecastError:Jj,MFE:Jj,meanAbsoluteDeviation:p2,MAD:p2,trackingSignal:Yj,TS:Yj,meanSquaredError:Xj,MSE:Xj,MADMeanRatio:Qj,MMR:Qj,meanAbsolutePercentageError:eU,MAPE:eU};var xxe={scale:"scaleOptions",descale:"descaleOptions",label:"labelOptions",labelEncoder:"labelOptions",labeldecode:"labelOptions",labelDecode:"labelOptions",labelDecoder:"labelOptions",onehot:"oneHotOptions",oneHot:"oneHotOptions",oneHotEncode:"oneHotOptions",oneHotEncoder:"oneHotOptions",reducer:"reducerOptions",reduce:"reducerOptions",merge:"mergeData"},Un=class{static getTransforms(e={}){return Object.keys(e).reduce((r,n)=>{let a=e[n],s={name:n,options:{strategy:Array.isArray(a)?a[0]:a}};return Array.isArray(a)&&a.length>1&&(s.options[xxe[a[0]]]=a[1]),r.push(s),r},[])}static reverseColumnMatrix(e={}){let{vectors:r=[],labels:n=[]}=e,a=Array.isArray(n)&&Array.isArray(n[0])?n:n.map(s=>[s]);return r.reduce((s,o)=>(s.push(o.reduce((u,l,h)=>(u[a[h][0]]=o[h],u),{})),s),[])}static reverseColumnVector(e={}){let{vector:r=[],labels:n=[]}=e,a=Array.isArray(n)&&Array.isArray(n[0])?n:n.map(s=>[s]);return r.reduce((s,o)=>(s.push({[a[0][0]]:o}),s),[])}static encodeObject(e,r){let{labels:n,prefix:a,name:s}=r;return n.reduce((u,l)=>{let h=`${a}${l}`;return u[h]=l&&e[s]&&e[s].toString()===l.toString()?1:0,u},{})}static oneHotEncoder(e,r){let n=Object.assign({merge:!0},r),a=n.data||this.columnArray(e,n.columnArrayOptions),s=Array.from(new Set(a).values()),o=n.prefix||`${e}_`,u=a.reduce((l,h,p,v)=>(s.forEach(y=>{let S=`${o}${y}`,A=h===y?1:0;Array.isArray(l[S])?l[S].push(A):l[S]=[A]}),l),{});return this.encoders.has(e)&&n.merge?this.encoders.get(e).labels=Array.from(new Set(s.concat(this.encoders.get(e).labels))):this.encoders.set(e,{name:e,labels:s,prefix:o}),u}static oneHotDecoder(e,r){let n=Object.assign({},r),a=n.encoders||this.encoders,s=n.prefix||a.get(e).prefix,o=n.labels||a.get(e).labels;return(n.data||this.oneHotColumnArray(e,n.oneHotColumnArrayOptions)).reduce((l,h)=>{let v=Object.keys(h).filter(S=>h[S]===1&&(o.indexOf(S.replace(s,""))!==-1||o.map(A=>String(A)).indexOf(S.replace(s,""))!==-1))[0]||"",y={[e]:v.replace(s,"")};return l.push(y),l},[])}static oneHotColumnArray(e,r){throw new Error("Method not implemented.")}static selectColumns(e,r={}){return(Object.assign({},r).data||this.data).reduce((s,o)=>{let u={};return e.forEach(l=>{u[l]=o[l]}),s.push(u),s},[])}static columnArray(e,r={}){let n=Object.assign({prefilter:()=>!0,filter:()=>!0,replace:{test:void 0,value:void 0},parseInt:!1,parseIntBase:10,parseFloat:!!r.scale,scale:!1},r),s=(n.data||this.data).filter(n.prefilter).reduce((o,u,l,h)=>{let p=u[e],v=typeof n.replace.test=="function"&&n.replace.test(p)?typeof n.replace.value=="function"?n.replace.value(o,u,l,h,e):n.replace.value:p;return n.filter(v)&&(n.parseInt?o.push(parseInt(v,n.parseIntBase)):n.parseFloat?o.push(parseFloat(v)):o.push(v)),o},[]);if(typeof n.scale=="function")return s.map(n.scale);if(n.scale)switch(n.scale){case"standard":return xa.StandardScaler(s);case"log":return xa.LogScaler(s);case"exp":return xa.ExpScaler(s);case"normalize":default:return xa.MinMaxScaler(s)}else return s}static columnMatrix(e=[],r=[]){let n=r.length?{data:r}:{},s=(Array.isArray(e)&&Array.isArray(e[0])?e:e.map(o=>[o,n])).map(o=>Un.columnArray.call(this,...o));return xa.pivotArrays(s)}static mapToObject(e=new Map){return Array.from(e.keys()).reduce((r,n)=>{let a=e.get(n);return a instanceof Map?r[n]=Un.mapToObject(a):typeof a=="function"?r[n]=`[Function ${a.name}]`:r[n]=JSON.parse(JSON.stringify(a)),r},{})}static getBinaryValue(e=""){if(!e)return 0;switch(e){case!1:case"N":case"n":case"NO":case"No":case"no":case"False":case"FALSE":case"F":case"f":return 0;default:return 1}}constructor(e=[],r={}){return this.config=Object.assign({debug:!0},r),this.data=[...e],this.labels=new Map,this.encoders=new Map,this.scalers=new Map,this.selectColumns=Un.selectColumns,this.columnArray=Un.columnArray,this.encodeObject=Un.encodeObject,this.oneHotEncoder=Un.oneHotEncoder,this.oneHotDecoder=Un.oneHotDecoder,this.columnMatrix=Un.columnMatrix,this.reverseColumnMatrix=Un.reverseColumnMatrix,this.reverseColumnVector=Un.reverseColumnVector,this.getTransforms=Un.getTransforms,(this.config.labels||this.config.encoders||this.config.scalers)&&this.importFeatures({labels:this.config.labels,encoders:this.config.encoders,scalers:this.config.scalers}),this}exportFeatures(e={}){let r=Object.assign({},e);return{encoders:Un.mapToObject(this.encoders),labels:Un.mapToObject(this.labels),scalers:Un.mapToObject(this.scalers)}}importFeatures(e={}){Object.keys(e.encoders||{}).forEach(r=>{let n=e.encoders[r];this.encoders.set(r,n)}),Object.keys(e.labels||{}).forEach(r=>{let n=e.labels[r],a=Object.keys(n).map(s=>[s,n[s]]);typeof n[0]!="undefined"&&typeof n[1]!="undefined"&&a.push([0,!1],[!1,0],[null,0],["no",0],["No",0],["NO",0],["FALSE",0],["F",0],["f",0],["null",0],["",0],[void 0,0],["undefined",0],["TRUE",1],["true",1],[1,!0],[!0,1]),this.labels.set(r,new Map(a))}),Object.keys(e.scalers||{}).forEach(r=>{let n,a=e.scalers[r],{config:s}=a;switch(s.strategy){case"standard":n=xa.StandardScalerTransforms(void 0,s.nan_value,s.return_nan,a.components),a.scale=n.scale,a.descale=n.descale;break;case"normalize":case"minmax":n=xa.MinMaxScalerTransforms(void 0,s.nan_value,s.return_nan,a.components),a.scale=n.scale,a.descale=n.descale;break;case"log":default:a.scale=Math.log,a.descale=Math.exp;break}this.scalers.set(r,a)})}filterColumn(e=()=>!0){return this.data.filter(e)}columnScale(e,r={}){let a=Object.assign({strategy:"log",forced_coercion:!1},typeof r=="string"?{strategy:r}:r),s=a.data||this.columnArray(e,a.columnArrayOptions),o,u;switch(s=s.filter(l=>typeof l!="undefined").map((l,h)=>{if(typeof l!="number"){this.config.debug&&a.forced_coercion===!1&&console.error(TypeError(`Each value must be a number, error at index [${e}][${h}]: <${typeof l}>${l}`));let p=Number(l);if(isNaN(p)&&a.forced_coercion)return 0;if(isNaN(p))throw TypeError(`Only numerical values in (${e}) can be scaled i: ${h} datum: ${l}`);return p}else return l}),a.strategy){case"standard":u=xa.StandardScalerTransforms(s,a.nan_value,a.return_nan),this.scalers.set(e,{name:e,scale:u.scale,descale:u.descale,components:u.components}),o=u.values;break;case"normalize":case"minmax":u=xa.MinMaxScalerTransforms(s,a.nan_value,a.return_nan),this.scalers.set(e,{name:e,scale:u.scale,descale:u.descale,components:u.components}),o=u.values;break;case"log":default:this.scalers.set(e,{name:e,scale:Math.log,descale:Math.exp,components:{average:xa.avg(s),standard_dev:xa.sd(s),maximum:xa.max(s),minimum:xa.min(s)}}),o=xa.LogScaler(s);break}return this.scalers.get(e).config=a,o}columnDescale(e,r){let n=Object.assign({},r),a=n.data||this.columnArray(e,n.columnArrayOptions),s=this.scalers.get(e).descale;return a.map(s)}labelEncoder(e,r){let n=Object.assign({binary:!1,merge:!0},r),a=n.data||this.columnArray(e,n.columnArrayOptions),s=Array.from(new Set(a).values()).sort(n.sortFunction),o=new Map(s.reduce((l,h,p)=>(n.binary?(p===0&&l.push([0,!1],["0",!1],["FALSE",0],["false",0],[1,!0],["1",!0],["TRUE",1],["true",1]),l.push([h,Un.getBinaryValue(h)])):(l.push([h,p]),l.push([p,h])),l),[]));return this.labels.has(e)&&n.merge?this.labels.set(e,new Map([...this.labels.get(e),...o])):this.labels.set(e,o),n.binary?a.map(Un.getBinaryValue):a.map(l=>o.get(l))}labelDecode(e,r={}){let n=Object.assign({},r);return(n.data||this.columnArray(e,n.columnArrayOptions)).map(s=>this.labels.get(e).get(s))}oneHotColumnArray(e,r){let n=Object.assign({},r),a=n.labels||this.encoders.get(e).labels,s=n.prefix||this.encoders.get(e).prefix;return this.selectColumns(a.map(o=>`${s}${o}`))}columnReducer(e,r){return{[e]:this.columnArray(r.columnName,r.columnOptions).reduce(r.reducer,[])}}columnMerge(e,r=[]){if(this.data.length!==r.length)throw new RangeError(`Merged data column must have the same length(${r.length}) as the DataSet's length (${this.data.length})`);return{[e]:r}}inverseTransformObject(e,r){let n=Object.assign({removeValues:!1},r),a=[],s=Object.assign({},e),o=Object.keys(this.data[0]),u=o.reduce((p,v)=>(this.scalers.has(v)&&(p[v]=this.scalers.get(v).descale(e[v])),p),{}),l=o.reduce((p,v)=>(this.labels.has(v)&&(p[v]=this.labels.get(v).get(e[v])),p),{}),h=o.reduce((p,v)=>{if(this.encoders.has(v)){let y=this.oneHotDecoder(v,{data:[e]});p=Object.assign({},p,y[0]),n.removeValues&&a.push(...this.encoders.get(v).labels.map(S=>`${this.encoders.get(v).prefix}${S}`))}return p},{});return s=Object.assign(s,u,l,h),n.removeValues&&a.length&&(s=Object.keys(s).reduce((p,v)=>(a.indexOf(v)===-1&&(p[v]=s[v]),p),{})),s}transformObject(e,r){let n=Object.assign({removeValues:!1,checkColumnLength:!0},r),a=[],s=new Array().concat(...Array.from(this.encoders.keys()).map(p=>this.encoders.get(p).labels.map(v=>`${this.encoders.get(p).prefix}${v}`))),o=this.data.length?Object.keys(this.data[0]):Object.keys(e),u=Object.keys(e).concat(s),l=u.reduce((p,v)=>(o.indexOf(v)===-1&&s.indexOf(v)===-1&&p.push(v),p),[]),h=Object.assign({},e);if(n.checkColumnLength&&o.length!==u.length&&o.length+s.length!==u.length)throw new RangeError(`Object must have the same number of keys (${u.length}) as data in your dataset(${o.length})`);if(n.checkColumnLength&&l.length)throw new ReferenceError(`Object must have identical keys as data in your DataSet. Invalid keys: ${l.join(",")}`);{let p=u.reduce((S,A)=>(this.scalers.has(A)&&(S[A]=this.scalers.get(A).scale(e[A])),S),{}),v=u.reduce((S,A)=>(this.labels.has(A)&&(S[A]=this.labels.get(A).get(e[A])),S),{}),y=u.reduce((S,A)=>(this.encoders.has(A)&&(S=Object.assign({},S,this.encodeObject(e,this.encoders.get(A))),n.removeValues&&a.push(A)),S),{});h=Object.assign(h,p,v,y),n.removeValues&&a.length&&(h=Object.keys(h).reduce((S,A)=>(a.indexOf(A)===-1&&(S[A]=h[A]),S),{}))}return h}columnReplace(e,r={}){let n=Object.assign({strategy:"mean",empty:!0,arrayOptions:{parseFloat:!0,filter:o=>o},labelOptions:{}},r),a,s={test:o=>!o,value:a};switch(n.strategy){case"scale":a=this.columnScale(e,n.scaleOptions),s={test:o=>!0,value:(o,u,l,h)=>a[l]};break;case"descale":a=this.columnDescale(e,n.descaleOptions),s={test:o=>!0,value:(o,u,l,h)=>a[l]};break;case"label":case"labelEncoder":a=this.labelEncoder(e,n.labelOptions),s={test:o=>!0,value:(o,u,l,h)=>a[l]};break;case"labeldecode":case"labelDecode":case"labelDecoder":a=this.labelDecode(e,n.labelOptions),s={test:o=>!0,value:(o,u,l,h)=>a[l]};break;case"onehot":case"oneHot":case"oneHotEncode":case"oneHotEncoder":return a=this.oneHotEncoder(e,n.oneHotOptions),s={test:o=>!0,value:(o,u,l,h)=>a[l]},a;case"reducer":case"reduce":return a=this.columnReducer(e,n.reducerOptions),a;case"merge":return a=this.columnMerge(e,n.mergeData),a;case"parseNumber":return a=this.columnArray(e).map(o=>Number(o)),a;default:a=aU.array[n.strategy](this.columnArray(e,n.arrayOptions)),s.value=a;break}return this.columnArray(e,Object.assign({},{replace:s,scale:r.scale},r.columnOptions))}fitColumns(e={},r={}){let n=Object.assign({returnData:!0,columns:[]},e);(!e.columns||Array.isArray(e.columns)===!1)&&(n.columns=e.columns?Un.getTransforms(e.columns):Un.getTransforms(e));let a=n.columns.reduce((s,o,u,l)=>{let h=this.columnReplace(o.name,o.options);return Array.isArray(h)?(h=h.map(p=>({[o.name]:p})),s[o.name]=h):Object.keys(h).forEach(p=>{s[p]=h[p].map(v=>({[p]:v}))}),s},{});if(Object.keys(a)&&Object.keys(a).length){let s=Object.keys(a),o=a[s[0]].reduce((u,l,h,p)=>{let v={};return s.forEach(y=>{v[y]=a[y][h][y]}),u.push(v),u},[]);this.data=this.data.map((u,l)=>Object.assign({},u,o[l]))}return n.returnData?this.data:this}fitInverseTransforms(e={}){let r=Object.assign({returnData:!0},e);return this.data=this.data.map(n=>e.removeValues?this.inverseTransformObject(n,e):Object.assign({},n,this.inverseTransformObject(n,e))),r.returnData?this.data:this}fitTransforms(e={}){let r=Object.assign({returnData:!0},e);return this.data=this.data.map(n=>e.removeValues?this.transformObject(n,e):Object.assign({},n,this.transformObject(n,e))),r.returnData?this.data:this}};var T1={};Zf(T1,{BaseNeuralNetwork:()=>pi,DeepLearningClassification:()=>Dm,DeepLearningRegression:()=>Im,FeatureEmbedding:()=>zu,LSTMMultivariateTimeSeries:()=>Ln,LSTMTimeSeries:()=>cs,LogisticRegression:()=>Om,MachineLearningLinearRegression:()=>N3,MachineLearningLogisticRegression:()=>I3,MachineLearningModelInterface:()=>nc,MultipleLinearRegression:()=>Xh,TensorScriptModelInterface:()=>Na,TextEmbedding:()=>c3,createModelFitCallback:()=>km,getBackend:()=>Jl,getScikit:()=>T3,setBackend:()=>kE,setScikit:()=>k3});var CK=ut(Mt());var Ef=ut(Mt());var Ea=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ea.prototype)}},Fi=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Fi.prototype)}},ce=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ce.prototype)}},_t=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,_t.prototype)}},Hp=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Hp.prototype)}};var uy=class{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let r;return this.cache.has(e)&&(r=this.cache.get(e),this.cache.delete(e),this.cache.set(e,r)),r}put(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){let n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,r)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let r=0;r<this.maxEntries-e;r++){let n=this.cache.keys().next().value;this.cache.delete(n)}this.maxEntries=e}};var fy=ut(Mt());function Js(t,e){if(Array.isArray(t)){let r=[];for(let n=0;n<e;n++)r=r.concat(t);return r}else{let r=new Array(e);return r.fill(t),r}}function os(t,e){if(!t)throw new Hp(e)}function AN(t,e){let r=0;for(let n of t)n===e&&r++;return r}function gi(t){return t.length===1?t[0]:t}function Er(t){return Array.isArray(t)?t:[t]}function Ys(t){let r=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return r[0]!=="_"?r:"private"+r}function wf(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,r)=>r.toUpperCase())}var Zs={};function Kp(t){if(t==null)return null;let e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function MN(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>MN(e));else{let e=Object.keys(t);for(let r of e){let n=t[r];n!=null&&typeof n=="object"&&(!Array.isArray(n)&&n.type==="ndarray"&&typeof n.value=="number"?t[r]=n.value:MN(n))}}}function Ou(t,e={},r={},n="object",a=!1){if(typeof t=="string"){let s=t,o;if(s in r)o=r[s];else if(s in Zs)o=Zs[s];else if(o=e[s],o==null)throw new ce(`Unknown ${n}: ${t}. This may be due to one of the following reasons:
1. The ${n} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${n} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{let s=t;if(s.className==null||s.config==null)throw new ce(`${n}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);let o=s.className,u,l;if(o in r?[u,l]=r[o]:o in Zs?[u,l]=Zs.className:o in e&&([u,l]=e[o]),u==null)throw new ce(`Unknown ${n}: ${o}. This may be due to one of the following reasons:
1. The ${n} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${n} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){let h={};for(let S of Object.keys(Zs))h[S]=Zs[S];for(let S of Object.keys(r))h[S]=r[S];let p=s.config;p.customObjects=h;let v=Object.assign({},Zs);for(let S of Object.keys(r))Zs[S]=r[S];MN(s.config);let y=l(u,s.config,r,a);return Zs=Object.assign({},v),y}else{let h=Object.assign({},Zs);for(let v of Object.keys(r))Zs[v]=r[v];let p=new u(s.config);return Zs=Object.assign({},h),p}}}function ADe(t,e){return t<e?-1:t>e?1:0}function ly(t,e){return-1*ADe(t,e)}function Xs(t){if(t==null)return t;let e=[];for(let r of t)e.indexOf(r)===-1&&e.push(r);return e}function sK(t){if(t==null)throw new ce(`Invalid value in obj: ${JSON.stringify(t)}`);for(let e in t)if(t.hasOwnProperty(e))return!1;return!0}function Ru(t,e,r){if(r!=null&&t.indexOf(r)<0)throw new ce(`${r} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function ax(t,e,r=0,n=1/0){return os(r>=0),os(n>=r),Array.isArray(t)&&t.length>=r&&t.length<=n&&t.every(a=>typeof a===e)}function Nn(t,e){Array.isArray(t)?(fy.util.assert(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((r,n)=>Nn(r,`element ${n+1} of ${e}`))):fy.util.assert(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${oK(t)}.`)}function oK(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>oK(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function uK(t,e,r){let n=r!=null?r():fy.util.now(),a;return(...o)=>{let u=r!=null?r():fy.util.now();return u-n<e||(n=u,a=t(...o)),a}}function sx(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}var DK=ut(Mt());var kDe=0;function ux(){return kDe++}var ox={};function Pl(t=""){return t in ox||(ox[t]=0),ox[t]+=1,t+ox[t].toString()}var o0=ut(Mt());var fK=["channelsFirst","channelsLast"],lK=["nearest","bilinear"],cK=["valid","same","causal"],hK=["max","avg"],dK=["sum","mul","concat","ave"];var Zp=new Map;function sn(t){Ru(fK,"DataFormat",t)}function mK(t){Ru(lK,"InterpolationFormat",t)}function ca(t){Ru(cK,"PaddingMode",t)}function kN(t){Ru(hK,"PoolMode",t)}var cy=[],pK="/";function Uo(t,e){cy.push(t);try{let r=e();return cy.pop(),r}catch(r){throw cy.pop(),r}}function TDe(){return cy.length===0?"":cy.join(pK)+pK}function fx(t){if(!vK(t))throw new Error("Not a valid tensor name: '"+t+"'");return TDe()+t}function lx(t){if(!vK(t))throw new Error("Not a valid tensor name: '"+t+"'");Zp.has(t)||Zp.set(t,0);let e=Zp.get(t);if(Zp.set(t,Zp.get(t)+1),e>0){let r=`${t}_${e}`;return Zp.set(r,1),r}else return t}var NDe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function vK(t){return!!t.match(NDe)}var Ft=ut(Mt());var ft=ut(Mt()),da=ut(Mt());function gK(t){return t===parseInt(t.toString(),10)}function Qs(t,e,r){e==null&&(e=0),r==null&&(r=t.length);let n=1;for(let a=e;a<r;++a)n*=t[a];return n}function Rh(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let r=0;r<t.length;r++){let n=t[r];n<e&&(e=n)}return e}function Vo(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let r=0;r<t.length;r++){let n=t[r];n>e&&(e=n)}return e}function Yi(t,e){if(e<t)throw new ce(`end (${e}) < begin (${t}) is forbidden.`);let r=[];for(let n=t;n<e;++n)r.push(n);return r}var yK=ut(Mt());var TN;function Wn(){return TN==null&&(TN=(0,yK.backend)().epsilon()),TN}function ha(){return"channelsLast"}function Ch(t,e){return ft.cast(t,e)}function xf(t,e=-1){let r=t.shape.slice();return e<0&&(e=r.length+e+1),r.splice(e,0,1),ft.reshape(t,r)}function bK(t,e){return(0,da.tidy)(()=>{if(t.shape.length!==2)throw new ce(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);let r=xf(t,1);return hx(r,[1,e,1])})}function wK(t){let e=[Qs(t.shape)];return ft.reshape(t,e)}function _K(t){if(t.rank<=1)throw new ce(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);let e=[t.shape[0],Qs(t.shape,1)];return ft.reshape(t,e)}function _f(t,e,r){return(0,da.tidy)(()=>{switch(t.rank){case 1:return ft.slice1d(t,e,r);case 2:return ft.slice2d(t,[e,0],[r,t.shape[1]]);case 3:return ft.slice3d(t,[e,0,0],[r,t.shape[1],t.shape[2]]);case 4:return ft.slice4d(t,[e,0,0,0],[r,t.shape[1],t.shape[2],t.shape[3]]);case 5:return ft.slice(t,[e,0,0,0,0],[r,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return ft.slice(t,[e,0,0,0,0,0],[r,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new ce(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function NN(t,e,r){return(0,da.tidy)(()=>{switch(t.rank){case 1:return ft.slice1d(t,e,r);case 2:return ft.slice2d(t,[0,e],[t.shape[0],r]);case 3:return ft.slice3d(t,[0,0,e],[t.shape[0],t.shape[1],r]);case 4:return ft.slice4d(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],r]);default:throw new ce(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function hy(t,e,r,n){return(0,da.tidy)(()=>{switch(t.rank){case 1:return ft.slice1d(t,e,r);case 2:switch(n){case 1:return _f(t,e,r);case 2:return NN(t,e,r);default:throw new ce(`The axis is not within the rank of the tensor ${n}`)}case 3:switch(n){case 1:return _f(t,e,r);case 2:return ft.slice3d(t,[0,e,0],[t.shape[0],r,t.shape[2]]);case 3:return NN(t,e,r);default:throw new ce(`The axis is not within the rank of the tensor ${n}`)}case 4:switch(n){case 1:return _f(t,e,r);case 2:return ft.slice4d(t,[0,e,0,0],[t.shape[0],r,t.shape[2],t.shape[3]]);case 3:return ft.slice4d(t,[0,0,e,0],[t.shape[0],t.shape[1],r,t.shape[3]]);case 4:return NN(t,e,r);default:throw new ce(`The axis is not within the rank of the tensor ${n}`)}default:throw new ce(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Jp(t,e=-1){let r;return e<0&&(r=t[0].rank,r!==0?e=r:e=0),e===t[0].rank&&(e=-1),ft.concat(t,e)}function DN(t,e){switch(t.rank){case 1:return ft.concat1d([t,e]);case 2:return ft.concat2d([t,e],0);case 3:return ft.concat3d([t,e],0);case 4:return ft.concat4d([t,e],0);default:throw new ce(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function hx(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new ce(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return ft.tile(t,e)}function Yp(t,e=0,r=1,n,a){return ft.randomNormal(t,e,r,n,a)}function eo(t,e,r,n){if(t.rank<2||e.rank<2)throw new _t(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){let a=t.shape.slice(-1)[0],s=e.shape.slice(-2)[0];if(a!==s)throw new _t(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return ft.fused.matMul({a:t,b:e,transposeA:!1,transposeB:!1,bias:n?IN(t.rank,n,ha()):null,activation:r});{let a=t.shape.slice(),s=a.pop();t=ft.reshape(t,[-1,s]);let o=e.shape.slice(),u=o.pop(),l=o.pop(),h=[...o,u],p=Array.from({length:e.rank},(A,T)=>T===0?e.rank-2:T<=e.rank-2?T-1:T);e=ft.reshape(ft.transpose(e,p),[l,-1]);let v=[...a,...h],y=!1,S=!1;return ft.reshape(ft.fused.matMul({a:t,b:e,transposeA:y,transposeB:S,bias:n?IN(t.rank,n,ha()):null,activation:r}),v)}}function dx(t,e,r){return(0,da.tidy)(()=>(Array.isArray(e)?e=(0,da.tensor1d)(e,"int32"):e=ft.cast(e,"int32"),ft.gather(t,e,r)))}function Fh(t){return ft.mul(t,t)}function IN(t,e,r){let n=e.shape;if(e.rank!==1&&e.rank!==t)throw new ce(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(r==="channelsFirst")return n.length===1?ft.reshape(e,[1,n[0],1,1,1]):ft.reshape(e,[1,n[3],n[0],n[1],n[2]]);if(r==="channelsLast")return n.length===1?ft.reshape(e,[1,1,1,1,n[0]]):ft.reshape(e,[1].concat(n))}else if(t===4){if(r==="channelsFirst")return n.length===1?ft.reshape(e,[1,n[0],1,1]):ft.reshape(e,[1,n[2],n[0],n[1]]);if(r==="channelsLast")return n.length===1?ft.reshape(e,[1,1,1,n[0]]):ft.reshape(e,[1].concat(n))}else if(t===3){if(r==="channelsFirst")return n.length===1?ft.reshape(e,[1,n[0],1]):ft.reshape(e,[1,n[1],n[0]]);if(r==="channelsLast")return n.length===1?ft.reshape(e,[1,1,n[0]]):ft.reshape(e,[1].concat(n))}else if(t<3)return e;throw new ce(`Unsupported input rank by biasAdd: ${e.rank}`)}function pa(t,e,r){return(0,da.tidy)(()=>(r==null&&(r=ha()),sn(r),ft.add(t,IN(t.rank,e,r))))}function xK(t,e=1){if(e!==1)throw new _t(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return ft.elu(t)}function SK(t){return(0,da.tidy)(()=>ft.div(t,ft.add(ft.abs(t),1)))}function px(t,e,r,n){return(0,da.tidy)(()=>ft.dropout(t,e,r,n))}function EK(t){return(0,da.tidy)(()=>{let e=ft.add(.5,ft.mul(.2,t));return ft.clipByValue(e,0,1)})}function ql(t,e,r=!1){return r?t():e()}var MK=["fanIn","fanOut","fanAvg"],AK=["normal","uniform","truncatedNormal"];function IDe(t){Ru(MK,"FanMode",t)}function DDe(t){Ru(AK,"Distribution",t)}var va=class extends Ft.serialization.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},dy=class extends va{apply(e,r){return(0,Ft.zeros)(e,r)}};dy.className="Zeros";Ft.serialization.registerClass(dy);var Bh=class extends va{apply(e,r){return(0,Ft.ones)(e,r)}};Bh.className="Ones";Ft.serialization.registerClass(Bh);var py=class extends va{constructor(e){if(super(),typeof e!="object")throw new ce(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new ce(`config must have value set but got ${e}`);this.value=e.value}apply(e,r){return(0,Ft.tidy)(()=>(0,Ft.mul)((0,Ft.scalar)(this.value),(0,Ft.ones)(e,r)))}getConfig(){return{value:this.value}}};py.className="Constant";Ft.serialization.registerClass(py);var my=class extends va{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,r){return(0,Ft.randomUniform)(e,this.minval,this.maxval,r)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}};my.className="RandomUniform";Ft.serialization.registerClass(my);var vy=class extends va{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,r){if(r=r||"float32",r!=="float32"&&r!=="int32")throw new _t(`randomNormal does not support dType ${r}.`);return Yp(e,this.mean,this.stddev,r,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};vy.className="RandomNormal";Ft.serialization.registerClass(vy);var gy=class extends va{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,r){if(r=r||"float32",r!=="float32"&&r!=="int32")throw new _t(`truncatedNormal does not support dType ${r}.`);return(0,Ft.truncatedNormal)(e,this.mean,this.stddev,r,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};gy.className="TruncatedNormal";Ft.serialization.registerClass(gy);var yy=class extends va{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,r){return(0,Ft.tidy)(()=>{if(e.length!==2||e[0]!==e[1])throw new ce("Identity matrix initializer can only be used for 2D square matrices.");return(0,Ft.mul)(this.gain,(0,Ft.eye)(e[0]))})}getConfig(){return{gain:this.gain}}};yy.className="Identity";Ft.serialization.registerClass(yy);function ODe(t,e="channelsLast"){let r,n;if(sn(e),t.length===2)r=t[0],n=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){let a=Qs(t,2);r=t[1]*a,n=t[0]*a}else if(e==="channelsLast"){let a=Qs(t,0,t.length-2);r=t[t.length-2]*a,n=t[t.length-1]*a}}else{let a=Qs(t);r=Math.sqrt(a),n=Math.sqrt(a)}return[r,n]}var Xi=class extends va{constructor(e){if(super(),e.scale<0)throw new ce(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,IDe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,DDe(this.distribution),this.seed=e.seed}apply(e,r){let n=ODe(e),a=n[0],s=n[1],o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,a):this.mode==="fanOut"?o/=Math.max(1,s):o/=Math.max(1,(a+s)/2),this.distribution==="normal"){let u=Math.sqrt(o);if(r=r||"float32",r!=="float32"&&r!=="int32")throw new _t(`${this.getClassName()} does not support dType ${r}.`);return(0,Ft.truncatedNormal)(e,0,u,r,this.seed)}else{let u=Math.sqrt(3*o);return(0,Ft.randomUniform)(e,-u,u,r)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}};Xi.className="VarianceScaling";Ft.serialization.registerClass(Xi);var Xp=class extends Xi{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Xi.className}};Xp.className="GlorotUniform";Ft.serialization.registerClass(Xp);var Qp=class extends Xi{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Xi.className}};Qp.className="GlorotNormal";Ft.serialization.registerClass(Qp);var e0=class extends Xi{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Xi.className}};e0.className="HeNormal";Ft.serialization.registerClass(e0);var t0=class extends Xi{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Xi.className}};t0.className="HeUniform";Ft.serialization.registerClass(t0);var r0=class extends Xi{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Xi.className}};r0.className="LeCunNormal";Ft.serialization.registerClass(r0);var n0=class extends Xi{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Xi.className}};n0.className="LeCunNormal";Ft.serialization.registerClass(n0);var by=class extends va{constructor(e){if(super(),this.DEFAULT_GAIN=1,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed,this.seed!=null)throw new _t("Random seed is not implemented for Orthogonal Initializer yet.")}apply(e,r){return(0,Ft.tidy)(()=>{if(e.length<2)throw new _t("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${e[0]*e[1]}) elements: Slowness may result.`);let n=e[0]>e[1]?[e[1],e[0]]:e,a=Yp(n,0,1,"float32"),s=Ft.linalg.gramSchmidt(a);return e[0]>e[1]&&(s=(0,Ft.transpose)(s)),(0,Ft.mul)(this.gain,s)})}getConfig(){return{gain:this.gain,seed:this.seed}}};by.className="Orthogonal";Ft.serialization.registerClass(by);var kK={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function TK(t,e={}){return Ou(t,Ft.serialization.SerializationMap.getMap().classNameMap,e,"initializer")}function Dr(t){return Kp(t)}function wr(t){if(typeof t=="string"){let e=t in kK?kK[t]:t;if(e==="GlorotNormal")return new Qp;if(e==="GlorotUniform")return new Xp;if(e==="HeNormal")return new e0;if(e==="HeUniform")return new t0;if(e==="LeCunNormal")return new r0;if(e==="LeCunUniform")return new n0;{let r={};return r.className=e,r.config={},TK(r)}}else return t instanceof va?t:TK(t)}function mx(t){return Array.isArray(t)&&Array.isArray(t[0])}function i0(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Tt(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new ce(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function Pt(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new ce(`Expected exactly 1 Shape; got ${t.length}`)}else return t}function a0(t){let e=0;for(let r of t)r.shape.length===0?e+=1:e+=r.shape.reduce((n,a)=>n*a);return e}var to=ut(Mt());var IK="Variable",wy=class{constructor(e,r="float32",n=IK,a=!0,s=null){this.dtype=r==null?"float32":r,this.shape=e.shape,this.id=ux(),n=n==null?IK:n,this.originalName=fx(n),this.name=lx(this.originalName),this.trainable_=a,this.constraint=s,this.val=to.variable(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),CDe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}};function CDe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function _y(t){return t.map(e=>e.read())}function s0(t){t.forEach(e=>{e[0].write(e[1])})}var Mr=class{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}},Qi=class{constructor(e,r,n,a,s,o,u){this.dtype=e,this.shape=r,this.sourceLayer=n,this.inputs=a,this.callArgs=s,this.outputTensorIndex=u,this.id=ux(),o!=null&&(this.originalName=fx(o),this.name=lx(this.originalName)),this.rank=r.length}},FDe=0,Sf=class{constructor(e,r){this.callArgs=r,this.id=FDe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(let n of e.inboundLayers)n!=null&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){let e=[];for(let r of this.inboundLayers)r!=null?e.push(r.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},BDe=0,Nt=class extends o0.serialization.Serializable{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=BDe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let r=e.name;if(!r){let n=this.getClassName();r=Ys(n)+"_"+Pl(n)}if(this.name=r,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let n;if(e.batchInputShape!=null)n=e.batchInputShape;else if(e.inputShape!=null){let s=null;e.batchSize!=null&&(s=e.batchSize),n=[s].concat(e.inputShape)}this.batchInputShape=n;let a=e.dtype;a==null&&(a=e.inputDType),a==null&&(a="float32"),this.dtype=a}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,r){return e.name+"_ib-"+r.toString()}getNodeAtIndex(e,r){if(this.inboundNodes.length===0)throw new Fi(`The layer has never been called and thus has no defined ${r}.`);if(this.inboundNodes.length<=e)throw new ce(`Asked to get ${r} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return gi(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return gi(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Ea(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Ea(`Layer ${this.name} is not connected, no input to return.`);return gi(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Ea(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Ea(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return gi(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(r=>r.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){if(e=Er(e),this.inputSpec==null||this.inputSpec.length===0)return;let r=Er(this.inputSpec);if(e.length!==r.length)throw new ce(`Layer ${this.name} expects ${r.length} inputs, but it received ${e.length} input tensors. Input received: ${e}`);for(let n=0;n<e.length;n++){let a=e[n],s=r[n];if(s==null)continue;let o=a.rank;if(s.ndim!=null&&o!==s.ndim)throw new ce(`Input ${n} is incompatible with layer ${this.name}: expected ndim=${s.ndim}, found ndim=${o}`);if(s.maxNDim!=null&&o>s.maxNDim)throw new ce(`Input ${n} is incompatible with layer ${this.name}: expected max_ndim=${s.maxNDim}, found ndim=${o}`);if(s.minNDim!=null&&o<s.minNDim)throw new ce(`Input ${n} is incompatible with layer ${this.name}: expected min_ndim=${s.minNDim}, found ndim=${o}.`);if(s.dtype!=null&&a.dtype!==s.dtype)throw new ce(`Input ${n} is incompatible with layer ${this.name} : expected dtype=${s.dtype}, found dtype=${a.dtype}.`);if(s.axes){let u=a.shape;for(let l in s.axes){let h=Number(l),p=s.axes[l],v=h>=0?u[h]:u[u.length+h];if(p!=null&&[p,null].indexOf(v)===-1)throw new ce(`Input ${n} is incompatible with layer ${this.name}: expected axis ${h} of input shape to have value ${p} but got shape ${u}.`)}}if(s.shape!=null)for(let u=0;u<s.shape.length;++u){let l=s.shape[u],h=a.shape[u];if(l!=null&&h!=null&&l!==h)throw new ce(`Input ${n} is incompatible with layer ${this.name}: expected shape=${s.shape}, found shape=${a.shape}.`)}}}call(e,r){return e}invokeCallHook(e,r){this._callHook!=null&&this._callHook(e,r)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,r){r=r||{},this.assertNotDisposed();let n=Er(e),a=!0;for(let o of n)if(!(o instanceof Qi)){a=!1;break}let s=!0;for(let o of n)if(o instanceof Qi){s=!1;break}if(a===s)throw new ce("Arguments to apply() must be all SymbolicTensors or all Tensors");return Uo(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);let o=[];for(let u of Er(e))o.push(u.shape);this.build(gi(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(e),s){let o=this.call(e,r),u=Er(o),l=[];for(let h of u)n.indexOf(h)!==-1&&(h=h.clone()),l.push(h);if(o=gi(l),this.activityRegularizer!=null)throw new _t("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{let o=LDe(e),u=this.computeOutputShape(o),l,h=PDe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?o[0]:o),u!=null&&u.length>0&&Array.isArray(u[0])?l=u.map((p,v)=>new Qi(h,p,this,Er(e),r,this.name,v)):l=new Qi(h,u,this,Er(e),r,this.name),this.addInboundNode(e,l,null,null,o,u,r),this._refCount++,this.activityRegularizer!=null)throw new _t("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let r=!1;this.batchInputShape.forEach((n,a)=>{n!=null&&e[a]!=null&&e[a]!==n&&(r=!0)}),r&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Ea(`The layer ${this.name} has never been called and thus has no defined output shape.`);let e=[];for(let r of this.inboundNodes){let n=JSON.stringify(r.outputShapes);e.indexOf(n)===-1&&e.push(n)}if(e.length===1){let r=this.inboundNodes[0].outputShapes;return Array.isArray(r)&&Array.isArray(r[0])&&r.length===1?r[0]:r}else throw new Ea(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Fi(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return a0(this.weights)}build(e){this.built=!0}getWeights(e=!1){return _y(e?this.trainableWeights:this.weights)}setWeights(e){(0,o0.tidy)(()=>{let r=this.weights;if(r.length!==e.length)throw new ce(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${r.length} weights. Provided weights: ${e}...`);if(r.length===0)return;let n=[],a=_y(r);for(let s=0;s<a.length;++s){let o=a[s],u=r[s],l=e[s];if(!o0.util.arraysEqual(o.shape,l.shape))throw new ce(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);n.push([u,l])}s0(n)})}addWeight(e,r,n,a,s,o,u,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new ce(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),n==null&&(n="float32"),this.fastWeightInitDuringBuild&&(a=l!=null?l():wr("zeros"));let h=a.apply(r,n),p=new wy(h,n,e,o,u);return h.dispose(),s!=null&&this.addLoss(()=>s.apply(p.read())),o==null&&(o=!0),o?this._trainableWeights.push(p):this._nonTrainableWeights.push(p),p}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Er(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,r){if(!this.supportsMasking){if(r!=null)if(Array.isArray(r))r.forEach(n=>{if(n!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return r}addInboundNode(e,r,n,a,s,o,u=null){let l=Er(e);r=Er(r),n=Er(n),a=Er(a),s=i0(s),o=i0(o);let h=[],p=[],v=[];for(let y of l)h.push(y.sourceLayer),p.push(y.nodeIndex),v.push(y.tensorIndex);new Sf({outboundLayer:this,inboundLayers:h,nodeIndices:p,tensorIndices:v,inputTensors:l,outputTensors:r,inputMasks:n,outputMasks:a,inputShapes:s,outputShapes:o},u);for(let y=0;y<r.length;y++)r[y].sourceLayer=this,r[y].nodeIndex=this.inboundNodes.length-1,r[y].tensorIndex=y}getConfig(){let e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}};function LDe(t){t=Er(t);let e=[];for(let r of t)e.push(r.shape);return gi(e)}function PDe(t){return"float32"}function ON(t,e,r){if((e==null||r!=null&&r>0)&&(e=t.sourceLayer,r=t.nodeIndex),e.inboundNodes.length===0)return[t];{let n=e.inboundNodes[r];if(n.inboundLayers.length===0)return n.inputTensors;{let a=[];for(let s=0;s<n.inboundLayers.length;s++){let o=n.inputTensors[s],u=n.inboundLayers[s],l=n.nodeIndices[s],h=ON(o,u,l);for(let p of h)a.indexOf(p)===-1&&a.push(p)}return a}}}var Wo=class extends Nt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:Pl("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new ce("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let r=e.batchInputShape;if(r==null){if(e.inputShape==null)throw new ce("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");r=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new ce("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let n=e.dtype||"float32";this.batchInputShape=r,this.dtype=n,this.inputSpec=[{shape:r}];let a=new Qi(this.dtype,this.batchInputShape,this,[],{},this.name);a.nodeIndex=0,a.tensorIndex=0,new Sf({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[a],outputTensors:[a],inputMasks:[null],outputMasks:[null],inputShapes:[r],outputShapes:[r]})}apply(e,r){throw new ce(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}};Wo.className="InputLayer";DK.serialization.registerClass(Wo);function vx(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new ce("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let r=t.dtype;return r==null&&(r="float32"),new Wo({batchInputShape:e,name:t.name,dtype:r,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}function qDe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return(0,Ef.cast)(e,t.dtype)}catch{throw new ce(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}var ro=class{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof ro)for(let r in e.id2Value)this.id2Value[r]=e.id2Value[r],r in e.id2Mask&&(this.id2Mask[r]=e.id2Mask[r]);else{if(e==null)return;for(let r of e)this.add(r.key,r.value)}}add(e,r,n){if(this.id2Value[e.id]==null)this.id2Value[e.id]=qDe(e,r),this.name2Id[e.name]=e.id,n!=null&&(this.id2Mask[e.id]=n);else throw new ce(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Qi){if(this.id2Value[e.id]==null)throw new ce(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{let r=this.name2Id[e];if(r==null)throw new ce(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[r]}}getMask(e){if(e instanceof Qi){if(this.id2Value[e.id]==null)throw new ce(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{let r=this.name2Id[e];if(r==null)throw new ce(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[r]}}disposeMasks(){this.id2Mask!=null&&(0,Ef.dispose)(this.id2Mask)}},gx=new uy,yx=new uy;function RK(t){gx!=null&&gx.setMaxEntries(t),yx!=null&&yx.setMaxEntries(t)}function Lh(t,e,r,n){let a=r==null?!1:r.training,s=Array.isArray(t),o=s?t:[t],u=o.map(A=>A.name),l=[],h=e.names();for(let A of u)h.indexOf(A)!==-1?l.push(e.getValue(A)):l.push(null);n!=null&&(n.maxNumTensors=-1/0,n.minNumTensors=1/0);let p=u.join(",")+"|"+e.names().sort().join(","),v=gx.get(p),y;if(v==null){let A=$De(o,e);v=A.sorted,y=A.recipientCounts,gx.put(p,v),yx.put(p,y)}y={},a||Object.assign(y,yx.get(p));let S=new ro(e);for(let A=0;A<v.length;++A){if(n!=null){let K=(0,Ef.memory)().numTensors;K>n.maxNumTensors&&(n.maxNumTensors=K),K<n.minNumTensors&&(n.minNumTensors=K)}let T=v[A],I=T.sourceLayer;if(I instanceof Wo)continue;let N=[],D=[],C=[],L=!1;for(let K of T.inputs){let M=S.getValue(K),f=S.getMask(K);N.push(M),D.push(f),f!=null&&(L=!0),a||(y[K.name]--,y[K.name]===0&&!e.hasKey(K)&&u.indexOf(K.name)===-1&&!M.isDisposed&&K.sourceLayer.stateful!==!0&&C.push(M))}L&&(r=r||{},r.mask=D[0]);let z=Er(I.apply(N,r)),$=null;I.supportsMasking&&($=I.computeMask(N,D));let G=jDe(T),j=Array.isArray(G)?G:[G];for(let K=0;K<j.length;++K){S.hasKey(j[K])||S.add(j[K],z[K],Array.isArray($)?$[0]:$);let M=u.indexOf(j[K].name);M!==-1&&(l[M]=z[K])}a||(0,Ef.dispose)(C)}return S.disposeMasks(),s?l:l[0]}function $De(t,e){Ef.util.assert(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let r=[],n={};if(t.length===1){let a=OK(t[0],e);r=a.sorted,n=a.recipientMap}else{let a=new Set;for(let s of t){let{sorted:o,recipientMap:u}=OK(s,e);for(let l of o)a.has(l.name)||(r.push(l),a.add(l.name));for(let l in u)n[l]==null&&(n[l]=new Set),u[l].forEach(h=>n[l].add(h))}}return{sorted:r,recipientCounts:zDe(n)}}function zDe(t){let e={};for(let r in t)e[r]=t[r].size;return e}function OK(t,e){let r=new Set,n=[],a={};for(let u of e.names())r.add(u);let s=[],o=[];for(s.push(t);s.length>0;){let u=s[s.length-1];if(r.has(u.name)){s.pop();continue}let l=o[o.length-1]===s.length-1;if(u.inputs.length===0||l)s.pop(),n.push(u),r.add(u.name),l&&o.pop();else{o.push(s.length-1);for(let h of u.inputs)a[h.name]==null&&(a[h.name]=new Set),a[h.name].add(u.name),!r.has(h.name)&&s.push(h)}}return{sorted:n,recipientMap:a}}function jDe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let r=null;for(let n=0;n<t.sourceLayer.inboundNodes.length;++n)for(let a of t.sourceLayer.inboundNodes[n].outputTensors)if(a.id===t.id){r=n;break}e=t.sourceLayer.getOutputAt(r)}return e}var UDe=(0,CK.env)();UDe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,RK);var FK="Abs",BK="Acos",LK="Acosh",u0="Add",PK="AddN";var qK="ArgMax",$K="ArgMin",zK="Asin",jK="Asinh",UK="Atan",VK="Atanh",WK="Atan2",GK="AvgPool",HK="AvgPoolGrad",KK="AvgPool3D",ZK="AvgPool3DGrad",bx="BatchMatMul",wx="BatchToSpaceND";var JK="BroadcastTo";var f0="Cast",YK="Ceil",XK="ClipByValue",QK="Complex",eZ="ComplexAbs",_x="Concat",xx="Conv2D",tZ="Conv2DBackpropFilter",Sx="Conv2DBackpropInput",rZ="Conv3D",nZ="Conv3DBackpropFilterV2",iZ="Conv3DBackpropInputV2",Ex="Cos",Mx="Cosh",aZ="Cumprod",Ax="Cumsum";var sZ="DepthwiseConv2dNative",oZ="DepthwiseConv2dNativeBackpropFilter",uZ="DepthwiseConv2dNativeBackpropInput";var fZ="Dilation2D",lZ="Dilation2DBackpropInput",cZ="Dilation2DBackpropFilter",kx="RealDiv";var Tx="Elu",hZ="EluGrad",dZ="Erf",pZ="Equal",Nx="Exp",Ix="ExpandDims",mZ="Expm1";var Dx="Floor",Ox="FloorDiv",vZ="FusedBatchNorm",Rx="GatherV2";var gZ="Greater",Cx="GreaterEqual",l0="Identity";var yZ="Imag",bZ="IsFinite",wZ="IsInf",_Z="IsNan",Fx="LeakyRelu",xZ="Less",SZ="LessEqual";var Bx="Log",EZ="Log1p",MZ="LogicalAnd",AZ="LogicalNot";var kZ="LogSoftmax";var TZ="LRN",NZ="LRNGrad",IZ="Max",Lx="Maximum",DZ="MaxPool",OZ="MaxPoolGrad",RZ="MaxPool3D",CZ="MaxPool3DGrad";var FZ="Mean",BZ="Min",LZ="Minimum",PZ="MirrorPad",qZ="Mod";var Px="Multiply",qx="Neg";var $Z="OnesLike",zZ="OneHot",$x="Pack",zx="PadV2";var jx="Pow",Ux="Prelu",jZ="Prod";var UZ="Real",VZ="Reciprocal",Vx="Relu",Wx="Reshape",WZ="ResizeNearestNeighbor",GZ="ResizeNearestNeighborGrad",HZ="ResizeBilinear",KZ="ResizeBilinearGrad",Gx="Relu6",Hx="Reverse",ZZ="Round",Kx="Rsqrt";var Zx="Select",JZ="Selu",Jx="Slice",Yx="Sin",Xx="Sinh",YZ="Sign",Qx="Sigmoid",XZ="Softplus",eS="Sqrt",tS="Sum",rS="SpaceToBatchND",nS="SplitV",QZ="Softmax";var eJ="SquaredDifference",tJ="Square";var iS="Sub",rJ="Tan",nJ="Tanh",c0="Tile";var h0="Transpose";var aS="Unpack",sS="UnsortedSegmentSum";var oS="ZerosLike",uS="Step";var fS=class{refCount(e){return us("refCount")}incRef(e){return us("incRef")}timerAvailable(){return!0}time(e){return us("time")}read(e){return us("read")}readSync(e){return us("readSync")}readToGPU(e,r){return us("readToGPU")}numDataIds(){return us("numDataIds")}disposeData(e,r){return us("disposeData")}write(e,r,n){return us("write")}move(e,r,n,a,s){return us("move")}memory(){return us("memory")}floatPrecision(){return us("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return us("dispose")}};function us(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function xy(t,e,r){return Math.max(t,Math.min(e,r))}function Je(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function iJ(t,e,r=""){Je(Sy(t,e),()=>r+` Shapes ${t} and ${e} must match`)}function Ph(t,e=[],r=!1){if(e==null&&(e=[]),Array.isArray(t)||fs(t)&&!r)for(let n=0;n<t.length;++n)Ph(t[n],e,r);else e.push(t);return e}function xn(t){if(t.length===0)return 1;let e=t[0];for(let r=1;r<t.length;r++)e*=t[r];return e}function Sy(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function d0(t){return t%1===0}function p0(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function Ua(t,e){let r=e.length;return t=t==null?e.map((n,a)=>a):[].concat(t),Je(t.every(n=>n>=-r&&n<r),()=>`All values in axis param must be in range [-${r}, ${r}) but got axis ${t}`),Je(t.every(n=>d0(n)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(n=>n<0?r+n:n)}function aJ(t,e){for(let r=0;r<t.length;r++){let n=t[r];if(isNaN(n)||!isFinite(n))throw Error(`A tensor of type ${e} being uploaded contains ${n}.`)}}function sJ(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function fs(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}function RN(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function oJ(t){if(t==null)return 0;let e=0;return t.forEach(r=>e+=r.length),e}function Ey(t){return typeof t=="string"||t instanceof String}function VDe(t){return typeof t=="boolean"}function WDe(t){return typeof t=="number"}function My(t){return Array.isArray(t)?My(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":WDe(t)?"float32":Ey(t)?"string":VDe(t)?"bool":"float32"}function CN(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Ay(t,e){for(let r=e;r<t;++r)if(t%r===0)return r;return t}function $l(t){let e=t.length;if(e<2)return[];let r=new Array(e-1);r[e-2]=t[e-1];for(let n=e-3;n>=0;--n)r[n]=r[n+1]*t[n+1];return r}function uJ(t,e,r,n=!1){let a=new Array;if(e.length===1){let s=e[0]*(n?2:1);for(let o=0;o<s;o++)a[o]=r[t+o]}else{let s=e[0],o=e.slice(1),u=o.reduce((l,h)=>l*h)*(n?2:1);for(let l=0;l<s;l++)a[l]=uJ(t+l*u,o,r,n)}return a}function FN(t,e,r=!1){if(t.length===0)return e[0];let n=t.reduce((a,s)=>a*s)*(r?2:1);if(n===0)return[];if(n!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${r?" for a complex tensor":""}.`);return uJ(0,t,e,r)}function lS(t,e){let r=ky(t,e);for(let n=0;n<r.length;n++)r[n]=1;return r}function ky(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function fJ(t){t.forEach(e=>{Je(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function cS(t){return t&&t.then&&typeof t.then=="function"}var lJ="tfjsflags",hS=class{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=HDe,this.populateURLFlags()}setPlatform(e,r){this.platform!=null&&(sr().getBool("IS_TEST")||sr().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=r}registerFlag(e,r,n){if(this.flagRegistry[e]={evaluationFn:r,setHook:n},this.urlFlags[e]!=null){let a=this.urlFlags[e];sr().getBool("IS_TEST")||sr().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${a}.`),this.set(e,a)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];let r=this.evaluateFlag(e);if(cS(r))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=r,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,r){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=r,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(r)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global=="undefined"||typeof this.global.location=="undefined"||typeof this.global.location.search=="undefined")return;let e=this.getQueryParams(this.global.location.search);lJ in e&&e[lJ].split(",").forEach(n=>{let[a,s]=n.split(":");this.urlFlags[a]=ZDe(a,s)})}};function HDe(t){let e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(r,...n)=>(KDe(e,n[0],n[1]),n.join("="))),e}function KDe(t,e,r){t[decodeURIComponent(e)]=decodeURIComponent(r||"")}function ZDe(t,e){if(e=e.toLowerCase(),e==="true"||e==="false")return e==="true";if(`${+e}`===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}function sr(){return cJ}var cJ=null;function hJ(t){cJ=t}var BN;function LN(){if(BN==null){let t;if(typeof window!="undefined")t=window;else if(typeof global!="undefined")t=global;else if(typeof process!="undefined")t=process;else if(typeof self!="undefined")t=self;else throw new Error("Could not find a global object");BN=t}return BN}function JDe(){let t=LN();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function Ty(t,e){let r=JDe();if(r.has(t))return r.get(t);{let n=e();return r.set(t,n),r.get(t)}}function Mf(...t){sr().getBool("IS_TEST")||sr().getBool("PROD")||console.warn(...t)}function YDe(...t){sr().getBool("IS_TEST")||sr().getBool("PROD")||console.log(...t)}var pJ=Ty("kernelRegistry",()=>new Map),PN=Ty("gradRegistry",()=>new Map);function qN(t,e){let r=XDe(t,e);return pJ.get(r)}function $N(t){return PN.get(t)}function zN(t){let e=pJ.entries(),r=[];for(;;){let{done:n,value:a}=e.next();if(n)break;let[s,o]=a,[u]=s.split("_");u===t&&r.push(o)}return r}function mJ(t){let{kernelName:e}=t;PN.has(e)&&sr().getBool("DEBUG")&&Mf(`Overriding the gradient for '${e}'`),PN.set(e,t)}function XDe(t,e){return`${e}_${t}`}function QDe(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function dS(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Ph(t)),sr().getBool("DEBUG")&&aJ(t,e),QDe(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){let r=new Uint8Array(t.length);for(let n=0;n<r.length;++n)Math.round(t[n])!==0&&(r[n]=1);return r}else throw new Error(`Unknown data type ${e}`)}function m0(){return sr().platform.now()}function pS(t,e="utf-8"){return e=e||"utf-8",sr().platform.encode(t,e)}function Ny(t,e="utf-8"){return e=e||"utf-8",sr().platform.decode(t,e)}var mS=class{constructor(e,r){this.backendTimer=e,this.logger=r,r==null&&(this.logger=new jN)}profileKernel(e,r,n){let a,s=()=>{a=n()},o,u=m0();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(s);else{s();for(let h of a)h.dataSync();o=Promise.resolve({kernelMs:m0()-u})}if(sr().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let h=0;h<a.length;h++){let p=a[h];p.data().then(v=>{e8e(v,p.dtype,e)})}return{kernelName:e,outputs:a,inputs:r,timeMs:o.then(h=>h.kernelMs),extraInfo:o.then(h=>h.getExtraProfileInfo!=null?h.getExtraProfileInfo():"")}}logKernelProfile(e){let{kernelName:r,outputs:n,timeMs:a,inputs:s,extraInfo:o}=e;n.forEach(u=>{Promise.all([u.data(),a,o]).then(l=>{this.logger.logKernelProfile(r,u,l[0],l[1],s,l[2])})})}};function e8e(t,e,r){if(e!=="float32")return!1;for(let n=0;n<t.length;n++){let a=t[n];if(isNaN(a)||!isFinite(a))return console.warn(`Found ${a} in the result of '${r}'`),!0}return!1}var jN=class{logKernelProfile(e,r,n,a,s,o){let u=typeof a=="number"?p0(`${a}ms`,9):a.error,l=p0(e,25),h=r.rank,p=r.size,v=p0(r.shape.toString(),14),y="";for(let S in s){let A=s[S];if(A!=null){let T=A.shape||r.shape,I=T.length;y+=`${S}: ${I}D ${I>0?T:""} `}}console.log(`%c${l}	%c${u}	%c${h}D ${v}	%c${p}	%c${y}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};function vJ(t,e,r){let n={},a={};for(let l=0;l<e.length;l++)n[e[l].id]=!0;for(let l=0;l<t.length;l++){let h=t[l],p=h.inputs;for(let v in p){let y=p[v],S=!1;for(let A=0;A<e.length;A++)if(n[y.id]){h.outputs.forEach(T=>n[T.id]=!0),S=!0,a[h.id]=!0;break}if(S)break}}let s={};s[r.id]=!0;let o={};for(let l=t.length-1;l>=0;l--){let h=t[l],p=h.inputs;for(let v=0;v<h.outputs.length;v++)if(s[h.outputs[v].id]){for(let y in p)s[p[y].id]=!0,o[h.id]=!0;break}}let u=[];for(let l=0;l<t.length;l++){let h=t[l];if(a[h.id]&&o[h.id]){let p={};for(let y in h.inputs){let S=h.inputs[y];n[S.id]&&(p[y]=S)}let v=Object.assign({},h);v.inputs=p,v.outputs=h.outputs,u.push(v)}}return u}function gJ(t,e,r,n){for(let a=e.length-1;a>=0;a--){let s=e[a],o=[];if(s.outputs.forEach(l=>{let h=t[l.id];h!=null?o.push(h):o.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);let u=s.gradient(o);for(let l in s.inputs){if(!(l in u))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(u)}.`);let h=r(()=>u[l]());if(h.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${h.dtype}'`);let p=s.inputs[l];if(!Sy(h.shape,p.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${l}' has shape '${h.shape}', which does not match the shape of the input '${p.shape}'`);if(t[p.id]==null)t[p.id]=h;else{let v=t[p.id];t[p.id]=n(v,h),v.dispose()}}}}var yJ=20,Iy=3,UN=7;function bJ(t,e,r,n){let a=$l(e),s=t8e(t,e,r,a),o=e.length,u=vS(t,e,r,a,s),l=["Tensor"];return n&&(l.push(`  dtype: ${r}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(u.map(h=>"    "+h).join(`
`)),l.join(`
`)}function t8e(t,e,r,n){let a=xn(e),s=n[n.length-1],o=new Array(s).fill(0),u=e.length,l=r==="complex64"?Oy(t):t;if(u>1)for(let h=0;h<a/s;h++){let p=h*s;for(let v=0;v<s;v++)o[v]=Math.max(o[v],Dy(l[p+v],0,r).length)}return o}function Dy(t,e,r){let n;return Array.isArray(t)?n=`${parseFloat(t[0].toFixed(UN))} + ${parseFloat(t[1].toFixed(UN))}j`:Ey(t)?n=`'${t}'`:r==="bool"?n=wJ(t):n=parseFloat(t.toFixed(UN)).toString(),p0(n,e)}function wJ(t){return t===0?"false":"true"}function vS(t,e,r,n,a,s=!0){let o=r==="complex64"?2:1,u=e[0],l=e.length;if(l===0){if(r==="complex64"){let T=Oy(t);return[Dy(T[0],0,r)]}return r==="bool"?[wJ(t[0])]:[t[0].toString()]}if(l===1){if(u>yJ){let I=Iy*o,N=Array.from(t.slice(0,I)),D=Array.from(t.slice((u-Iy)*o,u*o));return r==="complex64"&&(N=Oy(N),D=Oy(D)),["["+N.map((C,L)=>Dy(C,a[L],r)).join(", ")+", ..., "+D.map((C,L)=>Dy(C,a[u-Iy+L],r)).join(", ")+"]"]}let T=r==="complex64"?Oy(t):Array.from(t);return["["+T.map((I,N)=>Dy(I,a[N],r)).join(", ")+"]"]}let h=e.slice(1),p=n.slice(1),v=n[0]*o,y=[];if(u>yJ){for(let T=0;T<Iy;T++){let I=T*v,N=I+v;y.push(...vS(t.slice(I,N),h,r,p,a,!1))}y.push("...");for(let T=u-Iy;T<u;T++){let I=T*v,N=I+v;y.push(...vS(t.slice(I,N),h,r,p,a,T===u-1))}}else for(let T=0;T<u;T++){let I=T*v,N=I+v;y.push(...vS(t.slice(I,N),h,r,p,a,T===u-1))}let S=l===2?",":"";y[0]="["+y[0]+S;for(let T=1;T<y.length-1;T++)y[T]=" "+y[T]+S;let A=`,
`;for(let T=2;T<l;T++)A+=`
`;return y[y.length-1]=" "+y[y.length-1]+"]"+(s?"":A),y}function Oy(t){let e=[];for(let r=0;r<t.length;r+=2)e.push([t[r],t[r+1]]);return e}var Cu=null,Ry=null,r8e=null;function _J(t){Cu=t}function xJ(t){r8e=t}var Bi=class{constructor(e,r,n,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=r||"float32",this.size=xn(e),this.strides=$l(e),this.dataId=n,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){let e=await this.data();return Ry.buffer(this.shape,this.dtype,e)}bufferSync(){return Ry.buffer(this.shape,this.dtype,this.dataSync())}async array(){let e=await this.data();return FN(this.shape,e,this.dtype==="complex64")}arraySync(){return FN(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();let e=Cu().read(this.dataId);if(this.dtype==="string"){let r=await e;try{return r.map(n=>Ny(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Cu().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();let e=Cu().readSync(this.dataId);if(this.dtype==="string")try{return e.map(r=>Ny(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();let e=await Cu().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(Cu().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Ry.print(this,e)}clone(){return this.throwIfDisposed(),Ry.clone(this)}toString(e=!1){let r=this.dataSync();return bJ(r,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Ry.cast(this,e)}variable(e=!0,r,n){return this.throwIfDisposed(),Cu().makeVariable(this,e,r,n)}};Object.defineProperty(Bi,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function n8e(){return Ty("Tensor",()=>Bi)}n8e();var qh=class extends Bi{constructor(e,r,n,a){super(e.shape,e.dtype,e.dataId,a),this.trainable=r,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Sy(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Cu().disposeTensor(this),this.dataId=e.dataId,Cu().incRef(this,null)}dispose(){Cu().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(qh,Symbol.hasInstance,{value:t=>t instanceof Bi&&t.assign!=null&&t.assign instanceof Function});var SJ;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(SJ||(SJ={}));var VN;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(VN||(VN={}));var WN;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(WN||(WN={}));var GN;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(GN||(GN={}));var HN;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(HN||(HN={}));var i8e={float32:GN,int32:VN,bool:WN,complex64:HN};function gS(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return i8e[t][e]}function Sn(t,e){if(t.dtype===e.dtype)return[t,e];let r=gS(t.dtype,e.dtype);return[t.cast(r),e.cast(r)]}function EJ(t){let e=[];return MJ(t,e,new Set),e}function MJ(t,e,r){if(t==null)return;if(t instanceof Bi){e.push(t);return}if(!a8e(t))return;let n=t;for(let a in n){let s=n[a];r.has(s)||(r.add(s),MJ(s,e,r))}}function a8e(t){return Array.isArray(t)||typeof t=="object"}function KN(t){return t.kernelName!=null}var yS=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(let e in this.registeredVariables)this.registeredVariables[e].dispose()}},zl=class{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new yS}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let e=this.getSortedBackends();for(let r=0;r<e.length;r++){let n=e[r];if(await this.initializeBackend(n).success){await this.setBackend(n);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:e,asyncInit:r}=this.initializeBackendsAndReturnBest();if(r)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){let{asyncInit:r}=this.initializeBackend(e);if(r)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,r,n=1){return e in this.registryFactory?(Mf(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:r,priority:n},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;let{success:r,asyncInit:n}=this.initializeBackend(e);if(!(n?await r:r))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new mS(this.backendInstance),!0}setupRegisteredKernels(){zN(this.backendName).forEach(r=>{r.setupFunc!=null&&r.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){zN(e).forEach(n=>{n.disposeFunc!=null&&n.disposeFunc(this.registry[e])})}initializeBackend(e){let r=this.registryFactory[e];if(r==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{let n=r.factory();if(n&&!(n instanceof fS)&&typeof n.then=="function"){let a=++this.pendingBackendInitId,s=n.then(o=>a<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(a<this.pendingBackendInitId||(this.pendingBackendInit=null,Mf(`Initialization of backend ${e} failed`),Mf(o.stack||o.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=n,{success:!0,asyncInit:!1}}catch(n){return Mf(`Initialization of backend ${e} failed`),Mf(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,r)=>this.registryFactory[r].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){let e=this.getSortedBackends();for(let r=0;r<e.length;r++){let n=e[r],{success:a,asyncInit:s}=this.initializeBackend(n);if(s||a)return{name:n,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,r){let n=this.state.tensorInfo.get(r),a=n.backend,s=this.readSync(r),o=a.refCount(r);a.disposeData(r,!0),n.backend=e,e.move(r,s,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,r){let n=null;if(r==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");r=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof r!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");n=e}let a;return this.scopedRun(()=>this.startScope(n),()=>this.endScope(a),()=>(a=r(),a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),a))}scopedRun(e,r,n){e();try{let a=n();return r(),a}catch(a){throw r(),a}}nextTensorId(){return zl.nextTensorId++}nextVariableId(){return zl.nextVariableId++}clone(e){let r=Ae.runKernel(l0,{x:e}),n={x:e},a=o=>({x:()=>{let u="float32",l={x:o},h={dtype:u};return Ae.runKernel(f0,l,h)}}),s=[];return this.addTapeNode(this.state.activeScope.name,n,[r],a,s,{}),r}runKernel(e,r,n){if(this.backendName==null&&this.backend,!(qN(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:r,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,r,n){let a=this.backend.numDataIds(),s=0;n.forEach(l=>{s+=l.dtype==="complex64"?3:1});let o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],u=a-r-s-o;if(u>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${u} data ids) after running '${e}'`)}runKernelFunc(e){let r,n=[],a=this.isTapeOn(),s=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let u;this.backendName==null&&this.backend;let l,h=KN(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(KN(e)){let{kernelName:A,inputs:T,attrs:I}=e;this.backendName==null&&this.backend;let N=qN(A,this.backendName);Je(N!=null,()=>`Cannot find registered kernel '${A}' for backend '${this.backendName}'`),u=()=>{let D=this.backend.numDataIds();l=N.kernelFunc({inputs:T,attrs:I,backend:this.backend});let C=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(A,D,C);let L=C.map(z=>z.rank!=null?z:this.makeTensorFromTensorInfo(z));if(a){let z=this.getTensorsForGradient(A,T,L);n=this.saveTensorsForBackwardMode(z)}return L}}else{let{forwardFunc:A}=e,T=I=>{!a||(n=I.map(N=>this.keep(this.clone(N))))};u=()=>{let I=this.backend.numDataIds();l=this.tidy(()=>A(this.backend,T));let N=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(h,I,N),N}}let{inputs:p,attrs:v}=e,y=KN(e)?null:e.backwardsFunc,S;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?r=u():(S=this.profiler.profileKernel(h,p,()=>u()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(S),r=S.outputs)}),a&&this.addTapeNode(h,p,r,y,n,v),this.state.profiling&&this.state.activeProfile.kernels.push({name:h,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(p).map(A=>p[A]!=null?p[A].shape:null),outputShapes:r.map(A=>A.shape),kernelTimeMs:S.timeMs,extraInfo:S.extraInfo}),Array.isArray(l)?r:r[0]}saveTensorsForBackwardMode(e){return e.map(n=>this.keep(this.clone(n)))}getTensorsForGradient(e,r,n){let a=$N(e);if(a!=null){let s=a.inputsToSave||[],o=a.outputsToSave||[],u;a.saveAllInputs?(Je(Array.isArray(r),()=>"saveAllInputs is true, expected inputs to be an array."),u=Object.keys(r).map(h=>r[h])):u=s.map(h=>r[h]);let l=n.filter((h,p)=>o[p]);return u.concat(l)}return[]}makeTensor(e,r,n,a){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",a=a||this.backend;let s=e;n==="string"&&Ey(e[0])&&(s=e.map(l=>pS(l)));let o=a.write(s,r,n),u=new Bi(r,n,o,this.nextTensorId());if(this.trackTensor(u,a),n==="string"){let l=this.state.tensorInfo.get(o),h=oJ(s);this.state.numBytes+=h-l.bytes,l.bytes=h}return u}makeTensorFromDataId(e,r,n,a){n=n||"float32";let s={dataId:e,shape:r,dtype:n};return this.makeTensorFromTensorInfo(s,a)}makeTensorFromTensorInfo(e,r){let{dataId:n,shape:a,dtype:s}=e,o=new Bi(a,s,n,this.nextTensorId());return this.trackTensor(o,r),o}makeVariable(e,r=!0,n,a){n=n||this.nextVariableId().toString(),a!=null&&a!==e.dtype&&(e=e.cast(a));let s=new qh(e,r,n,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,r){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let n=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(n=e.size*RN(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:r||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof qh||this.track(e)}incRef(e,r){this.trackTensor(e,r),this.backend.incRef(e.dataId)}removeDataId(e,r){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===r&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;let r=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=r.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){let n=e.size*RN(e.dtype);this.state.numBytes-=n}r.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,r.backend)}disposeVariables(){for(let e in this.state.registeredVariables){let r=this.state.registeredVariables[e];this.disposeVariable(r)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){let e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;let r=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(a=>a.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-r,this.state.activeProfile.newTensors=this.state.numTensors-n;for(let a of this.state.activeProfile.kernels)a.kernelTimeMs=await a.kernelTimeMs,a.extraInfo=await a.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,r,n,a,s,o){let u={id:this.state.nextTapeNodeId++,kernelName:e,inputs:r,outputs:n,saved:s},l=$N(e);l!=null&&(a=l.gradFunc),a!=null&&(u.gradient=h=>(h=h.map((p,v)=>{if(p==null){let y=n[v],S=ky(y.size,y.dtype);return this.makeTensor(S,y.shape,y.dtype)}return p}),a(h.length>1?h:h[0],s,o))),this.state.activeTape.push(u)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){let r={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(r.name=e),this.state.scopeStack.push(r),this.state.activeScope=r}endScope(e){let r=EJ(e),n=new Set(r.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){let o=this.state.activeScope.track[s];!o.kept&&!n.has(o.id)&&o.dispose()}let a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(s=>{!s.kept&&s.scopeId===a.id&&this.track(s)})}gradients(e,r,n,a=!1){if(Je(r.length>0,()=>"gradients() received an empty list of xs."),n!=null&&n.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);let s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));Je(s instanceof Bi,()=>"The result y returned by f() must be a tensor.");let o=vJ(this.state.activeTape,r,s);if(!a&&o.length===0&&r.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let u={};u[s.id]=n==null?s8e(s.shape):n,gJ(u,o,h=>this.tidy(h),u8e);let l=r.map(h=>u[h.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(h=>{for(let p of h.saved)p.dispose()}),this.state.activeTape=null),{value:s,grads:l}})}customGrad(e){return Je(CN(e),()=>"The f passed in customGrad(f) must be a function."),(...r)=>{Je(r.every(u=>u instanceof Bi),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let n,a={};r.forEach((u,l)=>{a[l]=u});let s=(u,l)=>(n=e(...r,l),Je(n.value instanceof Bi,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),Je(CN(n.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n.value),o=(u,l)=>{let h=n.gradFunc(u,l),p=Array.isArray(h)?h:[h];Je(p.length===r.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),Je(p.every(y=>y instanceof Bi),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let v={};return p.forEach((y,S)=>{v[S]=()=>y}),v};return this.runKernelFunc({forwardFunc:s,backwardsFunc:o,inputs:a})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,r){return this.state.tensorInfo.get(e).backend.readToGPU(e,r)}async time(e){let r=m0(),n=await this.backend.time(e);return n.wallMs=m0()-r,n}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new yS;for(let e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}};zl.nextTensorId=0;zl.nextVariableId=0;function s8e(t){let e=lS(xn(t),"float32");return Ae.makeTensor(e,t,"float32")}function o8e(){let t=LN();if(t._tfengine==null){let e=new hS(t);t._tfengine=new zl(e)}return hJ(t._tfengine.ENV),_J(()=>t._tfengine),t._tfengine}var Ae=o8e();function u8e(t,e){let r={a:t,b:e};return Ae.runKernel(u0,r)}function f8e(t,e){let r=t;if(fs(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];let n=[];for(;Array.isArray(r)||fs(r)&&e!=="string";)n.push(r.length),r=r[0];return Array.isArray(t)&&sr().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&kJ(t,n,[]),n}function kJ(t,e,r){if(r=r||[],!Array.isArray(t)&&!fs(t)){Je(e.length===0,()=>`Element arr[${r.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}Je(e.length>0,()=>`Element arr[${r.join("][")}] should be a primitive, but is an array of ${t.length} elements`),Je(t.length===e[0],()=>`Element arr[${r.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);let n=e.slice(1);for(let a=0;a<t.length;++a)kJ(t[a],n,r.concat(a))}function AJ(t,e,r,n){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${r}' passed to '${n}' must be ${t} tensor, but got ${e} tensor`)}}function Ce(t,e,r,n="numeric"){if(t instanceof Bi)return AJ(n,t.dtype,e,r),t;let a=My(t);if(a!=="string"&&["bool","int32","float32"].indexOf(n)>=0&&(a=n),AJ(n,a,e,r),t==null||!fs(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){let l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${r}' must be a Tensor or TensorLike, but got '${l}'`)}let s=f8e(t,a);!fs(t)&&!Array.isArray(t)&&(t=[t]);let u=a!=="string"?dS(t,a):Ph(t,[],!0);return Ae.makeTensor(u,s,a)}function bS(t,e,r,n="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${r} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,o)=>Ce(s,`${e}[${o}]`,r,n))}var l8e="__op";function Ke(t){let e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let r=e[0],n=t[r];r.endsWith("_")&&(r=r.substring(0,r.length-1)),r=r+l8e;let a=(...s)=>{Ae.startScope(r);try{let o=n(...s);return cS(o)&&console.error("Cannot return a Promise inside of tidy."),Ae.endScope(o),o}catch(o){throw Ae.endScope(null),o}};return Object.defineProperty(a,"name",{value:r,configurable:!0}),a}function c8e(t,e){let r=Ce(t,"x","cast");if(!sJ(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&r.dtype!=="string"||e!=="string"&&r.dtype==="string")throw new Error("Only strings can be casted to strings");let n={x:r},a={dtype:e};return Ae.runKernel(f0,n,a)}var bt=Ke({cast_:c8e});function h8e(t,e){let r=Ce(t,"a","mul"),n=Ce(e,"b","mul");[r,n]=Sn(r,n);let a={a:r,b:n};return Ae.runKernel(Px,a)}var rt=Ke({mul_:h8e});function d8e(t,e=0){let n={x:Ce(t,"x","step")},a={alpha:e};return Ae.runKernel(uS,n,a)}var jl=Ke({step_:d8e});var wS={kernelName:FK,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>rt(t,jl(bt(r,"float32"),-1))}}};function p8e(t,e){let r=Ce(t,"a","floorDiv"),n=Ce(e,"b","floorDiv");[r,n]=Sn(r,n);let a={a:r,b:n};return Ae.runKernel(Ox,a)}var TJ=Ke({floorDiv_:p8e});function m8e(t,e){let r=Ce(t,"a","div"),n=Ce(e,"b","div");if([r,n]=Sn(r,n),r.dtype==="int32"&&n.dtype==="int32")return TJ(r,n);let a={a:r,b:n},s={};return Ae.runKernel(kx,a,s)}var or=Ke({div_:m8e});function v8e(t){let r={x:Ce(t,"x","neg")};return Ae.runKernel(qx,r)}var Cn=Ke({neg_:v8e});function NJ(t,e,r,n){if(n==null&&(n=My(t)),n==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!fs(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){fJ(e);let a=xn(e),s=xn(r);Je(a===s,()=>`Based on the provided shape, [${e}], the tensor should have ${a} values but has ${s}`);for(let o=0;o<r.length;++o){let u=r[o],l=o===r.length-1?u!==xn(e.slice(o)):!0;Je(r[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${r}) does not match the provided shape (${e}). `)}}return!fs(t)&&!Array.isArray(t)&&(t=[t]),e=e||r,t=n!=="string"?dS(t,n):Ph(t,[],!0),Ae.makeTensor(t,e,n)}function hn(t,e){if((fs(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&fs(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return NJ(t,[],[],e)}function g8e(t){let r={x:Ce(t,"x","sqrt","float32")};return Ae.runKernel(eS,r)}var Fu=Ke({sqrt_:g8e});function y8e(t){let e=Ce(t,"x","square"),r={};return Ae.runKernel("Square",{x:e},r)}var Yr=Ke({square_:y8e});function b8e(t,e){let r=Ce(t,"a","sub"),n=Ce(e,"b","sub");[r,n]=Sn(r,n);let a={a:r,b:n};return Ae.runKernel(iS,a)}var Gn=Ke({sub_:b8e});var IJ={kernelName:BK,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>{let n=Yr(bt(r,"float32")),a=Fu(Gn(hn(1),n));return Cn(or(t,a))}}}};var DJ={kernelName:LK,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>{let n=Fu(Gn(Yr(bt(r,"float32")),1));return or(t,n)}}}};function w8e(t,e){let r=t.length,n=[];for(let a=0;a<r;a++){let s=r-1-a,o=t[s]||1;(e[e.length-1-a]||1)>1&&o===1&&n.unshift(s)}return n}function Or(t,e){let r=[];for(let n=0;n<e.length;n++){let a=t[t.length-n-1],s=e.length-n-1,o=e[s];(a==null||a===1&&o>1)&&r.unshift(s)}return r}function pr(t,e){let r=[],n=Math.max(t.length,e.length);for(let a=0;a<n;a++){let s=t[t.length-a-1];s==null&&(s=1);let o=e[e.length-a-1];if(o==null&&(o=1),s===1)r.unshift(o);else if(o===1)r.unshift(s);else if(s!==o){let u=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(u)}else r.unshift(s)}return r}function _8e(t,e){let n={x:Ce(t,"x","reshape","string_or_numeric")},a={shape:e};return Ae.runKernel(Wx,n,a)}var st=Ke({reshape_:_8e});function x8e(t,e=null,r=!1){let n=Ce(t,"x","sum");n.dtype==="bool"&&(n=bt(n,"int32"));let a={x:n},s={axis:e,keepDims:r};return Ae.runKernel(tS,a,s)}var Yt=Ke({sum_:x8e});var OJ={kernelName:u0,inputsToSave:["a","b"],gradFunc:(t,e)=>{let[r,n]=e,a=pr(r.shape,n.shape);return{a:()=>{let u=t,l=Or(r.shape,a);return l.length>0&&(u=Yt(u,l)),st(u,r.shape)},b:()=>{let u=t,l=Or(n.shape,a);return l.length>0&&(u=Yt(u,l)),st(u,n.shape)}}}};var RJ={kernelName:PK,saveAllInputs:!0,gradFunc:(t,e)=>{let r={};return e.forEach((n,a)=>{r[a]=()=>t.clone()}),r}};function S8e(t){let r={x:Ce(t,"x","zerosLike")};return Ae.runKernel(oS,r)}var Ht=Ke({zerosLike_:S8e});var CJ={kernelName:qK,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>Ht(r)}}};var FJ={kernelName:$K,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>Ht(r)}}};var BJ={kernelName:zK,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>or(t,Fu(Gn(hn(1),Yr(bt(r,"float32")))))}}};function E8e(t,e){let r=Ce(t,"a","add"),n=Ce(e,"b","add");[r,n]=Sn(r,n);let a={a:r,b:n};return Ae.runKernel(u0,a)}var ga=Ke({add_:E8e});var LJ={kernelName:jK,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>{let n=Fu(ga(hn(1),Yr(bt(r,"float32"))));return or(t,n)}}}};var PJ={kernelName:WK,inputsToSave:["a","b"],gradFunc:(t,e)=>{let[r,n]=e,a=pr(r.shape,n.shape);return{a:()=>{let u=ga(Yr(r),Yr(n)),l=rt(t,or(n,u)),h=Or(r.shape,a);return h.length>0&&(l=Yt(l,h)),st(l,r.shape)},b:()=>{let u=ga(Yr(r),Yr(n)),l=Cn(rt(t,or(r,u))),h=Or(n.shape,a);return h.length>0&&(l=Yt(l,h)),st(l,n.shape)}}}};var qJ={kernelName:UK,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>or(t,ga(Yr(bt(r,"float32")),1))}}};var $J={kernelName:VK,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>or(t,Gn(hn(1),Yr(bt(r,"float32"))))}}};function M8e(t,e,r,n,a="NHWC",s){let o=t[3],u=[...e,o],l=jJ(a);return JN(t,u,r,s,n,null,null,l)}function A8e(t,e,r,n,a,s,o="channelsLast"){let[u,l]=_S(e),h;if(o==="channelsLast")h=[u,l,t[3],t[3]];else if(o==="channelsFirst")h=[u,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return JN(t,h,r,n,a,s,!1,o)}function k8e(t,e,r,n,a,s,o="NDHWC"){let[u,l,h]=ZN(e),p,v;if(o==="NDHWC")v="channelsLast",p=[u,l,h,t[4],t[4]];else if(o==="NCDHW")v="channelsFirst",p=[u,l,h,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return zJ(t,p,r,n,a,!1,v,s)}function JN(t,e,r,n,a,s,o=!1,u="channelsLast"){let[l,h,p,v]=[-1,-1,-1,-1];if(u==="channelsLast")[l,h,p,v]=t;else if(u==="channelsFirst")[l,v,h,p]=t;else throw new Error(`Unknown dataFormat ${u}`);let[y,S,,A]=e,[T,I]=_S(r),[N,D]=_S(n),C=v0(y,N),L=v0(S,D),{padInfo:z,outHeight:$,outWidth:G}=I8e(a,h,p,T,I,C,L,s,u),j=o?A*v:A,K;return u==="channelsFirst"?K=[l,j,$,G]:u==="channelsLast"&&(K=[l,$,G,j]),{batchSize:l,dataFormat:u,inHeight:h,inWidth:p,inChannels:v,outHeight:$,outWidth:G,outChannels:j,padInfo:z,strideHeight:T,strideWidth:I,filterHeight:y,filterWidth:S,effectiveFilterHeight:C,effectiveFilterWidth:L,dilationHeight:N,dilationWidth:D,inShape:t,outShape:K,filterShape:e}}function zJ(t,e,r,n,a,s=!1,o="channelsLast",u){let[l,h,p,v,y]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,h,p,v,y]=t;else if(o==="channelsFirst")[l,y,h,p,v]=t;else throw new Error(`Unknown dataFormat ${o}`);let[S,A,T,,I]=e,[N,D,C]=ZN(r),[L,z,$]=ZN(n),G=v0(S,L),j=v0(A,z),K=v0(T,$),{padInfo:M,outDepth:f,outHeight:d,outWidth:g}=D8e(a,h,p,v,N,D,C,G,j,K,u),m=s?I*y:I,b;return o==="channelsFirst"?b=[l,m,f,d,g]:o==="channelsLast"&&(b=[l,f,d,g,m]),{batchSize:l,dataFormat:o,inDepth:h,inHeight:p,inWidth:v,inChannels:y,outDepth:f,outHeight:d,outWidth:g,outChannels:m,padInfo:M,strideDepth:N,strideHeight:D,strideWidth:C,filterDepth:S,filterHeight:A,filterWidth:T,effectiveFilterDepth:G,effectiveFilterHeight:j,effectiveFilterWidth:K,dilationDepth:L,dilationHeight:z,dilationWidth:$,inShape:t,outShape:b,filterShape:e}}function T8e(t,e,r,n,a){n==null&&(n=YN(t,e,r));let s=t[0],o=t[1],u=$h((s-e+2*n)/r+1,a),l=$h((o-e+2*n)/r+1,a);return[u,l]}function N8e(t,e,r,n,a,s){a==null&&(a=YN(t,e,n));let o=t[0],u=t[1],l=t[2],h=$h((o-e+2*a)/n+1,s),p=$h((u-e+2*a)/n+1,s),v=$h((l-e+2*a)/n+1,s);return[h,p,v,r]}function YN(t,e,r,n=1){let a=v0(e,n);return Math.floor((t[0]*(r-1)-r+a)/2)}function _S(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function ZN(t){return typeof t=="number"?[t,t,t]:t}function v0(t,e){return e<=1?t:t+(t-1)*(e-1)}function I8e(t,e,r,n,a,s,o,u,l){let h,p,v;if(typeof t=="number"){h={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};let S=T8e([e,r],s,n,t,u);p=S[0],v=S[1]}else if(t==="same"){p=Math.ceil(e/n),v=Math.ceil(r/a);let y=Math.max(0,(p-1)*n+s-e),S=Math.max(0,(v-1)*a+o-r),A=Math.floor(y/2),T=y-A,I=Math.floor(S/2),N=S-I;h={top:A,bottom:T,left:I,right:N,type:"SAME"}}else if(t==="valid")h={top:0,bottom:0,left:0,right:0,type:"VALID"},p=Math.ceil((e-s+1)/n),v=Math.ceil((r-o+1)/a);else if(typeof t=="object"){let y=l==="channelsLast"?t[1][0]:t[2][0],S=l==="channelsLast"?t[1][1]:t[2][1],A=l==="channelsLast"?t[2][0]:t[3][0],T=l==="channelsLast"?t[2][1]:t[3][1];h={top:y,bottom:S,left:A,right:T,type:y===0&&S===0&&A===0&&T===0?"VALID":"EXPLICIT"},p=$h((e-s+y+S)/n+1,u),v=$h((r-o+A+T)/a+1,u)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:h,outHeight:p,outWidth:v}}function D8e(t,e,r,n,a,s,o,u,l,h,p){let v,y,S,A;if(typeof t=="number"){v={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};let I=N8e([e,r,n,1],u,1,a,t,p);y=I[0],S=I[1],A=I[2]}else if(t==="same"){y=Math.ceil(e/a),S=Math.ceil(r/s),A=Math.ceil(n/o);let T=(y-1)*a+u-e,I=(S-1)*s+l-r,N=(A-1)*o+h-n,D=Math.floor(T/2),C=T-D,L=Math.floor(I/2),z=I-L,$=Math.floor(N/2),G=N-$;v={top:L,bottom:z,left:$,right:G,front:D,back:C,type:"SAME"}}else if(t==="valid")v={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},y=Math.ceil((e-u+1)/a),S=Math.ceil((r-l+1)/s),A=Math.ceil((n-h+1)/o);else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:v,outDepth:y,outHeight:S,outWidth:A}}function $h(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Af(t){let[e,r,n]=_S(t);return e===1&&r===1&&n===1}function Fy(t,e){return Af(t)||Af(e)}function jJ(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Ma(t,e,r){if(r!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${r} but got pad ${e}.`);if(typeof e=="number")Je(d0(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${r} but got pad ${e}.`);else if(typeof e=="object")e.forEach(n=>{n.forEach(a=>{Je(d0(a),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${r} but got pad ${a}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}function O8e(t,e,r,n,a,s){let o=Ce(t,"dy","avgPool3dGrad"),u=Ce(e,"input","avgPool3dGrad"),l=o,h=u,p=!1;u.rank===4&&(p=!0,l=st(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),h=st(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),Je(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),Je(h.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${h.rank}.`),Ma("avgPool3dGrad",a,s);let v={dy:l,input:h},y={filterSize:r,strides:n,pad:a,dimRoundingMode:s},S=Ae.runKernel(ZK,v,y);return p?st(S,[S.shape[1],S.shape[2],S.shape[3],S.shape[4]]):S}var UJ=Ke({avgPool3dGrad_:O8e});var VJ={kernelName:KK,inputsToSave:["x"],gradFunc:(t,e,r)=>{let[n]=e,{filterSize:a,strides:s,pad:o,dimRoundingMode:u}=r;return{x:()=>UJ(t,n,a,s,o,u)}}};function R8e(t,e,r,n,a){let s=Ce(t,"dy","avgPoolGrad"),o=Ce(e,"input","avgPoolGrad");Je(o.rank===s.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${s.rank})`);let u=o,l=s,h=!1;o.rank===3&&(h=!0,u=st(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=st(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Je(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),Je(u.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${u.rank}.`);let p={dy:l,input:u},v={filterSize:r,strides:n,pad:a},y=Ae.runKernel(HK,p,v);return h?st(y,[y.shape[1],y.shape[2],y.shape[3]]):y}var WJ=Ke({avgPoolGrad_:R8e});var GJ={kernelName:GK,inputsToSave:["x"],gradFunc:(t,e,r)=>{let[n]=e,{filterSize:a,strides:s,pad:o}=r;return{x:()=>WJ(t,n,a,s,o)}}};function C8e(t,e,r=!1,n=!1){let a=Ce(t,"a","matMul"),s=Ce(e,"b","matMul");[a,s]=Sn(a,s);let o={a,b:s},u={transposeA:r,transposeB:n};return Ae.runKernel(bx,o,u)}var kf=Ke({matMul_:C8e});var HJ={kernelName:bx,inputsToSave:["a","b"],gradFunc:(t,e,r)=>{let[n,a]=e,{transposeA:s,transposeB:o}=r;return!s&&!o?{a:()=>kf(t,a,!1,!0),b:()=>kf(n,t,!0,!1)}:!s&&o?{a:()=>kf(t,a,!1,!1),b:()=>kf(t,n,!0,!1)}:s&&!o?{a:()=>kf(a,t,!1,!0),b:()=>kf(n,t,!1,!1)}:{a:()=>kf(a,t,!0,!0),b:()=>kf(t,n,!0,!0)}}};function F8e(t,e,r){let n=Ce(t,"x","spaceToBatchND");Je(n.rank>=1+e.length,()=>`input rank ${n.rank} should be > than [blockShape] ${e.length}`),Je(r.length===e.length,()=>`paddings.shape[0] ${r.length} must be equal to [blockShape] ${e.length}`),Je(n.shape.reduce((o,u,l)=>l>0&&l<=e.length?o&&(u+r[l-1][0]+r[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${n.shape.slice(1)} with paddings ${r.toString()} must be divisible by blockShapes ${e.toString()}`);let a={x:n},s={blockShape:e,paddings:r};return Ae.runKernel(rS,a,s)}var KJ=Ke({spaceToBatchND_:F8e});var ZJ={kernelName:wx,gradFunc:(t,e,r)=>{let{blockShape:n,crops:a}=r;return{x:()=>KJ(t,n,a)}}};var JJ={kernelName:JK,gradFunc:(t,e,r)=>{let n=r,a=n.inputShape,s=n.shape,o=Array.from(s);for(let l=a.length-1;l>=0;l--)if(a[l]===s[l])o[l]=1;else if(a[l]!==1)throw new Error(`broadcastTo(): [${a}] cannot be broadcast to [${s}].`);let u=[];for(let l=0;l<o.length;l++)o[l]>1&&u.push(l);return{x:()=>Yt(t,u,!0)}}};var YJ={kernelName:f0,gradFunc:t=>({x:()=>t.clone()})};var XJ={kernelName:YK,gradFunc:t=>({x:()=>Ht(t)})};function B8e(t,e){let r=Ce(t,"a","greaterEqual","string_or_numeric"),n=Ce(e,"b","greaterEqual","string_or_numeric");[r,n]=Sn(r,n),pr(r.shape,n.shape);let a={a:r,b:n};return Ae.runKernel(Cx,a)}var y0=Ke({greaterEqual_:B8e});function L8e(t,e){let r=Ce(t,"a","lessEqual","string_or_numeric"),n=Ce(e,"b","lessEqual","string_or_numeric");[r,n]=Sn(r,n),pr(r.shape,n.shape);let a={a:r,b:n};return Ae.runKernel(SZ,a)}var b0=Ke({lessEqual_:L8e});function P8e(t,e){let r=Ce(t,"a","logicalAnd","bool"),n=Ce(e,"b","logicalAnd","bool");pr(r.shape,n.shape);let a={a:r,b:n};return Ae.runKernel(MZ,a)}var xS=Ke({logicalAnd_:P8e});function q8e(t){let r={x:Ce(t,"x","clone","string_or_numeric")};return Ae.runKernel(l0,r)}var SS=Ke({clone_:q8e});function $8e(t,e){let r=Ce(t,"broadcastTo","x"),n=r.shape;if(e.some(h=>!(h>0)||h%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${e}].`);if(e.length<r.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${r.rank}.`);if(e.length>r.rank){let h=r.shape.slice();for(;h.length<e.length;)h.unshift(1);r=st(r,h)}let a=r.shape,s=Array.from(e);for(let h=e.length-1;h>=0;h--)if(a[h]===e[h])s[h]=1;else if(r.shape[h]!==1)throw new Error(`broadcastTo(): [${n}] cannot be broadcast to [${e}].`);if(s.map((h,p)=>h>1?p:-1).filter(h=>h>=0).length===0)return SS(r);let u={x:r},l={reps:s};return Ae.runKernel(c0,u,l)}var ES=Ke({broadcastTo_:$8e});function z8e(t,e,r){let n=Ce(e,"a","where"),a=Ce(r,"b","where"),s=Ce(t,"condition","where","bool"),o=pr(pr(s.shape,n.shape),a.shape),u=ES(s,o),l=ES(n,o),h=ES(a,o),p={condition:u,t:l,e:h};return Ae.runKernel(Zx,p)}var ls=Ke({where_:z8e});var QJ={kernelName:XK,inputsToSave:["x"],gradFunc:(t,e,r)=>{let[n]=e,{clipValueMin:a,clipValueMax:s}=r;return{x:()=>ls(xS(y0(n,a),b0(n,s)),t,Ht(t))}}};var eY={kernelName:eZ,inputsToSave:["x"],gradFunc:wS.gradFunc};function j8e(t,e,r=0){let a={x:Ce(t,"x","split")},s={numOrSizeSplits:e,axis:r};return Ae.runKernel(nS,a,s)}var tY=Ke({split_:j8e});var rY={kernelName:_x,saveAllInputs:!0,gradFunc:(t,e,r)=>{let n=e.map(l=>l.shape),{axis:a}=r,s=Ua(a,e[0].shape)[0],o=n.map(l=>l[s]);return tY(t,o,s).map(l=>()=>l)}};function U8e(t,e,r,n,a,s="NHWC",o){let u=t;t.rank===3&&(u=st(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=st(e,[1,e.shape[0],e.shape[1],e.shape[2]])),Je(u.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${u.shape}.`),Je(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),Je(r.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${r}.`);let h=s==="NHWC"?u.shape[3]:u.shape[1],p=s==="NHWC"?l.shape[3]:l.shape[1];Je(h===r[2],()=>`Error in conv2dDerFilter: depth of input ${h}) must match input depth in filter (${r[2]}.`),Je(p===r[3],()=>`Error in conv2dDerFilter: depth of dy (${p}) must match output depth for filter (${r[3]}).`),Ma("conv2dDerFilter",a,o);let v={x:u,dy:l},y={strides:n,pad:a,dataFormat:s,dimRoundingMode:o,filterShape:r};return Ae.runKernel(tZ,v,y)}var MS=Ke({conv2DBackpropFilter_:U8e});function V8e(t,e,r,n,a,s="NHWC",o){Je(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let u=t,l=e,h=!1;e.rank===3&&(h=!0,l=st(e,[1,e.shape[0],e.shape[1],e.shape[2]]),u=[1,t[0],t[1],t[2]]),Je(u.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${u.length}.`),Je(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),Je(r.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${r.rank}`);let p=s==="NHWC"?u[3]:u[1],v=s==="NHWC"?l.shape[3]:l.shape[1];Je(p===r.shape[2],()=>`Error in conv2dDerInput: depth of input (${p}) must match input depth for filter ${r.shape[2]}.`),Je(v===r.shape[3],()=>`Error in conv2dDerInput: depth of output (${v}) must match output depth for filter ${r.shape[3]}.`),Ma("conv2dDerInput",a,o);let y={dy:l,filter:r},S={strides:n,pad:a,dataFormat:s,dimRoundingMode:o,inputShape:u},A=Ae.runKernel(Sx,y,S);return h?st(A,[A.shape[1],A.shape[2],A.shape[3]]):A}var nY=Ke({conv2DBackpropInput_:V8e});var iY={kernelName:xx,inputsToSave:["x","filter"],gradFunc:(t,e,r)=>{let[n,a]=e,{dilations:s,strides:o,pad:u,dataFormat:l}=r;return Je(Af(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>nY(n.shape,t,a,o,u,l),filter:()=>MS(n,t,a.shape,o,u,l)}}};function W8e(t,e,r,n,a="NHWC",s=[1,1],o){let u=Ce(t,"x","conv2d","float32"),l=Ce(e,"filter","conv2d","float32"),h=u,p=!1;u.rank===3&&(p=!0,h=st(u,[1,u.shape[0],u.shape[1],u.shape[2]])),Je(h.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${h.rank}.`),Je(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Ma("conv2d",n,o);let v=a==="NHWC"?h.shape[3]:h.shape[1];Je(v===l.shape[2],()=>`Error in conv2d: depth of input (${v}) must match input depth for filter ${l.shape[2]}.`),Je(Fy(r,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${r} and dilations '${s}'`);let y={x:h,filter:l},S={strides:r,pad:n,dataFormat:a,dilations:s,dimRoundingMode:o},A=Ae.runKernel(xx,y,S);return p?st(A,[A.shape[1],A.shape[2],A.shape[3]]):A}var aY=Ke({conv2d_:W8e});var sY={kernelName:Sx,inputsToSave:["dy","filter"],gradFunc:(t,e,r)=>{let[n,a]=e,{strides:s,pad:o,dataFormat:u,dimRoundingMode:l}=r;return{dy:()=>aY(t,a,s,o,u,1,l),filter:()=>MS(t,n,a.shape,s,o,u,l)}}};function G8e(t,e,r,n,a){let s=t;t.rank===4&&(s=st(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;o.rank===4&&(o=st(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),Je(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),Je(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),Je(r.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${r}.`),Je(s.shape[4]===r[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${r[3]}.`),Je(o.shape[4]===r[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${r[4]}).`);let u={x:s,dy:o},l={strides:n,pad:a,filterShape:r};return Ae.runKernel(nZ,u,l)}var oY=Ke({conv3DBackpropFilter_:G8e});function H8e(t,e,r,n,a){Je(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,o=e,u=!1;e.rank===4&&(u=!0,o=st(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);let l=s[4],h=o.shape[4];Je(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),Je(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),Je(r.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${r.rank}`),Je(l===r.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${r.shape[3]}.`),Je(h===r.shape[4],()=>`Error in conv3dDerInput: depth of output (${h}) must match output depth for filter ${r.shape[4]}.`);let p={dy:o,filter:r},v={pad:a,strides:n,inputShape:s},y=Ae.runKernel(iZ,p,v);return u?st(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}var uY=Ke({conv3DBackpropInput_:H8e});var fY={kernelName:rZ,inputsToSave:["x","filter"],gradFunc:(t,e,r)=>{let{dilations:n,strides:a,pad:s}=r;Je(Af(n),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${n}'`);let[o,u]=e;return{x:()=>uY(o.shape,t,u,a,s),filter:()=>oY(o,t,u.shape,a,s)}}};function K8e(t){let r={x:Ce(t,"x","sin","float32")};return Ae.runKernel(Yx,r)}var lY=Ke({sin_:K8e});var cY={kernelName:Ex,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>rt(Cn(lY(bt(r,"float32"))),t)}}};function Z8e(t){let r={x:Ce(t,"x","sinh")};return Ae.runKernel(Xx,r)}var hY=Ke({sinh_:Z8e});var dY={kernelName:Mx,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>rt(hY(bt(r,"float32")),t)}}};function XN(t,e){for(let r=0;r<t.length;++r)if(t[t.length-r-1]!==e-1-r)return!1;return!0}function pY(t,e,r){let n=t.length+e.length,a=[],s=0,o=0;for(let u=0;u<n;u++)r.indexOf(u)===-1?a.push(t[s++]):a.push(e[o++]);return a}function QN(t,e){let r=[],n=t.length;for(let s=0;s<n;s++)e.indexOf(s)===-1&&r.push(t[s]);let a=e.map(s=>t[s]);return[r,a]}function AS(t,e){let r=e.map(n=>1);return pY(t,r,e)}function J8e(t,e,r){Je(XN(e,r),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${r} input.`)}function eI(t,e){if(XN(t,e))return null;let r=[];for(let n=0;n<e;++n)t.indexOf(n)===-1&&r.push(n);return t.forEach(n=>r.push(n)),r}function By(t){return t.map((e,r)=>[r,e]).sort((e,r)=>e[1]-r[1]).map(e=>e[0])}function Y8e(t,e){let r=[];for(let n=e-t;n<e;++n)r.push(n);return r}function X8e(t,e=0,r=!1,n=!1){let s={x:Ce(t,"x","cumsum")},o={axis:e,exclusive:r,reverse:n};return Ae.runKernel(Ax,s,o)}var vY=Ke({cumsum_:X8e});function Q8e(t){sr().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}xJ(Q8e);function gY(t,e){return Ae.tidy(t,e)}function eOe(t,e){let r=Ce(t,"real","complex"),n=Ce(e,"imag","complex");iJ(r.shape,n.shape,`real and imag shapes, ${r.shape} and ${n.shape}, must match in call to tf.complex().`);let a={real:r,imag:n};return Ae.runKernel(QK,a)}var w0=Ke({complex_:eOe});function tOe(t){let r={input:Ce(t,"input","imag")};return Ae.runKernel(yZ,r)}var yY=Ke({imag_:tOe});function rOe(t){let r={input:Ce(t,"input","real")};return Ae.runKernel(UZ,r)}var bY=Ke({real_:rOe});function nOe(t,e,r){let n=Ce(t,"x","transpose");if(e==null&&(e=n.shape.map((o,u)=>u).reverse()),Je(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of perm ${e}.`),e.forEach(o=>{Je(o>=0&&o<n.rank,()=>`All entries in 'perm' must be between 0 and ${n.rank-1} but got ${e}`)}),n.rank<=1)return n.clone();let a={x:n},s={perm:e};return n.dtype==="complex64"?gY(()=>{let o=bY(n),u=yY(n);return o=Ae.runKernel(h0,{x:o},s),u=Ae.runKernel(h0,{x:u},s),r&&(u=Cn(u)),w0(o,u)}):Ae.runKernel(h0,a,s)}var Bu=Ke({transpose_:nOe});var wY={kernelName:Ax,inputsToSave:["x"],gradFunc:(t,e,r)=>{let[n]=e,{axis:a,exclusive:s,reverse:o}=r;return{x:()=>{let u=eI([a],n.rank),l=vY(t,a,s,!o);return u!=null&&(l=Bu(l,u)),l}}}};function iOe(t,e,r,n,a,s=[1,1],o){let u=t;t.rank===3&&(u=st(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=st(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let h={x:u,dy:l},p={strides:n,pad:a,dimRoundingMode:o,dilations:s,filterShape:r};return Ae.runKernel(oZ,h,p)}var _Y=Ke({depthwiseConv2dNativeBackpropFilter_:iOe});function aOe(t,e,r,n,a,s=[1,1],o){let u=e,l=!1;e.rank===3&&(l=!0,u=st(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let h={dy:u,filter:r},p={strides:n,pad:a,dimRoundingMode:o,dilations:s,inputShape:t},v=Ae.runKernel(uZ,h,p);return l?st(v,[v.shape[1],v.shape[2],v.shape[3]]):v}var xY=Ke({depthwiseConv2dNativeBackpropInput_:aOe});var SY={kernelName:sZ,inputsToSave:["x","filter"],gradFunc:(t,e,r)=>{let{dilations:n,strides:a,pad:s,dimRoundingMode:o}=r,u=n==null?[1,1]:n;Je(Af(u),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${u}'`);let[l,h]=e;return Je(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),Je(h.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${h.rank}.`),Je(l.shape[3]===h.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${h.shape[2]}.`),Je(Fy(a,u),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${a} and dilations '${u}'.`),Ma("depthwiseConv2d",s,o),{x:()=>xY(l.shape,t,h,a,s,u,o),filter:()=>_Y(l,t,h.shape,a,s,u,o)}}};var EY={kernelName:fZ,inputsToSave:["x","filter"],gradFunc:(t,e,r)=>{let[n,a]=e,s={x:n,filter:a,dy:t},o={x:n,filter:a,dy:t};return{x:()=>Ae.runKernel(lZ,s,r),filter:()=>Ae.runKernel(cZ,o,r)}}};var MY={kernelName:Tx,outputsToSave:[!0],gradFunc:(t,e)=>{let[r]=e,n={dy:t,y:r};return{x:()=>Ae.runKernel(hZ,n)}}};function sOe(t){let r={x:Ce(t,"x","exp")};return Ae.runKernel(Nx,r)}var Ul=Ke({exp_:sOe});var AY={kernelName:dZ,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e,n=rt(Ul(Cn(Yr(r))),2/Math.sqrt(Math.PI));return{x:()=>rt(t,n)}}};var kY={kernelName:Nx,outputsToSave:[!0],gradFunc:(t,e)=>{let[r]=e;return{x:()=>rt(t,r)}}};var TY={kernelName:Ix,inputsToSave:["input"],gradFunc:(t,e)=>{let[r]=e;return{input:()=>st(t,r.shape)}}};var NY={kernelName:mZ,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>rt(t,Ul(r))}}};var IY={kernelName:Dx,gradFunc:t=>({x:()=>Ht(t)})};var DY={kernelName:Ox,inputsToSave:["a","b"],gradFunc:(t,e)=>{let[r,n]=e,a=pr(r.shape,n.shape);return{a:()=>{let u=or(t,bt(n,"float32")),l=Or(r.shape,a);return l.length>0?st(Yt(u,l),r.shape):u},b:()=>{let u=rt(t,bt(r,"float32")),l=Or(n.shape,a);l.length>0&&(u=st(Yt(u,l),n.shape));let h=Yr(n);return Cn(or(u,bt(h,"float32")))}}}};function oOe(t){let r={x:Ce(t,"x","rsqrt","float32")};return Ae.runKernel(Kx,r)}var OY=Ke({rsqrt_:oOe});function uOe(t,e){let r=Ce(t,"x","tile","string_or_numeric");Je(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of reps ${e}.`);let n={x:r},a={reps:e};return Ae.runKernel(c0,n,a)}var RY=Ke({tile_:uOe});var CY={kernelName:vZ,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,r)=>{let{varianceEpsilon:n}=r,[a,s,o,u]=e,l=u==null?hn(1):u,h=Or(s.shape,a.shape),p=[];if(s.rank===1){for(let L=0;L<a.shape.length-1;++L)p.push(a.shape[L]);p.push(1)}let v=Gn(a,s),y=rt(t,l),S=OY(ga(o,hn(n))),A=rt(rt(rt(S,S),S),hn(-.5));return{x:()=>s.rank===1?st(rt(rt(t,RY(st(S,[1,1,1,s.shape[0]]),p)),l),a.shape):st(rt(rt(t,S),l),a.shape),mean:()=>{let L=rt(rt(S,hn(-1)),y);return s.rank===1&&(L=Yt(L,h)),st(L,s.shape)},variance:()=>{let L=rt(rt(A,v),y);return s.rank===1&&(L=Yt(L,h)),st(L,s.shape)},scale:()=>{let L=rt(v,S),z=rt(t,L);return s.rank===1&&(z=Yt(z,h)),st(z,s.shape)},offset:()=>{let L=t;return s.rank===1&&(L=Yt(L,h)),st(L,s.shape)}}}};function fOe(t,e,r){let n=Ce(t,"x","unsortedSegmentSum"),a=Ce(e,"segmentIds","unsortedSegmentSum","int32");Je(d0(r),()=>"numSegments must be of dtype int");let s={x:n,segmentIds:a},o={numSegments:r};return Ae.runKernel(sS,s,o)}var FY=Ke({unsortedSegmentSum_:fOe});var PY={kernelName:Rx,inputsToSave:["x","indices"],gradFunc:(t,e,r)=>{let[n,a]=e,{axis:s}=r,o=Ua(s,n.shape)[0];return{x:()=>{let l=n.shape,h=a.size,p=l.slice(0,o),v=p.length,y=l.slice(s,l.length).slice(1),S=y.length,A=BY(0,v),T=BY(v+1,v+1+S),I=LY([p,[h],y]),N=st(t,I),D=st(a,[h]),C=LY([[v],A,T]),L=Bu(N,C),z=FY(L,D,n.shape[o]),$=By(C);return z=Bu(z,$),z},indices:()=>a}}};function BY(t,e){let r=[];for(let n=t;n<e;++n)r.push(n);return r}function LY(t){let e=[];for(let r=0;r<t.length;++r)for(let n=0;n<t[r].length;++n)e.push(t[r][n]);return e}var qY={kernelName:Cx,inputsToSave:["a","b"],gradFunc:(t,e)=>{let[r,n]=e;return{a:()=>Ht(r),b:()=>Ht(n)}}};var $Y={kernelName:l0,gradFunc:t=>({x:()=>bt(t,"float32")})};var zY={kernelName:bZ,gradFunc:t=>({x:()=>Ht(t)})};var jY={kernelName:wZ,gradFunc:t=>({x:()=>Ht(t)})};var UY={kernelName:_Z,gradFunc:t=>({x:()=>Ht(t)})};function lOe(t,e){let r=Ce(t,"a","greater","string_or_numeric"),n=Ce(e,"b","greater","string_or_numeric");[r,n]=Sn(r,n),pr(r.shape,n.shape);let a={a:r,b:n};return Ae.runKernel(gZ,a)}var Lu=Ke({greater_:lOe});var VY={kernelName:Fx,inputsToSave:["x"],gradFunc:(t,e,r)=>{let[n]=e,{alpha:a}=r,s=Lu(n,0);return{x:()=>ls(s,t,rt(t,a))}}};var WY={kernelName:EZ,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>or(t,ga(r,1))}}};var GY={kernelName:Bx,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>or(t,bt(r,"float32"))}}};var HY={kernelName:kZ,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,r)=>{let[n]=e,{axis:a}=r;return{logits:()=>{let o=Ul(n);return Gn(t,rt(Yt(t,a,!0),o))}}}};function cOe(t,e,r,n=5,a=1,s=1,o=.5){let u={x:t,y:e,dy:r},l={depthRadius:n,bias:a,alpha:s,beta:o};return Ae.runKernel(NZ,u,l)}var KY=Ke({localResponseNormalizationBackprop_:cOe});var ZY={kernelName:TZ,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,r)=>{let[n,a]=e,{depthRadius:s,bias:o,alpha:u,beta:l}=r;return{x:()=>KY(n,a,t,s,o,u,l)}}};function hOe(t,e){let r=Ce(t,"a","equal","string_or_numeric"),n=Ce(e,"b","equal","string_or_numeric");[r,n]=Sn(r,n),pr(r.shape,n.shape);let a={a:r,b:n};return Ae.runKernel(pZ,a)}var JY=Ke({equal_:hOe});function kS(t,e,r,n){return e.rank<r.rank&&(e=st(e,AS(e.shape,n))),t.rank<r.rank&&(t=st(t,AS(t.shape,n))),{x:()=>rt(t,bt(JY(r,e),t.dtype))}}var tI={kernelName:IZ,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,r)=>{let n=r,{reductionIndices:a}=n,s=e[0],o=e[1],u=Ua(a,s.shape),l=kS(t,o,s,u);return{x:()=>l.x()}}};function dOe(t,e){let r=Ce(t,"a","less","string_or_numeric"),n=Ce(e,"b","less","string_or_numeric");[r,n]=Sn(r,n),pr(r.shape,n.shape);let a={a:r,b:n};return Ae.runKernel(xZ,a)}var YY=Ke({less_:dOe});var XY={kernelName:Lx,inputsToSave:["a","b"],gradFunc:(t,e)=>{let[r,n]=e;return{a:()=>rt(t,bt(y0(r,n),"float32")),b:()=>rt(t,bt(YY(r,n),"float32"))}}};function pOe(t,e,r,n,a,s,o){let u=Ce(t,"dy","maxPool3dGrad"),l=Ce(e,"input","maxPool3dGrad"),h=Ce(r,"output","maxPool3dGrad"),p=u,v=l,y=h,S=!1;l.rank===4&&(S=!0,p=st(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),v=st(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),y=st(h,[1,h.shape[0],h.shape[1],h.shape[2],h.shape[3]])),Je(p.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${p.rank}.`),Je(v.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${v.rank}.`),Je(y.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${y.rank}.`),Ma("maxPool3dGrad",s,o);let A={dy:p,input:v,output:y},T={filterSize:n,strides:a,pad:s,dimRoundingMode:o},I=Ae.runKernel(CZ,A,T);return S?st(I,[I.shape[1],I.shape[2],I.shape[3],I.shape[4]]):I}var QY=Ke({maxPool3dGrad_:pOe});var eX={kernelName:RZ,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,r)=>{let[n,a]=e,{filterSize:s,strides:o,pad:u,dimRoundingMode:l}=r;return{x:()=>QY(t,n,a,s,o,u,l)}}};function mOe(t,e,r,n,a,s,o){let u=Ce(t,"dy","maxPoolGrad"),l=Ce(e,"input","maxPoolGrad"),h=Ce(r,"output","maxPoolGrad");Je(l.rank===u.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${u.rank})`),Je(u.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${u.rank}.`),Je(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Ma("maxPoolGrad",s,o);let p={dy:u,input:l,output:h},v={filterSize:n,strides:a,pad:s,dimRoundingMode:o};return Ae.runKernel(OZ,p,v)}var tX=Ke({maxPoolGrad_:mOe});var rX={kernelName:DZ,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,r)=>{let[n,a]=e,{filterSize:s,strides:o,pad:u}=r;return{x:()=>tX(t,n,a,s,o,u)}}};function _0(t,e="float32"){if(e==="complex64"){let n=_0(t,"float32"),a=_0(t,"float32");return w0(n,a)}let r=ky(xn(t),e);return Ae.makeTensor(r,t,e)}function zh(t,e="float32"){if(e==="complex64"){let n=zh(t,"float32"),a=_0(t,"float32");return w0(n,a)}let r=lS(xn(t),e);return Ae.makeTensor(r,t,e)}var nX={kernelName:FZ,inputsToSave:["x"],gradFunc:(t,e,r)=>{let[n]=e,{axis:a}=r,s=Ua(a,n.shape),u=QN(n.shape,s)[1],l=xn(u);return{x:()=>{let p=n.shape.slice();s.forEach(S=>{p[S]=1});let v=st(t,p);return or(rt(v,zh(n.shape,"float32")),l)}}}};var iX={kernelName:BZ,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,r)=>{let n=r,{axis:a}=n,[s,o]=e,u=Ua(a,s.shape),l=kS(t,o,s,u);return{x:()=>l.x()}}};var aX={kernelName:LZ,inputsToSave:["a","b"],gradFunc:(t,e)=>{let[r,n]=e;return{a:()=>rt(t,bt(b0(r,n),"float32")),b:()=>rt(t,bt(Lu(r,n),"float32"))}}};function vOe(t,e,r){let n=Ce(t,"x","slice","string_or_numeric");if(n.rank===0)throw new Error("Slicing scalar is not possible");let a={x:n},s={begin:e,size:r};return Ae.runKernel(Jx,a,s)}var Tf=Ke({slice_:vOe});var sX={kernelName:PZ,inputsToSave:["x"],gradFunc:(t,e,r)=>{let n=e[0],{paddings:a}=r,s=a.map(o=>o[0]);return{x:()=>Tf(t,s,n.shape)}}};function gOe(t){let r={x:Ce(t,"x","floor","float32")};return Ae.runKernel(Dx,r)}var oX=Ke({floor_:gOe});var uX={kernelName:qZ,inputsToSave:["a","b"],gradFunc:(t,e)=>{let[r,n]=e,a=pr(r.shape,n.shape);return{a:()=>{let u=Or(r.shape,a);return u.length>0?st(Yt(t,u),r.shape):t},b:()=>{let u=rt(t,Cn(oX(or(r,n)))),l=Or(n.shape,a);return l.length>0?st(Yt(u,l),n.shape):u}}}};var fX={kernelName:Px,inputsToSave:["a","b"],gradFunc:(t,e)=>{let[r,n]=e,a=pr(r.shape,n.shape);return{a:()=>{let u=rt(t,bt(n,"float32")),l=Or(r.shape,a);return l.length>0?st(Yt(u,l),r.shape):u},b:()=>{let u=rt(t,bt(r,"float32")),l=Or(n.shape,a);return l.length>0?st(Yt(u,l),n.shape):u}}}};var lX={kernelName:qx,gradFunc:t=>({x:()=>Cn(t)})};var cX={kernelName:zZ,inputsToSave:["indices"],gradFunc:(t,e)=>{let r=e[0];return{indices:()=>_0(r.shape,"float32")}}};var hX={kernelName:$Z,gradFunc:t=>({x:()=>Ht(t)})};function yOe(t,e=0){let r=Ce(t,"x","unstack","string_or_numeric");Je(e>=-r.shape.length&&e<r.shape.length,()=>`Axis = ${e} is not in [-${r.shape.length}, ${r.shape.length})`);let n={value:r},a={axis:e};return Ae.runKernel(aS,n,a)}var dX=Ke({unstack_:yOe});var pX={kernelName:$x,saveAllInputs:!0,gradFunc:(t,e,r)=>{let{axis:n}=r;return dX(t,n).map(s=>()=>s)}};var rI={kernelName:zx,inputsToSave:["x"],gradFunc:(t,e,r)=>{let n=e[0],{paddings:a}=r,s=a.map(o=>o[0]);return{x:()=>Tf(t,s,n.shape)}}};function bOe(t){let r={x:Ce(t,"x","log","float32")};return Ae.runKernel(Bx,r)}var mX=Ke({log_:bOe});function wOe(t,e){let r=Ce(t,"base","pow"),n=Ce(e,"exp","pow");[r,n]=Sn(r,n);let a={a:r,b:n};return Ae.runKernel(jx,a)}var TS=Ke({pow_:wOe});var vX={kernelName:jx,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{let[r,n,a]=e,s=r,o=n,u=pr(s.shape,o.shape);return{a:()=>{let p=bt(o,"float32"),v=rt(t,rt(p,TS(s,Gn(p,hn(1))))),y=Or(s.shape,u);return y.length>0&&(v=Yt(v,y)),st(v,s.shape)},b:()=>{let p=Lu(s,0),v=ls(p,mX(s),Ht(s)),y=rt(t,rt(a,v)),S=Or(o.shape,u);return S.length>0&&(y=Yt(y,S)),st(y,o.shape)}}}};var gX={kernelName:Ux,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{let[r,n]=e,a=Lu(r,0);return{x:()=>ls(a,t,rt(t,n)),alpha:()=>{let s=ls(a,Ht(t),rt(t,r)),o=Or(n.shape,t.shape);return o.length>0&&(s=Yt(s,o)),st(s,n.shape)}}}};function yX(){return typeof window!="undefined"&&window.document!=null||typeof WorkerGlobalScope!="undefined"}var no=sr();no.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});no.registerFlag("IS_BROWSER",()=>yX());no.registerFlag("IS_NODE",()=>typeof process!="undefined"&&typeof process.versions!="undefined"&&typeof process.versions.node!="undefined");no.registerFlag("IS_CHROME",()=>typeof navigator!="undefined"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));no.registerFlag("PROD",()=>!1);no.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>no.getBool("DEBUG"));no.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);no.registerFlag("IS_TEST",()=>!1);no.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0);no.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);no.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);var nI=typeof Buffer!="undefined"&&(typeof Blob=="undefined"||typeof atob=="undefined"||typeof btoa=="undefined");function bX(t){return nI?Buffer.byteLength(t):new Blob([t]).size}function wX(t){if(nI)return Buffer.from(t).toString("base64");let e=new Uint8Array(t),r="";for(let n=0,a=e.length;n<a;n++)r+=String.fromCharCode(e[n]);return btoa(r)}function _X(t){if(nI){let n=Buffer.from(t,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}let e=atob(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;++n)r.set([e.charCodeAt(n)],n);return r.buffer}function NS(t){if(t.length===1)return t[0];let e=0;t.forEach(a=>{e+=a.byteLength});let r=new Uint8Array(e),n=0;return t.forEach(a=>{r.set(new Uint8Array(a),n),n+=a.byteLength}),r.buffer}function IS(t,e){let r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),r}async function DS(t,e){let r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){let[n,a]=await e(t.weightsManifest);r.weightSpecs=n,r.weightData=a}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),r}function Nf(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:bX(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:bX(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}var In=class{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return In.instance==null&&(In.instance=new In),In.instance}static registerSaveRouter(e){In.getInstance().saveRouters.push(e)}static registerLoadRouter(e){In.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return In.getHandlers(e,"save")}static getLoadHandlers(e,r){return In.getHandlers(e,"load",r)}static getHandlers(e,r,n){let a=[];return(r==="load"?In.getInstance().loadRouters:In.getInstance().saveRouters).forEach(o=>{let u=o(e,n);u!==null&&a.push(u)}),a}};var SOe="tensorflowjs",EOe=1,Ly="models_store",OS="model_info_store";function MOe(){if(!sr().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let t=typeof window=="undefined"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function AOe(t){let e=t.result;e.createObjectStore(Ly,{keyPath:"modelPath"}),e.createObjectStore(OS,{keyPath:"modelPath"})}var x0=class{constructor(e){if(this.indexedDB=MOe(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,r){return new Promise((n,a)=>{let s=this.indexedDB.open(SOe,EOe);s.onupgradeneeded=()=>AOe(s),s.onsuccess=()=>{let o=s.result;if(r==null){let u=o.transaction(Ly,"readonly"),h=u.objectStore(Ly).get(this.modelPath);h.onsuccess=()=>{if(h.result==null)return o.close(),a(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));n(h.result.modelArtifacts)},h.onerror=p=>(o.close(),a(h.error)),u.oncomplete=()=>o.close()}else{let u=Nf(r),l=o.transaction(OS,"readwrite"),h=l.objectStore(OS),p=h.put({modelPath:this.modelPath,modelArtifactsInfo:u}),v;p.onsuccess=()=>{v=o.transaction(Ly,"readwrite");let S=v.objectStore(Ly).put({modelPath:this.modelPath,modelArtifacts:r,modelArtifactsInfo:u});S.onsuccess=()=>n({modelArtifactsInfo:u}),S.onerror=A=>{h=l.objectStore(OS);let T=h.delete(this.modelPath);T.onsuccess=()=>(o.close(),a(S.error)),T.onerror=I=>(o.close(),a(S.error))}},p.onerror=y=>(o.close(),a(p.error)),l.oncomplete=()=>{v==null?o.close():v.oncomplete=()=>o.close()}}},s.onerror=o=>a(s.error)})}};x0.URL_SCHEME="indexeddb://";var xX=t=>sr().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(x0.URL_SCHEME)?kOe(t.slice(x0.URL_SCHEME.length)):null;In.registerSaveRouter(xX);In.registerLoadRouter(xX);function kOe(t){return new x0(t)}var Py="/",qy="tensorflowjs_models",TOe="info",NOe="model_topology",IOe="weight_specs",DOe="weight_data",OOe="model_metadata";function ROe(t){return{info:[qy,t,TOe].join(Py),topology:[qy,t,NOe].join(Py),weightSpecs:[qy,t,IOe].join(Py),weightData:[qy,t,DOe].join(Py),modelMetadata:[qy,t,OOe].join(Py)}}function COe(t){for(let e of Object.values(t))window.localStorage.removeItem(e)}var S0=class{constructor(e){if(!sr().getBool("IS_BROWSER")||typeof window=="undefined"||typeof window.localStorage=="undefined")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=ROe(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let r=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),a=Nf(e);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,wX(e.weightData));let s={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(s)),{modelArtifactsInfo:a}}catch{throw COe(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}}async load(){let e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let r={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(n==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);r.modelTopology=n;let a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(a==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);r.weightSpecs=a;let s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){let u=JSON.parse(s);r.format=u.format,r.generatedBy=u.generatedBy,r.convertedBy=u.convertedBy,u.signature!=null&&(r.signature=u.signature),u.userDefinedMetadata!=null&&(r.userDefinedMetadata=u.userDefinedMetadata),u.modelInitializer!=null&&(r.modelInitializer=u.modelInitializer),u.trainingConfig!=null&&(r.trainingConfig=u.trainingConfig)}let o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return r.weightData=_X(o),r}};S0.URL_SCHEME="localstorage://";var SX=t=>sr().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(S0.URL_SCHEME)?FOe(t.slice(S0.URL_SCHEME.length)):null;In.registerSaveRouter(SX);In.registerLoadRouter(SX);function FOe(t){return new S0(t)}var BOe="model",LOe=".json",POe=".weights.bin";function EX(t){return new Promise(e=>setTimeout(e)).then(t)}var If=class{constructor(e){if(!sr().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(If.URL_SCHEME)&&(e=e.slice(If.URL_SCHEME.length)),(e==null||e.length===0)&&(e=BOe),this.modelJsonFileName=e+LOe,this.weightDataFileName=e+POe}async save(e){if(typeof document=="undefined")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let r=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a=IS(e,n),s=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=s,await EX(()=>o.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){let u=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;u.download=this.weightDataFileName,u.href=r,await EX(()=>u.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Nf(e)}}}};If.URL_SCHEME="downloads://";var qOe=t=>sr().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(If.URL_SCHEME)?$Oe(t.slice(If.URL_SCHEME.length)):null;In.registerSaveRouter(qOe);function $Oe(t="model"){return new If(t)}function iI(t,e,r,n){o(t),r=r==null?0:r,n=n==null?1:n,u(r,n);let a=0,s=l=>(l.then(h=>{let p=r+ ++a/t.length*(n-r);return e(p),h}),l);function o(l){Je(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function u(l,h){Je(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),Je(h>=0&&h<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${h}`),Je(h>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${h}`)}return Promise.all(t.map(s))}async function MX(t,e){e==null&&(e={});let r=e.fetchFunc==null?sr().platform.fetch:e.fetchFunc,n=t.map(v=>r(v,e.requestInit,{isBinary:!0})),a=0,s=.5,u=(e.onProgress==null?await Promise.all(n):await iI(n,e.onProgress,a,s)).map(v=>v.arrayBuffer()),l=.5,h=1;return e.onProgress==null?await Promise.all(u):await iI(u,e.onProgress,l,h)}var jOe="application/octet-stream",UOe="application/json",$y=class{constructor(e,r){if(this.DEFAULT_METHOD="POST",r==null&&(r={}),this.weightPathPrefix=r.weightPathPrefix,this.onProgress=r.onProgress,this.weightUrlConverter=r.weightUrlConverter,r.fetchFunc!=null?(Je(typeof r.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=r.fetchFunc):this.fetch=sr().platform.fetch,Je(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&Je(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,r.requestInit!=null&&r.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=r.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let r=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);r.body=new FormData;let n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],a=IS(e,n);r.body.append("model.json",new Blob([JSON.stringify(a)],{type:UOe}),"model.json"),e.weightData!=null&&r.body.append("model.weights.bin",new Blob([e.weightData],{type:jOe}),"model.weights.bin");let s=await this.fetch(this.path,r);if(s.ok)return{modelArtifactsInfo:Nf(e),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)}async load(){let e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let r;try{r=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}let n=r.modelTopology,a=r.weightsManifest;if(n==null&&a==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return DS(r,s=>this.loadWeights(s))}async loadWeights(e){let r=Array.isArray(this.path)?this.path[1]:this.path,[n,a]=VOe(r),s=this.weightPathPrefix||n,o=[];for(let p of e)o.push(...p.weights);let u=[],l=[];for(let p of e)for(let v of p.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(v)):u.push(s+v+a);this.weightUrlConverter&&u.push(...await Promise.all(l));let h=await MX(u,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[o,NS(h)]}};$y.URL_SCHEME_REGEX=/^https?:\/\//;function VOe(t){let e=t.lastIndexOf("/"),r=t.lastIndexOf("?"),n=t.substring(0,e),a=r>e?t.substring(r):"";return[n+"/",a]}function aI(t){return t.match($y.URL_SCHEME_REGEX)!=null}var AX=(t,e)=>{if(typeof fetch=="undefined"&&(e==null||e.fetchFunc==null))return null;{let r=!0;if(Array.isArray(t)?r=t.every(n=>aI(n)):r=aI(t),r)return kX(t,e)}return null};In.registerSaveRouter(AX);In.registerLoadRouter(AX);function kX(t,e){return new $y(t,e)}function GOe(t,e){let r=t.shape.length,n=e.shape.length;if(r<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${r}.`);if(n<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${n}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[n-1]>r)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[n-1]} vs. ${r}`);if(xn(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);let a=e.shape,s=a[a.length-1],o=1;for(let v=0;v<a.length-1;++v)o*=a[v];let u=t.shape,l=a.slice();l.pop();let h=1;for(let v=s;v<r;++v)h*=u[v],l.push(u[v]);let p=[...$l(t.shape).map(v=>v/h),1].slice(0,s);return[l,o,h,p]}function TX(t,e,r){let n=e.rank>1?e.shape[e.rank-1]:1,a=e.rank>1?e.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${r.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${n}, and batchDim: ${a}.`;if(r.rank<a)throw new Error(s+` update.rank < ${a}. `);if(t.length<n+(r.rank-a))throw new Error(s+` Output shape length < ${n+(r.rank-a)}`);if(r.rank!==a+t.length-n)throw new Error(s+` update.rank != ${a+t.length-n}`);for(let o=0;o<a;++o)if(r.shape[o]!==e.shape[o])throw new Error(s+` updates.shape[${o}] (${r.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<r.rank-a;++o)if(r.shape[o+a]!==t[o+n])throw new Error(s+` updates.shape[${o+a}] (${r.shape[o+a]}) != shape[${o+a}] (${t[o+a]})`)}function HOe(t,e,r){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(r.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${r}`);if(r.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}TX(r,e,t)}function KOe(t,e,r){let n=e.shape.length,a=n>1?e.shape[n-1]:1,s=r.length,o=1;for(let v=a;v<s;++v)o*=r[v];let u=a<1?1:a,l=xn(e.shape)/u,h=[...$l(r.slice(0,a)),1],p=xn(r);return{sliceRank:a,numUpdates:l,sliceSize:o,strides:h,outputSize:p}}var uI={};Zf(uI,{assertParamsValid:()=>JOe,computeFlatOffset:()=>t5e,computeOutShape:()=>XOe,getNormalizedAxes:()=>QOe,isSliceContinous:()=>e5e,maskToAxes:()=>YOe,parseSliceParams:()=>oI,sliceInfo:()=>r5e,startForAxis:()=>BX,startIndicesWithElidedDims:()=>RX,stopForAxis:()=>LX,stopIndicesWithElidedDims:()=>CX,stridesForAxis:()=>FX,stridesWithElidedDims:()=>IX});var sI=-2,ZOe=-1;function JOe(t,e,r){let n=t.shape.length;Je(n===e.length,()=>`Error in slice${n}D: Length of begin ${e} must match the rank of the array (${n}).`),Je(n===r.length,()=>`Error in slice${n}D: Length of size ${r} must match the rank of the array (${n}).`);for(let a=0;a<n;++a)Je(e[a]+r[a]<=t.shape[a],()=>`Error in slice${n}D: begin[${a}] + size[${a}] (${e[a]+r[a]}) would overflow input.shape[${a}] (${t.shape[a]})`)}function YOe(t){let e=[],r=0;for(;t>0;)t&1&&e.push(r),t/=2,r++;return e}function XOe(t,e,r){let n=[];for(let a=0;a<t.length;a++)n[a]=Math.ceil((e[a]-t[a])/r[a]);return n}function IX(t,e,r,n){let a=[...t];for(let s=a.length;s<n.length;s++)a.push(1);for(let s=0;s<r;s++)s===0?a[e]=1:(a.splice(e,0,1),a.pop());return a}function DX(t,e,r){return r<=t?r:r-(e-1)}function OX(t,e){let r=[];for(let n=0;n<t;n++)r.push(e+n);return r}function QOe(t,e,r,n,a,s,o,u,l){let h=t.length,p=new Array(h),v=new Array(h),y=new Array(h);if(e.length&&r>0){let S=e[0],A=r+1;p=RX(o,S,A,n,t),v=CX(u,S,A,a,t),y=IX(s,S,A,t)}else for(let S=0;S<h;S++)p[S]=BX(o,n,s,t,S,l),v[S]=LX(u,a,s,t,S,l),y[S]=FX(s,S,l);return{begin:p,end:v,strides:y}}function RX(t,e,r,n,a){let s=[...a],o=OX(r,e);for(let u=0;u<s.length;u++)if(o.indexOf(u)>-1)s[u]=0;else{let l=DX(e,r,u),h=n[l];t&1<<l&&(h=0),s[u]=h}return s}function CX(t,e,r,n,a){let s=[...a],o=OX(r,e);for(let u=0;u<s.length;u++)if(o.indexOf(u)>-1)s[u]=Number.MAX_SAFE_INTEGER;else{let l=DX(e,r,u),h=n[l];t&1<<l&&(h=Number.MAX_SAFE_INTEGER),s[u]=h}for(let u=0;u<s.length;u++){let l=a[u];s[u]<0&&(s[u]+=l),s[u]=xy(0,s[u],a[u])}return s}function FX(t,e,r){let n=t[e];return(r&1<<e||n==null)&&(n=1),n}function BX(t,e,r,n,a,s){let o=e[a],u=r[a]||1;(t&1<<a||s&1<<a||o==null)&&(u>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);let l=n[a];return o<0&&(o+=l),o=xy(0,o,l-1),o}function LX(t,e,r,n,a,s){let o=e[a],u=r[a]||1;(t&1<<a||s&1<<a||o==null)&&(u>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);let l=n[a];return o<0&&(o+=l),u>0?o=xy(0,o,l):o=xy(-1,o,l-1),o}function e5e(t,e,r){let n=r.length;for(let a=0;a<r.length;a++)if(r[a]>1){n=a;break}for(let a=n+1;a<r.length;a++)if(e[a]>0||r[a]!==t[a])return!1;return!0}function t5e(t,e){let r=t.length>0?t[t.length-1]:1;for(let n=0;n<t.length-1;n++)r+=t[n]*e[n];return r}function oI(t,e,r){let n,a=t.shape.length;typeof e=="number"?n=[e,...new Array(a-1).fill(0)]:e.length<a?n=e.concat(new Array(a-e.length).fill(0)):n=e.slice(),n.forEach(o=>{Je(o!==-1,()=>"slice() does not support negative begin indexing.")});let s;return r==null?s=new Array(a).fill(-1):typeof r=="number"?s=[r,...new Array(a-1).fill(-1)]:r.length<a?s=r.concat(new Array(a-r.length).fill(-1)):s=r,s=s.map((o,u)=>o>=0?o:(Je(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${u}.`),t.shape[u]-n[u])),[n,s]}function r5e(t,e,r,n,a,s,o,u,l){let h;if(n==null?(h=new Array(e.length),h.fill(1)):h=n,o!=null&&(o&o-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let p=!1,v={dims:h.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:r.slice(),strides:h.slice(),beginMask:a,endMask:s,ellipsisMask:o,newAxisMask:u,shrinkAxisMask:l};for(let C=0;C<v.dims;C++)p&&(1<<C&u)!==0&&v.numAddAxisAfterEllipsis++,1<<C&o&&(p=!0);p||(v.ellipsisMask|=1<<v.dims,v.dims++);let y={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};n5e(v,y);let S=!0,A=!0,T=!0,I=[],N=[];for(let C=0;C<t.length;++C){if(y.strides[C]===0)throw Error(`strides[${C}] must be non-zero`);let L=!!(y.shrinkAxisMask&1<<C),z=t[C];if(z===-1){I.push(L?1:-1);continue}let $=[y.beginMask&1<<C,y.endMask&1<<C],G=[y.strides[C]>0?0:-1,y.strides[C]>0?z:z-1];if(L&&y.strides[C]<=0)throw Error("only stride 1 allowed on non-range indexing.");T=T&&y.strides[C]===1;let j=!!(y.beginMask&1<<C&&y.endMask&1<<C);if(y.beginValid&&y.endValid){if(L){let d=y.begin[C]<0?z+y.begin[C]:y.begin[C];if(y.begin[C]=d,y.end[C]=y.begin[C]+1,d<0||d>=z)throw Error(`slice index ${y.begin[C]} of dimension ${C} out of bounds.`)}else y.begin[C]=NX(y.begin[C],0,y.strides[C],z,$,G),y.end[C]=NX(y.end[C],1,y.strides[C],z,$,G);let f=y.strides[C]===1&&y.begin[C]===0&&y.end[C]===z;S=S&&f,A=A&&(C===0&&y.strides[C]===1||f)}else S=S&&y.strides[C]===1&&j,A=A&&(C===0&&y.strides[C]===1||j);let K,M=!1;if(y.beginValid&&y.endValid?(K=y.end[C]-y.begin[C],M=!0):L?(K=1,M=!0):j&&z>=0&&(y.strides[C]<0?K=-z:K=z,M=!0),M){let f;K===0||K<0!=y.strides[C]<0?f=0:f=Math.trunc(K/y.strides[C])+(K%y.strides[C]!==0?1:0),I.push(f)}else I.push(-1)}for(let C=0;C<y.finalShapeGatherIndices.length;++C){let L=y.finalShapeGatherIndices[C];L>=0?N.push(I[L]):L===sI&&N.push(1)}return{finalShapeSparse:N.filter((C,L)=>y.finalShapeGatherIndices[L]!==sI),finalShape:N,isIdentity:S,sliceDim0:A,isSimpleSlice:T,begin:y.begin,end:y.end,strides:y.strides}}function n5e(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let r=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let n=0;n<t.dims;n++)if(1<<n&t.ellipsisMask){let a=Math.min(e.dims-(t.dims-n)+1+t.numAddAxisAfterEllipsis,e.dims);for(;r<a;r++)e.begin[r]=0,e.end[r]=0,e.strides[r]=1,e.beginMask|=1<<r,e.endMask|=1<<r,e.finalShapeGatherIndices.push(r),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[r]=n}else if(1<<n&t.newAxisMask)e.finalShapeGatherIndices.push(sI),e.finalShapeGatherIndicesSparse.push(-1);else{if(r===e.begin.length)throw Error(`Index out of range using input dim ${r}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[r]=t.begin[n]),t.end!=null&&(e.end[r]=t.end[n]),e.strides[r]=t.strides[n],t.beginMask&1<<n&&(e.beginMask|=1<<r),t.endMask&1<<n&&(e.endMask|=1<<r),t.shrinkAxisMask&1<<n?(e.finalShapeGatherIndices.push(ZOe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<r):(e.finalShapeGatherIndices.push(r),e.finalShapeGatherIndicesSparse.push(n)),e.inputShapeGatherIndicesSparse[r]=n,r++}}function NX(t,e,r,n,a,s){if(a[e])return r>0?s[e]:s[e+1&1];{let o=t<0?n+t:t;return o<s[0]?s[0]:o>s[1]?s[1]:o}}function i5e(t,e=0){Je(t.length>=1,()=>"Pass at least one tensor to concat");let r=bS(t,"tensors","concat","string_or_numeric");if(r[0].dtype==="complex64"&&r.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),r.length===1)return SS(r[0]);let n=r,a={axis:e};return Ae.runKernel(_x,n,a)}var PX=Ke({concat_:i5e});function a5e(t){let r={x:Ce(t,"x","sigmoid","float32")};return Ae.runKernel(Qx,r)}var RS=Ke({sigmoid_:a5e});function s5e(t,e,r){let n=Ce(t,"x","batchToSpaceND"),a=e.reduce((u,l)=>u*l);Je(n.rank>=1+e.length,()=>`input rank is ${n.rank} but should be > than blockShape.length ${e.length}`),Je(r.length===e.length,()=>`crops.length is ${r.length} but should be equal to blockShape.length  ${e.length}`),Je(n.shape[0]%a===0,()=>`input tensor batch is ${n.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${a}`);let s={x:n},o={blockShape:e,crops:r};return Ae.runKernel(wx,s,o)}var qX=Ke({batchToSpaceND_:s5e});function o5e(t){let r={x:Ce(t,"x","cos","float32")};return Ae.runKernel(Ex,r)}var CS=Ke({cos_:o5e});function u5e(t){let r={x:Ce(t,"x","cosh","float32")};return Ae.runKernel(Mx,r)}var $X=Ke({cosh_:u5e});function f5e(t,e=0,r=!1,n=!1){let s={x:Ce(t,"x","cumprod")},o={axis:e,exclusive:r,reverse:n};return Ae.runKernel(aZ,s,o)}var fI=Ke({cumprod_:f5e});function l5e(t){let r={x:Ce(t,"x","elu","float32")};return Ae.runKernel(Tx,r)}var zX=Ke({elu_:l5e});function c5e(t,e=0){let r=Ce(t,"x","expandDims","string_or_numeric");Je(e<=r.rank,()=>"Axis must be <= rank of the tensor");let n={input:r},a={dim:e};return Ae.runKernel(Ix,n,a)}var jX=Ke({expandDims_:c5e});function h5e(t,e,r=0,n=0){let a=Ce(t,"x","gather"),s=Ce(e,"indices","gather","int32"),o={x:a,indices:s},u={axis:r,batchDims:n};return Ae.runKernel(Rx,o,u)}var UX=Ke({gather_:h5e});function d5e(t,e=.2){let n={x:Ce(t,"x","leakyRelu")},a={alpha:e};return Ae.runKernel(Fx,n,a)}var VX=Ke({leakyRelu_:d5e});function p5e(t){let r={x:Ce(t,"x","logicalNot","bool")};return Ae.runKernel(AZ,r)}var WX=Ke({logicalNot_:p5e});function m5e(t,e){let r=Ce(t,"a","maximum"),n=Ce(e,"b","maximum");[r,n]=Sn(r,n),r.dtype==="bool"&&(r=bt(r,"int32"),n=bt(n,"int32")),pr(r.shape,n.shape);let a={a:r,b:n};return Ae.runKernel(Lx,a)}var GX=Ke({maximum_:m5e});function v5e(t,e,r=0){let n=Ce(t,"x","pad");if(n.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let a={paddings:e,constantValue:r},s={x:n};return Ae.runKernel(zx,s,a)}var HX=Ke({pad_:v5e});function g5e(t,e){let r=Ce(t,"x","prelu"),n=Ce(e,"alpha","prelu"),a={x:r,alpha:n};return Ae.runKernel(Ux,a)}var KX=Ke({prelu_:g5e});function y5e(t){let r={x:Ce(t,"x","relu")};return Ae.runKernel(Vx,r)}var ZX=Ke({relu_:y5e});function b5e(t){let r={x:Ce(t,"x","relu6")};return Ae.runKernel(Gx,r)}var JX=Ke({relu6_:b5e});function w5e(t,e){let n={x:Ce(t,"x","reverse")},a={dims:e};return Ae.runKernel(Hx,n,a)}var YX=Ke({reverse_:w5e});function _5e(t,e=0){let r=bS(t,"tensors","stack","string_or_numeric");Je(r.length>=1,()=>"Pass at least one tensor to tf.stack"),r.length>0&&Je(e<=r[0].rank,()=>"Axis must be <= rank of the tensor");let n=r,a={axis:e};return Ae.runKernel($x,n,a)}var XX=Ke({stack_:_5e});function x5e(t,e,r){if(r==null||r==="linear")return t;if(r==="relu")return rt(t,jl(e));throw new Error(`Cannot compute gradient for fused activation ${r}.`)}function S5e(t,e){let r=e,n=Or(t.shape,e.shape);return n.length>0&&(r=Yt(r,n)),st(r,t.shape)}function E5e(t,e,r,n){if(e==="linear")return t;if(e==="relu")return ZX(t);if(e==="elu")return zX(t);if(e==="relu6")return JX(t);if(e==="prelu")return KX(t,r);if(e==="leakyrelu")return VX(t,n);if(e==="sigmoid")return RS(t);throw new Error(`Unknown fused activation ${e}.`)}var M5e=(t,e)=>!(t>0)||e==="linear";var zy={};Zf(zy,{ERF_A1:()=>B5e,ERF_A2:()=>L5e,ERF_A3:()=>P5e,ERF_A4:()=>q5e,ERF_A5:()=>$5e,ERF_P:()=>F5e,PARALLELIZE_THRESHOLD:()=>FS,SELU_SCALE:()=>cI,SELU_SCALEALPHA:()=>lI,applyActivation:()=>E5e,assertAndGetBroadcastShape:()=>pr,assertAxesAreInnerMostDims:()=>J8e,assertParamsConsistent:()=>A5e,assignToTypedArray:()=>G5e,axesAreInnerMostDims:()=>XN,calculateShapes:()=>KOe,checkEinsumDimSizes:()=>X5e,checkPadOnDimRoundingMode:()=>Ma,combineLocations:()=>pY,complexWithEvenIndex:()=>U5e,complexWithOddIndex:()=>V5e,computeConv2DInfo:()=>JN,computeConv3DInfo:()=>zJ,computeDefaultPad:()=>YN,computeDilation2DInfo:()=>M8e,computeOptimalWindowSize:()=>T5e,computeOutAndReduceShapes:()=>QN,computeOutShape:()=>k5e,computePool2DInfo:()=>A8e,computePool3DInfo:()=>k8e,convertConv2DDataFormat:()=>jJ,decodeEinsumEquation:()=>J5e,eitherStridesOrDilationsAreOne:()=>Fy,expandShapeToKeepDim:()=>AS,exponent:()=>K5e,exponents:()=>H5e,fromStringArrayToUint8:()=>bRe,fromUint8ToStringArray:()=>yRe,getAxesPermutation:()=>eI,getBroadcastDims:()=>w8e,getComplexWithIndex:()=>W5e,getEinsumComputePath:()=>Q5e,getEinsumPermutation:()=>Y5e,getFusedBiasGradient:()=>S5e,getFusedDyActivation:()=>x5e,getImageCenter:()=>N5e,getInnerMostAxes:()=>Y8e,getPermuted:()=>D5e,getReductionAxes:()=>Or,getReshaped:()=>I5e,getReshapedPermuted:()=>O5e,getSliceBeginCoords:()=>R5e,getSliceSize:()=>C5e,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>nRe,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>iRe,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>aRe,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>uRe,getSparseReshapeInputOutputMismatchErrorMessage:()=>lRe,getSparseReshapeInputOutputMultipleErrorMessage:()=>fRe,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>sRe,getSparseReshapeNegativeOutputDimErrorMessage:()=>oRe,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>pRe,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>cRe,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>hRe,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>dRe,getUndoAxesPermutation:()=>By,isIdentityPermutation:()=>eRe,log:()=>YDe,mergeRealAndImagArrays:()=>z5e,prepareAndValidate:()=>GOe,prepareSplitSize:()=>rRe,segment_util:()=>dI,shouldFuse:()=>M5e,slice_util:()=>uI,splitRealAndImagArrays:()=>j5e,tupleValuesAreOne:()=>Af,upcastType:()=>gS,validateInput:()=>HOe,validateUpdateShape:()=>TX,warn:()=>Mf});function A5e(t,e){let r=t[0].length;t.forEach((a,s)=>{Je(a.length===r,()=>`Error in concat${r}D: rank of tensors[${s}] must be the same as the rank of the rest (${r})`)}),Je(e>=0&&e<r,()=>`Error in concat${r}D: axis must be between 0 and ${r-1}.`);let n=t[0];t.forEach((a,s)=>{for(let o=0;o<r;o++)Je(o===e||a[o]===n[o],()=>`Error in concat${r}D: Shape of tensors[${s}] (${a}) does not match the shape of the rest (${n}) along the non-concatenated axis ${s}.`)})}function k5e(t,e){let r=t[0].slice();for(let n=1;n<t.length;n++)r[e]+=t[n][e];return r}var FS=30;function T5e(t){return t<=FS?t:Ay(t,Math.floor(Math.sqrt(t)))}function N5e(t,e,r){let n=r*(typeof t=="number"?t:t[0]),a=e*(typeof t=="number"?t:t[1]);return[n,a]}function I5e(t,e,r,n=!0){let a=[];if(n)a=a.concat(e.slice(0)),a.push(t[0]/r),a=a.concat(t.slice(1));else{a=a.concat(t[0]);let s=e.length;for(let o=0;o<s;++o)a=a.concat([t[o+1]/e[o],e[o]]);a=a.concat(t.slice(s+1))}return a}function D5e(t,e,r=!0){let n=[];if(r){n.push(e);for(let a=e+1;a<t;++a)a<=2*e?(n.push(a),n.push(a-(e+1))):n.push(a)}else{let a=[],s=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?s.push(o):a.push(o);n.push(...a),n.push(0),n.push(...s)}return n}function O5e(t,e,r,n=!0){let a=[];n?a.push(t[0]/r):a.push(t[0]*r);for(let s=1;s<t.length;++s)s<=e.length?n?a.push(e[s-1]*t[s]):a.push(t[s]/e[s-1]):a.push(t[s]);return a}function R5e(t,e){let r=[0];for(let n=0;n<e;++n)r.push(t[n][0]);return r}function C5e(t,e,r){let n=t.slice(0,1);for(let a=0;a<r;++a)n.push(t[a+1]-e[a][0]-e[a][1]);return n}var lI=1.7580993408473768,cI=1.0507009873554805;var F5e=.3275911,B5e=.254829592,L5e=-.284496736,P5e=1.421413741,q5e=-1.453152027,$5e=1.061405429;function z5e(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);let r=new Float32Array(t.length*2);for(let n=0;n<r.length;n+=2)r[n]=t[n/2],r[n+1]=e[n/2];return r}function j5e(t){let e=new Float32Array(t.length/2),r=new Float32Array(t.length/2);for(let n=0;n<t.length;n+=2)e[n/2]=t[n],r[n/2]=t[n+1];return{real:e,imag:r}}function U5e(t){let e=Math.ceil(t.length/4),r=new Float32Array(e),n=new Float32Array(e);for(let a=0;a<t.length;a+=4)r[Math.floor(a/4)]=t[a],n[Math.floor(a/4)]=t[a+1];return{real:r,imag:n}}function V5e(t){let e=Math.floor(t.length/4),r=new Float32Array(e),n=new Float32Array(e);for(let a=2;a<t.length;a+=4)r[Math.floor(a/4)]=t[a],n[Math.floor(a/4)]=t[a+1];return{real:r,imag:n}}function W5e(t,e){let r=t[e*2],n=t[e*2+1];return{real:r,imag:n}}function G5e(t,e,r,n){t[n*2]=e,t[n*2+1]=r}function H5e(t,e){let r=new Float32Array(t/2),n=new Float32Array(t/2);for(let a=0;a<Math.ceil(t/2);a++){let s=(e?2:-2)*Math.PI*(a/t);r[a]=Math.cos(s),n[a]=Math.sin(s)}return{real:r,imag:n}}function K5e(t,e,r){let n=(r?2:-2)*Math.PI*(t/e),a=Math.cos(n),s=Math.sin(n);return{real:a,imag:s}}var hI="->",Z5e=/->/g,QX=",",eQ="...";function J5e(t,e){t=t.replace(/\s/g,"");let r=(t.length-t.replace(Z5e,"").length)/hI.length;if(r<1)throw new Error("Equations without an arrow are not supported.");if(r>1)throw new Error(`Equation must contain exactly one arrow ("${hI}").`);let[n,a]=t.split(hI);Je(n.indexOf(eQ)===-1,()=>`The ellipsis notation ("${eQ}") is not supported yet.`);let s=n.split(QX),o=s.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let u=[];for(let y=0;y<a.length;++y){let S=a[y];if(!s.some(A=>A.indexOf(S)!==-1))throw new Error(`Output subscripts contain the label ${S} not present in the input subscripts.`);u.indexOf(S)===-1&&u.push(S)}for(let y=0;y<n.length;++y){let S=n[y];u.indexOf(S)===-1&&S!==QX&&u.push(S)}let l=new Array(s.length);for(let y=0;y<o;++y){if(new Set(s[y].split("")).size!==s[y].length)throw new Error(`Found duplicate axes in input component ${s[y]}. Support for duplicate axes in input is not implemented yet.`);l[y]=[];for(let S=0;S<s[y].length;++S)l[y].push(u.indexOf(s[y][S]))}let h=u.length,p=a.length,v=[];for(let y=p;y<h;++y)v.push(y);return{allDims:u,summedDims:v,idDims:l}}function Y5e(t,e){let r=new Array(t);r.fill(-1);for(let a=0;a<e.length;++a)r[e[a]]=a;let n=[];for(let a=0;a<t;++a)r[a]===-1&&n.push(a);return r=r.filter(a=>a!==-1),{permutationIndices:r,expandDims:n}}function X5e(t,e,r){let n=new Array(t);for(let a=0;a<r.length;++a){let s=r[a].shape;for(let o=0;o<e[a].length;++o)n[e[a][o]]===void 0?n[e[a][o]]=s[o]:Je(n[e[a][o]]===s[o],()=>`Expected dimension ${n[e[a][o]]} at axis ${o} of input shaped ${JSON.stringify(s)}, but got dimension ${s[o]}`)}}function Q5e(t,e){let r=t,n=[],a=0;t.length===0&&r.push(-1),a=t.length+1;for(let o=0;o<a;++o)n.push([]);let s=[];for(let o=0;o<r.length;++o){let u=r[o],l=tRe(e,u);for(let h of l)s.indexOf(h)===-1&&(n[o].push(h),s.push(h))}return{path:r,steps:n}}function eRe(t){return t.every((e,r)=>e===r)}function tRe(t,e){let r=[];for(let n=0;n<t.length;++n)(t[n].length===0||t[n].indexOf(e)!==-1||e===-1)&&r.push(n);return r}function rRe(t,e,r=0){let n=[];if(typeof e=="number")Je(t.shape[r]%e===0,()=>"Number of splits must evenly divide the axis."),n=new Array(e).fill(t.shape[r]/e);else{let a=e.reduce((o,u)=>(u===-1&&(o+=1),o),0);Je(a<=1,()=>"There should be only one negative value in split array.");let s=e.indexOf(-1);if(s!==-1){let o=e.reduce((u,l)=>l>0?u+l:u);e[s]=t.shape[r]-o}Je(t.shape[r]===e.reduce((o,u)=>o+u),()=>"The sum of sizes must match the size of the axis dimension."),n=e}return n}function nRe(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function iRe(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function aRe(t,e,r){return`indices(${t}, 0) is invalid: ${e} >= ${r}`}function sRe(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function oRe(t,e){return`size ${t} must be non-negative, not ${e}`}function uRe(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function fRe(t,e){let r=xn(t),n=xn(e);return`Input to reshape is a SparseTensor with ${r}
  dense values, but the requested shape requires a multiple of ${n}. inputShape=${t} outputShape= ${e}`}function lRe(t,e){let r=xn(t),n=xn(e);return`Input to reshape is a tensor with ${r} dense values, but the requested shape has ${n}. inputShape=${t} outputShape=${e}`}function cRe(){return"segment ids must be >= 0"}function hRe(){return"segment ids are not increasing"}function dRe(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function pRe(t,e,r){return`Bad: indices[${t}] == ${e} out of range [0, ${r})`}var dI={};Zf(dI,{collectGatherOpShapeInfo:()=>gRe,computeOutShape:()=>vRe,segOpComputeOptimalWindowSize:()=>mRe});function mRe(t,e){let r=!1,n;for(t<=FS?(n=t,r=!0):n=Ay(t,Math.floor(Math.sqrt(t)));!r;)n>e||n===t?r=!0:n=Ay(t,n+1);return n}function vRe(t,e,r){let n=[],a=t.length;for(let s=0;s<a;s++)s!==e?n.push(t[s]):n.push(r);return n}function gRe(t,e,r,n){let a=e.shape.length,s=t.shape.length;if(n!==0&&(n<-a||n>a))throw new Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${n}`);if(n<0&&(n+=a),n>s)throw new Error(`batchDims (${n}) must be less than rank(x) (
    ${s}).`);if(r<n)throw new Error(`batchDims (${n}) must be less than or equal to axis (${r}).`);for(let v=0;v<n;++v)if(t.shape[v]!==e.shape[v])throw new Error(`x.shape[${v}]: ${t.shape[v]} should be equal to indices.shape[${v}]: ${e.shape[v]}.`);let o=t.shape[r],u=[],l=1,h=1,p=1;for(let v=0;v<n;++v)u.push(t.shape[v]),l*=t.shape[v];for(let v=n;v<r;v++)u.push(t.shape[v]),h*=t.shape[v];for(let v=n;v<a;v++)u.push(e.shape[v]);for(let v=r+1;v<s;v++)u.push(t.shape[v]),p*=t.shape[v];return{batchSize:l,sliceSize:p,outerSize:h,dimSize:o,outputShape:u}}function yRe(t){try{return t.map(e=>Ny(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function bRe(t){return t.map(e=>pS(e))}function wRe(t,e,r){let n=t.shape.slice();n[r]=1;let a=st(e,n),s=fI(t,r,!0,!1),o=fI(t,r,!0,!0),u=rt(s,o);return rt(a,u)}function _Re(t,e,r){let n=t.shape.length,a=n-r.length,s=zy.getAxesPermutation(r,n),o=t;s!=null&&(o=Bu(t,s));let u=o.shape.slice(),h=u.splice(n-r.length,r.length).reduce((y,S)=>y*S,1);u.push(h);let p=o.reshape(u),v=wRe(p,e,a);if(v=v.reshape(o.shape),s!=null){let y=zy.getUndoAxesPermutation(s);v=Bu(v,y)}return v}var tQ={kernelName:jZ,inputsToSave:["x"],gradFunc:(t,e,r)=>{let[n]=e,{axis:a}=r,s=[];return a==null?s=n.shape.map((o,u)=>u):typeof a=="number"?s=[a]:s=a,{x:()=>_Re(n,t,s)}}};var rQ={kernelName:kx,inputsToSave:["a","b"],gradFunc:(t,e)=>{let[r,n]=e,a=pr(r.shape,n.shape);return{a:()=>{let u=or(t,bt(n,"float32")),l=Or(r.shape,a);return l.length>0?st(Yt(u,l),r.shape):u},b:()=>{let u=rt(t,bt(r,"float32")),l=Or(n.shape,a);l.length>0&&(u=st(Yt(u,l),n.shape));let h=Yr(n);return Cn(or(u,bt(h,"float32")))}}}};var nQ={kernelName:VZ,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>or(t,Cn(Yr(r)))}}};var iQ={kernelName:Gx,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e,n=rt(b0(r,6),jl(r));return{x:()=>rt(t,bt(n,"float32"))}}};var aQ={kernelName:Vx,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>rt(t,bt(jl(r),"float32"))}}};var sQ={kernelName:Wx,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>st(t,r.shape)}}};var oQ={kernelName:HZ,inputsToSave:["images"],gradFunc:(t,e,r)=>{let[n]=e,a={dy:t,images:n};return{images:()=>Ae.runKernel(KZ,a,r)}}};var uQ={kernelName:WZ,inputsToSave:["images"],gradFunc:(t,e,r)=>{let[n]=e,a={dy:t,images:n};return{images:()=>Ae.runKernel(GZ,a,r)}}};var fQ={kernelName:Hx,gradFunc:(t,e,r)=>{let{dims:n}=r,a=Ua(n,t.shape);return{x:()=>YX(t,a)}}};var lQ={kernelName:ZZ,gradFunc:t=>({x:()=>Ht(t)})};var cQ={kernelName:Kx,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>Cn(or(t,rt(TS(r,1.5),2)))}}};var hQ={kernelName:Zx,inputsToSave:["condition"],gradFunc:(t,e)=>{let[r]=e;return{condition:()=>bt(Ht(r),"float32"),t:()=>rt(t,bt(r,t.dtype)),e:()=>rt(t,bt(WX(r),t.dtype))}}};var dQ={kernelName:JZ,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>{let n=Lu(r,hn(0)),a=hn(lI),s=hn(cI),o=rt(t,s),u=rt(rt(t,a),Ul(bt(r,"float32")));return ls(n,o,u)}}}};var pQ={kernelName:Qx,outputsToSave:[!0],gradFunc:(t,e)=>{let[r]=e;return{x:()=>rt(t,rt(r,Gn(hn(1),r)))}}};var mQ={kernelName:YZ,gradFunc:t=>({x:()=>Ht(t)})};var vQ={kernelName:Yx,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>rt(CS(bt(r,"float32")),t)}}};var gQ={kernelName:Xx,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>rt($X(bt(r,"float32")),t)}}};var yQ={kernelName:Jx,inputsToSave:["x"],gradFunc:(t,e,r)=>{let[n]=e,{begin:a,size:s}=r,o=n.shape,[u,l]=oI(n,a,s),h=[];for(let p=0;p<t.rank;p++)h.push([u[p],o[p]-u[p]-l[p]]);return{x:()=>HX(t,h)}}};var bQ={kernelName:QZ,outputsToSave:[!0],gradFunc:(t,e,r)=>{let[n]=e,{dim:a}=r,s=!0,o=rt(t,n);return{logits:()=>Gn(o,rt(Yt(o,[a],s),n))}}};var wQ={kernelName:XZ,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>rt(t,RS(r))}}};var pI={kernelName:rS,gradFunc:(t,e,r)=>{let{blockShape:n,paddings:a}=r;return{x:()=>qX(t,n,a)}}};var mI={kernelName:nS,gradFunc:(t,e,r)=>{let{axis:n}=r;return{x:()=>PX(t,n)}}};var _Q={kernelName:eS,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>or(t,rt(Fu(bt(r,"float32")),2))}}};var xQ={kernelName:tJ,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>rt(t,rt(bt(r,"float32"),2))}}};var SQ={kernelName:eJ,inputsToSave:["a","b"],gradFunc:(t,e)=>{let[r,n]=e,a=hn(2);return{a:()=>rt(t,rt(a,Gn(r,n))),b:()=>rt(t,rt(a,Gn(n,r)))}}};var EQ={kernelName:uS,gradFunc:t=>({x:()=>Ht(t)})};var MQ={kernelName:iS,inputsToSave:["a","b"],gradFunc:(t,e)=>{let[r,n]=e,a=pr(r.shape,n.shape);return{a:()=>{let u=t,l=Or(r.shape,a);return l.length>0&&(u=Yt(u,l)),st(u,r.shape)},b:()=>{let u=t,l=Or(n.shape,a);return l.length>0&&(u=Yt(u,l)),st(Cn(u),n.shape)}}}};var AQ={kernelName:tS,inputsToSave:["x"],gradFunc:(t,e,r)=>{let[n]=e,a=n.shape.slice(),{axis:s}=r;Ua(s,n.shape).forEach(h=>{a[h]=1});let u=st(t,a),l=rt(u,zh(n.shape,"float32"));return{x:()=>l}}};var kQ={kernelName:rJ,inputsToSave:["x"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>or(t,Yr(CS(r)))}}};var TQ={kernelName:nJ,outputsToSave:[!0],gradFunc:(t,e)=>{let[r]=e;return{x:()=>rt(Gn(hn(1),Yr(r)),t)}}};var NQ={kernelName:c0,inputsToSave:["x"],gradFunc:(t,e,r)=>{let[n]=e,{reps:a}=r;return{x:()=>{let o=Ht(n);if(n.rank===1)for(let u=0;u<a[0];++u)o=ga(o,Tf(t,[u*n.shape[0]],[n.shape[0]]));else if(n.rank===2)for(let u=0;u<a[0];++u)for(let l=0;l<a[1];++l)o=ga(o,Tf(t,[u*n.shape[0],l*n.shape[1]],[n.shape[0],n.shape[1]]));else if(n.rank===3)for(let u=0;u<a[0];++u)for(let l=0;l<a[1];++l)for(let h=0;h<a[2];++h)o=ga(o,Tf(t,[u*n.shape[0],l*n.shape[1],h*n.shape[2]],[n.shape[0],n.shape[1],n.shape[2]]));else if(n.rank===4)for(let u=0;u<a[0];++u)for(let l=0;l<a[1];++l)for(let h=0;h<a[2];++h)for(let p=0;p<a[3];++p)o=ga(o,Tf(t,[u*n.shape[0],l*n.shape[1],h*n.shape[2],p*n.shape[3]],[n.shape[0],n.shape[1],n.shape[2],n.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${n.rank} tensors yet.`);return o}}}};var IQ={kernelName:h0,gradFunc:(t,e,r)=>{let n=r,{perm:a}=n,s=By(a);return{x:()=>Bu(t,s)}}};var DQ={kernelName:aS,gradFunc:(t,e,r)=>{let n=r,{axis:a}=n;return{value:()=>XX(t,a)}}};var OQ={kernelName:sS,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{let[r]=e;return{x:()=>xRe(t,r)}}};function xRe(t,e){let r=GX(e,Ht(e)),n=UX(t,r),a=y0(e,hn(0,"int32")),s=n.rank-a.rank;for(let u=0;u<s;++u)a=jX(a,u+1);a=xS(a,zh(n.shape,"bool"));let o=Ht(n);return ls(a,n,o)}var RQ={kernelName:oS,gradFunc:t=>({x:()=>Ht(t)})};var SRe=[wS,IJ,DJ,OJ,RJ,CJ,FJ,BJ,LJ,PJ,qJ,$J,VJ,GJ,HJ,ZJ,JJ,YJ,XJ,QJ,eY,rY,sY,iY,fY,cY,dY,wY,SY,EY,rQ,MY,AY,kY,TY,NY,DY,IY,CY,PY,qY,$Y,zY,jY,UY,VY,WY,GY,HY,ZY,tI,tI,XY,eX,rX,nX,iX,aX,sX,uX,fX,lX,cX,hX,pX,rI,rI,vX,gX,tQ,nQ,iQ,aQ,sQ,oQ,uQ,fQ,lQ,cQ,hQ,dQ,pQ,mQ,vQ,gQ,yQ,bQ,wQ,pI,pI,mI,mI,_Q,SQ,xQ,EQ,MQ,AQ,kQ,TQ,NQ,IQ,DQ,OQ,RQ];for(let t of SRe)mJ(t);var Fn=ut(Mt()),io=ut(Mt());function vI(t,e){return(0,io.tidy)(()=>Fn.sqrt(Fn.sum(Fn.mul(t,t),e,!0)))}var jh=class extends io.serialization.Serializable{getConfig(){return{}}},jy=class extends jh{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return(0,io.tidy)(()=>{let r=vI(e,this.axis),n=Fn.clipByValue(r,0,this.maxValue);return Fn.mul(e,Fn.div(n,Fn.add(Wn(),r)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}};jy.className="MaxNorm";io.serialization.registerClass(jy);var Uy=class extends jh{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return(0,io.tidy)(()=>Fn.div(e,Fn.add(Wn(),vI(e,this.axis))))}getConfig(){return{axis:this.axis}}};Uy.className="UnitNorm";io.serialization.registerClass(Uy);var Vy=class extends jh{apply(e){return Fn.relu(e)}};Vy.className="NonNeg";io.serialization.registerClass(Vy);var Wy=class extends jh{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return(0,io.tidy)(()=>{let r=vI(e,this.axis),n=Fn.add(Fn.mul(this.rate,Fn.clipByValue(r,this.minValue,this.maxValue)),Fn.mul(1-this.rate,r));return Fn.mul(e,Fn.div(n,Fn.add(Wn(),r)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}};Wy.className="MinMaxNorm";io.serialization.registerClass(Wy);var CQ={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function dn(t){return Kp(t)}function FQ(t,e={}){return Ou(t,io.serialization.SerializationMap.getMap().classNameMap,e,"constraint")}function pn(t){if(t==null)return null;if(typeof t=="string"){let r={className:t in CQ?CQ[t]:t,config:{}};return FQ(r)}else return t instanceof jh?t:FQ(t)}var AE={};Zf(AE,{Layer:()=>Nt,RNN:()=>Ta,RNNCell:()=>Ff,activation:()=>FCe,add:()=>VCe,alphaDropout:()=>kFe,average:()=>WCe,averagePooling1d:()=>II,averagePooling2d:()=>DI,averagePooling3d:()=>OI,avgPool1d:()=>eFe,avgPool2d:()=>rFe,avgPool3d:()=>iFe,avgPooling1d:()=>tFe,avgPooling2d:()=>nFe,avgPooling3d:()=>aFe,batchNormalization:()=>YCe,bidirectional:()=>bFe,concatenate:()=>GCe,conv1d:()=>ACe,conv2d:()=>kCe,conv2dTranspose:()=>TCe,conv3d:()=>NCe,conv3dTranspose:()=>ICe,convLstm2d:()=>mFe,convLstm2dCell:()=>vFe,cropping2D:()=>OCe,dense:()=>BCe,depthwiseConv2d:()=>CCe,dot:()=>JCe,dropout:()=>LCe,elu:()=>wCe,embedding:()=>UCe,flatten:()=>qCe,gaussianDropout:()=>AFe,gaussianNoise:()=>MFe,globalAveragePooling1d:()=>sFe,globalAveragePooling2d:()=>oFe,globalMaxPool1d:()=>_Fe,globalMaxPool2d:()=>xFe,globalMaxPooling1d:()=>fee,globalMaxPooling2d:()=>lee,gru:()=>fFe,gruCell:()=>lFe,input:()=>MI,inputLayer:()=>bCe,layerNormalization:()=>XCe,leakyReLU:()=>xCe,lstm:()=>cFe,lstmCell:()=>hFe,masking:()=>TFe,maxPool1d:()=>SFe,maxPool2d:()=>EFe,maxPooling1d:()=>cee,maxPooling2d:()=>hee,maxPooling3d:()=>uFe,maximum:()=>HCe,minimum:()=>KCe,multiply:()=>ZCe,permute:()=>jCe,prelu:()=>SCe,reLU:()=>_Ce,repeatVector:()=>$Ce,reshape:()=>zCe,rnn:()=>gFe,separableConv2d:()=>DCe,simpleRNN:()=>dFe,simpleRNNCell:()=>pFe,softmax:()=>ECe,spatialDropout1d:()=>PCe,stackedRNNCells:()=>yFe,thresholdedReLU:()=>MCe,timeDistributed:()=>wFe,upSampling2d:()=>RCe,zeroPadding2d:()=>QCe});var Li=ut(Mt());var BQ=ut(Mt());async function Df(t){if(t==null)return;let e=[],r=[],n=[];for(let a in t){let s=t[a];if(typeof s!="number"){let o=s;e.push(o.data()),r.push(a),n.push(o)}}if(e.length>0){let a=await Promise.all(e);for(let s=0;s<a.length;++s)t[r[s]]=a[s][0];(0,BQ.dispose)(n)}}function BS(t){if(t!=null)for(let e in t){let r=t[e];typeof r!="number"&&r.dispose()}}var LQ;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(LQ||(LQ={}));var ARe=125,Vl=class{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,r){}async onEpochEnd(e,r){}async onBatchBegin(e,r){}async onBatchEnd(e,r){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}},LS=class{constructor(e,r=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=r}append(e){this.callbacks.push(e)}setParams(e){for(let r of this.callbacks)r.setParams(e)}setModel(e){for(let r of this.callbacks)r.setModel(e)}async onEpochBegin(e,r){r==null&&(r={});for(let n of this.callbacks)await n.onEpochBegin(e,r)}async onEpochEnd(e,r){r==null&&(r={});for(let n of this.callbacks)await n.onEpochEnd(e,r)}async onBatchBegin(e,r){r==null&&(r={});for(let n of this.callbacks)await n.onBatchBegin(e,r)}async onBatchEnd(e,r){r==null&&(r={});for(let n of this.callbacks)await n.onBatchEnd(e,r)}async onTrainBegin(e){e==null&&(e={});for(let r of this.callbacks)await r.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(let r of this.callbacks)await r.onTrainEnd(e)}},gI=class extends Vl{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,r){r==null&&(r={});let n=r.size==null?0:r.size;this.seen+=n;for(let a in r){let s=r[a];if(typeof s=="number")this.totals.hasOwnProperty(a)||(this.totals[a]=0),this.totals[a]=this.totals[a]+s*n;else{let o;a in this.totals?o=this.totals[a]:this.totals[a]=0;let u=(0,Li.tidy)(()=>(0,Li.add)(this.totals[a],(0,Li.mul)(s,n)));this.totals[a]=u,o!=null&&o.dispose()}}}async onEpochEnd(e,r){if(r!=null)for(let n of this.params.metrics)this.totals[n]!=null&&(typeof this.totals[n]=="number"?r[n]=this.totals[n]/this.seen:(0,Li.tidy)(()=>{let a=(0,Li.mul)((0,Li.div)(1,this.seen),this.totals[n]);r[n]=a,this.totals[n].dispose(),(0,Li.keep)(r[n])}))}},PS=class extends Vl{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,r){r==null&&(r={}),this.epoch.push(e);for(let n in r)this.history[n]==null&&(this.history[n]=[]),this.history[n].push(r[n])}async syncData(){let e=[],r=[],n=[];for(let s in this.history){let o=this.history[s];for(let u=0;u<o.length;++u)if(typeof o[u]!="number"){let l=o[u];e.push(l.data()),r.push(s),n.push(u)}}let a=await Promise.all(e);for(let s=0;s<a.length;++s)this.history[r[s]][n[s]].dispose(),this.history[r[s]][n[s]]=a[s][0]}},qS=class extends Vl{constructor(e,r){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||Li.nextFrame,this.yieldEvery=r||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=ARe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");Li.util.isNumber(this.yieldEvery)&&(this.maybeWait=uK(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,r,n){let a=[];this.yield!=null&&(await Df(n),a.push(this.yield(e,r,n))),a.push(this.nextFrameFunc()),await Promise.all(a)}async onEpochBegin(e,r){this.currentEpoch=e,this.epochBegin!=null&&(await Df(r),await this.epochBegin(e,r))}async onEpochEnd(e,r){let n=[];this.epochEnd!=null&&(await Df(r),n.push(this.epochEnd(e,r))),this.yieldEvery==="epoch"&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,r){this.batchBegin!=null&&(await Df(r),await this.batchBegin(e,r))}async onBatchEnd(e,r){let n=[];this.batchEnd!=null&&(await Df(r),n.push(this.batchEnd(e,r))),this.yieldEvery==="batch"?n.push(this.nextFrameFunc()):Li.util.isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,r)),await Promise.all(n)}async onTrainBegin(e){this.trainBegin!=null&&(await Df(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Df(e),await this.trainEnd(e))}};function $S(t,e){return t==null&&(t={}),t instanceof Vl?[t]:Array.isArray(t)&&t[0]instanceof Vl?t:Er(t).map(n=>new qS(n,e))}var Aa=class{constructor(){}static registerCallbackConstructor(e,r){Li.util.assert(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),Aa.checkForDuplicate(r),Aa.constructors[e]==null&&(Aa.constructors[e]=[]),Aa.constructors[e].push(r)}static checkForDuplicate(e){for(let r in Aa.constructors)Aa.constructors[+r].forEach(a=>{if(a===e)throw new ce("Duplicate callback constructor.")})}static clear(){Aa.constructors={}}static createCallbacks(e){let r=[];for(let n in Aa.constructors){let a=+n;e>=a&&r.push(...Aa.constructors[a])}return r.map(n=>new n)}};Aa.constructors={};function zS(t,e,r,n,a,s,o,u,l){let h=new PS,p=[new gI,...Aa.createCallbacks(e)];t!=null&&p.push(...t),p.push(h);let v=new LS(p);return v.setParams({epochs:r,initialEpoch:n,samples:a,steps:s,batchSize:o,verbose:e,doValidation:u,metrics:l}),{callbackList:v,history:h}}var Xr=ut(Mt()),Ei=ut(Mt());var PQ=ut(Mt());function Va(t,e={},r=!1){return Ou(t,PQ.serialization.SerializationMap.getMap().classNameMap,e,"layer",r)}var et=ut(Mt()),Si=ut(Mt());function Gy(t,e){return(0,Si.tidy)(()=>{t.dtype!=="float32"&&(t=et.cast(t,"float32"));let r=et.sum(Fh(t),e,!0),n=et.fill(r.shape,Wn()),a=et.sqrt(et.maximum(r,n));return et.div(t,a)})}function Uh(t,e){return(0,Si.tidy)(()=>et.mean(Fh(et.sub(e,t)),-1))}function Ky(t,e){return(0,Si.tidy)(()=>et.mean(et.abs(et.sub(e,t)),-1))}function Zy(t,e){return(0,Si.tidy)(()=>{let r=et.sub(t,e),n=et.clipByValue(et.abs(t),Wn(),Number.MAX_VALUE),a=et.abs(et.div(r,n));return et.mul(100,et.mean(a,-1))})}function kRe(t,e){return(0,Si.tidy)(()=>{let r=et.clipByValue(e,Wn(),Number.MAX_VALUE),n=et.log(et.add(1,r)),a=et.clipByValue(t,Wn(),Number.MAX_VALUE),s=et.log(et.add(1,a));return et.mean(Fh(et.sub(n,s)),-1)})}function TRe(t,e){return(0,Si.tidy)(()=>{let r=et.maximum(0,et.sub(1,et.mul(t,e)));return et.mean(Fh(r),-1)})}function NRe(t,e){return(0,Si.tidy)(()=>{let r=et.maximum(0,et.sub(1,et.mul(t,e)));return et.mean(r,-1)})}function IRe(t,e){return(0,Si.tidy)(()=>{let r=et.sum(et.mul(t,e),-1),n=et.max(et.mul(et.sub(1,t),e),-1);return et.maximum(0,et.add(1,et.sub(n,r)))})}function DRe(t,e){return(0,Si.tidy)(()=>{let r=Math.log(2),n=et.sub(e,t),a=et.sub(et.add(n,et.softplus(et.mul(-2,n))),r);return et.mean(a,-1)})}function Vh(t,e,r=!1){return(0,Si.tidy)(()=>{if(r)e=et.softmax(e);else{let n=et.sum(e,e.shape.length-1,!0);e=et.div(e,n)}return e=et.clipByValue(e,Wn(),1-Wn()),et.neg(et.sum(et.mul(et.cast(t,"float32"),et.log(e)),e.shape.length-1))})}function E0(t,e,r=!1){return(0,Si.tidy)(()=>{let n=et.cast(et.floor(wK(t)),"int32");e=et.clipByValue(e,Wn(),1-Wn());let a=e.shape,s=et.reshape(et.oneHot(n,a[a.length-1]),a);return Vh(s,e,r)})}function ORe(t,e){if(!Si.util.arraysEqual(t.shape,e.shape))throw new ce(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return(0,Si.tidy)(()=>{let r=et.relu(e),n=et.neg(et.abs(e));return et.add(et.sub(r,et.mul(e,t)),et.log1p(et.exp(n)))})}function M0(t,e){return(0,Si.tidy)(()=>{let r;return r=et.clipByValue(e,Wn(),1-Wn()),r=et.log(et.div(r,et.sub(1,r))),et.mean(ORe(t,r),-1)})}function RRe(t,e){return(0,Si.tidy)(()=>{let r=et.clipByValue(t,Wn(),1),n=et.clipByValue(e,Wn(),1);return et.sum(et.mul(t,et.log(et.div(r,n))),-1)})}function CRe(t,e){return(0,Si.tidy)(()=>{let r=et.log(et.add(Wn(),e));return et.mean(et.sub(e,et.mul(t,r)),-1)})}function jS(t,e){return(0,Si.tidy)(()=>{let r=Gy(t,-1),n=Gy(e,-1),a=et.mul(r,n);return et.neg(et.sum(a,-1))})}var Hy={meanSquaredError:Uh,meanAbsoluteError:Ky,meanAbsolutePercentageError:Zy,meanSquaredLogarithmicError:kRe,squaredHinge:TRe,hinge:NRe,categoricalHinge:IRe,logcosh:DRe,categoricalCrossentropy:Vh,sparseCategoricalCrossentropy:E0,binaryCrossentropy:M0,kullbackLeiblerDivergence:RRe,poisson:CRe,cosineProximity:jS};function US(t){if(typeof t=="string"){if(t in Hy)return Hy[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ce(e)}else return t}var zt=ut(Mt()),A0=ut(Mt());function WS(t,e){return(0,A0.tidy)(()=>{let r=zt.mul(.5,zt.onesLike(e)),n=Ch(zt.greater(e,r),t.dtype);return zt.mean(zt.equal(t,n),-1)})}function GS(t,e){return(0,A0.tidy)(()=>Ch(zt.equal(zt.argMax(t,-1),zt.argMax(e,-1)),"float32"))}function FRe(t,e){return(0,A0.tidy)(()=>zt.cast(zt.sum(zt.logicalAnd(zt.equal(t,1),zt.equal(e,1))),"float32"))}function BRe(t,e){return(0,A0.tidy)(()=>zt.cast(zt.sum(zt.logicalAnd(zt.equal(t,0),zt.equal(e,1))),"float32"))}function $Q(t,e){return(0,A0.tidy)(()=>{let r=FRe(t,e),n=BRe(t,e),a=zt.add(r,n);return zt.cast(zt.where(zt.greater(a,0),zt.div(r,a),0),"float32")})}function yI(t,e){return M0(t,e)}function bI(t,e){return t.rank===e.rank&&(t=zt.squeeze(t,[t.rank-1])),e=zt.argMax(e,-1),e.dtype!==t.dtype&&(e=zt.cast(e,t.dtype)),zt.cast(zt.equal(t,e),"float32")}var LRe=Uh,PRe=Uh,qRe=Ky,$Re=Ky,zRe=Zy,jRe=Zy,HS=Vh,URe=jS,wI=E0,VS={binaryAccuracy:WS,categoricalAccuracy:GS,precision:$Q,categoricalCrossentropy:HS,sparseCategoricalCrossentropy:wI,mse:LRe,MSE:PRe,mae:qRe,MAE:$Re,mape:zRe,MAPE:jRe,cosine:URe};function zQ(t){if(typeof t=="string"&&t in VS)return VS[t];if(typeof t!="string"&&t!=null)return t;throw new ce(`Unknown metric ${t}`)}function Jy(t){if(os(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(let r of Object.keys(Hy))if(Hy[r]===t){e=r;break}if(e!==void 0)return e;for(let r of Object.keys(VS))if(VS[r]===t){e=r;break}return e!==void 0?e:t.name}}var Wh=ut(Mt());function UQ(t){let e={Adagrad:()=>Wh.train.adagrad(.01),Adadelta:()=>Wh.train.adadelta(1,.95,Wn()),Adam:()=>Wh.train.adam(.001,.9,.999,Wn()),Adamax:()=>Wh.train.adamax(.002,.9,.999,Wn(),0),RMSProp:()=>Wh.train.rmsprop(.001,.9,0,Wn()),SGD:()=>Wh.train.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new ce(`Unknown Optimizer ${t}`)}function xI(t,e,r=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!_I(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(r){let n=JSON.stringify(t);n.length>1048576&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${1048576}.`)}}function _I(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){let e=Object.keys(t);for(let r of e)if(typeof r!="string"||!_I(t[r]))return!1;return!0}else if(Array.isArray(t)){for(let e of t)if(!_I(e))return!1;return!0}else return!1;else{let e=typeof t;return e==="string"||e==="number"||e==="boolean"}}function VQ(t,e,r,n=console.log){let a=GRe(t),s=["Layer (type)","Input Shape","Output shape","Param #"];a?(e=e||90,r=r||[.32,.61,.89,1]):(e=e||115,r=r||[.24,.48,.7,.8,1]),r[r.length-1]<=1&&(r=r.map(p=>Math.floor(e*p)));let o;if(!a){s.push("Receives inputs"),o=[];for(let p in t.nodesByDepth)o.push(...t.nodesByDepth[p])}n("_".repeat(e)),KS(s,r,n),n("=".repeat(e));let u=t.layers;for(let p=0;p<u.length;++p)a?HRe(u[p],r,n):KRe(u[p],r,o,n),n((p===u.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();let l=WRe(t),h=a0(t.nonTrainableWeights);n(`Total params: ${l+h}`),n(`Trainable params: ${l}`),n(`Non-trainable params: ${h}`),n("_".repeat(e))}function WRe(t){let e;return t.collectedTrainableWeights!=null?e=a0(t.collectedTrainableWeights):e=a0(t.trainableWeights),e}function GRe(t){let e=!0,r=[],n=[];for(let a in t.nodesByDepth)r.push(t.nodesByDepth[a]);for(let a of r){if(a.length>1||a.length===1&&a[0].inboundLayers.length>1){e=!1;break}n.push(...a)}if(e)for(let a of t.layers){let s=!1;for(let o of a.inboundNodes)if(n.indexOf(o)!==-1)if(s){e=!1;break}else s=!0;if(!e)break}return e}function KS(t,e,r=console.log){let n="";for(let a=0;a<t.length;++a)a>0&&(n=n.slice(0,n.length-1)+" "),n+=t[a],n=n.slice(0,e[a]),n+=" ".repeat(e[a]-n.length);r(n)}function HRe(t,e,r){let n,a;try{a=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{a="multiple"}try{n=JSON.stringify(t.outputShape)}catch{n="multiple"}let s=t.name,o=t.getClassName(),u=[`${s} (${o})`,a,n,t.countParams().toString()];KS(u,e,r)}function KRe(t,e,r,n){let a,s;try{s=t.inboundNodes.map(v=>JSON.stringify(v.inputShapes)).join(",")}catch{s="multiple"}try{a=JSON.stringify(t.outputShape)}catch{a="multiple"}let o=[];for(let v of t.inboundNodes)if(!(r!=null&&r.length>0&&r.indexOf(v)===-1))for(let y=0;y<v.inboundLayers.length;++y){let S=v.inboundLayers[y].name,A=v.nodeIndices[y],T=v.tensorIndices[y];o.push(`${S}[${A}][${T}]`)}let u=t.name,l=t.getClassName(),h=o.length===0?"":o[0],p=[`${u} (${l})`,s,a,t.countParams().toString(),h];KS(p,e,n);for(let v=1;v<o.length;++v)KS(["","","","",o[v]],e,n)}function WQ(t,e,r){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof r=="string"}function Yy(t,e){if(t===null)return null;if(typeof t=="string")return wf(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){let r=[],n=t.length;for(let a=0;a<n;++a){let s=t[a];WQ(e,a,s)?r.push(s):r.push(Yy(s,e))}return r}else{let r={};for(let n of Object.keys(t)){let a=t[n];if(n==="name"&&typeof a=="string")r[n]=a;else{let s=wf(n);r[s]=Yy(a,s)}}return r}}function ZS(t,e){if(t==null)return null;if(typeof t=="string")return Ys(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){let r=[],n=t.length;for(let a=0;a<n;++a){let s=t[a];WQ(e,a,s)?r.push(s):r.push(ZS(s,e))}return r}else{let r={};for(let n of Object.keys(t)){let a=t[n],s=Ys(n);(n==="name"||n==="className")&&typeof a=="string"?r[s]=a:r[s]=ZS(a,n)}return r}}var Xy="3.19.0";var Qy=ut(Mt());var Wa=class extends Nt{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){let D=this.getClassName().toLowerCase();this.name=Pl(D)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Xs(this.inputs).length!==this.inputs.length)throw new ce(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(D=>D.name)}`);Xs(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(D=>D.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(let D of this.outputs){let C=D.sourceLayer,L=D.nodeIndex,z=D.tensorIndex;this.outputLayers.push(C),this.outputLayersNodeIndices.push(L),this.outputLayersTensorIndices.push(z)}for(let D of this.inputs){let C=D.sourceLayer,L=D.nodeIndex,z=D.tensorIndex;os(L===0,"input layer has >1 nodes"),os(z===0,"input layer has >1 tensors"),this.inputLayers.push(C),this.inputLayersNodeIndices.push(L),this.inputLayersTensorIndices.push(z)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let D=0;D<this.inputLayers.length;D++){let C=this.inputLayers[D];if(!(C instanceof Wo))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${D} (0-based) originates from layer type ${C.getClassName()}.`);this.inputNames.push(C.name),this.feedInputShapes.push(C.batchInputShape),this.feedInputNames.push(C.name)}for(let D of this.outputLayers)this.outputNames.push(D.name);this.internalInputShapes=this.inputs.map(D=>D.shape),this.internalOutputShapes=this.outputs.map(D=>D.shape);let r={},n={},a={},s={},o={},u=[],l=(D,C,L,z,$,G)=>{(z==null||$==null||G==null)&&(z=D.sourceLayer,$=D.nodeIndex,G=D.tensorIndex);let j=z.inboundNodes[$];if(L.indexOf(j)!==-1)throw new Fi(`The tensor ${D.name} at layer "${z.name}" is part of a cycle.`);if(C.indexOf(j)!==-1)return;this.containerNodes.add(Wa.nodeKey(z,$)),z.id in o||(o[z.id]=Object.keys(o).length),L.indexOf(j)===-1&&L.push(j);let K=j.inboundLayers.length;for(let M=0;M<K;M++){let f=j.inputTensors[M],d=j.inboundLayers[M],g=j.nodeIndices[M],m=j.tensorIndices[M];l(f,C,L,d,g,m)}for(C.push(j);L.indexOf(j)>=0;)L.splice(L.indexOf(j),1);u.push(j)},h=[],p=[];for(let D of this.outputs)l(D,h,p);let v=u.slice().reverse();for(let D of v){n[D.id]=D,D.id in r||(r[D.id]=0);let C=r[D.id],L=a[D.outboundLayer.id]==null?0:a[D.outboundLayer.id];C=Math.max(C,L),a[D.outboundLayer.id]=C,s[D.outboundLayer.id]=D.outboundLayer,r[D.id]=C;for(let z=0;z<D.inboundLayers.length;z++){let $=D.inboundLayers[z],G=D.nodeIndices[z],j=$.inboundNodes[G],K=r[j.id]==null?0:r[j.id];r[j.id]=Math.max(C+1,K),n[j.id]=j}}let y={};for(let D in r){let C=r[D];C in y||(y[C]=[]),y[C].push(n[D])}let S={};for(let D in a){let C=a[D];C in S||(S[C]=[]),S[C].push(s[D])}let A=Object.keys(S).map(D=>parseInt(D,10)).sort(ly);this.layers=[];for(let D of A){let C=S[D];C.sort((L,z)=>{let $=o[L.id],G=o[z.id];return $<G?-1:$>G?1:0});for(let L of C)L instanceof Wa&&this.internalContainerRefs.push(L),this.layers.push(L)}this.layersByDepth=S,A=Object.keys(y).map(D=>parseInt(D,10)).sort(ly);let T=this.inputs.slice(),I=[];for(let D of A)for(let C of y[D]){let L=C.outboundLayer;if(L!=null){for(let z of C.inputTensors)if(T.indexOf(z)===-1)throw new Fi(`Graph disconnected: cannot obtain value for tensor ${z} at layer "${L.name}". The following previous layers were accessed without issue: ${I}`);for(let z of C.outputTensors)T.push(z);I.push(L.name)}}this.nodesByDepth=y;let N=this.layers.map(D=>D.name);for(let D of N){let C=N.filter(L=>L===D).length;if(C!==1)throw new Fi(`The name "${D}" is used ${C} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(N))}this.outboundNodes=[],this.inboundNodes=[],new Sf({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(D=>null),outputMasks:this.outputs.map(D=>null),inputShapes:this.inputs.map(D=>D.shape),outputShapes:this.outputs.map(D=>D.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();let e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(let r of this.layers)e.numDisposedVariables+=r.dispose().numDisposedVariables;for(let r of this.internalContainerRefs)e.numDisposedVariables+=r.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(r=>{r._trainableWeights.forEach(n=>n.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new ce("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(let r of this.layers)e=e.concat(r.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let r of this.layers)e.push(...r.nonTrainableWeights);if(!this.trainable){let r=[];for(let n of this.layers)r.push(...n.trainableWeights);return r.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,r=!0){let n={},a=0;for(let o of this.layers)for(let u of o.weights){if(n[u.originalName]!=null)throw new ce(`Duplicate weight name: ${u.originalName}`);n[u.originalName]=u,a++}let s=[];for(let o in e){let u=o;if(n[o]==null){let l=o.split("/");u=l.slice(0,-2).concat([l[l.length-1]]).join("/")}if(n[u]!=null)s.push([n[u],e[o]]);else if(r)throw new ce(`Provided weight data has no target variable: ${o}`);delete n[u]}if(r){let o=[];for(let u in n)o.push(u);if(o.length>0)throw new ce(`${o.length} of ${a} weights are not set: ${o}`)}s0(s)}updatedConfig(){let e=this.getConfig(),r={};return r.className=this.getClassName(),r.config=e,r.kerasVersion=`tfjs-layers ${Xy}`,r.backend="TensorFlow.js",r}toJSON(e,r=!0){let n=ZS(this.updatedConfig());return r?JSON.stringify(n):n}call(e,r){return(0,Qy.tidy)(()=>{e=Er(e);let n=new ro;for(let a=0;a<this.inputs.length;++a)n.add(this.inputs[a],e[a]);return Lh(this.outputs,n,r)})}computeMask(e,r){return(0,Qy.tidy)(()=>{e=Er(e);let n;return r==null?n=Js(null,e.length):n=Er(r),this.runInternalGraph(e,n)[1]})}computeOutputShape(e){let r=i0(e);if(r.length!==this.inputLayers.length)throw new ce(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);let n={};for(let u=0;u<r.length;u++){let l=this.inputLayers[u],h=r[u],p=l.name+"_0_0";n[p]=h}let a=Object.keys(this.nodesByDepth).map(u=>parseInt(u,10)).sort(ly);if(a.length>1)for(let u of a){let l=this.nodesByDepth[u];for(let h of l){let p=h.outboundLayer;if(this.inputLayers.map(T=>T.id).indexOf(p.id)!==-1)continue;let v=[];for(let T=0;T<h.inboundLayers.length;T++){let I=h.inboundLayers[T],N=h.nodeIndices[T],D=h.tensorIndices[T],C=`${I.name}_${N}_${D}`,L=n[C];v.push(L)}let y=p.computeOutputShape(gi(v)),S=i0(y),A=p.inboundNodes.indexOf(h);for(let T=0;T<S.length;T++){let I=`${p.name}_${A}_${T}`;n[I]=S[T]}}}let s=[],o=[];for(let u=0;u<this.outputLayers.length;u++){let l=this.outputLayers[u],h=this.outputLayersNodeIndices[u],p=this.outputLayersTensorIndices[u],v=`${l.name}_${h}_${p}`;o.push(v)}for(let u=0;u<o.length;u++){let l=o[u];os(l in n),s.push(n[l])}return gi(s)}runInternalGraph(e,r){r==null&&(r=Js(null,e.length));let n={};for(let l=0;l<this.inputs.length;++l){let h=this.inputs[l],p=e[l],v=r[l];n[h.id]=[p,v]}let a=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(ly);for(let l of a){let h=this.nodesByDepth[l];for(let p of h){let v=p.outboundLayer,y=p.inputTensors,S=p.outputTensors,A=new Array;for(let T of y)T.id in n&&A.push(n[T.id]);if(A.length===y.length){let T={},I,N,D,C;if(p.callArgs!=null&&(T=p.callArgs),A.length===1){let[L,z]=A[0];T.mask==null&&(T.mask=z),D=Er(v.call(L,T)),C=Er(v.computeMask(L,z)),I=[L],N=[z]}else I=A.map(L=>L[0]),N=A.map(L=>L[1]),T.mask==null&&(T.mask=N),D=Er(v.call(I,T)),C=Er(v.computeMask(I,N));if(v.activityRegularizer)throw new _t("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let L=0;L<S.length;++L){let z=S[L],$=D[L],G=C[L];n[z.id]=[$,G]}}}}let s=[],o=[],u=[];for(let l of this.outputs){os(l.id in n,`Could not compute output ${l.name} : ${l.id}`);let[h,p]=n[l.id];u.push(h.shape),s.push(h),o.push(p)}return[s,o,u]}buildNodeConversionMap(e){let r={},n;for(let a of this.layers){n=a instanceof Wa?1:0;for(let s=0;s<a.inboundNodes.length;s++){let o=Wa.nodeKey(a,s);this.containerNodes.has(o)&&(r[o]=n,n+=1)}}return r}getLayer(e,r){if(r!=null){if(this.layers.length<=r)throw new ce(`Was asked to retrieve layer at index ${r}, but model only has ${this.layers.length} layer(s).`);return this.layers[r]}else if(e==null)throw new ce("Provide either a layer name or layer index");for(let n of this.layers)if(n.name===e)return n;throw new ce(`No such layer: ${e}`)}calculateLosses(){return(0,Qy.tidy)(()=>{let e=[];for(let r of this.layers)for(let n=0;n<r.inboundNodes.length;++n){let a=Wa.nodeKey(r,n);this.containerNodes.has(a)&&e.push(...r.calculateLosses())}return e})}getConfig(){let e={name:this.name},r=this.buildNodeConversionMap(this.layers),n=[];for(let o of this.layers){let u=o.getClassName(),l=o.getConfig(),h=[];for(let v=0;v<o.inboundNodes.length;v++){let y=o.inboundNodes[v],S=Wa.nodeKey(o,v),A={};if(this.containerNodes.has(S)){if(y.callArgs)try{JSON.stringify(y.callArgs),A=y.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${y.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),A={}}if(y.inboundLayers.length>0){let T=[];for(let I=0;I<y.inboundLayers.length;I++){let N=y.inboundLayers[I],D=y.nodeIndices[I],C=y.tensorIndices[I],L=Wa.nodeKey(N,D),z=r[L];z==null&&(z=0),T.push([N.name,z,C,A])}h.push(T)}}}let p={};p.name=o.name,p.className=u,p.config=l,p.inboundNodes=h,n.push(p)}e.layers=n;let a=[];for(let o=0;o<this.inputLayers.length;o++){let u=this.inputLayers[o],l=this.inputLayersNodeIndices[o],h=Wa.nodeKey(u,l);if(!this.containerNodes.has(h))continue;let p=r[h];p==null&&(p=0);let v=this.inputLayersTensorIndices[o];a.push([u.name,p,v])}e.inputLayers=a;let s=[];for(let o=0;o<this.outputLayers.length;o++){let u=this.outputLayers[o],l=this.outputLayersNodeIndices[o],h=Wa.nodeKey(u,l);if(!this.containerNodes.has(h))continue;let p=r[h];p==null&&(p=0);let v=this.outputLayersTensorIndices[o];s.push([u.name,p,v])}return e.outputLayers=s,e}static fromConfig(e,r,n={},a=!1){let s={},o={};function u(I,N){I.name in o?o[I.name].push(N):o[I.name]=[N]}function l(I,N){let D=[],C;for(let L of N){let z=L[0],$=L[1],G=L[2];if(C=L[3]==null?{}:L[3],!(z in s)){u(I,N);return}let j=s[z];if(j.inboundNodes.length<=$){u(I,N);return}let K=j.inboundNodes[$];D.push(K.outputTensors[G])}D.length>0&&I.apply(gi(D),C)}function h(I){let N=I.name,D=Va(I,r.customObjects!=null?r.customObjects:{});D.setFastWeightInitDuringBuild(a),s[N]=D,I.inboundNodes.forEach(L=>{if(!(L instanceof Array))throw new ce(`Corrupted configuration, expected array for nodeData: ${L}`);u(D,L)})}let p=r.name,v=r.layers;for(let I of v)h(I);for(;!sK(o);)for(let I of v){let N=s[I.name];if(N.name in o){let D=o[N.name];delete o[N.name];for(let C of D)l(N,C)}}let y=[],S=[],A=r.inputLayers;for(let I of A){let N=I[0],D=I[1],C=I[2];os(N in s);let z=s[N].inboundNodes[D].outputTensors;y.push(z[C])}let T=r.outputLayers;for(let I of T){let N=I[0],D=I[1],C=I[2];os(N in s);let z=s[N].inboundNodes[D].outputTensors;S.push(z[C])}return new e({inputs:y,outputs:S,name:p})}get stateful(){if(this._stateful)throw new ce("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(let e of this.layers)if(e.stateful)return!0;return!1}resetStates(){(0,Qy.tidy)(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}};var mr=ut(Mt()),ZQ=ut(Mt());var Ga=ut(Mt());function ZRe(t,e,r){let n=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(a=>null);if(n===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==n)throw new Error(`Provided ${r} is an array of ${t.length} element(s), but the model has ${n} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){let a=[];return e.forEach(s=>{s in t?a.push(t[s]):a.push(null)}),a}else throw new Error(`The model has multiple (${n}) outputs, so ${r} must be either an array with ${n} elements or an object with ${e} keys. Provided ${r} not understood: ${JSON.stringify(t)}`)}function JS(t,e){return ZRe(t,e,"classWeight")}async function YS(t,e,r,n){if(e!=null||n!=null)throw new Error("Support sampleWeight is not implemented yet");if(r!=null){let a=(0,Ga.tidy)(()=>{if(t.shape.length===1)return(0,Ga.clone)(t);if(t.shape.length===2){if(t.shape[1]>1)return(0,Ga.argMax)(t,1);if(t.shape[1]===1)return(0,Ga.reshape)(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(await a.data());(0,Ga.dispose)(a);let o=[];return s.forEach(u=>{if(r[u]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${u} exists in the data but not in classWeight`);o.push(r[u])}),(0,Ga.tensor1d)(o,"float32")}else return null}function GQ(t,e){return(0,Ga.mul)(t,e)}var JRe=32;function JQ(t,e){let r,n,a=e;r=a.xs,n=a.ys,mr.util.assert(r!=null&&n!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);let s=HQ("input",t.inputNames,r),o=HQ("output",t.outputNames,n),u=s[0].shape[0];mr.util.assert(s.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),mr.util.assert(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<s.length;l++)mr.util.assert(s[l].shape[0]===u,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${s[l].shape[0]}; expected  ${u} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)mr.util.assert(o[l].shape[0]===u,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${u} based on input ${t.inputNames[0]}.`);return{xs:s,ys:o}}function HQ(t,e,r){if(r instanceof mr.Tensor)return[r];if(Array.isArray(r))return mr.util.assert(r.length===e.length,()=>`Received an array of ${r.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),r;{let n=[];for(let a of e){if(r[a]==null)throw new ce(`The feature data generated by the dataset lacks the required ${t} key '${a}'.`);n.push(r[a])}return n}}function YRe(t){if(t.length===3)throw new _t("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function YQ(t,e,r){let n=r.batchesPerEpoch!=null;if(mr.util.assert(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),mr.util.assert(r!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),mr.util.assert(r.epochs!=null&&r.epochs>0&&Number.isInteger(r.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${r.epochs}`),mr.util.assert(!n||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${r.batchesPerEpoch}`),mr.util.assert(r.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{let a=r.validationData!=null,s,o;if(a)if(KQ(r.validationData))mr.util.assert(r.validationBatches==null||r.validationBatches>0&&Number.isInteger(r.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${r.validationBatches}`);else{let I=YRe(r.validationData);s=I.xs,o=I.ys}let u=t.makeTrainFunction(),l=t.getDedupedMetricsNames(),h;a?h=l.slice().concat(l.map(I=>"val_"+I)):h=l.slice();let p=$S(r.callbacks,r.yieldEvery),v=r.verbose==null?1:r.verbose,{callbackList:y,history:S}=zS(p,v,r.epochs,null,null,XRe(e,r),null,a,h);y.setModel(t),t.history=S,await y.onTrainBegin(),t.stopTraining_=!1;let A=r.initialEpoch==null?0:r.initialEpoch,T=await e.iterator();for(;A<r.epochs;){let I={};await y.onEpochBegin(A);let N=0,D=0;for(n||(T=await e.iterator());!n||N<r.batchesPerEpoch;){let C=await T.next();if(n&&C.done){console.warn(`You provided \`batchesPerEpoch\` as ${r.batchesPerEpoch}, but your dataset iterator ran out of data after ${N} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${r.batchesPerEpoch*r.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(C.value!=null){let{xs:L,ys:z}=JQ(t,C.value),$={};$.batch=D,$.size=L[0].shape[0],await y.onBatchBegin(D,$);let G=[];if(r.classWeight!=null){let M=JS(r.classWeight,t.outputNames);for(let f=0;f<M.length;++f)G.push(await YS(z[f],null,M[f]))}let j=L.concat(z).concat(G),K=u(j);mr.dispose(j);for(let M=0;M<l.length;++M){let f=l[M],d=K[M];$[f]=d,mr.keep(d)}await y.onBatchEnd(D,$),BS($),D++,N++}if(n?N>=r.batchesPerEpoch:C.done){if(a){let L;KQ(r.validationData)?L=Er(await t.evaluateDataset(r.validationData,{batches:r.validationBatches})):L=Er(t.evaluate(s,o,{batchSize:r.validationBatchSize==null?JRe:r.validationBatchSize,verbose:0}));for(let z=0;z<t.metricsNames.length;++z)I[`val_${t.metricsNames[z]}`]=L[z]}break}if(t.stopTraining_)break}if(await y.onEpochEnd(A,I),A++,t.stopTraining_)break}return await y.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function XRe(t,e){let r=null;return e.batchesPerEpoch!=null?r=e.batchesPerEpoch:Number.isFinite(t.size)&&(r=t.size),r}function KQ(t){return typeof t.iterator=="function"}function QRe(t){return typeof t.next=="function"}async function XQ(t,e,r){r=r||{};let n=r.batches!=null,a=t.testFunction,s=[];if(r.verbose>0)throw new _t("Verbose mode is not implemented yet.");mr.util.assert(!n||r.batches>0&&Number.isInteger(r.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(r.batches)}`);let o=QRe(e)?e:await e.iterator(),u=0,l=0;for(;!n||l<r.batches;){let h=await o.next();if(s=mr.tidy(()=>{if(h.value){let{xs:p,ys:v}=JQ(t,h.value),y=p.concat(v),S=mr.tidy(()=>a(y));if(mr.dispose(y),l===0)for(let T=0;T<S.length;++T)s.push((0,ZQ.scalar)(0));let A=y[0].shape[0];for(let T=0;T<S.length;++T){let I=S[T],N=s[T];s[T]=mr.tidy(()=>mr.add(s[T],mr.mul(A,I))),l>0&&mr.dispose(N)}mr.dispose(S),u+=A,++l}return s}),h.done){n&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${r.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let h=0;h<s.length;++h){let p=s[h];s[h]=mr.div(s[h],u),mr.dispose(p)}return gi(s)}var so=ut(Mt()),Wl=ut(Mt());function XS(t){so.util.assert(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function k0(t,e,r){return t==null?[null]:Array.isArray(t)?t.map(n=>_f(n,e,r-e)):_f(t,e,r-e)}function QS(t,e){return so.tidy(()=>t==null?null:Array.isArray(t)?t.map(r=>QS(r,e)):dx(t,e.dtype==="int32"?e:so.cast(e,"int32")))}function eE(t,e){let r=[],n=0,a=null;for(;n<t;)a=n+e,a>=t&&(a=t),r.push([n,a]),n=a;return r}async function eCe(t,e,r,n,a,s,o,u,l,h,p,v,y,S,A){a==null&&(a=32),s==null&&(s=1),p==null&&(p=!0),y==null&&(y=0);let T=!1;if(l!=null&&h!=null&&(T=!0),A!=null&&(T=!0,S==null))throw new ce("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");let I=t.checkNumSamples(r,a,S,"steps_per_epoch"),N;I!=null&&(N=Yi(0,I)),o==null&&(o=1);let{callbackList:D,history:C}=zS(u,o,s,y,I,S,a,T,v);D.setModel(t),t.history=C,await D.onTrainBegin(),t.stopTraining_=!1;for(let L=y;L<s;++L){await D.onEpochBegin(L);let z={};if(S!=null)throw new _t("stepsPerEpoch mode is not implemented yet.");{if(p==="batch")throw new _t("batch shuffling is not implemneted yet");p&&Wl.util.shuffle(N);let $=(0,Wl.tensor1d)(N),G=eE(I,a);for(let j=0;j<G.length;++j){let K={};if(await D.onBatchBegin(j,K),so.tidy(()=>{let M=G[j][0],f=G[j][1],d=_f($,M,f-M);K.batch=j,K.size=f-M;let g=QS(r,d),m=e(g);for(let b=0;b<n.length;++b){let E=n[b],k=m[b];K[E]=k,so.keep(k)}if(j===G.length-1&&T){let b=t.testLoop(l,h,a);for(let E=0;E<n.length;++E){let k=n[E],w=b[E];so.keep(w),z["val_"+k]=w}}}),await D.onBatchEnd(j,K),BS(K),t.stopTraining_)break}$.dispose()}if(await D.onEpochEnd(L,z),t.stopTraining_)break}return await D.onTrainEnd(),await t.history.syncData(),t.history}async function QQ(t,e,r,n={}){if(t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;let a,s,o,u,l,h,p,v,y;try{let S=n.batchSize==null?32:n.batchSize;XS(S);let A=!1,T=await t.standardizeUserData(e,r,n.sampleWeight,n.classWeight,A,S);a=T[0],s=T[1],y=T[2];let I=!1,N;if(n.validationData!=null&&n.validationData.length>0){if(I=!0,n.validationData.length===2)l=n.validationData[0],h=n.validationData[1];else throw n.validationData.length===3?new _t("validationData including sample weights is not supported yet."):new ce(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${n.validationData} is invalid.`);let K=!0,M=await t.standardizeUserData(l,h,null,null,K,S);p=M[0],v=M[1],N=p.concat(v)}else if(n.validationSplit!=null&&n.validationSplit>0&&n.validationSplit<1){I=!0;let K=Math.floor(a[0].shape[0]*(1-n.validationSplit)),M=a[0].shape[0];p=k0(a,K,M),o=a,a=k0(a,0,K),v=k0(s,K,M),u=s,s=k0(s,0,K),N=p.concat(v)}else n.validationSteps!=null&&(I=!0);let D=a.concat(s).concat(y);t.checkTrainableWeightsConsistency();let C=t.makeTrainFunction(),L=t.getDedupedMetricsNames(),z,$;I?(t.makeTestFunction(),z=t.testFunction,$=L.slice().concat(L.map(K=>"val_"+K))):(z=null,N=[],$=L.slice());let G=$S(n.callbacks,n.yieldEvery);return await eCe(t,C,D,L,S,n.epochs,n.verbose,G,z,N,n.shuffle,$,n.initialEpoch,null,null)}finally{t.isTraining=!1,ao(a,e),ao(s,r),ao(o,e),ao(u,r),ao(p,l),ao(v,h),y!=null&&so.dispose(y)}}function SI(t){let e=[];t instanceof Wl.Tensor&&(t=[t]);for(let r=0;r<t.length;++r){let n=t[r];if(n.rank===1)e.push(xf(n,1));else{if(n.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(n)}}return e}function ao(t,e){if(t==null)return;let r=[];if(e instanceof Wl.Tensor)r.push(e.id);else if(Array.isArray(e))e.forEach(a=>r.push(a.id));else if(e!=null)for(let a in e){let s=e[a];r.push(s.id)}let n=[];if(t instanceof Wl.Tensor)r.indexOf(t.id)===-1&&n.push(t);else if(Array.isArray(t))t.forEach(a=>{r.indexOf(a.id)===-1&&n.push(a)});else if(t!=null)for(let a in t){let s=t[a];r.indexOf(s.id)===-1&&n.push(s)}n.forEach(a=>{a.isDisposed||a.dispose()})}function tCe(t){return t instanceof Ei.Tensor}function EI(t){return Array.isArray(t)}function eee(t){return!tCe(t)&&!EI(t)}function tee(t,e,r,n=!0,a=""){if(e==null||e.length===0){if(t!=null){let o=!1;if(EI(t)&&t.length>0)o=!0;else if(eee(t)){for(let u in t)if(t.hasOwnProperty(u)){o=!0;break}}else o=!0;if(o)throw new ce(`Error when checking model ${a} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(o=>null);let s;if(eee(t)){t=t,s=[];for(let o of e){if(t[o]==null)throw new ce(`No data provided for "${o}". Need data for each key in: ${e}`);s.push(t[o])}}else if(EI(t)){if(t=t,t.length!==e.length)throw new ce(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);s=t}else{if(t=t,e.length>1)throw new ce(`The model ${a} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);s=[t]}if(s=SI(s),r!=null)for(let o=0;o<e.length;++o){if(r[o]==null)continue;let u=s[o];if(u.shape.length!==r[o].length)throw new ce(`Error when checking ${a}: expected ${e[o]} to have ${r[o].length} dimension(s). but got array with shape ${u.shape}`);for(let l=0;l<r[o].length;++l){if(l===0&&!n)continue;let h=u.shape[l],p=r[o][l];if(p!=null&&p>=0&&h!==p)throw new ce(`${a} expected a batch of elements where each example has shape [${r[o].slice(1,r[o].length)}] (i.e.,tensor shape [*,${r[o].slice(1,r[o].length)}]) but the ${a} received an input with ${u.shape[0]} examples, each with shape [${u.shape.slice(1,u.shape.length)}] (tensor shape [${u.shape}])`)}}return s}function rCe(t,e,r){let n=Xs(t.map(s=>s.shape[0]));n.sort();let a=Xs(e.map(s=>s.shape[0]));if(a.sort(),n.length>1)throw new ce(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(a.length>1)throw new ce(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(s=>s.shape))}`);if(n.length>0&&a.length>0&&!Ei.util.arraysEqual(n,a))throw new ce(`Input Tensors should have the same number of samples as target Tensors. Found ${n[0]} input sample(s) and ${a[0]} target sample(s).`)}function nCe(t,e,r){let n=[Uh,M0,Vh];for(let a=0;a<t.length;++a){let s=t[a],o=e[a],u=r[a];if(o!=null){if(o===Vh&&s.shape[s.shape.length-1]===1)throw new ce(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(n.indexOf(o)!==-1){let l=s.shape.slice(1),h=u.slice(1);for(let p=0;p<l.length;++p){let v=l[p],y=h[p];if(y!=null&&v!==y)throw new ce(`A target Tensor with shape ${s.shape} was passed for an output of shape ${u}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function ree(t,e,r,n=!0,a=""){let s;if(Array.isArray(t)){if(t.length!==e.length)throw new ce(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);s=t}else{if(e.length>1)throw new ce(`The model expects ${e.length} ${a} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);s=[t]}if(r!=null)for(let o=0;o<e.length;++o){if(r[o]==null)continue;let u=s[o];if(u.shape.length!==r[o].length)throw new ce(`Error when checking ${a}: expected ${e[o]} to have ${r[o].length} dimension(s), but got array with shape ${JSON.stringify(u.shape)}`);for(let l=0;l<r[o].length;++l){if(l===0&&!n)continue;let h=u.shape[l],p=r[o][l];if(p!=null&&p!==h)throw new ce(`Error when checking ${a}: expected ${e[o]} to have shape ${JSON.stringify(r[o])} but got array with shape ${JSON.stringify(u.shape)}.`)}}}function iCe(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(n=>[]);let r;if(typeof t=="string"||typeof t=="function")r=[t];else if(Array.isArray(t)||typeof t=="object")r=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(r))return e.map(n=>r);{let n=[];for(let a of e){let s=r.hasOwnProperty(a)?r[a]:[];Array.isArray(s)||(s=[s]),n.push(s)}return n}}var aCe="layers-model",oo=class extends Wa{constructor(e){super(e),this.isTraining=!1}summary(e,r,n=console.log){if(!this.built)throw new ce("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");VQ(this,e,r,n)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=UQ(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Ei.Optimizer))throw new ce("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let r=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(let o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new ce(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(let o of this.outputNames)e.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),r.push(US(e.loss[o]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new ce(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);r=e.loss.map(u=>US(u))}else{let o=US(e.loss);this.outputs.forEach(u=>{r.push(o)})}this.lossFunctions=r,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){let u=this.internalOutputShapes[o],l=this.outputNames[o];this.feedOutputNames.push(l),this.feedOutputShapes.push(u),this.feedLossFns.push(this.lossFunctions[o])}let n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Uo("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(n.indexOf(o)!==-1)continue;let u=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([u,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});let a=iCe(e.metrics,this.outputNames),s=(o,u,l)=>{this.outputNames.length>1&&(u=this.outputNames[o]+"_"+u),this.metricsNames.push(u),this.metricsTensors.push([l,o])};Uo("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(n.indexOf(o)!==-1)continue;let u=a[o];(h=>{let p="",v,y,S;for(let A of h){if(typeof A=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(A)!==-1){let I=this.internalOutputShapes[o];I[I.length-1]===1||this.lossFunctions[o]===M0?["accuracy","acc"].indexOf(A)!==-1?y=WS:["crossentropy","ce"].indexOf(A)!==-1&&(y=yI):this.lossFunctions[o]===E0?["accuracy","acc"].indexOf(A)!==-1?y=bI:["crossentropy","ce"].indexOf(A)!==-1&&(y=wI):["accuracy","acc"].indexOf(A)!==-1?y=GS:["crossentropy","ce"].indexOf(A)!==-1&&(y=HS);let N;["accuracy","acc"].indexOf(A)!==-1?N="acc":["crossentropy","ce"].indexOf(A)!==-1&&(N="ce"),S=y,v=p+N}else S=zQ(A),v=p+Jy(A);let T;Uo(v,()=>{T=S}),s(o,v,T)}})(u)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,r,n={}){let a=n.batchSize==null?32:n.batchSize;XS(a);let s=!0,o=this.standardizeUserDataXY(e,r,s,a);try{let u=o[0].concat(o[1]);this.makeTestFunction();let l=this.testFunction,h=this.testLoop(l,u,a,n.verbose,n.steps);return gi(h)}finally{ao(o[0],e),ao(o[1],r)}}async evaluateDataset(e,r){return this.makeTestFunction(),XQ(this,e,r)}checkNumSamples(e,r,n,a="steps"){let s;if(n!=null){if(s=null,r!=null)throw new ce(`If ${a} is set, batchSize must be null or undefined.Got batchSize = ${r}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new ce(`Either the input data should have a defined shape, or ${a} shoud be specified.`);return s}execute(e,r){if(Array.isArray(r)&&r.length===0)throw new ce("`outputs` is an empty Array, which is not allowed.");let n=Array.isArray(r),a=n?r:[r],s=this.retrieveSymbolicTensors(a),o=new ro;if(e instanceof Ei.Tensor&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new ce(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)o.add(this.inputs[l],e[l])}else for(let l of this.inputs){let h=e[l.name];if(h==null)throw new ce(`No value is provided for the model's input ${l.name}`);o.add(l,h)}let u=Lh(s,o);return n?u:u[0]}retrieveSymbolicTensors(e){let r=Js(null,e.length),n=e.length;for(let a of this.layers){let s=Array.isArray(a.output)?a.output:[a.output],o=s.map(u=>u.name);for(let u=0;u<e.length;++u){let l=o.indexOf(e[u]);if(l!==-1&&(r[u]=s[l],n--),n===0)break}if(n===0)break}if(n>0){let a=[];throw r.forEach((s,o)=>{s==null&&a.push(e[o])}),new ce(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(a)}`)}return r}predictLoop(e,r=32,n=!1){return Xr.tidy(()=>{let a=this.checkNumSamples(e);if(n)throw new _t("Verbose predictLoop() is not implemented yet.");let s=eE(a,r),o=this.outputs.map(u=>[]);for(let u=0;u<s.length;++u)Xr.tidy(()=>{let h=s[u][0],p=s[u][1],v=k0(e,h,p),y=[];if(Array.isArray(v))for(let A=0;A<v.length;++A)y.push({key:this.inputs[A],value:v[A]});else y.push({key:this.inputs[0],value:v});let S=new ro(y);return Lh(this.outputs,S)}).forEach((h,p)=>o[p].push(h));return gi(o.map(u=>Xr.concat(u,0)))})}predict(e,r={}){let n=SI(e);ree(n,this.inputNames,this.feedInputShapes,!1);try{let a=r.batchSize==null?32:r.batchSize;return XS(a),this.predictLoop(n,a)}finally{ao(n,e)}}predictOnBatch(e){ree(e,this.inputNames,this.feedInputShapes,!0);let r=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,r)}standardizeUserDataXY(e,r,n=!0,a){if(this.optimizer_==null)throw new Fi("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");let s=[];for(let o=0;o<this.feedOutputShapes.length;++o){let u=this.feedOutputShapes[o];this.feedLossFns[o]===E0?s.push(u.slice(0,u.length-1).concat([1])):s.push(u)}if(e=tee(e,this.feedInputNames,this.feedInputShapes,!1,"input"),r=tee(r,this.feedOutputNames,s,!1,"target"),rCe(e,r,null),nCe(r,this.feedLossFns,this.feedOutputShapes),this.stateful&&a!=null&&a>0&&e[0].shape[0]%a!==0)throw new ce(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${a}. Found: ${e[0].shape[0]} sample(s).`);return[e,r]}async standardizeUserData(e,r,n,a,s=!0,o){let[u,l]=this.standardizeUserDataXY(e,r,s,o);if(n!=null)throw new Error("sample weight is not supported yet.");let h=null;if(a!=null){let p=JS(a,this.outputNames);h=[];for(let v=0;v<p.length;++v)h.push(await YS(l[v],null,p[v]))}return[u,l,h]}testLoop(e,r,n,a=0,s){return Xr.tidy(()=>{let o=this.checkNumSamples(r,n,s,"steps"),u=[];if(a>0)throw new _t("Verbose mode is not implemented yet.");if(s!=null)throw new _t("steps mode in testLoop() is not implemented yet");{let l=eE(o,n),h=(0,Ei.tensor1d)(Yi(0,o));for(let p=0;p<l.length;++p){let v=l[p][0],y=l[p][1],S=_f(h,v,y-v),A=QS(r,S),T=e(A);if(p===0)for(let I=0;I<T.length;++I)u.push((0,Ei.scalar)(0));for(let I=0;I<T.length;++I){let N=T[I];u[I]=Xr.add(u[I],Xr.mul(y-v,N))}}for(let p=0;p<u.length;++p)u[p]=Xr.div(u[p],o)}return u})}getDedupedMetricsNames(){let e=this.metricsNames,r=[];for(let n=0;n<e.length;++n){let a=e[n],s=a;AN(e,a)>1&&(s+=`_${AN(e.slice(0,n),a)}`),r.push(s)}return r}makeTrainFunction(){return e=>{let r=[],n=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],u=()=>{let v=[];for(let T=0;T<this.inputs.length;++T)v.push({key:this.inputs[T],value:n[T]});let y=new ro(v),S=Lh(this.outputs,y,{training:!0}),A;for(let T=0;T<this.lossFunctions.length;++T){let I=this.lossFunctions[T],N=I(a[T],S[T]);s[T]!=null&&(N=GQ(N,s[T]));let D=Xr.mean(N);r.push(D),T===0?A=N:A=Xr.add(A,N)}for(let T=0;T<this.metricsTensors.length;++T){let I;if(this.outputs.length>1&&T<this.outputs.length)I=r[T];else{let N=this.metricsTensors[T][0],D=this.metricsTensors[T][1];I=Xr.mean(N(a[D],S[D]))}Xr.keep(I),o.push(I)}return A=Xr.mean(A),this.calculateLosses().forEach(T=>{A=Xr.add(A,T)}),A},l=this.collectedTrainableWeights.map(v=>v.read()),h=!0;return[this.optimizer_.minimize(u,h,l)].concat(o)}}makeTestFunction(){this.testFunction=e=>Xr.tidy(()=>{let r=[],n,a=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let h=0;h<this.inputs.length;++h)o.push({key:this.inputs[h],value:a[h]});let u=new ro(o),l=Lh(this.outputs,u);for(let h=0;h<this.lossFunctions.length;++h){let p=this.lossFunctions[h],v=Xr.mean(p(s[h],l[h]));h===0?n=v:n=Xr.add(n,v),r.push(n)}for(let h=0;h<this.metricsTensors.length;++h){let p=this.metricsTensors[h][0],v=this.metricsTensors[h][1],y=Xr.mean(p(s[v],l[v]));r.push(y)}return r})}async fit(e,r,n={}){return QQ(this,e,r,n)}async fitDataset(e,r){return YQ(this,e,r)}async trainOnBatch(e,r){let n=await this.standardizeUserData(e,r),a=n[0],s=n[1],u=this.makeTrainFunction()(a.concat(s)),l=[];for(let h of u){let p=await h.data();l.push(p[0])}return Xr.dispose(u),ao(n[0],e),ao(n[1],r),gi(l)}getNamedWeights(e){let r=[],n=e!=null&&e.trainableOnly,a=n?this.trainableWeights:this.weights,s=this.getWeights(n);for(let o=0;o<a.length;++o)n&&!a[o].trainable||r.push({name:a[o].originalName,tensor:s[o]});return r}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){let e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){let r=Xr.memory().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=r-Xr.memory().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Ys(this.loss);else if(Array.isArray(this.loss)){for(let r of this.loss)if(typeof r!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(r=>Ys(r))}else{let r=Object.keys(this.loss);e={};let n=this.loss;for(let a of r)if(typeof n[a]=="string")e[a]=Ys(n[a]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Ys(Jy(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Ys(Jy(e)));{let e={};for(let r in this.metrics)e[r]=Ys(Jy(this.metrics[r]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");let r=Yy(e.optimizer_config),n=Va(r),a;if(typeof e.loss=="string")a=wf(e.loss);else if(Array.isArray(e.loss))a=e.loss.map(o=>wf(o));else if(e.loss!=null){a={};for(let o in e.loss)a[o]=wf(e.loss[o])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(o=>wf(o));else if(e.metrics!=null){s={};for(let o in e.metrics)s[o]=wf(e.metrics[o])}this.compile({loss:a,metrics:s,optimizer:n})}async save(e,r){if(typeof e=="string"){let h=Ei.io.getSaveHandlers(e);if(h.length===0)throw new ce(`Cannot find any save handlers for URL '${e}'`);if(h.length>1)throw new ce(`Found more than one (${h.length}) save handlers for URL '${e}'`);e=h[0]}if(e.save==null)throw new ce("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");let n=await Ei.io.encodeWeights(this.getNamedWeights(r)),a=!1,s=null,u={modelTopology:this.toJSON(s,a),format:aCe,generatedBy:`TensorFlow.js tfjs-layers v${Xy}`,convertedBy:null};if((r==null?!1:r.includeOptimizer)&&this.optimizer!=null){u.trainingConfig=this.getTrainingConfig();let h="optimizer",{data:p,specs:v}=await Ei.io.encodeWeights(await this.optimizer.getWeights(),h);n.specs.push(...v),n.data=Ei.io.concatenateArrayBuffers([n.data,p])}return this.userDefinedMetadata!=null&&(xI(this.userDefinedMetadata,this.name,!0),u.userDefinedMetadata=this.userDefinedMetadata),u.weightData=n.data,u.weightSpecs=n.specs,e.save(u)}setUserDefinedMetadata(e){xI(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}};oo.className="Model";Ei.serialization.registerClass(oo);var tE=class extends oo{};tE.className="Functional";Ei.serialization.registerClass(tE);var T0=ut(Mt());var Of=class extends oo{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:Pl("sequential_"),e.layers!=null)for(let r of e.layers)this.add(r)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(n=>n<0))throw new ce(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){let r=e instanceof Of||e instanceof oo,n;if(r){if(n=e,n.outputs.length!==1)throw new ce("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(n.inputs.length!==1)throw new ce("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new ce("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let a=vx({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=n.outputs,this.inputs=n.inputs;else{if(e.inboundNodes.length!==1)throw new ce(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new ce("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=ON(this.outputs[0])}this.inboundNodes=[],new Sf({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Js(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(a=>a.shape),outputShapes:this.outputs[0].shape})}else{let a=e.apply(this.outputs[0]);if(Array.isArray(a))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[a],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,r){return this.model==null&&this.build(),this.model.call(e,r)}build(e){if(Pt(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new oo({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,r,n=console.log){this.built||this.build(),super.summary(e,r,n)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,r,n={}){if(!this.built)throw new Fi("The model needs to be compiled before being used.");return this.model.evaluate(e,r,n)}async evaluateDataset(e,r){if(!this.built)throw new Fi("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,r)}predict(e,r={}){return this.model==null&&this.build(),this.model.predict(e,r)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,r,n={}){if(!this.built)throw new Fi("The model needs to be compiled before being used.");return this.model.fit(e,r,n)}async fitDataset(e,r){if(!this.built)throw new Fi("The model needs to be compiled before being used.");return this.model.fitDataset(e,r)}async trainOnBatch(e,r){return this.model.trainOnBatch(e,r)}static fromConfig(e,r,n={},a=!1){let s,o={};if(r instanceof Array){if(r[0].className==null||r[0].className==="Merge")throw new ce("Legacy serialization format not supported yet.");s=r}else T0.util.assert(r.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=r.layers,delete r.layers,o=r;let u=new e(o);if(!(u instanceof Of))throw new _t(`Sequential.fromConfig called on non-Sequential input: ${u}`);for(let l of s){let p=Va(l,void 0,a);a&&p.setFastWeightInitDuringBuild(!0),u.add(p)}return u}set stopTraining(e){if(this.model==null)throw new ce("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new ce("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let e=[];for(let r of this.layers){let n={};n.className=r.getClassName(),n.config=r.getConfig(),e.push(n)}return{name:this.name,layers:e}}};Of.className="Sequential";T0.serialization.registerClass(Of);function MI(t){return vx(t)}var Hn=ut(Mt());var Bn=ut(Mt()),ci=ut(Mt());var ea=class extends ci.serialization.Serializable{getConfig(){return{}}},rE=class extends ea{apply(e,r=1){return xK(e,r)}};rE.className="elu";ci.serialization.registerClass(rE);var nE=class extends ea{apply(e){return Bn.selu(e)}};nE.className="selu";ci.serialization.registerClass(nE);var iE=class extends ea{apply(e){return Bn.relu(e)}};iE.className="relu";ci.serialization.registerClass(iE);var aE=class extends ea{apply(e){return(0,ci.tidy)(()=>Bn.minimum(6,Bn.relu(e)))}};aE.className="relu6";ci.serialization.registerClass(aE);var sE=class extends ea{apply(e){return e}};sE.className="linear";ci.serialization.registerClass(sE);var oE=class extends ea{apply(e){return Bn.sigmoid(e)}};oE.className="sigmoid";ci.serialization.registerClass(oE);var uE=class extends ea{apply(e){return EK(e)}};uE.className="hardSigmoid";ci.serialization.registerClass(uE);var fE=class extends ea{apply(e){return Bn.softplus(e)}};fE.className="softplus";ci.serialization.registerClass(fE);var lE=class extends ea{apply(e){return SK(e)}};lE.className="softsign";ci.serialization.registerClass(lE);var cE=class extends ea{apply(e){return Bn.tanh(e)}};cE.className="tanh";ci.serialization.registerClass(cE);var N0=class extends ea{apply(e,r=-1){return Bn.softmax(e,r)}};N0.className="softmax";ci.serialization.registerClass(N0);var hE=class extends ea{apply(e,r=-1){return Bn.logSoftmax(e,r)}};hE.className="logSoftmax";ci.serialization.registerClass(hE);var dE=class extends ea{apply(e,r=1){return(0,ci.tidy)(()=>Bn.mul(Bn.sigmoid(Bn.mul(e,r)),e))}};dE.className="swish";ci.serialization.registerClass(dE);var pE=class extends ea{apply(e){return(0,ci.tidy)(()=>Bn.mul(e,Bn.tanh(Bn.softplus(e))))}};pE.className="mish";ci.serialization.registerClass(pE);function Go(t){return t.getClassName()}function AI(t,e={}){return Ou(t,ci.serialization.SerializationMap.getMap().classNameMap,e,"activation")}function Ho(t){if(t==null){let e={};return e.className="linear",e.config={},AI(e)}if(typeof t=="string"){let e={};return e.className=t,e.config={},AI(e)}else return t instanceof ea?t:AI(t)}var e1=ut(Mt()),ya=ut(Mt());function sCe(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}var mE=class extends ya.serialization.Serializable{},t1=class extends mE{constructor(e){super(),sCe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return(0,ya.tidy)(()=>{let r=(0,ya.zeros)([1]);return this.hasL1&&(r=(0,ya.add)(r,(0,ya.sum)(e1.mul(this.l1,(0,ya.abs)(e))))),this.hasL2&&(r=(0,ya.add)(r,(0,ya.sum)(e1.mul(this.l2,Fh(e))))),e1.reshape(r,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,r){return new e({l1:r.l1,l2:r.l2})}};t1.className="L1L2";ya.serialization.registerClass(t1);var nee={l1l2:"L1L2"};function lr(t){return Kp(t)}function iee(t,e={}){return Ou(t,ya.serialization.SerializationMap.getMap().classNameMap,e,"regularizer")}function kr(t){if(t==null)return null;if(typeof t=="string"){let r={className:t in nee?nee[t]:t,config:{}};return iee(r)}else return t instanceof mE?t:iee(t)}var I0=class extends Nt{constructor(e){super(e==null?{}:e),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,r){e=Tt(e);let n=(0,Hn.relu)(e);return this.maxValue!=null&&(n=(0,Hn.clipByValue)(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){let e={maxValue:this.maxValue},r=super.getConfig();return Object.assign(e,r),e}};I0.className="ReLU";Hn.serialization.registerClass(I0);var D0=class extends Nt{constructor(e){super(e==null?{}:e),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,r){let n=Tt(e);return(0,Hn.leakyRelu)(n,this.alpha)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},r=super.getConfig();return Object.assign(e,r),e}};D0.className="LeakyReLU";Hn.serialization.registerClass(D0);var O0=class extends Nt{constructor(e){if(super(e==null?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=wr(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=kr(e.alphaRegularizer),this.alphaConstraint=pn(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new ce(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Pt(e);let r=e.slice(1);if(this.sharedAxes!=null)for(let a of this.sharedAxes)r[a-1]=1;this.alpha=this.addWeight("alpha",r,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let n={};if(this.sharedAxes!=null)for(let a=1;a<e.length;++a)n[a]=e[a];this.inputSpec=[new Mr({ndim:e.length,axes:n})],this.built=!0}call(e,r){return e=Tt(e),(0,Hn.prelu)(e,this.alpha.read())}getConfig(){let e={alphaInitializer:Dr(this.alphaInitializer),alphaRegularizer:lr(this.alphaRegularizer),alphaConstraint:dn(this.alphaConstraint),sharedAxes:this.sharedAxes},r=super.getConfig();return Object.assign(e,r),e}};O0.className="PReLU";Hn.serialization.registerClass(O0);var R0=class extends Nt{constructor(e){if(super(e==null?{}:e),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new _t(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,r){let n=Tt(e);return(0,Hn.elu)(n)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},r=super.getConfig();return Object.assign(e,r),e}};R0.className="ELU";Hn.serialization.registerClass(R0);var C0=class extends Nt{constructor(e){super(e==null?{}:e),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,r){let n=Tt(e);return(0,Hn.mul)(n,(0,Hn.cast)((0,Hn.greater)(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){let e={theta:this.theta},r=super.getConfig();return Object.assign(e,r),e}};C0.className="ThresholdedReLU";Hn.serialization.registerClass(C0);var F0=class extends Nt{constructor(e){super(e==null?{}:e),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new N0().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,r){let n=Tt(e);return this.softmax(n,this.axis)}computeOutputShape(e){return e}getConfig(){let e={axis:this.axis},r=super.getConfig();return Object.assign(e,r),e}};F0.className="Softmax";Hn.serialization.registerClass(F0);var cr=ut(Mt()),Pi=ut(Mt());function Gl(t,e,r){if(typeof t=="number")return Js(t,e);if(t.length!==e)throw new ce(`The ${r} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let n=0;n<e;++n){let a=t[n];if(!gK(a))throw new ce(`The ${r} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${a}`)}return t}function ka(t,e,r,n,a=1){if(t==null)return t;let s=e+(e-1)*(a-1),o;return r==="same"?o=t:o=t-s+1,Math.floor((o+n-1)/n)}function Ko(t,e,r,n){if(t==null)return null;if(n==="valid")t=t*e+Vo([r-e,0]);else if(n==="same")t=t*e;else throw new ce(`Unsupport padding mode: ${n}.`);return t}function r1(t,e){return(0,Pi.tidy)(()=>(sn(e),e==="channelsFirst"?cr.transpose(t,[0,2,3,1]):t))}function kI(t,e){return(0,Pi.tidy)(()=>(sn(e),e==="channelsFirst"?cr.transpose(t,[0,2,3,4,1]):t))}function uCe(t,e,r,n=1,a="valid",s,o=1){return(0,Pi.tidy)(()=>{if(s==null&&(s=ha()),sn(s),t.shape.length!==3)throw new ce(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new ce(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(r!=null&&r.shape.length!==1)throw new ce(`The bias for a conv1dWithBias operation should be 1, but is ${e.shape.length} instead`);if(s==="channelsFirst"&&(t=cr.transpose(t,[0,2,1])),a==="causal")throw new _t("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let u=cr.conv1d(t,e,n,a==="same"?"same":"valid","NWC",o);return r!=null&&(u=pa(u,r)),u})}function aee(t,e,r,n=[1,1],a="valid",s,o,u=null){return(0,Pi.tidy)(()=>{if(s==null&&(s=ha()),sn(s),t.rank!==3&&t.rank!==4)throw new ce(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new ce(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=r1(t,s);if(a==="causal")throw new _t("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=cr.fused.conv2d({x:l,filter:e,strides:n,pad:a==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:r,activation:u}),s==="channelsFirst"&&(l=cr.transpose(l,[0,3,1,2])),l})}function fCe(t,e,r,n=[1,1,1],a="valid",s,o){return(0,Pi.tidy)(()=>{if(s==null&&(s=ha()),sn(s),t.rank!==4&&t.rank!==5)throw new ce(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new ce(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let u=kI(t,s);if(a==="causal")throw new _t("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return u=cr.conv3d(u,e,n,a==="same"?"same":"valid","NDHWC",o),r!=null&&(u=pa(u,r)),s==="channelsFirst"&&(u=cr.transpose(u,[0,4,1,2,3])),u})}var Gh=class extends Nt{constructor(e,r){if(super(r),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Gh.verifyArgs(r),this.rank=e,Nn(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new _t(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Gl(r.kernelSize,e,"kernelSize"),this.strides=Gl(r.strides==null?1:r.strides,e,"strides"),this.padding=r.padding==null?"valid":r.padding,ca(this.padding),this.dataFormat=r.dataFormat==null?"channelsLast":r.dataFormat,sn(this.dataFormat),this.activation=Ho(r.activation),this.useBias=r.useBias==null?!0:r.useBias,this.biasInitializer=wr(r.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=pn(r.biasConstraint),this.biasRegularizer=kr(r.biasRegularizer),this.activityRegularizer=kr(r.activityRegularizer),this.dilationRate=Gl(r.dilationRate==null?1:r.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ce(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ce(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ce(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(os("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!ax(e.kernelSize,"number",1,3))throw new ce(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){let e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Go(this.activation),useBias:this.useBias,biasInitializer:Dr(this.biasInitializer),biasRegularizer:lr(this.biasRegularizer),activityRegularizer:lr(this.activityRegularizer),biasConstraint:dn(this.biasConstraint)},r=super.getConfig();return Object.assign(e,r),e}},Hl=class extends Gh{constructor(e,r){super(e,r),this.kernel=null,Hl.verifyArgs(r),this.filters=r.filters,Nn(this.filters,"filters"),this.kernelInitializer=wr(r.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=pn(r.kernelConstraint),this.kernelRegularizer=kr(r.kernelRegularizer)}build(e){e=Pt(e);let r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new ce(`The channel dimension of the input should be defined. Found ${e[r]}`);let n=e[r],a=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[r]:n}}],this.built=!0}call(e,r){return(0,Pi.tidy)(()=>{e=Tt(e);let n,a=this.bias==null?null:this.bias.read(),s=sx(this.activation.getClassName());if(s!=null&&this.rank===2)n=aee(e,this.kernel.read(),a,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)n=uCe(e,this.kernel.read(),a,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)n=aee(e,this.kernel.read(),a,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)n=fCe(e,this.kernel.read(),a,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new _t("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(n=this.activation.apply(n))}return n})}computeOutputShape(e){e=Pt(e);let r=[],n=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let s=0;s<n.length;++s){let o=ka(n[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);r.push(o)}let a=[e[0]];return this.dataFormat==="channelsLast"?(a=a.concat(r),a.push(this.filters)):(a.push(this.filters),a=a.concat(r)),a}getConfig(){let e={filters:this.filters,kernelInitializer:Dr(this.kernelInitializer),kernelRegularizer:lr(this.kernelRegularizer),kernelConstraint:dn(this.kernelConstraint)},r=super.getConfig();return Object.assign(e,r),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new ce(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}},Rf=class extends Hl{constructor(e){super(2,e),Rf.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!ax(e.kernelSize,"number",1,2))throw new ce(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}};Rf.className="Conv2D";Pi.serialization.registerClass(Rf);var Cf=class extends Hl{constructor(e){super(3,e),Cf.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new ce(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}};Cf.className="Conv3D";Pi.serialization.registerClass(Cf);var B0=class extends Rf{constructor(e){if(super(e),this.inputSpec=[new Mr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ce(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Pt(e),e.length!==4)throw new ce("Input should have rank 4; Received input shape: "+JSON.stringify(e));let r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new ce("The channel dimension of the inputs should be defined. Found `None`.");let n=e[r],a=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Mr({ndim:4,axes:{[r]:n}})],this.built=!0}call(e,r){return cr.tidy(()=>{let n=Tt(e);if(n.shape.length!==4)throw new ce(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${n.shape.length}`);let a=n.shape,s=a[0],o,u;this.dataFormat==="channelsFirst"?(o=2,u=3):(o=1,u=2);let l=a[o],h=a[u],p=this.kernelSize[0],v=this.kernelSize[1],y=this.strides[0],S=this.strides[1],A=Ko(l,y,p,this.padding),T=Ko(h,S,v,this.padding),I=[s,A,T,this.filters];this.dataFormat!=="channelsLast"&&(n=cr.transpose(n,[0,2,3,1]));let N=cr.conv2dTranspose(n,this.kernel.read(),I,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(N=cr.transpose(N,[0,3,1,2])),this.bias!=null&&(N=pa(N,this.bias.read(),this.dataFormat)),this.activation!=null&&(N=this.activation.apply(N)),N})}computeOutputShape(e){e=Pt(e);let r=e.slice(),n,a,s;this.dataFormat==="channelsFirst"?(n=1,a=2,s=3):(n=3,a=1,s=2);let o=this.kernelSize[0],u=this.kernelSize[1],l=this.strides[0],h=this.strides[1];return r[n]=this.filters,r[a]=Ko(r[a],l,o,this.padding),r[s]=Ko(r[s],h,u,this.padding),r}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}};B0.className="Conv2DTranspose";Pi.serialization.registerClass(B0);var L0=class extends Cf{constructor(e){if(super(e),this.inputSpec=[new Mr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new ce(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Pt(e),e.length!==5)throw new ce("Input should have rank 5; Received input shape: "+JSON.stringify(e));let r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new ce("The channel dimension of the inputs should be defined. Found `None`.");let n=e[r],a=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Mr({ndim:5,axes:{[r]:n}})],this.built=!0}call(e,r){return cr.tidy(()=>{let n=Tt(e);if(n.shape.length!==5)throw new ce(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${n.shape.length}`);let a=n.shape,s=a[0],o,u,l;this.dataFormat==="channelsFirst"?(l=2,o=3,u=4):(l=1,o=2,u=3);let h=a[l],p=a[o],v=a[u],y=this.kernelSize[0],S=this.kernelSize[1],A=this.kernelSize[2],T=this.strides[0],I=this.strides[1],N=this.strides[2],D=Ko(h,T,y,this.padding),C=Ko(p,I,S,this.padding),L=Ko(v,N,A,this.padding),z=[s,D,C,L,this.filters];this.dataFormat!=="channelsLast"&&(n=cr.transpose(n,[0,2,3,4,1]));let $=cr.conv3dTranspose(n,this.kernel.read(),z,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&($=cr.transpose($,[0,4,1,2,3])),this.bias!==null&&($=pa($,this.bias.read(),this.dataFormat)),this.activation!==null&&($=this.activation.apply($)),$})}computeOutputShape(e){e=Pt(e);let r=e.slice(),n,a,s,o;this.dataFormat==="channelsFirst"?(n=1,a=2,s=3,o=4):(n=4,a=1,s=2,o=3);let u=this.kernelSize[0],l=this.kernelSize[1],h=this.kernelSize[2],p=this.strides[0],v=this.strides[1],y=this.strides[2];return r[n]=this.filters,r[a]=Ko(r[a],p,u,this.padding),r[s]=Ko(r[s],v,l,this.padding),r[o]=Ko(r[o],y,h,this.padding),r}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}};L0.className="Conv3DTranspose";Pi.serialization.registerClass(L0);var vE=class extends Hl{constructor(e,r){if(super(e,r),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,r.filters==null)throw new ce("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(r.kernelInitializer!=null||r.kernelRegularizer!=null||r.kernelConstraint!=null)throw new ce("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(r.padding!=null&&r.padding!=="same"&&r.padding!=="valid")throw new ce(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(r.padding)}`);this.depthMultiplier=r.depthMultiplier==null?1:r.depthMultiplier,this.depthwiseInitializer=wr(r.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=kr(r.depthwiseRegularizer),this.depthwiseConstraint=pn(r.depthwiseConstraint),this.pointwiseInitializer=wr(r.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=kr(r.pointwiseRegularizer),this.pointwiseConstraint=pn(r.pointwiseConstraint)}build(e){if(e=Pt(e),e.length<this.rank+2)throw new ce(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);let r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null||e[r]<0)throw new ce(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[r])}`);let n=e[r],a=this.kernelSize.concat([n,this.depthMultiplier]),s=[];for(let u=0;u<this.rank;++u)s.push(1);s.push(n*this.depthMultiplier,this.filters);let o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",a,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new Mr({ndim:this.rank+2,axes:{[r]:n}})],this.built=!0}call(e,r){return(0,Pi.tidy)(()=>{e=Tt(e);let n;if(this.rank===1)throw new _t("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=cr.transpose(e,[0,2,3,1])),n=cr.separableConv2d(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(n=pa(n,this.bias.read(),this.dataFormat)),this.activation!=null&&(n=this.activation.apply(n)),this.dataFormat==="channelsFirst"&&(n=cr.transpose(n,[0,3,1,2])),n})}getConfig(){let e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Dr(this.depthwiseInitializer),e.pointwiseInitializer=Dr(this.pointwiseInitializer),e.depthwiseRegularizer=lr(this.depthwiseRegularizer),e.pointwiseRegularizer=lr(this.pointwiseRegularizer),e.depthwiseConstraint=dn(this.depthwiseConstraint),e.pointwiseConstraint=dn(this.pointwiseConstraint),e}};vE.className="SeparableConv";var P0=class extends vE{constructor(e){super(2,e)}};P0.className="SeparableConv2D";Pi.serialization.registerClass(P0);var Kl=class extends Hl{constructor(e){super(1,e),Kl.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){let e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!ax(e.kernelSize,"number",1,1))throw new ce(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}};Kl.className="Conv1D";Pi.serialization.registerClass(Kl);var q0=class extends Nt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,r){return(0,Pi.tidy)(()=>{if(e=Tt(e),this.dataFormat==="channelsLast"){let n=hy(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return hy(n,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{let n=hy(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return hy(n,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){let e={cropping:this.cropping,dataFormat:this.dataFormat},r=super.getConfig();return Object.assign(e,r),e}};q0.className="Cropping2D";Pi.serialization.registerClass(q0);var $0=class extends Nt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,sn(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,mK(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){let r=e[2]==null?null:this.size[0]*e[2],n=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],r,n]}else{let r=e[1]==null?null:this.size[0]*e[1],n=e[2]==null?null:this.size[1]*e[2];return[e[0],r,n,e[3]]}}call(e,r){return cr.tidy(()=>{let n=Tt(e),a=n.shape;if(this.dataFormat==="channelsFirst"){n=cr.transpose(n,[0,2,3,1]);let s=this.size[0]*a[2],o=this.size[1]*a[3],u=this.interpolation==="nearest"?cr.image.resizeNearestNeighbor(n,[s,o]):cr.image.resizeBilinear(n,[s,o]);return cr.transpose(u,[0,3,1,2])}else{let s=this.size[0]*a[1],o=this.size[1]*a[2];return this.interpolation==="nearest"?cr.image.resizeNearestNeighbor(n,[s,o]):cr.image.resizeBilinear(n,[s,o])}})}getConfig(){let e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},r=super.getConfig();return Object.assign(e,r),e}};$0.className="UpSampling2D";Pi.serialization.registerClass($0);var gE=ut(Mt()),n1=ut(Mt());function lCe(t,e,r=[1,1],n="valid",a,s){return(0,n1.tidy)(()=>{a==null&&(a=ha()),sn(a);let o=r1(t,a);if(t.rank!==4)throw new ce(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new ce(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=gE.depthwiseConv2d(o,e,r,n==="same"?"same":"valid","NHWC",s),a==="channelsFirst"&&(o=gE.transpose(o,[0,3,1,2])),o})}var z0=class extends Gh{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=wr(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=pn(e.depthwiseConstraint),this.depthwiseRegularizer=kr(e.depthwiseRegularizer)}build(e){if(e=Pt(e),e.length<4)throw new ce(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);let r=this.dataFormat==="channelsFirst"?1:3;if(e[r]==null||e[r]<0)throw new ce(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[r]}).`);let n=e[r],a=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",a,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,r){return(0,n1.tidy)(()=>{e=Tt(e);let n=lCe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(n=pa(n,this.bias.read(),this.dataFormat)),this.activation!=null&&(n=this.activation.apply(n)),n})}computeOutputShape(e){e=Pt(e);let r=this.dataFormat==="channelsFirst"?e[2]:e[1],n=this.dataFormat==="channelsFirst"?e[3]:e[2],a=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=ka(r,this.kernelSize[0],this.padding,this.strides[0]),o=ka(n,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],a,s,o]:[e[0],s,o,a]}getConfig(){let e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Dr(this.depthwiseInitializer),e.depthwiseRegularizer=lr(this.depthwiseRegularizer),e.depthwiseConstraint=dn(this.depthwiseRegularizer),e}};z0.className="DepthwiseConv2D";n1.serialization.registerClass(z0);var Bt=ut(Mt()),see=ut(Mt());var ot=ut(Mt()),Kn=ut(Mt());function TI(t,e,r,n){if(Array.isArray(t)){if(e!=null||r!=null)throw new ce("When inputs is an array, neither initialState or constants should be provided");n!=null&&(r=t.slice(t.length-n,t.length),t=t.slice(0,t.length-n)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function a(s){return s==null||Array.isArray(s)?s:[s]}return e=a(e),r=a(r),{inputs:t,initialState:e,constants:r}}function NI(t,e,r,n=!1,a,s,o=!1,u=!1){return ot.tidy(()=>{let l=e.shape.length;if(l<3)throw new ce(`Input should be at least 3D, but is ${l}D.`);let h=[1,0].concat(Yi(2,l));if(e=ot.transpose(e,h),s!=null)throw new _t("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),a!=null&&(a=ot.cast(ot.cast(a,"bool"),"float32"),a.rank===l-1&&(a=ot.expandDims(a,-1)),a=ot.transpose(a,h)),n&&(e=ot.reverse(e,0),a!=null&&(a=ot.reverse(a,0)));let p=[],v,y=r,S=e.shape[0],A=ot.unstack(e),T;a!=null&&(T=ot.unstack(a));for(let N=0;N<S;++N){let D=A[N],C=ot.tidy(()=>t(D,y));if(a==null)v=C[0],y=C[1];else{let L=ot.tidy(()=>{let z=T[N],$=ot.sub(ot.onesLike(z),z),G=ot.add(ot.mul(C[0],z),ot.mul(y[0],$)),j=y.map((K,M)=>ot.add(ot.mul(C[1][M],z),ot.mul(K,$)));return{output:G,newStates:j}});v=L.output,y=L.newStates}u&&p.push(v)}let I;return u&&(I=ot.stack(p,1)),[v,I,y]})}var Ta=class extends Nt{constructor(e){super(e);let r;if(e.cell==null)throw new ce("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?r=new Zh({cells:e.cell}):r=e.cell,r.stateSize==null)throw new ce("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=r,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Mr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Yi(0,e).map(r=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){mx(e)&&(e=e[0]),e=e;let r=this.cell.stateSize;Array.isArray(r)||(r=[r]);let n=r[0],a;if(this.returnSequences?a=[e[0],e[1],n]:a=[e[0],n],this.returnState){let s=[];for(let o of r)s.push([e[0],o]);return[a].concat(s)}else return a}computeMask(e,r){return ot.tidy(()=>{Array.isArray(r)&&(r=r[0]);let n=this.returnSequences?r:null;if(this.returnState){let a=this.states.map(s=>null);return[n].concat(a)}else return n})}get states(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,r=[];for(let n=0;n<e;++n)r.push(null);return r}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new _t("Constants support is not implemented in RNN yet.");mx(e)&&(e=e[0]),e=e;let n=this.stateful?e[0]:null,a=e.slice(2);this.inputSpec[0]=new Mr({shape:[n,null,...a]});let s=[e[0]].concat(e.slice(2));this.cell.build(s);let o;if(Array.isArray(this.cell.stateSize)?o=this.cell.stateSize:o=[this.cell.stateSize],this.stateSpec!=null){if(!Kn.util.arraysEqual(this.stateSpec.map(u=>u.shape[u.shape.length-1]),o))throw new ce(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=o.map(u=>new Mr({shape:[null,u]}));this.stateful&&this.resetStates()}resetStates(e,r=!1){(0,Kn.tidy)(()=>{if(!this.stateful)throw new Ea("Cannot call resetStates() on an RNN Layer that is not stateful.");let n=this.inputSpec[0].shape[0];if(n==null)throw new ce("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(a=>ot.zeros([n,a])):this.states_=[ot.zeros([n,this.cell.stateSize])];else if(e==null)ot.dispose(this.states_),this.keptStates!=null&&(ot.dispose(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(a=>ot.zeros([n,a])):this.states_[0]=ot.zeros([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ce(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);r===!0?this.keptStates.push(this.states_.slice()):ot.dispose(this.states_);for(let a=0;a<this.states_.length;++a){let s=e[a],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[a]:this.cell.stateSize,u=[n,o];if(!Kn.util.arraysEqual(s.shape,u))throw new ce(`State ${a} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${s.shape}`);this.states_[a]=s}}this.states_=this.states_.map(a=>ot.keep(a.clone()))})}apply(e,r){let n=r==null?null:r.initialState,a=r==null?null:r.constants;r==null&&(r={});let s=TI(e,n,a,this.numConstants);e=s.inputs,n=s.initialState,a=s.constants;let o=[],u=[];if(n!=null){r.initialState=n,o=o.concat(n),this.stateSpec=[];for(let h of n)this.stateSpec.push(new Mr({shape:h.shape}));u=u.concat(this.stateSpec)}if(a!=null&&(r.constants=a,o=o.concat(a),this.numConstants=a.length),o[0]instanceof Qi){let h=[e].concat(o),p=this.inputSpec.concat(u),v=this.inputSpec;this.inputSpec=p;let y=super.apply(h,r);return this.inputSpec=v,y}else return super.apply(e,r)}call(e,r){return(0,Kn.tidy)(()=>{let n=r==null?null:r.mask,a=r==null?null:r.training,s=r==null?null:r.initialState;e=Tt(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));let o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==o)throw new ce(`RNN Layer has ${o} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");let u={training:a},h=NI((A,T)=>{let I=this.cell.call([A].concat(T),u);return[I[0],I.slice(1)]},e,s,this.goBackwards,n,null,this.unroll,this.returnSequences),p=h[0],v=h[1],y=h[2];this.stateful&&this.resetStates(y,a);let S=this.returnSequences?v:p;return this.returnState?[S].concat(y):S})}getInitialState(e){return(0,Kn.tidy)(()=>{let r=ot.zeros(e.shape);return r=ot.sum(r,[1,2]),r=xf(r),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(n=>n>1?hx(r,[1,n]):r):this.cell.stateSize>1?[hx(r,[1,this.cell.stateSize])]:[r]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){let e=super.getConfig(),r={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(r.numConstants=this.numConstants);let n=this.cell.getConfig();return this.getClassName()===Ta.className&&(r.cell={className:this.cell.getClassName(),config:n}),Object.assign({},n,e,r)}static fromConfig(e,r,n={}){let a=r.cell,s=Va(a,n);return new e(Object.assign(r,{cell:s}))}};Ta.className="RNN";Kn.serialization.registerClass(Ta);var Ff=class extends Nt{},Hh=class extends Ff{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Nn(this.units,"units"),this.activation=Ho(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=wr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=wr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=wr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=kr(e.kernelRegularizer),this.recurrentRegularizer=kr(e.recurrentRegularizer),this.biasRegularizer=kr(e.biasRegularizer),this.kernelConstraint=pn(e.kernelConstraint),this.recurrentConstraint=pn(e.recurrentConstraint),this.biasConstraint=pn(e.biasConstraint),this.dropout=Rh([1,Vo([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Rh([1,Vo([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Pt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,r){return(0,Kn.tidy)(()=>{if(e=e,e.length!==2)throw new ce(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let n=e[1];e=e[0];let a=r.training==null?!1:r.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Lf({ones:()=>ot.onesLike(e),rate:this.dropout,training:a,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Lf({ones:()=>ot.onesLike(n),rate:this.recurrentDropout,training:a,dropoutFunc:this.dropoutFunc}));let s,o=this.dropoutMask,u=this.recurrentDropoutMask;o!=null?s=eo(ot.mul(e,o),this.kernel.read()):s=eo(e,this.kernel.read()),this.bias!=null&&(s=pa(s,this.bias.read())),u!=null&&(n=ot.mul(n,u));let l=ot.add(s,eo(n,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){let e=super.getConfig(),r={units:this.units,activation:Go(this.activation),useBias:this.useBias,kernelInitializer:Dr(this.kernelInitializer),recurrentInitializer:Dr(this.recurrentInitializer),biasInitializer:Dr(this.biasInitializer),kernelRegularizer:lr(this.kernelRegularizer),recurrentRegularizer:lr(this.recurrentRegularizer),biasRegularizer:lr(this.biasRegularizer),activityRegularizer:lr(this.activityRegularizer),kernelConstraint:dn(this.kernelConstraint),recurrentConstraint:dn(this.recurrentConstraint),biasConstraint:dn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,r)}};Hh.className="SimpleRNNCell";Kn.serialization.registerClass(Hh);var j0=class extends Ta{constructor(e){e.cell=new Hh(e),super(e)}call(e,r){return(0,Kn.tidy)(()=>{this.cell.dropoutMask!=null&&(ot.dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ot.dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=r==null?null:r.mask,a=r==null?null:r.training,s=r==null?null:r.initialState;return super.call(e,{mask:n,training:a,initialState:s})})}static fromConfig(e,r){return new e(r)}};j0.className="SimpleRNN";Kn.serialization.registerClass(j0);var Kh=class extends Ff{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new ce("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Nn(this.units,"units"),this.activation=Ho(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Ho(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=wr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=wr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=wr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=kr(e.kernelRegularizer),this.recurrentRegularizer=kr(e.recurrentRegularizer),this.biasRegularizer=kr(e.biasRegularizer),this.kernelConstraint=pn(e.kernelConstraint),this.recurrentConstraint=pn(e.recurrentConstraint),this.biasConstraint=pn(e.biasConstraint),this.dropout=Rh([1,Vo([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Rh([1,Vo([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Pt(e);let r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,r){return(0,Kn.tidy)(()=>{if(e=e,e.length!==2)throw new ce(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);let n=r.training==null?!1:r.training,a=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Lf({ones:()=>ot.onesLike(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Lf({ones:()=>ot.onesLike(a),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));let s=this.dropoutMask,o=this.recurrentDropoutMask,u,l,h;0<this.dropout&&this.dropout<1&&(e=ot.mul(e,s[0]));let p=eo(e,this.kernel.read());this.useBias&&(p=pa(p,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(a=ot.mul(a,o[0]));let v=this.recurrentKernel.read(),[y,S]=ot.split(v,[2*this.units,this.units],v.rank-1),A=eo(a,y),[T,I,N]=ot.split(p,3,p.rank-1),[D,C]=ot.split(A,2,A.rank-1);u=this.recurrentActivation.apply(ot.add(T,D)),l=this.recurrentActivation.apply(ot.add(I,C));let L=eo(ot.mul(l,a),S);h=this.activation.apply(ot.add(N,L));let z=ot.add(ot.mul(u,a),ot.mul(ot.add(1,ot.neg(u)),h));return[z,z]})}getConfig(){let e=super.getConfig(),r={units:this.units,activation:Go(this.activation),recurrentActivation:Go(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Dr(this.kernelInitializer),recurrentInitializer:Dr(this.recurrentInitializer),biasInitializer:Dr(this.biasInitializer),kernelRegularizer:lr(this.kernelRegularizer),recurrentRegularizer:lr(this.recurrentRegularizer),biasRegularizer:lr(this.biasRegularizer),activityRegularizer:lr(this.activityRegularizer),kernelConstraint:dn(this.kernelConstraint),recurrentConstraint:dn(this.recurrentConstraint),biasConstraint:dn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,r)}};Kh.className="GRUCell";Kn.serialization.registerClass(Kh);var U0=class extends Ta{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Kh(e),super(e)}call(e,r){return(0,Kn.tidy)(()=>{this.cell.dropoutMask!=null&&(ot.dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ot.dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=r==null?null:r.mask,a=r==null?null:r.training,s=r==null?null:r.initialState;return super.call(e,{mask:n,training:a,initialState:s})})}static fromConfig(e,r){return r.implmentation===0&&(r.implementation=1),new e(r)}};U0.className="GRU";Kn.serialization.registerClass(U0);var Bf=class extends Ff{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Nn(this.units,"units"),this.activation=Ho(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Ho(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=wr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=wr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=wr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=kr(e.kernelRegularizer),this.recurrentRegularizer=kr(e.recurrentRegularizer),this.biasRegularizer=kr(e.biasRegularizer),this.kernelConstraint=pn(e.kernelConstraint),this.recurrentConstraint=pn(e.recurrentConstraint),this.biasConstraint=pn(e.biasConstraint),this.dropout=Rh([1,Vo([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Rh([1,Vo([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var r;e=Pt(e);let n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let a;if(this.useBias){if(this.unitForgetBias){let s=this.biasInitializer,o=this.units;a=new(r=class extends va{apply(l,h){let p=s.apply([o]),v=new Bh().apply([o]),y=s.apply([o*2]);return DN(DN(p,v),y)}},r.className="CustomInit",r)}else a=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,a,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,r){return(0,Kn.tidy)(()=>{let n=r.training==null?!1:r.training;if(e=e,e.length!==3)throw new ce(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let a=e[1],s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Lf({ones:()=>ot.onesLike(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Lf({ones:()=>ot.onesLike(a),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));let o=this.dropoutMask,u=this.recurrentDropoutMask,l,h,p,v;0<this.dropout&&this.dropout<1&&(e=ot.mul(e,o[0]));let y=eo(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(a=ot.mul(a,u[0])),y=ot.add(y,eo(a,this.recurrentKernel.read())),this.useBias&&(y=pa(y,this.bias.read()));let[S,A,T,I]=ot.split(y,4,y.rank-1);l=this.recurrentActivation.apply(S),h=this.recurrentActivation.apply(A),p=ot.add(ot.mul(h,s),ot.mul(l,this.activation.apply(T))),v=this.recurrentActivation.apply(I);let N=ot.mul(v,this.activation.apply(p));return[N,N,p]})}getConfig(){let e=super.getConfig(),r={units:this.units,activation:Go(this.activation),recurrentActivation:Go(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Dr(this.kernelInitializer),recurrentInitializer:Dr(this.recurrentInitializer),biasInitializer:Dr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:lr(this.kernelRegularizer),recurrentRegularizer:lr(this.recurrentRegularizer),biasRegularizer:lr(this.biasRegularizer),activityRegularizer:lr(this.activityRegularizer),kernelConstraint:dn(this.kernelConstraint),recurrentConstraint:dn(this.recurrentConstraint),biasConstraint:dn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,r)}};Bf.className="LSTMCell";Kn.serialization.registerClass(Bf);var V0=class extends Ta{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Bf(e),super(e)}call(e,r){return(0,Kn.tidy)(()=>{this.cell.dropoutMask!=null&&(ot.dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ot.dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=r==null?null:r.mask,a=r==null?null:r.training,s=r==null?null:r.initialState;return super.call(e,{mask:n,training:a,initialState:s})})}static fromConfig(e,r){return r.implmentation===0&&(r.implementation=1),new e(r)}};V0.className="LSTM";Kn.serialization.registerClass(V0);var Zh=class extends Ff{constructor(e){super(e),this.cells=e.cells}get stateSize(){let e=[];for(let r of this.cells.slice().reverse())Array.isArray(r.stateSize)?e.push(...r.stateSize):e.push(r.stateSize);return e}call(e,r){return(0,Kn.tidy)(()=>{e=e;let n=e.slice(1),a=[];for(let u of this.cells.slice().reverse())Array.isArray(u.stateSize)?a.push(n.splice(0,u.stateSize.length)):a.push(n.splice(0,1));a.reverse();let s=[],o;for(let u=0;u<this.cells.length;++u){let l=this.cells[u];n=a[u],u===0?o=[e[0]].concat(n):o=[o[0]].concat(n),o=l.call(o,r),s.push(o.slice(1))}n=[];for(let u of s.slice().reverse())n.push(...u);return[o[0]].concat(n)})}build(e){mx(e)&&(e=e[0]),e=e;let r;this.cells.forEach((n,a)=>{Uo(`RNNCell_${a}`,()=>{n.build(e),Array.isArray(n.stateSize)?r=n.stateSize[0]:r=n.stateSize,e=[e[0],r]})}),this.built=!0}getConfig(){let e=super.getConfig(),r=s=>({className:s.getClassName(),config:s.getConfig()}),a={cells:this.cells.map(r)};return Object.assign({},e,a)}static fromConfig(e,r,n={}){let a=[];for(let s of r.cells)a.push(Va(s,n));return new e({cells:a})}get trainableWeights(){if(!this.trainable)return[];let e=[];for(let r of this.cells)e.push(...r.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let r of this.cells)e.push(...r.nonTrainableWeights);if(!this.trainable){let r=[];for(let n of this.cells)r.push(...n.trainableWeights);return r.concat(e)}return e}getWeights(){let e=[];for(let r of this.cells)e.push(...r.weights);return _y(e)}setWeights(e){let r=[];for(let n of this.cells){let a=n.weights.length,s=e.splice(a);for(let o=0;o<n.weights.length;++o)r.push([n.weights[o],s[o]])}s0(r)}};Zh.className="StackedRNNCells";Kn.serialization.registerClass(Zh);function Lf(t){let{ones:e,rate:r,training:n=!1,count:a=1,dropoutFunc:s}=t,o=()=>s!=null?s(e(),r):px(e(),r),u=()=>ql(o,e,n);return!a||a<=1?ot.keep(u().clone()):Array(a).fill(void 0).map(u).map(h=>ot.keep(h.clone()))}var cCe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r};var yE=class extends Ta{constructor(e){if(e.unroll)throw new _t("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new _t("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Mr({ndim:5})]}call(e,r){return Bt.tidy(()=>{if(this.cell.dropoutMask!=null&&(Bt.dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Bt.dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),r&&r.constants)throw new ce("ConvRNN2D cell does not support constants");let n=r==null?null:r.mask,a=r==null?null:r.training,s=r==null?null:r.initialState;return super.call(e,{mask:n,training:a,initialState:s})})}computeOutputShape(e){let r=this.computeSingleOutputShape(e);return this.returnSequences||(r=[r[0],...r.slice(2)]),this.returnState&&(r=[r,...Array(2).fill([e[0],...r.slice(-3)])]),r}getInitialState(e){return Bt.tidy(()=>{let{stateSize:r}=this.cell,n=e.shape,a=this.computeSingleOutputShape(n),s=[a[0],...a.slice(2)],o=Bt.zeros(s);return Array.isArray(r)?Array(r.length).fill(o):[o]})}resetStates(e,r=!1){Bt.tidy(()=>{if(!this.stateful)throw new Ea("Cannot call resetStates() on an RNN Layer that is not stateful.");let n=this.inputSpec[0].shape,a=this.computeSingleOutputShape(n),s=[a[0],...a.slice(2)];if(n[0]==null)throw new ce("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Bt.zeros(s)):this.states_=[Bt.zeros(s)];else if(e==null)Bt.dispose(this.states_),this.keptStates!=null&&(Bt.dispose(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Bt.zeros(s)):this.states_[0]=Bt.zeros(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ce(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);r?this.keptStates.push(this.states_.slice()):Bt.dispose(this.states_);for(let u=0;u<this.states_.length;++u){let l=e[u],h=s;if(!see.util.arraysEqual(l.shape,h))throw new ce(`State ${u} is incompatible with layer ${this.name}: expected shape=${h}, received shape=${l.shape}`);this.states_[u]=l}}this.states_=this.states_.map(u=>Bt.keep(u.clone()))})}computeSingleOutputShape(e){let{dataFormat:r,filters:n,kernelSize:a,padding:s,strides:o,dilationRate:u}=this.cell,l=r==="channelsFirst",h=e[l?3:2],p=e[l?4:3],v=ka(h,a[0],s,o[0],u[0]),y=ka(p,a[1],s,o[1],u[1]);return[...e.slice(0,2),...l?[n,v,y]:[v,y,n]]}};yE.className="ConvRNN2D";var Jh=class extends Bf{constructor(e){let{filters:r,kernelSize:n,strides:a,padding:s,dataFormat:o,dilationRate:u}=e;super(Object.assign({},e,{units:r})),this.filters=r,Nn(this.filters,"filters"),this.kernelSize=Gl(n,2,"kernelSize"),this.kernelSize.forEach(l=>Nn(l,"kernelSize")),this.strides=Gl(a||1,2,"strides"),this.strides.forEach(l=>Nn(l,"strides")),this.padding=s||"valid",ca(this.padding),this.dataFormat=o||"channelsLast",sn(this.dataFormat),this.dilationRate=Gl(u||1,2,"dilationRate"),this.dilationRate.forEach(l=>Nn(l,"dilationRate"))}build(e){var r;e=Pt(e);let n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ce(`The channel dimension of the input should be defined. Found ${e[n]}`);let a=e[n],s=4,o=this.kernelSize.concat([a,this.filters*s]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let u=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",u,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){let h=this.biasInitializer,p=this.filters;l=new(r=class extends va{apply(y,S){let A=h.apply([p]),T=Bt.ones([p]),I=h.apply([p*2]);return Jp([A,T,I])}},r.className="CustomInit",r)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,r){return Bt.tidy(()=>{if(e.length!==3)throw new ce(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let n=r.training||!1,a=e[0],s=e[1],o=e[2],u=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Lf({ones:()=>Bt.onesLike(a),rate:this.dropout,training:n,count:u,dropoutFunc:this.dropoutFunc}));let l=this.dropoutMask,h=(_,R,O)=>!R||!R[O]?_:Bt.mul(R[O],_),p=h(a,l,0),v=h(a,l,1),y=h(a,l,2),S=h(a,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Lf({ones:()=>Bt.onesLike(s),rate:this.recurrentDropout,training:n,count:u,dropoutFunc:this.dropoutFunc}));let A=this.recurrentDropoutMask,T=h(s,A,0),I=h(s,A,1),N=h(s,A,2),D=h(s,A,3),C=3,[L,z,$,G]=Bt.split(this.kernel.read(),u,C),[j,K,M,f]=this.useBias?Bt.split(this.bias.read(),u):[null,null,null,null];p=this.inputConv(p,L,j,this.padding),v=this.inputConv(v,z,K,this.padding),y=this.inputConv(y,$,M,this.padding),S=this.inputConv(S,G,f,this.padding);let[d,g,m,b]=Bt.split(this.recurrentKernel.read(),u,C);T=this.recurrentConv(T,d),I=this.recurrentConv(I,g),N=this.recurrentConv(N,m),D=this.recurrentConv(D,b);let E=this.recurrentActivation.apply(Bt.add(p,T)),k=this.recurrentActivation.apply(Bt.add(v,I)),w=Bt.add(Bt.mul(k,o),Bt.mul(E,this.activation.apply(Bt.add(y,N)))),c=Bt.mul(this.recurrentActivation.apply(Bt.add(S,D)),this.activation.apply(w));return[c,c,w]})}getConfig(){let e=super.getConfig(),{units:r}=e,n=cCe(e,["units"]),a={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},n,a)}inputConv(e,r,n,a){let s=Bt.conv2d(e,r,this.strides,a||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return n?pa(s,n,this.dataFormat):s}recurrentConv(e,r){return Bt.conv2d(e,r,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}};Jh.className="ConvLSTM2DCell";Bt.serialization.registerClass(Jh);var W0=class extends yE{constructor(e){let r=new Jh(e);super(Object.assign({},e,{cell:r}))}static fromConfig(e,r){return new e(r)}};W0.className="ConvLSTM2D";Bt.serialization.registerClass(W0);var hr=ut(Mt());var Yh=class extends Nt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;let r=e.shape,n=[];for(let a=0;a<this.noiseShape.length;++a)n.push(this.noiseShape[a]==null?r[a]:this.noiseShape[a]);return n}call(e,r){return(0,hr.tidy)(()=>{this.invokeCallHook(e,r);let n=Tt(e);if(0<this.rate&&this.rate<1){let a=r.training==null?!1:r.training,s=this.getNoiseShape(n);return ql(()=>px(n,this.rate,s,this.seed),()=>n,a)}return e})}getConfig(){let e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},r=super.getConfig();return Object.assign(e,r),e}dispose(){return super.dispose()}};Yh.className="Dropout";hr.serialization.registerClass(Yh);var G0=class extends Yh{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){let r=e.shape;return[r[0],1,r[2]]}};G0.className="SpatialDropout1D";hr.serialization.registerClass(G0);var H0=class extends Nt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let r=null;e.batchSize!=null&&(r=e.batchSize),this.batchInputShape=[r,e.inputDim]}this.units=e.units,Nn(this.units,"units"),this.activation=Ho(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=wr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=wr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=pn(e.kernelConstraint),this.biasConstraint=pn(e.biasConstraint),this.kernelRegularizer=kr(e.kernelRegularizer),this.biasRegularizer=kr(e.biasRegularizer),this.activityRegularizer=kr(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Pt(e);let r=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[r,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:r}}],this.built=!0}computeOutputShape(e){e=Pt(e);let r=e.slice();return r[r.length-1]=this.units,r}call(e,r){return(0,hr.tidy)(()=>{this.invokeCallHook(e,r);let n=Tt(e),a=sx(this.activation.getClassName()),s;return a!=null?s=eo(n,this.kernel.read(),a,this.bias?this.bias.read():null):(s=eo(n,this.kernel.read()),this.bias!=null&&(s=pa(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){let e={units:this.units,activation:Go(this.activation),useBias:this.useBias,kernelInitializer:Dr(this.kernelInitializer),biasInitializer:Dr(this.biasInitializer),kernelRegularizer:lr(this.kernelRegularizer),biasRegularizer:lr(this.biasRegularizer),activityRegularizer:lr(this.activityRegularizer),kernelConstraint:dn(this.kernelConstraint),biasConstraint:dn(this.biasConstraint)},r=super.getConfig();return Object.assign(e,r),e}};H0.className="Dense";hr.serialization.registerClass(H0);var K0=class extends Nt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Pt(e);for(let r of e.slice(1))if(r==null)throw new ce(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Qs(e,1)]}call(e,r){return(0,hr.tidy)(()=>{this.invokeCallHook(e,r);let n=Tt(e);if(this.dataFormat==="channelsFirst"&&n.rank>1){let a=[0];for(let s=2;s<n.rank;++s)a.push(s);a.push(1),n=(0,hr.transpose)(n,a)}return _K(n)})}getConfig(){let e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);let r=super.getConfig();return Object.assign(e,r),e}};K0.className="Flatten";hr.serialization.registerClass(K0);var Z0=class extends Nt{constructor(e){super(e),this.supportsMasking=!0,this.activation=Ho(e.activation)}call(e,r){return(0,hr.tidy)(()=>{this.invokeCallHook(e,r);let n=Tt(e);return this.activation.apply(n)})}getConfig(){let e={activation:Go(this.activation)},r=super.getConfig();return Object.assign(e,r),e}};Z0.className="Activation";hr.serialization.registerClass(Z0);var J0=class extends Nt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,r){return(0,hr.tidy)(()=>(e=Tt(e),bK(e,this.n)))}getConfig(){let e={n:this.n},r=super.getConfig();return Object.assign(e,r),e}};J0.className="RepeatVector";hr.serialization.registerClass(J0);var Y0=class extends Nt{constructor(e){super(e),this.targetShape=e.targetShape;for(let r=0;r<this.targetShape.length;++r)this.isUnknown(this.targetShape[r])&&(this.targetShape[r]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,r){let n="Total size of new array must be unchanged.",a=r.slice(),s=1,o=null;for(let l=0;l<a.length;++l){let h=a[l];if(this.isUnknown(h))if(o===null)o=l;else throw new ce("Can only specifiy one unknown dimension.");else s*=h}let u=Qs(e);if(o!==null){if(s===0||u%s!==0)throw new ce(n);a[o]=u/s}else if(u!==s)throw new ce(n);return a}computeOutputShape(e){let r=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){r=!0;break}return r?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,r){return(0,hr.tidy)(()=>{this.invokeCallHook(e,r);let n=Tt(e),a=n.shape,s=a.slice(0,1).concat(this.fixUnknownDimension(a.slice(1),this.targetShape));return(0,hr.reshape)(n,s)})}getConfig(){let e={targetShape:this.targetShape},r=super.getConfig();return Object.assign(e,r),e}};Y0.className="Reshape";hr.serialization.registerClass(Y0);var X0=class extends Nt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);let r=Yi(1,e.dims.length+1);if(!hr.util.arraysEqual(e.dims.slice().sort(),r))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Mr({ndim:this.dims.length+1})]}computeOutputShape(e){e=Pt(e);let r=e.slice();return this.dims.forEach((n,a)=>{r[a+1]=e[n]}),r}call(e,r){return(0,hr.transpose)(Tt(e),this.dimsIncludingBatch)}getConfig(){let e={dims:this.dims},r=super.getConfig();return Object.assign(e,r),e}};X0.className="Permute";hr.serialization.registerClass(X0);var Q0=class extends Nt{constructor(e){super(e==null?{}:e),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),r={maskValue:this.maskValue};return Object.assign(r,e),r}computeMask(e,r){let n=Tt(e),a=-1;return(0,hr.any)((0,hr.notEqual)(n,this.maskValue),a)}call(e,r){return(0,hr.tidy)(()=>{this.invokeCallHook(e,r);let n=Tt(e),a=-1,s=!0,o=(0,hr.any)((0,hr.notEqual)(n,this.maskValue),a,s);return(0,hr.mul)(n,(0,hr.cast)(o,n.dtype))})}};Q0.className="Masking";hr.serialization.registerClass(Q0);var uo=ut(Mt());var em=class extends Nt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let r=null;e.batchSize!=null&&(r=e.batchSize),e.inputLength==null?this.batchInputShape=[r,null]:this.batchInputShape=[r].concat(Er(e.inputLength))}this.inputDim=e.inputDim,Nn(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Nn(this.outputDim,"outputDim"),this.embeddingsInitializer=wr(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=kr(e.embeddingsRegularizer),this.activityRegularizer=kr(e.activityRegularizer),this.embeddingsConstraint=pn(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,r){return(0,uo.tidy)(()=>this.maskZero?(e=Tt(e),(0,uo.notEqual)(e,(0,uo.zerosLike)(e))):null)}computeOutputShape(e){if(e=Pt(e),this.inputLength==null)return[...e,this.outputDim];let r=Er(this.inputLength);if(r.length!==e.length-1)throw new ce(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let n=0;for(let a=0;a<r.length;++a){let s=r[a],o=e[a+1];if(s!=null&&o!=null&&s!==o)throw new ce(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(r[n]=o),n++}}return[e[0],...r,this.outputDim]}call(e,r){return(0,uo.tidy)(()=>{this.invokeCallHook(e,r);let n=Tt(e);n.dtype!=="int32"&&(n=Ch(n,"int32"));let a=dx(this.embeddings.read(),(0,uo.reshape)(n,[n.size]));return(0,uo.reshape)(a,Pt(this.computeOutputShape(n.shape)))})}getConfig(){let e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Dr(this.embeddingsInitializer),embeddingsRegularizer:lr(this.embeddingsRegularizer),activityRegularizer:lr(this.activityRegularizer),embeddingsConstraint:dn(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},r=super.getConfig();return Object.assign(e,r),e}};em.className="Embedding";uo.serialization.registerClass(em);var kt=ut(Mt()),qi=ut(Mt());var Pf=class extends Nt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new _t}computeElementwiseOpOutputShape(e,r){if(e==null||r==null)return null;if(e.length<r.length)return this.computeElementwiseOpOutputShape(r,e);if(r.length===0)return e;let n=e.slice(0,e.length-r.length);for(let a=0;a<r.length;++a){let s=e[e.length-r.length+a],o=r[a];if(s==null||o==null||s<0||o<0)n.push(null);else if(s===1)n.push(o);else if(o===1)n.push(s);else{if(s!==o)throw new ce("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(r));n.push(s)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Pt(e)]),e=e,e.length<2)throw new ce(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let r=[];for(let s of e)s!=null&&s[0]!==null&&r.push(s[0]);if(r=Xs(r),r.length>1)throw new ce(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let n=e[0]==null?null:e[0].slice(1);for(let s=1;s<e.length;++s){let o=e[s]==null?null:e[s].slice(1);n=this.computeElementwiseOpOutputShape(n,o)}let a=e.map(s=>s.length);e.indexOf(null)===-1&&Xs(a).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,r){return(0,qi.tidy)(()=>{if(e=e,this.reshapeRequired){let n=[],a=e.map(s=>s.rank);if(a.indexOf(null)===-1){let s=Vo(a);for(let o of e){let u=o.rank;for(let l=0;l<s-u;++l)o=xf(o,1);n.push(o)}return this.mergeFunction(n)}else{let s=!1;for(let l of e){let h=l.rank;if(h==null){let p=l.shape,v=p[0],y=p.slice(1).concat([v]),S=kt.reshape(l,[v].concat(Qs(p.slice(1))));S=kt.transpose(S,[1,0]),S=kt.reshape(S,y),n.push(S),s=!0}else if(h>1){let p=Yi(1,h).concat([0]);n.push(kt.transpose(l,p)),s=!0}else n.push(l)}let o=this.mergeFunction(n),u=o.rank;if(s){if(u==null){let l=o.shape,h=l.length,p=l[h-1],v=[p].concat(l.slice(0,l.length-1));o=kt.reshape(kt.transpose(kt.reshape(o,[-1,p]),[1,0]),v)}else if(u>1){let l=[u-1].concat(Yi(0,u-1));o=kt.transpose(o,l)}}return o}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let r;e[0]==null?r=null:r=e[0].slice(1);for(let a=1;a<e.length;++a){let s=e[a]==null?null:e[a].slice(1);r=this.computeElementwiseOpOutputShape(r,s)}let n=[];for(let a of e)a!=null&&a[0]!==null&&n.push(a[0]);return n=Xs(n),n.length===1?r=n.concat(r):r=[null].concat(r),r}computeMask(e,r){return kt.tidy(()=>{if(r==null)return null;if(!Array.isArray(r))throw new ce("`mask` should be an Array");if(!Array.isArray(e))throw new ce("`inputs` should be an Array");if(r.length!==e.length)throw new ce(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${r.length})`);if(r.every(a=>a==null))return null;r=r.map(a=>a==null?a:kt.expandDims(a,0));let n=r[0];for(let a=1;a<r.length-1;++a)n=kt.logicalAnd(n,r[a]);return n})}},tm=class extends Pf{constructor(e){super(e)}mergeFunction(e){return(0,qi.tidy)(()=>{let r=e[0].clone();for(let n=1;n<e.length;++n)r=kt.add(r,e[n]);return r})}};tm.className="Add";qi.serialization.registerClass(tm);var rm=class extends Pf{constructor(e){super(e)}mergeFunction(e){return(0,qi.tidy)(()=>{let r=e[0].clone();for(let n=1;n<e.length;++n)r=kt.mul(r,e[n]);return r})}};rm.className="Multiply";qi.serialization.registerClass(rm);var nm=class extends Pf{constructor(e){super(e)}mergeFunction(e){return(0,qi.tidy)(()=>{let r=e[0].clone();for(let n=1;n<e.length;++n)r=kt.add(r,e[n]);return kt.mul(1/e.length,r)})}};nm.className="Average";qi.serialization.registerClass(nm);var im=class extends Pf{constructor(e){super(e)}mergeFunction(e){return(0,qi.tidy)(()=>{let r=e[0];for(let n=1;n<e.length;++n)r=kt.maximum(r,e[n]);return r})}};im.className="Maximum";qi.serialization.registerClass(im);var am=class extends Pf{constructor(e){super(e)}mergeFunction(e){return(0,qi.tidy)(()=>{let r=e[0];for(let n=1;n<e.length;++n)r=kt.minimum(r,e[n]);return r})}};am.className="Minimum";qi.serialization.registerClass(am);var sm=class extends Pf{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new ce("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let r=!0;for(let a of e)if(a!=null){r=!1;break}if(r)return;let n=[];for(let a=0;a<e.length;++a){let s=e[a].slice();s.splice(this.axis,1);let o=!1;for(let u of n)if(qi.util.arraysEqual(u,s)){o=!0;break}o||n.push(s)}if(n.length>1)throw new ce("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return(0,qi.tidy)(()=>Jp(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new ce("A `Concatenate` layer should be called on a list of inputs.");let r=e,n=r[0].slice(),a=this.axis<0?n.length+this.axis:this.axis;for(let s of r.slice(1)){if(n[a]==null||s[a]==null){n[a]=null;break}n[a]+=s[a]}return n}computeMask(e,r){if(r==null)return null;if(!Array.isArray(r))throw new ce("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new ce("`inputs` should be an array for Concatenate");if(r.length!==e.length)throw new ce(`Mismatch in the length of mask (${r.length}) and the legnth of inputs (${e.length})`);return kt.tidy(()=>{let n=!0;if(r.forEach(o=>{if(o!=null){n=!1;return}}),n)return null;let a=[];for(let o=0;o<e.length;++o)r[o]==null?a.push(kt.cast(kt.onesLike(e[o]),"bool")):r[o].rank<e[o].rank?a.push(kt.expandDims(r[o],-1)):a.push(r[o]);let s=kt.concat(a,this.axis);return kt.all(s,-1,!1)})}getConfig(){let e={axis:this.axis},r=super.getConfig();return Object.assign(e,r),e}};sm.className="Concatenate";qi.serialization.registerClass(sm);function i1(t,e){for(;t<0;)t+=e;return t}function hCe(t,e,r){if(t.shape.length>3||e.shape.length>3)throw new _t("batchDot is not implemented for tensors of 4D or higher rank yet");if(kt.util.assert(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),kt.util.assert(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof r=="number"&&(r=[r,r]),t.dtype==="complex64"||e.dtype==="complex64")throw new _t("batchDot is not implemented for complex64-type Tensors yet.");let n=t.shape.length,a=e.shape.length;r==null&&(r=[n-1,a-2]);let s=r;return kt.tidy(()=>{let o;if(n>a){o=n-a;let l=[];for(let h=0;h<o;++h)l.push(1);e=kt.reshape(e,e.shape.concat(l))}else if(a>n){o=a-n;let l=[];for(let h=0;h<o;++h)l.push(1);t=kt.reshape(t,t.shape.concat(l))}else o=0;let u;if(t.shape.length===2&&e.shape.length===2)s[0]===s[1]?u=kt.sum(kt.mul(t,e),s[0]):u=kt.sum(kt.mul(kt.transpose(t,[1,0]),e),s[1]);else{let l=s[0]!==t.shape.length-1,h=s[1]===e.shape.length-1;u=kt.matMul(t,e,l,h)}if(o>0){let l;n>a?l=n+a-3:l=n-1;let h=[];for(let p=l;p<l+o;++p)h.push(p);u=kt.squeeze(u,h)}return u.shape.length===1&&(u=kt.expandDims(u,1)),u})}var om=class extends Pf{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){kt.util.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let r=e[0],n=e[1];if(r.length>3||n.length>3)throw new _t("Dot layer does not support tensors of 4D or higher rank yet.");let a=this.interpretAxes(r,n);if(r[a[0]]!==n[a[1]])throw new ce(`Dimension incompatibility: ${r[a[0]]} !== ${n[a[1]]}`)}mergeFunction(e){if(e.length!==2)throw new ce(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let r=e[0],n=e[1],a;return Array.isArray(this.axes)?a=this.axes.map((s,o)=>i1(s,e[o].shape.length)):a=[i1(this.axes,r.shape.length),i1(this.axes,n.shape.length)],this.normalize&&(r=Gy(r,a[0]),n=Gy(n,a[1])),hCe(r,n,a)}interpretAxes(e,r){let n;return Array.isArray(this.axes)?n=this.axes:n=[i1(this.axes,e.length),i1(this.axes,r.length)],n}computeOutputShape(e){kt.util.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let r=e[0].slice(),n=e[1].slice();if(r.length>3||n.length>3)throw new _t("Dot layer does not support tensors of 4D or higher rank yet.");let a=this.interpretAxes(r,n);r.splice(a[0],1),n.splice(a[1],1),n.splice(0,1);let s=r.concat(n);return s.length===1&&s.push(1),s}computeMask(e,r){return null}getConfig(){let e={axes:this.axes,normalize:this.normalize},r=super.getConfig();return Object.assign(e,r),e}};om.className="Dot";qi.serialization.registerClass(om);var si=ut(Mt());var um=class extends Nt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),r={stddev:this.stddev};return Object.assign(r,e),r}call(e,r){return(0,si.tidy)(()=>{this.invokeCallHook(e,r);let n=Tt(e);return ql(()=>(0,si.add)(Yp(n.shape,0,this.stddev),n),()=>n,r.training||!1)})}};um.className="GaussianNoise";si.serialization.registerClass(um);var fm=class extends Nt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),r={rate:this.rate};return Object.assign(r,e),r}call(e,r){return(0,si.tidy)(()=>{this.invokeCallHook(e,r);let n=Tt(e);return this.rate>0&&this.rate<1?ql(()=>{let s=Math.sqrt(this.rate/(1-this.rate));return(0,si.mul)(n,Yp(n.shape,1,s))},()=>n,r.training||!1):n})}};fm.className="GaussianDropout";si.serialization.registerClass(fm);var lm=class extends Nt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Tt(e).shape}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),r={rate:this.rate};return Object.assign(r,e),r}call(e,r){return(0,si.tidy)(()=>{if(this.rate<1&&this.rate>0){let n=this._getNoiseShape(e);return ql(()=>{let s=Tt(e),o=1.6732632423543772,u=1.0507009873554805,l=-o*u,h=(0,si.greaterEqual)((0,si.randomUniform)(n),this.rate);h=Ch(h,"float32");let p=((1-this.rate)*(1+this.rate*l**2))**-.5,v=-p*l*this.rate,y=(0,si.add)((0,si.mul)(s,h),(0,si.mul)((0,si.add)(h,-1),l));return(0,si.add)((0,si.mul)(y,p),v)},()=>Tt(e),r.training||!1)}return e})}};lm.className="AlphaDropout";si.serialization.registerClass(lm);var Zn=ut(Mt()),oi=ut(Mt());function a1(t,e,r,n,a,s=.001){let o;if(t.rank===2)o=Zn.batchNorm2d(t,e,r,n,a,s);else if(t.rank===3)o=Zn.batchNorm3d(t,e,r,n,a,s);else if(t.rank===4)o=Zn.batchNorm4d(t,e,r,n,a,s);else throw new _t(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return o}function dCe(t,e,r,n,a=.001){return(0,oi.tidy)(()=>{let s=Zn.moments(t,n),o=s.mean,u=s.variance;return[a1(t,o,u,r,e,a),o,u]})}function pCe(t,e,r,n,a=.001){return(0,oi.tidy)(()=>{let s=Zn.moments(t,n),o=s.mean,u=s.variance,l=[];for(let A of Yi(0,t.rank))n.indexOf(A)!==-1?l.push(1):l.push(t.shape[A]);let h=(0,oi.reshape)(o,l),p=(0,oi.reshape)(u,l),v=e==null?null:(0,oi.reshape)(e,l),y=r==null?null:(0,oi.reshape)(r,l);return[a1(t,h,p,y,v,a),o,u]})}function mCe(t,e,r,n,a=.001){return oi.util.arraysEqual(n.slice().sort(),Yi(0,t.rank-1))?dCe(t,e,r,n,a):pCe(t,e,r,n,a)}var cm=class extends Nt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=wr(e.betaInitializer||"zeros"),this.gammaInitializer=wr(e.gammaInitializer||"ones"),this.movingMeanInitializer=wr(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=wr(e.movingVarianceInitializer||"ones"),this.betaConstraint=pn(e.betaConstraint),this.gammaConstraint=pn(e.gammaConstraint),this.betaRegularizer=kr(e.betaRegularizer),this.gammaRegularizer=kr(e.gammaRegularizer)}build(e){e=Pt(e);let r=this.axis>=0?this.axis:this.axis+e.length,n=e[r];if(n==null)throw new ce(`Axis ${r} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Mr({ndim:e.length,axes:{[r]:n}})];let a=[n];this.scale&&(this.gamma=this.addWeight("gamma",a,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",a,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",a,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",a,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,r){return(0,oi.tidy)(()=>{let n=r.training==null?!1:r.training,a=Tt(e),s=a.shape,o=s.length,u=Yi(0,o),l=this.axis>=0?this.axis:this.axis+o;u.splice(l,1);let h=Js(1,o);h[l]=s[l];let p=u.slice();p.sort();let v=!oi.util.arraysEqual(p,Yi(0,o).slice(0,o-1)),y=()=>{if(v){let D=(0,oi.reshape)(this.movingMean.read(),h),C=(0,oi.reshape)(this.movingVariance.read(),h),L=this.center?(0,oi.reshape)(this.beta.read(),h):null,z=this.scale?(0,oi.reshape)(this.gamma.read(),h):null;return a1(a,D,C,L,z,this.epsilon)}else return a1(a,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!n)return y();let[S,A,T]=mCe(a,this.gamma.read(),this.beta.read(),u,this.epsilon),I=(D,C,L)=>{Zn.tidy(()=>{let z=1-L,$=D.read(),G=Zn.mul(Zn.sub($,C),z);D.write(Zn.sub($,G))})};return(()=>{I(this.movingMean,A,this.momentum),I(this.movingVariance,T,this.momentum)})(),S})}getConfig(){let e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Dr(this.betaInitializer),gammaInitializer:Dr(this.gammaInitializer),movingMeanInitializer:Dr(this.movingMeanInitializer),movingVarianceInitializer:Dr(this.movingVarianceInitializer),betaRegularizer:lr(this.betaRegularizer),gammaRegularizer:lr(this.gammaRegularizer),betaConstraint:dn(this.betaConstraint),gammaConstraint:dn(this.gammaConstraint)},r=super.getConfig();return Object.assign(e,r),e}};cm.className="BatchNormalization";oi.serialization.registerClass(cm);var hm=class extends Nt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(let r of this.axis)if(!Number.isInteger(r))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=wr(e.betaInitializer||"zeros"),this.gammaInitializer=wr(e.gammaInitializer||"ones"),this.betaRegularizer=kr(e.betaRegularizer),this.gammaRegularizer=kr(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Pt(e);let r=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=r);for(let s of this.axis)if(s<0||s>=r)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==Xs(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);let n=this.axis.map(s=>e[s]),a=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,a):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,a):this.beta=null,this.built=!0}call(e,r){let n=Tt(e),a=n.shape,s=a.length;return(0,oi.tidy)(()=>{let{mean:u,variance:l}=(0,oi.moments)(n,this.axis,!0),h=Js(1,s);for(let T of this.axis)h[T]=a[T];let p=T=>T!=null&&T.shape.length!==s?Zn.reshape(T,h):T,v=this.scale?p(this.gamma.read()):null,y=this.center?p(this.beta.read()):null,S=[],A=[];for(let T=0;T<s;++T)this.axis.indexOf(T)!==-1?(S.push(a[T]),A.push(1)):(S.push(1),A.push(a[T]));return u=Zn.tile(u,S),l=Zn.tile(l,S),v!=null&&(v=Zn.tile(v,A)),y!=null&&(y=Zn.tile(y,A)),a1(n,u,l,y,v,this.epsilon)})}getConfig(){let e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Dr(this.betaInitializer),gammaInitializer:Dr(this.gammaInitializer),betaRegularizer:lr(this.betaRegularizer),gammaRegularizer:lr(this.gammaRegularizer)},r=super.getConfig();return Object.assign(e,r),e}};hm.className="LayerNormalization";oi.serialization.registerClass(hm);var oee=ut(Mt()),s1=ut(Mt());function vCe(t,e,r){return(0,s1.tidy)(()=>{if(t.rank!==4)throw new ce(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new ce("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(r==null&&(r=ha()),r!=="channelsLast"&&r!=="channelsFirst")throw new ce(`Unknown data format: ${r}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let n;return r==="channelsFirst"?n=[[0,0],[0,0],e[0],e[1]]:n=[[0,0],e[0],e[1],[0,0]],oee.pad(t,n)})}var dm=class extends Nt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?ha():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new ce(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let r,n;if(typeof e.padding[0]=="number")r=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new ce(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(r=e.padding[0],e.padding[1].length!==2)throw new ce(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[r,n]}this.inputSpec=[new Mr({ndim:4})]}computeOutputShape(e){e=Pt(e);let r,n;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?r=e[2]+this.padding[0][0]+this.padding[0][1]:r=null,e[3]!=null&&e[3]>=0?n=e[3]+this.padding[1][0]+this.padding[1][1]:n=null,[e[0],e[1],r,n]):(e[1]!=null&&e[1]>=0?r=e[1]+this.padding[0][0]+this.padding[0][1]:r=null,e[2]!=null&&e[2]>=0?n=e[2]+this.padding[1][0]+this.padding[1][1]:n=null,[e[0],r,n,e[3]])}call(e,r){return(0,s1.tidy)(()=>vCe(Tt(e),this.padding,this.dataFormat))}getConfig(){let e={padding:this.padding,dataFormat:this.dataFormat},r=super.getConfig();return Object.assign(e,r),e}};dm.className="ZeroPadding2D";s1.serialization.registerClass(dm);var hi=ut(Mt()),di=ut(Mt());function EE(t,e,r,n,a,s){return(0,di.tidy)(()=>{sn(a),kN(s),ca(n),r==null&&(r=[1,1]),n==null&&(n="valid"),a==null&&(a=ha()),s==null&&(s="max"),t=r1(t,a);let o,u=n==="same"?"same":"valid";return s==="max"?o=hi.maxPool(t,e,r,u):o=hi.avgPool(t,e,r,u),a==="channelsFirst"&&(o=hi.transpose(o,[0,3,1,2])),o})}function uee(t,e,r,n,a,s){return(0,di.tidy)(()=>{sn(a),kN(s),ca(n),r==null&&(r=[1,1,1]),n==null&&(n="valid"),a==null&&(a=ha()),s==null&&(s="max"),t=kI(t,a);let o,u=n==="same"?"same":"valid";return s==="max"?o=hi.maxPool3d(t,e,r,u):o=hi.avgPool3d(t,e,r,u),a==="channelsFirst"&&(o=hi.transpose(o,[0,4,1,2,3])),o})}var bE=class extends Nt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new ce(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Nn(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new ce(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Nn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,ca(this.padding),this.inputSpec=[new Mr({ndim:3})]}computeOutputShape(e){e=Pt(e);let r=ka(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],r,e[2]]}call(e,r){return(0,di.tidy)(()=>{this.invokeCallHook(e,r),e=xf(Tt(e),2);let n=this.poolingFunction(Tt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return hi.squeeze(n,[2])})}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},r=super.getConfig();return Object.assign(e,r),e}},pm=class extends bE{constructor(e){super(e)}poolingFunction(e,r,n,a,s){return sn(s),ca(a),EE(e,r,n,a,s,"max")}};pm.className="MaxPooling1D";di.serialization.registerClass(pm);var mm=class extends bE{constructor(e){super(e)}poolingFunction(e,r,n,a,s){return sn(s),ca(a),EE(e,r,n,a,s,"avg")}};mm.className="AveragePooling1D";di.serialization.registerClass(mm);var wE=class extends Nt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new ce(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Nn(this.poolSize,"poolSize"),Nn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,sn(this.dataFormat),ca(this.padding),this.inputSpec=[new Mr({ndim:4})]}computeOutputShape(e){e=Pt(e);let r=this.dataFormat==="channelsFirst"?e[2]:e[1],n=this.dataFormat==="channelsFirst"?e[3]:e[2];return r=ka(r,this.poolSize[0],this.padding,this.strides[0]),n=ka(n,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],r,n]:[e[0],r,n,e[3]]}call(e,r){return(0,di.tidy)(()=>(this.invokeCallHook(e,r),this.poolingFunction(Tt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},r=super.getConfig();return Object.assign(e,r),e}},vm=class extends wE{constructor(e){super(e)}poolingFunction(e,r,n,a,s){return sn(s),ca(a),EE(e,r,n,a,s,"max")}};vm.className="MaxPooling2D";di.serialization.registerClass(vm);var gm=class extends wE{constructor(e){super(e)}poolingFunction(e,r,n,a,s){return sn(s),ca(a),EE(e,r,n,a,s,"avg")}};gm.className="AveragePooling2D";di.serialization.registerClass(gm);var _E=class extends Nt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new ce(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Nn(this.poolSize,"poolSize"),Nn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,sn(this.dataFormat),ca(this.padding),this.inputSpec=[new Mr({ndim:5})]}computeOutputShape(e){e=Pt(e);let r=this.dataFormat==="channelsFirst"?e[2]:e[1],n=this.dataFormat==="channelsFirst"?e[3]:e[2],a=this.dataFormat==="channelsFirst"?e[4]:e[3];return r=ka(r,this.poolSize[0],this.padding,this.strides[0]),n=ka(n,this.poolSize[1],this.padding,this.strides[1]),a=ka(a,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],r,n,a]:[e[0],r,n,a,e[4]]}call(e,r){return(0,di.tidy)(()=>(this.invokeCallHook(e,r),this.poolingFunction(Tt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},r=super.getConfig();return Object.assign(e,r),e}},ym=class extends _E{constructor(e){super(e)}poolingFunction(e,r,n,a,s){return sn(s),ca(a),uee(e,r,n,a,s,"max")}};ym.className="MaxPooling3D";di.serialization.registerClass(ym);var bm=class extends _E{constructor(e){super(e)}poolingFunction(e,r,n,a,s){return sn(s),ca(a),uee(e,r,n,a,s,"avg")}};bm.className="AveragePooling3D";di.serialization.registerClass(bm);var xE=class extends Nt{constructor(e){super(e),this.inputSpec=[new Mr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,r){throw new _t}},wm=class extends xE{constructor(e){super(e||{})}call(e,r){return(0,di.tidy)(()=>{let n=Tt(e);return hi.mean(n,1)})}};wm.className="GlobalAveragePooling1D";di.serialization.registerClass(wm);var _m=class extends xE{constructor(e){super(e||{})}call(e,r){return(0,di.tidy)(()=>{let n=Tt(e);return hi.max(n,1)})}};_m.className="GlobalMaxPooling1D";di.serialization.registerClass(_m);var SE=class extends Nt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,sn(this.dataFormat),this.inputSpec=[new Mr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,r){throw new _t}getConfig(){let e={dataFormat:this.dataFormat},r=super.getConfig();return Object.assign(e,r),e}},xm=class extends SE{call(e,r){return(0,di.tidy)(()=>{let n=Tt(e);return this.dataFormat==="channelsLast"?hi.mean(n,[1,2]):hi.mean(n,[2,3])})}};xm.className="GlobalAveragePooling2D";di.serialization.registerClass(xm);var Sm=class extends SE{call(e,r){return(0,di.tidy)(()=>{let n=Tt(e);return this.dataFormat==="channelsLast"?hi.max(n,[1,2]):hi.max(n,[2,3])})}};Sm.className="GlobalMaxPooling2D";di.serialization.registerClass(Sm);var Zl=ut(Mt()),Am=ut(Mt());var ME=class extends Nt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){let e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},r=super.getConfig();return Object.assign(e,r),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,r,n={}){let a=r.layer,s=Va(a,n);delete r.layer;let o={layer:s};return Object.assign(o,r),new e(o)}},Em=class extends ME{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Pt(e),e.length<3)throw new ce(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];let r=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(r),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Pt(e);let r=[e[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(r),a=e[1];return[n[0],a].concat(n.slice(1))}call(e,r){return(0,Am.tidy)(()=>(e=Tt(e),NI((o,u)=>[Tt(this.layer.call(o,r)),[]],e,[],!1,null,null,!1,!0)[1]))}};Em.className="TimeDistributed";Am.serialization.registerClass(Em);function gCe(t){Ru(dK,"BidirectionalMergeMode",t)}var yCe="concat",Mm=class extends ME{constructor(e){super(e);let r=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=r,this.forwardLayer=Va(n),r.goBackwards=r.goBackwards!==!0;let a={};if(a.className=e.layer.getClassName(),a.config=r,this.backwardLayer=Va(a),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?yCe:e.mergeMode,gCe(this.mergeMode),e.weights)throw new _t("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){let r=e.length,n=Math.floor(r/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let r=this.forwardLayer.computeOutputShape(e);Array.isArray(r)&&Array.isArray(r[0])||(r=[r]),r=r;let n,a,s;return this.returnState&&(s=r.slice(1)),n=r[0],n=n,this.mergeMode==="concat"?(n[n.length-1]*=2,a=[n]):this.mergeMode==null?a=[n,n.slice()]:a=[n],this.returnState?this.mergeMode==null?a.concat(s).concat(s.slice()):[n].concat(s).concat(s.slice()):gi(a)}apply(e,r){let n=r==null?null:r.initialState,a=r==null?null:r.constants;r==null&&(r={});let s=TI(e,n,a,this.numConstants);if(e=s.inputs,n=s.initialState,a=s.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(n==null||n.length===0)&&a==null)return super.apply(e,r);let o=[],u=[];if(n!=null){let h=n.length;if(h%2>0)throw new ce("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");r.initialState=n,o.push(...n);let p=n.map(v=>new Mr({shape:v.shape}));this.forwardLayer.stateSpec=p.slice(0,h/2),this.backwardLayer.stateSpec=p.slice(h/2),u.push(...p)}if(a!=null)throw new _t("Support for constants in Bidirectional layers is not implemented yet.");let l=o[0]instanceof Qi;for(let h of o)if(h instanceof Qi!==l)throw new ce("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){let h=[e].concat(o),p=this.inputSpec.concat(u),v=this.inputSpec;this.inputSpec=p;let y=super.apply(h,r);return this.inputSpec=v,y}else return super.apply(e,r)}call(e,r){return(0,Am.tidy)(()=>{let n=r.initialState,a,s;if(n==null)a=this.forwardLayer.call(e,r),s=this.backwardLayer.call(e,r);else{let l=n.slice(0,n.length/2),h=n.slice(n.length/2);a=this.forwardLayer.call(e,Object.assign(r,{initialState:l})),s=this.backwardLayer.call(e,Object.assign(r,{initialState:h}))}let o;this.returnState&&(Array.isArray(a)&&(o=a.slice(1).concat(s.slice(1))),a=a[0],s=s[0]),this.returnSequences&&(s=Zl.reverse(s,1));let u;return this.mergeMode==="concat"?u=Jp([a,s]):this.mergeMode==="sum"?u=Zl.add(a,s):this.mergeMode==="ave"?u=Zl.mul(.5,Zl.add(a,s)):this.mergeMode==="mul"?u=Zl.mul(a,s):this.mergeMode==null&&(u=[a,s]),this.returnState?this.mergeMode==null?u.concat(o):[u].concat(o):u})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Uo(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Uo(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,r){Array.isArray(r)&&(r=r[0]);let n;if(this.returnSequences?this.mergeMode==null?n=[r,r]:n=r:this.mergeMode==null?n=[null,null]:n=null,this.returnState){let s=this.forwardLayer.states.map(o=>null);return Array.isArray(n)?n.concat(s).concat(s):[n].concat(s).concat(s)}else return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){let e={mergeMode:this.mergeMode},r=super.getConfig();return Object.assign(e,r),e}static fromConfig(e,r){let n=Va(r.layer);if(delete r.layer,r.numConstants!=null)throw new _t("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let a=r;return a.layer=n,new e(a)}};Mm.className="Bidirectional";Am.serialization.registerClass(Mm);function bCe(t){return new Wo(t)}function wCe(t){return new R0(t)}function _Ce(t){return new I0(t)}function xCe(t){return new D0(t)}function SCe(t){return new O0(t)}function ECe(t){return new F0(t)}function MCe(t){return new C0(t)}function ACe(t){return new Kl(t)}function kCe(t){return new Rf(t)}function TCe(t){return new B0(t)}function NCe(t){return new Cf(t)}function ICe(t){return new L0(t)}function DCe(t){return new P0(t)}function OCe(t){return new q0(t)}function RCe(t){return new $0(t)}function CCe(t){return new z0(t)}function FCe(t){return new Z0(t)}function BCe(t){return new H0(t)}function LCe(t){return new Yh(t)}function PCe(t){return new G0(t)}function qCe(t){return new K0(t)}function $Ce(t){return new J0(t)}function zCe(t){return new Y0(t)}function jCe(t){return new X0(t)}function UCe(t){return new em(t)}function VCe(t){return new tm(t)}function WCe(t){return new nm(t)}function GCe(t){return new sm(t)}function HCe(t){return new im(t)}function KCe(t){return new am(t)}function ZCe(t){return new rm(t)}function JCe(t){return new om(t)}function YCe(t){return new cm(t)}function XCe(t){return new hm(t)}function QCe(t){return new dm(t)}function II(t){return new mm(t)}function eFe(t){return II(t)}function tFe(t){return II(t)}function DI(t){return new gm(t)}function rFe(t){return DI(t)}function nFe(t){return DI(t)}function OI(t){return new bm(t)}function iFe(t){return OI(t)}function aFe(t){return OI(t)}function sFe(t){return new wm(t)}function oFe(t){return new xm(t)}function fee(t){return new _m(t)}function lee(t){return new Sm(t)}function cee(t){return new pm(t)}function hee(t){return new vm(t)}function uFe(t){return new ym(t)}function fFe(t){return new U0(t)}function lFe(t){return new Kh(t)}function cFe(t){return new V0(t)}function hFe(t){return new Bf(t)}function dFe(t){return new j0(t)}function pFe(t){return new Hh(t)}function mFe(t){return new W0(t)}function vFe(t){return new Jh(t)}function gFe(t){return new Ta(t)}function yFe(t){return new Zh(t)}function bFe(t){return new Mm(t)}function wFe(t){return new Em(t)}var _Fe=fee,xFe=lee,SFe=cee,EFe=hee;function MFe(t){return new um(t)}function AFe(t){return new fm(t)}function kFe(t){return new lm(t)}function TFe(t){return new Q0(t)}var RI=null;function kE(t){RI=t}function Jl(){if(RI===null)throw Error(`
============================
Howdy \u{1F44B}\u{1F44B}. Looks like you are running @jsonstack/model but you haven't set a Tensorflow backend. 
To do so, simply import (or require) your tensorflow library, and call setBackend like so,

import * as tf from '@tensorflow/tfjs';
import * as jsm from '@jsonstack/model';
jsm.setBackend(tf);

That will let @jsonstack/model know you wish to use a tensorflow library to perform your calculations.
============================
    `);return RI}function km(t){let e=Jl();return Array.isArray(t)?t:t?Object.keys(t).map(r=>new e.CustomCallback({[r]:t[r]})):[]}var FI=class extends AE.Layer{constructor(r){super(r);Ye(this,"name");Ye(this,"lambdaFunction");Ye(this,"lambdaOutputShape");r.name===void 0&&(r.name=(+new Date*Math.random()).toString(36)),this.name=r.name,this.lambdaFunction=r.lambdaFunction,r.lambdaOutputShape&&(this.lambdaOutputShape=r.lambdaOutputShape)}call(r,n){let a=Jl();return a.tidy(()=>{let s=new Array;return s=new Function("input","tf",this.lambdaFunction)(r,a),s})}computeOutputShape(r){return this.lambdaOutputShape===void 0?r[0]:this.lambdaOutputShape}getConfig(){return{...super.getConfig(),lambdaFunction:this.lambdaFunction,lambdaOutputShape:this.lambdaOutputShape}}static get className(){return"LambdaLayer"}},Na=class{constructor(e={},r={}){Ye(this,"type");Ye(this,"settings");Ye(this,"model");Ye(this,"tokenizer");Ye(this,"tf");Ye(this,"trained");Ye(this,"compiled");Ye(this,"reshape");Ye(this,"getInputShape");Ye(this,"xShape");Ye(this,"yShape");Ye(this,"layers");Ye(this,"getTimeseriesShape");Ye(this,"loss");let n=Jl();return this.type="ModelInterface",this.settings=Object.assign({},e),this.model=r.model,this.tf=r.tf||n,this.trained=!1,this.compiled=!1,this.reshape=Na.reshape,this.getInputShape=Na.getInputShape,this.tf&&this.tf.serialization&&this.tf.serialization.registerClass&&this.tf.serialization.registerClass(FI),this}static reshape(e,r){let n=RFe(e);function a(l){return l.reduce((h,p)=>h*p)}if(!Array.isArray(e)||!Array.isArray(r))throw new TypeError("Array expected");if(r.length===0)throw new Tm(0,a(CI(e)),"!=");let s,o=1,u=r[0];for(let l=0;l<r.length;l++)o*=r[l];if(n.length!==o)throw new Tm(a(r),a(CI(e)),"!=");try{s=OFe(n,r)}catch(l){throw l instanceof Tm?new Tm(a(r),a(CI(e)),"!="):l}if(s.length!==u)throw new SyntaxError(`specified shape (${r}) is compatible with input array or length (${e.length})`);return s}static getInputShape(e=[]){if(Array.isArray(e)===!1||!e[0]||!e[0].length||Array.isArray(e[0])===!1)throw new TypeError("input must be a matrix");let r=[],n=e[0].length,a=e;for(e.forEach(s=>{if(s.length!==n)throw new SyntaxError("input must have the same length in each row")});r.push(a.length),Array.isArray(a[0]);)a=a[0];return r}exportConfiguration(){return{type:this.type,settings:this.settings,trained:this.trained,compiled:this.compiled,xShape:this.xShape,yShape:this.yShape,layers:this.layers}}importConfiguration(e){this.type=e.type||this.type,this.settings={...this.settings,...e.settings},this.trained=e.trained||this.trained,this.compiled=e.compiled||this.compiled,this.xShape=e.xShape||this.xShape,this.yShape=e.yShape||this.yShape,this.layers=e.layers||this.layers}train(e,r){throw new ReferenceError("train method is not implemented")}calculate(e){throw new ReferenceError("calculate method is not implemented")}async loadModel(e){return this.model=await this.tf.loadLayersModel(e),this.xShape=this.model.inputs[0].shape,this.yShape=this.model.outputs[0].shape,this.trained=!0,this.model}async saveModel(e){return await this.model.save(e)}async predict(e,r){if(!e||Array.isArray(e)===!1)throw new Error("invalid input matrix");let n={json:!0,probability:!0,...r},a=Array.isArray(e)||n.skip_matrix_check?e:[e];return this.calculate(a).data().then(s=>{if(n.json===!1)return s;{if(!this.yShape)throw new Error("Model is missing yShape");let o=[a.length,this.yShape[1]],u=n.probability===!1?Array.from(s).map(Math.round):Array.from(s);return this.reshape(u,o)}}).catch(s=>{throw s})}};function CI(t){let e=[];for(;Array.isArray(t);)e.push(t.length),t=t[0];return e}function OFe(t,e){for(var r=t,n,a=e.length-1;a>0;a--){var s=e[a];n=[];for(var o=r.length/s,u=0;u<o;u++)n.push(r.slice(u*s,(u+1)*s));r=n}return r}var Tm=class extends RangeError{constructor(r,n,a){let s="Dimension mismatch ("+(Array.isArray(r)?"["+r.join(", ")+"]":r)+" != "+(Array.isArray(n)?"["+n.join(", ")+"]":n)+")";super(s);Ye(this,"actual");Ye(this,"expected");Ye(this,"relation");Ye(this,"isDimensionError");this.actual=r,this.expected=n,this.relation=a,this.message=s,this.name="DimensionError",this.isDimensionError=!0}};function RFe(t){if(!Array.isArray(t))return t;let e=[];return t.forEach(function r(n){Array.isArray(n)?n.forEach(r):e.push(n)}),e}async function Nm(t,e){for(let r=0;r<t.length;r++)await e(t[r],r,t)}var pi=class extends Na{constructor(e={},r){let n=Object.assign({layers:[],compile:{loss:"meanSquaredError",optimizer:"adam"},fit:{epochs:100,batchSize:5,verbose:0}},e);return super(n,r),this.type="BaseNeuralNetwork",this}generateLayers(e,r){throw new ReferenceError("generateLayers method is not implemented")}async train(e,r,n,a,s){let o=this.getInputShape(e),u=this.getInputShape(r),l=this.tf.tensor(e,o),h=this.tf.tensor(r,u);return this.xShape=o,this.yShape=u,(typeof this.compiled=="undefined"||this.compiled===!1)&&(this.model=this.tf.sequential(),this.generateLayers.call(this,e,r,n||this.layers,a,s),this.model.compile(this.settings.compile),this.compiled=!0),await this.model.fit(l,h,this.settings.fit),this.trained=!0,l.dispose(),h.dispose(),this.model}calculate(e,r){if(!e||Array.isArray(e)===!1)throw new Error("invalid input matrix");let n=Array.isArray(e[0])?e:[e],a=this.tf.tensor(n),s=this.model.predict(a,r);return a.dispose(),s}};var Im=class extends pi{constructor(e={},r){let n=Object.assign({layers:[],layerPreference:"deep",compile:{loss:"meanSquaredError",optimizer:"adam"},fit:{epochs:100,batchSize:5}},e);return super(n,r),this.type="DeepLearningRegression",this}generateLayers(e,r,n){let a=this.getInputShape(e),s=this.getInputShape(r),o=[];n?o.push(...n):this.settings.layerPreference==="deep"?(o.push({units:a[1],inputShape:[a[1]],kernelInitializer:"randomNormal",activation:"relu"}),o.push({units:parseInt(String(Math.ceil(a[1]/2)),10),kernelInitializer:"randomNormal",activation:"relu"}),o.push({units:s[1],kernelInitializer:"randomNormal"})):(o.push({units:a[1]*2,inputShape:[a[1]],kernelInitializer:"randomNormal",activation:"relu"}),o.push({units:s[1],kernelInitializer:"randomNormal"})),this.layers=o,o.forEach(u=>{this.model.add(this.tf.layers.dense(u))})}};var Dm=class extends pi{constructor(e={},r){let n=Object.assign({layers:[],compile:{loss:"categoricalCrossentropy",optimizer:"adam"},fit:{epochs:100,batchSize:5}},e);return super(n,r),this.type="DeepLearningClassification",this}generateLayers(e,r,n){let a=this.getInputShape(e),s=this.getInputShape(r);this.yShape=s,this.xShape=a;let o=[];n?o.push(...n):(o.push({units:a[1]*2,inputDim:a[1],activation:"relu"}),o.push({units:s[1],activation:"softmax"})),this.layers=o,o.forEach(u=>{this.model.add(this.tf.layers.dense(u))})}};var Om=class extends pi{constructor(e={},r){let n=Object.assign({layers:[],type:"simple",compile:{loss:"meanSquaredError",optimizer:"rmsprop"},fit:{epochs:100,batchSize:5}},e);return super(n,r),this.type="LogisticRegression",this}generateLayers(e,r,n,a,s){let o=this.getInputShape(e),u=this.getInputShape(r);this.yShape=u,this.xShape=o;let l=[];if(n)l.push(...n);else if(this.settings.type==="class"&&this.settings.compile)l.push({units:1,inputDim:o[1],activation:"sigmoid"}),this.settings.compile.loss="binaryCrossentropy";else if(this.settings.type==="l1l2"&&this.settings.compile){let h=this.tf.regularizers.l1l2({l1:.01,l2:.01});l.push({units:1,inputDim:o[1],activation:"sigmoid",kernelRegularizer:h}),this.settings.compile.loss="binaryCrossentropy"}else l.push({units:1,inputShape:[o[1]]});this.layers=l,l.forEach(h=>{this.model.add(this.tf.layers.dense(h))}),a&&s&&this.settings&&this.settings.fit&&(this.settings.fit.validationData=[a,s])}};var Xh=class extends pi{constructor(e={},r={}){let n=Object.assign({layers:[],compile:{loss:"meanSquaredError",optimizer:"sgd"},fit:{epochs:500,batchSize:5}},e);return super(n,r),this.type="MultipleLinearRegression",this}generateLayers(e,r,n){let a=this.getInputShape(e),s=this.getInputShape(r),o=[];n?o.push(...n):o.push({units:s[1],inputShape:[a[1]]}),this.layers=o,o.forEach(u=>{this.model.add(this.tf.layers.dense(u))})}};var dee=ut(oh(),1),cs=class extends pi{constructor(r={},n){let a=Object.assign({layers:[],type:"simple",stateful:!1,stacked:!1,mulitpleTimeSteps:!1,lookback:1,batchSize:1,timeSteps:1,learningRate:.1,compile:{loss:"meanSquaredError",optimizer:"adam"},fit:{epochs:100,batchSize:1}},r);super(a,n);Ye(this,"createDataset");Ye(this,"getTimeseriesShape");Ye(this,"getTimeseriesDataSet");return this.type="LSTMTimeSeries",this.createDataset=cs.createDataset,this.getTimeseriesDataSet=cs.getTimeseriesDataSet,this.getTimeseriesShape=cs.getTimeseriesShape,this}static createDataset(r=[],n=1){let a=new Array,s=new Array;for(let o in(0,dee.default)(r.length-n-1)){let u=parseInt(o),l=r.slice(u,u+n);a.push(l),s.push(r[u+n])}return[a,s]}static getTimeseriesShape(r){let n=this.settings.timeSteps,a=this.getInputShape(r),s=a[0],o=n,u=a[1];return this.settings.mulitpleTimeSteps||this.settings.stateful?[s,u,o]:[s,o,u]}static getTimeseriesDataSet(r,n){let a=n||this.settings.lookback,s=cs.createDataset.call(this,r,a),o=s[0],u=s[1],l=pi.reshape(o,[o.length,a]),h=pi.getInputShape(l);return{yShape:pi.getInputShape(u),xShape:h,y_matrix:u,x_matrix:l}}generateLayers(r,n,a){let s=this.getInputShape(r),o=this.getInputShape(n);this.yShape=o,this.xShape=s;let u=[],l=[],h=[];if(a)a.lstmLayers&&a.lstmLayers.length&&u.push(...a.lstmLayers),a.rnnLayers&&a.rnnLayers.length&&l.push(...a.rnnLayers),a.denseLayers&&a.denseLayers.length&&h.push(...a.denseLayers);else if(this.settings&&this.settings.fit&&this.settings.stateful){let p=[this.settings.fit.batchSize,this.settings.lookback,1];l.push({units:4,batchInputShape:p,returnSequences:!0}),l.push({units:4,batchInputShape:p}),h.push({units:o[1]})}else{let p=[1,this.settings.lookback];u.push({units:4,inputShape:p}),h.push({units:o[1]})}u.length&&u.forEach(p=>{this.model.add(this.tf.layers.lstm(p))}),l.length&&l.forEach(p=>{this.model.add(this.tf.layers.simpleRNN(p))}),h.length&&h.forEach(p=>{this.model.add(this.tf.layers.dense(p))}),this.layers={lstmLayers:u,rnnLayers:l,denseLayers:h}}async train(r,n,a,s,o){let u,l,h,p=this.settings.lookback;if(n)l=r,h=n;else{let T=this.createDataset(r,p);l=T[0],h=T[1],u=this.getInputShape(h)}let v=this.getTimeseriesShape(l),y=pi.reshape(l,v),S=this.tf.tensor(y,v),A=this.tf.tensor(h,u);return this.xShape=v,this.yShape=u,this.compiled===!1&&(this.model=this.tf.sequential(),this.generateLayers.call(this,y,h,a||this.layers),this.model.compile(this.settings.compile),this.settings.fit&&this.settings.stateful&&(this.settings.fit.shuffle=!1),this.compiled=!0),await this.model.fit(S,A,this.settings.fit),this.trained=!0,S.dispose(),A.dispose(),this.model}calculate(r){let n=this.getTimeseriesShape(r),a=pi.reshape(r,n);return super.calculate(a)}async predict(r,n={}){return this.settings.stateful&&r.length>1?Promise.all(r.map(a=>super.predict([a],n))):super.predict.call(this,r,n)}};var TE=ut(oh(),1),Ln=class extends cs{constructor(r={},n){let a=Object.assign({layers:[],stateful:!0,mulitpleTimeSteps:!1,lookback:1,features:void 0,outputs:1,learningRate:.1,compile:{loss:"meanSquaredError",optimizer:"adam"},fit:{epochs:100,batchSize:1,shuffle:!1}},r);super(a,n);Ye(this,"createDataset");Ye(this,"seriesToSupervised");Ye(this,"getDropableColumns");Ye(this,"drop");Ye(this,"getTimeseriesShape");Ye(this,"getTimeseriesDataSet");return this.type="LSTMMultivariateTimeSeries",this.createDataset=Ln.createDataset,this.seriesToSupervised=Ln.seriesToSupervised,this.getDropableColumns=Ln.getDropableColumns,this.drop=Ln.drop,this.getTimeseriesShape=Ln.getTimeseriesShape,this.getTimeseriesDataSet=Ln.getTimeseriesDataSet,this}static createDataset(r=[],n=1){let a=this.settings&&this.settings.features?this.settings.features:r[0].length-1,s=n||this.settings.lookback||1,o=this.settings&&this.settings.outputs?this.settings.outputs:1,u=Ln.seriesToSupervised(r,s,o),l=Ln.getDropableColumns(a,s,o),h=Ln.drop(u,l),p=[0],v=[0,h[0].length-1];for(let A=0;A<s;A++)p.push((A+1)*a+1);let y=pee(h)[h[0].length-1];return[Ln.drop(h,v),y,a]}static drop(r,n){return r.reduce((a,s,o)=>(a[o]=[],s.forEach((u,l)=>{n.indexOf(l)===-1&&a[o].push(u)}),a),[])}static seriesToSupervised(r,n=1,a=1){if(a!==1)throw new RangeError("Only 1 future iteration supported");if(r&&Array.isArray(r)&&Array.isArray(r[0])&&r[0].length<2)throw new RangeError("Must include at least two columns, the first column must be the dependent variable, followed by independent variables");let s=[];for(let o in r){if(o=Number(parseInt(o)),o+n+a>r.length)break;s[o]=[];for(let l in(0,TE.default)(n))l=parseInt(l),s[o].push(...r[o+l]);for(let l in(0,TE.default)(a))l=parseInt(l),s[o].push(...r[o+l+n])}return s}static getDropableColumns(r,n,a){if(a!==1)throw new RangeError("Only 1 future iteration supported");let s=r+1,o=s*n+s*a;return(0,TE.default)(o-s+1,o)}static getTimeseriesShape(r){let n=this.settings&&this.settings.lookback?this.settings.lookback:1,a=this.getInputShape(r),s=a[0],o=n,u=this.settings&&this.settings.features?this.settings.features:a[1];return[s,o,u]}static getTimeseriesDataSet(r,n){let a=n||this.settings.lookback,s=Ln.createDataset.call(this,r,a),o=s[0],u=Ln.reshape(s[1],[s[1].length,1]),l=Ln.getTimeseriesShape.call(this,o),h=Ln.reshape(o,l),p=Ln.getInputShape(h),v=pee(u)[u[0].length-1];return{yShape:Ln.getInputShape(u),xShape:p,y_matrix:v,x_matrix:h}}generateLayers(r,n,a){let s=this.getInputShape(r),o=this.getInputShape(n);this.yShape=o,this.xShape=s;let u=[],l=[];if(a)a.lstmLayers&&a.lstmLayers.length&&u.push(...a.lstmLayers),a.denseLayers&&a.denseLayers.length&&l.push(...a.denseLayers);else{let h=[s[1],s[2]];u.push({units:10,inputShape:h}),l.push({units:o[1]})}u.length&&u.forEach(h=>{this.model.add(this.tf.layers.lstm(h))}),l.length&&l.forEach(h=>{this.model.add(this.tf.layers.dense(h))}),this.layers={lstmLayers:u,denseLayers:l}}async train(r,n,a,s,o){let u,l,h,p,v=this.settings.lookback;if(n)h=r,p=n,u=this.getInputShape(h),l=this.getInputShape(p);else{let I=this.createDataset(r,v);h=I[0],p=this.reshape(I[1],[I[1].length,1]),u=this.getInputShape(h),l=this.getInputShape(p)}let y=this.getTimeseriesShape(h),S=Ln.reshape(h,y),A=this.tf.tensor(S,y),T=this.tf.tensor(p,l);return this.xShape=y,this.yShape=l,this.compiled===!1&&(this.model=this.tf.sequential(),this.generateLayers.call(this,S,p,a||this.layers),this.model.compile(this.settings.compile),this.compiled=!0),s&&o&&this.settings&&this.settings.fit&&(this.settings.fit.validation_data=[s,o]),await this.model.fit(A,T,this.settings.fit),this.trained=!0,A.dispose(),T.dispose(),this.model}};function pee(t=[]){return t.reduce((e,r,n)=>(r.forEach((a,s)=>{n===0?e.push([a]):e[s].push(a)}),e),[])}var h3=ut(ere(),1),mne=ut(h8(),1),NHe="https://storage.googleapis.com/tfjs-models/savedmodel/universal_sentence_encoder";async function IHe(t){return(await mne.default.get(t)).data}async function DHe(){let t=await IHe(`${NHe}/vocab.json`);return new h3.Tokenizer(t)}var E1,M1,c3=class extends Na{constructor(e={},r){let n=Object.assign({},e);return super(n,r),this.type="TextEmbedding",this}async train(){let e=[];E1?e.push(Promise.resolve(E1)):e.push((0,h3.load)()),M1?e.push(Promise.resolve(M1)):e.push(DHe());let r=await Promise.all(e);return E1||(E1=r[0]),M1||(M1=r[1]),this.model=E1,this.tokenizer=M1,this.trained=!0,this.compiled=!0,this.model}calculate(e,r={}){if(!e||Array.isArray(e)===!1)throw new Error("invalid input array of sentences");return this.model.embed(e)}async predict(e,r={}){let n=Object.assign({json:!0,probability:!0},r),s=await(await this.calculate(e,r)).data();if(n.json===!1)return s;{let o=[e.length,512],u=r.probability===!1?Array.from(s).map(Math.round):Array.from(s);return this.reshape(u,o)}}};var mie=ut(oh(),1),vie=ut(die(),1);var zu=class extends pi{constructor(r={},n){let a={layers:[],type:"cbow",compile:{loss:"categoricalCrossentropy",optimizer:"rmsprop"},fit:{epochs:15,batchSize:1},embedSize:50,windowSize:2,PAD:"PAD",streamInputMatrix:!0,initialLayerInitializerType:"randomNormal",initialLayerInitializerOptions:{seed:1},...r};super(a,n);Ye(this,"featureToId");Ye(this,"idToFeature");Ye(this,"featureIds");Ye(this,"numberOfFeatures");Ye(this,"importedEmbeddings");Ye(this,"getMergedArray");Ye(this,"getFeatureDataSet");Ye(this,"getContextPairs");return this.type="FeatureEmbedding",this.featureToId,this.idToFeature,this.featureIds,this.numberOfFeatures,this.getMergedArray=zu.getMergedArray,this.getFeatureDataSet=zu.getFeatureDataSet.bind(this),this.getContextPairs=zu.getContextPairs.bind(this),this}static async getFeatureDataSet({inputMatrixFeatures:r,PAD:n="PAD",initialIdToFeature:a,initialFeatureToId:s}){let o=s?Object.keys(s).length:1,u={0:this&&this.settings&&this.settings.PAD?this.settings.PAD:n,...a},l=r.reduce((v,y)=>(y.forEach(S=>{v[S]||(u[o]&&o++,v[S]=o,u[o]=S,o++)}),v),{[n]:0,...s}),h=r.map(v=>v.map(y=>l[y])),p=Object.keys(l).length;return{featureToId:l,idToFeature:u,featureIds:h,numberOfFeatures:p}}static getMergedArray(r=[],n=[],a=!1,s=!0){let o=new Array().concat(r);return a?o.splice(r.length-n.length,n.length,...n):o.splice(0,n.length,...n),s&&a?o.slice(-1*r.length):s?o.slice(0,r.length):o}static async getContextPairs({inputMatrix:r,numberOfFeatures:n,window_size:a=2,tf:s}){let o=this&&this.tf?this.tf:Jl(),u=(this&&this.settings&&this.settings.windowSize?this.settings.windowSize:a)*2,[l,h]=await Promise.all([o.zeros([u]).array(),o.zeros([n]).array()]),p=[],v=[];return r.forEach((y,S)=>{y.forEach((A,T)=>{if(A!=0){let I=new Array().concat(h),N=new Array().concat(r[S]);N.splice(T,1);let D=zu.getMergedArray(l,N,!0);I[A]=1,p.push(D),v.push(I)}})}),{context_length:u,emptyXVector:l,emptyYVector:h,x:p,y:v}}generateLayers(r,n,a){if(!this.numberOfFeatures)throw ReferenceError(`${this.settings.name} model is missing numberOfFeatures`);if(!this.settings.embedSize)throw ReferenceError(`${this.settings.name} model is missing embedSize`);let s=[this.numberOfFeatures,this.settings.embedSize];this.yShape=s;let o=[];if(o.push({units:this.numberOfFeatures,inputDim:this.numberOfFeatures,outputDim:this.settings.embedSize,inputLength:(this.settings.windowSize||2)*2,embeddingsInitializer:this.settings.initialLayerInitializerType?this.tf.initializers[this.settings.initialLayerInitializerType](this.settings.initialLayerInitializerOptions):void 0}),o.push({lambdaFunction:"result = tf.mean(input,1,true)",lambdaOutputShape:[this.numberOfFeatures,this.settings.embedSize]}),o.push({units:this.numberOfFeatures,activation:"softmax"}),this.layers=o,this.model.add(this.tf.layers.embedding(o[0])),this.model.add(this.tf.layers.flatten()),this.model.add(this.tf.layers.dense(o[2])),a&&a.length&&a[0].weights){let u=this.model.getWeights();u[0]=a[0].weights,this.model.setWeights(u)}}async trainOnBatch({x_input_matrix:r,y_output_matrix:n,epoch:a,trainingLoss:s,inputVectorIndex:o,inputVectorLength:u}){var h,p,v,y,S,A,T,I;let l=1/0;return(p=(h=this.settings.fit)==null?void 0:h.callbacks)!=null&&p.onEpochBegin&&((y=(v=this.settings.fit)==null?void 0:v.callbacks)==null||y.onEpochBegin(a,{loss:s})),await Nm(r,async(N,D)=>{var j,K,M,f,d,g,m,b,E,k,w,c;(K=(j=this.settings.fit)==null?void 0:j.callbacks)!=null&&K.onBatchBegin&&((f=(M=this.settings.fit)==null?void 0:M.callbacks)==null||f.onBatchBegin(D,{loss:s}));let C=n[D],L=this.getInputShape([N]),z=this.tf.tensor(N,L),$=this.getInputShape([C]),G=this.tf.tensor(C,$);l=await this.model.trainOnBatch(z,G),(g=(d=this.settings.fit)==null?void 0:d.callbacks)!=null&&g.onYield&&((b=(m=this.settings.fit)==null?void 0:m.callbacks)==null||b.onYield(a,D,{loss:l,inputVectorIndex:o,inputVectorLength:u,completion:`${(100*(((o||D)+1)/(u||r.length))).toFixed(2)}%`})),(k=(E=this.settings.fit)==null?void 0:E.callbacks)!=null&&k.onBatchEnd&&((c=(w=this.settings.fit)==null?void 0:w.callbacks)==null||c.onBatchEnd(D,{loss:l})),z.dispose(),G.dispose()}),(A=(S=this.settings.fit)==null?void 0:S.callbacks)!=null&&A.onEpochEnd&&((I=(T=this.settings.fit)==null?void 0:T.callbacks)==null||I.onEpochEnd(a,{loss:l})),{loss:l}}async generateBatch({epoch:r}){if(!this.featureIds)throw ReferenceError(`${this.settings.name} model is missing featureIds`);let n=this.featureIds,a=(this&&this.settings&&this.settings.windowSize?this.settings.windowSize:2)*2,[s,o]=await Promise.all([this.tf.zeros([a]).array(),this.tf.zeros([this.numberOfFeatures]).array()]),u=[],l=[],h=1/0;return await Nm(n,async(p,v)=>{await Nm(p,async(y,S)=>{if(this.settings.checkInputMatrix&&this.numberOfFeatures&&y>=this.numberOfFeatures)console.warn("invalid word in corpus",{trainingLoss:h,word:y,"this.idToFeature[word]":this.idToFeature&&this.idToFeature[y],"this.numberOfFeatures":this.numberOfFeatures});else if(y!=0){let A=new Array().concat(o),T=new Array().concat(n[v]);T.splice(S,1);let I=zu.getMergedArray(s,T,!0);A[y]=1,u=[I],l=[A],this.settings.checkInputMatrix&&this.numberOfFeatures&&this.numberOfFeatures>0&&I.filter(N=>this.numberOfFeatures&&N>=this.numberOfFeatures).length?console.warn("Input matrix contains unknown weight",{input:I,"this.numberOfFeatures":this.numberOfFeatures}):(u=[I],l=[A],h=(await this.trainOnBatch({x_input_matrix:u,y_output_matrix:l,epoch:r,trainingLoss:h,inputVectorIndex:v,inputVectorLength:n.length})).loss)}})}),{loss:h}}async exportEmbeddings(){if(this.trained!==!0)throw new ReferenceError("The model has to be trained before embeddings can be exported");let r=await this.predict(),n=this.labelWeights(r);return{featureToId:this.featureToId,idToFeature:this.idToFeature,featureIds:this.featureIds,numberOfFeatures:this.numberOfFeatures,labeledWeights:n}}async importEmbeddings({featureToId:r,idToFeature:n,featureIds:a,numberOfFeatures:s,labeledWeights:o,addNewWeights:u=!0,inputMatrixFeatures:l,fixImportedWeights:h=!1}){this.model=void 0;let p;u&&(l&&(p=await this.getFeatureDataSet({inputMatrixFeatures:l,initialIdToFeature:n,initialFeatureToId:r}),r=p==null?void 0:p.featureToId,n=p==null?void 0:p.idToFeature,a=p==null?void 0:p.featureIds,s=p==null?void 0:p.numberOfFeatures),r&&await Nm(Object.keys(r),async S=>{(!o[S]||!o[S].length)&&(o[S]=await this.tf.randomUniform([1,this.settings.embedSize],-1,1).array(),Array.isArray(o[S][0])&&(typeof o[S].flat=="function"?o[S]=o[S].flat():o[S]=o[S].reduce((A,T)=>A.concat(T),[])))})),h&&Object.keys(o).forEach(S=>{Array.isArray(o[S][0])&&(typeof o[S].flat=="function"?o[S]=o[S].flat():o[S]=o[S].reduce((A,T)=>A.concat(T),[]))});let v=Object.keys(o)[0];if(!v||!o[v]||o[v].length!==this.settings.embedSize)throw new RangeError(`imported weights (${o[v]?o[v].length:"firstLabeledWeight:undefined"}) must have the same embedding size as model (${this.settings.embedSize})`);let y=this.tf.variable(this.tf.tensor(Object.values(o)));this.featureToId=r,this.idToFeature=n,this.featureIds=a,this.numberOfFeatures=s,y.shape[0]!==this.numberOfFeatures&&(console.warn("INVALID NUMBER OF this.numberOfFeatures",{"trainedWeights.shape[0]":y.shape[0],"this.numberOfFeatures":this.numberOfFeatures}),this.numberOfFeatures=y.shape[0]),this.compileModel({layers:[{weights:y}]}),this.importedEmbeddings=!0}compileModel({layers:r}={}){this.model=void 0,this.model=this.tf.sequential(),this.generateLayers.call(this,[],[],r||this.layers),this.model.compile(this.settings.compile),this.compiled=!0}async train(r,n,a){var o,u,l,h,p,v,y,S,A;if(!this.featureToId||!this.idToFeature||!this.featureIds||!this.numberOfFeatures){let T=await this.getFeatureDataSet({inputMatrixFeatures:r});this.featureToId=T.featureToId,this.idToFeature=T.idToFeature,this.featureIds=T.featureIds,this.numberOfFeatures=T.numberOfFeatures}else this.importedEmbeddings&&r&&r.length&&(this.featureIds=r);this.compiled===!1&&this.compileModel({layers:a});let s=1/0;return(u=(o=this.settings.fit)==null?void 0:o.callbacks)!=null&&u.onTrainBegin&&((h=(l=this.settings.fit)==null?void 0:l.callbacks)==null||h.onTrainBegin({loss:s})),await Nm((0,mie.default)(0,(p=this.settings.fit)==null?void 0:p.epochs),async T=>{if(this.settings.streamInputMatrix)s=(await this.generateBatch({epoch:T})).loss;else{if(!this.numberOfFeatures)throw ReferenceError(`${this.settings.name} model is missing numberOfFeatures`);if(!this.featureIds)throw ReferenceError(`${this.settings.name} model is missing featureIds`);let I=await this.getContextPairs({tf:this.tf,numberOfFeatures:this.numberOfFeatures,inputMatrix:this.featureIds}),N=I.x,D=I.y;s=(await this.trainOnBatch({x_input_matrix:N,y_output_matrix:D,epoch:T,trainingLoss:s})).loss}}),(y=(v=this.settings.fit)==null?void 0:v.callbacks)!=null&&y.onTrainEnd&&((A=(S=this.settings.fit)==null?void 0:S.callbacks)==null||A.onTrainEnd({loss:s})),this.loss=s,this.trained=!0,this.model}async calculate(){return this.model.getWeights()[0]}async predict(r={}){let n=await this.calculate();if(r.json===!1)return await n.data();{let a=await n.array();if(!this.yShape)throw new Error("Model is missing yShape");return this.reshape(a,n.shape)}}labelWeights(r){return r.reduce((n,a,s)=>(this.idToFeature&&(n[this.idToFeature[s]]=a),n),{})}async reduceWeights(r,n){let a=new vie.default({dim:2,perplexity:30,earlyExaggeration:4,learningRate:100,nIter:1e3,metric:"euclidean",...n});a.init({data:r,type:n?n.type:"dense"});let[s,o]=a.run();return a.getOutput()}async findSimilarFeatures(r,n={}){let a=this.tf,{features:s=[],limit:o=5,labeledWeights:u,metric:l="distance"}=n,h=u||this.labelWeights(r);return this.settings&&this.settings.PAD&&delete h[this.settings.PAD],s.reduce((p,v)=>{let y=h[v];if(!y)throw new ReferenceError(`Invalid feature: ${v}`);let S=Object.keys(h).map(A=>{let T=a.tidy(()=>{let I=a.metrics.cosineProximity(a.tensor(y),a.tensor(h[A])),N=a.metrics.meanSquaredError(a.tensor(y),a.tensor(h[A]));return[I.asScalar().dataSync()[0],N.asScalar().dataSync()[0]]});return{comparedFeature:A,proximity:T[0],distance:T[1]}}).sort((A,T)=>l==="distance"?A.distance-T.distance:A.proximity-T.proximity);return p[v]=S.slice(1,o+1),p},{})}},pie;(function(t){t.DISTANCE="distance",t.PROXIMITY="proximity"})(pie||(pie={}));var y8=null;function k3(t){y8=t}function T3(){if(y8===null)throw Error(`
============================
Howdy \u{1F44B}\u{1F44B}. Looks like you are running @jsonstack/model but you haven't set a ScikitJS backend. 
To do so, simply import (or require) your scikit library, and call setScikit like so,

import * as tf from '@tensorflow/tfjs';
import * as scikit from 'scikitjs';
import * as jsm from '@jsonstack/model';
jsm.setBackend(tf);
jsm.setScikit(scikit);

That will let @jsonstack/model know you wish to use a scikitjs library to perform your calculations.
============================
    `);return y8}var nc=class extends Na{constructor(r={},n={}){let a=T3(),s={...r};super(s,n);Ye(this,"scikit");return this.scikit=n.scikit||a,this.type="MachineLearningModelInterface",this}explain(){return{coefficients:this.model.coef,intercept:this.model.intercept}}};var N3=class extends nc{constructor(e={},r){var a,s;let n={layers:[],layerPreference:"deep",compile:{},fit:{callbacks:[]},...e};return super(n,r),(a=e==null?void 0:e.fit)!=null&&a.callbacks&&(n.fit.callbacks=[this.tf.callbacks.earlyStopping({monitor:"mse",patience:30})].concat(km((s=e==null?void 0:e.fit)==null?void 0:s.callbacks))),this.type="MachineLearningLinearRegression",this.model=new this.scikit.LinearRegression({modelFitOptions:n.fit}),this}async train(e,r){let n=this.getInputShape(e),a=this.getInputShape(r);return this.xShape=n,this.yShape=a,await this.model.fit(e,r,this.settings.fit),this.trained=!0,this.compiled=!0,this.model}calculate(e,r){if(!e||Array.isArray(e)===!1)throw new Error("invalid input matrix");let n=Array.isArray(e[0])?e:[e],a=this.tf.tensor(n),s=this.model.predict(a,r);return a.dispose(),s}};var I3=class extends nc{constructor(e={},r){var a,s;let n={layers:[],layerPreference:"deep",compile:{},fit:{callbacks:[]},...e};return super(n,r),(a=e==null?void 0:e.fit)!=null&&a.callbacks&&(n.fit.callbacks=[this.tf.callbacks.earlyStopping({monitor:"loss",patience:50})].concat(km((s=e==null?void 0:e.fit)==null?void 0:s.callbacks))),this.type="MachineLearningLogisticRegression",this.model=new this.scikit.LogisticRegression({modelFitOptions:n.fit}),this}async train(e,r){let n=r.map(o=>o[0]),a=this.getInputShape(e),s=this.getInputShape(r);return this.xShape=a,this.yShape=s,await this.model.fit(e,n,this.settings.fit),this.trained=!0,this.compiled=!0,this.model}calculate(e,r){if(!e||Array.isArray(e)===!1)throw new Error("invalid input matrix");let n=Array.isArray(e[0])?e:[e],a=this.tf.tensor(n),s=this.model.predict(a,r);return a.dispose(),s}};function b8(t){let e={};for(let r in t){let n=Object.getOwnPropertyDescriptor(t,r);n&&n.writable&&(e[r]=t[r])}return e}var gie=Symbol("isPending"),yie=Symbol("isFulfulled"),Jm=Symbol("isRejected"),w8=Symbol("isPaused");function aZe(t,e){if(typeof this.timeout=="number"&&this.timeout>0){let r=setTimeout(()=>{this.value=t,e(t),clearTimeout(r)},this.timeout)}else this.value=t,e(t)}function sZe(t,e){if(typeof this.timeout=="number"){let r=setTimeout(()=>{e(t),clearTimeout(r)},this.timeout)}else e(t)}var D3=class{constructor(e){this.action=e.action,this.timeout=e.timeout||0,this.index=e.index,this.value=e.value,this[gie]=!0,this[yie]=!1,this[Jm]=!1,this.fulfill=aZe.bind(this),this.reject=sZe.bind(this),this.next=void 0}resolve(e){return new Promise((r,n)=>{try{let a=typeof this.action=="function"?this.action(e):this.action;if(a&&typeof a.then=="function"&&typeof a.catch=="function")return a.then(s=>this.fulfill(s,r)).catch(s=>this.reject(s,n));this.fulfill(a,r)}catch(a){this.reject(a,n)}})}};gie,yie,Jm;function oZe(t){let e=[],r=t;for(;r;)e.push(r.value),r=r.next;return e}function bie(t,e){for(;this.active<this.concurrency&&this.current;){this.active++;let r=this.current;this.current=r.next,r.action=this.action,r.resolve(r.value).then(n=>{--this.active===0&&!this.current?t(this.decompress(this.root)):this.resolve(t,e)},n=>{this[Jm]=!0,e(n)})}}var Wf=class{constructor(e){this.action=e.action,this.concurrency=e.concurrency||1/0,this.values=e.values||[],this.active=0,this.timeout=e.timeout||0,this.current=void 0,this[w8]=!1,this[Jm]=!1,this.root=void 0,this.length=0,this.decompress=(e.decompress||oZe).bind(this)}insert(...e){for(let r=0;r<e.length;r++)if(this.length++,!this.root)this.root=new D3({index:r,action:void 0,value:e[r],timeout:this.timeout});else{let n=this.root;for(;n&&n.next;)n=n.next;n.next=new D3({index:r,action:void 0,value:e[r],timeout:this.timeout})}return this.current=this.root,this}resolve(e,r){if(!this.current||this[Jm]||this[w8])return null;if(e&&r)bie.call(this,e,r);else return new Promise((n,a)=>{bie.call(this,n,a)})}};w8,Jm;function _8(t,e,r,n){let a=typeof r=="function"?r:n,s=typeof r=="number"?r:void 0;return new Wf({action:t,concurrency:s}).insert(...e).resolve().then(l=>a(null,l)).catch(a)}function x8(t,e,r,n){let a=typeof r=="function"?r:n,s=typeof r=="number"?r:void 0;return new Wf({action:l=>{let{operation:h,key:p}=l;if(typeof h=="function"){if(Array.isArray(e)){let v=e;return Promise.all([h(...v),p])}return Promise.all([h(e),p])}return[h,p]},concurrency:s,decompress:l=>{let h={},p=l;for(;p;){let[v,y]=p.value;h[y]=v,p=p.next}return h}}).insert(...Object.keys(t).map(l=>({operation:t[l],key:l}))).resolve().then(l=>a(null,l)).catch(a)}function S8(t){return Object.keys(t).reduce((e,r)=>(t[r]&&typeof t[r]=="object"?e[r]=()=>$t.parallel(S8(t[r])):e[r]=t[r],e),{})}function E8(t,e,r){let n=typeof e=="function"?e:r,a=typeof e=="number"?e:void 0,s=[],o=[];return new Wf({action(h){if(typeof h=="function")try{let p=h();if(p&&typeof p.then=="function"&&typeof p.catch=="function")return p.then(v=>{s.push({value:v,status:"fulfilled"})},v=>{o.push({value:v,status:"rejected"})});s.push({value:p,status:"fulfilled"})}catch(p){o.push({value:p,status:"rejected"})}else s.push({value:h,status:"fulfilled"});return null},decompress(h){return null},concurrency:a}).insert(...t).resolve().then(()=>n(null,{fulfilled:s,rejected:o})).catch(n)}function M8(t){return function e(r,n){let a;try{a=t.next(r)}catch(u){n(u)}a||n(new Error("ERROR: generator returned 'undefined' value and is not iterable"));let{done:s,value:o}=a||{done:!0,value:null};if(s)n(null,o);else if(o&&typeof o.then=="function"&&typeof o.catch=="function")o.then(u=>e(u,n),n);else{let u=setTimeout(()=>{e(o,n),clearTimeout(u)},0)}}}function A8(t,e){let r;return function*(){do{let a=t();a&&typeof a.then=="function"&&typeof a.catch=="function"?yield a.then(s=>(r=s,r),s=>Promise.reject(s)):(r=a,yield r)}while(e(r))}}function uZe(t=0){return new Promise(e=>{let r=setTimeout(function(){clearTimeout(r),e()},t)})}function k8(t,e){let r,n=!0,{times:a,timeout:s}=e;return function*(){do{a--;let u=n||typeof s!="number"||s===0?t():(()=>uZe(s).then(t).catch(l=>Promise.reject(l)))();n=!1,u&&typeof u.then=="function"&&typeof u.catch=="function"?yield u.then(l=>(r={__isRejected:!1,e:null,value:l},r),l=>(r={__isRejected:!0,e:l,value:null},r)):(r={__isRejected:!1,e:null,value:u},yield r)}while(a&&r&&Object.hasOwnProperty.call(r,"__isRejected"));return r}}function fZe(t,e){return t.map(r=>{let n=typeof e=="object"?Array.isArray(e)?Object.assign([],e):Object.assign({},e):e;return typeof r=="function"?r(n):r})}function T8(t){return function*(){let r,n;for(;t.length;)r=t.shift(),Array.isArray(r)?n=yield Promise.all(fZe(r,n)).then(s=>Array.isArray(n)?n.concat(s):s).catch(s=>Promise.reject(s)):r!==void 0&&(n=yield r(n));return n}}var ju={safeAssign:b8,map:_8,parallel:x8,handleRecursiveParallel:S8,settle:E8,iterator:M8,doWhilst:A8,retry:k8,series:T8};function lZe(t){return t&&typeof t=="object"}function Ym(t,e){return{success:t,failure:typeof e=="function"?e:void 0}}var $t=class extends Promise{constructor(e){super(e)}then(e,r){return super.then(e,r)}try(e,r){let{success:n,failure:a}=Ym(function(s){try{return typeof e=="function"?e(s):$t.reject(new TypeError("ERROR: try expects onSuccess handler to be a function"))}catch(o){return $t.reject(o)}},r);return this.then(n,a)}spread(e,r){let{success:n,failure:a}=Ym(function(s){return typeof s[Symbol.iterator]!="function"?$t.reject(new TypeError("ERROR: spread expects input to be iterable")):typeof e!="function"?$t.reject(new TypeError("ERROR: spread expects onSuccess handler to be a function")):e(...s)},r);return this.then(n,a)}map(e,r,n){typeof r=="number"&&(n=r,r=void 0);let{success:a,failure:s}=Ym(function(o){return Array.isArray(o)?typeof e!="function"?$t.reject(new TypeError("ERROR: map expects onSuccess handler to be a function")):$t.map(o,n,e):$t.reject(new TypeError("ERROR: map expects input to be an array"))},r);return this.then(a,s)}each(e,r,n){typeof r=="number"&&(n=r,r=void 0);let{success:a,failure:s}=Ym(function(o){return Array.isArray(o)?typeof e!="function"?$t.reject(new TypeError("ERROR: each expects onSuccess handler to be a function")):$t.each(o,n,e):$t.reject(new TypeError("ERROR: each expects input to be an array"))},r);return this.then(a,s)}settle(e,r){let{success:n,failure:a}=Ym(function(s){if(!Array.isArray(s))return $t.reject(new TypeError("ERROR: settle expects input to be an array"));if(typeof e!="function")return $t.reject(new TypeError("ERROR: settle expects onSuccess handler to be a function"));let o=s.map(u=>()=>e(u));return $t.settle(o)},r);return this.then(n,a)}retry(e,r,n){r&&typeof r=="object"&&(n=r,r=void 0);let{success:a,failure:s}=Ym(function(o){return typeof e!="function"?$t.reject(new TypeError("ERROR: retry expects onSuccess handler to be a function")):$t.retry(()=>e(o),n)},r);return this.then(a,s)}finally(e){let r=()=>typeof e=="function"?e():$t.reject(new TypeError("ERROR: finally expects handler to be a function"));return this.then(r,r)}static promisify(e,r){let n=function(...a){return new $t((s,o)=>{a.push(function(u,l){u?o(u):s(l)}),e.apply(this,a)})};return r?n.bind(r):n}static promisifyAll(e,r,n){let a=Object.assign({readonly:!0,recursive:!1},n),s=Object.create(e);a.readonly?s=ju.safeAssign(e):s=Object.assign(s,e);let o={};return Object.keys(s).forEach(u=>{if(typeof s[u]=="function")o[`${u}Async`]=r?this.promisify(s[u],r):this.promisify(s[u]);else if(a.recursive){let l=s[u];lZe(l)&&(o[u]=this.promisifyAll(l,r,a))}}),o}static series(e){return $t.iterate(ju.series(e),null)}static pipe(e){return function(...r){let n=Object.assign([],e),a=n[0];return n[0]=function(){return a(...r)},$t.series(n)}}static compose(e){return $t.pipe(e.reverse())}static map(e,r,n){let a=typeof r=="function"?r:n;return typeof r!="number"&&(r=1),$t.promisify(ju.map)(a,e,r)}static each(e,r,n){return $t.map(e,r,n).then(()=>e)}static parallel(e,r,n={}){let{recursive:a=!1,concurrency:s}=n;return a&&(e=ju.handleRecursiveParallel(e)),$t.promisify(ju.parallel)(e,r,s)}static settle(e,r){return $t.promisify(ju.settle)(e,r)}static iterate(e,r){let n=ju.iterator(e(r));return $t.promisify(n)(r)}static doWhilst(e,r){return $t.iterate(ju.doWhilst(e,r),null)}static sleep(e){return new $t(r=>{setTimeout(()=>{r()},e)})}static retry(e,r){let{times:n=3,timeout:a=0}=r||{};return $t.iterate(ju.retry(e,{times:n,timeout:a}),null).then(s=>{let{__isRejected:o,e:u,value:l}=s;return o?$t.reject(u):$t.resolve(l)})}};var W3={};Zf(W3,{DateTime:()=>lt,Duration:()=>Ut,FixedOffsetZone:()=>qn,IANAZone:()=>bi,Info:()=>Wu,Interval:()=>un,InvalidZone:()=>md,Settings:()=>tn,SystemZone:()=>ru,VERSION:()=>FJe,Zone:()=>Ra});var Gf=class extends Error{},O3=class extends Gf{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}},R3=class extends Gf{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}},C3=class extends Gf{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}},Hf=class extends Gf{},Xm=class extends Gf{constructor(e){super(`Invalid unit ${e}`)}},Vi=class extends Gf{},eu=class extends Gf{constructor(){super("Zone is an abstract class")}};var mt="numeric",tu="short",ps="long",Qm={year:mt,month:mt,day:mt},N1={year:mt,month:tu,day:mt},N8={year:mt,month:tu,day:mt,weekday:tu},I1={year:mt,month:ps,day:mt},D1={year:mt,month:ps,day:mt,weekday:ps},O1={hour:mt,minute:mt},R1={hour:mt,minute:mt,second:mt},C1={hour:mt,minute:mt,second:mt,timeZoneName:tu},F1={hour:mt,minute:mt,second:mt,timeZoneName:ps},B1={hour:mt,minute:mt,hourCycle:"h23"},L1={hour:mt,minute:mt,second:mt,hourCycle:"h23"},P1={hour:mt,minute:mt,second:mt,hourCycle:"h23",timeZoneName:tu},q1={hour:mt,minute:mt,second:mt,hourCycle:"h23",timeZoneName:ps},$1={year:mt,month:mt,day:mt,hour:mt,minute:mt},z1={year:mt,month:mt,day:mt,hour:mt,minute:mt,second:mt},j1={year:mt,month:tu,day:mt,hour:mt,minute:mt},U1={year:mt,month:tu,day:mt,hour:mt,minute:mt,second:mt},I8={year:mt,month:tu,day:mt,weekday:tu,hour:mt,minute:mt},V1={year:mt,month:ps,day:mt,hour:mt,minute:mt,timeZoneName:tu},W1={year:mt,month:ps,day:mt,hour:mt,minute:mt,second:mt,timeZoneName:tu},G1={year:mt,month:ps,day:mt,weekday:ps,hour:mt,minute:mt,timeZoneName:ps},H1={year:mt,month:ps,day:mt,weekday:ps,hour:mt,minute:mt,second:mt,timeZoneName:ps};function Kt(t){return typeof t=="undefined"}function Uu(t){return typeof t=="number"}function K1(t){return typeof t=="number"&&t%1===0}function wie(t){return typeof t=="string"}function _ie(t){return Object.prototype.toString.call(t)==="[object Date]"}function F3(){try{return typeof Intl!="undefined"&&!!Intl.RelativeTimeFormat}catch{return!1}}function xie(t){return Array.isArray(t)?t:[t]}function O8(t,e,r){if(t.length!==0)return t.reduce((n,a)=>{let s=[e(a),a];return n&&r(n[0],s[0])===n[0]?n:s},null)[1]}function Sie(t,e){return e.reduce((r,n)=>(r[n]=t[n],r),{})}function ic(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Vu(t,e,r){return K1(t)&&t>=e&&t<=r}function cZe(t,e){return t-e*Math.floor(t/e)}function Xn(t,e=2){let r=t<0,n;return r?n="-"+(""+-t).padStart(e,"0"):n=(""+t).padStart(e,"0"),n}function Kf(t){if(!(Kt(t)||t===null||t===""))return parseInt(t,10)}function ac(t){if(!(Kt(t)||t===null||t===""))return parseFloat(t)}function Z1(t){if(!(Kt(t)||t===null||t==="")){let e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function ev(t,e,r=!1){let n=10**e;return(r?Math.trunc:Math.round)(t*n)/n}function hd(t){return t%4===0&&(t%100!==0||t%400===0)}function dd(t){return hd(t)?366:365}function tv(t,e){let r=cZe(e-1,12)+1,n=t+(e-r)/12;return r===2?hd(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function J1(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(e.getUTCFullYear()-1900)),+e}function rv(t){let e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,r=t-1,n=(r+Math.floor(r/4)-Math.floor(r/100)+Math.floor(r/400))%7;return e===4||n===3?53:52}function Y1(t){return t>99?t:t>60?1900+t:2e3+t}function B3(t,e,r,n=null){let a=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(s.timeZone=n);let o={timeZoneName:e,...s},u=new Intl.DateTimeFormat(r,o).formatToParts(a).find(l=>l.type.toLowerCase()==="timezonename");return u?u.value:null}function pd(t,e){let r=parseInt(t,10);Number.isNaN(r)&&(r=0);let n=parseInt(e,10)||0,a=r<0||Object.is(r,-0)?-n:n;return r*60+a}function R8(t){let e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new Vi(`Invalid unit value ${t}`);return e}function nv(t,e){let r={};for(let n in t)if(ic(t,n)){let a=t[n];if(a==null)continue;r[e(n)]=R8(a)}return r}function sc(t,e){let r=Math.trunc(Math.abs(t/60)),n=Math.trunc(Math.abs(t%60)),a=t>=0?"+":"-";switch(e){case"short":return`${a}${Xn(r,2)}:${Xn(n,2)}`;case"narrow":return`${a}${r}${n>0?`:${n}`:""}`;case"techie":return`${a}${Xn(r,2)}${Xn(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function X1(t){return Sie(t,["hour","minute","second","millisecond"])}var C8=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;var hZe=["January","February","March","April","May","June","July","August","September","October","November","December"],F8=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dZe=["J","F","M","A","M","J","J","A","S","O","N","D"];function B8(t){switch(t){case"narrow":return[...dZe];case"short":return[...F8];case"long":return[...hZe];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var L8=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],P8=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],pZe=["M","T","W","T","F","S","S"];function q8(t){switch(t){case"narrow":return[...pZe];case"short":return[...P8];case"long":return[...L8];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var $8=["AM","PM"],mZe=["Before Christ","Anno Domini"],vZe=["BC","AD"],gZe=["B","A"];function z8(t){switch(t){case"narrow":return[...gZe];case"short":return[...vZe];case"long":return[...mZe];default:return null}}function Eie(t){return $8[t.hour<12?0:1]}function Mie(t,e){return q8(e)[t.weekday-1]}function Aie(t,e){return B8(e)[t.month-1]}function kie(t,e){return z8(e)[t.year<0?0:1]}function Tie(t,e,r="always",n=!1){let a={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(r==="auto"&&s){let v=t==="days";switch(e){case 1:return v?"tomorrow":`next ${a[t][0]}`;case-1:return v?"yesterday":`last ${a[t][0]}`;case 0:return v?"today":`this ${a[t][0]}`;default:}}let o=Object.is(e,-0)||e<0,u=Math.abs(e),l=u===1,h=a[t],p=n?l?h[1]:h[2]||h[1]:l?a[t][0]:t;return o?`${u} ${p} ago`:`in ${u} ${p}`}function Nie(t,e){let r="";for(let n of t)n.literal?r+=n.val:r+=e(n.val);return r}var yZe={D:Qm,DD:N1,DDD:I1,DDDD:D1,t:O1,tt:R1,ttt:C1,tttt:F1,T:B1,TT:L1,TTT:P1,TTTT:q1,f:$1,ff:j1,fff:V1,ffff:G1,F:z1,FF:U1,FFF:W1,FFFF:H1},yi=class{static create(e,r={}){return new yi(e,r)}static parseFormat(e){let r=null,n="",a=!1,s=[];for(let o=0;o<e.length;o++){let u=e.charAt(o);u==="'"?(n.length>0&&s.push({literal:a,val:n}),r=null,n="",a=!a):a||u===r?n+=u:(n.length>0&&s.push({literal:!1,val:n}),n=u,r=u)}return n.length>0&&s.push({literal:a,val:n}),s}static macroTokenToFormatOpts(e){return yZe[e]}constructor(e,r){this.opts=r,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...r}).format()}formatDateTime(e,r={}){return this.loc.dtFormatter(e,{...this.opts,...r}).format()}formatDateTimeParts(e,r={}){return this.loc.dtFormatter(e,{...this.opts,...r}).formatToParts()}resolvedOptions(e,r={}){return this.loc.dtFormatter(e,{...this.opts,...r}).resolvedOptions()}num(e,r=0){if(this.opts.forceSimple)return Xn(e,r);let n={...this.opts};return r>0&&(n.padTo=r),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,r){let n=this.loc.listingMode()==="en",a=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(S,A)=>this.loc.extract(e,S,A),o=S=>e.isOffsetFixed&&e.offset===0&&S.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,S.format):"",u=()=>n?Eie(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(S,A)=>n?Aie(e,S):s(A?{month:S}:{month:S,day:"numeric"},"month"),h=(S,A)=>n?Mie(e,S):s(A?{weekday:S}:{weekday:S,month:"long",day:"numeric"},"weekday"),p=S=>{let A=yi.macroTokenToFormatOpts(S);return A?this.formatWithSystemDefault(e,A):S},v=S=>n?kie(e,S):s({era:S},"era"),y=S=>{switch(S){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return u();case"d":return a?s({day:"numeric"},"day"):this.num(e.day);case"dd":return a?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return h("short",!0);case"cccc":return h("long",!0);case"ccccc":return h("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return h("short",!1);case"EEEE":return h("long",!1);case"EEEEE":return h("narrow",!1);case"L":return a?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return a?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return a?s({month:"numeric"},"month"):this.num(e.month);case"MM":return a?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return a?s({year:"numeric"},"year"):this.num(e.year);case"yy":return a?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return a?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return a?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return v("short");case"GG":return v("long");case"GGGGG":return v("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return p(S)}};return Nie(yi.parseFormat(r),y)}formatDurationFromString(e,r){let n=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},a=l=>h=>{let p=n(h);return p?this.num(l.get(p),h.length):h},s=yi.parseFormat(r),o=s.reduce((l,{literal:h,val:p})=>h?l:l.concat(p),[]),u=e.shiftTo(...o.map(n).filter(l=>l));return Nie(s,a(u))}};var Wi=class{constructor(e,r){this.reason=e,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}};var Ra=class{get type(){throw new eu}get name(){throw new eu}get ianaName(){return this.name}get isUniversal(){throw new eu}offsetName(e,r){throw new eu}formatOffset(e,r){throw new eu}offset(e){throw new eu}equals(e){throw new eu}get isValid(){throw new eu}};var U8=null,ru=class extends Ra{static get instance(){return U8===null&&(U8=new ru),U8}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:r,locale:n}){return B3(e,r,n)}formatOffset(e,r){return sc(this.offset(e),r)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}};var P3={};function bZe(t){return P3[t]||(P3[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),P3[t]}var wZe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function _Ze(t,e){let r=t.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,a,s,o,u,l,h,p]=n;return[o,a,s,u,l,h,p]}function xZe(t,e){let r=t.formatToParts(e),n=[];for(let a=0;a<r.length;a++){let{type:s,value:o}=r[a],u=wZe[s];s==="era"?n[u]=o:Kt(u)||(n[u]=parseInt(o,10))}return n}var L3={},bi=class extends Ra{static create(e){return L3[e]||(L3[e]=new bi(e)),L3[e]}static resetCache(){L3={},P3={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=bi.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:r,locale:n}){return B3(e,r,n,this.name)}formatOffset(e,r){return sc(this.offset(e),r)}offset(e){let r=new Date(e);if(isNaN(r))return NaN;let n=bZe(this.name),[a,s,o,u,l,h,p]=n.formatToParts?xZe(n,r):_Ze(n,r);u==="BC"&&(a=-Math.abs(a)+1);let y=J1({year:a,month:s,day:o,hour:l===24?0:l,minute:h,second:p,millisecond:0}),S=+r,A=S%1e3;return S-=A>=0?A:1e3+A,(y-S)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}};var V8=null,qn=class extends Ra{static get utcInstance(){return V8===null&&(V8=new qn(0)),V8}static instance(e){return e===0?qn.utcInstance:new qn(e)}static parseSpecifier(e){if(e){let r=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new qn(pd(r[1],r[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${sc(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${sc(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,r){return sc(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}};var md=class extends Ra{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function nu(t,e){let r;if(Kt(t)||t===null)return e;if(t instanceof Ra)return t;if(wie(t)){let n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?ru.instance:n==="utc"||n==="gmt"?qn.utcInstance:qn.parseSpecifier(n)||bi.create(t)}else return Uu(t)?qn.instance(t):typeof t=="object"&&t.offset&&typeof t.offset=="number"?t:new md(t)}var Iie=()=>Date.now(),Die="system",Oie=null,Rie=null,Cie=null,Fie,tn=class{static get now(){return Iie}static set now(e){Iie=e}static set defaultZone(e){Die=e}static get defaultZone(){return nu(Die,ru.instance)}static get defaultLocale(){return Oie}static set defaultLocale(e){Oie=e}static get defaultNumberingSystem(){return Rie}static set defaultNumberingSystem(e){Rie=e}static get defaultOutputCalendar(){return Cie}static set defaultOutputCalendar(e){Cie=e}static get throwOnInvalid(){return Fie}static set throwOnInvalid(e){Fie=e}static resetCaches(){Rr.resetCache(),bi.resetCache()}};var Bie={};function SZe(t,e={}){let r=JSON.stringify([t,e]),n=Bie[r];return n||(n=new Intl.ListFormat(t,e),Bie[r]=n),n}var W8={};function G8(t,e={}){let r=JSON.stringify([t,e]),n=W8[r];return n||(n=new Intl.DateTimeFormat(t,e),W8[r]=n),n}var H8={};function EZe(t,e={}){let r=JSON.stringify([t,e]),n=H8[r];return n||(n=new Intl.NumberFormat(t,e),H8[r]=n),n}var K8={};function MZe(t,e={}){let{base:r,...n}=e,a=JSON.stringify([t,n]),s=K8[a];return s||(s=new Intl.RelativeTimeFormat(t,e),K8[a]=s),s}var Q1=null;function AZe(){return Q1||(Q1=new Intl.DateTimeFormat().resolvedOptions().locale,Q1)}function kZe(t){let e=t.indexOf("-u-");if(e===-1)return[t];{let r,n=t.substring(0,e);try{r=G8(t).resolvedOptions()}catch{r=G8(n).resolvedOptions()}let{numberingSystem:a,calendar:s}=r;return[n,a,s]}}function TZe(t,e,r){return(r||e)&&(t+="-u",r&&(t+=`-ca-${r}`),e&&(t+=`-nu-${e}`)),t}function NZe(t){let e=[];for(let r=1;r<=12;r++){let n=lt.utc(2016,r,1);e.push(t(n))}return e}function IZe(t){let e=[];for(let r=1;r<=7;r++){let n=lt.utc(2016,11,13+r);e.push(t(n))}return e}function q3(t,e,r,n,a){let s=t.listingMode(r);return s==="error"?null:s==="en"?n(e):a(e)}function DZe(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}var Z8=class{constructor(e,r,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;let{padTo:a,floor:s,...o}=n;if(!r||Object.keys(o).length>0){let u={useGrouping:!1,...n};n.padTo>0&&(u.minimumIntegerDigits=n.padTo),this.inf=EZe(e,u)}}format(e){if(this.inf){let r=this.floor?Math.floor(e):e;return this.inf.format(r)}else{let r=this.floor?Math.floor(e):ev(e,3);return Xn(r,this.padTo)}}},J8=class{constructor(e,r,n){this.opts=n;let a;if(e.zone.isUniversal){let o=-1*(e.offset/60),u=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&bi.create(u).valid?(a=u,this.dt=e):(a="UTC",n.timeZoneName?this.dt=e:this.dt=e.offset===0?e:lt.fromMillis(e.ts+e.offset*60*1e3))}else e.zone.type==="system"?this.dt=e:(this.dt=e,a=e.zone.name);let s={...this.opts};a&&(s.timeZone=a),this.dtf=G8(r,s)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}},Y8=class{constructor(e,r,n){this.opts={style:"long",...n},!r&&F3()&&(this.rtf=MZe(e,n))}format(e,r){return this.rtf?this.rtf.format(e,r):Tie(r,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,r){return this.rtf?this.rtf.formatToParts(e,r):[]}},Rr=class{static fromOpts(e){return Rr.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,r,n,a=!1){let s=e||tn.defaultLocale,o=s||(a?"en-US":AZe()),u=r||tn.defaultNumberingSystem,l=n||tn.defaultOutputCalendar;return new Rr(o,u,l,s)}static resetCache(){Q1=null,W8={},H8={},K8={}}static fromObject({locale:e,numberingSystem:r,outputCalendar:n}={}){return Rr.create(e,r,n)}constructor(e,r,n,a){let[s,o,u]=kZe(e);this.locale=s,this.numberingSystem=r||o||null,this.outputCalendar=n||u||null,this.intl=TZe(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=a,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=DZe(this)),this.fastNumbersCached}listingMode(){let e=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&r?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Rr.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,r=!1,n=!0){return q3(this,e,n,B8,()=>{let a=r?{month:e,day:"numeric"}:{month:e},s=r?"format":"standalone";return this.monthsCache[s][e]||(this.monthsCache[s][e]=NZe(o=>this.extract(o,a,"month"))),this.monthsCache[s][e]})}weekdays(e,r=!1,n=!0){return q3(this,e,n,q8,()=>{let a=r?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=r?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=IZe(o=>this.extract(o,a,"weekday"))),this.weekdaysCache[s][e]})}meridiems(e=!0){return q3(this,void 0,e,()=>$8,()=>{if(!this.meridiemCache){let r={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[lt.utc(2016,11,13,9),lt.utc(2016,11,13,19)].map(n=>this.extract(n,r,"dayperiod"))}return this.meridiemCache})}eras(e,r=!0){return q3(this,e,r,z8,()=>{let n={era:e};return this.eraCache[e]||(this.eraCache[e]=[lt.utc(-40,1,1),lt.utc(2017,1,1)].map(a=>this.extract(a,n,"era"))),this.eraCache[e]})}extract(e,r,n){let a=this.dtFormatter(e,r),s=a.formatToParts(),o=s.find(u=>u.type.toLowerCase()===n);return o?o.value:null}numberFormatter(e={}){return new Z8(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,r={}){return new J8(e,this.intl,r)}relFormatter(e={}){return new Y8(this.intl,this.isEnglish(),e)}listFormatter(e={}){return SZe(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}};function av(...t){let e=t.reduce((r,n)=>r+n.source,"");return RegExp(`^${e}$`)}function sv(...t){return e=>t.reduce(([r,n,a],s)=>{let[o,u,l]=s(e,a);return[{...r,...o},u||n,l]},[{},null,1]).slice(0,2)}function ov(t,...e){if(t==null)return[null,null];for(let[r,n]of e){let a=r.exec(t);if(a)return n(a)}return[null,null]}function Pie(...t){return(e,r)=>{let n={},a;for(a=0;a<t.length;a++)n[t[a]]=Kf(e[r+a]);return[n,null,r+a]}}var qie=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,OZe=`(?:${qie.source}?(?:\\[(${C8.source})\\])?)?`,X8=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,$ie=RegExp(`${X8.source}${OZe}`),Q8=RegExp(`(?:T${$ie.source})?`),RZe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,CZe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,FZe=/(\d{4})-?(\d{3})/,BZe=Pie("weekYear","weekNumber","weekDay"),LZe=Pie("year","ordinal"),PZe=/(\d{4})-(\d\d)-(\d\d)/,zie=RegExp(`${X8.source} ?(?:${qie.source}|(${C8.source}))?`),qZe=RegExp(`(?: ${zie.source})?`);function iv(t,e,r){let n=t[e];return Kt(n)?r:Kf(n)}function $Ze(t,e){return[{year:iv(t,e),month:iv(t,e+1,1),day:iv(t,e+2,1)},null,e+3]}function uv(t,e){return[{hours:iv(t,e,0),minutes:iv(t,e+1,0),seconds:iv(t,e+2,0),milliseconds:Z1(t[e+3])},null,e+4]}function eb(t,e){let r=!t[e]&&!t[e+1],n=pd(t[e+1],t[e+2]),a=r?null:qn.instance(n);return[{},a,e+3]}function tb(t,e){let r=t[e]?bi.create(t[e]):null;return[{},r,e+1]}var zZe=RegExp(`^T?${X8.source}$`),jZe=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function UZe(t){let[e,r,n,a,s,o,u,l,h]=t,p=e[0]==="-",v=l&&l[0]==="-",y=(S,A=!1)=>S!==void 0&&(A||S&&p)?-S:S;return[{years:y(ac(r)),months:y(ac(n)),weeks:y(ac(a)),days:y(ac(s)),hours:y(ac(o)),minutes:y(ac(u)),seconds:y(ac(l),l==="-0"),milliseconds:y(Z1(h),v)}]}var VZe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function eO(t,e,r,n,a,s,o){let u={year:e.length===2?Y1(Kf(e)):Kf(e),month:F8.indexOf(r)+1,day:Kf(n),hour:Kf(a),minute:Kf(s)};return o&&(u.second=Kf(o)),t&&(u.weekday=t.length>3?L8.indexOf(t)+1:P8.indexOf(t)+1),u}var WZe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function GZe(t){let[,e,r,n,a,s,o,u,l,h,p,v]=t,y=eO(e,a,n,r,s,o,u),S;return l?S=VZe[l]:h?S=0:S=pd(p,v),[y,new qn(S)]}function HZe(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var KZe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,ZZe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,JZe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Lie(t){let[,e,r,n,a,s,o,u]=t;return[eO(e,a,n,r,s,o,u),qn.utcInstance]}function YZe(t){let[,e,r,n,a,s,o,u]=t;return[eO(e,u,r,n,a,s,o),qn.utcInstance]}var XZe=av(RZe,Q8),QZe=av(CZe,Q8),eJe=av(FZe,Q8),tJe=av($ie),jie=sv($Ze,uv,eb,tb),rJe=sv(BZe,uv,eb,tb),nJe=sv(LZe,uv,eb,tb),iJe=sv(uv,eb,tb);function Uie(t){return ov(t,[XZe,jie],[QZe,rJe],[eJe,nJe],[tJe,iJe])}function Vie(t){return ov(HZe(t),[WZe,GZe])}function Wie(t){return ov(t,[KZe,Lie],[ZZe,Lie],[JZe,YZe])}function Gie(t){return ov(t,[jZe,UZe])}var aJe=sv(uv);function Hie(t){return ov(t,[zZe,aJe])}var sJe=av(PZe,qZe),oJe=av(zie),uJe=sv(uv,eb,tb);function Kie(t){return ov(t,[sJe,jie],[oJe,uJe])}var fJe="Invalid Duration",Zie={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},lJe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Zie},yo=146097/400,fv=146097/4800,cJe={years:{quarters:4,months:12,weeks:yo/7,days:yo,hours:yo*24,minutes:yo*24*60,seconds:yo*24*60*60,milliseconds:yo*24*60*60*1e3},quarters:{months:3,weeks:yo/28,days:yo/4,hours:yo*24/4,minutes:yo*24*60/4,seconds:yo*24*60*60/4,milliseconds:yo*24*60*60*1e3/4},months:{weeks:fv/7,days:fv,hours:fv*24,minutes:fv*24*60,seconds:fv*24*60*60,milliseconds:fv*24*60*60*1e3},...Zie},gd=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],hJe=gd.slice(0).reverse();function vd(t,e,r=!1){let n={values:r?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy};return new Ut(n)}function dJe(t){return t<0?Math.floor(t):Math.ceil(t)}function Jie(t,e,r,n,a){let s=t[a][r],o=e[r]/s,u=Math.sign(o)===Math.sign(n[a]),l=!u&&n[a]!==0&&Math.abs(o)<=1?dJe(o):Math.trunc(o);n[a]+=l,e[r]-=l*s}function pJe(t,e){hJe.reduce((r,n)=>Kt(e[n])?r:(r&&Jie(t,e,r,e,n),n),null)}var Ut=class{constructor(e){let r=e.conversionAccuracy==="longterm"||!1;this.values=e.values,this.loc=e.loc||Rr.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r?cJe:lJe,this.isLuxonDuration=!0}static fromMillis(e,r){return Ut.fromObject({milliseconds:e},r)}static fromObject(e,r={}){if(e==null||typeof e!="object")throw new Vi(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Ut({values:nv(e,Ut.normalizeUnit),loc:Rr.fromObject(r),conversionAccuracy:r.conversionAccuracy})}static fromDurationLike(e){if(Uu(e))return Ut.fromMillis(e);if(Ut.isDuration(e))return e;if(typeof e=="object")return Ut.fromObject(e);throw new Vi(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,r){let[n]=Gie(e);return n?Ut.fromObject(n,r):Ut.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,r){let[n]=Hie(e);return n?Ut.fromObject(n,r):Ut.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,r=null){if(!e)throw new Vi("need to specify a reason the Duration is invalid");let n=e instanceof Wi?e:new Wi(e,r);if(tn.throwOnInvalid)throw new C3(n);return new Ut({invalid:n})}static normalizeUnit(e){let r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!r)throw new Xm(e);return r}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,r={}){let n={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?yi.create(this.loc,n).formatDurationFromString(this,e):fJe}toHuman(e={}){let r=gd.map(n=>{let a=this.values[n];return Kt(a)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(a)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=ev(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;let r=this.toMillis();if(r<0||r>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e};let n=this.shiftTo("hours","minutes","seconds","milliseconds"),a=e.format==="basic"?"hhmm":"hh:mm";(!e.suppressSeconds||n.seconds!==0||n.milliseconds!==0)&&(a+=e.format==="basic"?"ss":":ss",(!e.suppressMilliseconds||n.milliseconds!==0)&&(a+=".SSS"));let s=n.toFormat(a);return e.includePrefix&&(s="T"+s),s}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;let r=Ut.fromDurationLike(e),n={};for(let a of gd)(ic(r.values,a)||ic(this.values,a))&&(n[a]=r.get(a)+this.get(a));return vd(this,{values:n},!0)}minus(e){if(!this.isValid)return this;let r=Ut.fromDurationLike(e);return this.plus(r.negate())}mapUnits(e){if(!this.isValid)return this;let r={};for(let n of Object.keys(this.values))r[n]=R8(e(this.values[n],n));return vd(this,{values:r},!0)}get(e){return this[Ut.normalizeUnit(e)]}set(e){if(!this.isValid)return this;let r={...this.values,...nv(e,Ut.normalizeUnit)};return vd(this,{values:r})}reconfigure({locale:e,numberingSystem:r,conversionAccuracy:n}={}){let a=this.loc.clone({locale:e,numberingSystem:r}),s={loc:a};return n&&(s.conversionAccuracy=n),vd(this,s)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;let e=this.toObject();return pJe(this.matrix,e),vd(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Ut.normalizeUnit(o));let r={},n={},a=this.toObject(),s;for(let o of gd)if(e.indexOf(o)>=0){s=o;let u=0;for(let h in n)u+=this.matrix[h][o]*n[h],n[h]=0;Uu(a[o])&&(u+=a[o]);let l=Math.trunc(u);r[o]=l,n[o]=(u*1e3-l*1e3)/1e3;for(let h in a)gd.indexOf(h)>gd.indexOf(o)&&Jie(this.matrix,a,h,r,o)}else Uu(a[o])&&(n[o]=a[o]);for(let o in n)n[o]!==0&&(r[s]+=o===s?n[o]:n[o]/this.matrix[s][o]);return vd(this,{values:r},!0).normalize()}negate(){if(!this.isValid)return this;let e={};for(let r of Object.keys(this.values))e[r]=this.values[r]===0?0:-this.values[r];return vd(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function r(n,a){return n===void 0||n===0?a===void 0||a===0:n===a}for(let n of gd)if(!r(this.values[n],e.values[n]))return!1;return!0}};var rb="Invalid Interval";function mJe(t,e){return!t||!t.isValid?un.invalid("missing or invalid start"):!e||!e.isValid?un.invalid("missing or invalid end"):e<t?un.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}var un=class{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,r=null){if(!e)throw new Vi("need to specify a reason the Interval is invalid");let n=e instanceof Wi?e:new Wi(e,r);if(tn.throwOnInvalid)throw new R3(n);return new un({invalid:n})}static fromDateTimes(e,r){let n=lv(e),a=lv(r),s=mJe(n,a);return s==null?new un({start:n,end:a}):s}static after(e,r){let n=Ut.fromDurationLike(r),a=lv(e);return un.fromDateTimes(a,a.plus(n))}static before(e,r){let n=Ut.fromDurationLike(r),a=lv(e);return un.fromDateTimes(a.minus(n),a)}static fromISO(e,r){let[n,a]=(e||"").split("/",2);if(n&&a){let s,o;try{s=lt.fromISO(n,r),o=s.isValid}catch{o=!1}let u,l;try{u=lt.fromISO(a,r),l=u.isValid}catch{l=!1}if(o&&l)return un.fromDateTimes(s,u);if(o){let h=Ut.fromISO(a,r);if(h.isValid)return un.after(s,h)}else if(l){let h=Ut.fromISO(n,r);if(h.isValid)return un.before(u,h)}}return un.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;let r=this.start.startOf(e),n=this.end.startOf(e);return Math.floor(n.diff(r,e).get(e))+1}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:r}={}){return this.isValid?un.fromDateTimes(e||this.s,r||this.e):this}splitAt(...e){if(!this.isValid)return[];let r=e.map(lv).filter(o=>this.contains(o)).sort(),n=[],{s:a}=this,s=0;for(;a<this.e;){let o=r[s]||this.e,u=+o>+this.e?this.e:o;n.push(un.fromDateTimes(a,u)),a=u,s+=1}return n}splitBy(e){let r=Ut.fromDurationLike(e);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:n}=this,a=1,s,o=[];for(;n<this.e;){let u=this.start.plus(r.mapUnits(l=>l*a));s=+u>+this.e?this.e:u,o.push(un.fromDateTimes(n,s)),n=s,a+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;let r=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return r>=n?null:un.fromDateTimes(r,n)}union(e){if(!this.isValid)return this;let r=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return un.fromDateTimes(r,n)}static merge(e){let[r,n]=e.sort((a,s)=>a.s-s.s).reduce(([a,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[a,s.union(o)]:[a.concat([s]),o]:[a,o],[[],null]);return n&&r.push(n),r}static xor(e){let r=null,n=0,a=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),u=o.sort((l,h)=>l.time-h.time);for(let l of u)n+=l.type==="s"?1:-1,n===1?r=l.time:(r&&+r!=+l.time&&a.push(un.fromDateTimes(r,l.time)),r=null);return un.merge(a)}difference(...e){return un.xor([this].concat(e)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:rb}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:rb}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:rb}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:rb}toFormat(e,{separator:r=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(e)}${r}${this.e.toFormat(e)}`:rb}toDuration(e,r){return this.isValid?this.e.diff(this.s,e,r):Ut.invalid(this.invalidReason)}mapEndpoints(e){return un.fromDateTimes(e(this.s),e(this.e))}};var Wu=class{static hasDST(e=tn.defaultZone){let r=lt.now().setZone(e).set({month:12});return!e.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(e){return bi.isValidZone(e)}static normalizeZone(e){return nu(e,tn.defaultZone)}static months(e="long",{locale:r=null,numberingSystem:n=null,locObj:a=null,outputCalendar:s="gregory"}={}){return(a||Rr.create(r,n,s)).months(e)}static monthsFormat(e="long",{locale:r=null,numberingSystem:n=null,locObj:a=null,outputCalendar:s="gregory"}={}){return(a||Rr.create(r,n,s)).months(e,!0)}static weekdays(e="long",{locale:r=null,numberingSystem:n=null,locObj:a=null}={}){return(a||Rr.create(r,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:r=null,numberingSystem:n=null,locObj:a=null}={}){return(a||Rr.create(r,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Rr.create(e).meridiems()}static eras(e="short",{locale:r=null}={}){return Rr.create(r,null,"gregory").eras(e)}static features(){return{relative:F3()}}};function Yie(t,e){let r=a=>a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=r(e)-r(t);return Math.floor(Ut.fromMillis(n).as("days"))}function vJe(t,e,r){let n=[["years",(u,l)=>l.year-u.year],["quarters",(u,l)=>l.quarter-u.quarter],["months",(u,l)=>l.month-u.month+(l.year-u.year)*12],["weeks",(u,l)=>{let h=Yie(u,l);return(h-h%7)/7}],["days",Yie]],a={},s,o;for(let[u,l]of n)if(r.indexOf(u)>=0){s=u;let h=l(t,e);o=t.plus({[u]:h}),o>e?(t=t.plus({[u]:h-1}),h-=1):t=o,a[u]=h}return[t,a,o,s]}function Xie(t,e,r,n){let[a,s,o,u]=vJe(t,e,r),l=e-a,h=r.filter(v=>["hours","minutes","seconds","milliseconds"].indexOf(v)>=0);h.length===0&&(o<e&&(o=a.plus({[u]:1})),o!==a&&(s[u]=(s[u]||0)+l/(o-a)));let p=Ut.fromObject(s,n);return h.length>0?Ut.fromMillis(l,n).shiftTo(...h).plus(p):p}var tO={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},Qie={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},gJe=tO.hanidec.replace(/[\[|\]]/g,"").split("");function eae(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(t[r].search(tO.hanidec)!==-1)e+=gJe.indexOf(t[r]);else for(let a in Qie){let[s,o]=Qie[a];n>=s&&n<=o&&(e+=n-s)}}return parseInt(e,10)}else return e}function bo({numberingSystem:t},e=""){return new RegExp(`${tO[t||"latn"]}${e}`)}var yJe="missing Intl.DateTimeFormat.formatToParts support";function Cr(t,e=r=>r){return{regex:t,deser:([r])=>e(eae(r))}}var bJe=String.fromCharCode(160),nae=`[ ${bJe}]`,iae=new RegExp(nae,"g");function wJe(t){return t.replace(/\./g,"\\.?").replace(iae,nae)}function tae(t){return t.replace(/\./g,"").replace(iae," ").toLowerCase()}function iu(t,e){return t===null?null:{regex:RegExp(t.map(wJe).join("|")),deser:([r])=>t.findIndex(n=>tae(r)===tae(n))+e}}function rae(t,e){return{regex:t,deser:([,r,n])=>pd(r,n),groups:e}}function rO(t){return{regex:t,deser:([e])=>e}}function _Je(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function xJe(t,e){let r=bo(e),n=bo(e,"{2}"),a=bo(e,"{3}"),s=bo(e,"{4}"),o=bo(e,"{6}"),u=bo(e,"{1,2}"),l=bo(e,"{1,3}"),h=bo(e,"{1,6}"),p=bo(e,"{1,9}"),v=bo(e,"{2,4}"),y=bo(e,"{4,6}"),S=I=>({regex:RegExp(_Je(I.val)),deser:([N])=>N,literal:!0}),T=(I=>{if(t.literal)return S(I);switch(I.val){case"G":return iu(e.eras("short",!1),0);case"GG":return iu(e.eras("long",!1),0);case"y":return Cr(h);case"yy":return Cr(v,Y1);case"yyyy":return Cr(s);case"yyyyy":return Cr(y);case"yyyyyy":return Cr(o);case"M":return Cr(u);case"MM":return Cr(n);case"MMM":return iu(e.months("short",!0,!1),1);case"MMMM":return iu(e.months("long",!0,!1),1);case"L":return Cr(u);case"LL":return Cr(n);case"LLL":return iu(e.months("short",!1,!1),1);case"LLLL":return iu(e.months("long",!1,!1),1);case"d":return Cr(u);case"dd":return Cr(n);case"o":return Cr(l);case"ooo":return Cr(a);case"HH":return Cr(n);case"H":return Cr(u);case"hh":return Cr(n);case"h":return Cr(u);case"mm":return Cr(n);case"m":return Cr(u);case"q":return Cr(u);case"qq":return Cr(n);case"s":return Cr(u);case"ss":return Cr(n);case"S":return Cr(l);case"SSS":return Cr(a);case"u":return rO(p);case"uu":return rO(u);case"uuu":return Cr(r);case"a":return iu(e.meridiems(),0);case"kkkk":return Cr(s);case"kk":return Cr(v,Y1);case"W":return Cr(u);case"WW":return Cr(n);case"E":case"c":return Cr(r);case"EEE":return iu(e.weekdays("short",!1,!1),1);case"EEEE":return iu(e.weekdays("long",!1,!1),1);case"ccc":return iu(e.weekdays("short",!0,!1),1);case"cccc":return iu(e.weekdays("long",!0,!1),1);case"Z":case"ZZ":return rae(new RegExp(`([+-]${u.source})(?::(${n.source}))?`),2);case"ZZZ":return rae(new RegExp(`([+-]${u.source})(${n.source})?`),2);case"z":return rO(/[a-z_+-/]{1,256}?/i);default:return S(I)}})(t)||{invalidReason:yJe};return T.token=t,T}var SJe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function EJe(t,e,r){let{type:n,value:a}=t;if(n==="literal")return{literal:!0,val:a};let s=r[n],o=SJe[n];if(typeof o=="object"&&(o=o[s]),o)return{literal:!1,val:o}}function MJe(t){return[`^${t.map(r=>r.regex).reduce((r,n)=>`${r}(${n.source})`,"")}$`,t]}function AJe(t,e,r){let n=t.match(e);if(n){let a={},s=1;for(let o in r)if(ic(r,o)){let u=r[o],l=u.groups?u.groups+1:1;!u.literal&&u.token&&(a[u.token.val[0]]=u.deser(n.slice(s,s+l))),s+=l}return[n,a]}else return[n,{}]}function kJe(t){let e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},r=null,n;return Kt(t.z)||(r=bi.create(t.z)),Kt(t.Z)||(r||(r=new qn(t.Z)),n=t.Z),Kt(t.q)||(t.M=(t.q-1)*3+1),Kt(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),Kt(t.u)||(t.S=Z1(t.u)),[Object.keys(t).reduce((s,o)=>{let u=e(o);return u&&(s[u]=t[o]),s},{}),r,n]}var nO=null;function TJe(){return nO||(nO=lt.fromMillis(1555555555555)),nO}function NJe(t,e){if(t.literal)return t;let r=yi.macroTokenToFormatOpts(t.val),n=aO(r,e);return n==null||n.includes(void 0)?t:n}function IJe(t,e){return Array.prototype.concat(...t.map(r=>NJe(r,e)))}function iO(t,e,r){let n=IJe(yi.parseFormat(r),t),a=n.map(o=>xJe(o,t)),s=a.find(o=>o.invalidReason);if(s)return{input:e,tokens:n,invalidReason:s.invalidReason};{let[o,u]=MJe(a),l=RegExp(o,"i"),[h,p]=AJe(e,l,u),[v,y,S]=p?kJe(p):[null,null,void 0];if(ic(p,"a")&&ic(p,"H"))throw new Hf("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:n,regex:l,rawMatches:h,matches:p,result:v,zone:y,specificOffset:S}}}function aae(t,e,r){let{result:n,zone:a,specificOffset:s,invalidReason:o}=iO(t,e,r);return[n,a,s,o]}function aO(t,e){return t?yi.create(e,t).formatDateTimeParts(TJe()).map(a=>EJe(a,e,t)):null}var sae=[0,31,59,90,120,151,181,212,243,273,304,334],oae=[0,31,60,91,121,152,182,213,244,274,305,335];function wo(t,e){return new Wi("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function uae(t,e,r){let n=new Date(Date.UTC(t,e-1,r));t<100&&t>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);let a=n.getUTCDay();return a===0?7:a}function fae(t,e,r){return r+(hd(t)?oae:sae)[e-1]}function lae(t,e){let r=hd(t)?oae:sae,n=r.findIndex(s=>s<e),a=e-r[n];return{month:n+1,day:a}}function $3(t){let{year:e,month:r,day:n}=t,a=fae(e,r,n),s=uae(e,r,n),o=Math.floor((a-s+10)/7),u;return o<1?(u=e-1,o=rv(u)):o>rv(e)?(u=e+1,o=1):u=e,{weekYear:u,weekNumber:o,weekday:s,...X1(t)}}function sO(t){let{weekYear:e,weekNumber:r,weekday:n}=t,a=uae(e,1,4),s=dd(e),o=r*7+n-a-3,u;o<1?(u=e-1,o+=dd(u)):o>s?(u=e+1,o-=dd(e)):u=e;let{month:l,day:h}=lae(u,o);return{year:u,month:l,day:h,...X1(t)}}function z3(t){let{year:e,month:r,day:n}=t,a=fae(e,r,n);return{year:e,ordinal:a,...X1(t)}}function oO(t){let{year:e,ordinal:r}=t,{month:n,day:a}=lae(e,r);return{year:e,month:n,day:a,...X1(t)}}function cae(t){let e=K1(t.weekYear),r=Vu(t.weekNumber,1,rv(t.weekYear)),n=Vu(t.weekday,1,7);return e?r?n?!1:wo("weekday",t.weekday):wo("week",t.week):wo("weekYear",t.weekYear)}function hae(t){let e=K1(t.year),r=Vu(t.ordinal,1,dd(t.year));return e?r?!1:wo("ordinal",t.ordinal):wo("year",t.year)}function uO(t){let e=K1(t.year),r=Vu(t.month,1,12),n=Vu(t.day,1,tv(t.year,t.month));return e?r?n?!1:wo("day",t.day):wo("month",t.month):wo("year",t.year)}function fO(t){let{hour:e,minute:r,second:n,millisecond:a}=t,s=Vu(e,0,23)||e===24&&r===0&&n===0&&a===0,o=Vu(r,0,59),u=Vu(n,0,59),l=Vu(a,0,999);return s?o?u?l?!1:wo("millisecond",a):wo("second",n):wo("minute",r):wo("hour",e)}var lO="Invalid DateTime",dae=864e13;function j3(t){return new Wi("unsupported zone",`the zone "${t.name}" is not supported`)}function cO(t){return t.weekData===null&&(t.weekData=$3(t.c)),t.weekData}function nb(t,e){let r={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new lt({...r,...e,old:r})}function _ae(t,e,r){let n=t-e*60*1e3,a=r.offset(n);if(e===a)return[n,e];n-=(a-e)*60*1e3;let s=r.offset(n);return a===s?[n,a]:[t-Math.min(a,s)*60*1e3,Math.max(a,s)]}function pae(t,e){t+=e*60*1e3;let r=new Date(t);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function V3(t,e,r){return _ae(J1(t),e,r)}function mae(t,e){let r=t.o,n=t.c.year+Math.trunc(e.years),a=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:n,month:a,day:Math.min(t.c.day,tv(n,a))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Ut.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),u=J1(s),[l,h]=_ae(u,r,t.zone);return o!==0&&(l+=o,h=t.zone.offset(l)),{ts:l,o:h}}function ib(t,e,r,n,a,s){let{setZone:o,zone:u}=r;if(t&&Object.keys(t).length!==0){let l=e||u,h=lt.fromObject(t,{...r,zone:l,specificOffset:s});return o?h:h.setZone(u)}else return lt.invalid(new Wi("unparsable",`the input "${a}" can't be parsed as ${n}`))}function U3(t,e,r=!0){return t.isValid?yi.create(Rr.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(t,e):null}function hO(t,e){let r=t.c.year>9999||t.c.year<0,n="";return r&&t.c.year>=0&&(n+="+"),n+=Xn(t.c.year,r?6:4),e?(n+="-",n+=Xn(t.c.month),n+="-",n+=Xn(t.c.day)):(n+=Xn(t.c.month),n+=Xn(t.c.day)),n}function vae(t,e,r,n,a,s){let o=Xn(t.c.hour);return e?(o+=":",o+=Xn(t.c.minute),(t.c.second!==0||!r)&&(o+=":")):o+=Xn(t.c.minute),(t.c.second!==0||!r)&&(o+=Xn(t.c.second),(t.c.millisecond!==0||!n)&&(o+=".",o+=Xn(t.c.millisecond,3))),a&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=Xn(Math.trunc(-t.o/60)),o+=":",o+=Xn(Math.trunc(-t.o%60))):(o+="+",o+=Xn(Math.trunc(t.o/60)),o+=":",o+=Xn(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}var xae={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},DJe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},OJe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Sae=["year","month","day","hour","minute","second","millisecond"],RJe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],CJe=["year","ordinal","hour","minute","second","millisecond"];function gae(t){let e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new Xm(t);return e}function yae(t,e){let r=nu(e.zone,tn.defaultZone),n=Rr.fromObject(e),a=tn.now(),s,o;if(Kt(t.year))s=a;else{for(let h of Sae)Kt(t[h])&&(t[h]=xae[h]);let u=uO(t)||fO(t);if(u)return lt.invalid(u);let l=r.offset(a);[s,o]=V3(t,l,r)}return new lt({ts:s,zone:r,loc:n,o})}function bae(t,e,r){let n=Kt(r.round)?!0:r.round,a=(o,u)=>(o=ev(o,n||r.calendary?0:2,!0),e.loc.clone(r).relFormatter(r).format(o,u)),s=o=>r.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(r.unit)return a(s(r.unit),r.unit);for(let o of r.units){let u=s(o);if(Math.abs(u)>=1)return a(u,o)}return a(t>e?-0:0,r.units[r.units.length-1])}function wae(t){let e={},r;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],r=Array.from(t).slice(0,t.length-1)):r=Array.from(t),[e,r]}var lt=class{constructor(e){let r=e.zone||tn.defaultZone,n=e.invalid||(Number.isNaN(e.ts)?new Wi("invalid input"):null)||(r.isValid?null:j3(r));this.ts=Kt(e.ts)?tn.now():e.ts;let a=null,s=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(r))[a,s]=[e.old.c,e.old.o];else{let u=r.offset(this.ts);a=pae(this.ts,u),n=Number.isNaN(a.year)?new Wi("invalid input"):null,a=n?null:a,s=n?null:u}this._zone=r,this.loc=e.loc||Rr.create(),this.invalid=n,this.weekData=null,this.c=a,this.o=s,this.isLuxonDateTime=!0}static now(){return new lt({})}static local(){let[e,r]=wae(arguments),[n,a,s,o,u,l,h]=r;return yae({year:n,month:a,day:s,hour:o,minute:u,second:l,millisecond:h},e)}static utc(){let[e,r]=wae(arguments),[n,a,s,o,u,l,h]=r;return e.zone=qn.utcInstance,yae({year:n,month:a,day:s,hour:o,minute:u,second:l,millisecond:h},e)}static fromJSDate(e,r={}){let n=_ie(e)?e.valueOf():NaN;if(Number.isNaN(n))return lt.invalid("invalid input");let a=nu(r.zone,tn.defaultZone);return a.isValid?new lt({ts:n,zone:a,loc:Rr.fromObject(r)}):lt.invalid(j3(a))}static fromMillis(e,r={}){if(Uu(e))return e<-dae||e>dae?lt.invalid("Timestamp out of range"):new lt({ts:e,zone:nu(r.zone,tn.defaultZone),loc:Rr.fromObject(r)});throw new Vi(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,r={}){if(Uu(e))return new lt({ts:e*1e3,zone:nu(r.zone,tn.defaultZone),loc:Rr.fromObject(r)});throw new Vi("fromSeconds requires a numerical input")}static fromObject(e,r={}){e=e||{};let n=nu(r.zone,tn.defaultZone);if(!n.isValid)return lt.invalid(j3(n));let a=tn.now(),s=Kt(r.specificOffset)?n.offset(a):r.specificOffset,o=nv(e,gae),u=!Kt(o.ordinal),l=!Kt(o.year),h=!Kt(o.month)||!Kt(o.day),p=l||h,v=o.weekYear||o.weekNumber,y=Rr.fromObject(r);if((p||u)&&v)throw new Hf("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&u)throw new Hf("Can't mix ordinal dates with month/day");let S=v||o.weekday&&!p,A,T,I=pae(a,s);S?(A=RJe,T=DJe,I=$3(I)):u?(A=CJe,T=OJe,I=z3(I)):(A=Sae,T=xae);let N=!1;for(let j of A){let K=o[j];Kt(K)?N?o[j]=T[j]:o[j]=I[j]:N=!0}let D=S?cae(o):u?hae(o):uO(o),C=D||fO(o);if(C)return lt.invalid(C);let L=S?sO(o):u?oO(o):o,[z,$]=V3(L,s,n),G=new lt({ts:z,zone:n,o:$,loc:y});return o.weekday&&p&&e.weekday!==G.weekday?lt.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${G.toISO()}`):G}static fromISO(e,r={}){let[n,a]=Uie(e);return ib(n,a,r,"ISO 8601",e)}static fromRFC2822(e,r={}){let[n,a]=Vie(e);return ib(n,a,r,"RFC 2822",e)}static fromHTTP(e,r={}){let[n,a]=Wie(e);return ib(n,a,r,"HTTP",r)}static fromFormat(e,r,n={}){if(Kt(e)||Kt(r))throw new Vi("fromFormat requires an input string and a format");let{locale:a=null,numberingSystem:s=null}=n,o=Rr.fromOpts({locale:a,numberingSystem:s,defaultToEN:!0}),[u,l,h,p]=aae(o,e,r);return p?lt.invalid(p):ib(u,l,n,`format ${r}`,e,h)}static fromString(e,r,n={}){return lt.fromFormat(e,r,n)}static fromSQL(e,r={}){let[n,a]=Kie(e);return ib(n,a,r,"SQL",e)}static invalid(e,r=null){if(!e)throw new Vi("need to specify a reason the DateTime is invalid");let n=e instanceof Wi?e:new Wi(e,r);if(tn.throwOnInvalid)throw new O3(n);return new lt({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,r={}){let n=aO(e,Rr.fromObject(r));return n?n.map(a=>a?a.val:null).join(""):null}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?cO(this).weekYear:NaN}get weekNumber(){return this.isValid?cO(this).weekNumber:NaN}get weekday(){return this.isValid?cO(this).weekday:NaN}get ordinal(){return this.isValid?z3(this.c).ordinal:NaN}get monthShort(){return this.isValid?Wu.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Wu.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Wu.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Wu.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return hd(this.year)}get daysInMonth(){return tv(this.year,this.month)}get daysInYear(){return this.isValid?dd(this.year):NaN}get weeksInWeekYear(){return this.isValid?rv(this.weekYear):NaN}resolvedLocaleOptions(e={}){let{locale:r,numberingSystem:n,calendar:a}=yi.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:r,numberingSystem:n,outputCalendar:a}}toUTC(e=0,r={}){return this.setZone(qn.instance(e),r)}toLocal(){return this.setZone(tn.defaultZone)}setZone(e,{keepLocalTime:r=!1,keepCalendarTime:n=!1}={}){if(e=nu(e,tn.defaultZone),e.equals(this.zone))return this;if(e.isValid){let a=this.ts;if(r||n){let s=e.offset(this.ts),o=this.toObject();[a]=V3(o,s,e)}return nb(this,{ts:a,zone:e})}else return lt.invalid(j3(e))}reconfigure({locale:e,numberingSystem:r,outputCalendar:n}={}){let a=this.loc.clone({locale:e,numberingSystem:r,outputCalendar:n});return nb(this,{loc:a})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;let r=nv(e,gae),n=!Kt(r.weekYear)||!Kt(r.weekNumber)||!Kt(r.weekday),a=!Kt(r.ordinal),s=!Kt(r.year),o=!Kt(r.month)||!Kt(r.day),u=s||o,l=r.weekYear||r.weekNumber;if((u||a)&&l)throw new Hf("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&a)throw new Hf("Can't mix ordinal dates with month/day");let h;n?h=sO({...$3(this.c),...r}):Kt(r.ordinal)?(h={...this.toObject(),...r},Kt(r.day)&&(h.day=Math.min(tv(h.year,h.month),h.day))):h=oO({...z3(this.c),...r});let[p,v]=V3(h,this.o,this.zone);return nb(this,{ts:p,o:v})}plus(e){if(!this.isValid)return this;let r=Ut.fromDurationLike(e);return nb(this,mae(this,r))}minus(e){if(!this.isValid)return this;let r=Ut.fromDurationLike(e).negate();return nb(this,mae(this,r))}startOf(e){if(!this.isValid)return this;let r={},n=Ut.normalizeUnit(e);switch(n){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break;case"milliseconds":break}if(n==="weeks"&&(r.weekday=1),n==="quarters"){let a=Math.ceil(this.month/3);r.month=(a-1)*3+1}return this.set(r)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,r={}){return this.isValid?yi.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,e):lO}toLocaleString(e=Qm,r={}){return this.isValid?yi.create(this.loc.clone(r),e).formatDateTime(this):lO}toLocaleParts(e={}){return this.isValid?yi.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:r=!1,suppressMilliseconds:n=!1,includeOffset:a=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;let o=e==="extended",u=hO(this,o);return u+="T",u+=vae(this,o,r,n,a,s),u}toISODate({format:e="extended"}={}){return this.isValid?hO(this,e==="extended"):null}toISOWeekDate(){return U3(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:r=!1,includeOffset:n=!0,includePrefix:a=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(a?"T":"")+vae(this,o==="extended",r,e,n,s):null}toRFC2822(){return U3(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return U3(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?hO(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:r=!1,includeOffsetSpace:n=!0}={}){let a="HH:mm:ss.SSS";return(r||e)&&(n&&(a+=" "),r?a+="z":e&&(a+="ZZ")),U3(this,a,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():lO}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};let r={...this.c};return e.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,r="milliseconds",n={}){if(!this.isValid||!e.isValid)return Ut.invalid("created by diffing an invalid DateTime");let a={locale:this.locale,numberingSystem:this.numberingSystem,...n},s=xie(r).map(Ut.normalizeUnit),o=e.valueOf()>this.valueOf(),u=o?this:e,l=o?e:this,h=Xie(u,l,s,a);return o?h.negate():h}diffNow(e="milliseconds",r={}){return this.diff(lt.now(),e,r)}until(e){return this.isValid?un.fromDateTimes(this,e):this}hasSame(e,r){if(!this.isValid)return!1;let n=e.valueOf(),a=this.setZone(e.zone,{keepLocalTime:!0});return a.startOf(r)<=n&&n<=a.endOf(r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;let r=e.base||lt.fromObject({},{zone:this.zone}),n=e.padding?this<r?-e.padding:e.padding:0,a=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(a=e.unit,s=void 0),bae(r,this.plus(n),{...e,numeric:"always",units:a,unit:s})}toRelativeCalendar(e={}){return this.isValid?bae(e.base||lt.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(lt.isDateTime))throw new Vi("min requires all arguments be DateTimes");return O8(e,r=>r.valueOf(),Math.min)}static max(...e){if(!e.every(lt.isDateTime))throw new Vi("max requires all arguments be DateTimes");return O8(e,r=>r.valueOf(),Math.max)}static fromFormatExplain(e,r,n={}){let{locale:a=null,numberingSystem:s=null}=n,o=Rr.fromOpts({locale:a,numberingSystem:s,defaultToEN:!0});return iO(o,e,r)}static fromStringExplain(e,r,n={}){return lt.fromFormatExplain(e,r,n)}static get DATE_SHORT(){return Qm}static get DATE_MED(){return N1}static get DATE_MED_WITH_WEEKDAY(){return N8}static get DATE_FULL(){return I1}static get DATE_HUGE(){return D1}static get TIME_SIMPLE(){return O1}static get TIME_WITH_SECONDS(){return R1}static get TIME_WITH_SHORT_OFFSET(){return C1}static get TIME_WITH_LONG_OFFSET(){return F1}static get TIME_24_SIMPLE(){return B1}static get TIME_24_WITH_SECONDS(){return L1}static get TIME_24_WITH_SHORT_OFFSET(){return P1}static get TIME_24_WITH_LONG_OFFSET(){return q1}static get DATETIME_SHORT(){return $1}static get DATETIME_SHORT_WITH_SECONDS(){return z1}static get DATETIME_MED(){return j1}static get DATETIME_MED_WITH_SECONDS(){return U1}static get DATETIME_MED_WITH_WEEKDAY(){return I8}static get DATETIME_FULL(){return V1}static get DATETIME_FULL_WITH_SECONDS(){return W1}static get DATETIME_HUGE(){return G1}static get DATETIME_HUGE_WITH_SECONDS(){return H1}};function lv(t){if(lt.isDateTime(t))return t;if(t&&t.valueOf&&Uu(t.valueOf()))return lt.fromJSDate(t);if(t&&typeof t=="object")return lt.fromObject(t);throw new Vi(`Unknown datetime argument: ${t}, of type ${typeof t}`)}var FJe="3.0.1";var Tae=ut(Mae(),1);function cv(t){let{dateObject:e,dateFormat:r}=t;return r==="js"&&typeof e=="object"||typeof e=="object"&&e instanceof Date?{date:lt.fromJSDate(e,{zone:t.time_zone}),format:"js"}:typeof r=="string"&&r!=="iso"&&r!=="js"?{date:lt.fromFormat(e,r,{zone:t.time_zone}),format:r}:{date:lt.fromISO(e,{zone:t.time_zone}),format:"iso"}}var BJe=[],LJe=[],Aae=[],PJe=[],qJe=[],$Je=[],zJe=[],jJe=[],Nae={year:new Date().getFullYear(),month:1,day:1,hour:0,minute:0,second:0,week:1,weekday:1,quarter_hour:1,oridinalday:1},Iae=[Nae];for(let t=0;t<=366;t++){let e=Object.assign({},Nae);t>=1&&t<=12&&(e.month=t,BJe.push(t)),t>=1&&t<=52&&(e.week=t,LJe.push(t)),t>=1&&t<=7&&(e.weekday=t,Aae.push(t)),t>=1&&t<=366&&(e.oridinalday=t,qJe.push(t)),t>=1&&t<=31&&(e.day=t,Aae.push(t)),t>=1&&t<=96&&(e.quarter_hour=t,PJe.push(t)),t<=23&&(e.hour=t,$Je.push(t)),t<=59&&(e.minute=t,zJe.push(t)),t<=59&&(e.second=t,jJe.push(t)),Iae.push(e)}function Dae({completion_percentage:t,loss:e,epoch:r,status:n,logs:a,defaultLog:s=!0}){s&&console.log({completion_percentage:t,loss:e,epoch:r,status:n,logs:a})}var Oae=Iae;function UJe(t){let e=t/15;return e<1?1:e<2?2:e<3?3:4}function VJe(t){if(typeof t.hour=="undefined"||typeof t.minute=="undefined")throw new ReferenceError("both hour and minute are required");return t.hour*4+UJe(t.minute)}function Rae(t,e){let r=lt.fromJSDate(t,e),n=Object.assign({},r.toObject());return n.week=r.weekNumber,n.ordinal_day=r.ordinal,n.weekday=r.weekday,n.days_in_month=r.daysInMonth,n.weekend=r.weekday===6||r.weekday===7,n.quarter_hour=VJe(n),n}function dO({date:t,time_zone:e,dimension:r}){let n=lt.fromJSDate(t).plus({[pO[r]]:1}).toJSDate(),a=lt.fromJSDate(t,{zone:e}),s=lt.fromJSDate(n,{zone:e}),o=lt.fromJSDate(t),u=lt.fromJSDate(n),{year:l,month:h,day:p,ordinal:v,weekday:y,hour:S,minute:A,second:T}=a;return{year:l,month:h,day:p,hour:S,minute:A,second:T,days_in_month:a.daysInMonth,ordinal_day:v,week:a.weekNumber,weekday:y,weekend:a.weekday>=6,origin_time_zone:e,start_origin_date_string:a.toFormat(kae),start_gmt_date_string:o.toJSDate().toUTCString(),end_origin_date_string:s.toFormat(kae),end_gmt_date_string:u.toJSDate().toUTCString()}}var kae="ccc, dd LLL yyyy TTT",pO={["monthly"]:"months",["weekly"]:"weeks",["daily"]:"days",["hourly"]:"hours"},Cae={years:"yearly",weeks:"weekly",months:"monthly",days:"daily",hours:"hourly"};var mO={includeOffset:!1,suppressMilliseconds:!0};var Fae=["years","months","weeks","days","hours"],xo="+=+";function Bae(t={}){return 1}function Lae({outlier_property:t}={}){if(t){let e=this.data,r=(0,Tae.default)(e.map(s=>s[t])),a=this.datum[t];return r.testOutlier(a)?1:-1}else return 0}function G3(t,{mockEncodedData:e=[],includeConstants:r=!0}){let n=new Array().concat(e,r?Oae:[]);return t.data=t.data.concat(n),t}function H3(t,{mockEncodedData:e=[],includeConstants:r=!0}){let n=new Array().concat(e,r?Oae:[]);return t.data.splice(t.data.length-n.length,n.length),t}function Pae(t){return t.actuals=void 0,delete t.actuals,t.estimates=void 0,delete t.estimates,t}function WJe({start:t,end:e,time_zone:r}){if(!r)throw new ReferenceError("Missing required timezone");let n=lt.fromISO(t,{zone:r}).set({month:1,day:1,hour:0,minute:0,second:0,millisecond:0}),a=lt.fromISO(e,{zone:r}).set({month:1,day:1,hour:0,minute:0,second:0,millisecond:0}),s=[];do{if(n.isValid===!1)throw new SyntaxError("Date format is invalid, must be an ISO Date (ISO 8601 e.g. 2019-03-21T11:42:00 - YYYY-MM-DDTHH:mm:ss)");s.push(n.toJSDate()),n=n.plus({years:1})}while(n<=a);return s}function GJe({start:t,end:e,time_zone:r}){if(!r)throw new ReferenceError("Missing required timezone");let n=lt.fromISO(t,{zone:r}).set({day:1,hour:0,minute:0,second:0,millisecond:0}),a=lt.fromISO(e,{zone:r}).set({day:1,hour:0,minute:0,second:0,millisecond:0}),s=[];do{if(n.isValid===!1)throw new SyntaxError("Date format is invalid, must be an ISO Date (ISO 8601 e.g. 2019-03-21T11:42:00 - YYYY-MM-DDTHH:mm:ss)");s.push(n.toJSDate()),n=n.plus({months:1})}while(n<=a);return s}function HJe({start:t,end:e,weekday:r="monday",time_zone:n}){if(!n)throw new ReferenceError("Missing required timezone");let a={monday:1,1:1,tuesday:2,2:1,wednesday:3,3:1,thursday:4,4:1,friday:5,5:1,saturday:6,6:1,sunday:7,7:1,default:1},s=r.toString().toLowerCase(),o=a[s];if(!o)throw new ReferenceError(`Invalid weekday (${r}), must be either 1-7 or monday-sunday`);let u=lt.fromISO(t,{zone:n}).set({hour:0,minute:0,second:0,millisecond:0}),l=lt.fromISO(e,{zone:n}).set({hour:0,minute:0,second:0,millisecond:0}),h=o>=u.weekday?u.plus({days:o-u.weekday}):u.minus({days:u.weekday-o}),p=o>=l.weekday?l.plus({days:o-l.weekday}):l.minus({days:l.weekday-o}),v=[];do{if(h.isValid===!1)throw new SyntaxError("Date format is invalid, must be an ISO Date (ISO 8601 e.g. 2019-03-21T11:42:00 - YYYY-MM-DDTHH:mm:ss)");v.push(h.toJSDate()),h=h.plus({days:7})}while(h<=p);return v}function KJe({start:t,end:e,time_zone:r}){if(!r)throw new ReferenceError("Missing required timezone");let n=lt.fromISO(t,{zone:r}).set({hour:0,minute:0,second:0,millisecond:0}),a=lt.fromISO(e,{zone:r}).set({hour:0,minute:0,second:0,millisecond:0}),s=[];do{if(n.isValid===!1)throw new SyntaxError("Date format is invalid, must be an ISO Date (ISO 8601 e.g. 2019-03-21T11:42:00 - YYYY-MM-DDTHH:mm:ss)");s.push(n.toJSDate()),n=n.plus({days:1})}while(n<=a);return s}function ZJe({start:t,end:e,time_zone:r}){if(!r)throw new ReferenceError("Missing required timezone");let n=lt.fromISO(t,{zone:r}).set({minute:0,second:0,millisecond:0}),a=lt.fromISO(e,{zone:r}).set({minute:0,second:0,millisecond:0}),s=[];do{if(n.isValid===!1)throw new SyntaxError("Date format is invalid, must be an ISO Date (ISO 8601 e.g. 2019-03-21T11:42:00 - YYYY-MM-DDTHH:mm:ss)");s.push(n.toJSDate()),n=n.plus({hours:1})}while(n<=a);return s}function JJe({start:t,end:e,time_zone:r}){if(!r)throw new ReferenceError("Missing required timezone");let n=lt.fromISO(t,{zone:r}).set({second:0,millisecond:0}),a=lt.fromISO(e,{zone:r}).set({second:0,millisecond:0}),s=[];do{if(n.isValid===!1)throw new SyntaxError("Date format is invalid, must be an ISO Date (ISO 8601 e.g. 2019-03-21T11:42:00 - YYYY-MM-DDTHH:mm:ss)");s.push(n.toJSDate()),n=n.plus({minutes:1})}while(n<=a);return s}function YJe({start:t,end:e,time_zone:r}){if(!r)throw new ReferenceError("Missing required timezone");let n=lt.fromISO(t,{zone:r}).set({millisecond:0}),a=lt.fromISO(e,{zone:r}).set({millisecond:0}),s=[];do{if(n.isValid===!1)throw new SyntaxError("Date format is invalid, must be an ISO Date (ISO 8601 e.g. 2019-03-21T11:42:00 - YYYY-MM-DDTHH:mm:ss)");s.push(n.toJSDate()),n=n.plus({seconds:1})}while(n<=a);return s}var Z3={["yearly"]:WJe,["monthly"]:GJe,["weekly"]:HJe,["daily"]:KJe,["hourly"]:ZJe,["minutely"]:JJe,["secondly"]:YJe};function vO({DataSet:t,features:e=[]}){if(t.encoders.size){let r=new Array().concat(e),n=[];for(let a of t.encoders.keys())if(e.includes(a)){let s=r.indexOf(a);r.splice(s,1),n.push(...t.encoders.get(a).labels.map(o=>`${t.encoders.get(a).prefix}${o}`))}return Array.from(new Set(n.concat(r)))}return e}function K3({variables:t,datum:e}){return t.map(r=>{let n={feature_field_name:r,feature_field_type:"auto-detect"};return typeof e[r]=="number"?n.feature_field_type="number":typeof e[r]=="boolean"?n.feature_field_type="boolean":typeof e[r]=="string"&&(n.feature_field_type="text-encoded"),n})}function J3({independent_variables:t,dependent_variables:e,datum:r,input_independent_features:n,output_dependent_features:a,training_feature_column_options:s={},preprocessing_feature_column_options:o={}}){let u=v=>Object.keys(s).includes(v.feature_field_name)===!1,l=new Array().concat(t&&t.length&&r?K3({variables:t,datum:r}):[],n||[]),h=new Array().concat(e&&e.length&&r?K3({variables:e,datum:r}):[],a||[]);return new Array().concat(l,h).filter(u).forEach(v=>{v.feature_field_type==="text-encoded"?s[v.feature_field_name]=["onehot"]:v.feature_field_type==="text-label"?s[v.feature_field_name]=["label"]:v.feature_field_type==="boolean"?s[v.feature_field_name]=["label",{binary:!0}]:["number","auto-detect"].includes(v.feature_field_type)&&(s[v.feature_field_name]=["scale","standard"],o[v.feature_field_name]=["median"])}),{x_raw_independent_features:l.map(v=>v.feature_field_name),y_raw_dependent_labels:h.map(v=>v.feature_field_name),training_feature_column_options:s,preprocessing_feature_column_options:o}}var So=ut(Uae(),1);var gO=null;function Vae(t){gO=t}function sb(){if(gO===null)throw Error(`
============================
Howdy \u{1F44B}\u{1F44B}. Looks like you are running @jsonstack/jsonm but you haven't set a Tensorflow backend. 
To do so, simply import (or require) your tensorflow library, and call setBackend like so,

import * as tf from '@tensorflow/tfjs';
import * as jsm from '@jsonstack/jsonm';
jsm.setBackend(tf);

That will let @jsonstack/jsonm know you wish to use a tensorflow library to perform your calculations.
============================
    `);return gO}function Wae(t){let e=sb();return Array.isArray(t)?t:t?Object.keys(t).map(r=>new e.CustomCallback({[r]:t[r]})):[]}var yO=null;function Gae(t){yO=t}function Y3(){if(yO===null)throw Error(`
============================
Howdy \u{1F44B}\u{1F44B}. Looks like you are running @jsonstack/model but you haven't set a ScikitJS backend. 
To do so, simply import (or require) your scikit library, and call setScikit like so,

import * as tf from '@tensorflow/tfjs';
import * as scikit from 'scikitjs';
import * as jsm from '@jsonstack/model';
jsm.setBackend(tf);
jsm.setScikit(scikit);

That will let @jsonstack/model know you wish to use a scikitjs library to perform your calculations.
============================
    `);return yO}var bO=(u=>(u.FAST_FORECAST="ai-fast-forecast",u.FORECAST="ai-forecast",u.TIMESERIES_REGRESSION_FORECAST="ai-timeseries-regression-forecast",u.LINEAR_REGRESSION="ai-linear-regression",u.REGRESSION="ai-regression",u.CLASSIFICATION="ai-classification",u.LOGISTIC_CLASSIFICATION="ai-logistic-classification",u))(bO||{}),wO=(s=>(s.PREDICTION="regression",s.DECISION="classification",s.FORECAST="timeseries",s.RECOMMENDATION="recommendation",s.REACTION="reinforced",s))(wO||{}),XJe={"ai-fast-forecast":cs,"ai-forecast":Ln,"ai-timeseries-regression-forecast":Xh,"ai-linear-regression":Xh,"ai-regression":Im,"ai-classification":Dm,"ai-logistic-classification":Om},QJe={["ai-fast-forecast"]:"timeseries",["ai-forecast"]:"timeseries",["ai-timeseries-regression-forecast"]:"timeseries",["ai-linear-regression"]:"regression",["ai-regression"]:"regression",["ai-classification"]:"classification",["ai-logistic-classification"]:"classification"};function _O({variable_name:t="",function_body:e="",props:r,function_name_prefix:n="next_value_"}){let a=Function("state",`'use strict';${e}`).bind({props:r});return Object.defineProperty(a,"name",{value:`${n}${t}`}),a}function xO(t){let{property:e,rows:r,offset:n=1}=t,a=Boolean(this.reverseTransform),s=typeof this.offset=="number"?this.offset:n,o=s;if(this.debug&&s<1)throw new RangeError(`Offset must be larger than or equal to the default of 1 [property:${e}]`);let u=o,l=r+o;return this.data.slice(u,l).reduce((p,v)=>{let y=a?this.DataSet.inverseTransformObject(v):v;return p=p+y[e],p},0)}var SO=class{constructor(e,r={}){Ye(this,"config");Ye(this,"status");Ye(this,"trainingData");Ye(this,"removedFilterdtrainingData");Ye(this,"use_empty_objects");Ye(this,"use_preprocessing_on_trainning_data");Ye(this,"use_next_value_functions_for_training_data");Ye(this,"use_mock_encoded_data");Ye(this,"validate_training_data");Ye(this,"x_independent_features");Ye(this,"y_dependent_labels");Ye(this,"x_raw_independent_features");Ye(this,"y_raw_dependent_labels");Ye(this,"original_data_test");Ye(this,"original_data_train");Ye(this,"testDataSet");Ye(this,"trainDataSet");Ye(this,"prediction_inputs");Ye(this,"prediction_options");Ye(this,"x_indep_matrix_train");Ye(this,"x_indep_matrix_test");Ye(this,"y_dep_matrix_train");Ye(this,"y_dep_matrix_test");Ye(this,"Model");Ye(this,"training_options");Ye(this,"cross_validation_options");Ye(this,"training_size_values");Ye(this,"training_model_loss");Ye(this,"preprocessing_feature_column_options");Ye(this,"training_feature_column_options");Ye(this,"training_data_filter_function_body");Ye(this,"training_data_filter_function");Ye(this,"training_progress_callback");Ye(this,"prediction_inputs_next_value_functions");Ye(this,"prediction_inputs_next_value_function");Ye(this,"prediction_timeseries_time_zone");Ye(this,"prediction_timeseries_date_feature");Ye(this,"prediction_timeseries_date_format");Ye(this,"retrain_forecast_model_with_predictions");Ye(this,"prediction_timeseries_dimension_feature");Ye(this,"prediction_timeseries_start_date");Ye(this,"prediction_timeseries_end_date");Ye(this,"dimension");Ye(this,"entity");Ye(this,"DataSet");Ye(this,"forecastDates");Ye(this,"emptyObject");Ye(this,"mockEncodedData");Ye(this,"debug");Ye(this,"tf");Ye(this,"scikit");Ye(this,"auto_assign_features");Ye(this,"independent_variables");Ye(this,"dependent_variables");Ye(this,"input_independent_features");Ye(this,"output_dependent_features");Ye(this,"max_evaluation_outputs");Ye(this,"getTimeseriesDimension");this.debug=typeof e.debug=="boolean"?e.debug:!0,this.config={use_cache:typeof e.use_cache=="boolean"?e.use_cache:!0,model_type:e.model_type||"ai-regression",use_mock_dates_to_fit_trainning_data:e.use_mock_dates_to_fit_trainning_data},this.config.model_category=QJe[this.config.model_type],this.status={trained:!1,lastTrained:void 0},this.entity=e.entity||{},this.emptyObject=e.emptyObject||{},this.mockEncodedData=e.mockEncodedData||[],this.use_empty_objects=Boolean(Object.keys(this.emptyObject).length),this.use_mock_encoded_data=Boolean(this.mockEncodedData.length),this.dimension=e.dimension,this.training_data_filter_function_body=e.training_data_filter_function_body,this.training_data_filter_function=e.training_data_filter_function,this.trainingData=e.trainingData||[],this.removedFilterdtrainingData=[],this.DataSet=e.DataSet||new vi,this.max_evaluation_outputs=e.max_evaluation_outputs||5,this.testDataSet=e.testDataSet||new vi,this.trainDataSet=e.trainDataSet||new vi,this.x_indep_matrix_train=e.x_indep_matrix_train||[],this.x_indep_matrix_test=e.x_indep_matrix_test||[],this.y_dep_matrix_train=e.y_dep_matrix_train||[],this.y_dep_matrix_test=e.y_dep_matrix_test||[],this.x_independent_features=e.x_independent_features||[],this.x_raw_independent_features=e.x_raw_independent_features||[],this.y_dependent_labels=e.y_dependent_labels||[],this.y_raw_dependent_labels=e.y_raw_dependent_labels||[],this.auto_assign_features=typeof e.auto_assign_features=="boolean"?e.auto_assign_features:!0,this.independent_variables=e.independent_variables,this.dependent_variables=e.dependent_variables,this.input_independent_features=e.input_independent_features,this.output_dependent_features=e.output_dependent_features,this.use_next_value_functions_for_training_data=e.use_next_value_functions_for_training_data,this.training_size_values=e.training_size_values,this.cross_validation_options={train_size:.7,...e.cross_validation_options},this.preprocessing_feature_column_options=e.preprocessing_feature_column_options||{},this.training_feature_column_options=e.training_feature_column_options||{};let n=e.training_options&&e.training_options.fit?e.training_options.fit:{};return this.training_options={stateful:!0,features:this.x_independent_features.length,...e.training_options,fit:{epochs:100,batchSize:5,verbose:0,callbacks:{},...n}},this.training_progress_callback=e.training_progress_callback||Dae,this.training_options&&this.training_options.fit&&this.training_options.fit.callbacks&&this.training_options.fit.epochs&&(this.training_options.fit.callbacks.onEpochEnd=(a,s)=>{let o=this.training_options.fit?this.training_options.fit.epochs:0,u=a/o||0;this.training_model_loss=s.loss,this.training_progress_callback({completion_percentage:u,loss:s.loss,epoch:a,logs:s,status:"training",defaultLog:this.debug})},this.training_options.fit.callbacks.onTrainEnd=a=>{let s=this.training_options.fit?this.training_options.fit.epochs:0,o=1;this.training_progress_callback({completion_percentage:o,loss:this.training_model_loss||0,epoch:s,logs:a,status:"trained",defaultLog:this.debug})},this.training_options.fit.callbacks.onTrainBegin=a=>{let s=this.training_options.fit?this.training_options.fit.epochs:0,o=0;this.training_progress_callback({completion_percentage:o,loss:a.loss,epoch:s,logs:a,status:"initializing",defaultLog:this.debug})}),this.prediction_options=e.prediction_options||{},this.prediction_inputs=e.prediction_inputs||[],this.prediction_timeseries_time_zone=e.prediction_timeseries_time_zone||"utc",this.prediction_timeseries_date_feature=e.prediction_timeseries_date_feature||"date",this.prediction_timeseries_date_format=e.prediction_timeseries_date_format,this.validate_training_data=typeof e.validate_training_data=="boolean"?e.validate_training_data:!0,this.retrain_forecast_model_with_predictions=e.retrain_forecast_model_with_predictions,this.use_preprocessing_on_trainning_data=typeof e.use_preprocessing_on_trainning_data!="undefined"?e.use_preprocessing_on_trainning_data:!0,this.prediction_timeseries_start_date=e.prediction_timeseries_start_date,this.prediction_timeseries_end_date=e.prediction_timeseries_end_date,this.prediction_timeseries_dimension_feature=e.prediction_timeseries_dimension_feature||"dimension",this.prediction_inputs_next_value_functions=e.prediction_inputs_next_value_functions||e.next_value_functions||[],this.tf=sb(),this.scikit=Y3(),this.scikit.setBackend(this.tf),kE(this.tf),k3(this.scikit),this.Model=e.Model||new Na,this.original_data_test=[],this.original_data_train=[],this.forecastDates=[],this.getTimeseriesDimension=SO.calcTimeseriesDimension.bind(this),this}static calcTimeseriesDimension(e={}){let r=e.timeseries_date_format||this.prediction_timeseries_date_format,n=e.dimension||this.dimension,a=e.timeseries_date_feature||this.prediction_timeseries_date_feature,s=e.DataSetData||this.DataSet&&this.DataSet.data||[];if(n&&r)return this.dimension=n,{dimension:n,dateFormat:r};if(typeof n!="string"&&s&&Array.isArray(s)&&s.length&&(s.length&&s[0][this.prediction_timeseries_dimension_feature]&&(n=s[0][this.prediction_timeseries_dimension_feature]),s.length>1&&s[0][a])){let o=s[1][a],u=cv({dateObject:o,dateFormat:r});r=u.format;let l=u.date,h=cv({dateObject:s[0][a],dateFormat:r}).date,p=l.diff(h,Fae).toObject(),v=Object.keys(p).filter(y=>p[y]===1);v.length===1&&(n=Cae[v[0]])}if(typeof n!="string"||Object.keys(Z3).indexOf(n)===-1)throw new ReferenceError(`Invalid timeseries dimension (${n})`);if(this.prediction_timeseries_date_format=r,this.dimension=n,typeof r=="undefined")throw new ReferenceError("Invalid timeseries date format");return{dimension:n,dateFormat:r}}getForecastDates(e={}){let r=this.prediction_timeseries_start_date&&this.prediction_timeseries_start_date instanceof Date?lt.fromJSDate(this.prediction_timeseries_start_date).toISO(mO):this.prediction_timeseries_start_date,n=this.prediction_timeseries_end_date instanceof Date?lt.fromJSDate(this.prediction_timeseries_end_date).toISO(mO):this.prediction_timeseries_end_date;if(this.dimension){if(!r||!n)throw ReferenceError("Start and End Forecast Dates are required")}else throw ReferenceError("Forecasts require a timeseries dimension");return this.forecastDates=Z3[this.dimension]({start:r,end:n,time_zone:this.prediction_timeseries_time_zone}),this.forecastDates}addMockData({use_mock_dates:e=!1}={}){e&&this.use_mock_encoded_data&&this.DataSet?this.DataSet=G3(this.DataSet,{includeConstants:!0,mockEncodedData:this.mockEncodedData}):e&&this.DataSet?this.DataSet=G3(this.DataSet,{}):this.use_mock_encoded_data&&this.DataSet&&(this.DataSet=G3(this.DataSet,{includeConstants:!1,mockEncodedData:this.mockEncodedData}))}removeMockData({use_mock_dates:e=!1}={}){e&&this.use_mock_encoded_data&&this.DataSet?this.DataSet=H3(this.DataSet,{includeConstants:!0,mockEncodedData:this.mockEncodedData}):e&&this.DataSet?this.DataSet=H3(this.DataSet,{}):this.use_mock_encoded_data&&this.DataSet&&(this.DataSet=H3(this.DataSet,{includeConstants:!1,mockEncodedData:this.mockEncodedData}))}getCrosstrainingData(){let e,r;if(this.config.model_category==="timeseries"){let n=this.cross_validation_options.train_size||.7,a=this.training_size_values?this.DataSet.data.length-this.training_size_values:parseInt((this.DataSet.data.length*n).toString());e=this.DataSet.data.slice(a,this.DataSet.data.length),r=this.DataSet.data.slice(0,a)}else{let n=o4.train_test_split(this.DataSet.data,this.cross_validation_options);r=n.train,e=n.test}return{test:e,train:r}}validateTrainingData({cross_validate_training_data:e,inputMatrix:r}={inputMatrix:void 0}){let n=r||this.x_indep_matrix_train,a=r?"Prediction":"Trainning";return n.forEach((s,o)=>{s.forEach((u,l)=>{if(typeof u!="number"||isNaN(u))throw new TypeError(`${a} data (${o}) has an invalid ${this.x_independent_features[l]}. Value: ${u}`)})}),!0}async getTrainingData(e={}){e.trainingData?this.trainingData=e.trainingData:typeof e.getDataPromise=="function"&&(this.trainingData=await e.getDataPromise({}))}async checkTrainingStatus(e={}){return(e.retrain||this.status.trained===!1)&&(await this.getTrainingData(e),await this.trainModel(e)),!0}async getDataSetProperties(e={}){let{nextValueIncludeForecastDate:r=!0,nextValueIncludeForecastTimezone:n=!0,nextValueIncludeForecastAssociations:a=!0,nextValueIncludeDateProperty:s=!0,nextValueIncludeParsedDate:o=!0,nextValueIncludeLocalParsedDate:u=!0,nextValueIncludeForecastInputs:l=!0}=e,h={Luxon:W3,JSONStackData:Tp},p=this.prediction_inputs_next_value_functions.reduce((y,S)=>(y[S.variable_name]=_O({...S,props:h,function_name_prefix:"next_value_"}),y),{}),v=`'use strict';
    ${this.training_data_filter_function_body}
    `;this.training_data_filter_function=this.training_data_filter_function_body?Function("datum","datumIndex",v).bind({props:h}):this.training_data_filter_function,typeof this.training_data_filter_function=="function"&&this.training_data_filter_function.name&&this.training_data_filter_function.name.includes("anonymous")&&Object.defineProperty(this.training_data_filter_function,"name",{value:"training_data_filter_function"}),this.prediction_inputs_next_value_function=function(S){let A=S.lastDataRow||{},T=A.origin_time_zone||this.prediction_timeseries_time_zone,I=S.forecastDate;S.sumPreviousRows=xO.bind({data:S.data,DataSet:S.DataSet,offset:S.existingDatasetObjectIndex,reverseTransform:S.reverseTransform});let N={};if(r&&(N[this.prediction_timeseries_date_feature]=S.forecastDate),s&&(N.date=S.forecastDate),n&&(N.origin_time_zone=A.origin_time_zone),a&&(N.associated_data_location=A.associated_data_location?A.associated_data_location.toString():A.associated_data_location,N.associated_data_product=A.associated_data_product?A.associated_data_product.toString():A.associated_data_product,N.associated_data_entity=A.associated_data_entity?A.associated_data_entity.toString():A.associated_data_entity,N.forecast_entity_type=A.feature_entity_type?A.feature_entity_type.toString():A.forecast_entity_type,N.forecast_entity_title=A.feature_entity_title?A.feature_entity_title.toString():A.forecast_entity_title,N.forecast_entity_name=A.feature_entity_name?A.feature_entity_name.toString():A.forecast_entity_name,N.forecast_entity_id=A.feature_entity_id?A.feature_entity_id.toString():A.forecast_entity_id),o&&S.forecastDate){let D=Rae(S.forecastDate,{zone:T}),C=Bae.bind({entity:this.entity,dimension:this.dimension},{date:I,parsedDate:D,zone:T}),L=Lae.bind({entity:this.entity,data:S.data,datum:N});S.parsedDate=D,S.isOpen=C,S.isOutlier=L,Object.assign(N,D)}return u&&Object.assign(N,dO({date:S.forecastDate,time_zone:T,dimension:this.dimension})),l&&Object.assign(N,S.rawInputPredictionObject),Object.keys(p).reduce((D,C)=>(D[C]=p[C](S),D),N)},this.config.model_category==="timeseries"&&(this.dimension=this.getTimeseriesDimension(e).dimension),this.dimension&&this.config.model_category==="timeseries"&&this.prediction_inputs&&this.prediction_inputs.length&&(!this.prediction_timeseries_start_date||!this.prediction_timeseries_end_date)&&(this.prediction_timeseries_start_date||(this.prediction_timeseries_start_date=this.prediction_inputs[0][this.prediction_timeseries_date_feature]),this.prediction_timeseries_end_date||(this.prediction_timeseries_end_date=this.prediction_inputs[this.prediction_inputs.length-1][this.prediction_timeseries_date_feature])),this.dimension&&this.config.model_category==="timeseries"&&this.prediction_timeseries_start_date&&this.prediction_timeseries_end_date&&this.getForecastDates()}getForecastDatesFromPredictionInputs(e={}){let r=e.prediction_inputs.map(a=>{let s=a[this.prediction_timeseries_date_feature],o=s&&s instanceof Date?s:this.prediction_timeseries_date_format?lt.fromFormat(s,this.prediction_timeseries_date_format).toJSDate():s;return{...a,[this.prediction_timeseries_date_feature]:o}});return{forecastDates:r.map(a=>a[this.prediction_timeseries_date_feature]),raw_prediction_inputs:r}}async validateTimeseriesData(e={}){let{fixPredictionDates:r=!0}=e,n=this.dimension,a=e.prediction_inputs||await this.getPredictionData(e)||[],s=this.DataSet.data.length-1,o=this.DataSet.data[s],u=this.forecastDates;if(e.set_forecast_dates_for_predictions&&this.forecastDates.length<1){let T=this.getForecastDatesFromPredictionInputs(e);u=T.forecastDates,a=T.raw_prediction_inputs}let l=cv({dateObject:o[this.prediction_timeseries_date_feature],dateFormat:this.prediction_timeseries_date_format,time_zone:this.prediction_timeseries_time_zone}),h=l.date,p=l.format,v=h.toJSDate(),y=o[this.prediction_timeseries_date_feature]instanceof Date?this.DataSet.columnArray(this.prediction_timeseries_date_feature):this.DataSet.columnArray(this.prediction_timeseries_date_feature).map(T=>cv({dateObject:T,dateFormat:p,time_zone:this.prediction_timeseries_time_zone}).date.toJSDate()),S=y[0];r&&typeof this.prediction_timeseries_start_date=="string"&&(this.prediction_timeseries_start_date=lt.fromISO(this.prediction_timeseries_start_date).toJSDate()),r&&this.prediction_timeseries_start_date&&this.prediction_timeseries_start_date<S&&(this.prediction_timeseries_start_date=S,u=this.getForecastDates(),console.log("modified",{forecastDates:u}));let A;if(u.length){if(A=y.findIndex(T=>T.valueOf()===u[0].valueOf()),A===-1){let T=y[y.length-1],I=u[0];lt.fromJSDate(T,{zone:this.prediction_timeseries_time_zone}).plus({[pO[n]]:1}).valueOf()===I.valueOf()&&(A=y.length)}if(A===-1)throw new RangeError(`Forecast Date Range (${this.prediction_timeseries_start_date} - ${this.prediction_timeseries_end_date}) must include an existing forecast date (${this.DataSet.data[0][this.prediction_timeseries_date_feature]} - ${this.DataSet.data[s][this.prediction_timeseries_date_feature]})`);if(a.length){a[0][this.prediction_timeseries_date_feature]instanceof Date||(a=a.map(C=>Object.assign({},C,{[this.prediction_timeseries_date_feature]:cv({dateObject:C[this.prediction_timeseries_date_feature],dateFormat:p,time_zone:this.prediction_timeseries_time_zone}).date.toJSDate()})));let T=a[0][this.prediction_timeseries_date_feature],I=u[0],N=a.map(C=>C[this.prediction_timeseries_date_feature]);if(r&&I>T){let C=N.findIndex(L=>L.valueOf()===I.valueOf());a=a.slice(C),N=a.map(L=>L[this.prediction_timeseries_date_feature])}if(u.findIndex(C=>C.valueOf()===N[0].valueOf())<0)throw new RangeError(`Prediction Input First Date(${N[0]}) must be inclusive of forecastDates ( ${u[0]} - ${u[u.length-1]})`)}}return{forecastDates:u,forecastDateFirstDataSetDateIndex:A,lastOriginalForecastDate:v,raw_prediction_inputs:a,dimension:n,datasetDates:y}}async getPredictionData(e={}){return typeof e.getPredictionInputPromise=="function"&&(this.prediction_inputs=await e.getPredictionInputPromise({ModelX:this})),this.prediction_inputs}async trainModel(e={}){let{cross_validate_training_data:r=!0,use_next_value_functions_for_training_data:n=!1,use_mock_dates_to_fit_trainning_data:a=!1}=e,s=XJe[this.config.model_type],o=a||this.config.use_mock_dates_to_fit_trainning_data,u=e.trainingData||this.trainingData||[];u=new Array().concat(u);let l,h;if(this.status.trained=!1,await this.getDataSetProperties({DataSetData:u}),typeof this.training_data_filter_function=="function"&&n===!1&&(u=u.filter(this.training_data_filter_function)),!n&&this.use_empty_objects&&(u=u.map(p=>({...this.emptyObject,...p}))),this.DataSet=new vi(u),this.auto_assign_features&&(!this.x_independent_features||!this.x_independent_features.length)&&!this.y_dependent_labels||!this.y_dependent_labels.length){let p=J3({input_independent_features:this.input_independent_features,output_dependent_features:this.output_dependent_features,independent_variables:this.independent_variables,dependent_variables:this.dependent_variables,training_feature_column_options:this.training_feature_column_options,preprocessing_feature_column_options:this.preprocessing_feature_column_options,datum:u[0]});this.x_raw_independent_features=Array.from(new Set(new Array().concat(this.x_raw_independent_features,p.x_raw_independent_features))),this.y_raw_dependent_labels=Array.from(new Set(new Array().concat(this.y_raw_dependent_labels,p.y_raw_dependent_labels))),this.preprocessing_feature_column_options={...p.preprocessing_feature_column_options,...this.preprocessing_feature_column_options},this.training_feature_column_options={...p.training_feature_column_options,...this.training_feature_column_options}}if(this.use_preprocessing_on_trainning_data&&this.preprocessing_feature_column_options&&Object.keys(this.preprocessing_feature_column_options).length&&this.DataSet.fitColumns(this.preprocessing_feature_column_options),n||this.use_next_value_functions_for_training_data){let p=u.map(v=>v[this.prediction_timeseries_date_feature]);u=u.map((v,y)=>{this.prediction_timeseries_date_format&&(v[this.prediction_timeseries_date_feature]=lt.fromFormat(v[this.prediction_timeseries_date_feature],this.prediction_timeseries_date_format).toJSDate());let S=v[this.prediction_timeseries_date_feature],A=y;v._id&&(v._id=v._id.toString()),v.feature_entity_id&&(v.feature_entity_id=v.feature_entity_id.toString());let T=this.prediction_inputs_next_value_function?this.prediction_inputs_next_value_function({rawInputPredictionObject:v,forecastDate:S,forecastDates:p,forecastPredictionIndex:A,existingDatasetObjectIndex:y,unscaledLastForecastedValue:u[y-1],data:u,DataSet:this.DataSet||new vi,lastDataRow:u[u.length-1],reverseTransform:!1}):{};return this.use_empty_objects?Object.assign({},this.emptyObject,(0,So.default)(v,{maxDepth:2,delimiter:xo}),(0,So.default)(T,{maxDepth:2,delimiter:xo})):Object.assign({},v,T)}),typeof this.training_data_filter_function=="function"&&n===!0&&(u=u.filter((v,y)=>{if(this.training_data_filter_function){let S=this.training_data_filter_function(v,y);return S||this.removedFilterdtrainingData.push(v),S}})),this.DataSet=new vi(u)}if(["is_location_open","is_open_hour","is_location_open"].forEach(p=>{this.training_feature_column_options[p]&&(this.training_feature_column_options[p]=["label",{binary:!0}])}),this.addMockData({use_mock_dates:o}),this.DataSet.fitColumns(this.training_feature_column_options),this.removeMockData({use_mock_dates:o}),this.auto_assign_features&&(!this.x_independent_features||!this.x_independent_features.length)&&(!this.y_dependent_labels||!this.y_dependent_labels.length)&&(this.x_independent_features=new Array().concat(this.x_independent_features,vO({DataSet:this.DataSet,features:this.x_raw_independent_features})),this.y_dependent_labels=new Array().concat(this.y_dependent_labels,vO({DataSet:this.DataSet,features:this.y_raw_dependent_labels}))),!this.x_independent_features||!this.x_independent_features.length)throw new ReferenceError("Missing Inputs (x_independent_features)");if(!this.y_dependent_labels||!this.y_dependent_labels.length)throw new ReferenceError("Missing Outputs (y_dependent_labels)");if(this.x_independent_features=Array.from(new Set(this.x_independent_features)),this.y_dependent_labels=Array.from(new Set(this.y_dependent_labels)),r){let p=this.getCrosstrainingData();l=p.test,h=p.train,this.original_data_test=p.test,this.original_data_train=p.train,this.testDataSet=new vi(l),this.trainDataSet=new vi(h),this.x_indep_matrix_train=this.trainDataSet.columnMatrix(this.x_independent_features),this.x_indep_matrix_test=this.testDataSet.columnMatrix(this.x_independent_features),this.y_dep_matrix_train=this.trainDataSet.columnMatrix(this.y_dependent_labels),this.y_dep_matrix_test=this.testDataSet.columnMatrix(this.y_dependent_labels)}else this.x_indep_matrix_train=this.DataSet.columnMatrix(this.x_independent_features),this.y_dep_matrix_train=this.DataSet.columnMatrix(this.y_dependent_labels);if(this.Model=new s(this.training_options,{}),this.config.model_category==="timeseries"){let p=await this.validateTimeseriesData(e)}return this.validate_training_data&&this.validateTrainingData({cross_validate_training_data:r}),this.config.model_category==="timeseries"&&this.config.model_type==="ai-fast-forecast"?await this.Model.train(this.x_indep_matrix_train,this.y_dep_matrix_train,void 0,void 0,void 0):await this.Model.train(this.x_indep_matrix_train,this.y_dep_matrix_train,void 0,void 0,void 0),this.status.trained=!0,this.status.lastTrained=new Date,this}async predictModel(e={}){Array.isArray(e)&&(e={prediction_inputs:e});let{descalePredictions:r=!0,includeInputs:n=!0,includeEvaluation:a=!1}=e,s={probability:this.config.model_category!=="classification",...this.prediction_options,...e.predictionOptions},o,u,l,h,[p,v]=await Promise.all([this.checkTrainingStatus(e),e.prediction_inputs||await this.getPredictionData(e)]);if(a){let{test:y,train:S}=this.getCrosstrainingData(),A=new Un(y),T=A.columnMatrix(this.x_independent_features),I=A.columnMatrix(this.y_dependent_labels),N=Object.assign({},e,{x_indep_matrix_test:T,y_dep_matrix_test:I}),D=this.y_dependent_labels[0],C=await this.evaluateModel(N);h=Object.keys(C).reduce((L,z)=>{let $=Pae(C[z]);return z===D?(L=Object.assign({},L,$),this.y_dependent_labels.length>1&&(L.data[z]=$)):L.data[z]=$,L},{data:{}})}if(this.config.model_category==="timeseries")o=await this.timeseriesForecast(e);else{l=v,this.prediction_inputs=v.map(S=>{let A=this.use_empty_objects?Object.assign({},this.emptyObject,(0,So.default)(S,{maxDepth:2,delimiter:xo})):S;return this.DataSet.transformObject(A,{checkColumnLength:!1})});let y=this.DataSet.columnMatrix(this.x_independent_features,this.prediction_inputs);this.validate_training_data&&this.validateTrainingData({cross_validate_training_data:!1,inputMatrix:y}),u=await this.Model.predict(y,s),o=this.DataSet.reverseColumnMatrix({vectors:u,labels:this.y_dependent_labels})}if(r){let y=this.y_dependent_labels.reduce((A,T)=>(A[T]=0,A),{}),S=this.dimension;o=o.map((A,T)=>{let I=this.DataSet.inverseTransformObject(A,{}),N=I.is_location_open,D={};return(S==="hourly"||S==="daily")&&this.entity&&!N&&(this.debug&&console.info(`Manually fixing prediction on closed - ${S} ${I.date}`),D=Object.assign({},y)),Object.assign({},D,I,n&&this.config.model_category!=="timeseries"?l[T]:{},a?{__evaluation:h}:{})})}else n&&this.config.model_category!=="timeseries"&&(o=o.map((y,S)=>Object.assign({},this.DataSet.inverseTransformObject(y,{}),n?this.prediction_inputs[S]:{},a?{__evaluation:h}:{})));return this.use_empty_objects&&(o=o.map(y=>So.default.unflatten(y,{delimiter:xo}))),o}async retrainTimeseriesModel(e={}){let{inputMatrix:r,predictionMatrix:n,fitOptions:a}=e,s={...this.Model.settings.fit,...a},o=r,u=n,l=o,h=u,p;this.Model;let v=typeof this.Model.getTimeseriesShape=="function"?this.Model.getTimeseriesShape(l):void 0,y=typeof v!="undefined"?this.Model.reshape(l,v):l,S=this.Model.tf.tensor(y,v),A=this.Model.tf.tensor(h,p);return await this.Model.model.fit(S,A,s),S.dispose(),A.dispose(),this}async timeseriesForecast(e={}){let r=this.retrain_forecast_model_with_predictions,n=Object.assign({probability:this.config.model_category!=="classification"},this.prediction_options,e.predictionOptions);e.set_forecast_dates_for_predictions=!0;let{forecastDates:a,forecastDateFirstDataSetDateIndex:s,lastOriginalForecastDate:o,raw_prediction_inputs:u,dimension:l,datasetDates:h}=await this.validateTimeseriesData(e),p=[],v=0,y=h[h.length-1];return await $t.each(a,1,async S=>{let A=s+v,T=u[v],I,N,D,C,L,z;S<=o&&(D=this.DataSet.data[A],C=this.DataSet.inverseTransformObject(D,{}),N=[D]);let $=p.length?p[p.length-1]:{},G=Object.keys($).length?this.DataSet.inverseTransformObject($,{}):{};G=this.y_dependent_labels.reduce((f,d)=>(typeof G[d]!="undefined"&&(f[d]=G[d]),f),{});let j=[].concat(this.removedFilterdtrainingData,this.DataSet.data.map(f=>this.DataSet.inverseTransformObject(f,{}))),K=Object.keys(this.prediction_inputs_next_value_functions).length>0?this.prediction_inputs_next_value_function({rawInputPredictionObject:T,forecastDate:S,forecastDates:a,forecastPredictionIndex:v,existingDatasetObjectIndex:A+this.removedFilterdtrainingData.length,unscaledLastForecastedValue:G,data:j,DataSet:this.DataSet,lastDataRow:Object.assign({},this.DataSet.data[this.DataSet.data.length-1],C,T,G)}):{},M=dO({date:S,time_zone:this.prediction_timeseries_time_zone,dimension:l});if(L=this.use_empty_objects?Object.assign({},this.emptyObject,(0,So.default)(C||{},{maxDepth:2,delimiter:xo}),(0,So.default)(K||{},{maxDepth:2,delimiter:xo}),(0,So.default)(T||{},{maxDepth:2,delimiter:xo}),(0,So.default)(G,{maxDepth:2,delimiter:xo}),(0,So.default)(M,{maxDepth:2,delimiter:xo})):Object.assign({},C,K,T,G,M),z=this.DataSet.transformObject(L,{checkColumnLength:!1}),N=[z],N){let f=this.DataSet.columnMatrix(this.x_independent_features,N);this.validate_training_data&&this.validateTrainingData({cross_validate_training_data:!1,inputMatrix:f}),I=await this.Model.predict(f,n),r&&S>y&&await this.retrainTimeseriesModel({inputMatrix:f,predictionMatrix:I});let d=this.DataSet.reverseColumnMatrix({vectors:I,labels:this.y_dependent_labels})[0],g=Object.assign({},D,z,d,M,{[this.prediction_timeseries_date_feature]:S});S>o&&this.DataSet.data.splice(A,0,g),p.push(g)}return v++,I}),p}evaluateClassificationAccuracy(e={}){let{dependent_feature_label:r,estimatesDescaled:n,actualsDescaled:a}=e,s=vi.columnArray(r,{data:n}),o=vi.columnArray(r,{data:a}),u=hf.fromLabels(o,s);return{accuracy:u.getAccuracy(),matrix:u.matrix,labels:u.labels,actuals:o,estimates:s}}evaluateRegressionAccuracy(e={}){let{dependent_feature_label:r,estimatesDescaled:n,actualsDescaled:a}=e,s=vi.columnArray(r,{data:n}),o=vi.columnArray(r,{data:a}),u=Sr.standardError(o,s),l=Sr.rSquared(o,s),h=Sr.adjustedRSquared({actuals:o,estimates:s,rSquared:l,sampleSize:o.length,independentVariables:this.x_independent_features.length}),p=Boolean(o.filter(D=>D===0||isNaN(D)).length),v=Sr.meanAbsolutePercentageError(o,s),y=Sr.meanAbsoluteDeviation(o,s),S=Sr.mean(o),A="meanAbsolutePercentageError",T="Actuals do not contain Zero values";p&&(A="MAD over MEAN ratio",T="Actuals contain Zero values");let I=p?y/S:v;I<0&&(I=0),I>1&&(I=1);let N=1-I;return{standardError:u,rSquared:l,adjustedRSquared:h,actuals:o,estimates:s,meanForecastError:Sr.meanForecastError(o,s),meanAbsoluteDeviation:Sr.meanAbsoluteDeviation(o,s),trackingSignal:Sr.trackingSignal(o,s),meanSquaredError:Sr.meanSquaredError(o,s),meanAbsolutePercentageError:I,accuracyPercentage:N,metric:A,reason:T,originalMeanAbsolutePercentageError:v}}async evaluateModel(e={}){await this.checkTrainingStatus(e);let r=e.x_indep_matrix_test||this.x_indep_matrix_test,n=e.y_dep_matrix_test||this.y_dep_matrix_test,a=Object.assign({probability:this.config.model_category!=="classification"},this.prediction_options,e.predictionOptions),s=await this.Model.predict(r,a),o=this.DataSet.reverseColumnMatrix({vectors:s,labels:this.y_dependent_labels}),u=this.DataSet.reverseColumnMatrix({vectors:n,labels:this.y_dependent_labels}),l=this.dimension,h=this.y_dependent_labels.reduce((S,A)=>(S[A]=0,S),{}),p=o.map((S,A)=>{let T=this.DataSet.inverseTransformObject(S,{});if(this.config.model_category==="timeseries"){let N=r[A],[D]=this.DataSet.reverseColumnMatrix({vectors:[N],labels:this.x_independent_features}),C=this.DataSet.inverseTransformObject(D,{}),L=D.is_location_open,{year:z,month:$,day:G,hour:j}=C;(l==="hourly"||l==="daily")&&this.entity&&!L&&(console.info(`Manually fixing prediction on closed - ${l} ${z}-${$}-${G}T${j}`),T=h)}return this.use_empty_objects?So.default.unflatten(T,{delimiter:xo}):T}),v=u.map(S=>{let A=this.DataSet.inverseTransformObject(S,{});return this.use_empty_objects?So.default.unflatten(A,{delimiter:xo}):A}),y=Array.isArray(this.y_raw_dependent_labels)&&this.y_raw_dependent_labels.length?this.y_raw_dependent_labels:this.y_dependent_labels;return y.splice(this.max_evaluation_outputs),this.config.model_category==="classification"?y.reduce((S,A)=>(S[A]=this.evaluateClassificationAccuracy({dependent_feature_label:A,estimatesDescaled:p,actualsDescaled:v}),S),{}):y.reduce((S,A)=>(S[A]=this.evaluateRegressionAccuracy({dependent_feature_label:A,estimatesDescaled:p,actualsDescaled:v}),S),{})}},au=SO;Ye(au,"prediction_timeseries_date_format"),Ye(au,"prediction_timeseries_date_feature"),Ye(au,"dimension"),Ye(au,"prediction_timeseries_dimension_feature");var Hae=ut(Yb(),1),Kae=ut(EA(),1),Zae=ut(MA(),1),EO=ut(AA(),1);async function eYe(t,e){let r=t.search(/https/gi)>-1?Kae.get:Hae.get;return new Promise((n,a)=>{let s=[],o=Object.assign({checkType:!0},e);r(t,l=>{(0,EO.default)(o).fromStream(l).subscribe(h=>{s.push(h)},h=>a(h),h=>h?a(h):n(s))}).on("error",a)})}async function MO(t,e){return Zae.default.isUri(t)?eYe(t,e):new Promise((r,n)=>{let a=[],s=Object.assign({checkType:!0},e);(0,EO.default)(s).fromFile(t).subscribe((o,u)=>{a.push(o)},o=>n(o),o=>o?n(o):r(a))})}async function Jae(t,e){let r=Object.assign({checkType:!0},e,{delimiter:"	"});return MO(t,r)}function Yae(t={}){return t[Object.keys(t)[0]]||[]}var Xae=ut(h8(),1),tYe={Promisie:$t,getFirstDataset:Yae};async function ob(t={}){if(Array.isArray(t))return t;let{reducer:e,data:r,_data_static:n,_data_promise:a,_data_url:s,_data_csv:o,_data_tsv:u,_data_csv_options:l}=t,h=[];return r?h=r:n?h=n:o?h=await MO(o,l):u?h=await Jae(u,l):e?h=await rYe(e):a?h=await a():s&&(h=await(await(0,Xae.default)(s)).data),h}async function rYe(t){let{name:e}=t,r={context:{...tYe,name:e,...t.context}},a=(Array.isArray(t.reducer_function)?t.reducer_function:[t.reducer_function]).map((l,h)=>iYe({reducer_function:l,name:e,context:r,index:h})),s=$t.pipe(a),o=await nYe(t.datasets),{dataset_reduced:u}=await s(o);return u}async function nYe(t=[]){let e=0,r={};return t.length&&(r=(await $t.map(t,10,async a=>{let s={};if(Array.isArray(a))s[`dataset_${e}`]=a;else{let o=await ob(a);s[a.name||`dataset_${e}`]=o}return e++,s})).reduce((a,s)=>{let o=Object.keys(s)[0],u=s[o];return a[o]=u,a},{})),r}function iYe(t){let{reducer_function:e,name:r,context:n,index:a}=t;if(typeof e=="function"){let s=async function(u){return{dataset_reduced:await e.call(n,u)}}.bind(n);return Object.defineProperty(s,"name",{value:e.name||"ReducerFunction_"+a}),s}else{let s=`'use strict'; 
    return async function getAsyncString(){
      try {
        const dataset_reduced = await (async function getReducerData(){
          ${e}
        }.bind(this))();
        return {dataset_reduced};
      } catch(e){
        throw e;
      }
    }.call(this /* ,options */);
    `,o=Function("datasets",s).bind(n);return Object.defineProperty(o,"name",{value:r||"ReducerFunction_"+a}),o}}var aYe={regression:"ai-linear-regression",prediction:"ai-regression",classification:"ai-classification",description:"ai-classification",forecast:"ai-timeseries-regression-forecast"};async function AO(t){let e=Array.isArray(t.dataset)?t.dataset:await ob(t.dataset);return new au({trainingData:e,independent_variables:sYe(t),input_independent_features:t.input_transforms,dependent_variables:t.outputs,output_dependent_features:t.output_transforms,training_progress_callback:t.on_progress,training_options:t.training_options||kO(t.options),model_type:t.model_type||aYe[t.type]||t.type,...uYe(t,e[0])})}var Qae=AO;function kO({accuracy_target:t}={}){return{fit:{epochs:300,batchSize:20}}}function sYe(t){return(t==null?void 0:t.type)==="forecast"?Array.from(new Set(t.inputs.concat(["year","month","day"]))):t.inputs}function oYe(t){return t!=null&&t.Date?"Date":"date"}function uYe(t,e){let r={};return!(t!=null&&t.model_options)&&(t==null?void 0:t.type)==="forecast"&&(r.prediction_timeseries_time_zone=t==null?void 0:t.forecast_date_time_zone,r.prediction_timeseries_date_feature=(t==null?void 0:t.forecast_date_field)||oYe(e),r.prediction_timeseries_date_format=t==null?void 0:t.forecast_date_format,r.validate_training_data=!0,r.retrain_forecast_model_with_predictions=!0,r.use_next_value_functions_for_training_data=!0,r.use_mock_dates_to_fit_trainning_data=!0,r.use_preprocessing_on_trainning_data=!0,r.training_feature_column_options={year:["onehot"],month:["onehot"],day:["onehot"]}),{...r,...t==null?void 0:t.model_options}}return lse(fYe);})();
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
    * @license
    * Copyright 2021 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/** @license See the LICENSE file. */
//# sourceMappingURL=index.min.js.map
